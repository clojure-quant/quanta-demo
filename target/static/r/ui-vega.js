(function(){
shadow$provide[420]=function(ob,Ba,Gb,Ea){Ea.__esModule=!0;Ea.default=function(w,u){void 0===w&&(w=A);void 0===u&&(u=A);const x=Object.keys(w),I=Object.keys(u);return w===u||x.length===I.length&&x.every(B=>w[B]===u[B])};const A={}};
shadow$provide[421]=function(ob,Ba,Gb,Ea){(function(A,w){"object"===typeof Ea&&"undefined"!==typeof Gb?w(Ea):"function"===typeof define&&define.amd?define(["exports"],w):(A="undefined"!==typeof globalThis?globalThis:A||self,w(A.vega={}))})(this,function(A){function w(Ca,Aa,Ga){Ca.fields=Aa||[];Ca.fname=Ga;return Ca}function u(Ca){return null==Ca?null:Ca.fields}function x(Ca){return 1===Ca.length?ta(Ca[0]):aa(Ca)}function I(Ca){throw Error(Ca);}function B(Ca){function Aa(){Ga.push(La+Ca.substring(Bb,
Ob));La="";Bb=Ob+1}const Ga=[],Ka=Ca.length;let cb=null,fb=0,La="",Bb,Ob,ec;Ca+="";for(Bb=Ob=0;Ob<Ka;++Ob)(ec=Ca[Ob],"\\"===ec)?(La+=Ca.substring(Bb,Ob++),Bb=Ob):ec===cb?(Aa(),cb=null,fb=-1):cb||(Bb===fb&&'"'===ec?(Bb=Ob+1,cb=ec):Bb===fb&&"'"===ec?(Bb=Ob+1,cb=ec):"."!==ec||fb?"["===ec?(Ob>Bb&&Aa(),fb=Bb=Ob+1):"]"===ec&&(fb||I("Access path missing open bracket: "+Ca),0<fb&&Aa(),fb=0,Bb=Ob+1):Ob>Bb?Aa():Bb=Ob+1);fb&&I("Access path missing closing bracket: "+Ca);cb&&I("Access path missing closing quote: "+
Ca);Ob>Bb&&(Ob++,Aa());return Ga}function N(Ca,Aa,Ga){const Ka=B(Ca);Ca=1===Ka.length?Ka[0]:Ca;return w((Ga&&Ga.get||x)(Ka),[Ca],Aa||Ca)}function da(Ca,Aa,Ga){Aa=[Aa].concat([].slice.call(Ga));console[Ca].apply(console,Aa)}function U(Ca){return Ca===Object(Ca)}function X(Ca,Aa,Ga,Ka){if("__proto__"!==Aa){var cb;if(U(Ga)&&!R(Ga))for(cb in Ca=U(Ca[Aa])?Ca[Aa]:Ca[Aa]={},Ga)Ka&&(!0===Ka||Ka[cb])?X(Ca,cb,Ga[cb]):"__proto__"!==cb&&(Ca[cb]=Ga[cb]);else Ca[Aa]=Ga}}function V(Ca,Aa){function Ga(fb){Ka[fb.name]||
(Ka[fb.name]=1,cb.push(fb))}if(null==Ca)return Aa;const Ka={},cb=[];Aa.forEach(Ga);Ca.forEach(Ga);return cb}function P(Ca){return Ca[Ca.length-1]}function z(Ca){return null==Ca||""===Ca?null:+Ca}function G(Ca,Aa,Ga,Ka){const cb=Ga(Ca[0]);Ca=Ga(P(Ca));Aa*=Ca-cb;return[Ka(cb-Aa),Ka(Ca-Aa)]}function Y(Ca,Aa,Ga,Ka,cb){const fb=Ka(Ca[0]);Ca=Ka(P(Ca));Aa=null!=Aa?Ka(Aa):(fb+Ca)/2;return[cb(Aa+(fb-Aa)*Ga),cb(Aa+(Ca-Aa)*Ga)]}function Q(Ca){return null!=Ca?R(Ca)?Ca:[Ca]:[]}function ja(Ca){return"function"===
typeof Ca}function pa(Ca){for(let Aa,Ga,Ka=1,cb=arguments.length;Ka<cb;++Ka)for(Ga in Aa=arguments[Ka],Aa)Ca[Ga]=Aa[Ga];return Ca}function J(Ca,Aa){return Va.call(Ca,Aa)}function K(Ca){return"[object Date]"===Object.prototype.toString.call(Ca)}function ba(Ca){return"number"===typeof Ca}function O(Ca){return"string"===typeof Ca}function fa(Ca,Aa){let Ga="";for(;0<=--Aa;)Ga+=Ca;return Ga}function wa(Ca){return R(Ca)?"["+Ca.map(wa)+"]":U(Ca)||O(Ca)?JSON.stringify(Ca).replace("\u2028","\\u2028").replace("\u2029",
"\\u2029"):Ca}const ta=Ca=>function(Aa){return Aa[Ca]},aa=Ca=>{const Aa=Ca.length;return function(Ga){for(let Ka=0;Ka<Aa;++Ka)Ga=Ga[Ca[Ka]];return Ga}},ha=N("id"),ka=w(Ca=>Ca,[],"identity"),H=w(()=>0,[],"zero"),oa=w(()=>1,[],"one"),ea=w(()=>!0,[],"true"),D=w(()=>!1,[],"false");var R=Array.isArray;const la=Ca=>Aa=>Ca*Math.exp(Aa),Ia=Ca=>Aa=>Math.log(Ca*Aa),Ma=Ca=>Aa=>Math.sign(Aa)*Math.log1p(Math.abs(Aa/Ca)),Ta=Ca=>Aa=>Math.sign(Aa)*Math.expm1(Math.abs(Aa))*Ca,ab=Ca=>Aa=>0>Aa?-Math.pow(-Aa,Ca):Math.pow(Aa,
Ca),db=(Ca,Aa)=>(Ca<Aa||null==Ca)&&null!=Aa?-1:(Ca>Aa||null==Aa)&&null!=Ca?1:(Aa=Aa instanceof Date?+Aa:Aa,Ca=Ca instanceof Date?+Ca:Ca)!==Ca&&Aa===Aa?-1:Aa!==Aa&&Ca===Ca?1:0,ub=(Ca,Aa)=>1===Ca.length?pb(Ca[0],Aa[0]):Ya(Ca,Aa,Ca.length),pb=(Ca,Aa)=>function(Ga,Ka){return db(Ca(Ga),Ca(Ka))*Aa},Ya=(Ca,Aa,Ga)=>{Aa.push(0);return function(Ka,cb){var fb=0;let La=-1;for(;0===fb&&++La<Ga;)fb=Ca[La],fb=db(fb(Ka),fb(cb));return fb*Aa[La]}},Va=Object.prototype.hasOwnProperty,Pa={},Ha=Ca=>ba(Ca)?Ca:K(Ca)?Ca:
Date.parse(Ca);A.Debug=4;A.Error=1;A.Info=3;A.None=0;A.Warn=2;A.accessor=w;A.accessorFields=u;A.accessorName=function(Ca){return null==Ca?null:Ca.fname};A.array=Q;A.ascending=db;A.clampRange=function(Ca,Aa,Ga){let Ka=Ca[0];Ca=Ca[1];let cb;Ca<Ka&&(cb=Ca,Ca=Ka,Ka=cb);cb=Ca-Ka;return cb>=Ga-Aa?[Aa,Ga]:[Ka=Math.min(Math.max(Ka,Aa),Ga-cb),Ka+cb]};A.compare=function(Ca,Aa,Ga){Ga=Ga||{};Aa=Q(Aa)||[];const Ka=[],cb=[],fb={},La=Ga.comparator||ub;Q(Ca).forEach((Bb,Ob)=>{null!=Bb&&(Ka.push("descending"===Aa[Ob]?
-1:1),cb.push(Bb=ja(Bb)?Bb:N(Bb,null,Ga)),(u(Bb)||[]).forEach(ec=>fb[ec]=1))});return 0===cb.length?null:w(La(cb,Ka),Object.keys(fb))};A.constant=function(Ca){return ja(Ca)?Ca:()=>Ca};A.debounce=function(Ca,Aa){let Ga;return Ka=>{Ga&&clearTimeout(Ga);Ga=setTimeout(()=>(Aa(Ka),Ga=null),Ca)}};A.error=I;A.extend=pa;A.extent=function(Ca,Aa){let Ga=0,Ka,cb,fb,La;if(Ca&&(Ka=Ca.length))if(null==Aa){for(cb=Ca[Ga];Ga<Ka&&(null==cb||cb!==cb);cb=Ca[++Ga]);for(fb=La=cb;Ga<Ka;++Ga)cb=Ca[Ga],null!=cb&&(cb<fb&&
(fb=cb),cb>La&&(La=cb))}else{for(cb=Aa(Ca[Ga]);Ga<Ka&&(null==cb||cb!==cb);cb=Aa(Ca[++Ga]));for(fb=La=cb;Ga<Ka;++Ga)cb=Aa(Ca[Ga]),null!=cb&&(cb<fb&&(fb=cb),cb>La&&(La=cb))}return[fb,La]};A.extentIndex=function(Ca,Aa){const Ga=Ca.length;let Ka=-1,cb,fb,La,Bb,Ob;if(null==Aa){for(;++Ka<Ga;)if(fb=Ca[Ka],null!=fb&&fb>=fb){cb=La=fb;break}if(Ka===Ga)return[-1,-1];for(Bb=Ob=Ka;++Ka<Ga;)fb=Ca[Ka],null!=fb&&(cb>fb&&(cb=fb,Bb=Ka),La<fb&&(La=fb,Ob=Ka))}else{for(;++Ka<Ga;)if(fb=Aa(Ca[Ka],Ka,Ca),null!=fb&&fb>=fb){cb=
La=fb;break}if(Ka===Ga)return[-1,-1];for(Bb=Ob=Ka;++Ka<Ga;)fb=Aa(Ca[Ka],Ka,Ca),null!=fb&&(cb>fb&&(cb=fb,Bb=Ka),La<fb&&(La=fb,Ob=Ka))}return[Bb,Ob]};A.falsy=D;A.fastmap=function(Ca){function Aa(fb){return J(Ga,fb)&&Ga[fb]!==Pa}let Ga={},Ka;const cb={size:0,empty:0,object:Ga,has:Aa,get(fb){return Aa(fb)?Ga[fb]:void 0},set(fb,La){Aa(fb)||(++cb.size,Ga[fb]===Pa&&--cb.empty);Ga[fb]=La;return this},delete(fb){Aa(fb)&&(--cb.size,++cb.empty,Ga[fb]=Pa);return this},clear(){cb.size=cb.empty=0;cb.object=Ga=
{}},test(fb){return arguments.length?(Ka=fb,cb):Ka},clean(){const fb={};let La=0;for(const Bb in Ga){const Ob=Ga[Bb];Ob===Pa||Ka&&Ka(Ob)||(fb[Bb]=Ob,++La)}cb.size=La;cb.empty=0;cb.object=Ga=fb}};Ca&&Object.keys(Ca).forEach(fb=>{cb.set(fb,Ca[fb])});return cb};A.field=N;A.flush=function(Ca,Aa,Ga,Ka,cb,fb){if(!Ga&&0!==Ga)return fb;Ga=+Ga;let La=Ca[0],Bb=P(Ca);Bb<La&&(Ca=La,La=Bb,Bb=Ca);Ca=Math.abs(Aa-La);Aa=Math.abs(Bb-Aa);return Ca<Aa&&Ca<=Ga?Ka:Aa<=Ga?cb:fb};A.hasOwnProperty=J;A.id=ha;A.identity=ka;
A.inherits=function(Ca,Aa,Ga){Aa=Ca.prototype=Object.create(Aa.prototype);Object.defineProperty(Aa,"constructor",{value:Ca,writable:!0,enumerable:!0,configurable:!0});return pa(Aa,Ga)};A.inrange=function(Ca,Aa,Ga,Ka){let cb=Aa[0];Aa=Aa[Aa.length-1];let fb;cb>Aa&&(fb=cb,cb=Aa,Aa=fb);return(void 0===Ga||Ga?cb<=Ca:cb<Ca)&&(void 0===Ka||Ka?Ca<=Aa:Ca<Aa)};A.isArray=R;A.isBoolean=function(Ca){return"boolean"===typeof Ca};A.isDate=K;A.isFunction=ja;A.isIterable=function(Ca){return Ca&&ja(Ca[Symbol.iterator])};
A.isNumber=ba;A.isObject=U;A.isRegExp=function(Ca){return"[object RegExp]"===Object.prototype.toString.call(Ca)};A.isString=O;A.key=function(Ca,Aa,Ga){Ca&&(Ca=Aa?Q(Ca).map(fb=>fb.replace(/\\(.)/g,"$1")):Q(Ca));const Ka=Ca&&Ca.length,cb=Ga&&Ga.get||x;Ga=fb=>cb(Aa?[fb]:B(fb));if(Ka)if(1===Ka){const fb=Ga(Ca[0]);Ga=function(La){return""+fb(La)}}else{const fb=Ca.map(Ga);Ga=function(La){let Bb=""+fb[0](La),Ob=0;for(;++Ob<Ka;)Bb+="|"+fb[Ob](La);return Bb}}else Ga=function(){return""};return w(Ga,Ca,"key")};
A.lerp=function(Ca,Aa){const Ga=Ca[0];Ca=P(Ca);return(Aa=+Aa)?1===Aa?Ca:Ga+Aa*(Ca-Ga):Ga};A.logger=function(Ca,Aa,Ga=da){let Ka=Ca||0;return{level(cb){return arguments.length?(Ka=+cb,this):Ka},error(){1<=Ka&&Ga(Aa||"error","ERROR",arguments);return this},warn(){2<=Ka&&Ga(Aa||"warn","WARN",arguments);return this},info(){3<=Ka&&Ga(Aa||"log","INFO",arguments);return this},debug(){4<=Ka&&Ga(Aa||"log","DEBUG",arguments);return this}}};A.lruCache=function(Ca){Ca=+Ca||1E4;let Aa,Ga,Ka;const cb=()=>{Aa={};
Ga={};Ka=0},fb=(La,Bb)=>{++Ka>Ca&&(Ga=Aa,Aa={},Ka=1);return Aa[La]=Bb};cb();return{clear:cb,has:La=>J(Aa,La)||J(Ga,La),get:La=>J(Aa,La)?Aa[La]:J(Ga,La)?fb(La,Ga[La]):void 0,set:(La,Bb)=>J(Aa,La)?Aa[La]=Bb:fb(La,Bb)}};A.merge=function(Ca,Aa,Ga,Ka){const cb=Aa.length,fb=Ga.length;if(!fb)return Aa;if(!cb)return Ga;Ka=Ka||new Aa.constructor(cb+fb);let La=0,Bb=0,Ob=0;for(;La<cb&&Bb<fb;++Ob)Ka[Ob]=0<Ca(Aa[La],Ga[Bb])?Ga[Bb++]:Aa[La++];for(;La<cb;++La,++Ob)Ka[Ob]=Aa[La];for(;Bb<fb;++Bb,++Ob)Ka[Ob]=Ga[Bb];
return Ka};A.mergeConfig=function(...Ca){return Ca.reduce((Aa,Ga)=>{for(const Ka in Ga)"signals"===Ka?Aa.signals=V(Aa.signals,Ga.signals):X(Aa,Ka,Ga[Ka],"legend"===Ka?{layout:1}:"style"===Ka?!0:null);return Aa},{})};A.one=oa;A.pad=function(Ca,Aa,Ga,Ka){Ga=Ga||" ";Ca+="";Aa-=Ca.length;return 0>=Aa?Ca:"left"===Ka?fa(Ga,Aa)+Ca:"center"===Ka?fa(Ga,~~(Aa/2))+Ca+fa(Ga,Math.ceil(Aa/2)):Ca+fa(Ga,Aa)};A.panLinear=function(Ca,Aa){return G(Ca,Aa,z,ka)};A.panLog=function(Ca,Aa){var Ga=Math.sign(Ca[0]);return G(Ca,
Aa,Ia(Ga),la(Ga))};A.panPow=function(Ca,Aa,Ga){return G(Ca,Aa,ab(Ga),ab(1/Ga))};A.panSymlog=function(Ca,Aa,Ga){return G(Ca,Aa,Ma(Ga),Ta(Ga))};A.peek=P;A.quarter=function(Ca){return 1+~~((new Date(Ca)).getMonth()/3)};A.repeat=fa;A.span=function(Ca){return Ca&&P(Ca)-Ca[0]||0};A.splitAccessPath=B;A.stringValue=wa;A.toBoolean=function(Ca){return null==Ca||""===Ca?null:Ca&&"false"!==Ca&&"0"!==Ca?!!Ca:!1};A.toDate=function(Ca,Aa){Aa=Aa||Ha;return null==Ca||""===Ca?null:Aa(Ca)};A.toNumber=z;A.toSet=function(Ca){const Aa=
{},Ga=Ca.length;for(let Ka=0;Ka<Ga;++Ka)Aa[Ca[Ka]]=!0;return Aa};A.toString=function(Ca){return null==Ca||""===Ca?null:Ca+""};A.truncate=function(Ca,Aa,Ga,Ka){Ka=null!=Ka?Ka:"…";Ca+="";const cb=Ca.length,fb=Math.max(0,Aa-Ka.length);return cb<=Aa?Ca:"left"===Ga?Ka+Ca.slice(cb-fb):"center"===Ga?Ca.slice(0,Math.ceil(fb/2))+Ka+Ca.slice(cb-~~(fb/2)):Ca.slice(0,fb)+Ka};A.truthy=ea;A.utcquarter=function(Ca){return 1+~~((new Date(Ca)).getUTCMonth()/3)};A.visitArray=function(Ca,Aa,Ga){if(Ca)if(Aa){const Ka=
Ca.length;for(let cb=0;cb<Ka;++cb){const fb=Aa(Ca[cb]);fb&&Ga(fb,cb,Ca)}}else Ca.forEach(Ga)};A.writeConfig=X;A.zero=H;A.zoomLinear=function(Ca,Aa,Ga){return Y(Ca,Aa,Ga,z,ka)};A.zoomLog=function(Ca,Aa,Ga){const Ka=Math.sign(Ca[0]);return Y(Ca,Aa,Ga,Ia(Ka),la(Ka))};A.zoomPow=function(Ca,Aa,Ga,Ka){return Y(Ca,Aa,Ga,ab(Ka),ab(1/Ka))};A.zoomSymlog=function(Ca,Aa,Ga,Ka){return Y(Ca,Aa,Ga,Ma(Ka),Ta(Ka))}})};
shadow$provide[422]=function(ob,Ba,Gb,Ea){(function(A,w){"object"===typeof Ea&&"undefined"!==typeof Gb?w(Ea):"function"===typeof define&&define.amd?define(["exports"],w):(A=A||self,w(A.topojson=A.topojson||{}))})(this,function(A){function w(z){return z}function u(z){if(null==z)return w;var G,Y,Q=z.scale[0],ja=z.scale[1],pa=z.translate[0],J=z.translate[1];return function(K,ba){ba||(G=Y=0);ba=2;var O=K.length,fa=Array(O);fa[0]=(G+=K[0])*Q+pa;for(fa[1]=(Y+=K[1])*ja+J;ba<O;)fa[ba]=K[ba],++ba;return fa}}
function x(z){function G(O){O=Q(O);O[0]<pa&&(pa=O[0]);O[0]>K&&(K=O[0]);O[1]<J&&(J=O[1]);O[1]>ba&&(ba=O[1])}function Y(O){switch(O.type){case "GeometryCollection":O.geometries.forEach(Y);break;case "Point":G(O.coordinates);break;case "MultiPoint":O.coordinates.forEach(G)}}var Q=u(z.transform),ja,pa=Infinity,J=pa,K=-pa,ba=-pa;z.arcs.forEach(function(O){for(var fa=-1,wa=O.length,ta;++fa<wa;)ta=Q(O[fa],fa),ta[0]<pa&&(pa=ta[0]),ta[0]>K&&(K=ta[0]),ta[1]<J&&(J=ta[1]),ta[1]>ba&&(ba=ta[1])});for(ja in z.objects)Y(z.objects[ja]);
return[pa,J,K,ba]}function I(z,G){var Y=G.id,Q=G.bbox,ja=null==G.properties?{}:G.properties;z=B(z,G);return null==Y&&null==Q?{type:"Feature",properties:ja,geometry:z}:null==Q?{type:"Feature",id:Y,properties:ja,geometry:z}:{type:"Feature",id:Y,bbox:Q,properties:ja,geometry:z}}function B(z,G){function Y(O){return K(O)}function Q(O){for(var fa=[],wa=0,ta=O.length;wa<ta;++wa){var aa=O[wa],ha=fa;ha.length&&ha.pop();for(var ka=ba[0>aa?~aa:aa],H=0,oa=ka.length;H<oa;++H)ha.push(K(ka[H],H));if(0>aa)for(aa=
ha,ha=aa.length,ka=ha-oa;ka<--ha;)oa=aa[ka],aa[ka++]=aa[ha],aa[ha]=oa}2>fa.length&&fa.push(fa[0]);return fa}function ja(O){for(O=Q(O);4>O.length;)O.push(O[0]);return O}function pa(O){return O.map(ja)}function J(O){var fa=O.type;switch(fa){case "GeometryCollection":return{type:fa,geometries:O.geometries.map(J)};case "Point":O=K(O.coordinates);break;case "MultiPoint":O=O.coordinates.map(Y);break;case "LineString":O=Q(O.arcs);break;case "MultiLineString":O=O.arcs.map(Q);break;case "Polygon":O=pa(O.arcs);
break;case "MultiPolygon":O=O.arcs.map(pa);break;default:return null}return{type:fa,coordinates:O}}var K=u(z.transform),ba=z.arcs;return J(G)}function N(z,G){function Y(O){var fa=z.arcs[0>O?~O:O],wa=fa[0];if(z.transform){var ta=[0,0];fa.forEach(function(aa){ta[0]+=aa[0];ta[1]+=aa[1]})}else ta=fa[fa.length-1];return 0>O?[ta,wa]:[wa,ta]}function Q(O,fa){for(var wa in O){var ta=O[wa];delete fa[ta.start];delete ta.start;delete ta.end;ta.forEach(function(aa){ja[0>aa?~aa:aa]=1});K.push(ta)}}var ja={},pa=
{},J={},K=[],ba=-1;G.forEach(function(O,fa){var wa=z.arcs[0>O?~O:O];3>wa.length&&!wa[1][0]&&!wa[1][1]&&(wa=G[++ba],G[ba]=O,G[fa]=wa)});G.forEach(function(O){var fa=Y(O),wa=fa[0],ta=fa[1];(fa=J[wa])?(delete J[fa.end],fa.push(O),fa.end=ta,(O=pa[ta])?(delete pa[O.start],wa=O===fa?fa:fa.concat(O),pa[wa.start=fa.start]=J[wa.end=O.end]=wa):pa[fa.start]=J[fa.end]=fa):(fa=pa[ta])?(delete pa[fa.start],fa.unshift(O),fa.start=wa,(O=J[wa])?(delete J[O.end],wa=O===fa?fa:O.concat(fa),pa[wa.start=O.start]=J[wa.end=
fa.end]=wa):pa[fa.start]=J[fa.end]=fa):(fa=[O],pa[fa.start=wa]=J[fa.end=ta]=fa)});Q(J,pa);Q(pa,J);G.forEach(function(O){ja[0>O?~O:O]||K.push([O])});return K}function da(z,G,Y){var Q;if(1<arguments.length)var ja=U(z,G,Y);else{var pa=0;for(ja=Array(Q=z.arcs.length);pa<Q;++pa)ja[pa]=pa}return{type:"MultiLineString",arcs:N(z,ja)}}function U(z,G,Y){function Q(fa){var wa=0>fa?~fa:fa;(ba[wa]||(ba[wa]=[])).push({i:fa,g:O})}function ja(fa){fa.forEach(Q)}function pa(fa){fa.forEach(ja)}function J(fa){switch(O=
fa,fa.type){case "GeometryCollection":fa.geometries.forEach(J);break;case "LineString":ja(fa.arcs);break;case "MultiLineString":case "Polygon":pa(fa.arcs);break;case "MultiPolygon":fa.arcs.forEach(pa)}}var K=[],ba=[],O;J(G);ba.forEach(null==Y?function(fa){K.push(fa[0].i)}:function(fa){Y(fa[0].g,fa[fa.length-1].g)&&K.push(fa[0].i)});return K}function X(z,G){function Y(ba){switch(ba.type){case "GeometryCollection":ba.geometries.forEach(Y);break;case "Polygon":Q(ba.arcs);break;case "MultiPolygon":ba.arcs.forEach(Q)}}
function Q(ba){ba.forEach(function(O){O.forEach(function(fa){(pa[fa=0>fa?~fa:fa]||(pa[fa]=[])).push(ba)})});J.push(ba)}function ja(ba){ba=B(z,{type:"Polygon",arcs:[ba]}).coordinates[0];for(var O=-1,fa=ba.length,wa,ta=ba[fa-1],aa=0;++O<fa;)wa=ta,ta=ba[O],aa+=wa[0]*ta[1]-wa[1]*ta[0];return Math.abs(aa)}var pa={},J=[],K=[];G.forEach(Y);J.forEach(function(ba){if(!ba._){var O=[],fa=[ba];ba._=1;for(K.push(O);ba=fa.pop();)O.push(ba),ba.forEach(function(wa){wa.forEach(function(ta){pa[0>ta?~ta:ta].forEach(function(aa){aa._||
(aa._=1,fa.push(aa))})})})}});J.forEach(function(ba){delete ba._});return{type:"MultiPolygon",arcs:K.map(function(ba){var O=[];ba.forEach(function(aa){aa.forEach(function(ha){ha.forEach(function(ka){2>pa[0>ka?~ka:ka].length&&O.push(ka)})})});O=N(z,O);if(1<(ba=O.length))for(var fa=1,wa=ja(O[0]),ta;fa<ba;++fa)(ta=ja(O[fa]))>wa&&(wa=O[0],O[0]=O[fa],O[fa]=wa,wa=ta);return O}).filter(function(ba){return 0<ba.length})}}function V(z,G){for(var Y=0,Q=z.length;Y<Q;){var ja=Y+Q>>>1;z[ja]<G?Y=ja+1:Q=ja}return Y}
function P(z){if(null==z)return w;var G,Y,Q=z.scale[0],ja=z.scale[1],pa=z.translate[0],J=z.translate[1];return function(K,ba){ba||(G=Y=0);ba=2;var O=K.length,fa=Array(O),wa=Math.round((K[0]-pa)/Q),ta=Math.round((K[1]-J)/ja);fa[0]=wa-G;G=wa;fa[1]=ta-Y;for(Y=ta;ba<O;)fa[ba]=K[ba],++ba;return fa}}A.bbox=x;A.feature=function(z,G){"string"===typeof G&&(G=z.objects[G]);return"GeometryCollection"===G.type?{type:"FeatureCollection",features:G.geometries.map(function(Y){return I(z,Y)})}:I(z,G)};A.merge=function(z){return B(z,
X.apply(this,arguments))};A.mergeArcs=X;A.mesh=function(z){return B(z,da.apply(this,arguments))};A.meshArcs=da;A.neighbors=function(z){function G(ha,ka){ha.forEach(function(H){0>H&&(H=~H);var oa=ja[H];oa?oa.push(ka):ja[H]=[ka]})}function Y(ha,ka){ha.forEach(function(H){G(H,ka)})}function Q(ha,ka){if("GeometryCollection"===ha.type)ha.geometries.forEach(function(H){Q(H,ka)});else if(ha.type in J)J[ha.type](ha.arcs,ka)}var ja={},pa=z.map(function(){return[]}),J={LineString:G,MultiLineString:Y,Polygon:Y,
MultiPolygon:function(ha,ka){ha.forEach(function(H){Y(H,ka)})}};z.forEach(Q);for(var K in ja){z=ja[K];for(var ba=z.length,O=0;O<ba;++O)for(var fa=O+1;fa<ba;++fa){var wa=z[O],ta=z[fa],aa;(aa=pa[wa])[K=V(aa,ta)]!==ta&&aa.splice(K,0,ta);(aa=pa[ta])[K=V(aa,wa)]!==wa&&aa.splice(K,0,wa)}}return pa};A.quantize=function(z,G){function Y(wa){return O(wa)}function Q(wa){switch(wa.type){case "GeometryCollection":var ta={type:"GeometryCollection",geometries:wa.geometries.map(Q)};break;case "Point":ta={type:"Point",
coordinates:O(wa.coordinates)};break;case "MultiPoint":ta={type:"MultiPoint",coordinates:wa.coordinates.map(Y)};break;default:return wa}null!=wa.id&&(ta.id=wa.id);null!=wa.bbox&&(ta.bbox=wa.bbox);null!=wa.properties&&(ta.properties=wa.properties);return ta}if(z.transform)throw Error("already quantized");if(G&&G.scale)var ja=z.bbox;else{if(!(2<=(ba=Math.floor(G))))throw Error("n must be ≥2");ja=z.bbox||x(z);G=ja[0];var pa=ja[1],J=ja[2],K=ja[3],ba;G={scale:[J-G?(J-G)/(ba-1):1,K-pa?(K-pa)/(ba-1):1],
translate:[G,pa]}}var O=P(G),fa;pa=z.objects;J={};for(fa in pa)J[fa]=Q(pa[fa]);return{type:"Topology",bbox:ja,transform:G,objects:J,arcs:z.arcs.map(function(wa){var ta=0,aa=1,ha=wa.length,ka,H=Array(ha);for(H[0]=O(wa[0],0);++ta<ha;)if((ka=O(wa[ta],ta))[0]||ka[1])H[aa++]=ka;1===aa&&(H[aa++]=[0,0]);H.length=aa;return H})}};A.transform=u;A.untransform=P;Object.defineProperty(A,"__esModule",{value:!0})})};
shadow$provide[423]=function(ob,Ba,Gb,Ea){(function(A,w){"object"===typeof Ea&&"undefined"!==typeof Gb?w(Ea,Ba(421)):"function"===typeof define&&define.amd?define(["exports","vega-util"],w):(A="undefined"!==typeof globalThis?globalThis:A||self,w(A.vega={},A.vega))})(this,function(A,w){function u(Kb){const mc=w.array(Kb).slice(),Ub={};mc.length||w.error("Missing time unit.");mc.forEach(oc=>{w.hasOwnProperty(aa,oc)?Ub[oc]=1:w.error(`Invalid time unit: ${oc}.`)});1<(Ub.week||Ub.day?1:0)+(Ub.quarter||
Ub.month||Ub.date?1:0)+(Ub.dayofyear?1:0)&&w.error(`Incompatible time units: ${Kb}`);mc.sort((oc,Cc)=>aa[oc]-aa[Cc]);return mc}function x(Kb,mc,Ub,oc){function Cc(Mc){return Kb(Mc=0===arguments.length?new Date:new Date(+Mc)),Mc}Cc.floor=Mc=>(Kb(Mc=new Date(+Mc)),Mc);Cc.ceil=Mc=>(Kb(Mc=new Date(Mc-1)),mc(Mc,1),Kb(Mc),Mc);Cc.round=Mc=>{const Pb=Cc(Mc),nc=Cc.ceil(Mc);return Mc-Pb<nc-Mc?Pb:nc};Cc.offset=(Mc,Pb)=>(mc(Mc=new Date(+Mc),null==Pb?1:Math.floor(Pb)),Mc);Cc.range=(Mc,Pb,nc)=>{const rc=[];Mc=
Cc.ceil(Mc);nc=null==nc?1:Math.floor(nc);if(!(Mc<Pb&&0<nc))return rc;let Hb;do rc.push(Hb=new Date(+Mc)),mc(Mc,nc),Kb(Mc);while(Hb<Mc&&Mc<Pb);return rc};Cc.filter=Mc=>x(Pb=>{if(Pb>=Pb)for(;Kb(Pb),!Mc(Pb);)Pb.setTime(Pb-1)},(Pb,nc)=>{if(Pb>=Pb)if(0>nc)for(;0>=++nc;)for(;mc(Pb,-1),!Mc(Pb););else for(;0<=--nc;)for(;mc(Pb,1),!Mc(Pb););});Ub&&(Cc.count=(Mc,Pb)=>{ka.setTime(+Mc);H.setTime(+Pb);Kb(ka);Kb(H);return Math.floor(Ub(ka,H))},Cc.every=Mc=>{Mc=Math.floor(Mc);return isFinite(Mc)&&0<Mc?1<Mc?Cc.filter(oc?
Pb=>0===oc(Pb)%Mc:Pb=>0===Cc.count(0,Pb)%Mc):Cc:null});return Cc}function I(Kb){return x(mc=>{mc.setDate(mc.getDate()-(mc.getDay()+7-Kb)%7);mc.setHours(0,0,0,0)},(mc,Ub)=>{mc.setDate(mc.getDate()+7*Ub)},(mc,Ub)=>(Ub-mc-6E4*(Ub.getTimezoneOffset()-mc.getTimezoneOffset()))/ea)}function B(Kb){return x(mc=>{mc.setUTCDate(mc.getUTCDate()-(mc.getUTCDay()+7-Kb)%7);mc.setUTCHours(0,0,0,0)},(mc,Ub)=>{mc.setUTCDate(mc.getUTCDate()+7*Ub)},(mc,Ub)=>(Ub-mc)/ea)}function N(Kb,mc){return null==Kb||null==mc?NaN:
Kb<mc?-1:Kb>mc?1:Kb>=mc?0:NaN}function da(Kb,mc){return null==Kb||null==mc?NaN:mc<Kb?-1:mc>Kb?1:mc>=Kb?0:NaN}function U(Kb){function mc(Mc,Pb,nc=0,rc=Mc.length){if(nc<rc){if(0!==Ub(Pb,Pb))return rc;do{const Hb=nc+rc>>>1;0>oc(Mc[Hb],Pb)?nc=Hb+1:rc=Hb}while(nc<rc)}return nc}let Ub,oc,Cc;2!==Kb.length?(Ub=N,oc=(Mc,Pb)=>N(Kb(Mc),Pb),Cc=(Mc,Pb)=>Kb(Mc)-Pb):(Ub=Kb===N||Kb===da?Kb:X,Cc=oc=Kb);return{left:mc,center:function(Mc,Pb,nc=0,rc=Mc.length){rc=mc(Mc,Pb,nc,rc-1);return rc>nc&&Cc(Mc[rc-1],Pb)>-Cc(Mc[rc],
Pb)?rc-1:rc},right:function(Mc,Pb,nc=0,rc=Mc.length){if(nc<rc){if(0!==Ub(Pb,Pb))return rc;do{const Hb=nc+rc>>>1;0>=oc(Mc[Hb],Pb)?nc=Hb+1:rc=Hb}while(nc<rc)}return nc}}}function X(){return 0}function V(Kb,mc,Ub){var oc=(mc-Kb)/Math.max(0,Ub),Cc=Math.floor(Math.log10(oc));oc/=Math.pow(10,Cc);oc=oc>=Aa?10:oc>=Ga?5:oc>=Ka?2:1;let Mc;0>Cc?(Mc=Math.pow(10,-Cc)/oc,Cc=Math.round(Kb*Mc),oc=Math.round(mc*Mc),Cc/Mc<Kb&&++Cc,oc/Mc>mc&&--oc,Mc=-Mc):(Mc=Math.pow(10,Cc)*oc,Cc=Math.round(Kb/Mc),oc=Math.round(mc/
Mc),Cc*Mc<Kb&&++Cc,oc*Mc>mc&&--oc);return oc<Cc&&.5<=Ub&&2>Ub?V(Kb,mc,2*Ub):[Cc,oc,Mc]}function P(Kb,mc,Ub){return V(+Kb,+mc,+Ub)[2]}function z(Kb,mc,Ub){mc=+mc;Kb=+Kb;Ub=+Ub;const oc=mc<Kb;Kb=oc?P(mc,Kb,Ub):P(Kb,mc,Ub);return(oc?-1:1)*(0>Kb?1/-Kb:Kb)}function G(Kb){cb.setFullYear(Kb);cb.setMonth(0);cb.setDate(1);cb.setHours(0,0,0,0);return cb}function Y(Kb){return Ta.count(G(Kb.getFullYear())-1,Kb)}function Q(Kb){return ub.count(G(Kb.getFullYear())-1,Kb)}function ja(Kb,mc,Ub,oc,Cc,Mc,Pb){return 0<=
Kb&&100>Kb?(mc=new Date(-1,mc,Ub,oc,Cc,Mc,Pb),mc.setFullYear(Kb),mc):new Date(Kb,mc,Ub,oc,Cc,Mc,Pb)}function pa(Kb){const mc=Date.UTC(Kb.getUTCFullYear(),0,1);return ab.count(mc-1,Kb)}function J(Kb){const mc=Date.UTC(Kb.getUTCFullYear(),0,1);return Ca.count(mc-1,Kb)}function K(Kb){cb.setTime(Date.UTC(Kb,0,1));return cb.getUTCDay()}function ba(Kb,mc,Ub,oc,Cc,Mc,Pb){return 0<=Kb&&100>Kb?(Kb=new Date(Date.UTC(-1,mc,Ub,oc,Cc,Mc,Pb)),Kb.setUTCFullYear(Ub.y),Kb):new Date(Date.UTC(Kb,mc,Ub,oc,Cc,Mc,Pb))}
function O(Kb,mc,Ub,oc,Cc){const Mc=mc||1,Pb=w.peek(Kb);mc=(hd,Ed,Qd)=>{Qd=Qd||hd;return fa(Ub[Qd],oc[Qd],hd===Pb&&Mc,Ed)};const nc=new Date;Kb=w.toSet(Kb);const rc=Kb.year?mc("year"):w.constant(2012),Hb=Kb.month?mc("month"):Kb.quarter?mc("quarter"):w.zero,Jc=Kb.week&&Kb.day?mc("day",1,"weekday"):Kb.week?mc("week",1):Kb.day?mc("day",1):Kb.date?mc("date",1):Kb.dayofyear?mc("dayofyear",1):w.one,kc=Kb.hours?mc("hours"):w.zero,Ab=Kb.minutes?mc("minutes"):w.zero,md=Kb.seconds?mc("seconds"):w.zero,yd=Kb.milliseconds?
mc("milliseconds"):w.zero;return function(hd){nc.setTime(+hd);hd=rc(nc);return Cc(hd,Hb(nc),Jc(nc,hd),kc(nc),Ab(nc),md(nc),yd(nc))}}function fa(Kb,mc,Ub,oc){const Cc=1>=Ub?Kb:oc?(Mc,Pb)=>oc+Ub*Math.floor((Kb(Mc,Pb)-oc)/Ub):(Mc,Pb)=>Ub*Math.floor(Kb(Mc,Pb)/Ub);return mc?(Mc,Pb)=>mc(Cc(Mc,Pb),Pb):Cc}function wa(Kb,mc,Ub){return mc+7*Kb-(Ub+6)%7}const ta="year quarter month week date day dayofyear hours minutes seconds milliseconds".split(" "),aa=ta.reduce((Kb,mc,Ub)=>(Kb[mc]=1+Ub,Kb),{}),ha={year:"%Y ",
quarter:"Q%q ",month:"%b ",date:"%d ",week:"W%U ",day:"%a ",dayofyear:"%j ",hours:"%H:00",minutes:"00:%M",seconds:":%S",milliseconds:".%L",["year-month"]:"%Y-%m ",["year-month-date"]:"%Y-%m-%d ",["hours-minutes"]:"%H:%M"},ka=new Date,H=new Date,oa=x(()=>{},(Kb,mc)=>{Kb.setTime(+Kb+mc)},(Kb,mc)=>mc-Kb);oa.every=Kb=>{Kb=Math.floor(Kb);return isFinite(Kb)&&0<Kb?1<Kb?x(mc=>{mc.setTime(Math.floor(mc/Kb)*Kb)},(mc,Ub)=>{mc.setTime(+mc+Ub*Kb)},(mc,Ub)=>(Ub-mc)/Kb):oa:null};oa.range;const ea=6048E5;var D=
x(Kb=>{Kb.setTime(Kb-Kb.getMilliseconds())},(Kb,mc)=>{Kb.setTime(+Kb+1E3*mc)},(Kb,mc)=>(mc-Kb)/1E3,Kb=>Kb.getUTCSeconds());D.range;var R=x(Kb=>{Kb.setTime(Kb-Kb.getMilliseconds()-1E3*Kb.getSeconds())},(Kb,mc)=>{Kb.setTime(+Kb+6E4*mc)},(Kb,mc)=>(mc-Kb)/6E4,Kb=>Kb.getMinutes());R.range;var la=x(Kb=>{Kb.setUTCSeconds(0,0)},(Kb,mc)=>{Kb.setTime(+Kb+6E4*mc)},(Kb,mc)=>(mc-Kb)/6E4,Kb=>Kb.getUTCMinutes());la.range;var Ia=x(Kb=>{Kb.setTime(Kb-Kb.getMilliseconds()-1E3*Kb.getSeconds()-6E4*Kb.getMinutes())},
(Kb,mc)=>{Kb.setTime(+Kb+36E5*mc)},(Kb,mc)=>(mc-Kb)/36E5,Kb=>Kb.getHours());Ia.range;var Ma=x(Kb=>{Kb.setUTCMinutes(0,0,0)},(Kb,mc)=>{Kb.setTime(+Kb+36E5*mc)},(Kb,mc)=>(mc-Kb)/36E5,Kb=>Kb.getUTCHours());Ma.range;const Ta=x(Kb=>Kb.setHours(0,0,0,0),(Kb,mc)=>Kb.setDate(Kb.getDate()+mc),(Kb,mc)=>(mc-Kb-6E4*(mc.getTimezoneOffset()-Kb.getTimezoneOffset()))/864E5,Kb=>Kb.getDate()-1);Ta.range;const ab=x(Kb=>{Kb.setUTCHours(0,0,0,0)},(Kb,mc)=>{Kb.setUTCDate(Kb.getUTCDate()+mc)},(Kb,mc)=>(mc-Kb)/864E5,Kb=>
Kb.getUTCDate()-1);ab.range;var db=x(Kb=>{Kb.setUTCHours(0,0,0,0)},(Kb,mc)=>{Kb.setUTCDate(Kb.getUTCDate()+mc)},(Kb,mc)=>(mc-Kb)/864E5,Kb=>Math.floor(Kb/864E5));db.range;const ub=I(0);db=I(1);var pb=I(2),Ya=I(3),Va=I(4),Pa=I(5),Ha=I(6);ub.range;db.range;pb.range;Ya.range;Va.range;Pa.range;Ha.range;const Ca=B(0);db=B(1);pb=B(2);Ya=B(3);Va=B(4);Pa=B(5);Ha=B(6);Ca.range;db.range;pb.range;Ya.range;Va.range;Pa.range;Ha.range;db=x(Kb=>{Kb.setDate(1);Kb.setHours(0,0,0,0)},(Kb,mc)=>{Kb.setMonth(Kb.getMonth()+
mc)},(Kb,mc)=>mc.getMonth()-Kb.getMonth()+12*(mc.getFullYear()-Kb.getFullYear()),Kb=>Kb.getMonth());db.range;pb=x(Kb=>{Kb.setUTCDate(1);Kb.setUTCHours(0,0,0,0)},(Kb,mc)=>{Kb.setUTCMonth(Kb.getUTCMonth()+mc)},(Kb,mc)=>mc.getUTCMonth()-Kb.getUTCMonth()+12*(mc.getUTCFullYear()-Kb.getUTCFullYear()),Kb=>Kb.getUTCMonth());pb.range;Ya=x(Kb=>{Kb.setMonth(0,1);Kb.setHours(0,0,0,0)},(Kb,mc)=>{Kb.setFullYear(Kb.getFullYear()+mc)},(Kb,mc)=>mc.getFullYear()-Kb.getFullYear(),Kb=>Kb.getFullYear());Ya.every=Kb=>
isFinite(Kb=Math.floor(Kb))&&0<Kb?x(mc=>{mc.setFullYear(Math.floor(mc.getFullYear()/Kb)*Kb);mc.setMonth(0,1);mc.setHours(0,0,0,0)},(mc,Ub)=>{mc.setFullYear(mc.getFullYear()+Ub*Kb)}):null;Ya.range;Va=x(Kb=>{Kb.setUTCMonth(0,1);Kb.setUTCHours(0,0,0,0)},(Kb,mc)=>{Kb.setUTCFullYear(Kb.getUTCFullYear()+mc)},(Kb,mc)=>mc.getUTCFullYear()-Kb.getUTCFullYear(),Kb=>Kb.getUTCFullYear());Va.every=Kb=>isFinite(Kb=Math.floor(Kb))&&0<Kb?x(mc=>{mc.setUTCFullYear(Math.floor(mc.getUTCFullYear()/Kb)*Kb);mc.setUTCMonth(0,
1);mc.setUTCHours(0,0,0,0)},(mc,Ub)=>{mc.setUTCFullYear(mc.getUTCFullYear()+Ub*Kb)}):null;Va.range;const Aa=Math.sqrt(50),Ga=Math.sqrt(10),Ka=Math.sqrt(2),cb=new Date,fb={year:Kb=>Kb.getFullYear(),quarter:Kb=>Math.floor(Kb.getMonth()/3),month:Kb=>Kb.getMonth(),date:Kb=>Kb.getDate(),hours:Kb=>Kb.getHours(),minutes:Kb=>Kb.getMinutes(),seconds:Kb=>Kb.getSeconds(),milliseconds:Kb=>Kb.getMilliseconds(),dayofyear:Kb=>Y(Kb),week:Kb=>Q(Kb),weekday:(Kb,mc)=>wa(Q(Kb),Kb.getDay(),G(mc).getDay()),day:(Kb,mc)=>
wa(1,Kb.getDay(),G(mc).getDay())},La={quarter:Kb=>3*Kb,week:(Kb,mc)=>wa(Kb,0,G(mc).getDay())},Bb={year:Kb=>Kb.getUTCFullYear(),quarter:Kb=>Math.floor(Kb.getUTCMonth()/3),month:Kb=>Kb.getUTCMonth(),date:Kb=>Kb.getUTCDate(),hours:Kb=>Kb.getUTCHours(),minutes:Kb=>Kb.getUTCMinutes(),seconds:Kb=>Kb.getUTCSeconds(),milliseconds:Kb=>Kb.getUTCMilliseconds(),dayofyear:Kb=>pa(Kb),week:Kb=>J(Kb),day:(Kb,mc)=>wa(1,Kb.getUTCDay(),K(mc)),weekday:(Kb,mc)=>wa(J(Kb),Kb.getUTCDay(),K(mc))},Ob={quarter:Kb=>3*Kb,week:(Kb,
mc)=>wa(Kb,0,K(mc))},ec={year:Ya,quarter:db.every(3),month:db,week:ub,date:Ta,day:Ta,dayofyear:Ta,hours:Ia,minutes:R,seconds:D,milliseconds:oa},sc={year:Va,quarter:pb.every(3),month:pb,week:Ca,date:ab,day:ab,dayofyear:ab,hours:Ma,minutes:la,seconds:D,milliseconds:oa};D=6048E5;R=2592E6;const Ic=31536E6,Xb="year month date hours minutes seconds milliseconds".split(" ");la=Xb.slice(0,-1);Ia=la.slice(0,-1);Ma=Ia.slice(0,-1);db=Ma.slice(0,-1);pb=["year","month"];const Wb=["year"],Kc=[[la,1,1E3],[la,5,
5E3],[la,15,15E3],[la,30,3E4],[Ia,1,6E4],[Ia,5,3E5],[Ia,15,9E5],[Ia,30,18E5],[Ma,1,36E5],[Ma,3,108E5],[Ma,6,216E5],[Ma,12,432E5],[db,1,864E5],[["year","week"],1,D],[pb,1,R],[pb,3,3*R],[Wb,1,Ic]];A.DATE="date";A.DAY="day";A.DAYOFYEAR="dayofyear";A.HOURS="hours";A.MILLISECONDS="milliseconds";A.MINUTES="minutes";A.MONTH="month";A.QUARTER="quarter";A.SECONDS="seconds";A.TIME_UNITS=ta;A.WEEK="week";A.YEAR="year";A.dayofyear=function(Kb){return Y(new Date(Kb))};A.timeBin=function(Kb){var mc=Kb.extent;Kb=
Kb.maxbins||40;var Ub=Math.abs(w.span(mc))/Kb;let oc=U(Cc=>Cc[2]).right(Kc,Ub);oc===Kc.length?(Ub=Wb,mc=z(mc[0]/Ic,mc[1]/Ic,Kb)):oc?(oc=Kc[Ub/Kc[oc-1][2]<Kc[oc][2]/Ub?oc-1:oc],Ub=oc[0],mc=oc[1]):(Ub=Xb,mc=Math.max(z(mc[0],mc[1],Kb),1));return{units:Ub,step:mc}};A.timeFloor=function(Kb,mc){return O(Kb,mc||1,fb,La,ja)};A.timeInterval=function(Kb){return ec[Kb]};A.timeOffset=function(Kb,mc,Ub){return(Kb=ec[Kb])?Kb.offset(mc,Ub):void 0};A.timeSequence=function(Kb,mc,Ub,oc){return(Kb=ec[Kb])?Kb.range(mc,
Ub,oc):void 0};A.timeUnitSpecifier=function(Kb,mc){mc=w.extend({},ha,mc);Kb=u(Kb);const Ub=Kb.length;let oc="",Cc,Mc,Pb;for(Cc=0;Cc<Ub;)for(Mc=Kb.length;Mc>Cc;--Mc)if(Pb=Kb.slice(Cc,Mc).join("-"),null!=mc[Pb]){oc+=mc[Pb];Cc=Mc;break}return oc.trim()};A.timeUnits=u;A.utcFloor=function(Kb,mc){return O(Kb,mc||1,Bb,Ob,ba)};A.utcInterval=function(Kb){return sc[Kb]};A.utcOffset=function(Kb,mc,Ub){return(Kb=sc[Kb])?Kb.offset(mc,Ub):void 0};A.utcSequence=function(Kb,mc,Ub,oc){return(Kb=sc[Kb])?Kb.range(mc,
Ub,oc):void 0};A.utcdayofyear=function(Kb){return pa(new Date(Kb))};A.utcweek=function(Kb){return J(new Date(Kb))};A.week=function(Kb){return Q(new Date(Kb))}})};
shadow$provide[424]=function(ob,Ba,Gb,Ea){(function(A,w){"object"===typeof Ea&&"undefined"!==typeof Gb?w(Ea,Ba(423),Ba(421)):"function"===typeof define&&define.amd?define(["exports","vega-time","vega-util"],w):(A="undefined"!==typeof globalThis?globalThis:A||self,w(A.vega={},A.vega,A.vega))})(this,function(A,w,u){function x(id){const Bd={};return xe=>Bd[xe]||(Bd[xe]=id(xe))}function I(id,Bd,xe){var dg=(Bd-id)/Math.max(0,xe),Sf=Math.floor(Math.log10(dg));dg/=Math.pow(10,Sf);dg=dg>=rf?10:dg>=Ff?5:dg>=
pg?2:1;let Kf;0>Sf?(Kf=Math.pow(10,-Sf)/dg,Sf=Math.round(id*Kf),dg=Math.round(Bd*Kf),Sf/Kf<id&&++Sf,dg/Kf>Bd&&--dg,Kf=-Kf):(Kf=Math.pow(10,Sf)*dg,Sf=Math.round(id/Kf),dg=Math.round(Bd/Kf),Sf*Kf<id&&++Sf,dg*Kf>Bd&&--dg);return dg<Sf&&.5<=xe&&2>xe?I(id,Bd,2*xe):[Sf,dg,Kf]}function B(id,Bd,xe){return I(+id,+Bd,+xe)[2]}function N(id,Bd){if(0>(Bd=(id=Bd?id.toExponential(Bd-1):id.toExponential()).indexOf("e")))return null;var xe=id.slice(0,Bd);return[1<xe.length?xe[0]+xe.slice(2):xe,+id.slice(Bd+1)]}function da(id){return id=
N(Math.abs(id)),id?id[1]:NaN}function U(id,Bd){return function(xe,dg){for(var Sf=xe.length,Kf=[],wg=0,xg=id[0],dh=0;0<Sf&&0<xg;){dh+xg+1>dg&&(xg=Math.max(1,dg-dh));Kf.push(xe.substring(Sf-=xg,Sf+xg));if((dh+=xg+1)>dg)break;xg=id[wg=(wg+1)%id.length]}return Kf.reverse().join(Bd)}}function X(id){return function(Bd){return Bd.replace(/[0-9]/g,function(xe){return id[+xe]})}}function V(id){if(!(Bd=gf.exec(id)))throw Error("invalid format: "+id);var Bd;return new P({fill:Bd[1],align:Bd[2],sign:Bd[3],symbol:Bd[4],
zero:Bd[5],width:Bd[6],comma:Bd[7],precision:Bd[8]&&Bd[8].slice(1),trim:Bd[9],type:Bd[10]})}function P(id){this.fill=void 0===id.fill?" ":id.fill+"";this.align=void 0===id.align?"\x3e":id.align+"";this.sign=void 0===id.sign?"-":id.sign+"";this.symbol=void 0===id.symbol?"":id.symbol+"";this.zero=!!id.zero;this.width=void 0===id.width?void 0:+id.width;this.comma=!!id.comma;this.precision=void 0===id.precision?void 0:+id.precision;this.trim=!!id.trim;this.type=void 0===id.type?"":id.type+""}function z(id,
Bd){Bd=N(id,Bd);if(!Bd)return id+"";id=Bd[0];Bd=Bd[1];return 0>Bd?"0."+Array(-Bd).join("0")+id:id.length>Bd+1?id.slice(0,Bd+1)+"."+id.slice(Bd+1):id+Array(Bd-id.length+2).join("0")}function G(id){return id}function Y(id){function Bd($f){function Rf(eb){var qb=Vb,Qb=qc,zc,ad;if("c"===Eb)Qb=Za(eb)+Qb,eb="";else{eb=+eb;var Rd=0>eb||0>1/eb;eb=isNaN(eb)?cg:Za(Math.abs(eb),Sa);if(lb){var Md=eb.length,nd=1,ee=-1;a:for(;nd<Md;++nd)switch(eb[nd]){case ".":ee=zc=nd;break;case "0":0===ee&&(ee=nd);zc=nd;break;
default:if(!+eb[nd])break a;0<ee&&(ee=0)}eb=0<ee?eb.slice(0,ee)+eb.slice(zc+1):eb}Rd&&0===+eb&&"+"!==gh&&(Rd=!1);qb=(Rd?"("===gh?gh:dh:"-"===gh||"("===gh?"":gh)+qb;Qb=("s"===Eb?Zc[8+Jb/3]:"")+Qb+(Rd&&"("===gh?")":"");if(wb)for(Rd=-1,zc=eb.length;++Rd<zc;)if(ad=eb.charCodeAt(Rd),48>ad||57<ad){Qb=(46===ad?Kf+eb.slice(Rd+1):eb.slice(Rd))+Qb;eb=eb.slice(0,Rd);break}}ia&&!bi&&(eb=xe(eb,Infinity));ad=qb.length+eb.length+Qb.length;Rd=ad<ih?Array(ih-ad+1).join(Gh):"";ia&&bi&&(eb=xe(Rd+eb,Rd.length?ih-Qb.length:
Infinity),Rd="");switch(li){case "\x3c":eb=qb+eb+Qb+Rd;break;case "\x3d":eb=qb+Rd+eb+Qb;break;case "^":eb=Rd.slice(0,ad=Rd.length>>1)+qb+eb+Qb+Rd.slice(ad);break;default:eb=Rd+qb+eb+Qb}return wg(eb)}$f=V($f);var Gh=$f.fill,li=$f.align,gh=$f.sign,Lf=$f.symbol,bi=$f.zero,ih=$f.width,ia=$f.comma,Sa=$f.precision,lb=$f.trim,Eb=$f.type;"n"===Eb?(ia=!0,Eb="g"):lc[Eb]||(void 0===Sa&&(Sa=12),lb=!0,Eb="g");if(bi||"0"===Gh&&"\x3d"===li)bi=!0,Gh="0",li="\x3d";var Vb="$"===Lf?dg:"#"===Lf&&/[boxX]/.test(Eb)?"0"+
Eb.toLowerCase():"",qc="$"===Lf?Sf:/[%p]/.test(Eb)?xg:"",Za=lc[Eb],wb=/[defgprs%]/.test(Eb);Sa=void 0===Sa?6:/[gprs]/.test(Eb)?Math.max(1,Math.min(21,Sa)):Math.max(0,Math.min(20,Sa));Rf.toString=function(){return $f+""};return Rf}var xe=void 0===id.grouping||void 0===id.thousands?G:U(Uc.call(id.grouping,Number),id.thousands+""),dg=void 0===id.currency?"":id.currency[0]+"",Sf=void 0===id.currency?"":id.currency[1]+"",Kf=void 0===id.decimal?".":id.decimal+"",wg=void 0===id.numerals?G:X(Uc.call(id.numerals,
String)),xg=void 0===id.percent?"%":id.percent+"",dh=void 0===id.minus?"−":id.minus+"",cg=void 0===id.nan?"NaN":id.nan+"";return{format:Bd,formatPrefix:function($f,Rf){var Gh=Bd(($f=V($f),$f.type="f",$f));$f=3*Math.max(-8,Math.min(8,Math.floor(da(Rf)/3)));var li=Math.pow(10,-$f),gh=Zc[8+$f/3];return function(Lf){return Gh(li*Lf)+gh}}}}function Q(id,Bd){return xe=>{xe=id(xe);const dg=xe.indexOf(Bd);if(0>dg)return xe;a:{var Sf=xe.lastIndexOf("e");if(!(0<Sf)){for(Sf=xe.length;--Sf>dg;){var Kf=xe.charCodeAt(Sf);
if(48<=Kf&&57>=Kf){Sf+=1;break a}}Sf=void 0}}for(Kf=Sf<xe.length?xe.slice(Sf):"";--Sf>dg;)if("0"!==xe[Sf]){++Sf;break}return xe.slice(0,Sf)+Kf}}function ja(id){const Bd=x(id.format),xe=id.formatPrefix;return{format:Bd,formatPrefix:xe,formatFloat(dg){dg=V(dg||",");if(null==dg.precision){dg.precision=12;switch(dg.type){case "%":dg.precision-=2;break;case "e":--dg.precision}return Q(Bd(dg),Bd(".1f")(1)[1])}return Bd(dg)},formatSpan(dg,Sf,Kf,wg){wg=V(null==wg?",f":wg);var xg=+Sf;var dh=+dg;var cg=+Kf;
dh=(Kf=xg<dh)?B(xg,dh,cg):B(dh,xg,cg);dh=(Kf?-1:1)*(0>dh?1/-dh:dh);dg=Math.max(Math.abs(dg),Math.abs(Sf));if(null==wg.precision)switch(wg.type){case "s":return Sf=isNaN,dh=Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(da(dg)/3)))-da(Math.abs(dh))),Sf(Sf=dh)||(wg.precision=Sf),xe(wg,dg);case "":case "e":case "g":case "p":case "r":Sf=isNaN;dh=Math.abs(dh);dg=Math.abs(dg)-dh;dg=Math.max(0,da(dg)-da(dh))+1;Sf(Sf=dg)||(wg.precision=Sf-("e"===wg.type));break;case "f":case "%":isNaN(Sf=Math.max(0,-da(Math.abs(dh))))||
(wg.precision=Sf-2*("%"===wg.type))}return Bd(wg)}}}function pa(){return qd=ja({format:Nd,formatPrefix:he})}function J(id){return ja(Y(id))}function K(id){return arguments.length?qd=J(id):qd}function ba(id,Bd,xe,dg){function Sf(Kf){return id(Kf=0===arguments.length?new Date:new Date(+Kf)),Kf}Sf.floor=Kf=>(id(Kf=new Date(+Kf)),Kf);Sf.ceil=Kf=>(id(Kf=new Date(Kf-1)),Bd(Kf,1),id(Kf),Kf);Sf.round=Kf=>{const wg=Sf(Kf),xg=Sf.ceil(Kf);return Kf-wg<xg-Kf?wg:xg};Sf.offset=(Kf,wg)=>(Bd(Kf=new Date(+Kf),null==
wg?1:Math.floor(wg)),Kf);Sf.range=(Kf,wg,xg)=>{const dh=[];Kf=Sf.ceil(Kf);xg=null==xg?1:Math.floor(xg);if(!(Kf<wg&&0<xg))return dh;let cg;do dh.push(cg=new Date(+Kf)),Bd(Kf,xg),id(Kf);while(cg<Kf&&Kf<wg);return dh};Sf.filter=Kf=>ba(wg=>{if(wg>=wg)for(;id(wg),!Kf(wg);)wg.setTime(wg-1)},(wg,xg)=>{if(wg>=wg)if(0>xg)for(;0>=++xg;)for(;Bd(wg,-1),!Kf(wg););else for(;0<=--xg;)for(;Bd(wg,1),!Kf(wg););});xe&&(Sf.count=(Kf,wg)=>{qe.setTime(+Kf);we.setTime(+wg);id(qe);id(we);return Math.floor(xe(qe,we))},Sf.every=
Kf=>{Kf=Math.floor(Kf);return isFinite(Kf)&&0<Kf?1<Kf?Sf.filter(dg?wg=>0===dg(wg)%Kf:wg=>0===Sf.count(0,wg)%Kf):Sf:null});return Sf}function O(id){return ba(Bd=>{Bd.setDate(Bd.getDate()-(Bd.getDay()+7-id)%7);Bd.setHours(0,0,0,0)},(Bd,xe)=>{Bd.setDate(Bd.getDate()+7*xe)},(Bd,xe)=>(xe-Bd-6E4*(xe.getTimezoneOffset()-Bd.getTimezoneOffset()))/6048E5)}function fa(id){return ba(Bd=>{Bd.setUTCDate(Bd.getUTCDate()-(Bd.getUTCDay()+7-id)%7);Bd.setUTCHours(0,0,0,0)},(Bd,xe)=>{Bd.setUTCDate(Bd.getUTCDate()+7*
xe)},(Bd,xe)=>(xe-Bd)/6048E5)}function wa(id){if(0<=id.y&&100>id.y){var Bd=new Date(-1,id.m,id.d,id.H,id.M,id.S,id.L);Bd.setFullYear(id.y);return Bd}return new Date(id.y,id.m,id.d,id.H,id.M,id.S,id.L)}function ta(id){if(0<=id.y&&100>id.y){var Bd=new Date(Date.UTC(-1,id.m,id.d,id.H,id.M,id.S,id.L));Bd.setUTCFullYear(id.y);return Bd}return new Date(Date.UTC(id.y,id.m,id.d,id.H,id.M,id.S,id.L))}function aa(id,Bd,xe){return{y:id,m:Bd,d:xe,H:0,M:0,S:0,L:0}}function ha(id){function Bd(wb,eb){return function(qb){var Qb=
[],zc=-1,ad=0,Rd=wb.length,Md,nd;for(qb instanceof Date||(qb=new Date(+qb));++zc<Rd;)if(37===wb.charCodeAt(zc)){Qb.push(wb.slice(ad,zc));null!=(ad=Xa[Md=wb.charAt(++zc)])?Md=wb.charAt(++zc):ad="e"===Md?" ":"0";if(nd=eb[Md])Md=nd(qb,ad);Qb.push(Md);ad=zc+1}Qb.push(wb.slice(ad,zc));return Qb.join("")}}function xe(wb,eb){return function(qb){var Qb=aa(1900,void 0,1);if(dg(Qb,wb,qb+="",0)!=qb.length)return null;if("Q"in Qb)return new Date(Qb.Q);if("s"in Qb)return new Date(1E3*Qb.s+("L"in Qb?Qb.L:0));!eb||
"Z"in Qb||(Qb.Z=0);"p"in Qb&&(Qb.H=Qb.H%12+12*Qb.p);void 0===Qb.m&&(Qb.m="q"in Qb?Qb.q:0);if("V"in Qb){if(1>Qb.V||53<Qb.V)return null;"w"in Qb||(Qb.w=1);if("Z"in Qb){qb=ta(aa(Qb.y,0,1));var zc=qb.getUTCDay();qb=4<zc||0===zc?oi.ceil(qb):oi(qb);qb=sf.offset(qb,7*(Qb.V-1));Qb.y=qb.getUTCFullYear();Qb.m=qb.getUTCMonth();Qb.d=qb.getUTCDate()+(Qb.w+6)%7}else qb=wa(aa(Qb.y,0,1)),zc=qb.getDay(),qb=4<zc||0===zc?lf.ceil(qb):lf(qb),qb=Cd.offset(qb,7*(Qb.V-1)),Qb.y=qb.getFullYear(),Qb.m=qb.getMonth(),Qb.d=qb.getDate()+
(Qb.w+6)%7}else if("W"in Qb||"U"in Qb)"w"in Qb||(Qb.w="u"in Qb?Qb.u%7:"W"in Qb?1:0),zc="Z"in Qb?ta(aa(Qb.y,0,1)).getUTCDay():wa(aa(Qb.y,0,1)).getDay(),Qb.m=0,Qb.d="W"in Qb?(Qb.w+6)%7+7*Qb.W-(zc+5)%7:Qb.w+7*Qb.U-(zc+6)%7;return"Z"in Qb?(Qb.H+=Qb.Z/100|0,Qb.M+=Qb.Z%100,ta(Qb)):wa(Qb)}}function dg(wb,eb,qb,Qb){for(var zc=0,ad=eb.length,Rd=qb.length,Md;zc<ad;){if(Qb>=Rd)return-1;Md=eb.charCodeAt(zc++);if(37===Md){if(Md=eb.charAt(zc++),Md=Za[Md in Xa?eb.charAt(zc++):Md],!Md||0>(Qb=Md(wb,qb,Qb)))return-1}else if(Md!=
qb.charCodeAt(Qb++))return-1}return Qb}var Sf=id.dateTime,Kf=id.date,wg=id.time,xg=id.periods,dh=id.days,cg=id.shortDays,$f=id.months,Rf=id.shortMonths,Gh=oa(xg),li=ea(xg),gh=oa(dh),Lf=ea(dh),bi=oa(cg),ih=ea(cg),ia=oa($f),Sa=ea($f),lb=oa(Rf),Eb=ea(Rf),Vb={a:function(wb){return cg[wb.getDay()]},A:function(wb){return dh[wb.getDay()]},b:function(wb){return Rf[wb.getMonth()]},B:function(wb){return $f[wb.getMonth()]},c:null,d:La,e:La,f:Ic,g:nc,G:Hb,H:Bb,I:Ob,j:ec,L:sc,m:Xb,M:Wb,p:function(wb){return xg[+(12<=
wb.getHours())]},q:function(wb){return 1+~~(wb.getMonth()/3)},Q:sd,s:Vd,S:Kc,u:Kb,U:mc,V:oc,w:Cc,W:Mc,x:null,X:null,y:Pb,Y:rc,Z:Jc,"%":xd},qc={a:function(wb){return cg[wb.getUTCDay()]},A:function(wb){return dh[wb.getUTCDay()]},b:function(wb){return Rf[wb.getUTCMonth()]},B:function(wb){return $f[wb.getUTCMonth()]},c:null,d:kc,e:kc,f:Ed,g:cd,G:od,H:Ab,I:md,j:yd,L:hd,m:Qd,M:fd,p:function(wb){return xg[+(12<=wb.getUTCHours())]},q:function(wb){return 1+~~(wb.getUTCMonth()/3)},Q:sd,s:Vd,S:ed,u:bc,U:yc,
V:cc,w:tb,W:tc,x:null,X:null,y:Ec,Y:bd,Z:Dd,"%":xd},Za={a:function(wb,eb,qb){return(eb=bi.exec(eb.slice(qb)))?(wb.w=ih.get(eb[0].toLowerCase()),qb+eb[0].length):-1},A:function(wb,eb,qb){return(eb=gh.exec(eb.slice(qb)))?(wb.w=Lf.get(eb[0].toLowerCase()),qb+eb[0].length):-1},b:function(wb,eb,qb){return(eb=lb.exec(eb.slice(qb)))?(wb.m=Eb.get(eb[0].toLowerCase()),qb+eb[0].length):-1},B:function(wb,eb,qb){return(eb=ia.exec(eb.slice(qb)))?(wb.m=Sa.get(eb[0].toLowerCase()),qb+eb[0].length):-1},c:function(wb,
eb,qb){return dg(wb,Sf,eb,qb)},d:Ya,e:Ya,f:Ga,g:ab,G:Ta,H:Pa,I:Pa,j:Va,L:Aa,m:pb,M:Ha,p:function(wb,eb,qb){return(eb=Gh.exec(eb.slice(qb)))?(wb.p=li.get(eb[0].toLowerCase()),qb+eb[0].length):-1},q:ub,Q:cb,s:fb,S:Ca,u:R,U:la,V:Ia,w:D,W:Ma,x:function(wb,eb,qb){return dg(wb,Kf,eb,qb)},X:function(wb,eb,qb){return dg(wb,wg,eb,qb)},y:ab,Y:Ta,Z:db,"%":Ka};Vb.x=Bd(Kf,Vb);Vb.X=Bd(wg,Vb);Vb.c=Bd(Sf,Vb);qc.x=Bd(Kf,qc);qc.X=Bd(wg,qc);qc.c=Bd(Sf,qc);return{format:function(wb){var eb=Bd(wb+="",Vb);eb.toString=
function(){return wb};return eb},parse:function(wb){var eb=xe(wb+="",!1);eb.toString=function(){return wb};return eb},utcFormat:function(wb){var eb=Bd(wb+="",qc);eb.toString=function(){return wb};return eb},utcParse:function(wb){var eb=xe(wb+="",!0);eb.toString=function(){return wb};return eb}}}function ka(id,Bd,xe){var dg=0>id?"-":"";id=(dg?-id:id)+"";var Sf=id.length;return dg+(Sf<xe?Array(xe-Sf+1).join(Bd)+id:id)}function H(id){return id.replace(Ce,"\\$\x26")}function oa(id){return new RegExp("^(?:"+
id.map(H).join("|")+")","i")}function ea(id){return new Map(id.map((Bd,xe)=>[Bd.toLowerCase(),xe]))}function D(id,Bd,xe){return(Bd=gc.exec(Bd.slice(xe,xe+1)))?(id.w=+Bd[0],xe+Bd[0].length):-1}function R(id,Bd,xe){return(Bd=gc.exec(Bd.slice(xe,xe+1)))?(id.u=+Bd[0],xe+Bd[0].length):-1}function la(id,Bd,xe){return(Bd=gc.exec(Bd.slice(xe,xe+2)))?(id.U=+Bd[0],xe+Bd[0].length):-1}function Ia(id,Bd,xe){return(Bd=gc.exec(Bd.slice(xe,xe+2)))?(id.V=+Bd[0],xe+Bd[0].length):-1}function Ma(id,Bd,xe){return(Bd=
gc.exec(Bd.slice(xe,xe+2)))?(id.W=+Bd[0],xe+Bd[0].length):-1}function Ta(id,Bd,xe){return(Bd=gc.exec(Bd.slice(xe,xe+4)))?(id.y=+Bd[0],xe+Bd[0].length):-1}function ab(id,Bd,xe){return(Bd=gc.exec(Bd.slice(xe,xe+2)))?(id.y=+Bd[0]+(68<+Bd[0]?1900:2E3),xe+Bd[0].length):-1}function db(id,Bd,xe){return(Bd=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(Bd.slice(xe,xe+6)))?(id.Z=Bd[1]?0:-(Bd[2]+(Bd[3]||"00")),xe+Bd[0].length):-1}function ub(id,Bd,xe){return(Bd=gc.exec(Bd.slice(xe,xe+1)))?(id.q=3*Bd[0]-3,xe+Bd[0].length):
-1}function pb(id,Bd,xe){return(Bd=gc.exec(Bd.slice(xe,xe+2)))?(id.m=Bd[0]-1,xe+Bd[0].length):-1}function Ya(id,Bd,xe){return(Bd=gc.exec(Bd.slice(xe,xe+2)))?(id.d=+Bd[0],xe+Bd[0].length):-1}function Va(id,Bd,xe){return(Bd=gc.exec(Bd.slice(xe,xe+3)))?(id.m=0,id.d=+Bd[0],xe+Bd[0].length):-1}function Pa(id,Bd,xe){return(Bd=gc.exec(Bd.slice(xe,xe+2)))?(id.H=+Bd[0],xe+Bd[0].length):-1}function Ha(id,Bd,xe){return(Bd=gc.exec(Bd.slice(xe,xe+2)))?(id.M=+Bd[0],xe+Bd[0].length):-1}function Ca(id,Bd,xe){return(Bd=
gc.exec(Bd.slice(xe,xe+2)))?(id.S=+Bd[0],xe+Bd[0].length):-1}function Aa(id,Bd,xe){return(Bd=gc.exec(Bd.slice(xe,xe+3)))?(id.L=+Bd[0],xe+Bd[0].length):-1}function Ga(id,Bd,xe){return(Bd=gc.exec(Bd.slice(xe,xe+6)))?(id.L=Math.floor(Bd[0]/1E3),xe+Bd[0].length):-1}function Ka(id,Bd,xe){return(id=wd.exec(Bd.slice(xe,xe+1)))?xe+id[0].length:-1}function cb(id,Bd,xe){return(Bd=gc.exec(Bd.slice(xe)))?(id.Q=+Bd[0],xe+Bd[0].length):-1}function fb(id,Bd,xe){return(Bd=gc.exec(Bd.slice(xe)))?(id.s=+Bd[0],xe+Bd[0].length):
-1}function La(id,Bd){return ka(id.getDate(),Bd,2)}function Bb(id,Bd){return ka(id.getHours(),Bd,2)}function Ob(id,Bd){return ka(id.getHours()%12||12,Bd,2)}function ec(id,Bd){return ka(1+Cd.count(Ua(id),id),Bd,3)}function sc(id,Bd){return ka(id.getMilliseconds(),Bd,3)}function Ic(id,Bd){return sc(id,Bd)+"000"}function Xb(id,Bd){return ka(id.getMonth()+1,Bd,2)}function Wb(id,Bd){return ka(id.getMinutes(),Bd,2)}function Kc(id,Bd){return ka(id.getSeconds(),Bd,2)}function Kb(id){id=id.getDay();return 0===
id?7:id}function mc(id,Bd){return ka(tf.count(Ua(id)-1,id),Bd,2)}function Ub(id){var Bd=id.getDay();return 4<=Bd||0===Bd?Pg(id):Pg.ceil(id)}function oc(id,Bd){id=Ub(id);return ka(Pg.count(Ua(id),id)+(4===Ua(id).getDay()),Bd,2)}function Cc(id){return id.getDay()}function Mc(id,Bd){return ka(lf.count(Ua(id)-1,id),Bd,2)}function Pb(id,Bd){return ka(id.getFullYear()%100,Bd,2)}function nc(id,Bd){id=Ub(id);return ka(id.getFullYear()%100,Bd,2)}function rc(id,Bd){return ka(id.getFullYear()%1E4,Bd,4)}function Hb(id,
Bd){var xe=id.getDay();id=4<=xe||0===xe?Pg(id):Pg.ceil(id);return ka(id.getFullYear()%1E4,Bd,4)}function Jc(id){id=id.getTimezoneOffset();return(0<id?"-":(id*=-1,"+"))+ka(id/60|0,"0",2)+ka(id%60,"0",2)}function kc(id,Bd){return ka(id.getUTCDate(),Bd,2)}function Ab(id,Bd){return ka(id.getUTCHours(),Bd,2)}function md(id,Bd){return ka(id.getUTCHours()%12||12,Bd,2)}function yd(id,Bd){return ka(1+sf.count(v(id),id),Bd,3)}function hd(id,Bd){return ka(id.getUTCMilliseconds(),Bd,3)}function Ed(id,Bd){return hd(id,
Bd)+"000"}function Qd(id,Bd){return ka(id.getUTCMonth()+1,Bd,2)}function fd(id,Bd){return ka(id.getUTCMinutes(),Bd,2)}function ed(id,Bd){return ka(id.getUTCSeconds(),Bd,2)}function bc(id){id=id.getUTCDay();return 0===id?7:id}function yc(id,Bd){return ka(Zg.count(v(id)-1,id),Bd,2)}function $c(id){var Bd=id.getUTCDay();return 4<=Bd||0===Bd?wh(id):wh.ceil(id)}function cc(id,Bd){id=$c(id);return ka(wh.count(v(id),id)+(4===v(id).getUTCDay()),Bd,2)}function tb(id){return id.getUTCDay()}function tc(id,Bd){return ka(oi.count(v(id)-
1,id),Bd,2)}function Ec(id,Bd){return ka(id.getUTCFullYear()%100,Bd,2)}function cd(id,Bd){id=$c(id);return ka(id.getUTCFullYear()%100,Bd,2)}function bd(id,Bd){return ka(id.getUTCFullYear()%1E4,Bd,4)}function od(id,Bd){var xe=id.getUTCDay();id=4<=xe||0===xe?wh(id):wh.ceil(id);return ka(id.getUTCFullYear()%1E4,Bd,4)}function Dd(){return"+0000"}function xd(){return"%"}function sd(id){return+id}function Vd(id){return Math.floor(+id/1E3)}function re(id,Bd,xe){xe=xe||{};u.isObject(xe)||u.error(`Invalid time multi-format specifier: ${xe}`);
const dg=Bd(w.SECONDS),Sf=Bd(w.MINUTES),Kf=Bd(w.HOURS),wg=Bd(w.DATE),xg=Bd(w.WEEK),dh=Bd(w.MONTH),cg=Bd(w.QUARTER),$f=Bd(w.YEAR),Rf=id(xe[w.MILLISECONDS]||".%L"),Gh=id(xe[w.SECONDS]||":%S"),li=id(xe[w.MINUTES]||"%I:%M"),gh=id(xe[w.HOURS]||"%I %p"),Lf=id(xe[w.DATE]||xe[w.DAY]||"%a %d"),bi=id(xe[w.WEEK]||"%b %d"),ih=id(xe[w.MONTH]||"%B"),ia=id(xe[w.QUARTER]||"%B"),Sa=id(xe[w.YEAR]||"%Y");return lb=>(dg(lb)<lb?Rf:Sf(lb)<lb?Gh:Kf(lb)<lb?li:wg(lb)<lb?gh:dh(lb)<lb?xg(lb)<lb?Lf:bi:$f(lb)<lb?cg(lb)<lb?ih:
ia:Sa)(lb)}function Wd(id){const Bd=x(id.format),xe=x(id.utcFormat);return{timeFormat:dg=>u.isString(dg)?Bd(dg):re(Bd,w.timeInterval,dg),utcFormat:dg=>u.isString(dg)?xe(dg):re(xe,w.utcInterval,dg),timeParse:x(id.parse),utcParse:x(id.utcParse)}}function Fe(){return Ug=Wd({format:zg,parse:$g,utcFormat:lg,utcParse:Ag})}function Bf(id){return Wd(ha(id))}function Ye(id){return arguments.length?Ug=Bf(id):Ug}function bg(id,Bd){var xe=arguments.length;xe&&2!==xe&&u.error("defaultLocale expects either zero or two arguments.");
if(xe){xe=K(id);var dg=Ye(Bd);xe=u.extend({},xe,dg)}else xe=K(),dg=Ye(),xe=u.extend({},xe,dg);return xe}const rf=Math.sqrt(50),Ff=Math.sqrt(10),pg=Math.sqrt(2);var gf=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;V.prototype=P.prototype;P.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,this.width|0))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,this.precision|0))+(this.trim?
"~":"")+this.type};var Jb,lc={"%":(id,Bd)=>(100*id).toFixed(Bd),b:id=>Math.round(id).toString(2),c:id=>id+"",d:function(id){return 1E21<=Math.abs(id=Math.round(id))?id.toLocaleString("en").replace(/,/g,""):id.toString(10)},e:(id,Bd)=>id.toExponential(Bd),f:(id,Bd)=>id.toFixed(Bd),g:(id,Bd)=>id.toPrecision(Bd),o:id=>Math.round(id).toString(8),p:(id,Bd)=>z(100*id,Bd),r:z,s:function(id,Bd){var xe=N(id,Bd);if(!xe)return id+"";var dg=xe[0];xe=xe[1];xe=xe-(Jb=3*Math.max(-8,Math.min(8,Math.floor(xe/3))))+
1;var Sf=dg.length;return xe===Sf?dg:xe>Sf?dg+Array(xe-Sf+1).join("0"):0<xe?dg.slice(0,xe)+"."+dg.slice(xe):"0."+Array(1-xe).join("0")+N(id,Math.max(0,Bd+xe-1))[0]},X:id=>Math.round(id).toString(16).toUpperCase(),x:id=>Math.round(id).toString(16)},Uc=Array.prototype.map,Zc="y z a f p n µ m  k M G T P E Z Y".split(" "),rd,Nd,he;(function(id){rd=Y(id);Nd=rd.format;he=rd.formatPrefix;return rd})({thousands:",",grouping:[3],currency:["$",""]});let qd;pa();const qe=new Date,we=new Date,Cd=ba(id=>id.setHours(0,
0,0,0),(id,Bd)=>id.setDate(id.getDate()+Bd),(id,Bd)=>(Bd-id-6E4*(Bd.getTimezoneOffset()-id.getTimezoneOffset()))/864E5,id=>id.getDate()-1);Cd.range;const sf=ba(id=>{id.setUTCHours(0,0,0,0)},(id,Bd)=>{id.setUTCDate(id.getUTCDate()+Bd)},(id,Bd)=>(Bd-id)/864E5,id=>id.getUTCDate()-1);sf.range;const Jf=ba(id=>{id.setUTCHours(0,0,0,0)},(id,Bd)=>{id.setUTCDate(id.getUTCDate()+Bd)},(id,Bd)=>(Bd-id)/864E5,id=>Math.floor(id/864E5));Jf.range;const tf=O(0),lf=O(1),Lg=O(2),rg=O(3),Pg=O(4),fh=O(5),eh=O(6);tf.range;
lf.range;Lg.range;rg.range;Pg.range;fh.range;eh.range;const Zg=fa(0),oi=fa(1),ei=fa(2),Yh=fa(3),wh=fa(4),Wc=fa(5),ib=fa(6);Zg.range;oi.range;ei.range;Yh.range;wh.range;Wc.range;ib.range;const Ua=ba(id=>{id.setMonth(0,1);id.setHours(0,0,0,0)},(id,Bd)=>{id.setFullYear(id.getFullYear()+Bd)},(id,Bd)=>Bd.getFullYear()-id.getFullYear(),id=>id.getFullYear());Ua.every=id=>isFinite(id=Math.floor(id))&&0<id?ba(Bd=>{Bd.setFullYear(Math.floor(Bd.getFullYear()/id)*id);Bd.setMonth(0,1);Bd.setHours(0,0,0,0)},(Bd,
xe)=>{Bd.setFullYear(Bd.getFullYear()+xe*id)}):null;Ua.range;const v=ba(id=>{id.setUTCMonth(0,1);id.setUTCHours(0,0,0,0)},(id,Bd)=>{id.setUTCFullYear(id.getUTCFullYear()+Bd)},(id,Bd)=>Bd.getUTCFullYear()-id.getUTCFullYear(),id=>id.getUTCFullYear());v.every=id=>isFinite(id=Math.floor(id))&&0<id?ba(Bd=>{Bd.setUTCFullYear(Math.floor(Bd.getUTCFullYear()/id)*id);Bd.setUTCMonth(0,1);Bd.setUTCHours(0,0,0,0)},(Bd,xe)=>{Bd.setUTCFullYear(Bd.getUTCFullYear()+xe*id)}):null;v.range;var Xa={"-":"",_:" ",0:"0"},
gc=/^\s*\d+/,wd=/^%/,Ce=/[\\^$*+?|[\]().{}]/g,Hf,zg,$g,lg,Ag;(function(id){Hf=ha(id);zg=Hf.format;$g=Hf.parse;lg=Hf.utcFormat;Ag=Hf.utcParse;return Hf})({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});
let Ug;Fe();A.defaultLocale=bg;A.locale=function(id,Bd){id=id?J(id):K();Bd=Bd?Bf(Bd):Ye();return u.extend({},id,Bd)};A.numberFormatDefaultLocale=K;A.numberFormatLocale=J;A.resetDefaultLocale=function(){pa();Fe();return bg()};A.resetNumberFormatDefaultLocale=pa;A.resetTimeFormatDefaultLocale=Fe;A.timeFormatDefaultLocale=Ye;A.timeFormatLocale=Bf})};
shadow$provide[425]=function(ob,Ba,Gb,Ea){var A=Ba(33).Buffer;(function(w,u){"object"===typeof Ea&&"undefined"!==typeof Gb?u(Ea,Ba(421),Ba(422),Ba(424)):"function"===typeof define&&define.amd?define(["exports","vega-util","topojson-client","vega-format"],u):(w="undefined"!==typeof globalThis?globalThis:w||self,u(w.vega={},w.vega,w.topojson,w.vega))})(this,function(w,u,x,I){async function B(Ta,ab){Ta=await this.sanitize(Ta,ab);const db=Ta.href;return Ta.localFile?this.file(db):this.http(db,ab)}async function N(Ta,
ab){ab=u.extend({},this.options,ab);const db=this.fileAccess,ub={href:null};var pb;let Ya;var Va=aa.test(Ta.replace(ha,""));null!=Ta&&"string"===typeof Ta&&Va||u.error("Sanitize failure, invalid URI: "+u.stringValue(Ta));Va=ta.test(Ta);(pb=ab.baseURL)&&!Va&&(Ta.startsWith("/")||pb.endsWith("/")||(Ta="/"+Ta),Ta=pb+Ta);Ya=(pb=Ta.startsWith("file://"))||"file"===ab.mode||"http"!==ab.mode&&!Va&&db;pb?Ta=Ta.slice(7):Ta.startsWith("//")&&("file"===ab.defaultProtocol?(Ta=Ta.slice(2),Ya=!0):Ta=(ab.defaultProtocol||
"http")+":"+Ta);Object.defineProperty(ub,"localFile",{value:!!Ya});ub.href=Ta;ab.target&&(ub.target=ab.target+"");ab.rel&&(ub.rel=ab.rel+"");"image"===ab.context&&ab.crossOrigin&&(ub.crossOrigin=ab.crossOrigin+"");return ub}function da(Ta){return Ta?ab=>new Promise((db,ub)=>{Ta.readFile(ab,(pb,Ya)=>{pb?ub(pb):db(Ya)})}):U}async function U(){u.error("No file system access.")}function X(Ta){return Ta?async function(ab,db){const ub=u.extend({},this.options.http,db);db=db&&db.response;ab=await Ta(ab,
ub);return ab.ok?u.isFunction(ab[db])?ab[db]():ab.text():u.error(ab.status+""+ab.statusText)}:V}async function V(){u.error("No HTTP fetch method available.")}function P(Ta,ab){if(!Ta||!Ta.length)return"unknown";const db=Ta.length,ub=oa.length,pb=oa.map((Ya,Va)=>Va+1);for(let Ya=0,Va=0,Pa,Ha;Ya<db;++Ya)for(Ha=ab?Ta[Ya][ab]:Ta[Ya],Pa=0;Pa<ub;++Pa)if(pb[Pa]&&null!=Ha&&Ha===Ha&&!oa[Pa](Ha)&&(pb[Pa]=0,++Va,Va===oa.length))return"string";return ea[pb.reduce((Ya,Va)=>0===Ya?Va:Ya,0)-1]}function z(Ta,ab){return ab.reduce((db,
ub)=>{db[ub]=P(Ta,ub);return db},{})}function G(Ta){return new Function("d","return {"+Ta.map(function(ab,db){return JSON.stringify(ab)+": d["+db+'] || ""'}).join(",")+"}")}function Y(Ta,ab){var db=G(Ta);return function(ub,pb){return ab(db(ub),pb,Ta)}}function Q(Ta){var ab=Object.create(null),db=[];Ta.forEach(function(ub){for(var pb in ub)pb in ab||db.push(ab[pb]=pb)});return db}function ja(Ta,ab){Ta+="";var db=Ta.length;return db<ab?Array(ab-db+1).join(0)+Ta:Ta}function pa(Ta){function ab(Pa,Ha){function Ca(){if(La)return R;
if(Bb)return Bb=!1,D;var ec,sc=Ka,Ic;if(34===Pa.charCodeAt(sc)){for(;Ka++<Ga&&34!==Pa.charCodeAt(Ka)||34===Pa.charCodeAt(++Ka););(ec=Ka)>=Ga?La=!0:10===(Ic=Pa.charCodeAt(Ka++))?Bb=!0:13===Ic&&(Bb=!0,10===Pa.charCodeAt(Ka)&&++Ka);return Pa.slice(sc+1,ec-1).replace(/""/g,'"')}for(;Ka<Ga;){if(10===(Ic=Pa.charCodeAt(ec=Ka++)))Bb=!0;else if(13===Ic)Bb=!0,10===Pa.charCodeAt(Ka)&&++Ka;else if(Ic!==Va)continue;return Pa.slice(sc,ec)}return La=!0,Pa.slice(sc,Ga)}var Aa=[],Ga=Pa.length,Ka=0,cb=0,fb,La=0>=Ga,
Bb=!1;10===Pa.charCodeAt(Ga-1)&&--Ga;for(13===Pa.charCodeAt(Ga-1)&&--Ga;(fb=Ca())!==R;){for(var Ob=[];fb!==D&&fb!==R;)Ob.push(fb),fb=Ca();Ha&&null==(Ob=Ha(Ob,cb++))||Aa.push(Ob)}return Aa}function db(Pa,Ha){return Pa.map(function(Ca){return Ha.map(function(Aa){return pb(Ca[Aa])}).join(Ta)})}function ub(Pa){return Pa.map(pb).join(Ta)}function pb(Pa){if(null==Pa)Pa="";else{if(Pa instanceof Date){var Ha=Pa.getUTCHours();var Ca=Pa.getUTCMinutes(),Aa=Pa.getUTCSeconds(),Ga=Pa.getUTCMilliseconds();if(isNaN(Pa))Pa=
"Invalid Date";else{var Ka=Pa.getUTCFullYear();Pa=(0>Ka?"-"+ja(-Ka,6):9999<Ka?"+"+ja(Ka,6):ja(Ka,4))+"-"+ja(Pa.getUTCMonth()+1,2)+"-"+ja(Pa.getUTCDate(),2)+(Ga?"T"+ja(Ha,2)+":"+ja(Ca,2)+":"+ja(Aa,2)+"."+ja(Ga,3)+"Z":Aa?"T"+ja(Ha,2)+":"+ja(Ca,2)+":"+ja(Aa,2)+"Z":Ca||Ha?"T"+ja(Ha,2)+":"+ja(Ca,2)+"Z":"")}Ha=Pa}else Ha=Ya.test(Pa+="")?'"'+Pa.replace(/"/g,'""')+'"':Pa;Pa=Ha}return Pa}var Ya=new RegExp('["'+Ta+"\n\r]"),Va=Ta.charCodeAt(0);return{parse:function(Pa,Ha){var Ca,Aa;Pa=ab(Pa,function(Ga,Ka){if(Ca)return Ca(Ga,
Ka-1);Aa=Ga;Ca=Ha?Y(Ga,Ha):G(Ga)});Pa.columns=Aa||[];return Pa},parseRows:ab,format:function(Pa,Ha){null==Ha&&(Ha=Q(Pa));return[Ha.map(pb).join(Ta)].concat(db(Pa,Ha)).join("\n")},formatBody:function(Pa,Ha){null==Ha&&(Ha=Q(Pa));return db(Pa,Ha).join("\n")},formatRows:function(Pa){return Pa.map(ub).join("\n")},formatRow:ub,formatValue:pb}}function J(Ta){const ab=function(db,ub){const pb={delimiter:Ta};return K(db,ub?u.extend(ub,pb):pb)};ab.responseType="text";return ab}function K(Ta,ab){ab.header&&
(Ta=ab.header.map(u.stringValue).join(ab.delimiter)+"\n"+Ta);return pa(ab.delimiter).parse(Ta+"")}function ba(Ta,ab){const db=ab&&ab.property?u.field(ab.property):u.identity;var ub;if(ub=u.isObject(Ta))ub=!("function"===typeof A&&u.isFunction(A.isBuffer)&&A.isBuffer(Ta));ub?(Ta=db(Ta),!u.isArray(Ta)&&u.isIterable(Ta)&&(Ta=[...Ta]),ab=ab&&ab.copy?JSON.parse(JSON.stringify(Ta)):Ta):ab=db(JSON.parse(Ta));return ab}function O(Ta,ab){let db,ub,pb,Ya;Ta=ba(Ta,ab);ab&&ab.feature?(db=x.feature,pb=ab.feature):
ab&&ab.mesh?(db=x.mesh,pb=ab.mesh,Ya=la[ab.filter]):u.error("Missing TopoJSON feature or mesh parameter.");return(ub=(ub=Ta.objects[pb])?db(Ta,ub,Ya):u.error("Invalid TopoJSON object: "+pb))&&ub.features||[ub]}function fa(Ta,ab){return 1<arguments.length?(Ia[Ta]=ab,this):u.hasOwnProperty(Ia,Ta)?Ia[Ta]:null}function wa(Ta,ab,db,ub){if(Ta.length){var pb=I.timeFormatDefaultLocale();db=db||pb.timeParse;ub=ub||pb.utcParse;pb=Ta.columns||Object.keys(Ta[0]);var Ya,Va;"auto"===ab&&(ab=z(Ta,pb));pb=Object.keys(ab);
var Pa=pb.map(Ka=>{var cb=ab[Ka];if(cb&&(cb.startsWith("date:")||cb.startsWith("utc:"))){Ka=cb.split(/:(.+)?/,2);cb=Ka[1];if("'"===cb[0]&&"'"===cb[cb.length-1]||'"'===cb[0]&&'"'===cb[cb.length-1])cb=cb.slice(1,-1);return("utc"===Ka[0]?ub:db)(cb)}if(!H[cb])throw Error("Illegal format pattern: "+Ka+":"+cb);return H[cb]});var Ha=0;var Ca=Ta.length;for(Va=pb.length;Ha<Ca;++Ha){var Aa=Ta[Ha];for(Ya=0;Ya<Va;++Ya){var Ga=pb[Ya];Aa[Ga]=Pa[Ya](Aa[Ga])}}}}const ta=/^(data:|([A-Za-z]+:)?\/\/)/,aa=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,
ha=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,ka=Ta=>!Number.isNaN(+Ta)&&!(Ta instanceof Date),H={boolean:u.toBoolean,integer:u.toNumber,number:u.toNumber,date:u.toDate,string:u.toString,unknown:u.identity},oa=[Ta=>"true"===Ta||"false"===Ta||!0===Ta||!1===Ta,Ta=>ka(Ta)&&Number.isInteger(+Ta),ka,Ta=>!Number.isNaN(Date.parse(Ta))],ea=["boolean","integer","number","date"];var D={},R={};K.responseType="text";ba.responseType="json";const la={interior:(Ta,ab)=>Ta!==ab,exterior:(Ta,ab)=>
Ta===ab};O.responseType="json";const Ia={dsv:K,csv:J(","),tsv:J("\t"),json:ba,topojson:O},Ma=function(Ta,ab){return db=>({options:db||{},sanitize:N,load:B,fileAccess:!!ab,file:da(ab),http:X(Ta)})}("undefined"!==typeof fetch&&fetch,null);w.format=Ia;w.formats=fa;w.inferType=P;w.inferTypes=z;w.loader=Ma;w.read=function(Ta,ab,db,ub){ab=ab||{};const pb=fa(ab.type||"json");pb||u.error("Unknown data format type: "+ab.type);Ta=pb(Ta,ab);ab.parse&&wa(Ta,ab.parse,db,ub);u.hasOwnProperty(Ta,"columns")&&delete Ta.columns;
return Ta};w.responseType=function(Ta){return(Ta=fa(Ta))&&Ta.responseType||"text"};w.typeParsers=H})};
shadow$provide[426]=function(ob,Ba,Gb,Ea){(function(A,w){"object"===typeof Ea&&"undefined"!==typeof Gb?w(Ea,Ba(421),Ba(425),Ba(424)):"function"===typeof define&&define.amd?define(["exports","vega-util","vega-loader","vega-format"],w):(A="undefined"!==typeof globalThis?globalThis:A||self,w(A.vega={},A.vega,A.vega,A.vega))})(this,function(A,w,u,x){function I(Ya){const Va=Ya||w.identity,Pa=[],Ha={};Pa.add=Ca=>{const Aa=Va(Ca);Ha[Aa]||(Ha[Aa]=1,Pa.push(Ca));return Pa};Pa.remove=Ca=>{const Aa=Va(Ca);Ha[Aa]&&
(Ha[Aa]=0,Ca=Pa.indexOf(Ca),0<=Ca&&Pa.splice(Ca,1));return Pa};return Pa}async function B(Ya,Va){try{await Va(Ya)}catch(Pa){Ya.error(Pa)}}function N(Ya){Ya=Ya===Object(Ya)?Ya:{data:Ya};if(!Ya[R]){var Va=la++;Ya[R]=Va}return Ya}function da(Ya,Va){for(const Pa in Ya)Va[Pa]=Ya[Pa];return Va}function U(Ya){return Ya&&Ya.constructor===X}function X(){const Ya=[],Va=[],Pa=[],Ha=[],Ca=[];let Aa=null,Ga=!1;return{constructor:X,insert(Ka){Ka=w.array(Ka);const cb=Ka.length;for(let fb=0;fb<cb;++fb)Ya.push(Ka[fb]);
return this},remove(Ka){const cb=w.isFunction(Ka)?Ha:Va;Ka=w.array(Ka);const fb=Ka.length;for(let La=0;La<fb;++La)cb.push(Ka[La]);return this},modify(Ka,cb,fb){cb={field:cb,value:w.constant(fb)};w.isFunction(Ka)?(cb.filter=Ka,Ca.push(cb)):(cb.tuple=Ka,Pa.push(cb));return this},encode(Ka,cb){w.isFunction(Ka)?Ca.push({filter:Ka,field:cb}):Pa.push({tuple:Ka,field:cb});return this},clean(Ka){Aa=Ka;return this},reflow(){Ga=!0;return this},pulse(Ka,cb){function fb(Kc,Kb,mc){mc?Kc[Kb]=mc(Kc):Ka.encode=Kb;
Ga||(Bb[Kc[R]]=Kc)}const La={},Bb={};let Ob,ec,sc,Ic,Xb,Wb;Ob=0;for(ec=cb.length;Ob<ec;++Ob)La[cb[Ob][R]]=1;Ob=0;for(ec=Va.length;Ob<ec;++Ob)Xb=Va[Ob],La[Xb[R]]=-1;Ob=0;for(ec=Ha.length;Ob<ec;++Ob)Ic=Ha[Ob],cb.forEach(Kc=>{Ic(Kc)&&(La[Kc[R]]=-1)});Ob=0;for(ec=Ya.length;Ob<ec;++Ob)Xb=Ya[Ob],Wb=Xb[R],La[Wb]?La[Wb]=1:Ka.add.push(N(Ya[Ob]));Ob=0;for(ec=cb.length;Ob<ec;++Ob)Xb=cb[Ob],0>La[Xb[R]]&&Ka.rem.push(Xb);Ob=0;for(ec=Pa.length;Ob<ec;++Ob)sc=Pa[Ob],Xb=sc.tuple,Ic=sc.field,Wb=La[Xb[R]],0<Wb&&(fb(Xb,
Ic,sc.value),Ka.modifies(Ic));Ob=0;for(ec=Ca.length;Ob<ec;++Ob)sc=Ca[Ob],Ic=sc.filter,cb.forEach(Kc=>{Ic(Kc)&&0<La[Kc[R]]&&fb(Kc,sc.field,sc.value)}),Ka.modifies(sc.field);if(Ga)Ka.mod=Va.length||Ha.length?cb.filter(Kc=>0<La[Kc[R]]):cb.slice();else for(Wb in Bb)Ka.mod.push(Bb[Wb]);(Aa||null==Aa&&(Va.length||Ha.length))&&Ka.clean(!0);return Ka}}}function V(){Object.defineProperty(this,"_:mod:_",{writable:!0,value:{}})}function P(Ya,Va,Pa,Ha){this.id=++Ia;this.value=Ya;this.qrank=this.rank=this.stamp=
-1;this.flags=0;Va&&(this._update=Va);Pa&&this.parameters(Pa,Ha)}function z(Ya){return function(Va){const Pa=this.flags;if(0===arguments.length)return!!(Pa&Ya);this.flags=Va?Pa|Ya:Pa&~Ya;return this}}function G(Ya,Va,Pa){this.id=++Ta;this.value=null;Pa&&(this.receive=Pa);Ya&&(this._filter=Ya);Va&&(this._apply=Va)}function Y(Ya,Va,Pa){return new G(Ya,Va,Pa)}function Q(Ya){let Va;const Pa=new Promise(Ha=>Va=Ha);Pa.requests=0;Pa.done=()=>{0===--Pa.requests&&(Ya._pending=null,Va(Ya))};return Ya._pending=
Pa}function ja(Ya,Va,Pa,Ha,Ca,Aa){const Ga=w.extend({},Aa,ab);let Ka;w.isFunction(Pa)||(Pa=w.constant(Pa));void 0===Ha?Ca=cb=>Ya.touch(Pa(cb)):w.isFunction(Ha)?(Ka=new P(null,Ha,Ca,!1),Ca=cb=>{Ka.evaluate(cb);cb=Pa(cb);const fb=Ka.value;U(fb)?Ya.pulse(cb,fb,Aa):Ya.update(cb,fb,Ga)}):Ca=cb=>Ya.update(Pa(cb),Ha,Ga);Va.apply(Ca)}function pa(Ya,Va,Pa,Ha,Ca,Aa){void 0===Ha?Va.targets().add(Pa):(Aa=Aa||{},Ha=new P(null,J(Pa,Ha),Ca,!1),Ha.modified(Aa.force),Ha.rank=Va.rank,Va.targets().add(Ha),Pa&&(Ha.skip(!0),
Ha.value=Pa.value,Ha.targets().add(Pa),Ya.connect(Pa,[Ha])))}function J(Ya,Va){Va=w.isFunction(Va)?Va:w.constant(Va);return Ya?function(Pa,Ha){Pa=Va(Pa,Ha);Ya.skip()||(Ya.skip(Pa!==this.value).value=Pa);return Pa}:Va}function K(Ya,Va,Pa){this.dataflow=Ya;this.stamp=null==Va?-1:Va;this.add=[];this.rem=[];this.mod=[];this.fields=null;this.encode=Pa||null}function ba(Ya,Va){const Pa=[];w.visitArray(Ya,Va,Ha=>Pa.push(Ha));return Pa}function O(Ya,Va){const Pa={};Ya.visit(Va,Ha=>{Pa[Ha[R]]=1});return Ha=>
Pa[Ha[R]]?null:Ha}function fa(Ya,Va){return Ya?(Pa,Ha)=>Ya(Pa,Ha)&&Va(Pa,Ha):Va}function wa(Ya,Va,Pa,Ha){let Ca=0;this.dataflow=Ya;this.stamp=Va;this.fields=null;this.encode=Ha||null;this.pulses=Pa;for(const Aa of Pa)if(Aa.stamp===Va){if(Aa.fields){Ya=this.fields||(this.fields={});for(const Ga in Aa.fields)Ya[Ga]=1}Aa.changed(this.ADD)&&(Ca|=this.ADD);Aa.changed(this.REM)&&(Ca|=this.REM);Aa.changed(this.MOD)&&(Ca|=this.MOD)}this.changes=Ca}function ta(Ya){Ya.error("Dataflow already running. Use runAsync() to chain invocations.");
return Ya}function aa(Ya,Va){if(Va&&Va.stamp===Ya.stamp)return Va;Ya=Ya.fork();Va&&Va!==db&&(Ya.source=Va.source);return Ya}function ha(Ya){let Va=[];return{clear:()=>Va=[],size:()=>Va.length,peek:()=>Va[0],push:Pa=>{Va.push(Pa);return ka(Va,0,Va.length-1,Ya)},pop:()=>{var Pa=Va.pop();let Ha;if(Va.length){Ha=Va[0];Va[0]=Pa;Pa=Va;var Ca=0;const Aa=Ca,Ga=Pa.length,Ka=Pa[Ca];let cb=(Ca<<1)+1,fb;for(;cb<Ga;)fb=cb+1,fb<Ga&&0<=Ya(Pa[cb],Pa[fb])&&(cb=fb),Pa[Ca]=Pa[cb],Ca=cb,cb=(Ca<<1)+1;Pa[Ca]=Ka;ka(Pa,
Aa,Ca,Ya)}else Ha=Pa;return Ha}}}function ka(Ya,Va,Pa,Ha){let Ca,Aa;const Ga=Ya[Pa];for(;Pa>Va;)if(Aa=Pa-1>>1,Ca=Ya[Aa],0>Ha(Ga,Ca))Ya[Pa]=Ca,Pa=Aa;else break;return Ya[Pa]=Ga}function H(){this.logger(w.logger());this.logLevel(w.Error);this._rank=this._clock=0;this._locale=x.defaultLocale();try{this._loader=u.loader()}catch(Ya){}this._touched=I(w.id);this._input={};this._pulse=null;this._heap=ha((Ya,Va)=>Ya.qrank-Va.qrank);this._postrun=[]}function oa(Ya){return function(){return this._log[Ya].apply(this,
arguments)}}function ea(Ya,Va){P.call(this,Ya,null,Va)}function D(Ya){Ya=Ya&&Ya.toLowerCase();return w.hasOwnProperty(pb,Ya)?pb[Ya]:null}const R=Symbol("vega_id");let la=1;V.prototype={set(Ya,Va,Pa,Ha){const Ca=this[Ya],Aa=this["_:mod:_"];if(null!=Va&&0<=Va){if(Ca[Va]!==Pa||Ha)Ca[Va]=Pa,Aa[Va+":"+Ya]=-1,Aa[Ya]=-1}else if(Ca!==Pa||Ha)this[Ya]=Pa,Aa[Ya]=w.isArray(Pa)?1+Pa.length:-1;return this},modified(Ya,Va){const Pa=this["_:mod:_"];if(!arguments.length){for(var Ha in Pa)if(Pa[Ha])return!0;return!1}if(w.isArray(Ya)){for(Ha=
0;Ha<Ya.length;++Ha)if(Pa[Ya[Ha]])return!0;return!1}return null!=Va&&0<=Va?Va+1<Pa[Ya]||!!Pa[Va+":"+Ya]:!!Pa[Ya]},clear(){this["_:mod:_"]={};return this}};let Ia=0;const Ma=new V;P.prototype={targets(){return this._targets||(this._targets=I(w.id))},set(Ya){return this.value!==Ya?(this.value=Ya,1):0},skip:z(1),modified:z(2),parameters(Ya,Va,Pa){Va=!1!==Va;const Ha=this._argval=this._argval||new V,Ca=this._argops=this._argops||[],Aa=[];let Ga,Ka,cb,fb;const La=(Bb,Ob,ec)=>{ec instanceof P?(ec!==this&&
(Va&&ec.targets().add(this),Aa.push(ec)),Ca.push({op:ec,name:Bb,index:Ob})):Ha.set(Bb,Ob,ec)};for(Ga in Ya)if(Ka=Ya[Ga],"pulse"===Ga)w.array(Ka).forEach(Bb=>{Bb instanceof P?Bb!==this&&(Bb.targets().add(this),Aa.push(Bb)):w.error("Pulse parameters must be operator instances.")}),this.source=Ka;else if(w.isArray(Ka))for(Ha.set(Ga,-1,Array(cb=Ka.length)),fb=0;fb<cb;++fb)La(Ga,fb,Ka[fb]);else La(Ga,-1,Ka);this.marshall().clear();Pa&&(Ca.initonly=!0);return Aa},marshall(Ya){const Va=this._argval||Ma,
Pa=this._argops;let Ha,Ca,Aa,Ga;if(Pa){const Ka=Pa.length;for(Ca=0;Ca<Ka;++Ca)Ha=Pa[Ca],Aa=Ha.op,Ga=Aa.modified()&&Aa.stamp===Ya,Va.set(Ha.name,Ha.index,Aa.value,Ga);if(Pa.initonly){for(Ca=0;Ca<Ka;++Ca)Ha=Pa[Ca],Ha.op.targets().remove(this);this._update=this._argops=null}}return Va},detach(){const Ya=this._argops;let Va,Pa;if(Ya)for(Va=0,Pa=Ya.length;Va<Pa;++Va){var Ha=Ya[Va];Ha=Ha.op;Ha._targets&&Ha._targets.remove(this)}this.source=this.pulse=null},evaluate(Ya){var Va=this._update;if(Va){const Pa=
this.marshall(Ya.stamp);Va=Va.call(this,Pa,Ya);Pa.clear();if(Va!==this.value)this.value=Va;else if(!this.modified())return Ya.StopPropagation}},run(Ya){if(Ya.stamp<this.stamp)return Ya.StopPropagation;let Va;this.skip()?(this.skip(!1),Va=0):Va=this.evaluate(Ya);return this.pulse=Va||Ya}};let Ta=0;G.prototype={_filter:w.truthy,_apply:w.identity,targets(){return this._targets||(this._targets=I(w.id))},consume(Ya){if(!arguments.length)return!!this._consume;this._consume=!!Ya;return this},receive(Ya){if(this._filter(Ya)){const Va=
this.value=this._apply(Ya),Pa=this._targets,Ha=Pa?Pa.length:0;for(let Ca=0;Ca<Ha;++Ca)Pa[Ca].receive(Va);this._consume&&(Ya.preventDefault(),Ya.stopPropagation())}},filter(Ya){Ya=Y(Ya);this.targets().add(Ya);return Ya},apply(Ya){Ya=Y(null,Ya);this.targets().add(Ya);return Ya},merge(){const Ya=Y();this.targets().add(Ya);for(let Va=0,Pa=arguments.length;Va<Pa;++Va)arguments[Va].targets().add(Ya);return Ya},throttle(Ya){let Va=-1;return this.filter(()=>{const Pa=Date.now();return Pa-Va>Ya?(Va=Pa,1):
0})},debounce(Ya){const Va=Y();this.targets().add(Y(null,null,w.debounce(Ya,Pa=>{const Ha=Pa.dataflow;Va.receive(Pa);Ha&&Ha.run&&Ha.run()})));return Va},between(Ya,Va){let Pa=!1;Ya.targets().add(Y(null,null,()=>Pa=!0));Va.targets().add(Y(null,null,()=>Pa=!1));return this.filter(()=>Pa)},detach(){this._filter=w.truthy;this._targets=null}};const ab={skip:!0},db={};K.prototype={StopPropagation:db,ADD:1,REM:2,MOD:4,ADD_REM:3,ADD_MOD:5,ALL:7,REFLOW:8,SOURCE:16,NO_SOURCE:32,NO_FIELDS:64,fork(Ya){return(new K(this.dataflow)).init(this,
Ya)},clone(){const Ya=this.fork(7);Ya.add=Ya.add.slice();Ya.rem=Ya.rem.slice();Ya.mod=Ya.mod.slice();Ya.source&&(Ya.source=Ya.source.slice());return Ya.materialize(23)},addAll(){let Ya=this;Ya.source&&Ya.add!==Ya.rem&&(Ya.rem.length||Ya.source.length!==Ya.add.length)&&(Ya=(new K(this.dataflow)).init(this),Ya.add=Ya.source,Ya.rem=[]);return Ya},init(Ya,Va){this.stamp=Ya.stamp;this.encode=Ya.encode;!Ya.fields||Va&64||(this.fields=Ya.fields);Va&1?(this.addF=Ya.addF,this.add=Ya.add):(this.addF=null,this.add=
[]);Va&2?(this.remF=Ya.remF,this.rem=Ya.rem):(this.remF=null,this.rem=[]);Va&4?(this.modF=Ya.modF,this.mod=Ya.mod):(this.modF=null,this.mod=[]);Va&32?this.source=this.srcF=null:(this.srcF=Ya.srcF,this.source=Ya.source,Ya.cleans&&(this.cleans=Ya.cleans));return this},runAfter(Ya){this.dataflow.runAfter(Ya)},changed(Ya){Ya=Ya||7;return Ya&1&&this.add.length||Ya&2&&this.rem.length||Ya&4&&this.mod.length},reflow(Ya){if(Ya)return this.fork(7).reflow();Ya=this.add.length;const Va=this.source&&this.source.length;
Va&&Va!==Ya&&(this.mod=this.source,Ya&&this.filter(4,O(this,1)));return this},clean(Ya){return arguments.length?(this.cleans=!!Ya,this):this.cleans},modifies(Ya){const Va=this.fields||(this.fields={});w.isArray(Ya)?Ya.forEach(Pa=>Va[Pa]=!0):Va[Ya]=!0;return this},modified(Ya,Va){const Pa=this.fields;return(Va||this.mod.length)&&Pa?arguments.length?w.isArray(Ya)?Ya.some(Ha=>Pa[Ha]):Pa[Ya]:!!Pa:!1},filter(Ya,Va){Ya&1&&(this.addF=fa(this.addF,Va));Ya&2&&(this.remF=fa(this.remF,Va));Ya&4&&(this.modF=
fa(this.modF,Va));Ya&16&&(this.srcF=fa(this.srcF,Va));return this},materialize(Ya){Ya=Ya||7;Ya&1&&this.addF&&(this.add=ba(this.add,this.addF),this.addF=null);Ya&2&&this.remF&&(this.rem=ba(this.rem,this.remF),this.remF=null);Ya&4&&this.modF&&(this.mod=ba(this.mod,this.modF),this.modF=null);Ya&16&&this.srcF&&(this.source=this.source.filter(this.srcF),this.srcF=null);return this},visit(Ya,Va){if(Ya&16)return w.visitArray(this.source,this.srcF,Va),this;Ya&1&&w.visitArray(this.add,this.addF,Va);Ya&2&&
w.visitArray(this.rem,this.remF,Va);Ya&4&&w.visitArray(this.mod,this.modF,Va);const Pa=this.source;Ya&8&&Pa&&(Ya=this.add.length+this.mod.length,Ya!==Pa.length&&(Ya?w.visitArray(Pa,O(this,5),Va):w.visitArray(Pa,this.srcF,Va)));return this}};w.inherits(wa,K,{fork(Ya){const Va=(new K(this.dataflow)).init(this,Ya&this.NO_FIELDS);void 0!==Ya&&(Ya&Va.ADD&&this.visit(Va.ADD,Pa=>Va.add.push(Pa)),Ya&Va.REM&&this.visit(Va.REM,Pa=>Va.rem.push(Pa)),Ya&Va.MOD&&this.visit(Va.MOD,Pa=>Va.mod.push(Pa)));return Va},
changed(Ya){return this.changes&Ya},modified(Ya){const Va=this.fields;return Va&&this.changes&this.MOD?w.isArray(Ya)?Ya.some(Pa=>Va[Pa]):Va[Ya]:0},filter(){w.error("MultiPulse does not support filtering.")},materialize(){w.error("MultiPulse does not support materialization.")},visit(Ya,Va){const Pa=this.pulses,Ha=Pa.length;let Ca=0;if(Ya&this.SOURCE)for(;Ca<Ha;++Ca)Pa[Ca].visit(Ya,Va);else for(;Ca<Ha;++Ca)Pa[Ca].stamp===this.stamp&&Pa[Ca].visit(Ya,Va);return this}});const ub={skip:!1,force:!1};H.prototype=
{stamp(){return this._clock},loader(Ya){return arguments.length?(this._loader=Ya,this):this._loader},locale(Ya){return arguments.length?(this._locale=Ya,this):this._locale},logger(Ya){return arguments.length?(this._log=Ya,this):this._log},error:oa("error"),warn:oa("warn"),info:oa("info"),debug:oa("debug"),logLevel:oa("level"),cleanThreshold:1E4,add:function(Ya,Va,Pa,Ha){let Ca=1;Ya instanceof P||(Ya&&Ya.prototype instanceof P?Ya=new Ya:w.isFunction(Ya)?Ya=new P(null,Ya):(Ca=0,Ya=new P(Ya,Va)));this.rank(Ya);
Ca&&(Ha=Pa,Pa=Va);Pa&&this.connect(Ya,Ya.parameters(Pa,Ha));this.touch(Ya);return Ya},connect:function(Ya,Va){const Pa=Ya.rank,Ha=Va.length;for(let Ca=0;Ca<Ha;++Ca)if(Pa<Va[Ca].rank){this.rerank(Ya);break}},rank:function(Ya){Ya.rank=++this._rank},rerank:function(Ya){const Va=[Ya];let Pa,Ha,Ca;for(;Va.length;)if(this.rank(Pa=Va.pop()),Ha=Pa._targets)for(Ca=Ha.length;0<=--Ca;)Va.push(Pa=Ha[Ca]),Pa===Ya&&w.error("Cycle detected in dataflow graph.")},pulse:function(Ya,Va,Pa){this.touch(Ya,Pa||ub);Pa=
new K(this,this._clock+(this._pulse?0:1));const Ha=Ya.pulse&&Ya.pulse.source||[];Pa.target=Ya;this._input[Ya.id]=Va.pulse(Pa,Ha);return this},touch:function(Ya,Va){Va=Va||ub;this._pulse?this._enqueue(Ya):this._touched.add(Ya);Va.skip&&Ya.skip(!0);return this},update:function(Ya,Va,Pa){Pa=Pa||ub;(Ya.set(Va)||Pa.force)&&this.touch(Ya,Pa);return this},changeset:X,ingest:function(Ya,Va,Pa){Va=this.parse(Va,Pa);return this.pulse(Ya,this.changeset().insert(Va))},parse:function(Ya,Va){const Pa=this.locale();
return u.read(Ya,Va,Pa.timeParse,Pa.utcParse)},preload:async function(Ya,Va,Pa){const Ha=this._pending||Q(this);Ha.requests+=1;Va=await this.request(Va,Pa);this.pulse(Ya,this.changeset().remove(w.truthy).insert(Va.data||[]));Ha.done();return Va},request:async function(Ya,Va){let Pa=0,Ha;try{Ha=await this.loader().load(Ya,{context:"dataflow",response:u.responseType(Va&&Va.type)});try{Ha=this.parse(Ha,Va)}catch(Ca){Pa=-2,this.warn("Data ingestion failed",Ya,Ca)}}catch(Ca){Pa=-1,this.warn("Loading failed",
Ya,Ca)}return{data:Ha,status:Pa}},events:function(Ya,Va,Pa,Ha){const Ca=this,Aa=Y(Pa,Ha);Pa=function(Ga){Ga.dataflow=Ca;try{Aa.receive(Ga)}catch(Ka){Ca.error(Ka)}finally{Ca.run()}};Ya="string"===typeof Ya&&"undefined"!==typeof document?document.querySelectorAll(Ya):w.array(Ya);Ha=Ya.length;for(let Ga=0;Ga<Ha;++Ga)Ya[Ga].addEventListener(Va,Pa);return Aa},on:function(Ya,Va,Pa,Ha,Ca){(Ya instanceof P?pa:ja)(this,Ya,Va,Pa,Ha,Ca);return this},evaluate:async function(Ya,Va,Pa){const Ha=this,Ca=[];if(Ha._pulse)return ta(Ha);
Ha._pending&&await Ha._pending;Va&&await B(Ha,Va);if(!Ha._touched.length)return Ha.debug("Dataflow invoked, but nothing to do."),Ha;Va=++Ha._clock;Ha._pulse=new K(Ha,Va,Ya);Ha._touched.forEach(fb=>Ha._enqueue(fb,!0));Ha._touched=I(w.id);let Aa=0;let Ga,Ka;try{for(;0<Ha._heap.size();){var cb=Ha._heap.pop();cb.rank!==cb.qrank?Ha._enqueue(cb,!0):(Ga=cb.run(Ha._getPulse(cb,Ya)),Ga.then?Ga=await Ga:Ga.async&&(Ca.push(Ga.async),Ga=db),Ga!==db&&cb._targets&&cb._targets.forEach(fb=>Ha._enqueue(fb)),++Aa)}}catch(fb){Ha._heap.clear(),
Ka=fb}Ha._input={};Ha._pulse=null;Ha.debug(`Pulse ${Va}: ${Aa} operators`);Ka&&(Ha._postrun=[],Ha.error(Ka));if(Ha._postrun.length)for(Ya=Ha._postrun.sort((fb,La)=>La.priority-fb.priority),Ha._postrun=[],cb=0;cb<Ya.length;++cb)await B(Ha,Ya[cb].callback);Pa&&await B(Ha,Pa);Ca.length&&Promise.all(Ca).then(fb=>Ha.runAsync(null,()=>{fb.forEach(La=>{try{La(Ha)}catch(Bb){Ha.error(Bb)}})}));return Ha},run:function(Ya,Va,Pa){return this._pulse?ta(this):(this.evaluate(Ya,Va,Pa),this)},runAsync:async function(Ya,
Va,Pa){for(;this._running;)await this._running;const Ha=()=>this._running=null;(this._running=this.evaluate(Ya,Va,Pa)).then(Ha,Ha);return this._running},runAfter:function(Ya,Va,Pa){if(this._pulse||Va)this._postrun.push({priority:Pa||0,callback:Ya});else try{Ya(this)}catch(Ha){this.error(Ha)}},_enqueue:function(Ya,Va){const Pa=Ya.stamp<this._clock;Pa&&(Ya.stamp=this._clock);if(Pa||Va)Ya.qrank=Ya.rank,this._heap.push(Ya)},_getPulse:function(Ya,Va){const Pa=Ya.source,Ha=this._clock;return Pa&&w.isArray(Pa)?
new wa(this,Ha,Pa.map(Ca=>Ca.pulse),Va):this._input[Ya.id]||aa(this._pulse,Pa&&Pa.pulse)}};w.inherits(ea,P,{run(Ya){if(Ya.stamp<this.stamp)return Ya.StopPropagation;let Va;this.skip()?this.skip(!1):Va=this.evaluate(Ya);Va=Va||Ya;Va.then?Va=Va.then(Pa=>this.pulse=Pa):Va!==Ya.StopPropagation&&(this.pulse=Va);return Va},evaluate(Ya){const Va=this.marshall(Ya.stamp);Ya=this.transform(Va,Ya);Va.clear();return Ya},transform(){}});const pb={};A.Dataflow=H;A.EventStream=G;A.MultiPulse=wa;A.Operator=P;A.Parameters=
V;A.Pulse=K;A.Transform=ea;A.UniqueList=I;A.asyncCallback=B;A.changeset=X;A.definition=function(Ya){return(Ya=D(Ya))&&Ya.Definition||null};A.derive=function(Ya){return da(Ya,N({}))};A.ingest=N;A.isChangeSet=U;A.isTuple=function(Ya){return!(!Ya||!Ya[R])};A.rederive=da;A.replace=function(Ya,Va){Va[R]=Ya[R];return Va};A.stableCompare=function(Ya,Va){return Ya?Va?(Pa,Ha)=>Ya(Pa,Ha)||Va(Pa)[R]-Va(Ha)[R]:(Pa,Ha)=>Ya(Pa,Ha)||Pa[R]-Ha[R]:null};A.transform=D;A.transforms=pb;A.tupleid=function(Ya){return Ya[R]}})};
shadow$provide[427]=function(ob,Ba,Gb,Ea){(function(A,w){"object"===typeof Ea&&"undefined"!==typeof Gb?w(Ea):"function"===typeof define&&define.amd?define(["exports"],w):(A="undefined"!==typeof globalThis?globalThis:A||self,w(A.vega={}))})(this,function(A){function*w(Pa,Ha){if(null==Ha)for(var Ca of Pa)null!=Ca&&""!==Ca&&(Ca=+Ca)>=Ca&&(yield Ca);else{Ca=-1;for(let Aa of Pa)Aa=Ha(Aa,++Ca,Pa),null!=Aa&&""!==Aa&&(Aa=+Aa)>=Aa&&(yield Aa)}}function u(Pa,Ha){return null==Pa||null==Ha?NaN:Pa<Ha?-1:Pa>Ha?
1:Pa>=Ha?0:NaN}function x(Pa){return null===Pa?NaN:+Pa}function*I(Pa,Ha){if(void 0===Ha)for(var Ca of Pa)null!=Ca&&(Ca=+Ca)>=Ca&&(yield Ca);else{Ca=-1;for(let Aa of Pa)null!=(Aa=Ha(Aa,++Ca,Pa))&&(Aa=+Aa)>=Aa&&(yield Aa)}}function B(Pa=u){if(Pa===u)return N;if("function"!==typeof Pa)throw new TypeError("compare is not a function");return(Ha,Ca)=>{const Aa=Pa(Ha,Ca);return Aa||0===Aa?Aa:(0===Pa(Ca,Ca))-(0===Pa(Ha,Ha))}}function N(Pa,Ha){return(null==Pa||!(Pa>=Pa))-(null==Ha||!(Ha>=Ha))||(Pa<Ha?-1:Pa>
Ha?1:0)}function da(Pa,Ha){let Ca;if(void 0===Ha)for(var Aa of Pa)null!=Aa&&(Ca<Aa||void 0===Ca&&Aa>=Aa)&&(Ca=Aa);else{Aa=-1;for(let Ga of Pa)null!=(Ga=Ha(Ga,++Aa,Pa))&&(Ca<Ga||void 0===Ca&&Ga>=Ga)&&(Ca=Ga)}return Ca}function U(Pa,Ha){let Ca;if(void 0===Ha)for(var Aa of Pa)null!=Aa&&(Ca>Aa||void 0===Ca&&Aa>=Aa)&&(Ca=Aa);else{Aa=-1;for(let Ga of Pa)null!=(Ga=Ha(Ga,++Aa,Pa))&&(Ca>Ga||void 0===Ca&&Ga>=Ga)&&(Ca=Ga)}return Ca}function X(Pa,Ha,Ca=0,Aa=Infinity,Ga){Ha=Math.floor(Ha);Ca=Math.floor(Math.max(0,
Ca));Aa=Math.floor(Math.min(Pa.length-1,Aa));if(!(Ca<=Ha&&Ha<=Aa))return Pa;for(Ga=void 0===Ga?N:B(Ga);Aa>Ca;){if(600<Aa-Ca){var Ka=Aa-Ca+1,cb=Ha-Ca+1,fb=Math.log(Ka),La=.5*Math.exp(2*fb/3);fb=.5*Math.sqrt(fb*La*(Ka-La)/Ka)*(0>cb-Ka/2?-1:1);X(Pa,Ha,Math.max(Ca,Math.floor(Ha-cb*La/Ka+fb)),Math.min(Aa,Math.floor(Ha+(Ka-cb)*La/Ka+fb)),Ga)}Ka=Pa[Ha];cb=Ca;La=Aa;V(Pa,Ca,Ha);for(0<Ga(Pa[Aa],Ka)&&V(Pa,Ca,Aa);cb<La;){V(Pa,cb,La);++cb;for(--La;0>Ga(Pa[cb],Ka);)++cb;for(;0<Ga(Pa[La],Ka);)--La}0===Ga(Pa[Ca],
Ka)?V(Pa,Ca,La):(++La,V(Pa,La,Aa));La<=Ha&&(Ca=La+1);Ha<=La&&(Aa=La-1)}return Pa}function V(Pa,Ha,Ca){const Aa=Pa[Ha];Pa[Ha]=Pa[Ca];Pa[Ca]=Aa}function P(Pa,Ha,Ca){Pa=Float64Array.from(I(Pa,Ca));if((Ca=Pa.length)&&!isNaN(Ha=+Ha)){if(0>=Ha||2>Ca)return U(Pa);if(1<=Ha)return da(Pa);Ha*=Ca-1;Ca=Math.floor(Ha);var Aa=da(X(Pa,Ca).subarray(0,Ca+1));Pa=U(Pa.subarray(Ca+1));return Aa+(Pa-Aa)*(Ha-Ca)}}function z(Pa,Ha,Ca=x){if((Aa=Pa.length)&&!isNaN(Ha=+Ha)){if(0>=Ha||2>Aa)return+Ca(Pa[0],0,Pa);if(1<=Ha)return+Ca(Pa[Aa-
1],Aa-1,Pa);var Aa;Ha*=Aa-1;Aa=Math.floor(Ha);var Ga=+Ca(Pa[Aa],Aa,Pa);Pa=+Ca(Pa[Aa+1],Aa+1,Pa);return Ga+(Pa-Ga)*(Ha-Aa)}}function G(Pa,Ha,Ca){const Aa=Float64Array.from(w(Pa,Ca));Aa.sort(u);return Ha.map(Ga=>z(Aa,Ga))}function Y(Pa,Ha){return G(Pa,[.25,.5,.75],Ha)}function Q(Pa,Ha){const Ca=Pa.length;{var Aa=0;let Ka,cb=0,fb=0;if(void 0===Ha)for(var Ga of Pa)null!=Ga&&(Ga=+Ga)>=Ga&&(Ka=Ga-cb,cb+=Ka/++Aa,fb+=Ka*(Ga-cb));else{Ga=-1;for(let La of Pa)null!=(La=Ha(La,++Ga,Pa))&&(La=+La)>=La&&(Ka=La-
cb,cb+=Ka/++Aa,fb+=Ka*(La-cb))}Aa=1<Aa?fb/(Aa-1):void 0}Aa=Aa?Math.sqrt(Aa):Aa;Pa=Y(Pa,Ha);return 1.06*(Math.min(Aa,(Pa[2]-Pa[0])/1.34)||Aa||Math.abs(Pa[0])||1)*Math.pow(Ca,-.2)}function ja(Pa,Ha){const Ca=Pa.length;let Aa=0,Ga=1,Ka,cb;for(;Pa[Aa]===Pa[Ga];)++Ga;for(;Ga<Ca;){for(Ka=Ga+1;Pa[Ga]===Pa[Ka];)++Ka;if(Pa[Ga]-Pa[Ga-1]<Ha){for(cb=Ga+(Aa+Ka-Ga-Ga>>1);cb<Ga;)Pa[cb++]=Pa[Ga];for(;cb>Ga;)Pa[cb--]=Pa[Aa]}Aa=Ga;Ga=Ka}return Pa}function pa(Pa,Ha){Pa=Pa||0;Ha=null==Ha?1:Ha;let Ca,Aa;if(Ya===Ya)Ca=
Ya,Ya=NaN;else{do{Ca=2*A.random()-1;Aa=2*A.random()-1;var Ga=Ca*Ca+Aa*Aa}while(0===Ga||1<Ga);Ga=Math.sqrt(-2*Math.log(Ga)/Ga);Ca*=Ga;Ya=Aa*Ga}return Pa+Ca*Ha}function J(Pa,Ha,Ca){Ca=null==Ca?1:Ca;Pa=(Pa-(Ha||0))/Ca;return Math.exp(-.5*Pa*Pa)/(Ca*ub)}function K(Pa,Ha,Ca){Pa=(Pa-(Ha||0))/(null==Ca?1:Ca);Ha=Math.abs(Pa);37<Ha?Ca=0:(Ca=Math.exp(-Ha*Ha/2),7.07106781186547>Ha?(Ca*=(((((.0352624965998911*Ha+.700383064443688)*Ha+6.37396220353165)*Ha+33.912866078383)*Ha+112.079291497871)*Ha+221.213596169931)*
Ha+220.206867912376,Ca/=((((((.0883883476483184*Ha+1.75566716318264)*Ha+16.064177579207)*Ha+86.7807322029461)*Ha+296.564248779674)*Ha+637.333633378831)*Ha+793.826512519948)*Ha+440.413735824752):Ca=Ca/(Ha+1/(Ha+2/(Ha+3/(Ha+4/(Ha+.65)))))/2.506628274631);return 0<Pa?1-Ca:Ca}function ba(Pa,Ha,Ca){if(0>Pa||1<Pa)return NaN;Pa=2*Pa-1;var Aa=-Math.log((1-Pa)*(1+Pa));6.25>Aa?(Aa-=3.125,Aa=1.6536545626831027+(.24015818242558962+(-.006033670871430149+(-7.40702534166267E-4+(1.8673420803405714E-4+(-1.3882523362786469E-5+
(-1.3654692000834679E-6+(4.2347877827932404E-7+(-2.9070369957882005E-8+(-4.112633980346984E-9+(1.0512122733215323E-9+(-5.415412054294628E-11+(-1.2975133253453532E-11+(2.6335093153082323E-12+(-8.151934197605472E-14+(-4.054566272975207E-14+(6.637638134358324E-15+(2.0972767875968562E-17+(-1.333171662854621E-16+(1.1157877678025181E-17+(1.28584807152564E-18+(-1.6850591381820166E-19+-3.64441206401782E-21*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa):16>Aa?(Aa=Math.sqrt(Aa)-
3.25,Aa=3.0838856104922208+(1.0052589676941592+(.005370914553590064+(-.003751208507569241+(.002491442096107851+(-.0016882755560235047+(9.532893797373805E-4+(-3.550375203628475E-4+(2.4031110387097894E-5+(6.828485145957318E-5+(-4.7318229009055734E-5+(1.2475304481671779E-5+(2.9234449089955446E-6+(-4.013867526981546E-6+(1.5027403968909828E-6+(1.8239629214389228E-8+(-2.7517406297064545E-7+(9.075656193888539E-8+2.2137376921775787E-9*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa):
Number.isFinite(Aa)?(Aa=Math.sqrt(Aa)-5,Aa=4.849906401408584+(1.0103004648645344+(-1.3871931833623122E-4+(-2.1503011930044477E-4+(7.599527703001776E-5+(-1.968177810553167E-5+(4.526062597223154E-6+(-9.9298272942317E-7+(2.2900482228026655E-7+(-6.771199775845234E-8+(2.914795345090108E-8+(-1.496002662714924E-8+(7.61570120807834E-9+(-3.789465440126737E-9+(1.5076572693500548E-9+(-2.555641816996525E-10+-2.7109920616438573E-11*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa)*Aa):Aa=Infinity;return(Ha||
0)+(null==Ca?1:Ca)*pb*Aa*Pa}function O(Pa,Ha){let Ca,Aa;const Ga={mean(Ka){return arguments.length?(Ca=Ka||0,Ga):Ca},stdev(Ka){return arguments.length?(Aa=null==Ka?1:Ka,Ga):Aa},sample:()=>pa(Ca,Aa),pdf:Ka=>J(Ka,Ca,Aa),cdf:Ka=>K(Ka,Ca,Aa),icdf:Ka=>ba(Ka,Ca,Aa)};return Ga.mean(Pa).stdev(Ha)}function fa(Pa,Ha){Ha=null==Ha?1:Ha;return Math.exp((Pa||0)+pa()*Ha)}function wa(Pa,Ha,Ca){if(0>=Pa)return 0;Ca=null==Ca?1:Ca;Ha=(Math.log(Pa)-(Ha||0))/Ca;return Math.exp(-.5*Ha*Ha)/(Ca*ub*Pa)}function ta(Pa,Ha,
Ca){return K(Math.log(Pa),Ha,Ca)}function aa(Pa,Ha,Ca){return Math.exp(ba(Pa,Ha,Ca))}function ha(Pa,Ha){null==Ha&&(Ha=null==Pa?1:Pa,Pa=0);return Pa+(Ha-Pa)*A.random()}function ka(Pa,Ha,Ca){null==Ca&&(Ca=null==Ha?1:Ha,Ha=0);return Pa>=Ha&&Pa<=Ca?1/(Ca-Ha):0}function H(Pa,Ha,Ca){null==Ca&&(Ca=null==Ha?1:Ha,Ha=0);return Pa<Ha?0:Pa>Ca?1:(Pa-Ha)/(Ca-Ha)}function oa(Pa,Ha,Ca){null==Ca&&(Ca=null==Ha?1:Ha,Ha=0);return 0<=Pa&&1>=Pa?Ha+Pa*(Ca-Ha):NaN}function ea(Pa,Ha,Ca){let Aa=0,Ga=0;for(const Ka of Pa)Pa=
Ca(Ka),null==Ha(Ka)||null==Pa||isNaN(Pa)||(Aa+=(Pa-Aa)/++Ga);return{coef:[Aa],predict:()=>Aa,rSquared:0}}function D(Pa,Ha,Ca,Aa){Aa-=Pa*Pa;Ca=1E-24>Math.abs(Aa)?0:(Ca-Pa*Ha)/Aa;return[Ha-Ca*Pa,Ca]}function R(Pa,Ha,Ca,Aa){Pa=Pa.filter(ec=>{let sc=Ha(ec);ec=Ca(ec);return null!=sc&&(sc=+sc)>=sc&&null!=ec&&(ec=+ec)>=ec});Aa&&Pa.sort((ec,sc)=>Ha(ec)-Ha(sc));Aa=Pa.length;const Ga=new Float64Array(Aa),Ka=new Float64Array(Aa);let cb=0,fb=0,La=0,Bb,Ob;for(Ob of Pa)Ga[cb]=Pa=+Ha(Ob),Ka[cb]=Bb=+Ca(Ob),++cb,
fb+=(Pa-fb)/cb,La+=(Bb-La)/cb;for(cb=0;cb<Aa;++cb)Ga[cb]-=fb,Ka[cb]-=La;return[Ga,Ka,fb,La]}function la(Pa,Ha,Ca,Aa){let Ga=-1,Ka;for(const cb of Pa)Pa=Ha(cb),Ka=Ca(cb),null!=Pa&&(Pa=+Pa)>=Pa&&null!=Ka&&(Ka=+Ka)>=Ka&&Aa(Pa,Ka,++Ga)}function Ia(Pa,Ha,Ca,Aa,Ga){let Ka=0,cb=0;la(Pa,Ha,Ca,(fb,La)=>{fb=La-Ga(fb);La-=Aa;Ka+=fb*fb;cb+=La*La});return 1-Ka/cb}function Ma(Pa,Ha,Ca){let Aa=0,Ga=0,Ka=0,cb=0,fb=0;la(Pa,Ha,Ca,(Ob,ec)=>{++fb;Aa+=(Ob-Aa)/fb;Ga+=(ec-Ga)/fb;Ka+=(Ob*ec-Ka)/fb;cb+=(Ob*Ob-cb)/fb});const La=
D(Aa,Ga,Ka,cb),Bb=Ob=>La[0]+La[1]*Ob;return{coef:La,predict:Bb,rSquared:Ia(Pa,Ha,Ca,Ga,Bb)}}function Ta(Pa,Ha,Ca){const [Aa,Ga,Ka,cb]=R(Pa,Ha,Ca);var fb=Aa.length,La=0;let Bb=0;var Ob=0;let ec=0,sc=0,Ic,Xb,Wb,Kc;for(Ic=0;Ic<fb;)Xb=Aa[Ic],Wb=Ga[Ic++],Kc=Xb*Xb,La+=(Kc-La)/Ic,Bb+=(Kc*Xb-Bb)/Ic,Ob+=(Kc*Kc-Ob)/Ic,ec+=(Xb*Wb-ec)/Ic,sc+=(Kc*Wb-sc)/Ic;fb=Ob-La*La;Ob=La*fb-Bb*Bb;const Kb=(sc*La-ec*Bb)/Ob,mc=(ec*fb-sc*Bb)/Ob,Ub=-Kb*La;La=oc=>{oc-=Ka;return Kb*oc*oc+mc*oc+Ub+cb};return{coef:[Ub-mc*Ka+Kb*Ka*
Ka+cb,mc-2*Kb*Ka,Kb],predict:La,rSquared:Ia(Pa,Ha,Ca,cb,La)}}function ab(Pa,Ha,Ca,Aa){const Ga=Array(Pa);let Ka,cb,fb;for(Ka=0;Ka<Pa;++Ka)Ga[Ka]=0;for(Ka=Pa-1;0<=Ka;--Ka)for(cb=Ha[Ka],fb=1,Ga[Ka]+=cb,Pa=1;Pa<=Ka;++Pa)fb*=(Ka+1-Pa)/Pa,Ga[Ka-Pa]+=cb*Math.pow(Ca,Pa)*fb;Ga[0]+=Aa;return Ga}function db(Pa){const Ha=Pa.length-1,Ca=[];let Aa,Ga,Ka,cb,fb;for(Aa=0;Aa<Ha;++Aa){cb=Aa;for(Ga=Aa+1;Ga<Ha;++Ga)Math.abs(Pa[Aa][Ga])>Math.abs(Pa[Aa][cb])&&(cb=Ga);for(Ka=Aa;Ka<Ha+1;++Ka)fb=Pa[Ka][Aa],Pa[Ka][Aa]=Pa[Ka][cb],
Pa[Ka][cb]=fb;for(Ga=Aa+1;Ga<Ha;++Ga)for(Ka=Ha;Ka>=Aa;Ka--)Pa[Ka][Ga]-=Pa[Ka][Aa]*Pa[Aa][Ga]/Pa[Aa][Aa]}for(Ga=Ha-1;0<=Ga;--Ga){fb=0;for(Ka=Ga+1;Ka<Ha;++Ka)fb+=Pa[Ka][Ga]*Ca[Ka];Ca[Ga]=(Pa[Ha][Ga]-fb)/Pa[Ga][Ga]}return Ca}A.random=Math.random;const ub=Math.sqrt(2*Math.PI),pb=Math.SQRT2;let Ya=NaN;const Va=.5*Math.PI/180;A.bandwidthNRD=Q;A.bin=function(Pa){var Ha=Pa.maxbins||20;const Ca=Pa.base||10,Aa=Math.log(Ca),Ga=Pa.divide||[5,2];let Ka=Pa.extent[0],cb=Pa.extent[1];let fb,La,Bb,Ob;const ec=Pa.span||
cb-Ka||Math.abs(Ka)||1;if(Pa.step)var sc=Pa.step;else if(Pa.steps){La=ec/Ha;Bb=0;for(Ob=Pa.steps.length;Bb<Ob&&Pa.steps[Bb]<La;++Bb);sc=Pa.steps[Math.max(0,Bb-1)]}else{sc=Math.ceil(Math.log(Ha)/Aa);fb=Pa.minstep||0;for(sc=Math.max(fb,Math.pow(Ca,Math.round(Math.log(ec)/Aa)-sc));Math.ceil(ec/sc)>Ha;)sc*=Ca;Bb=0;for(Ob=Ga.length;Bb<Ob;++Bb)La=sc/Ga[Bb],La>=fb&&ec/La<=Ha&&(sc=La)}La=Math.log(sc);Ha=Math.pow(Ca,-(0<=La?0:~~(-La/Aa)+1)-1);if(Pa.nice||void 0===Pa.nice)La=Math.floor(Ka/sc+Ha)*sc,Ka=Ka<La?
La-sc:La,cb=Math.ceil(cb/sc)*sc;return{start:Ka,stop:cb===Ka?Ka+sc:cb,step:sc}};A.bootstrapCI=function(Pa,Ha,Ca,Aa){if(!Pa.length)return[void 0,void 0];Pa=Float64Array.from(w(Pa,Aa));Aa=Pa.length;let Ga,Ka,cb,fb;cb=0;for(fb=Array(Ha);cb<Ha;++cb){for(Ka=Ga=0;Ka<Aa;++Ka)Ga+=Pa[~~(A.random()*Aa)];fb[cb]=Ga/Aa}fb.sort(u);return[P(fb,Ca/2),P(fb,1-Ca/2)]};A.cumulativeLogNormal=ta;A.cumulativeNormal=K;A.cumulativeUniform=H;A.densityLogNormal=wa;A.densityNormal=J;A.densityUniform=ka;A.dotbin=function(Pa,
Ha,Ca,Aa){Aa=Aa||(sc=>sc);const Ga=Pa.length,Ka=new Float64Array(Ga);let cb=0,fb=1,La=Aa(Pa[0]),Bb=La,Ob=La+Ha,ec;for(;fb<Ga;++fb){ec=Aa(Pa[fb]);if(ec>=Ob){for(Bb=(La+Bb)/2;cb<fb;++cb)Ka[cb]=Bb;Ob=ec+Ha;La=ec}Bb=ec}for(Bb=(La+Bb)/2;cb<fb;++cb)Ka[cb]=Bb;return Ca?ja(Ka,Ha+Ha/4):Ka};A.quantileLogNormal=aa;A.quantileNormal=ba;A.quantileUniform=oa;A.quantiles=G;A.quartiles=Y;A.randomInteger=function(Pa,Ha){null==Ha&&(Ha=Pa,Pa=0);let Ca,Aa,Ga;const Ka={min(cb){return arguments.length?(Ca=cb||0,Ga=Aa-Ca,
Ka):Ca},max(cb){return arguments.length?(Aa=cb||0,Ga=Aa-Ca,Ka):Aa},sample(){return Ca+Math.floor(Ga*A.random())},pdf(cb){return cb===Math.floor(cb)&&cb>=Ca&&cb<Aa?1/Ga:0},cdf(cb){cb=Math.floor(cb);return cb<Ca?0:cb>=Aa?1:(cb-Ca+1)/Ga},icdf(cb){return 0<=cb&&1>=cb?Ca-1+Math.floor(cb*Ga):NaN}};return Ka.min(Pa).max(Ha)};A.randomKDE=function(Pa,Ha){const Ca=O();let Aa=0;const Ga={data(Ka){return arguments.length?(Aa=(Pa=Ka)?Ka.length:0,Ga.bandwidth(Ha)):Pa},bandwidth(Ka){if(!arguments.length)return Ha;
Ha=Ka;!Ha&&Pa&&(Ha=Q(Pa));return Ga},sample(){return Pa[~~(A.random()*Aa)]+Ha*Ca.sample()},pdf(Ka){let cb=0,fb=0;for(;fb<Aa;++fb)cb+=Ca.pdf((Ka-Pa[fb])/Ha);return cb/Ha/Aa},cdf(Ka){let cb=0,fb=0;for(;fb<Aa;++fb)cb+=Ca.cdf((Ka-Pa[fb])/Ha);return cb/Aa},icdf(){throw Error("KDE icdf not supported.");}};return Ga.data(Pa)};A.randomLCG=function(Pa){return function(){Pa=(1103515245*Pa+12345)%2147483647;return Pa/2147483647}};A.randomLogNormal=function(Pa,Ha){let Ca,Aa;const Ga={mean(Ka){return arguments.length?
(Ca=Ka||0,Ga):Ca},stdev(Ka){return arguments.length?(Aa=null==Ka?1:Ka,Ga):Aa},sample:()=>fa(Ca,Aa),pdf:Ka=>wa(Ka,Ca,Aa),cdf:Ka=>ta(Ka,Ca,Aa),icdf:Ka=>aa(Ka,Ca,Aa)};return Ga.mean(Pa).stdev(Ha)};A.randomMixture=function(Pa,Ha){let Ca=0,Aa;const Ga={weights(Ka){if(arguments.length){var cb=Ha=Ka||[];const fb=[];let La=0,Bb;for(Bb=0;Bb<Ca;++Bb)La+=fb[Bb]=null==cb[Bb]?1:+cb[Bb];for(Bb=0;Bb<Ca;++Bb)fb[Bb]/=La;Aa=fb;return Ga}return Ha},distributions(Ka){return arguments.length?(Ka?(Ca=Ka.length,Pa=Ka):
(Ca=0,Pa=[]),Ga.weights(Ha)):Pa},sample(){const Ka=A.random();let cb=Pa[Ca-1],fb=Aa[0],La=0;for(;La<Ca-1;fb+=Aa[++La])if(Ka<fb){cb=Pa[La];break}return cb.sample()},pdf(Ka){let cb=0,fb=0;for(;fb<Ca;++fb)cb+=Aa[fb]*Pa[fb].pdf(Ka);return cb},cdf(Ka){let cb=0,fb=0;for(;fb<Ca;++fb)cb+=Aa[fb]*Pa[fb].cdf(Ka);return cb},icdf(){throw Error("Mixture icdf not supported.");}};return Ga.distributions(Pa).weights(Ha)};A.randomNormal=O;A.randomUniform=function(Pa,Ha){let Ca,Aa;const Ga={min(Ka){return arguments.length?
(Ca=Ka||0,Ga):Ca},max(Ka){return arguments.length?(Aa=null==Ka?1:Ka,Ga):Aa},sample:()=>ha(Ca,Aa),pdf:Ka=>ka(Ka,Ca,Aa),cdf:Ka=>H(Ka,Ca,Aa),icdf:Ka=>oa(Ka,Ca,Aa)};null==Ha&&(Ha=null==Pa?1:Pa,Pa=0);return Ga.min(Pa).max(Ha)};A.regressionConstant=ea;A.regressionExp=function(Pa,Ha,Ca){const [Aa,,Ga,Ka]=R(Pa,Ha,Ca);let cb=0,fb=0,La=0,Bb=0,Ob=0,ec,sc,Ic;la(Pa,Ha,Ca,(Kb,mc)=>{ec=Aa[Ob++];sc=Math.log(mc);Ic=ec*mc;cb+=(mc*sc-cb)/Ob;fb+=(Ic-fb)/Ob;La+=(Ic*sc-La)/Ob;Bb+=(ec*Ic-Bb)/Ob});const [Xb,Wb]=D(fb/Ka,
cb/Ka,La/Ka,Bb/Ka),Kc=Kb=>Math.exp(Xb+Wb*(Kb-Ga));return{coef:[Math.exp(Xb-Wb*Ga),Wb],predict:Kc,rSquared:Ia(Pa,Ha,Ca,Ka,Kc)}};A.regressionLinear=Ma;A.regressionLoess=function(Pa,Ha,Ca,Aa){const [Ga,Ka,cb,fb]=R(Pa,Ha,Ca,!0);Pa=Ga.length;Ha=Math.max(2,~~(Aa*Pa));Aa=new Float64Array(Pa);Ca=new Float64Array(Pa);var La=(new Float64Array(Pa)).fill(1);for(var Bb=-1;2>=++Bb;){var Ob=[0,Ha-1];for(let Ub=0;Ub<Pa;++Ub){var ec=Ga[Ub],sc=Ob[0],Ic=Ob[1],Xb=0,Wb=0,Kc=0,Kb=0;let oc=0;const Cc=1/Math.abs(Ga[ec-Ga[sc]>
Ga[Ic]-ec?sc:Ic]-ec||1);for(;sc<=Ic;++sc){const nc=Ga[sc],rc=Ka[sc];var mc=Math.abs(ec-nc)*Cc;const Hb=(mc=1-mc*mc*mc)*mc*mc*La[sc];mc=nc*Hb;Xb+=Hb;Wb+=mc;Kc+=rc*Hb;Kb+=rc*mc;oc+=nc*mc}const [Mc,Pb]=D(Wb/Xb,Kc/Xb,Kb/Xb,oc/Xb);Aa[Ub]=Mc+Pb*ec;Ca[Ub]=Math.abs(Ka[Ub]-Aa[Ub]);ec=Ga;Ic=Ub+1;Xb=Ob;Wb=ec[Ic];Kc=Xb[0];Kb=Xb[1]+1;if(!(Kb>=ec.length))for(;Ic>Kc&&ec[Kb]-Wb<=Wb-ec[Kc];)Xb[0]=++Kc,Xb[1]=Kb,++Kb}if(2===Bb)break;Ob=P(Ca,.5,void 0);if(1E-12>Math.abs(Ob))break;for(let Ub=0,oc,Cc;Ub<Pa;++Ub)oc=Ca[Ub]/
(6*Ob),La[Ub]=1<=oc?1E-12:(Cc=1-oc*oc)*Cc}Pa=Ga.length;Ha=[];La=Ca=0;for(Bb=[];Ca<Pa;++Ca)Ob=Ga[Ca]+cb,Bb[0]===Ob?Bb[1]+=(Aa[Ca]-Bb[1])/++La:(La=0,Bb[1]+=fb,Bb=[Ob,Aa[Ca]],Ha.push(Bb));Bb[1]+=fb;return Ha};A.regressionLog=function(Pa,Ha,Ca){let Aa=0,Ga=0,Ka=0,cb=0,fb=0;la(Pa,Ha,Ca,(Ob,ec)=>{++fb;Ob=Math.log(Ob);Aa+=(Ob-Aa)/fb;Ga+=(ec-Ga)/fb;Ka+=(Ob*ec-Ka)/fb;cb+=(Ob*Ob-cb)/fb});const La=D(Aa,Ga,Ka,cb),Bb=Ob=>La[0]+La[1]*Math.log(Ob);return{coef:La,predict:Bb,rSquared:Ia(Pa,Ha,Ca,Ga,Bb)}};A.regressionPoly=
function(Pa,Ha,Ca,Aa){if(0===Aa)return ea(Pa,Ha,Ca);if(1===Aa)return Ma(Pa,Ha,Ca);if(2===Aa)return Ta(Pa,Ha,Ca);const [Ga,Ka,cb,fb]=R(Pa,Ha,Ca);var La=Ga.length;const Bb=[],Ob=[],ec=Aa+1;let sc,Ic,Xb,Wb;for(sc=0;sc<ec;++sc){for(Xb=Ic=0;Ic<La;++Ic)Xb+=Math.pow(Ga[Ic],sc)*Ka[Ic];Bb.push(Xb);Wb=new Float64Array(ec);for(Aa=0;Aa<ec;++Aa){for(Xb=Ic=0;Ic<La;++Ic)Xb+=Math.pow(Ga[Ic],sc+Aa);Wb[Aa]=Xb}Ob.push(Wb)}Ob.push(Bb);const Kc=db(Ob);La=Kb=>{Kb-=cb;let mc=fb+Kc[0]+Kc[1]*Kb+Kc[2]*Kb*Kb;for(sc=3;sc<ec;++sc)mc+=
Kc[sc]*Math.pow(Kb,sc);return mc};return{coef:ab(ec,Kc,-cb,fb),predict:La,rSquared:Ia(Pa,Ha,Ca,fb,La)}};A.regressionPow=function(Pa,Ha,Ca){let Aa=0,Ga=0,Ka=0,cb=0,fb=0,La=0;la(Pa,Ha,Ca,(ec,sc)=>{ec=Math.log(ec);const Ic=Math.log(sc);++La;Aa+=(ec-Aa)/La;Ga+=(Ic-Ga)/La;Ka+=(ec*Ic-Ka)/La;cb+=(ec*ec-cb)/La;fb+=(sc-fb)/La});const Bb=D(Aa,Ga,Ka,cb),Ob=ec=>Bb[0]*Math.pow(ec,Bb[1]);Bb[0]=Math.exp(Bb[0]);return{coef:Bb,predict:Ob,rSquared:Ia(Pa,Ha,Ca,fb,Ob)}};A.regressionQuad=Ta;A.sampleCurve=function(Pa,
Ha,Ca,Aa){Ca=Ca||25;Aa=Math.max(Ca,Aa||200);var Ga=Ha[0],Ka=Ha[1],cb=Ka-Ga,fb=cb/Aa;Ha=[[Ga,Pa(Ga)]];var La=[];if(Ca===Aa){for(var Bb=1;Bb<Aa;++Bb){fb=Ha;La=fb.push;var Ob=Ga+Bb/Ca*cb;Ob=[Ob,Pa(Ob)];La.call(fb,Ob)}Ha.push([Ka,Pa(Ka)]);return Ha}La.push([Ka,Pa(Ka)]);for(Bb=Ca;0<--Bb;)Aa=La,Ka=Aa.push,Ob=Ga+Bb/Ca*cb,Ob=[Ob,Pa(Ob)],Ka.call(Aa,Ob);Ca=Ha[0];Ga=La[La.length-1];cb=1/cb;Aa=Ka=Ca[1];Bb=La.length;for(Ob=0;Ob<Bb;++Ob){const ec=La[Ob][1];ec<Aa&&(Aa=ec);ec>Ka&&(Ka=ec)}for(Aa=1/(Ka-Aa);Ga;)Ka=
(Ca[0]+Ga[0])/2,Ka=[Ka,Pa(Ka)],Ka[0]-Ca[0]>=fb&&Math.abs(Math.atan2(Aa*(Ga[1]-Ca[1]),cb*(Ga[0]-Ca[0]))-Math.atan2(Aa*(Ka[1]-Ca[1]),cb*(Ka[0]-Ca[0])))>Va?La.push(Ka):(Ca=Ga,Ha.push(Ga),La.pop()),Ga=La[La.length-1];return Ha};A.sampleLogNormal=fa;A.sampleNormal=pa;A.sampleUniform=ha;A.setRandom=function(Pa){A.random=Pa}})};
shadow$provide[428]=function(ob,Ba,Gb,Ea){(function(A,w){"object"===typeof Ea&&"undefined"!==typeof Gb?w(Ea,Ba(421),Ba(426),Ba(427),Ba(423)):"function"===typeof define&&define.amd?define(["exports","vega-util","vega-dataflow","vega-statistics","vega-time"],w):(A="undefined"!==typeof globalThis?globalThis:A||self,w(A.vega={},A.vega,A.vega,A.vega,A.vega))})(this,function(A,w,u,x,I){function B(Jb){return lc=>{const Uc=Jb.length;let Zc=1,rd=String(Jb[0](lc));for(;Zc<Uc;++Zc)rd+="|"+Jb[Zc](lc);return rd}}
function N(Jb){return Jb&&Jb.length?1===Jb.length?Jb[0]:B(Jb):function(){return""}}function da(Jb,lc){return(Uc,Zc)=>w.extend({name:Jb,aggregate_param:Zc,out:Uc||Jb},sd,lc)}function U(Jb,lc){return Jb.idx-lc.idx}function X(Jb){const lc={};Jb.forEach(Zc=>lc[Zc.name]=Zc);const Uc=Zc=>{Zc.req&&Zc.req.forEach(rd=>{lc[rd]||Uc(lc[rd]=Vd[rd]())})};Jb.forEach(Uc);return Object.values(lc).sort(U)}function V(){this.missing=this.valid=0;this._ops.forEach(Jb=>null==Jb.aggregate_param?Jb.init(this):Jb.init(this,
Jb.aggregate_param))}function P(Jb,lc){null==Jb||""===Jb?++this.missing:Jb===Jb&&(++this.valid,this._ops.forEach(Uc=>Uc.add(this,Jb,lc)))}function z(Jb,lc){null==Jb||""===Jb?--this.missing:Jb===Jb&&(--this.valid,this._ops.forEach(Uc=>Uc.rem(this,Jb,lc)))}function G(Jb){this._out.forEach(lc=>Jb[lc.out]=lc.value(this));return Jb}function Y(Jb,lc){function Uc(Nd){this._ops=Zc;this._out=rd;this.cell=Nd;this.init()}lc=lc||w.identity;const Zc=X(Jb),rd=Jb.slice().sort(U);Uc.prototype.init=V;Uc.prototype.add=
P;Uc.prototype.rem=z;Uc.prototype.set=G;Uc.prototype.get=lc;Uc.fields=Jb.map(Nd=>Nd.out);return Uc}function Q(Jb){this._key=Jb?w.field(Jb):u.tupleid;this.reset()}function ja(Jb){u.Transform.call(this,null,Jb);this._adds=[];this._mods=[];this._mlen=this._alen=0;this._drop=!0;this._cross=!1;this._dims=[];this._dnames=[];this._measures=[];this._countOnly=!1;this._outputs=this._inputs=this._prev=this._counts=null}function pa(Jb){u.Transform.call(this,null,Jb)}function J(Jb,lc,Uc){let Zc=lc||[],rd=Uc||
[],Nd={},he=0;return{add:qd=>rd.push(qd),remove:qd=>Nd[Jb(qd)]=++he,size:()=>Zc.length,data:(qd,qe)=>{he&&(Zc=Zc.filter(we=>!Nd[Jb(we)]),Nd={},he=0);qe&&qd&&Zc.sort(qd);rd.length&&(Zc=qd?w.merge(qd,Zc,rd.sort(qd)):Zc.concat(rd),rd=[]);return Zc}}}function K(Jb){u.Transform.call(this,[],Jb)}function ba(Jb){u.Operator.call(this,null,O,Jb)}function O(Jb){return this.value&&!Jb.modified()?this.value:w.compare(Jb.fields,Jb.orders)}function fa(Jb){u.Transform.call(this,null,Jb)}function wa(Jb){u.Transform.call(this,
null,Jb)}function ta(Jb,lc){var Uc=Jb["function"];w.hasOwnProperty(Fe,Uc)||w.error("Unknown distribution function: "+Uc);Uc=Fe[Uc]();for(const Zc in Jb)if("field"===Zc)Uc.data((Jb.from||lc()).map(Jb[Zc]));else if("distributions"===Zc)Uc[Zc](Jb[Zc].map(rd=>ta(rd,lc)));else if("function"===typeof Uc[Zc])Uc[Zc](Jb[Zc]);return Uc}function aa(Jb){u.Transform.call(this,null,Jb)}function ha(Jb){return()=>Jb.materialize(Jb.SOURCE).source}function ka(Jb,lc){return Jb?Jb.map((Uc,Zc)=>lc[Zc]||w.accessorName(Uc)):
null}function H(Jb,lc,Uc){const Zc=[],rd=sf=>sf(qe);let Nd,he,qd,qe,we,Cd;if(null==lc)Zc.push(Jb.map(Uc));else for(Nd={},he=0,qd=Jb.length;he<qd;++he)qe=Jb[he],we=lc.map(rd),Cd=Nd[we],Cd||(Nd[we]=Cd=[],Cd.dims=we,Zc.push(Cd)),Cd.push(Uc(qe));return Zc}function oa(Jb){u.Transform.call(this,null,Jb)}function ea(Jb){u.Operator.call(this,null,D,Jb);this.modified(!0)}function D(Jb){const lc=Jb.expr;return this.value&&!Jb.modified("expr")?this.value:w.accessor(Uc=>lc(Uc,Jb),w.accessorFields(lc),w.accessorName(lc))}
function R(Jb){u.Transform.call(this,[void 0,void 0],Jb)}function la(Jb,lc){u.Operator.call(this,Jb);this.parent=lc;this.count=0}function Ia(Jb){u.Transform.call(this,{},Jb);this._keys=w.fastmap();const lc=this._targets=[];lc.active=0;lc.forEach=Uc=>{for(let Zc=0,rd=lc.active;Zc<rd;++Zc)Uc(lc[Zc],Zc,lc)}}function Ma(Jb){u.Operator.call(this,null,Ta,Jb)}function Ta(Jb){return this.value&&!Jb.modified()?this.value:w.isArray(Jb.name)?w.array(Jb.name).map(lc=>w.field(lc)):w.field(Jb.name,Jb.as)}function ab(Jb){u.Transform.call(this,
w.fastmap(),Jb)}function db(Jb){u.Transform.call(this,[],Jb)}function ub(Jb){u.Transform.call(this,[],Jb)}function pb(Jb){u.Transform.call(this,null,Jb)}function Ya(Jb){u.Transform.call(this,[],Jb)}function Va(Jb,lc){return null==Jb||null==lc?NaN:Jb<lc?-1:Jb>lc?1:Jb>=lc?0:NaN}function Pa(Jb,lc){return null==Jb||null==lc?NaN:lc<Jb?-1:lc>Jb?1:lc>=Jb?0:NaN}function Ha(Jb){function lc(Nd,he,qd=0,qe=Nd.length){if(qd<qe){if(0!==Uc(he,he))return qe;do{const we=qd+qe>>>1;0>Zc(Nd[we],he)?qd=we+1:qe=we}while(qd<
qe)}return qd}let Uc,Zc,rd;2!==Jb.length?(Uc=Va,Zc=(Nd,he)=>Va(Jb(Nd),he),rd=(Nd,he)=>Jb(Nd)-he):(Uc=Jb===Va||Jb===Pa?Jb:Ca,rd=Zc=Jb);return{left:lc,center:function(Nd,he,qd=0,qe=Nd.length){qe=lc(Nd,he,qd,qe-1);return qe>qd&&rd(Nd[qe-1],he)>-rd(Nd[qe],he)?qe-1:qe},right:function(Nd,he,qd=0,qe=Nd.length){if(qd<qe){if(0!==Uc(he,he))return qe;do{const we=qd+qe>>>1;0>=Zc(Nd[we],he)?qd=we+1:qe=we}while(qd<qe)}return qd}}}function Ca(){return 0}function*Aa(Jb,lc){if(void 0===lc)for(var Uc of Jb)null!=Uc&&
(Uc=+Uc)>=Uc&&(yield Uc);else{Uc=-1;for(let Zc of Jb)null!=(Zc=lc(Zc,++Uc,Jb))&&(Zc=+Zc)>=Zc&&(yield Zc)}}function Ga(Jb=Va){if(Jb===Va)return Ka;if("function"!==typeof Jb)throw new TypeError("compare is not a function");return(lc,Uc)=>{const Zc=Jb(lc,Uc);return Zc||0===Zc?Zc:(0===Jb(Uc,Uc))-(0===Jb(lc,lc))}}function Ka(Jb,lc){return(null==Jb||!(Jb>=Jb))-(null==lc||!(lc>=lc))||(Jb<lc?-1:Jb>lc?1:0)}function cb(Jb,lc){let Uc;if(void 0===lc)for(var Zc of Jb)null!=Zc&&(Uc<Zc||void 0===Uc&&Zc>=Zc)&&(Uc=
Zc);else{Zc=-1;for(let rd of Jb)null!=(rd=lc(rd,++Zc,Jb))&&(Uc<rd||void 0===Uc&&rd>=rd)&&(Uc=rd)}return Uc}function fb(Jb,lc){let Uc;if(void 0===lc)for(var Zc of Jb)null!=Zc&&(Uc>Zc||void 0===Uc&&Zc>=Zc)&&(Uc=Zc);else{Zc=-1;for(let rd of Jb)null!=(rd=lc(rd,++Zc,Jb))&&(Uc>rd||void 0===Uc&&rd>=rd)&&(Uc=rd)}return Uc}function La(Jb,lc,Uc=0,Zc=Infinity,rd){lc=Math.floor(lc);Uc=Math.floor(Math.max(0,Uc));Zc=Math.floor(Math.min(Jb.length-1,Zc));if(!(Uc<=lc&&lc<=Zc))return Jb;for(rd=void 0===rd?Ka:Ga(rd);Zc>
Uc;){if(600<Zc-Uc){var Nd=Zc-Uc+1,he=lc-Uc+1,qd=Math.log(Nd),qe=.5*Math.exp(2*qd/3);qd=.5*Math.sqrt(qd*qe*(Nd-qe)/Nd)*(0>he-Nd/2?-1:1);La(Jb,lc,Math.max(Uc,Math.floor(lc-he*qe/Nd+qd)),Math.min(Zc,Math.floor(lc+(Nd-he)*qe/Nd+qd)),rd)}Nd=Jb[lc];he=Uc;qe=Zc;Bb(Jb,Uc,lc);for(0<rd(Jb[Zc],Nd)&&Bb(Jb,Uc,Zc);he<qe;){Bb(Jb,he,qe);++he;for(--qe;0>rd(Jb[he],Nd);)++he;for(;0<rd(Jb[qe],Nd);)--qe}0===rd(Jb[Uc],Nd)?Bb(Jb,Uc,qe):(++qe,Bb(Jb,qe,Zc));qe<=lc&&(Uc=qe+1);lc<=qe&&(Zc=qe-1)}return Jb}function Bb(Jb,lc,
Uc){const Zc=Jb[lc];Jb[lc]=Jb[Uc];Jb[Uc]=Zc}function Ob(Jb,lc,Uc){Jb=+Jb;lc=+lc;Uc=2>(rd=arguments.length)?(lc=Jb,Jb=0,1):3>rd?1:+Uc;for(var Zc=-1,rd=Math.max(0,Math.ceil((lc-Jb)/Uc))|0,Nd=Array(rd);++Zc<rd;)Nd[Zc]=Jb+Zc*Uc;return Nd}function ec(Jb){u.Transform.call(this,[],Jb)}function sc(Jb){var lc=Jb.method||Ye.value;if(null==Ye[lc])w.error("Unrecognized imputation method: "+lc);else{if(lc===Ye.value){var Uc=void 0!==Jb.value?Jb.value:0;return()=>Uc}return Ye[lc]}}function Ic(Jb){const lc=Jb.field;
return Uc=>Uc?lc(Uc):NaN}function Xb(Jb,lc,Uc,Zc){var rd=Lg=>Lg(sf),Nd=[];Zc=Zc?Zc.slice():[];var he={},qd={},qe,we;Zc.forEach((Lg,rg)=>he[Lg]=rg+1);var Cd=0;for(we=Jb.length;Cd<we;++Cd){var sf=Jb[Cd];var Jf=Uc(sf);var tf=he[Jf]||(he[Jf]=Zc.push(Jf));var lf=(Jf=lc?lc.map(rd):bg)+"";(qe=qd[lf])||(qe=qd[lf]=[],Nd.push(qe),qe.values=Jf);qe[tf-1]=sf}Nd.domain=Zc;return Nd}function Wb(Jb){ja.call(this,Jb)}function Kc(Jb){u.Transform.call(this,null,Jb)}function Kb(Jb){u.Operator.call(this,null,mc,Jb)}function mc(Jb){return this.value&&
!Jb.modified()?this.value:w.key(Jb.fields,Jb.flat)}function Ub(Jb){u.Transform.call(this,[],Jb);this._pending=null}function oc(Jb){return Jb.modified("async")&&!(Jb.modified("values")||Jb.modified("url")||Jb.modified("format"))}function Cc(Jb,lc,Uc){Uc.forEach(u.ingest);lc=lc.fork(lc.NO_FIELDS&lc.NO_SOURCE);lc.rem=Jb.value;Jb.value=lc.source=lc.add=Uc;Jb._pending=null;lc.rem.length&&lc.clean(!0);return lc}function Mc(Jb){u.Transform.call(this,{},Jb)}function Pb(Jb){u.Operator.call(this,null,nc,Jb)}
function nc(Jb){if(this.value&&!Jb.modified())return this.value;Jb=Jb.extents;const lc=Jb.length;let Uc=Infinity,Zc=-Infinity,rd,Nd;for(rd=0;rd<lc;++rd)Nd=Jb[rd],Nd[0]<Uc&&(Uc=Nd[0]),Nd[1]>Zc&&(Zc=Nd[1]);return[Uc,Zc]}function rc(Jb){u.Operator.call(this,null,Hb,Jb)}function Hb(Jb){return this.value&&!Jb.modified()?this.value:Jb.values.reduce((lc,Uc)=>lc.concat(Uc),[])}function Jc(Jb){u.Transform.call(this,null,Jb)}function kc(Jb){ja.call(this,Jb)}function Ab(Jb,lc){const Uc=Jb.field,Zc=Jb.value,
rd=("count"===Jb.op?"__count__":Jb.op)||"sum",Nd=w.accessorFields(Uc).concat(w.accessorFields(Zc)),he=yd(Uc,Jb.limit||0,lc);lc.changed()&&Jb.set("__pivot__",null,null,!0);return{key:Jb.key,groupby:Jb.groupby,ops:he.map(()=>rd),fields:he.map(qd=>md(qd,Uc,Zc,Nd)),as:he.map(qd=>qd+""),modified:Jb.modified.bind(Jb)}}function md(Jb,lc,Uc,Zc){return w.accessor(rd=>lc(rd)===Jb?Uc(rd):NaN,Zc,Jb+"")}function yd(Jb,lc,Uc){const Zc={},rd=[];Uc.visit(Uc.SOURCE,Nd=>{Nd=Jb(Nd);Zc[Nd]||(Zc[Nd]=1,rd.push(Nd))});
rd.sort(w.ascending);return lc?rd.slice(0,lc):rd}function hd(Jb){Ia.call(this,Jb)}function Ed(Jb){u.Transform.call(this,null,Jb)}function Qd(Jb){u.Transform.call(this,null,Jb)}function fd(Jb){u.Transform.call(this,null,Jb)}function ed(Jb){u.Transform.call(this,null,Jb)}function bc(Jb){u.Transform.call(this,[],Jb);this.count=0}function yc(Jb){u.Transform.call(this,null,Jb)}function $c(Jb){u.Transform.call(this,null,Jb);this.modified(!0)}function cc(Jb){u.Transform.call(this,null,Jb)}function tb(Jb){u.Transform.call(this,
w.fastmap(),Jb)}function tc(Jb){u.Transform.call(this,null,Jb)}function Ec(Jb,lc,Uc,Zc){const rd=Ff[Jb](lc,Uc);return{init:rd.init||w.zero,update:function(Nd,he){he[Zc]=rd.next(Nd)}}}function cd(Jb){function lc(lf){w.array(w.accessorFields(lf)).forEach(Lg=>we[Lg]=1)}const Uc=w.array(Jb.ops),Zc=w.array(Jb.fields),rd=w.array(Jb.params),Nd=w.array(Jb.aggregate_params),he=w.array(Jb.as),qd=this.outputs=[],qe=this.windows=[],we={},Cd={},sf=[],Jf=[];let tf=!0;lc(Jb.sort);Uc.forEach((lf,Lg)=>{const rg=Zc[Lg];
var Pg=rd[Lg];const fh=Nd[Lg]||null,eh=w.accessorName(rg);Lg=he[Lg]||lf+(eh?"_"+eh:"");lc(rg);qd.push(Lg);w.hasOwnProperty(Ff,lf)?qe.push(Ec(lf,rg,Pg,Lg)):(null==rg&&"count"!==lf&&w.error("Null aggregate field specified."),"count"===lf?sf.push(Lg):(tf=!1,Pg=Cd[eh],Pg||(Pg=Cd[eh]=[],Pg.field=rg,Jf.push(Pg)),Pg.push(Vd[lf](Lg,fh))))});if(sf.length||Jf.length)this.cell=bd(Jf,sf,tf);this.inputs=Object.keys(we)}function bd(Jb,lc,Uc){Jb=Jb.map(qe=>Y(qe,qe.field));const Zc={num:0,agg:null,store:!1,count:lc};
if(!Uc)for(var rd=Jb.length,Nd=Zc.agg=Array(rd),he=0;he<rd;++he)Nd[he]=new Jb[he](Zc);if(Zc.store)var qd=Zc.data=new Q;Zc.add=function(qe){Zc.num+=1;if(!Uc){qd&&qd.add(qe);for(let we=0;we<rd;++we)Nd[we].add(Nd[we].get(qe),qe)}};Zc.rem=function(qe){--Zc.num;if(!Uc){qd&&qd.rem(qe);for(let we=0;we<rd;++we)Nd[we].rem(Nd[we].get(qe),qe)}};Zc.set=function(qe){let we,Cd;qd&&qd.values();we=0;for(Cd=lc.length;we<Cd;++we)qe[lc[we]]=Zc.num;if(!Uc)for(we=0,Cd=Nd.length;we<Cd;++we)Nd[we].set(qe)};Zc.init=function(){Zc.num=
0;qd&&qd.reset();for(let qe=0;qe<rd;++qe)Nd[qe].init()};return Zc}function od(Jb){u.Transform.call(this,{},Jb);this._mlen=0;this._mods=[]}function Dd(Jb,lc,Uc,Zc){var rd=Zc.sort;const Nd=rd&&!Zc.ignorePeers;Zc=Zc.frame||[null,0];Jb=Jb.data(Uc);Uc=Jb.length;const he=Nd?Ha(rd):null;rd={i0:0,i1:0,p0:0,p1:0,index:0,data:Jb,compare:rd||w.constant(-1)};lc.init();for(let sf=0;sf<Uc;++sf){var qd=rd,qe=Zc,we=sf,Cd=Uc;qd.p0=qd.i0;qd.p1=qd.i1;qd.i0=null==qe[0]?0:Math.max(0,we-Math.abs(qe[0]));qd.i1=null==qe[1]?
Cd:Math.min(Cd,we+Math.abs(qe[1])+1);qd.index=we;if(Nd){qd=rd;qe=he;we=qd.i0;Cd=qd.i1-1;const Jf=qd.compare,tf=qd.data,lf=tf.length-1;0<we&&!Jf(tf[we],tf[we-1])&&(qd.i0=qe.left(tf,tf[we]));Cd<lf&&!Jf(tf[Cd],tf[Cd+1])&&(qd.i1=qe.right(tf,tf[Cd]))}lc.update(rd,Jb[sf])}}const xd=()=>{},sd={init:xd,add:xd,rem:xd,idx:0},Vd={values:{init:Jb=>Jb.cell.store=!0,value:Jb=>Jb.cell.data.values(),idx:-1},count:{value:Jb=>Jb.cell.num},__count__:{value:Jb=>Jb.missing+Jb.valid},missing:{value:Jb=>Jb.missing},valid:{value:Jb=>
Jb.valid},sum:{init:Jb=>Jb.sum=0,value:Jb=>Jb.valid?Jb.sum:void 0,add:(Jb,lc)=>Jb.sum+=+lc,rem:(Jb,lc)=>Jb.sum-=lc},product:{init:Jb=>Jb.product=1,value:Jb=>Jb.valid?Jb.product:void 0,add:(Jb,lc)=>Jb.product*=lc,rem:(Jb,lc)=>Jb.product/=lc},mean:{init:Jb=>Jb.mean=0,value:Jb=>Jb.valid?Jb.mean:void 0,add:(Jb,lc)=>(Jb.mean_d=lc-Jb.mean,Jb.mean+=Jb.mean_d/Jb.valid),rem:(Jb,lc)=>(Jb.mean_d=lc-Jb.mean,Jb.mean-=Jb.valid?Jb.mean_d/Jb.valid:Jb.mean)},average:{value:Jb=>Jb.valid?Jb.mean:void 0,req:["mean"],
idx:1},variance:{init:Jb=>Jb.dev=0,value:Jb=>1<Jb.valid?Jb.dev/(Jb.valid-1):void 0,add:(Jb,lc)=>Jb.dev+=Jb.mean_d*(lc-Jb.mean),rem:(Jb,lc)=>Jb.dev-=Jb.mean_d*(lc-Jb.mean),req:["mean"],idx:1},variancep:{value:Jb=>1<Jb.valid?Jb.dev/Jb.valid:void 0,req:["variance"],idx:2},stdev:{value:Jb=>1<Jb.valid?Math.sqrt(Jb.dev/(Jb.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:Jb=>1<Jb.valid?Math.sqrt(Jb.dev/Jb.valid):void 0,req:["variance"],idx:2},stderr:{value:Jb=>1<Jb.valid?Math.sqrt(Jb.dev/(Jb.valid*
(Jb.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:Jb=>Jb.cell.data.distinct(Jb.get),req:["values"],idx:3},ci0:{value:Jb=>Jb.cell.data.ci0(Jb.get),req:["values"],idx:3},ci1:{value:Jb=>Jb.cell.data.ci1(Jb.get),req:["values"],idx:3},median:{value:Jb=>Jb.cell.data.q2(Jb.get),req:["values"],idx:3},q1:{value:Jb=>Jb.cell.data.q1(Jb.get),req:["values"],idx:3},q3:{value:Jb=>Jb.cell.data.q3(Jb.get),req:["values"],idx:3},min:{init:Jb=>Jb.min=void 0,value:Jb=>Jb.min=Number.isNaN(Jb.min)?Jb.cell.data.min(Jb.get):
Jb.min,add:(Jb,lc)=>{if(lc<Jb.min||void 0===Jb.min)Jb.min=lc},rem:(Jb,lc)=>{lc<=Jb.min&&(Jb.min=NaN)},req:["values"],idx:4},max:{init:Jb=>Jb.max=void 0,value:Jb=>Jb.max=Number.isNaN(Jb.max)?Jb.cell.data.max(Jb.get):Jb.max,add:(Jb,lc)=>{if(lc>Jb.max||void 0===Jb.max)Jb.max=lc},rem:(Jb,lc)=>{lc>=Jb.max&&(Jb.max=NaN)},req:["values"],idx:4},argmin:{init:Jb=>Jb.argmin=void 0,value:Jb=>Jb.argmin||Jb.cell.data.argmin(Jb.get),add:(Jb,lc,Uc)=>{lc<Jb.min&&(Jb.argmin=Uc)},rem:(Jb,lc)=>{lc<=Jb.min&&(Jb.argmin=
void 0)},req:["min","values"],idx:3},argmax:{init:Jb=>Jb.argmax=void 0,value:Jb=>Jb.argmax||Jb.cell.data.argmax(Jb.get),add:(Jb,lc,Uc)=>{lc>Jb.max&&(Jb.argmax=Uc)},rem:(Jb,lc)=>{lc>=Jb.max&&(Jb.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(Jb,lc)=>{Jb.exp=0;Jb.exp_r=lc},value:Jb=>Jb.valid?Jb.exp*(1-Jb.exp_r)/(1-Jb.exp_r**Jb.valid):void 0,add:(Jb,lc)=>Jb.exp=Jb.exp_r*Jb.exp+lc,rem:(Jb,lc)=>Jb.exp=(Jb.exp-lc/Jb.exp_r**(Jb.valid-1))/Jb.exp_r},exponentialb:{value:Jb=>Jb.valid?Jb.exp*
(1-Jb.exp_r):void 0,req:["exponential"],idx:1}},re=Object.keys(Vd).filter(Jb=>"__count__"!==Jb);[...re,"__count__"].forEach(Jb=>{Vd[Jb]=da(Jb,Vd[Jb])});const Wd=Q.prototype;Wd.reset=function(){this._add=[];this._rem=[];this._q=this._get=this._ext=null};Wd.add=function(Jb){this._add.push(Jb)};Wd.rem=function(Jb){this._rem.push(Jb)};Wd.values=function(){this._get=null;if(0===this._rem.length)return this._add;const Jb=this._add;var lc=this._rem;const Uc=this._key,Zc=Jb.length,rd=lc.length,Nd=Array(Zc-
rd),he={};let qd,qe;for(qd=0;qd<rd;++qd)he[Uc(lc[qd])]=1;for(lc=qd=0;qd<Zc;++qd)he[Uc(qe=Jb[qd])]?he[Uc(qe)]=0:Nd[lc++]=qe;this._rem=[];return this._add=Nd};Wd.distinct=function(Jb){const lc=this.values(),Uc={};let Zc=lc.length,rd=0,Nd;for(;0<=--Zc;)Nd=Jb(lc[Zc])+"",w.hasOwnProperty(Uc,Nd)||(Uc[Nd]=1,++rd);return rd};Wd.extent=function(Jb){if(this._get!==Jb||!this._ext){const lc=this.values(),Uc=w.extentIndex(lc,Jb);this._ext=[lc[Uc[0]],lc[Uc[1]]];this._get=Jb}return this._ext};Wd.argmin=function(Jb){return this.extent(Jb)[0]||
{}};Wd.argmax=function(Jb){return this.extent(Jb)[1]||{}};Wd.min=function(Jb){const lc=this.extent(Jb)[0];return null!=lc?Jb(lc):void 0};Wd.max=function(Jb){const lc=this.extent(Jb)[1];return null!=lc?Jb(lc):void 0};Wd.quartile=function(Jb){this._get===Jb&&this._q||(this._q=x.quartiles(this.values(),Jb),this._get=Jb);return this._q};Wd.q1=function(Jb){return this.quartile(Jb)[0]};Wd.q2=function(Jb){return this.quartile(Jb)[1]};Wd.q3=function(Jb){return this.quartile(Jb)[2]};Wd.ci=function(Jb){this._get===
Jb&&this._ci||(this._ci=x.bootstrapCI(this.values(),1E3,.05,Jb),this._get=Jb);return this._ci};Wd.ci0=function(Jb){return this.ci(Jb)[0]};Wd.ci1=function(Jb){return this.ci(Jb)[1]};ja.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:re},{name:"aggregate_params",type:"number","null":!0,array:!0},{name:"fields",type:"field","null":!0,array:!0},{name:"as",type:"string","null":!0,array:!0},{name:"drop",
type:"boolean","default":!0},{name:"cross",type:"boolean","default":!1},{name:"key",type:"field"}]};w.inherits(ja,u.Transform,{transform(Jb,lc){const Uc=this,Zc=lc.fork(lc.NO_SOURCE|lc.NO_FIELDS),rd=Jb.modified();Uc.stamp=Zc.stamp;Uc.value&&(rd||lc.modified(Uc._inputs,!0))?(Uc._prev=Uc.value,Uc.value=rd?Uc.init(Jb):Object.create(null),lc.visit(lc.SOURCE,Nd=>Uc.add(Nd))):(Uc.value=Uc.value||Uc.init(Jb),lc.visit(lc.REM,Nd=>Uc.rem(Nd)),lc.visit(lc.ADD,Nd=>Uc.add(Nd)));Zc.modifies(Uc._outputs);Uc._drop=
!1!==Jb.drop;Jb.cross&&1<Uc._dims.length&&(Uc._drop=!1,Uc.cross());lc.clean()&&Uc._drop&&Zc.clean(!0).runAfter(()=>this.clean());return Uc.changes(Zc)},cross(){function Jb(qd){let qe,we,Cd,sf;for(qe in qd)for(Cd=qd[qe].tuple,we=0;we<he;++we)Nd[we][sf=Cd[rd[we]]]=sf}function lc(qd,qe,we){const Cd=rd[we],sf=Nd[we++];for(const Jf in sf){const tf=qd?qd+"|"+Jf:Jf;qe[Cd]=sf[Jf];we<he?lc(tf,qe,we):Zc[tf]||Uc.cell(tf,qe)}}const Uc=this,Zc=Uc.value,rd=Uc._dnames,Nd=rd.map(()=>({})),he=rd.length;Jb(Uc._prev);
Jb(Zc);lc("",{},0)},init(Jb){function lc(Pg){Pg=w.array(w.accessorFields(Pg));const fh=Pg.length;let eh=0,Zg;for(;eh<fh;++eh)rd[Zg=Pg[eh]]||(rd[Zg]=1,Uc.push(Zg))}const Uc=this._inputs=[],Zc=this._outputs=[],rd={};this._dims=w.array(Jb.groupby);this._dnames=this._dims.map(Pg=>{const fh=w.accessorName(Pg);lc(Pg);Zc.push(fh);return fh});this.cellkey=Jb.key?Jb.key:N(this._dims);this._countOnly=!0;this._counts=[];this._measures=[];const Nd=Jb.fields||[null],he=Jb.ops||["count"],qd=Jb.aggregate_params||
[null];Jb=Jb.as||[];const qe=Nd.length,we={};let Cd,sf,Jf,tf,lf,Lg,rg;qe!==he.length&&w.error("Unmatched number of fields and aggregate ops.");for(rg=0;rg<qe;++rg)Cd=Nd[rg],sf=he[rg],Jf=qd[rg]||null,null==Cd&&"count"!==sf&&w.error("Null aggregate field specified."),lf=w.accessorName(Cd),Lg=Jb[rg]||sf+(lf?"_"+lf:""),Zc.push(Lg),"count"===sf?this._counts.push(Lg):(tf=we[lf],tf||(lc(Cd),tf=we[lf]=[],tf.field=Cd,this._measures.push(tf)),"count"!==sf&&(this._countOnly=!1),tf.push(Vd[sf](Lg,Jf)));this._measures=
this._measures.map(Pg=>Y(Pg,Pg.field));return Object.create(null)},cellkey:N(),cell(Jb,lc){let Uc=this.value[Jb];Uc?0===Uc.num&&this._drop&&Uc.stamp<this.stamp?(Uc.stamp=this.stamp,this._adds[this._alen++]=Uc):Uc.stamp<this.stamp&&(Uc.stamp=this.stamp,this._mods[this._mlen++]=Uc):(Uc=this.value[Jb]=this.newcell(Jb,lc),this._adds[this._alen++]=Uc);return Uc},newcell(Jb,lc){Jb={key:Jb,num:0,agg:null,tuple:this.newtuple(lc,this._prev&&this._prev[Jb]),stamp:this.stamp,store:!1};if(!this._countOnly){lc=
this._measures;const Uc=lc.length;Jb.agg=Array(Uc);for(let Zc=0;Zc<Uc;++Zc)Jb.agg[Zc]=new lc[Zc](Jb)}Jb.store&&(Jb.data=new Q);return Jb},newtuple(Jb,lc){const Uc=this._dnames,Zc=this._dims,rd=Zc.length,Nd={};for(let he=0;he<rd;++he)Nd[Uc[he]]=Zc[he](Jb);return lc?u.replace(lc.tuple,Nd):u.ingest(Nd)},clean(){const Jb=this.value;for(const lc in Jb)0===Jb[lc].num&&delete Jb[lc]},add(Jb){var lc=this.cellkey(Jb);lc=this.cell(lc,Jb);lc.num+=1;if(!this._countOnly){lc.store&&lc.data.add(Jb);lc=lc.agg;for(let Uc=
0,Zc=lc.length;Uc<Zc;++Uc)lc[Uc].add(lc[Uc].get(Jb),Jb)}},rem(Jb){var lc=this.cellkey(Jb);lc=this.cell(lc,Jb);--lc.num;if(!this._countOnly){lc.store&&lc.data.rem(Jb);lc=lc.agg;for(let Uc=0,Zc=lc.length;Uc<Zc;++Uc)lc[Uc].rem(lc[Uc].get(Jb),Jb)}},celltuple(Jb){const lc=Jb.tuple,Uc=this._counts;Jb.store&&Jb.data.values();for(let Zc=0,rd=Uc.length;Zc<rd;++Zc)lc[Uc[Zc]]=Jb.num;if(!this._countOnly){Jb=Jb.agg;for(let Zc=0,rd=Jb.length;Zc<rd;++Zc)Jb[Zc].set(lc)}return lc},changes(Jb){const lc=this._adds,
Uc=this._mods;var Zc=this._prev;const rd=this._drop,Nd=Jb.add,he=Jb.rem,qd=Jb.mod;let qe;var we;if(Zc)for(we in Zc)qe=Zc[we],rd&&!qe.num||he.push(qe.tuple);Zc=0;for(we=this._alen;Zc<we;++Zc)Nd.push(this.celltuple(lc[Zc])),lc[Zc]=null;Zc=0;for(we=this._mlen;Zc<we;++Zc)qe=Uc[Zc],(0===qe.num&&rd?he:qd).push(this.celltuple(qe)),Uc[Zc]=null;this._alen=this._mlen=0;this._prev=null;return Jb}});pa.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",
type:"boolean","default":!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number","default":20},{name:"base",type:"number","default":10},{name:"divide",type:"number",array:!0,"default":[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number","default":0},{name:"nice",type:"boolean","default":!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,
"default":["bin0","bin1"]}]};w.inherits(pa,u.Transform,{transform(Jb,lc){const Uc=!1!==Jb.interval,Zc=this._bins(Jb),rd=Zc.start,Nd=Zc.step,he=Jb.as||["bin0","bin1"],qd=he[0],qe=he[1];Jb.modified()?(lc=lc.reflow(!0),Jb=lc.SOURCE):Jb=lc.modified(w.accessorFields(Jb.field))?lc.ADD_MOD:lc.ADD;lc.visit(Jb,Uc?we=>{const Cd=Zc(we);we[qd]=Cd;we[qe]=null==Cd?null:rd+Nd*(1+(Cd-rd)/Nd)}:we=>we[qd]=Zc(we));return lc.modifies(Uc?he:qd)},_bins(Jb){if(this.value&&!Jb.modified())return this.value;const lc=Jb.field,
Uc=x.bin(Jb),Zc=Uc.step;let rd=Uc.start,Nd=rd+Math.ceil((Uc.stop-rd)/Zc)*Zc;var he;null!=(he=Jb.anchor)&&(he-=rd+Zc*Math.floor((he-rd)/Zc),rd+=he,Nd+=he);he=function(qd){qd=w.toNumber(lc(qd));return null==qd?null:qd<rd?-Infinity:qd>Nd?Infinity:(qd=Math.max(rd,Math.min(qd,Nd-Zc)),rd+Zc*Math.floor(1E-14+(qd-rd)/Zc))};he.start=rd;he.stop=Uc.stop;he.step=Zc;return this.value=w.accessor(he,w.accessorFields(lc),Jb.name||"bin_"+w.accessorName(lc))}});K.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",
type:"compare"}]};w.inherits(K,u.Transform,{transform(Jb,lc){const Uc=lc.fork(lc.ALL),Zc=J(u.tupleid,this.value,Uc.materialize(Uc.ADD).add),rd=Jb.sort;Jb=lc.changed()||rd&&(Jb.modified("sort")||lc.modified(rd.fields));Uc.visit(Uc.REM,Zc.remove);this.modified(Jb);this.value=Uc.source=Zc.data(u.stableCompare(rd),Jb);lc.source&&lc.source.root&&(this.value.root=lc.source.root);return Uc}});w.inherits(ba,u.Operator);fa.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",
type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],"default":"mixed"},{name:"pattern",type:"string","default":'[\\w"]+'},{name:"stopwords",type:"string","default":""},{name:"as",type:"string",array:!0,length:2,"default":["text","count"]}]};w.inherits(fa,u.Transform,{transform(Jb,lc){var Uc=Cd=>sf=>{sf=qd(sf);var Jf=Nd;switch(Jb.case){case "upper":sf=sf.toUpperCase();break;case "lower":sf=sf.toLowerCase()}sf=sf.match(Jf)||[];var tf;Jf=0;for(var lf=sf.length;Jf<lf;++Jf)he.test(tf=
sf[Jf])||Cd(tf)};const Zc=this._parameterCheck(Jb,lc),rd=this._counts,Nd=this._match,he=this._stop,qd=Jb.field,qe=Jb.as||["text","count"],we=Uc(Cd=>rd[Cd]=1+(rd[Cd]||0));Uc=Uc(Cd=>--rd[Cd]);Zc?lc.visit(lc.SOURCE,we):(lc.visit(lc.ADD,we),lc.visit(lc.REM,Uc));return this._finish(lc,qe)},_parameterCheck(Jb,lc){let Uc=!1;if(Jb.modified("stopwords")||!this._stop)this._stop=new RegExp("^"+(Jb.stopwords||"")+"$","i"),Uc=!0;if(Jb.modified("pattern")||!this._match)this._match=new RegExp(Jb.pattern||"[\\w']+",
"g"),Uc=!0;if(Jb.modified("field")||lc.modified(Jb.field.fields))Uc=!0;Uc&&(this._counts={});return Uc},_finish(Jb,lc){const Uc=this._counts,Zc=this._tuples||(this._tuples={}),rd=lc[0],Nd=lc[1];Jb=Jb.fork(Jb.NO_SOURCE|Jb.NO_FIELDS);let he,qd,qe;for(he in Uc)qd=Zc[he],qe=Uc[he]||0,!qd&&qe?(Zc[he]=qd=u.ingest({}),qd[rd]=he,qd[Nd]=qe,Jb.add.push(qd)):0===qe?(qd&&Jb.rem.push(qd),Uc[he]=null,Zc[he]=null):qd[Nd]!==qe&&(qd[Nd]=qe,Jb.mod.push(qd));return Jb.modifies(lc)}});wa.Definition={type:"Cross",metadata:{generates:!0},
params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,"default":["a","b"]}]};w.inherits(wa,u.Transform,{transform(Jb,lc){const Uc=lc.fork(lc.NO_SOURCE),Zc=Jb.as||["a","b"],rd=Zc[0],Nd=Zc[1];var he=!this.value||lc.changed(lc.ADD_REM)||Jb.modified("as")||Jb.modified("filter"),qd=this.value;if(he){qd&&(Uc.rem=qd);lc=qd=lc.materialize(lc.SOURCE).source;Jb=Jb.filter||w.truthy;he=[];qd={};for(var qe=lc.length,we=0,Cd,sf;we<qe;++we)for(qd[rd]=sf=lc[we],Cd=0;Cd<qe;++Cd)qd[Nd]=lc[Cd],
Jb(qd)&&(he.push(u.ingest(qd)),qd={},qd[rd]=sf);Uc.add=this.value=he}else Uc.mod=qd;Uc.source=this.value;return Uc.modifies(Zc)}});const Fe={kde:x.randomKDE,mixture:x.randomMixture,normal:x.randomNormal,lognormal:x.randomLogNormal,uniform:x.randomUniform},Bf=[{key:{"function":"normal"},params:[{name:"mean",type:"number","default":0},{name:"stdev",type:"number","default":1}]},{key:{"function":"lognormal"},params:[{name:"mean",type:"number","default":0},{name:"stdev",type:"number","default":1}]},{key:{"function":"uniform"},
params:[{name:"min",type:"number","default":0},{name:"max",type:"number","default":1}]},{key:{"function":"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number","default":0}]}];aa.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number","default":25},{name:"maxsteps",type:"number","default":200},{name:"method",type:"string","default":"pdf",
values:["pdf","cdf"]},{name:"distribution",type:"param",params:Bf.concat({key:{"function":"mixture"},params:[{name:"distributions",type:"param",array:!0,params:Bf},{name:"weights",type:"number",array:!0}]})},{name:"as",type:"string",array:!0,"default":["value","density"]}]};w.inherits(aa,u.Transform,{transform(Jb,lc){const Uc=lc.fork(lc.NO_SOURCE|lc.NO_FIELDS);if(!this.value||lc.changed()||Jb.modified()){const Zc=ta(Jb.distribution,ha(lc));lc=Jb.steps||Jb.minsteps||25;const rd=Jb.steps||Jb.maxsteps||
200;let Nd=Jb.method||"pdf";"pdf"!==Nd&&"cdf"!==Nd&&w.error("Invalid density method: "+Nd);Jb.extent||Zc.data||w.error("Missing density extent parameter.");Nd=Zc[Nd];const he=Jb.as||["value","density"];Jb=Jb.extent||w.extent(Zc.data());Jb=x.sampleCurve(Nd,Jb,lc,rd).map(qd=>{const qe={};qe[he[0]]=qd[0];qe[he[1]]=qd[1];return u.ingest(qe)});this.value&&(Uc.rem=this.value);this.value=Uc.add=Uc.source=Jb}return Uc}});oa.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",
required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean","default":!1},{name:"as",type:"string","default":"bin"}]};w.inherits(oa,u.Transform,{transform(Jb,lc){if(this.value&&!Jb.modified()&&!lc.changed())return lc;var Uc=lc.materialize(lc.SOURCE).source;const Zc=H(lc.source,Jb.groupby,w.identity),rd=Jb.smooth||!1,Nd=Jb.field;Uc=Jb.step||w.span(w.extent(Uc,Nd))/30;const he=u.stableCompare((Jf,tf)=>Nd(Jf)-Nd(tf));Jb=Jb.as||"bin";const qd=Zc.length;
let qe=Infinity,we=-Infinity,Cd=0,sf;for(;Cd<qd;++Cd){const Jf=Zc[Cd].sort(he);sf=-1;for(const tf of x.dotbin(Jf,Uc,rd,Nd))tf<qe&&(qe=tf),tf>we&&(we=tf),Jf[++sf][Jb]=tf}this.value={start:qe,stop:we,step:Uc};return lc.reflow(!0).modifies(Jb)}});w.inherits(ea,u.Operator);R.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};w.inherits(R,u.Transform,{transform(Jb,lc){var Uc=this.value;const Zc=Jb.field;Jb=lc.changed()||lc.modified(Zc.fields)||Jb.modified("field");
let rd=Uc[0],Nd=Uc[1];if(Jb||null==rd)rd=Infinity,Nd=-Infinity;lc.visit(Jb?lc.SOURCE:lc.ADD,he=>{he=w.toNumber(Zc(he));null!=he&&(he<rd&&(rd=he),he>Nd&&(Nd=he))});Number.isFinite(rd)&&Number.isFinite(Nd)||((Uc=w.accessorName(Zc))&&(Uc=` for field "${Uc}"`),lc.dataflow.warn(`Infinite extent${Uc}: [${rd}, ${Nd}]`),rd=Nd=void 0);this.value=[rd,Nd]}});w.inherits(la,u.Operator,{connect(Jb){this.detachSubflow=Jb.detachSubflow;this.targets().add(Jb);return Jb.source=this},add(Jb){this.count+=1;this.value.add.push(Jb)},
rem(Jb){--this.count;this.value.rem.push(Jb)},mod(Jb){this.value.mod.push(Jb)},init(Jb){this.value.init(Jb,Jb.NO_SOURCE)},evaluate(){return this.value}});w.inherits(Ia,u.Transform,{activate(Jb){this._targets[this._targets.active++]=Jb},subflow(Jb,lc,Uc,Zc){const rd=this.value;let Nd=w.hasOwnProperty(rd,Jb)&&rd[Jb],he;Nd?Nd.value.stamp<Uc.stamp&&(Nd.init(Uc),this.activate(Nd)):(he=Zc||(he=this._group[Jb])&&he.tuple,Zc=Uc.dataflow,Nd=new la(Uc.fork(Uc.NO_SOURCE),this),Zc.add(Nd).connect(lc(Zc,Jb,he)),
rd[Jb]=Nd,this.activate(Nd));return Nd},clean(){var Jb=this.value;let lc=0;for(const Uc in Jb)if(0===Jb[Uc].count){const Zc=Jb[Uc].detachSubflow;Zc&&Zc();delete Jb[Uc];++lc}lc&&(Jb=this._targets.filter(Uc=>Uc&&0<Uc.count),this.initTargets(Jb))},initTargets(Jb){const lc=this._targets,Uc=lc.length,Zc=Jb?Jb.length:0;let rd=0;for(;rd<Zc;++rd)lc[rd]=Jb[rd];for(;rd<Uc&&null!=lc[rd];++rd)lc[rd]=null;lc.active=Zc},transform(Jb,lc){const Uc=lc.dataflow,Zc=Jb.key,rd=Jb.subflow,Nd=this._keys,he=Jb.modified("key"),
qd=qe=>this.subflow(qe,rd,lc);this._group=Jb.group||{};this.initTargets();lc.visit(lc.REM,qe=>{const we=u.tupleid(qe),Cd=Nd.get(we);void 0!==Cd&&(Nd.delete(we),qd(Cd).rem(qe))});lc.visit(lc.ADD,qe=>{const we=Zc(qe);Nd.set(u.tupleid(qe),we);qd(we).add(qe)});he||lc.modified(Zc.fields)?lc.visit(lc.MOD,qe=>{const we=u.tupleid(qe),Cd=Nd.get(we),sf=Zc(qe);Cd===sf?qd(sf).mod(qe):(Nd.set(we,sf),qd(Cd).rem(qe),qd(sf).add(qe))}):lc.changed(lc.MOD)&&lc.visit(lc.MOD,qe=>{qd(Nd.get(u.tupleid(qe))).mod(qe)});he&&
lc.visit(lc.REFLOW,qe=>{const we=u.tupleid(qe),Cd=Nd.get(we),sf=Zc(qe);Cd!==sf&&(Nd.set(we,sf),qd(Cd).rem(qe),qd(sf).add(qe))});lc.clean()?Uc.runAfter(()=>{this.clean();Nd.clean()}):Nd.empty>Uc.cleanThreshold&&Uc.runAfter(Nd.clean);return lc}});w.inherits(Ma,u.Operator);ab.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};w.inherits(ab,u.Transform,{transform(Jb,lc){function Uc(sf){const Jf=u.tupleid(sf),tf=we(sf,Jb),lf=rd.get(Jf);tf&&lf?(rd.delete(Jf),
he.push(sf)):tf||lf?Cd&&tf&&!lf&&qe.push(sf):(rd.set(Jf,1),qd.push(sf))}const Zc=lc.dataflow,rd=this.value,Nd=lc.fork(),he=Nd.add,qd=Nd.rem,qe=Nd.mod,we=Jb.expr;let Cd=!0;lc.visit(lc.REM,sf=>{const Jf=u.tupleid(sf);rd.has(Jf)?rd.delete(Jf):qd.push(sf)});lc.visit(lc.ADD,sf=>{we(sf,Jb)?he.push(sf):rd.set(u.tupleid(sf),1)});lc.visit(lc.MOD,Uc);Jb.modified()&&(Cd=!1,lc.visit(lc.REFLOW,Uc));rd.empty>Zc.cleanThreshold&&Zc.runAfter(rd.clean);return Nd}});db.Definition={type:"Flatten",metadata:{generates:!0},
params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};w.inherits(db,u.Transform,{transform(Jb,lc){const Uc=lc.fork(lc.NO_SOURCE),Zc=Jb.fields,rd=ka(Zc,Jb.as||[]),Nd=Jb.index||null,he=rd.length;Uc.rem=this.value;lc.visit(lc.SOURCE,qd=>{const qe=Zc.map(lf=>lf(qd)),we=qe.reduce((lf,Lg)=>Math.max(lf,Lg.length),0);let Cd=0,sf,Jf,tf;for(;Cd<we;++Cd){Jf=u.derive(qd);for(sf=0;sf<he;++sf)Jf[rd[sf]]=null==(tf=qe[sf][Cd])?null:tf;Nd&&(Jf[Nd]=
Cd);Uc.add.push(Jf)}});this.value=Uc.source=Uc.add;Nd&&Uc.modifies(Nd);return Uc.modifies(rd)}});ub.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,"default":["key","value"]}]};w.inherits(ub,u.Transform,{transform(Jb,lc){const Uc=lc.fork(lc.NO_SOURCE),Zc=Jb.fields,rd=Zc.map(w.accessorName);Jb=Jb.as||["key","value"];const Nd=Jb[0],he=Jb[1],qd=Zc.length;Uc.rem=this.value;lc.visit(lc.SOURCE,qe=>{for(let we=
0,Cd;we<qd;++we)Cd=u.derive(qe),Cd[Nd]=rd[we],Cd[he]=Zc[we](qe),Uc.add.push(Cd)});this.value=Uc.source=Uc.add;return Uc.modifies(Jb)}});pb.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};w.inherits(pb,u.Transform,{transform(Jb,lc){const Uc=Jb.expr,Zc=Jb.as,rd=Jb.modified(),Nd=Jb.initonly?lc.ADD:rd?lc.SOURCE:lc.modified(Uc.fields)||lc.modified(Zc)?lc.ADD_MOD:lc.ADD;rd&&(lc=lc.materialize().reflow(!0));
Jb.initonly||lc.modifies(Zc);return lc.visit(Nd,he=>he[Zc]=Uc(he,Jb))}});w.inherits(Ya,u.Transform,{transform(Jb,lc){lc=lc.fork(lc.ALL);const Uc=Jb.generator;let Zc=this.value,rd=Jb.size-Zc.length,Nd,he;if(0<rd){for(Nd=[];0<=--rd;)Nd.push(he=u.ingest(Uc(Jb))),Zc.push(he);lc.add=lc.add.length?lc.materialize(lc.ADD).add.concat(Nd):Nd}else Jb=Zc.slice(0,-rd),lc.rem=lc.rem.length?lc.materialize(lc.REM).rem.concat(Jb):Jb,Zc=Zc.slice(-rd);lc.source=this.value=Zc;return lc}});const Ye={value:"value",median:function(Jb,
lc){var Uc=.5;Jb=Float64Array.from(Aa(Jb,lc));if((lc=Jb.length)&&!isNaN(Uc=+Uc))if(0>=Uc||2>lc)Jb=fb(Jb);else if(1<=Uc)Jb=cb(Jb);else{Uc*=lc-1;lc=Math.floor(Uc);var Zc=cb(La(Jb,lc).subarray(0,lc+1));Jb=fb(Jb.subarray(lc+1));Jb=Zc+(Jb-Zc)*(Uc-lc)}else Jb=void 0;return Jb},mean:function(Jb,lc){let Uc=0,Zc=0;if(void 0===lc)for(var rd of Jb)null!=rd&&(rd=+rd)>=rd&&(++Uc,Zc+=rd);else{rd=-1;for(let Nd of Jb)null!=(Nd=lc(Nd,++rd,Jb))&&(Nd=+Nd)>=Nd&&(++Uc,Zc+=Nd)}if(Uc)return Zc/Uc},min:fb,max:cb},bg=[];
ec.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum","default":"value",values:["value","mean","median","max","min"]},{name:"value","default":0}]};w.inherits(ec,u.Transform,{transform(Jb,lc){var Uc=lc.fork(lc.ALL),Zc=sc(Jb),rd=Ic(Jb),Nd=w.accessorName(Jb.field),he=w.accessorName(Jb.key),qd=(Jb.groupby||[]).map(w.accessorName);
Jb=Xb(lc.source,Jb.groupby,Jb.key,Jb.keyvals);lc=[];var qe=this.value,we=Jb.domain.length,Cd,sf,Jf;var tf=0;for(sf=Jb.length;tf<sf;++tf){var lf=Jb[tf];var Lg=lf.values;var rg=NaN;for(Cd=0;Cd<we;++Cd)if(null==lf[Cd]){var Pg=Jb.domain[Cd];var fh={_impute:!0};var eh=0;for(Jf=Lg.length;eh<Jf;++eh)fh[qd[eh]]=Lg[eh];fh[he]=Pg;fh[Nd]=Number.isNaN(rg)?rg=Zc(lf,rd):rg;lc.push(u.ingest(fh))}}lc.length&&(Uc.add=Uc.materialize(Uc.ADD).add.concat(lc));qe.length&&(Uc.rem=Uc.materialize(Uc.REM).rem.concat(qe));
this.value=lc;return Uc}});Wb.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field","null":!0,array:!0},{name:"ops",type:"enum",array:!0,values:re},{name:"as",type:"string","null":!0,array:!0},{name:"key",type:"field"}]};w.inherits(Wb,ja,{transform(Jb,lc){const Uc=this,Zc=Jb.modified();let rd;Uc.value&&(Zc||lc.modified(Uc._inputs,!0))?(rd=Uc.value=Zc?Uc.init(Jb):{},lc.visit(lc.SOURCE,Nd=>Uc.add(Nd))):(rd=Uc.value=Uc.value||
this.init(Jb),lc.visit(lc.REM,Nd=>Uc.rem(Nd)),lc.visit(lc.ADD,Nd=>Uc.add(Nd)));Uc.changes();lc.visit(lc.SOURCE,Nd=>{w.extend(Nd,rd[Uc.cellkey(Nd)].tuple)});return lc.reflow(Zc).modifies(this._outputs)},changes(){const Jb=this._adds,lc=this._mods;let Uc,Zc;Uc=0;for(Zc=this._alen;Uc<Zc;++Uc)this.celltuple(Jb[Uc]),Jb[Uc]=null;Uc=0;for(Zc=this._mlen;Uc<Zc;++Uc)this.celltuple(lc[Uc]),lc[Uc]=null;this._alen=this._mlen=0}});Kc.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",
array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean","default":!1},{name:"counts",type:"boolean","default":!1},{name:"bandwidth",type:"number","default":0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],"default":"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number","default":25},{name:"maxsteps",type:"number","default":200},{name:"as",type:"string",array:!0,"default":["value","density"]}]};
w.inherits(Kc,u.Transform,{transform(Jb,lc){const Uc=lc.fork(lc.NO_SOURCE|lc.NO_FIELDS);if(!this.value||lc.changed()||Jb.modified()){lc=lc.materialize(lc.SOURCE).source;const Zc=H(lc,Jb.groupby,Jb.field),rd=(Jb.groupby||[]).map(w.accessorName),Nd=Jb.bandwidth,he=Jb.cumulative?"cdf":"pdf",qd=Jb.as||["value","density"],qe=[];let we=Jb.extent,Cd=Jb.steps||Jb.minsteps||25,sf=Jb.steps||Jb.maxsteps||200;"pdf"!==he&&"cdf"!==he&&w.error("Invalid density method: "+he);"shared"===Jb.resolve&&(we||(we=w.extent(lc,
Jb.field)),Cd=sf=Jb.steps||sf);Zc.forEach(Jf=>{const tf=x.randomKDE(Jf,Nd)[he],lf=Jb.counts?Jf.length:1,Lg=we||w.extent(Jf);x.sampleCurve(tf,Lg,Cd,sf).forEach(rg=>{const Pg={};for(let fh=0;fh<rd.length;++fh)Pg[rd[fh]]=Jf.dims[fh];Pg[qd[0]]=rg[0];Pg[qd[1]]=rg[1]*lf;qe.push(u.ingest(Pg))})});this.value&&(Uc.rem=this.value);this.value=Uc.add=Uc.source=qe}return Uc}});w.inherits(Kb,u.Operator);w.inherits(Ub,u.Transform,{transform(Jb,lc){const Uc=lc.dataflow;return this._pending?Cc(this,lc,this._pending):
oc(Jb)?lc.StopPropagation:Jb.values?Cc(this,lc,Uc.parse(Jb.values,Jb.format)):Jb.async?{async:Uc.request(Jb.url,Jb.format).then(Zc=>{this._pending=w.array(Zc.data);return rd=>rd.touch(this)})}:Uc.request(Jb.url,Jb.format).then(Zc=>Cc(this,lc,w.array(Zc.data)))}});Mc.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",
array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default","default":null}]};w.inherits(Mc,u.Transform,{transform(Jb,lc){const Uc=Jb.fields,Zc=Jb.index,rd=Jb.values,Nd=null==Jb.default?null:Jb.default;var he=Jb.modified();const qd=Uc.length;let qe=he?lc.SOURCE:lc.ADD,we=lc,Cd=Jb.as,sf;rd?(sf=rd.length,1<qd&&!Cd&&w.error('Multi-field lookup requires explicit "as" parameter.'),Cd&&Cd.length!==qd*sf&&w.error('The "as" parameter has too few output field names.'),Cd=Cd||rd.map(w.accessorName),
Jb=function(Jf){for(var tf=0,lf=0,Lg,rg;tf<qd;++tf)if(rg=Zc.get(Uc[tf](Jf)),null==rg)for(Lg=0;Lg<sf;++Lg,++lf)Jf[Cd[lf]]=Nd;else for(Lg=0;Lg<sf;++Lg,++lf)Jf[Cd[lf]]=rd[Lg](rg)}):(Cd||w.error("Missing output field names."),Jb=function(Jf){for(var tf=0,lf;tf<qd;++tf)lf=Zc.get(Uc[tf](Jf)),Jf[Cd[tf]]=null==lf?Nd:lf});he?we=lc.reflow(!0):(he=Uc.some(Jf=>lc.modified(Jf.fields)),qe|=he?lc.MOD:0);lc.visit(qe,Jb);return we.modifies(Cd)}});w.inherits(Pb,u.Operator);w.inherits(rc,u.Operator);w.inherits(Jc,u.Transform,
{transform(Jb,lc){this.modified(Jb.modified());this.value=Jb;return lc.fork(lc.NO_SOURCE|lc.NO_FIELDS)}});kc.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:re,"default":"sum"},{name:"limit",type:"number","default":0},{name:"key",type:"field"}]};w.inherits(kc,ja,{_transform:ja.prototype.transform,transform(Jb,lc){return this._transform(Ab(Jb,
lc),lc)}});w.inherits(hd,Ia,{transform(Jb,lc){const Uc=Jb.subflow,Zc=Jb.field,rd=Nd=>this.subflow(u.tupleid(Nd),Uc,lc,Nd);(Jb.modified("field")||Zc&&lc.modified(w.accessorFields(Zc)))&&w.error("PreFacet does not support field modification.");this.initTargets();Zc?(lc.visit(lc.MOD,Nd=>{const he=rd(Nd);Zc(Nd).forEach(qd=>he.mod(qd))}),lc.visit(lc.ADD,Nd=>{const he=rd(Nd);Zc(Nd).forEach(qd=>he.add(u.ingest(qd)))}),lc.visit(lc.REM,Nd=>{const he=rd(Nd);Zc(Nd).forEach(qd=>he.rem(qd))})):(lc.visit(lc.MOD,
Nd=>rd(Nd).mod(Nd)),lc.visit(lc.ADD,Nd=>rd(Nd).add(Nd)),lc.visit(lc.REM,Nd=>rd(Nd).rem(Nd)));lc.clean()&&lc.runAfter(()=>this.clean());return lc}});Ed.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string","null":!0,array:!0}]};w.inherits(Ed,u.Transform,{transform(Jb,lc){const Uc=lc.fork(lc.NO_SOURCE),Zc=Jb.fields,rd=ka(Jb.fields,Jb.as||[]),Nd=Zc?(qd,qe)=>{for(let we=0,Cd=Zc.length;we<Cd;++we)qe[rd[we]]=Zc[we](qd);return qe}:
u.rederive;let he;this.value?he=this.value:(lc=lc.addAll(),he=this.value={});lc.visit(lc.REM,qd=>{qd=u.tupleid(qd);Uc.rem.push(he[qd]);he[qd]=null});lc.visit(lc.ADD,qd=>{const qe=Nd(qd,u.ingest({}));he[u.tupleid(qd)]=qe;Uc.add.push(qe)});lc.visit(lc.MOD,qd=>{Uc.mod.push(Nd(qd,he[u.tupleid(qd)]))});return Uc}});w.inherits(Qd,u.Transform,{transform(Jb,lc){this.value=Jb.value;return Jb.modified("value")?lc.fork(lc.NO_SOURCE|lc.NO_FIELDS):lc.StopPropagation}});fd.Definition={type:"Quantile",metadata:{generates:!0,
changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number","default":.01},{name:"as",type:"string",array:!0,"default":["prob","value"]}]};w.inherits(fd,u.Transform,{transform(Jb,lc){const Uc=lc.fork(lc.NO_SOURCE|lc.NO_FIELDS),Zc=Jb.as||["prob","value"];if(this.value&&!Jb.modified()&&!lc.changed())return Uc.source=this.value,Uc;lc=lc.materialize(lc.SOURCE).source;lc=H(lc,Jb.groupby,Jb.field);const rd=
(Jb.groupby||[]).map(w.accessorName),Nd=[],he=Jb.step||.01,qd=Jb.probs||Ob(he/2,1-1E-14,he),qe=qd.length;lc.forEach(we=>{const Cd=x.quantiles(we,qd);for(let sf=0;sf<qe;++sf){const Jf={};for(let tf=0;tf<rd.length;++tf)Jf[rd[tf]]=we.dims[tf];Jf[Zc[0]]=qd[sf];Jf[Zc[1]]=Cd[sf];Nd.push(u.ingest(Jf))}});this.value&&(Uc.rem=this.value);this.value=Uc.add=Uc.source=Nd;return Uc}});w.inherits(ed,u.Transform,{transform(Jb,lc){let Uc,Zc;this.value?Zc=this.value:(Uc=lc=lc.addAll(),Zc=this.value={});Jb.derive&&
(Uc=lc.fork(lc.NO_SOURCE),lc.visit(lc.REM,rd=>{rd=u.tupleid(rd);Uc.rem.push(Zc[rd]);Zc[rd]=null}),lc.visit(lc.ADD,rd=>{const Nd=u.derive(rd);Zc[u.tupleid(rd)]=Nd;Uc.add.push(Nd)}),lc.visit(lc.MOD,rd=>{const Nd=Zc[u.tupleid(rd)];for(const he in rd)Nd[he]=rd[he],Uc.modifies(he);Uc.mod.push(Nd)}));return Uc}});bc.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number","default":1E3}]};w.inherits(bc,u.Transform,{transform(Jb,lc){function Uc(Cd){let sf,Jf;qd.length<Nd?qd.push(Cd):(Jf=
~~((qe+1)*x.random()),Jf<qd.length&&Jf>=we&&(sf=qd[Jf],he[u.tupleid(sf)]&&Zc.rem.push(sf),qd[Jf]=Cd));++qe}const Zc=lc.fork(lc.NO_SOURCE);var rd=Jb.modified("size");const Nd=Jb.size,he=this.value.reduce((Cd,sf)=>(Cd[u.tupleid(sf)]=1,Cd),{});let qd=this.value,qe=this.count,we=0;lc.rem.length&&(lc.visit(lc.REM,Cd=>{const sf=u.tupleid(Cd);he[sf]&&(he[sf]=-1,Zc.rem.push(Cd));--qe}),qd=qd.filter(Cd=>-1!==he[u.tupleid(Cd)]));(lc.rem.length||rd)&&qd.length<Nd&&lc.source&&(we=qe=qd.length,lc.visit(lc.SOURCE,
Cd=>{he[u.tupleid(Cd)]||Uc(Cd)}),we=-1);if(rd&&qd.length>Nd){Jb=qd.length-Nd;for(rd=0;rd<Jb;++rd)he[u.tupleid(qd[rd])]=-1,Zc.rem.push(qd[rd]);qd=qd.slice(Jb)}lc.mod.length&&lc.visit(lc.MOD,Cd=>{he[u.tupleid(Cd)]&&Zc.mod.push(Cd)});lc.add.length&&lc.visit(lc.ADD,Uc);if(lc.add.length||0>we)Zc.add=qd.filter(Cd=>!he[u.tupleid(Cd)]);this.count=qe;this.value=Zc.source=qd;return Zc}});yc.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",
type:"number",required:!0},{name:"step",type:"number","default":1},{name:"as",type:"string","default":"data"}]};w.inherits(yc,u.Transform,{transform(Jb,lc){if(!this.value||Jb.modified()){var Uc=lc.materialize().fork(lc.MOD),Zc=Jb.as||"data";Uc.rem=this.value?lc.rem.concat(this.value):lc.rem;this.value=Ob(Jb.start,Jb.stop,Jb.step||1).map(rd=>{const Nd={};Nd[Zc]=rd;return u.ingest(Nd)});Uc.add=lc.add.concat(this.value);return Uc}}});w.inherits($c,u.Transform,{transform(Jb,lc){this.value=lc.source;return lc.changed()?
lc.fork(lc.NO_SOURCE|lc.NO_FIELDS):lc.StopPropagation}});const rf=["unit0","unit1"];cc.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean","default":!0},{name:"units",type:"enum",values:I.TIME_UNITS,array:!0},{name:"step",type:"number","default":1},{name:"maxbins",type:"number","default":40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum","default":"local",values:["local","utc"]},{name:"as",type:"string",
array:!0,length:2,"default":rf}]};w.inherits(cc,u.Transform,{transform(Jb,lc){const Uc=Jb.field,Zc=!1!==Jb.interval;var rd="utc"===Jb.timezone;const Nd=this._floor(Jb,lc),he=(rd?I.utcInterval:I.timeInterval)(Nd.unit).offset;rd=Jb.as||rf;const qd=rd[0],qe=rd[1],we=Nd.step;let Cd=Nd.start||Infinity,sf=Nd.stop||-Infinity,Jf=lc.ADD;if(Jb.modified()||lc.changed(lc.REM)||lc.modified(w.accessorFields(Uc)))lc=lc.reflow(!0),Jf=lc.SOURCE,Cd=Infinity,sf=-Infinity;lc.visit(Jf,tf=>{var lf=Uc(tf);let Lg;null==
lf?(tf[qd]=null,Zc&&(tf[qe]=null)):(tf[qd]=lf=Lg=Nd(lf),Zc&&(tf[qe]=Lg=he(lf,we)),lf<Cd&&(Cd=lf),Lg>sf&&(sf=Lg))});Nd.start=Cd;Nd.stop=sf;return lc.modifies(Zc?rd:qd)},_floor(Jb,lc){var Uc="utc"===Jb.timezone;const {units:Zc,step:rd}=Jb.units?{units:Jb.units,step:Jb.step||1}:I.timeBin({extent:Jb.extent||w.extent(lc.materialize(lc.SOURCE).source,Jb.field),maxbins:Jb.maxbins});Jb=I.timeUnits(Zc);lc=this.value||{};Uc=(Uc?I.utcFloor:I.timeFloor)(Jb,rd);Uc.unit=w.peek(Jb);Uc.units=Jb;Uc.step=rd;Uc.start=
lc.start;Uc.stop=lc.stop;return this.value=Uc}});w.inherits(tb,u.Transform,{transform(Jb,lc){const Uc=lc.dataflow,Zc=Jb.field,rd=this.value,Nd=qd=>rd.set(Zc(qd),qd);let he=!0;Jb.modified("field")||lc.modified(Zc.fields)?(rd.clear(),lc.visit(lc.SOURCE,Nd)):lc.changed()?(lc.visit(lc.REM,qd=>rd.delete(Zc(qd))),lc.visit(lc.ADD,Nd)):he=!1;this.modified(he);rd.empty>Uc.cleanThreshold&&Uc.runAfter(rd.clean);return lc.fork()}});w.inherits(tc,u.Transform,{transform(Jb,lc){if(!this.value||Jb.modified("field")||
Jb.modified("sort")||lc.changed()||Jb.sort&&lc.modified(Jb.sort.fields))this.value=(Jb.sort?lc.source.slice().sort(u.stableCompare(Jb.sort)):lc.source).map(Jb.field)}});const Ff={row_number:function(){return{next:Jb=>Jb.index+1}},rank:function(){let Jb;return{init:()=>Jb=1,next:lc=>{const Uc=lc.index,Zc=lc.data;return Uc&&lc.compare(Zc[Uc-1],Zc[Uc])?Jb=Uc+1:Jb}}},dense_rank:function(){let Jb;return{init:()=>Jb=1,next:lc=>{const Uc=lc.index,Zc=lc.data;return Uc&&lc.compare(Zc[Uc-1],Zc[Uc])?++Jb:Jb}}},
percent_rank:function(){const Jb=Ff.rank(),lc=Jb.next;return{init:Jb.init,next:Uc=>(lc(Uc)-1)/(Uc.data.length-1)}},cume_dist:function(){let Jb;return{init:()=>Jb=0,next:lc=>{const Uc=lc.data,Zc=lc.compare;lc=lc.index;if(Jb<lc){for(;lc+1<Uc.length&&!Zc(Uc[lc],Uc[lc+1]);)++lc;Jb=lc}return(1+Jb)/Uc.length}}},ntile:function(Jb,lc){lc=+lc;0<lc||w.error("ntile num must be greater than zero.");Jb=Ff.cume_dist();const Uc=Jb.next;return{init:Jb.init,next:Zc=>Math.ceil(lc*Uc(Zc))}},lag:function(Jb,lc){lc=+lc||
1;return{next:Uc=>{const Zc=Uc.index-lc;return 0<=Zc?Jb(Uc.data[Zc]):null}}},lead:function(Jb,lc){lc=+lc||1;return{next:Uc=>{const Zc=Uc.index+lc;Uc=Uc.data;return Zc<Uc.length?Jb(Uc[Zc]):null}}},first_value:function(Jb){return{next:lc=>Jb(lc.data[lc.i0])}},last_value:function(Jb){return{next:lc=>Jb(lc.data[lc.i1-1])}},nth_value:function(Jb,lc){lc=+lc;0<lc||w.error("nth_value nth must be greater than zero.");return{next:Uc=>{const Zc=Uc.i0+(lc-1);return Zc<Uc.i1?Jb(Uc.data[Zc]):null}}},prev_value:function(Jb){let lc;
return{init:()=>lc=null,next:Uc=>{Uc=Jb(Uc.data[Uc.index]);return null!=Uc?lc=Uc:lc}}},next_value:function(Jb){let lc,Uc;return{init:()=>(lc=null,Uc=-1),next:Zc=>{var rd=Zc.data;if(Zc.index<=Uc)rd=lc;else{a:{Zc=Zc.index;for(let Nd=rd.length;Zc<Nd;++Zc)if(null!=Jb(rd[Zc]))break a;Zc=-1}rd=0>(Uc=Zc)?(Uc=rd.length,lc=null):lc=Jb(rd[Uc])}return rd}}}},pg=Object.keys(Ff),gf=cd.prototype;gf.init=function(){this.windows.forEach(Jb=>Jb.init());this.cell&&this.cell.init()};gf.update=function(Jb,lc){const Uc=
this.cell,Zc=this.windows,rd=Jb.data,Nd=Zc&&Zc.length;let he;if(Uc){for(he=Jb.p0;he<Jb.i0;++he)Uc.rem(rd[he]);for(he=Jb.p1;he<Jb.i1;++he)Uc.add(rd[he]);Uc.set(lc)}for(he=0;he<Nd;++he)Zc[he].update(Jb,lc)};od.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:pg.concat(re)},{name:"params",type:"number","null":!0,array:!0},{name:"aggregate_params",type:"number","null":!0,array:!0},{name:"fields",
type:"field","null":!0,array:!0},{name:"as",type:"string","null":!0,array:!0},{name:"frame",type:"number","null":!0,array:!0,length:2,"default":[null,0]},{name:"ignorePeers",type:"boolean","default":!1}]};w.inherits(od,u.Transform,{transform(Jb,lc){this.stamp=lc.stamp;const Uc=Jb.modified(),Zc=u.stableCompare(Jb.sort),rd=N(Jb.groupby),Nd=qd=>this.group(rd(qd));let he=this.state;if(!he||Uc)he=this.state=new cd(Jb);Uc||lc.modified(he.inputs)?(this.value={},lc.visit(lc.SOURCE,qd=>Nd(qd).add(qd))):(lc.visit(lc.REM,
qd=>Nd(qd).remove(qd)),lc.visit(lc.ADD,qd=>Nd(qd).add(qd)));for(let qd=0,qe=this._mlen;qd<qe;++qd)Dd(this._mods[qd],he,Zc,Jb);this._mlen=0;this._mods=[];return lc.reflow(Uc).modifies(he.outputs)},group(Jb){let lc=this.value[Jb];lc||(lc=this.value[Jb]=J(u.tupleid),lc.stamp=-1);lc.stamp<this.stamp&&(lc.stamp=this.stamp,this._mods[this._mlen++]=lc);return lc}});A.aggregate=ja;A.bin=pa;A.collect=K;A.compare=ba;A.countpattern=fa;A.cross=wa;A.density=aa;A.dotbin=oa;A.expression=ea;A.extent=R;A.facet=Ia;
A.field=Ma;A.filter=ab;A.flatten=db;A.fold=ub;A.formula=pb;A.generate=Ya;A.impute=ec;A.joinaggregate=Wb;A.kde=Kc;A.key=Kb;A.load=Ub;A.lookup=Mc;A.multiextent=Pb;A.multivalues=rc;A.params=Jc;A.pivot=kc;A.prefacet=hd;A.project=Ed;A.proxy=Qd;A.quantile=fd;A.relay=ed;A.sample=bc;A.sequence=yc;A.sieve=$c;A.subflow=la;A.timeunit=cc;A.tupleindex=tb;A.values=tc;A.window=od})};
shadow$provide[429]=function(ob,Ba,Gb,Ea){(function(A,w){"object"===typeof Ea&&"undefined"!==typeof Gb?w(Ea):"function"===typeof define&&define.amd?define(["exports"],w):(A="undefined"!==typeof globalThis?globalThis:A||self,w(A.vega={}))})(this,function(A){function w(u,x){if("undefined"!==typeof document&&document.createElement){const I=document.createElement("canvas");if(I&&I.getContext)return I.width=u,I.height=x,I}return null}A.canvas=w;A.domCanvas=w;A.image=()=>"undefined"!==typeof Image?Image:
null})};
shadow$provide[430]=function(ob,Ba,Gb,Ea){(function(A,w){"object"===typeof Ea&&"undefined"!==typeof Gb?w(Ea,Ba(421),Ba(423)):"function"===typeof define&&define.amd?define(["exports","vega-util","vega-time"],w):(A="undefined"!==typeof globalThis?globalThis:A||self,w(A.vega={},A.vega,A.vega))})(this,function(A,w,u){function x(sb,Yb,ic){Yb=sb-Yb+2*ic;return sb?0<Yb?Yb:1:0}function I(sb){return function(Yb){let ic=Yb[0];Yb=Yb[1];let Oc;Yb<ic&&(Oc=ic,ic=Yb,Yb=Oc);return[sb.invert(ic),sb.invert(Yb)]}}function B(sb){return function(Yb){const ic=
sb.range();let Oc=Yb[0];Yb=Yb[1];let Id=-1,Od;let Jd;if(Yb<Oc){var fe=Oc;Oc=Yb;Yb=fe}fe=0;for(Jd=ic.length;fe<Jd;++fe)ic[fe]>=Oc&&ic[fe]<=Yb&&(0>Id&&(Id=fe),Od=fe);if(!(0>Id))return Oc=sb.invertExtent(ic[Id]),Yb=sb.invertExtent(ic[Od]),[void 0===Oc[0]?Oc[1]:Oc[0],void 0===Yb[1]?Yb[0]:Yb[1]]}}function N(sb,Yb){return null==sb||null==Yb?NaN:sb<Yb?-1:sb>Yb?1:sb>=Yb?0:NaN}function da(sb,Yb){return null==sb||null==Yb?NaN:Yb<sb?-1:Yb>sb?1:Yb>=sb?0:NaN}function U(sb){function Yb(Od,Jd,fe=0,He=Od.length){if(fe<
He){if(0!==ic(Jd,Jd))return He;do{const ef=fe+He>>>1;0>Oc(Od[ef],Jd)?fe=ef+1:He=ef}while(fe<He)}return fe}let ic,Oc,Id;2!==sb.length?(ic=N,Oc=(Od,Jd)=>N(sb(Od),Jd),Id=(Od,Jd)=>sb(Od)-Jd):(ic=sb===N||sb===da?sb:X,Id=Oc=sb);return{left:Yb,center:function(Od,Jd,fe=0,He=Od.length){He=Yb(Od,Jd,fe,He-1);return He>fe&&Id(Od[He-1],Jd)>-Id(Od[He],Jd)?He-1:He},right:function(Od,Jd,fe=0,He=Od.length){if(fe<He){if(0!==ic(Jd,Jd))return He;do{const ef=fe+He>>>1;0>=Oc(Od[ef],Jd)?fe=ef+1:He=ef}while(fe<He)}return fe}}}
function X(){return 0}function V(sb){return null===sb?NaN:+sb}function P({_intern:sb,_key:Yb},ic){Yb=Yb(ic);return sb.has(Yb)?sb.get(Yb):ic}function z({_intern:sb,_key:Yb},ic){Yb=Yb(ic);if(sb.has(Yb))return sb.get(Yb);sb.set(Yb,ic);return ic}function G({_intern:sb,_key:Yb},ic){Yb=Yb(ic);sb.has(Yb)&&(ic=sb.get(Yb),sb.delete(Yb));return ic}function Y(sb){return null!==sb&&"object"===typeof sb?sb.valueOf():sb}function Q(sb,Yb,ic){var Oc=(Yb-sb)/Math.max(0,ic),Id=Math.floor(Math.log10(Oc));Oc/=Math.pow(10,
Id);Oc=Oc>=Si?10:Oc>=pl?5:Oc>=Aj?2:1;let Od;0>Id?(Od=Math.pow(10,-Id)/Oc,Id=Math.round(sb*Od),Oc=Math.round(Yb*Od),Id/Od<sb&&++Id,Oc/Od>Yb&&--Oc,Od=-Od):(Od=Math.pow(10,Id)*Oc,Id=Math.round(sb/Od),Oc=Math.round(Yb/Od),Id*Od<sb&&++Id,Oc*Od>Yb&&--Oc);return Oc<Id&&.5<=ic&&2>ic?Q(sb,Yb,2*ic):[Id,Oc,Od]}function ja(sb,Yb,ic){Yb=+Yb;sb=+sb;ic=+ic;if(!(0<ic))return[];if(sb===Yb)return[sb];var Oc=Yb<sb;const [Id,Od,Jd]=Oc?Q(Yb,sb,ic):Q(sb,Yb,ic);if(!(Od>=Id))return[];sb=Od-Id+1;Yb=Array(sb);if(Oc)if(0>Jd)for(Oc=
0;Oc<sb;++Oc)Yb[Oc]=(Od-Oc)/-Jd;else for(Oc=0;Oc<sb;++Oc)Yb[Oc]=(Od-Oc)*Jd;else if(0>Jd)for(Oc=0;Oc<sb;++Oc)Yb[Oc]=(Id+Oc)/-Jd;else for(Oc=0;Oc<sb;++Oc)Yb[Oc]=(Id+Oc)*Jd;return Yb}function pa(sb,Yb,ic){return Q(+sb,+Yb,+ic)[2]}function J(sb,Yb,ic){Yb=+Yb;sb=+sb;ic=+ic;const Oc=Yb<sb;sb=Oc?pa(Yb,sb,ic):pa(sb,Yb,ic);return(Oc?-1:1)*(0>sb?1/-sb:sb)}function K(sb,Yb,ic=V){if((Oc=sb.length)&&!isNaN(Yb=+Yb)){if(0>=Yb||2>Oc)return+ic(sb[0],0,sb);if(1<=Yb)return+ic(sb[Oc-1],Oc-1,sb);var Oc;Yb*=Oc-1;Oc=Math.floor(Yb);
var Id=+ic(sb[Oc],Oc,sb);sb=+ic(sb[Oc+1],Oc+1,sb);return Id+(sb-Id)*(Yb-Oc)}}function ba(sb,Yb,ic){sb=+sb;Yb=+Yb;ic=2>(Id=arguments.length)?(Yb=sb,sb=0,1):3>Id?1:+ic;for(var Oc=-1,Id=Math.max(0,Math.ceil((Yb-sb)/ic))|0,Od=Array(Id);++Oc<Id;)Od[Oc]=sb+Oc*ic;return Od}function O(sb,Yb){switch(arguments.length){case 0:break;case 1:this.range(sb);break;default:this.range(Yb).domain(sb)}return this}function fa(sb,Yb){switch(arguments.length){case 0:break;case 1:"function"===typeof sb?this.interpolator(sb):
this.range(sb);break;default:this.domain(sb),"function"===typeof Yb?this.interpolator(Yb):this.range(Yb)}return this}function wa(){function sb(Od){let Jd=Yb.get(Od);if(void 0===Jd){if(Id!==Hj)return Id;Yb.set(Od,Jd=ic.push(Od)-1)}return Oc[Jd%Oc.length]}var Yb=new Di,ic=[],Oc=[],Id=Hj;sb.domain=function(Od){if(!arguments.length)return ic.slice();ic=[];Yb=new Di;for(const Jd of Od)Yb.has(Jd)||Yb.set(Jd,ic.push(Jd)-1);return sb};sb.range=function(Od){return arguments.length?(Oc=Array.from(Od),sb):Oc.slice()};
sb.unknown=function(Od){return arguments.length?(Id=Od,sb):Id};sb.copy=function(){return wa(ic,Oc).unknown(Id)};O.apply(sb,arguments);return sb}function ta(sb,Yb,ic){sb.prototype=Yb.prototype=ic;ic.constructor=sb}function aa(sb,Yb){sb=Object.create(sb.prototype);for(var ic in Yb)sb[ic]=Yb[ic];return sb}function ha(){}function ka(){return this.rgb().formatHex()}function H(){return this.rgb().formatRgb()}function oa(sb){var Yb,ic;sb=(sb+"").trim().toLowerCase();return(Yb=Ck.exec(sb))?(ic=Yb[1].length,
Yb=parseInt(Yb[1],16),6===ic?ea(Yb):3===ic?new Ia(Yb>>8&15|Yb>>4&240,Yb>>4&15|Yb&240,(Yb&15)<<4|Yb&15,1):8===ic?D(Yb>>24&255,Yb>>16&255,Yb>>8&255,(Yb&255)/255):4===ic?D(Yb>>12&15|Yb>>8&240,Yb>>8&15|Yb>>4&240,Yb>>4&15|Yb&240,((Yb&15)<<4|Yb&15)/255):null):(Yb=Ri.exec(sb))?new Ia(Yb[1],Yb[2],Yb[3],1):(Yb=jk.exec(sb))?new Ia(255*Yb[1]/100,255*Yb[2]/100,255*Yb[3]/100,1):(Yb=Gj.exec(sb))?D(Yb[1],Yb[2],Yb[3],Yb[4]):(Yb=Ik.exec(sb))?D(255*Yb[1]/100,255*Yb[2]/100,255*Yb[3]/100,Yb[4]):(Yb=wk.exec(sb))?pb(Yb[1],
Yb[2]/100,Yb[3]/100,1):(Yb=$k.exec(sb))?pb(Yb[1],Yb[2]/100,Yb[3]/100,Yb[4]):ci.hasOwnProperty(sb)?ea(ci[sb]):"transparent"===sb?new Ia(NaN,NaN,NaN,0):null}function ea(sb){return new Ia(sb>>16&255,sb>>8&255,sb&255,1)}function D(sb,Yb,ic,Oc){0>=Oc&&(sb=Yb=ic=NaN);return new Ia(sb,Yb,ic,Oc)}function R(sb){sb instanceof ha||(sb=oa(sb));if(!sb)return new Ia;sb=sb.rgb();return new Ia(sb.r,sb.g,sb.b,sb.opacity)}function la(sb,Yb,ic,Oc){return 1===arguments.length?R(sb):new Ia(sb,Yb,ic,null==Oc?1:Oc)}function Ia(sb,
Yb,ic,Oc){this.r=+sb;this.g=+Yb;this.b=+ic;this.opacity=+Oc}function Ma(){return`#${ub(this.r)}${ub(this.g)}${ub(this.b)}`}function Ta(){const sb=ab(this.opacity);return`${1===sb?"rgb(":"rgba("}${db(this.r)}, ${db(this.g)}, ${db(this.b)}${1===sb?")":`, ${sb})`}`}function ab(sb){return isNaN(sb)?1:Math.max(0,Math.min(1,sb))}function db(sb){return Math.max(0,Math.min(255,Math.round(sb)||0))}function ub(sb){sb=db(sb);return(16>sb?"0":"")+sb.toString(16)}function pb(sb,Yb,ic,Oc){0>=Oc?sb=Yb=ic=NaN:0>=
ic||1<=ic?sb=Yb=NaN:0>=Yb&&(sb=NaN);return new Pa(sb,Yb,ic,Oc)}function Ya(sb){if(sb instanceof Pa)return new Pa(sb.h,sb.s,sb.l,sb.opacity);sb instanceof ha||(sb=oa(sb));if(!sb)return new Pa;if(sb instanceof Pa)return sb;sb=sb.rgb();var Yb=sb.r/255,ic=sb.g/255,Oc=sb.b/255,Id=Math.min(Yb,ic,Oc),Od=Math.max(Yb,ic,Oc),Jd=NaN,fe=Od-Id,He=(Od+Id)/2;fe?(Jd=Yb===Od?(ic-Oc)/fe+6*(ic<Oc):ic===Od?(Oc-Yb)/fe+2:(Yb-ic)/fe+4,fe/=.5>He?Od+Id:2-Od-Id,Jd*=60):fe=0<He&&1>He?0:Jd;return new Pa(Jd,fe,He,sb.opacity)}
function Va(sb,Yb,ic,Oc){return 1===arguments.length?Ya(sb):new Pa(sb,Yb,ic,null==Oc?1:Oc)}function Pa(sb,Yb,ic,Oc){this.h=+sb;this.s=+Yb;this.l=+ic;this.opacity=+Oc}function Ha(sb){sb=(sb||0)%360;return 0>sb?sb+360:sb}function Ca(sb){return Math.max(0,Math.min(1,sb||0))}function Aa(sb,Yb,ic){return 255*(60>sb?Yb+(ic-Yb)*sb/60:180>sb?ic:240>sb?Yb+(ic-Yb)*(240-sb)/60:Yb)}function Ga(sb){if(sb instanceof cb)return new cb(sb.l,sb.a,sb.b,sb.opacity);if(sb instanceof Ic)return Xb(sb);sb instanceof Ia||
(sb=R(sb));var Yb=Ob(sb.r),ic=Ob(sb.g),Oc=Ob(sb.b),Id=fb(.2225045*Yb+.7168786*ic+.0606169*Oc);if(Yb===ic&&ic===Oc)var Od=Yb=Id;else Od=fb((.4360747*Yb+.3850649*ic+.1430804*Oc)/.96422),Yb=fb((.0139322*Yb+.0971045*ic+.7141733*Oc)/.82521);return new cb(116*Id-16,500*(Od-Id),200*(Id-Yb),sb.opacity)}function Ka(sb,Yb,ic,Oc){return 1===arguments.length?Ga(sb):new cb(sb,Yb,ic,null==Oc?1:Oc)}function cb(sb,Yb,ic,Oc){this.l=+sb;this.a=+Yb;this.b=+ic;this.opacity=+Oc}function fb(sb){return sb>Yk?Math.pow(sb,
1/3):sb/Vi+Ji}function La(sb){return sb>Fg?sb*sb*sb:Vi*(sb-Ji)}function Bb(sb){return 255*(.0031308>=sb?12.92*sb:1.055*Math.pow(sb,1/2.4)-.055)}function Ob(sb){return.04045>=(sb/=255)?sb/12.92:Math.pow((sb+.055)/1.055,2.4)}function ec(sb){if(sb instanceof Ic)return new Ic(sb.h,sb.c,sb.l,sb.opacity);sb instanceof cb||(sb=Ga(sb));if(0===sb.a&&0===sb.b)return new Ic(NaN,0<sb.l&&100>sb.l?0:NaN,sb.l,sb.opacity);var Yb=Math.atan2(sb.b,sb.a)*sk;return new Ic(0>Yb?Yb+360:Yb,Math.sqrt(sb.a*sb.a+sb.b*sb.b),
sb.l,sb.opacity)}function sc(sb,Yb,ic,Oc){return 1===arguments.length?ec(sb):new Ic(sb,Yb,ic,null==Oc?1:Oc)}function Ic(sb,Yb,ic,Oc){this.h=+sb;this.c=+Yb;this.l=+ic;this.opacity=+Oc}function Xb(sb){if(isNaN(sb.h))return new cb(sb.l,0,0,sb.opacity);var Yb=sb.h*Ng;return new cb(sb.l,Math.cos(Yb)*sb.c,Math.sin(Yb)*sb.c,sb.opacity)}function Wb(sb,Yb,ic,Oc){if(1===arguments.length){var Id=sb;if(Id instanceof Kc)Id=new Kc(Id.h,Id.s,Id.l,Id.opacity);else{Id instanceof Ia||(Id=R(Id));var Od=Id.g/255,Jd=
Id.b/255,fe=(jl*Jd+Id.r/255*-1.7884503806-3.5172982438*Od)/(jl+-1.7884503806-3.5172982438);Jd-=fe;var He=(1.97294*(Od-fe)- -.29227*Jd)/-.90649;Jd=(Od=Math.sqrt(He*He+Jd*Jd)/(1.97294*fe*(1-fe)))?Math.atan2(He,Jd)*sk-120:NaN;Id=new Kc(0>Jd?Jd+360:Jd,Od,fe,Id.opacity)}}else Id=new Kc(sb,Yb,ic,null==Oc?1:Oc);return Id}function Kc(sb,Yb,ic,Oc){this.h=+sb;this.s=+Yb;this.l=+ic;this.opacity=+Oc}function Kb(sb,Yb,ic,Oc,Id){var Od=sb*sb,Jd=Od*sb;return((1-3*sb+3*Od-Jd)*Yb+(4-6*Od+3*Jd)*ic+(1+3*sb+3*Od-3*Jd)*
Oc+Jd*Id)/6}function mc(sb){var Yb=sb.length-1;return function(ic){var Oc=0>=ic?ic=0:1<=ic?(ic=1,Yb-1):Math.floor(ic*Yb),Id=sb[Oc],Od=sb[Oc+1];return Kb((ic-Oc/Yb)*Yb,0<Oc?sb[Oc-1]:2*Id-Od,Id,Od,Oc<Yb-1?sb[Oc+2]:2*Od-Id)}}function Ub(sb){var Yb=sb.length;return function(ic){var Oc=Math.floor((0>(ic%=1)?++ic:ic)*Yb);return Kb((ic-Oc/Yb)*Yb,sb[(Oc+Yb-1)%Yb],sb[Oc%Yb],sb[(Oc+1)%Yb],sb[(Oc+2)%Yb])}}function oc(sb,Yb){return function(ic){return sb+ic*Yb}}function Cc(sb,Yb,ic){return sb=Math.pow(sb,ic),
Yb=Math.pow(Yb,ic)-sb,ic=1/ic,function(Oc){return Math.pow(sb+Oc*Yb,ic)}}function Mc(sb,Yb){var ic=Yb-sb;return ic?oc(sb,180<ic||-180>ic?ic-360*Math.round(ic/360):ic):oj(isNaN(sb)?Yb:sb)}function Pb(sb){return 1===(sb=+sb)?nc:function(Yb,ic){return ic-Yb?Cc(Yb,ic,sb):oj(isNaN(Yb)?ic:Yb)}}function nc(sb,Yb){var ic=Yb-sb;return ic?oc(sb,ic):oj(isNaN(sb)?Yb:sb)}function rc(sb){return function(Yb){var ic=Yb.length,Oc=Array(ic),Id=Array(ic),Od=Array(ic),Jd;for(Jd=0;Jd<ic;++Jd){var fe=la(Yb[Jd]);Oc[Jd]=
fe.r||0;Id[Jd]=fe.g||0;Od[Jd]=fe.b||0}Oc=sb(Oc);Id=sb(Id);Od=sb(Od);fe.opacity=1;return function(He){fe.r=Oc(He);fe.g=Id(He);fe.b=Od(He);return fe+""}}}function Hb(sb,Yb){Yb||(Yb=[]);var ic=sb?Math.min(Yb.length,sb.length):0,Oc=Yb.slice(),Id;return function(Od){for(Id=0;Id<ic;++Id)Oc[Id]=sb[Id]*(1-Od)+Yb[Id]*Od;return Oc}}function Jc(sb){return ArrayBuffer.isView(sb)&&!(sb instanceof DataView)}function kc(sb,Yb){var ic=Yb?Yb.length:0,Oc=sb?Math.min(ic,sb.length):0,Id=Array(Oc),Od=Array(ic),Jd;for(Jd=
0;Jd<Oc;++Jd)Id[Jd]=fd(sb[Jd],Yb[Jd]);for(;Jd<ic;++Jd)Od[Jd]=Yb[Jd];return function(fe){for(Jd=0;Jd<Oc;++Jd)Od[Jd]=Id[Jd](fe);return Od}}function Ab(sb,Yb){var ic=new Date;return sb=+sb,Yb=+Yb,function(Oc){return ic.setTime(sb*(1-Oc)+Yb*Oc),ic}}function md(sb,Yb){return sb=+sb,Yb=+Yb,function(ic){return sb*(1-ic)+Yb*ic}}function yd(sb,Yb){var ic={},Oc={},Id;if(null===sb||"object"!==typeof sb)sb={};if(null===Yb||"object"!==typeof Yb)Yb={};for(Id in Yb)Id in sb?ic[Id]=fd(sb[Id],Yb[Id]):Oc[Id]=Yb[Id];
return function(Od){for(Id in ic)Oc[Id]=ic[Id](Od);return Oc}}function hd(sb){return function(){return sb}}function Ed(sb){return function(Yb){return sb(Yb)+""}}function Qd(sb,Yb){var ic=rl.lastIndex=Jk.lastIndex=0,Oc,Id,Od,Jd=-1,fe=[],He=[];sb+="";for(Yb+="";(Oc=rl.exec(sb))&&(Id=Jk.exec(Yb));)(Od=Id.index)>ic&&(Od=Yb.slice(ic,Od),fe[Jd]?fe[Jd]+=Od:fe[++Jd]=Od),(Oc=Oc[0])===(Id=Id[0])?fe[Jd]?fe[Jd]+=Id:fe[++Jd]=Id:(fe[++Jd]=null,He.push({i:Jd,x:md(Oc,Id)})),ic=Jk.lastIndex;ic<Yb.length&&(Od=Yb.slice(ic),
fe[Jd]?fe[Jd]+=Od:fe[++Jd]=Od);return 2>fe.length?He[0]?Ed(He[0].x):hd(Yb):(Yb=He.length,function(ef){for(var Mf=0,Je;Mf<Yb;++Mf)fe[(Je=He[Mf]).i]=Je.x(ef);return fe.join("")})}function fd(sb,Yb){var ic=typeof Yb,Oc;return null==Yb||"boolean"===ic?oj(Yb):("number"===ic?md:"string"===ic?(Oc=oa(Yb))?(Yb=Oc,xk):Qd:Yb instanceof oa?xk:Yb instanceof Date?Ab:Jc(Yb)?Hb:Array.isArray(Yb)?kc:"function"!==typeof Yb.valueOf&&"function"!==typeof Yb.toString||isNaN(Yb)?yd:md)(sb,Yb)}function ed(sb,Yb){return sb=
+sb,Yb=+Yb,function(ic){return Math.round(sb*(1-ic)+Yb*ic)}}function bc(sb,Yb,ic,Oc,Id,Od){var Jd,fe,He;if(Jd=Math.sqrt(sb*sb+Yb*Yb))sb/=Jd,Yb/=Jd;if(He=sb*ic+Yb*Oc)ic-=sb*He,Oc-=Yb*He;if(fe=Math.sqrt(ic*ic+Oc*Oc))ic/=fe,Oc/=fe,He/=fe;sb*Oc<Yb*ic&&(sb=-sb,Yb=-Yb,He=-He,Jd=-Jd);return{translateX:Id,translateY:Od,rotate:Math.atan2(Yb,sb)*Kk,skewX:Math.atan(He)*Kk,scaleX:Jd,scaleY:fe}}function yc(sb,Yb,ic,Oc){function Id(ef){return ef.length?ef.pop()+" ":""}function Od(ef,Mf,Je,Xf,Bg,yh){ef!==Je||Mf!==
Xf?(Bg=Bg.push("translate(",null,Yb,null,ic),yh.push({i:Bg-4,x:md(ef,Je)},{i:Bg-2,x:md(Mf,Xf)})):(Je||Xf)&&Bg.push("translate("+Je+Yb+Xf+ic)}function Jd(ef,Mf,Je,Xf){ef!==Mf?(180<ef-Mf?Mf+=360:180<Mf-ef&&(ef+=360),Xf.push({i:Je.push(Id(Je)+"rotate(",null,Oc)-2,x:md(ef,Mf)})):Mf&&Je.push(Id(Je)+"rotate("+Mf+Oc)}function fe(ef,Mf,Je,Xf){ef!==Mf?Xf.push({i:Je.push(Id(Je)+"skewX(",null,Oc)-2,x:md(ef,Mf)}):Mf&&Je.push(Id(Je)+"skewX("+Mf+Oc)}function He(ef,Mf,Je,Xf,Bg,yh){ef!==Je||Mf!==Xf?(Bg=Bg.push(Id(Bg)+
"scale(",null,",",null,")"),yh.push({i:Bg-4,x:md(ef,Je)},{i:Bg-2,x:md(Mf,Xf)})):1===Je&&1===Xf||Bg.push(Id(Bg)+"scale("+Je+","+Xf+")")}return function(ef,Mf){var Je=[],Xf=[];ef=sb(ef);Mf=sb(Mf);Od(ef.translateX,ef.translateY,Mf.translateX,Mf.translateY,Je,Xf);Jd(ef.rotate,Mf.rotate,Je,Xf);fe(ef.skewX,Mf.skewX,Je,Xf);He(ef.scaleX,ef.scaleY,Mf.scaleX,Mf.scaleY,Je,Xf);ef=Mf=null;return function(Bg){for(var yh=-1,Tg=Xf.length,Qh;++yh<Tg;)Je[(Qh=Xf[yh]).i]=Qh.x(Bg);return Je.join("")}}}function $c(sb){return((sb=
Math.exp(sb))+1/sb)/2}function cc(sb){return function(Yb,ic){var Oc=sb((Yb=Va(Yb)).h,(ic=Va(ic)).h),Id=nc(Yb.s,ic.s),Od=nc(Yb.l,ic.l),Jd=nc(Yb.opacity,ic.opacity);return function(fe){Yb.h=Oc(fe);Yb.s=Id(fe);Yb.l=Od(fe);Yb.opacity=Jd(fe);return Yb+""}}}function tb(sb){return function(Yb,ic){var Oc=sb((Yb=sc(Yb)).h,(ic=sc(ic)).h),Id=nc(Yb.c,ic.c),Od=nc(Yb.l,ic.l),Jd=nc(Yb.opacity,ic.opacity);return function(fe){Yb.h=Oc(fe);Yb.c=Id(fe);Yb.l=Od(fe);Yb.opacity=Jd(fe);return Yb+""}}}function tc(sb){return function Oc(ic){function Id(Od,
Jd){var fe=sb((Od=Wb(Od)).h,(Jd=Wb(Jd)).h),He=nc(Od.s,Jd.s),ef=nc(Od.l,Jd.l),Mf=nc(Od.opacity,Jd.opacity);return function(Je){Od.h=fe(Je);Od.s=He(Je);Od.l=ef(Math.pow(Je,ic));Od.opacity=Mf(Je);return Od+""}}ic=+ic;Id.gamma=Oc;return Id}(1)}function Ec(sb,Yb){void 0===Yb&&(Yb=sb,sb=fd);for(var ic=0,Oc=Yb.length-1,Id=Yb[0],Od=Array(0>Oc?0:Oc);ic<Oc;)Od[ic]=sb(Id,Id=Yb[++ic]);return function(Jd){var fe=Math.max(0,Math.min(Oc-1,Math.floor(Jd*=Oc)));return Od[fe](Jd-fe)}}function cd(sb){return function(){return sb}}
function bd(sb){return+sb}function od(sb){return sb}function Dd(sb,Yb){return(Yb-=sb=+sb)?function(ic){return(ic-sb)/Yb}:cd(isNaN(Yb)?NaN:.5)}function xd(sb,Yb){if(sb>Yb){var ic=sb;sb=Yb;Yb=ic}return function(Oc){return Math.max(sb,Math.min(Yb,Oc))}}function sd(sb,Yb,ic){var Oc=sb[0];sb=sb[1];var Id=Yb[0];Yb=Yb[1];sb<Oc?(Oc=Dd(sb,Oc),Id=ic(Yb,Id)):(Oc=Dd(Oc,sb),Id=ic(Id,Yb));return function(Od){return Id(Oc(Od))}}function Vd(sb,Yb,ic){var Oc=Math.min(sb.length,Yb.length)-1,Id=Array(Oc),Od=Array(Oc),
Jd=-1;sb[Oc]<sb[0]&&(sb=sb.slice().reverse(),Yb=Yb.slice().reverse());for(;++Jd<Oc;)Id[Jd]=Dd(sb[Jd],sb[Jd+1]),Od[Jd]=ic(Yb[Jd],Yb[Jd+1]);return function(fe){var He=Dh(sb,fe,1,Oc)-1;return Od[He](Id[He](fe))}}function re(sb,Yb){return Yb.domain(sb.domain()).range(sb.range()).interpolate(sb.interpolate()).clamp(sb.clamp()).unknown(sb.unknown())}function Wd(){function sb(){var Xf=Math.min(ic.length,Oc.length);He!==od&&(He=xd(ic[0],ic[Xf-1]));ef=2<Xf?Vd:sd;Mf=Je=null;return Yb}function Yb(Xf){return null==
Xf||isNaN(Xf=+Xf)?fe:(Mf||(Mf=ef(ic.map(Od),Oc,Id)))(Od(He(Xf)))}var ic=Kl,Oc=Kl,Id=fd,Od,Jd,fe,He=od,ef,Mf,Je;Yb.invert=function(Xf){return He(Jd((Je||(Je=ef(Oc,ic.map(Od),md)))(Xf)))};Yb.domain=function(Xf){return arguments.length?(ic=Array.from(Xf,bd),sb()):ic.slice()};Yb.range=function(Xf){return arguments.length?(Oc=Array.from(Xf),sb()):Oc.slice()};Yb.rangeRound=function(Xf){return Oc=Array.from(Xf),Id=ed,sb()};Yb.clamp=function(Xf){return arguments.length?(He=Xf?!0:od,sb()):He!==od};Yb.interpolate=
function(Xf){return arguments.length?(Id=Xf,sb()):Id};Yb.unknown=function(Xf){return arguments.length?(fe=Xf,Yb):fe};return function(Xf,Bg){Od=Xf;Jd=Bg;return sb()}}function Fe(sb,Yb){if(0>(Yb=(sb=Yb?sb.toExponential(Yb-1):sb.toExponential()).indexOf("e")))return null;var ic=sb.slice(0,Yb);return[1<ic.length?ic[0]+ic.slice(2):ic,+sb.slice(Yb+1)]}function Bf(sb){return sb=Fe(Math.abs(sb)),sb?sb[1]:NaN}function Ye(sb,Yb){return function(ic,Oc){for(var Id=ic.length,Od=[],Jd=0,fe=sb[0],He=0;0<Id&&0<fe;){He+
fe+1>Oc&&(fe=Math.max(1,Oc-He));Od.push(ic.substring(Id-=fe,Id+fe));if((He+=fe+1)>Oc)break;fe=sb[Jd=(Jd+1)%sb.length]}return Od.reverse().join(Yb)}}function bg(sb){return function(Yb){return Yb.replace(/[0-9]/g,function(ic){return sb[+ic]})}}function rf(sb){if(!(Yb=Rb.exec(sb)))throw Error("invalid format: "+sb);var Yb;return new Ff({fill:Yb[1],align:Yb[2],sign:Yb[3],symbol:Yb[4],zero:Yb[5],width:Yb[6],comma:Yb[7],precision:Yb[8]&&Yb[8].slice(1),trim:Yb[9],type:Yb[10]})}function Ff(sb){this.fill=
void 0===sb.fill?" ":sb.fill+"";this.align=void 0===sb.align?"\x3e":sb.align+"";this.sign=void 0===sb.sign?"-":sb.sign+"";this.symbol=void 0===sb.symbol?"":sb.symbol+"";this.zero=!!sb.zero;this.width=void 0===sb.width?void 0:+sb.width;this.comma=!!sb.comma;this.precision=void 0===sb.precision?void 0:+sb.precision;this.trim=!!sb.trim;this.type=void 0===sb.type?"":sb.type+""}function pg(sb,Yb){Yb=Fe(sb,Yb);if(!Yb)return sb+"";sb=Yb[0];Yb=Yb[1];return 0>Yb?"0."+Array(-Yb).join("0")+sb:sb.length>Yb+1?
sb.slice(0,Yb+1)+"."+sb.slice(Yb+1):sb+Array(Yb-sb.length+2).join("0")}function gf(sb){return sb}function Jb(sb){function Yb(Mf){function Je(Nf){var ch=Rh,Cg=Ej,Ki,bk;if("c"===Uh)Cg=dm(Nf)+Cg,Nf="";else{Nf=+Nf;var ui=0>Nf||0>1/Nf;Nf=isNaN(Nf)?ef:dm(Math.abs(Nf),th);if(Xk){var Ci=Nf.length,fi=1,mj=-1;a:for(;fi<Ci;++fi)switch(Nf[fi]){case ".":mj=Ki=fi;break;case "0":0===mj&&(mj=fi);Ki=fi;break;default:if(!+Nf[fi])break a;0<mj&&(mj=0)}Nf=0<mj?Nf.slice(0,mj)+Nf.slice(Ki+1):Nf}ui&&0===+Nf&&"+"!==yh&&(ui=
!1);ch=(ui?"("===yh?yh:He:"-"===yh||"("===yh?"":yh)+ch;Cg=("s"===Uh?ce[8+Bc/3]:"")+Cg+(ui&&"("===yh?")":"");if(bh)for(ui=-1,Ki=Nf.length;++ui<Ki;)if(bk=Nf.charCodeAt(ui),48>bk||57<bk){Cg=(46===bk?Od+Nf.slice(ui+1):Nf.slice(ui))+Cg;Nf=Nf.slice(0,ui);break}}ki&&!Qh&&(Nf=ic(Nf,Infinity));bk=ch.length+Nf.length+Cg.length;ui=bk<yi?Array(yi-bk+1).join(Xf):"";ki&&Qh&&(Nf=ic(ui+Nf,ui.length?yi-Cg.length:Infinity),ui="");switch(Bg){case "\x3c":Nf=ch+Nf+Cg+ui;break;case "\x3d":Nf=ch+ui+Nf+Cg;break;case "^":Nf=
ui.slice(0,bk=ui.length>>1)+ch+Nf+Cg+ui.slice(bk);break;default:Nf=ui+ch+Nf+Cg}return Jd(Nf)}Mf=rf(Mf);var Xf=Mf.fill,Bg=Mf.align,yh=Mf.sign,Tg=Mf.symbol,Qh=Mf.zero,yi=Mf.width,ki=Mf.comma,th=Mf.precision,Xk=Mf.trim,Uh=Mf.type;"n"===Uh?(ki=!0,Uh="g"):gd[Uh]||(void 0===th&&(th=12),Xk=!0,Uh="g");if(Qh||"0"===Xf&&"\x3d"===Bg)Qh=!0,Xf="0",Bg="\x3d";var Rh="$"===Tg?Oc:"#"===Tg&&/[boxX]/.test(Uh)?"0"+Uh.toLowerCase():"",Ej="$"===Tg?Id:/[%p]/.test(Uh)?fe:"",dm=gd[Uh],bh=/[defgprs%]/.test(Uh);th=void 0===
th?6:/[gprs]/.test(Uh)?Math.max(1,Math.min(21,th)):Math.max(0,Math.min(20,th));Je.toString=function(){return Mf+""};return Je}var ic=void 0===sb.grouping||void 0===sb.thousands?gf:Ye(zd.call(sb.grouping,Number),sb.thousands+""),Oc=void 0===sb.currency?"":sb.currency[0]+"",Id=void 0===sb.currency?"":sb.currency[1]+"",Od=void 0===sb.decimal?".":sb.decimal+"",Jd=void 0===sb.numerals?gf:bg(zd.call(sb.numerals,String)),fe=void 0===sb.percent?"%":sb.percent+"",He=void 0===sb.minus?"−":sb.minus+"",ef=void 0===
sb.nan?"NaN":sb.nan+"";return{format:Yb,formatPrefix:function(Mf,Je){var Xf=Yb((Mf=rf(Mf),Mf.type="f",Mf));Mf=3*Math.max(-8,Math.min(8,Math.floor(Bf(Je)/3)));var Bg=Math.pow(10,-Mf),yh=ce[8+Mf/3];return function(Tg){return Xf(Bg*Tg)+yh}}}}function lc(sb,Yb,ic,Oc){ic=J(sb,Yb,ic);Oc=rf(null==Oc?",f":Oc);switch(Oc.type){case "s":sb=Math.max(Math.abs(sb),Math.abs(Yb));if(Yb=null==Oc.precision){var Id=isNaN;ic=Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Bf(sb)/3)))-Bf(Math.abs(ic)));Yb=!Id(Id=ic)}Yb&&
(Oc.precision=Id);return Fb(Oc,sb);case "":case "e":case "g":case "p":case "r":var Od;if(Od=null==Oc.precision)Id=isNaN,sb=Math.max(Math.abs(sb),Math.abs(Yb)),ic=Math.abs(ic),sb=Math.abs(sb)-ic,ic=Math.max(0,Bf(sb)-Bf(ic))+1,Od=!Id(Id=ic);Od&&(Oc.precision=Id-("e"===Oc.type));break;case "f":case "%":null!=Oc.precision||isNaN(Id=Math.max(0,-Bf(Math.abs(ic))))||(Oc.precision=Id-2*("%"===Oc.type))}return De(Oc)}function Uc(sb){var Yb=sb.domain;sb.ticks=function(ic){var Oc=Yb();return ja(Oc[0],Oc[Oc.length-
1],null==ic?10:ic)};sb.tickFormat=function(ic,Oc){var Id=Yb();return lc(Id[0],Id[Id.length-1],null==ic?10:ic,Oc)};sb.nice=function(ic){null==ic&&(ic=10);var Oc=Yb(),Id=0,Od=Oc.length-1,Jd=Oc[Id],fe=Oc[Od],He=10;if(fe<Jd){var ef=Jd;Jd=fe;fe=ef;ef=Id;Id=Od;Od=ef}for(;0<He--;){ef=pa(Jd,fe,ic);if(ef===Mf)return Oc[Id]=Jd,Oc[Od]=fe,Yb(Oc);if(0<ef)Jd=Math.floor(Jd/ef)*ef,fe=Math.ceil(fe/ef)*ef;else if(0>ef)Jd=Math.ceil(Jd*ef)/ef,fe=Math.floor(fe*ef)/ef;else break;var Mf=ef}return sb};return sb}function Zc(){var sb=
Wd()(od,od);sb.copy=function(){return re(sb,Zc())};O.apply(sb,arguments);return Uc(sb)}function rd(sb){function Yb(Oc){return null==Oc||isNaN(Oc=+Oc)?ic:Oc}var ic;Yb.invert=Yb;Yb.domain=Yb.range=function(Oc){return arguments.length?(sb=Array.from(Oc,bd),Yb):sb.slice()};Yb.unknown=function(Oc){return arguments.length?(ic=Oc,Yb):ic};Yb.copy=function(){return rd(sb).unknown(ic)};sb=arguments.length?Array.from(sb,bd):[0,1];return Uc(Yb)}function Nd(sb,Yb){sb=sb.slice();var ic=0,Oc=sb.length-1,Id=sb[ic],
Od=sb[Oc];if(Od<Id){var Jd=ic;ic=Oc;Oc=Jd;Jd=Id;Id=Od;Od=Jd}sb[ic]=Yb.floor(Id);sb[Oc]=Yb.ceil(Od);return sb}function he(sb){return Math.log(sb)}function qd(sb){return Math.exp(sb)}function qe(sb){return-Math.log(-sb)}function we(sb){return-Math.exp(-sb)}function Cd(sb){return isFinite(sb)?+("1e"+sb):0>sb?0:sb}function sf(sb){return 10===sb?Cd:sb===Math.E?Math.exp:Yb=>Math.pow(sb,Yb)}function Jf(sb){return sb===Math.E?Math.log:10===sb&&Math.log10||2===sb&&Math.log2||(sb=Math.log(sb),Yb=>Math.log(Yb)/
sb)}function tf(sb){return(Yb,ic)=>-sb(-Yb,ic)}function lf(sb){function Yb(){Od=Jf(Id);Jd=sf(Id);0>Oc()[0]?(Od=tf(Od),Jd=tf(Jd),sb(qe,we)):sb(he,qd);return ic}const ic=sb(he,qd),Oc=ic.domain;let Id=10,Od,Jd;ic.base=function(fe){return arguments.length?(Id=+fe,Yb()):Id};ic.domain=function(fe){return arguments.length?(Oc(fe),Yb()):Oc()};ic.ticks=fe=>{var He=Oc();let ef=He[0];He=He[He.length-1];const Mf=He<ef;Mf&&([ef,He]=[He,ef]);let Je=Od(ef),Xf=Od(He),Bg;const yh=null==fe?10:+fe;let Tg=[];if(!(Id%
1)&&Xf-Je<yh){Je=Math.floor(Je);Xf=Math.ceil(Xf);if(0<ef)for(;Je<=Xf;++Je)for(fe=1;fe<Id;++fe){if(Bg=0>Je?fe/Jd(-Je):fe*Jd(Je),!(Bg<ef)){if(Bg>He)break;Tg.push(Bg)}}else for(;Je<=Xf;++Je)for(fe=Id-1;1<=fe;--fe)if(Bg=0<Je?fe/Jd(-Je):fe*Jd(Je),!(Bg<ef)){if(Bg>He)break;Tg.push(Bg)}2*Tg.length<yh&&(Tg=ja(ef,He,yh))}else Tg=ja(Je,Xf,Math.min(Xf-Je,yh)).map(Jd);return Mf?Tg.reverse():Tg};ic.tickFormat=(fe,He)=>{null==fe&&(fe=10);null==He&&(He=10===Id?"s":",");"function"!==typeof He&&(Id%1||null!=(He=rf(He)).precision||
(He.trim=!0),He=De(He));if(Infinity===fe)return He;const ef=Math.max(1,Id*fe/ic.ticks().length);return Mf=>{let Je=Mf/Jd(Math.round(Od(Mf)));Je*Id<Id-.5&&(Je*=Id);return Je<=ef?He(Mf):""}};ic.nice=()=>Oc(Nd(Oc(),{floor:fe=>Jd(Math.floor(Od(fe))),ceil:fe=>Jd(Math.ceil(Od(fe)))}));return ic}function Lg(){const sb=lf(Wd()).domain([1,10]);sb.copy=()=>re(sb,Lg()).base(sb.base());O.apply(sb,arguments);return sb}function rg(sb){return function(Yb){return Math.sign(Yb)*Math.log1p(Math.abs(Yb/sb))}}function Pg(sb){return function(Yb){return Math.sign(Yb)*
Math.expm1(Math.abs(Yb))*sb}}function fh(sb){var Yb=1,ic=sb(rg(Yb),Pg(Yb));ic.constant=function(Oc){return arguments.length?sb(rg(Yb=+Oc),Pg(Yb)):Yb};return Uc(ic)}function eh(){var sb=fh(Wd());sb.copy=function(){return re(sb,eh()).constant(sb.constant())};return O.apply(sb,arguments)}function Zg(sb){return function(Yb){return 0>Yb?-Math.pow(-Yb,sb):Math.pow(Yb,sb)}}function oi(sb){return 0>sb?-Math.sqrt(-sb):Math.sqrt(sb)}function ei(sb){return 0>sb?-sb*sb:sb*sb}function Yh(sb){var Yb=sb(od,od),
ic=1;Yb.exponent=function(Oc){return arguments.length?(ic=+Oc,1===ic?sb(od,od):.5===ic?sb(oi,ei):sb(Zg(ic),Zg(1/ic))):ic};return Uc(Yb)}function wh(){var sb=Yh(Wd());sb.copy=function(){return re(sb,wh()).exponent(sb.exponent())};O.apply(sb,arguments);return sb}function Wc(){function sb(){var Jd=0,fe=Math.max(1,Oc.length);for(Id=Array(fe-1);++Jd<fe;)Id[Jd-1]=K(ic,Jd/fe);return Yb}function Yb(Jd){return null==Jd||isNaN(Jd=+Jd)?Od:Oc[Dh(Id,Jd)]}var ic=[],Oc=[],Id=[],Od;Yb.invertExtent=function(Jd){Jd=
Oc.indexOf(Jd);return 0>Jd?[NaN,NaN]:[0<Jd?Id[Jd-1]:ic[0],Jd<Id.length?Id[Jd]:ic[ic.length-1]]};Yb.domain=function(Jd){if(!arguments.length)return ic.slice();ic=[];for(let fe of Jd)null==fe||isNaN(fe=+fe)||ic.push(fe);ic.sort(N);return sb()};Yb.range=function(Jd){return arguments.length?(Oc=Array.from(Jd),sb()):Oc.slice()};Yb.unknown=function(Jd){return arguments.length?(Od=Jd,Yb):Od};Yb.quantiles=function(){return Id.slice()};Yb.copy=function(){return Wc().domain(ic).range(Oc).unknown(Od)};return O.apply(Yb,
arguments)}function ib(){function sb(He){return null!=He&&He<=He?Jd[Dh(Od,He,0,Id)]:fe}function Yb(){var He=-1;for(Od=Array(Id);++He<Id;)Od[He]=((He+1)*Oc-(He-Id)*ic)/(Id+1);return sb}var ic=0,Oc=1,Id=1,Od=[.5],Jd=[0,1],fe;sb.domain=function(He){return arguments.length?([ic,Oc]=He,ic=+ic,Oc=+Oc,Yb()):[ic,Oc]};sb.range=function(He){return arguments.length?(Id=(Jd=Array.from(He)).length-1,Yb()):Jd.slice()};sb.invertExtent=function(He){He=Jd.indexOf(He);return 0>He?[NaN,NaN]:1>He?[ic,Od[0]]:He>=Id?[Od[Id-
1],Oc]:[Od[He-1],Od[He]]};sb.unknown=function(He){return arguments.length?(fe=He,sb):sb};sb.thresholds=function(){return Od.slice()};sb.copy=function(){return ib().domain([ic,Oc]).range(Jd).unknown(fe)};return O.apply(Uc(sb),arguments)}function Ua(){function sb(Od){return null!=Od&&Od<=Od?ic[Dh(Yb,Od,0,Id)]:Oc}var Yb=[.5],ic=[0,1],Oc,Id=1;sb.domain=function(Od){return arguments.length?(Yb=Array.from(Od),Id=Math.min(Yb.length,ic.length-1),sb):Yb.slice()};sb.range=function(Od){return arguments.length?
(ic=Array.from(Od),Id=Math.min(Yb.length,ic.length-1),sb):ic.slice()};sb.invertExtent=function(Od){Od=ic.indexOf(Od);return[Yb[Od-1],Yb[Od]]};sb.unknown=function(Od){return arguments.length?(Oc=Od,sb):Oc};sb.copy=function(){return Ua().domain(Yb).range(ic).unknown(Oc)};return O.apply(sb,arguments)}function v(sb,Yb,ic,Oc){function Id(Od){return sb(Od=0===arguments.length?new Date:new Date(+Od)),Od}Id.floor=Od=>(sb(Od=new Date(+Od)),Od);Id.ceil=Od=>(sb(Od=new Date(Od-1)),Yb(Od,1),sb(Od),Od);Id.round=
Od=>{const Jd=Id(Od),fe=Id.ceil(Od);return Od-Jd<fe-Od?Jd:fe};Id.offset=(Od,Jd)=>(Yb(Od=new Date(+Od),null==Jd?1:Math.floor(Jd)),Od);Id.range=(Od,Jd,fe)=>{const He=[];Od=Id.ceil(Od);fe=null==fe?1:Math.floor(fe);if(!(Od<Jd&&0<fe))return He;let ef;do He.push(ef=new Date(+Od)),Yb(Od,fe),sb(Od);while(ef<Od&&Od<Jd);return He};Id.filter=Od=>v(Jd=>{if(Jd>=Jd)for(;sb(Jd),!Od(Jd);)Jd.setTime(Jd-1)},(Jd,fe)=>{if(Jd>=Jd)if(0>fe)for(;0>=++fe;)for(;Yb(Jd,-1),!Od(Jd););else for(;0<=--fe;)for(;Yb(Jd,1),!Od(Jd););
});ic&&(Id.count=(Od,Jd)=>{dc.setTime(+Od);Dc.setTime(+Jd);sb(dc);sb(Dc);return Math.floor(ic(dc,Dc))},Id.every=Od=>{Od=Math.floor(Od);return isFinite(Od)&&0<Od?1<Od?Id.filter(Oc?Jd=>0===Oc(Jd)%Od:Jd=>0===Id.count(0,Jd)%Od):Id:null});return Id}function Xa(sb){return v(Yb=>{Yb.setDate(Yb.getDate()-(Yb.getDay()+7-sb)%7);Yb.setHours(0,0,0,0)},(Yb,ic)=>{Yb.setDate(Yb.getDate()+7*ic)},(Yb,ic)=>(ic-Yb-6E4*(ic.getTimezoneOffset()-Yb.getTimezoneOffset()))/Ld)}function gc(sb){return v(Yb=>{Yb.setUTCDate(Yb.getUTCDate()-
(Yb.getUTCDay()+7-sb)%7);Yb.setUTCHours(0,0,0,0)},(Yb,ic)=>{Yb.setUTCDate(Yb.getUTCDate()+7*ic)},(Yb,ic)=>(ic-Yb)/Ld)}function wd(sb,Yb,ic,Oc,Id,Od){function Jd(He,ef,Mf){const Je=Math.abs(ef-He)/Mf,Xf=U(([,,Tg])=>Tg).right(fe,Je);if(Xf===fe.length)return sb.every(J(He/te,ef/te,Mf));if(0===Xf)return Vc.every(Math.max(J(He,ef,Mf),1));const [Bg,yh]=fe[Je/fe[Xf-1][2]<fe[Xf][2]/Je?Xf-1:Xf];return Bg.every(yh)}const fe=[[Te,1,1E3],[Te,5,5E3],[Te,15,15E3],[Te,30,3E4],[Od,1,6E4],[Od,5,3E5],[Od,15,9E5],[Od,
30,18E5],[Id,1,36E5],[Id,3,108E5],[Id,6,216E5],[Id,12,432E5],[Oc,1,864E5],[Oc,2,1728E5],[ic,1,Ld],[Yb,1,ge],[Yb,3,3*ge],[sb,1,te]];return[function(He,ef,Mf){const Je=ef<He;Je&&([He,ef]=[ef,He]);He=(Mf=Mf&&"function"===typeof Mf.range?Mf:Jd(He,ef,Mf))?Mf.range(He,+ef+1):[];return Je?He.reverse():He},Jd]}function Ce(sb){if(0<=sb.y&&100>sb.y){var Yb=new Date(-1,sb.m,sb.d,sb.H,sb.M,sb.S,sb.L);Yb.setFullYear(sb.y);return Yb}return new Date(sb.y,sb.m,sb.d,sb.H,sb.M,sb.S,sb.L)}function Hf(sb){if(0<=sb.y&&
100>sb.y){var Yb=new Date(Date.UTC(-1,sb.m,sb.d,sb.H,sb.M,sb.S,sb.L));Yb.setUTCFullYear(sb.y);return Yb}return new Date(Date.UTC(sb.y,sb.m,sb.d,sb.H,sb.M,sb.S,sb.L))}function zg(sb,Yb,ic){return{y:sb,m:Yb,d:ic,H:0,M:0,S:0,L:0}}function $g(sb){function Yb(bh,Nf){return function(ch){var Cg=[],Ki=-1,bk=0,ui=bh.length,Ci,fi;for(ch instanceof Date||(ch=new Date(+ch));++Ki<ui;)if(37===bh.charCodeAt(Ki)){Cg.push(bh.slice(bk,Ki));null!=(bk=Sk[Ci=bh.charAt(++Ki)])?Ci=bh.charAt(++Ki):bk="e"===Ci?" ":"0";if(fi=
Nf[Ci])Ci=fi(ch,bk);Cg.push(Ci);bk=Ki+1}Cg.push(bh.slice(bk,Ki));return Cg.join("")}}function ic(bh,Nf){return function(ch){var Cg=zg(1900,void 0,1);if(Oc(Cg,bh,ch+="",0)!=ch.length)return null;if("Q"in Cg)return new Date(Cg.Q);if("s"in Cg)return new Date(1E3*Cg.s+("L"in Cg?Cg.L:0));!Nf||"Z"in Cg||(Cg.Z=0);"p"in Cg&&(Cg.H=Cg.H%12+12*Cg.p);void 0===Cg.m&&(Cg.m="q"in Cg?Cg.q:0);if("V"in Cg){if(1>Cg.V||53<Cg.V)return null;"w"in Cg||(Cg.w=1);if("Z"in Cg){ch=Hf(zg(Cg.y,0,1));var Ki=ch.getUTCDay();ch=4<
Ki||0===Ki?Uj.ceil(ch):Uj(ch);ch=Eg.offset(ch,7*(Cg.V-1));Cg.y=ch.getUTCFullYear();Cg.m=ch.getUTCMonth();Cg.d=ch.getUTCDate()+(Cg.w+6)%7}else ch=Ce(zg(Cg.y,0,1)),Ki=ch.getDay(),ch=4<Ki||0===Ki?Ei.ceil(ch):Ei(ch),ch=gg.offset(ch,7*(Cg.V-1)),Cg.y=ch.getFullYear(),Cg.m=ch.getMonth(),Cg.d=ch.getDate()+(Cg.w+6)%7}else if("W"in Cg||"U"in Cg)"w"in Cg||(Cg.w="u"in Cg?Cg.u%7:"W"in Cg?1:0),Ki="Z"in Cg?Hf(zg(Cg.y,0,1)).getUTCDay():Ce(zg(Cg.y,0,1)).getDay(),Cg.m=0,Cg.d="W"in Cg?(Cg.w+6)%7+7*Cg.W-(Ki+5)%7:Cg.w+
7*Cg.U-(Ki+6)%7;return"Z"in Cg?(Cg.H+=Cg.Z/100|0,Cg.M+=Cg.Z%100,Hf(Cg)):Ce(Cg)}}function Oc(bh,Nf,ch,Cg){for(var Ki=0,bk=Nf.length,ui=ch.length,Ci;Ki<bk;){if(Cg>=ui)return-1;Ci=Nf.charCodeAt(Ki++);if(37===Ci){if(Ci=Nf.charAt(Ki++),Ci=dm[Ci in Sk?Nf.charAt(Ki++):Ci],!Ci||0>(Cg=Ci(bh,ch,Cg)))return-1}else if(Ci!=ch.charCodeAt(Cg++))return-1}return Cg}var Id=sb.dateTime,Od=sb.date,Jd=sb.time,fe=sb.periods,He=sb.days,ef=sb.shortDays,Mf=sb.months,Je=sb.shortMonths,Xf=Ug(fe),Bg=id(fe),yh=Ug(He),Tg=id(He),
Qh=Ug(ef),yi=id(ef),ki=Ug(Mf),th=id(Mf),Xk=Ug(Je),Uh=id(Je),Rh={a:function(bh){return ef[bh.getDay()]},A:function(bh){return He[bh.getDay()]},b:function(bh){return Je[bh.getMonth()]},B:function(bh){return Mf[bh.getMonth()]},c:null,d:Eb,e:Eb,f:eb,g:ye,G:Se,H:Vb,I:qc,j:Za,L:wb,m:qb,M:Qb,p:function(bh){return fe[+(12<=bh.getHours())]},q:function(bh){return 1+~~(bh.getMonth()/3)},Q:jh,s:Kg,S:zc,u:ad,U:Rd,V:nd,w:ee,W:Pd,x:null,X:null,y:se,Y:Oe,Z:Pe,"%":Nh},Ej={a:function(bh){return ef[bh.getUTCDay()]},
A:function(bh){return He[bh.getUTCDay()]},b:function(bh){return Je[bh.getUTCMonth()]},B:function(bh){return Mf[bh.getUTCMonth()]},c:null,d:Xd,e:Xd,f:Ue,g:of,G:Ii,H:Ze,I:Tf,j:Xe,L:Uf,m:uf,M:Yf,p:function(bh){return fe[+(12<=bh.getUTCHours())]},q:function(bh){return 1+~~(bh.getUTCMonth()/3)},Q:jh,s:Kg,S:yf,u:vf,U:ne,V:Hh,w:ag,W:ph,x:null,X:null,y:mh,Y:qh,Z:Fi,"%":Nh},dm={a:function(bh,Nf,ch){return(Nf=Qh.exec(Nf.slice(ch)))?(bh.w=yi.get(Nf[0].toLowerCase()),ch+Nf[0].length):-1},A:function(bh,Nf,ch){return(Nf=
yh.exec(Nf.slice(ch)))?(bh.w=Tg.get(Nf[0].toLowerCase()),ch+Nf[0].length):-1},b:function(bh,Nf,ch){return(Nf=Xk.exec(Nf.slice(ch)))?(bh.m=Uh.get(Nf[0].toLowerCase()),ch+Nf[0].length):-1},B:function(bh,Nf,ch){return(Nf=ki.exec(Nf.slice(ch)))?(bh.m=th.get(Nf[0].toLowerCase()),ch+Nf[0].length):-1},c:function(bh,Nf,ch){return Oc(bh,Id,Nf,ch)},d:Rf,e:Rf,f:ih,g:xg,G:wg,H:li,I:li,j:Gh,L:bi,m:$f,M:gh,p:function(bh,Nf,ch){return(Nf=Xf.exec(Nf.slice(ch)))?(bh.p=Bg.get(Nf[0].toLowerCase()),ch+Nf[0].length):
-1},q:cg,Q:Sa,s:lb,S:Lf,u:xe,U:dg,V:Sf,w:Bd,W:Kf,x:function(bh,Nf,ch){return Oc(bh,Od,Nf,ch)},X:function(bh,Nf,ch){return Oc(bh,Jd,Nf,ch)},y:xg,Y:wg,Z:dh,"%":ia};Rh.x=Yb(Od,Rh);Rh.X=Yb(Jd,Rh);Rh.c=Yb(Id,Rh);Ej.x=Yb(Od,Ej);Ej.X=Yb(Jd,Ej);Ej.c=Yb(Id,Ej);return{format:function(bh){var Nf=Yb(bh+="",Rh);Nf.toString=function(){return bh};return Nf},parse:function(bh){var Nf=ic(bh+="",!1);Nf.toString=function(){return bh};return Nf},utcFormat:function(bh){var Nf=Yb(bh+="",Ej);Nf.toString=function(){return bh};
return Nf},utcParse:function(bh){var Nf=ic(bh+="",!0);Nf.toString=function(){return bh};return Nf}}}function lg(sb,Yb,ic){var Oc=0>sb?"-":"";sb=(Oc?-sb:sb)+"";var Id=sb.length;return Oc+(Id<ic?Array(ic-Id+1).join(Yb)+sb:sb)}function Ag(sb){return sb.replace(mk,"\\$\x26")}function Ug(sb){return new RegExp("^(?:"+sb.map(Ag).join("|")+")","i")}function id(sb){return new Map(sb.map((Yb,ic)=>[Yb.toLowerCase(),ic]))}function Bd(sb,Yb,ic){return(Yb=Nj.exec(Yb.slice(ic,ic+1)))?(sb.w=+Yb[0],ic+Yb[0].length):
-1}function xe(sb,Yb,ic){return(Yb=Nj.exec(Yb.slice(ic,ic+1)))?(sb.u=+Yb[0],ic+Yb[0].length):-1}function dg(sb,Yb,ic){return(Yb=Nj.exec(Yb.slice(ic,ic+2)))?(sb.U=+Yb[0],ic+Yb[0].length):-1}function Sf(sb,Yb,ic){return(Yb=Nj.exec(Yb.slice(ic,ic+2)))?(sb.V=+Yb[0],ic+Yb[0].length):-1}function Kf(sb,Yb,ic){return(Yb=Nj.exec(Yb.slice(ic,ic+2)))?(sb.W=+Yb[0],ic+Yb[0].length):-1}function wg(sb,Yb,ic){return(Yb=Nj.exec(Yb.slice(ic,ic+4)))?(sb.y=+Yb[0],ic+Yb[0].length):-1}function xg(sb,Yb,ic){return(Yb=Nj.exec(Yb.slice(ic,
ic+2)))?(sb.y=+Yb[0]+(68<+Yb[0]?1900:2E3),ic+Yb[0].length):-1}function dh(sb,Yb,ic){return(Yb=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(Yb.slice(ic,ic+6)))?(sb.Z=Yb[1]?0:-(Yb[2]+(Yb[3]||"00")),ic+Yb[0].length):-1}function cg(sb,Yb,ic){return(Yb=Nj.exec(Yb.slice(ic,ic+1)))?(sb.q=3*Yb[0]-3,ic+Yb[0].length):-1}function $f(sb,Yb,ic){return(Yb=Nj.exec(Yb.slice(ic,ic+2)))?(sb.m=Yb[0]-1,ic+Yb[0].length):-1}function Rf(sb,Yb,ic){return(Yb=Nj.exec(Yb.slice(ic,ic+2)))?(sb.d=+Yb[0],ic+Yb[0].length):-1}function Gh(sb,
Yb,ic){return(Yb=Nj.exec(Yb.slice(ic,ic+3)))?(sb.m=0,sb.d=+Yb[0],ic+Yb[0].length):-1}function li(sb,Yb,ic){return(Yb=Nj.exec(Yb.slice(ic,ic+2)))?(sb.H=+Yb[0],ic+Yb[0].length):-1}function gh(sb,Yb,ic){return(Yb=Nj.exec(Yb.slice(ic,ic+2)))?(sb.M=+Yb[0],ic+Yb[0].length):-1}function Lf(sb,Yb,ic){return(Yb=Nj.exec(Yb.slice(ic,ic+2)))?(sb.S=+Yb[0],ic+Yb[0].length):-1}function bi(sb,Yb,ic){return(Yb=Nj.exec(Yb.slice(ic,ic+3)))?(sb.L=+Yb[0],ic+Yb[0].length):-1}function ih(sb,Yb,ic){return(Yb=Nj.exec(Yb.slice(ic,
ic+6)))?(sb.L=Math.floor(Yb[0]/1E3),ic+Yb[0].length):-1}function ia(sb,Yb,ic){return(sb=Pk.exec(Yb.slice(ic,ic+1)))?ic+sb[0].length:-1}function Sa(sb,Yb,ic){return(Yb=Nj.exec(Yb.slice(ic)))?(sb.Q=+Yb[0],ic+Yb[0].length):-1}function lb(sb,Yb,ic){return(Yb=Nj.exec(Yb.slice(ic)))?(sb.s=+Yb[0],ic+Yb[0].length):-1}function Eb(sb,Yb){return lg(sb.getDate(),Yb,2)}function Vb(sb,Yb){return lg(sb.getHours(),Yb,2)}function qc(sb,Yb){return lg(sb.getHours()%12||12,Yb,2)}function Za(sb,Yb){return lg(1+gg.count(sg(sb),
sb),Yb,3)}function wb(sb,Yb){return lg(sb.getMilliseconds(),Yb,3)}function eb(sb,Yb){return wb(sb,Yb)+"000"}function qb(sb,Yb){return lg(sb.getMonth()+1,Yb,2)}function Qb(sb,Yb){return lg(sb.getMinutes(),Yb,2)}function zc(sb,Yb){return lg(sb.getSeconds(),Yb,2)}function ad(sb){sb=sb.getDay();return 0===sb?7:sb}function Rd(sb,Yb){return lg(Sg.count(sg(sb)-1,sb),Yb,2)}function Md(sb){var Yb=sb.getDay();return 4<=Yb||0===Yb?$h(sb):$h.ceil(sb)}function nd(sb,Yb){sb=Md(sb);return lg($h.count(sg(sb),sb)+
(4===sg(sb).getDay()),Yb,2)}function ee(sb){return sb.getDay()}function Pd(sb,Yb){return lg(Ei.count(sg(sb)-1,sb),Yb,2)}function se(sb,Yb){return lg(sb.getFullYear()%100,Yb,2)}function ye(sb,Yb){sb=Md(sb);return lg(sb.getFullYear()%100,Yb,2)}function Oe(sb,Yb){return lg(sb.getFullYear()%1E4,Yb,4)}function Se(sb,Yb){var ic=sb.getDay();sb=4<=ic||0===ic?$h(sb):$h.ceil(sb);return lg(sb.getFullYear()%1E4,Yb,4)}function Pe(sb){sb=sb.getTimezoneOffset();return(0<sb?"-":(sb*=-1,"+"))+lg(sb/60|0,"0",2)+lg(sb%
60,"0",2)}function Xd(sb,Yb){return lg(sb.getUTCDate(),Yb,2)}function Ze(sb,Yb){return lg(sb.getUTCHours(),Yb,2)}function Tf(sb,Yb){return lg(sb.getUTCHours()%12||12,Yb,2)}function Xe(sb,Yb){return lg(1+Eg.count(Bh(sb),sb),Yb,3)}function Uf(sb,Yb){return lg(sb.getUTCMilliseconds(),Yb,3)}function Ue(sb,Yb){return Uf(sb,Yb)+"000"}function uf(sb,Yb){return lg(sb.getUTCMonth()+1,Yb,2)}function Yf(sb,Yb){return lg(sb.getUTCMinutes(),Yb,2)}function yf(sb,Yb){return lg(sb.getUTCSeconds(),Yb,2)}function vf(sb){sb=
sb.getUTCDay();return 0===sb?7:sb}function ne(sb,Yb){return lg(Zh.count(Bh(sb)-1,sb),Yb,2)}function wf(sb){var Yb=sb.getUTCDay();return 4<=Yb||0===Yb?si(sb):si.ceil(sb)}function Hh(sb,Yb){sb=wf(sb);return lg(si.count(Bh(sb),sb)+(4===Bh(sb).getUTCDay()),Yb,2)}function ag(sb){return sb.getUTCDay()}function ph(sb,Yb){return lg(Uj.count(Bh(sb)-1,sb),Yb,2)}function mh(sb,Yb){return lg(sb.getUTCFullYear()%100,Yb,2)}function of(sb,Yb){sb=wf(sb);return lg(sb.getUTCFullYear()%100,Yb,2)}function qh(sb,Yb){return lg(sb.getUTCFullYear()%
1E4,Yb,4)}function Ii(sb,Yb){var ic=sb.getUTCDay();sb=4<=ic||0===ic?si(sb):si.ceil(sb);return lg(sb.getUTCFullYear()%1E4,Yb,4)}function Fi(){return"+0000"}function Nh(){return"%"}function jh(sb){return+sb}function Kg(sb){return Math.floor(+sb/1E3)}function Cf(sb){return new Date(sb)}function nh(sb){return sb instanceof Date?+sb:+new Date(+sb)}function Ui(sb,Yb,ic,Oc,Id,Od,Jd,fe,He,ef){function Mf(Rh){return(He(Rh)<Rh?yh:fe(Rh)<Rh?Tg:Jd(Rh)<Rh?Qh:Od(Rh)<Rh?yi:Oc(Rh)<Rh?Id(Rh)<Rh?ki:th:ic(Rh)<Rh?Xk:
Uh)(Rh)}var Je=Wd()(od,od),Xf=Je.invert,Bg=Je.domain,yh=ef(".%L"),Tg=ef(":%S"),Qh=ef("%I:%M"),yi=ef("%I %p"),ki=ef("%a %d"),th=ef("%b %d"),Xk=ef("%B"),Uh=ef("%Y");Je.invert=function(Rh){return new Date(Xf(Rh))};Je.domain=function(Rh){return arguments.length?Bg(Array.from(Rh,nh)):Bg().map(Cf)};Je.ticks=function(Rh){var Ej=Bg();return sb(Ej[0],Ej[Ej.length-1],null==Rh?10:Rh)};Je.tickFormat=function(Rh,Ej){return null==Ej?Mf:ef(Ej)};Je.nice=function(Rh){var Ej=Bg();Rh&&"function"===typeof Rh.range||
(Rh=Yb(Ej[0],Ej[Ej.length-1],null==Rh?10:Rh));return Rh?Bg(Nd(Ej,Rh)):Je};Je.copy=function(){return re(Je,Ui(sb,Yb,ic,Oc,Id,Od,Jd,fe,He,ef))};return Je}function Gi(){function sb(Je){return null==Je||isNaN(Je=+Je)?Mf:He(0===Jd?.5:(Je=(fe(Je)-Id)*Jd,ef?Math.max(0,Math.min(1,Je)):Je))}function Yb(Je){return function(Xf){var Bg,yh;return arguments.length?([Bg,yh]=Xf,He=Je(Bg,yh),sb):[He(0),He(1)]}}var ic=0,Oc=1,Id,Od,Jd,fe,He=od,ef=!1,Mf;sb.domain=function(Je){return arguments.length?([ic,Oc]=Je,Id=fe(ic=
+ic),Od=fe(Oc=+Oc),Jd=Id===Od?0:1/(Od-Id),sb):[ic,Oc]};sb.clamp=function(Je){return arguments.length?(ef=!!Je,sb):ef};sb.interpolator=function(Je){return arguments.length?(He=Je,sb):He};sb.range=Yb(fd);sb.rangeRound=Yb(ed);sb.unknown=function(Je){return arguments.length?(Mf=Je,sb):Mf};return function(Je){fe=Je;Id=Je(ic);Od=Je(Oc);Jd=Id===Od?0:1/(Od-Id);return sb}}function oh(sb,Yb){return Yb.domain(sb.domain()).interpolator(sb.interpolator()).clamp(sb.clamp()).unknown(sb.unknown())}function $d(){var sb=
Uc(Gi()(od));sb.copy=function(){return oh(sb,$d())};return fa.apply(sb,arguments)}function ug(){var sb=lf(Gi()).domain([1,10]);sb.copy=function(){return oh(sb,ug()).base(sb.base())};return fa.apply(sb,arguments)}function nj(){var sb=fh(Gi());sb.copy=function(){return oh(sb,nj()).constant(sb.constant())};return fa.apply(sb,arguments)}function eg(){var sb=Yh(Gi());sb.copy=function(){return oh(sb,eg()).exponent(sb.exponent())};return fa.apply(sb,arguments)}function Zd(){function sb(Tg){return isNaN(Tg=
+Tg)?yh:(Tg=.5+((Tg=+Xf(Tg))-fe)*(Od*Tg<Od*fe?ef:Mf),Je(Bg?Math.max(0,Math.min(1,Tg)):Tg))}function Yb(Tg){return function(Qh){var yi,ki,th;return arguments.length?([yi,ki,th]=Qh,Je=Ec(Tg,[yi,ki,th]),sb):[Je(0),Je(.5),Je(1)]}}var ic=0,Oc=.5,Id=1,Od=1,Jd,fe,He,ef,Mf,Je=od,Xf,Bg=!1,yh;sb.domain=function(Tg){return arguments.length?([ic,Oc,Id]=Tg,Jd=Xf(ic=+ic),fe=Xf(Oc=+Oc),He=Xf(Id=+Id),ef=Jd===fe?0:.5/(fe-Jd),Mf=fe===He?0:.5/(He-fe),Od=fe<Jd?-1:1,sb):[ic,Oc,Id]};sb.clamp=function(Tg){return arguments.length?
(Bg=!!Tg,sb):Bg};sb.interpolator=function(Tg){return arguments.length?(Je=Tg,sb):Je};sb.range=Yb(fd);sb.rangeRound=Yb(ed);sb.unknown=function(Tg){return arguments.length?(yh=Tg,sb):yh};return function(Tg){Xf=Tg;Jd=Tg(ic);fe=Tg(Oc);He=Tg(Id);ef=Jd===fe?0:.5/(fe-Jd);Mf=fe===He?0:.5/(He-fe);Od=fe<Jd?-1:1;return sb}}function ve(){var sb=Uc(Zd()(od));sb.copy=function(){return oh(sb,ve())};return fa.apply(sb,arguments)}function Sb(){var sb=lf(Zd()).domain([.1,1,10]);sb.copy=function(){return oh(sb,Sb()).base(sb.base())};
return fa.apply(sb,arguments)}function Qc(){var sb=fh(Zd());sb.copy=function(){return oh(sb,Qc()).constant(sb.constant())};return fa.apply(sb,arguments)}function ud(){var sb=Yh(Zd());sb.copy=function(){return oh(sb,ud()).exponent(sb.exponent())};return fa.apply(sb,arguments)}function oe(){function sb(){var Je=ic().length;const Xf=Id[1]<Id[0],Bg=Id[1-Xf],yh=x(Je,He,ef);let Tg=Id[Xf-0];Od=(Bg-Tg)/(yh||1);fe&&(Od=Math.floor(Od));Tg+=(Bg-Tg-Od*(Je-He))*Mf;Jd=Od*(1-He);fe&&(Tg=Math.round(Tg),Jd=Math.round(Jd));
Je=ba(Je).map(Qh=>Tg+Od*Qh);return Oc(Xf?Je.reverse():Je)}const Yb=wa().unknown(void 0),ic=Yb.domain,Oc=Yb.range;let Id=[0,1],Od,Jd,fe=!1,He=0,ef=0,Mf=.5;delete Yb.unknown;Yb.domain=function(Je){return arguments.length?(ic(Je),sb()):ic()};Yb.range=function(Je){return arguments.length?(Id=[+Je[0],+Je[1]],sb()):Id.slice()};Yb.rangeRound=function(Je){Id=[+Je[0],+Je[1]];fe=!0;return sb()};Yb.bandwidth=function(){return Jd};Yb.step=function(){return Od};Yb.round=function(Je){return arguments.length?(fe=
!!Je,sb()):fe};Yb.padding=function(Je){return arguments.length?(He=ef=Math.max(0,Math.min(1,Je)),sb()):He};Yb.paddingInner=function(Je){return arguments.length?(He=Math.max(0,Math.min(1,Je)),sb()):He};Yb.paddingOuter=function(Je){return arguments.length?(ef=Math.max(0,Math.min(1,Je)),sb()):ef};Yb.align=function(Je){return arguments.length?(Mf=Math.max(0,Math.min(1,Je)),sb()):Mf};Yb.invertRange=function(Je){if(null!=Je[0]&&null!=Je[1]){var Xf=Id[1]<Id[0],Bg=Xf?Oc().reverse():Oc(),yh=Bg.length-1,Tg=
+Je[0],Qh=+Je[1];if(Tg===Tg&&Qh===Qh){if(Qh<Tg){var yi=Tg;Tg=Qh;Qh=yi}if(!(Qh<Bg[0]||Tg>Id[1-Xf]))return Je=Math.max(0,ig(Bg,Tg)-1),Qh=Tg===Qh?Je:ig(Bg,Qh)-1,Tg-Bg[Je]>Jd+1E-10&&++Je,Xf&&(yi=Je,Je=yh-Qh,Qh=yh-yi),Je>Qh?void 0:ic().slice(Je,Qh+1)}}};Yb.invert=function(Je){return(Je=Yb.invertRange([Je,Je]))?Je[0]:Je};Yb.copy=function(){return oe().domain(ic()).range(Id).round(fe).paddingInner(He).paddingOuter(ef).align(Mf)};return sb()}function ue(sb){const Yb=sb.copy;sb.padding=sb.paddingOuter;delete sb.paddingInner;
sb.copy=function(){return ue(Yb())};return sb}function Of(){function sb(Oc){return null==Oc||Oc!==Oc?void 0:ic[(Dh(Yb,Oc)-1)%ic.length]}let Yb=[],ic=[];sb.domain=function(Oc){return arguments.length?(Yb=Qj.call(Oc,w.toNumber),sb):Yb.slice()};sb.range=function(Oc){return arguments.length?(ic=Rl.call(Oc),sb):ic.slice()};sb.tickFormat=function(Oc,Id){return lc(Yb[0],w.peek(Yb),null==Oc?10:Oc,Id)};sb.copy=function(){return Of().domain(sb.domain()).range(sb.range())};return sb}function kf(sb){sb[ii]=!0;
return sb}function fg(sb,Yb,ic){const Oc=function(){const Id=Yb();Id.invertRange||(Id.invertRange=Id.invert?I(Id):Id.invertExtent?B(Id):void 0);Id.type=sb;return kf(Id)};Oc.metadata=w.toSet(w.array(ic));return Oc}function Zf(sb,Yb,ic){return 1<arguments.length?(cm.set(sb,fg(sb,Yb,ic)),this):qg(sb)?cm.get(sb):void 0}function qg(sb){return cm.has(sb)}function lh(sb,Yb){return(sb=cm.get(sb))&&sb.metadata[Yb]}function pi(sb){return lh(sb,"discrete")}function bj(sb){return lh(sb,"discretizing")}function Sh(sb){return lh(sb,
"log")}function Eh(sb){return lh(sb,"temporal")}function cj(sb,Yb,ic){return Ec(ji(Yb||"rgb",ic),sb)}function ji(sb,Yb){sb=uk[ng(sb)];return null!=Yb&&sb&&sb.gamma?sb.gamma(Yb):sb}function ng(sb){return"interpolate"+sb.toLowerCase().split("-").map(Yb=>Yb[0].toUpperCase()+Yb.slice(1)).join("")}function kh(sb){const Yb=sb.length/6|0,ic=Array(Yb);for(let Oc=0;Oc<Yb;)ic[Oc]="#"+sb.slice(6*Oc,6*++Oc);return ic}function T(sb,Yb){for(const ic in sb)Oa(ic,Yb(sb[ic]))}function Oa(sb,Yb){sb=sb&&sb.toLowerCase();
return 1<arguments.length?(Lk[sb]=Yb,this):Lk[sb]}function zb(sb,Yb,ic){var Oc=sb.range();let Id=Oc[0],Od=w.peek(Oc);Oc=ml;Id>Od&&(Oc=Od,Od=Id,Id=Oc,Oc=Tj);Id=Math.floor(Id);Od=Math.ceil(Od);Yb=Yb.map(Jd=>[Jd,sb(Jd)]).filter(Jd=>Id<=Jd[1]&&Jd[1]<=Od).sort(Oc).map(Jd=>Jd[0]);if(0<ic&&1<Yb.length){for(Oc=[Yb[0],w.peek(Yb)];Yb.length>ic&&3<=Yb.length;)Yb=Yb.filter((Jd,fe)=>!(fe%2));3>Yb.length&&(Yb=Oc)}return Yb}function Ac(sb,Yb){return sb.bins?zb(sb,sb.bins):sb.ticks?sb.ticks(Yb):sb.domain()}function jd(sb,
Yb,ic,Oc,Id,Od){const Jd=Yb.type;let fe=uj;if("time"===Jd||"time"===Id)fe=sb.timeFormat(Oc);else if("utc"===Jd||"utc"===Id)fe=sb.utcFormat(Oc);else if(Sh(Jd)){const He=sb.formatFloat(Oc);if(Od||Yb.bins)fe=He;else{const ef=je(Yb,ic,!1);fe=Mf=>ef(Mf)?He(Mf):""}}else Yb.tickFormat?(Yb=Yb.domain(),fe=sb.formatSpan(Yb[0],Yb[Yb.length-1],ic,Oc)):Oc&&(fe=sb.format(Oc));return fe}function je(sb,Yb,ic){const Oc=Ac(sb,Yb),Id=sb.base(),Od=Math.log(Id),Jd=Math.max(1,Id*Yb/Oc.length);sb=fe=>{fe/=Math.pow(Id,Math.round(Math.log(fe)/
Od));fe*Id<Id-.5&&(fe*=Id);return fe<=Jd};return ic?Oc.filter(sb):sb}function Ne(sb,Yb){sb.bins?(sb=sb.bins,Yb=sb.slice(0,-1),Yb.max=w.peek(sb),sb=Yb):"log"===sb.type?sb=je(sb,Yb,!0):Ek[sb.type]?(sb=sb[Ek[sb.type]](),sb=[-Infinity].concat(sb),sb.max=Infinity):sb=Ac(sb,Yb);return sb}function ff(sb,Yb,ic,Oc,Id,Od,Jd){if(Mk[Yb.type]&&"time"!==Od&&"utc"!==Od){ic=Yb[Mk[Yb.type]]();Od=ic.length;Jd=1<Od?ic[1]-ic[0]:ic[0];let fe;for(fe=1;fe<Od;++fe)Jd=Math.min(Jd,ic[fe]-ic[fe-1]);sb=sb.formatSpan(0,Jd,30,
Id)}else sb=jd(sb,Yb,ic,Id,Od,Jd);return"symbol"===Oc&&(Ek[Yb.type]||Yb.bins)?Nk(sb):"discrete"===Oc?nl(sb):zl(sb)}const ig=U(N).right;U(V).center;var Dh=ig;class Di extends Map{constructor(sb,Yb=Y){super();Object.defineProperties(this,{_intern:{value:new Map},_key:{value:Yb}});if(null!=sb)for(const [ic,Oc]of sb)this.set(ic,Oc)}get(sb){return super.get(P(this,sb))}has(sb){return super.has(P(this,sb))}set(sb,Yb){return super.set(z(this,sb),Yb)}delete(sb){return super.delete(G(this,sb))}}const Si=Math.sqrt(50),
pl=Math.sqrt(10),Aj=Math.sqrt(2),Hj=Symbol("implicit");var ck=1/.7,Ck=/^#([0-9a-f]{3,8})$/,Ri=RegExp("^rgb\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*\\)$"),jk=RegExp("^rgb\\(\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*\\)$"),Gj=RegExp("^rgba\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$"),Ik=RegExp("^rgba\\(\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$"),
wk=RegExp("^hsl\\(\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*\\)$"),$k=RegExp("^hsla\\(\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$"),ci={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,
bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,
darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,
lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,
mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,
plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,
yellow:16776960,yellowgreen:10145074};ta(ha,oa,{copy(sb){return Object.assign(new this.constructor,this,sb)},displayable(){return this.rgb().displayable()},hex:ka,formatHex:ka,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Ya(this).formatHsl()},formatRgb:H,toString:H});ta(Ia,la,aa(ha,{brighter(sb){sb=null==sb?ck:Math.pow(ck,sb);return new Ia(this.r*sb,this.g*sb,this.b*sb,this.opacity)},darker(sb){sb=null==sb?.7:Math.pow(.7,sb);return new Ia(this.r*sb,this.g*sb,this.b*
sb,this.opacity)},rgb(){return this},clamp(){return new Ia(db(this.r),db(this.g),db(this.b),ab(this.opacity))},displayable(){return-.5<=this.r&&255.5>this.r&&-.5<=this.g&&255.5>this.g&&-.5<=this.b&&255.5>this.b&&0<=this.opacity&&1>=this.opacity},hex:Ma,formatHex:Ma,formatHex8:function(){return`#${ub(this.r)}${ub(this.g)}${ub(this.b)}${ub(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Ta,toString:Ta}));ta(Pa,Va,aa(ha,{brighter(sb){sb=null==sb?ck:Math.pow(ck,sb);return new Pa(this.h,this.s,
this.l*sb,this.opacity)},darker(sb){sb=null==sb?.7:Math.pow(.7,sb);return new Pa(this.h,this.s,this.l*sb,this.opacity)},rgb(){var sb=this.h%360+360*(0>this.h),Yb=isNaN(sb)||isNaN(this.s)?0:this.s,ic=this.l;Yb=ic+(.5>ic?ic:1-ic)*Yb;ic=2*ic-Yb;return new Ia(Aa(240<=sb?sb-240:sb+120,ic,Yb),Aa(sb,ic,Yb),Aa(120>sb?sb+240:sb-120,ic,Yb),this.opacity)},clamp(){return new Pa(Ha(this.h),Ca(this.s),Ca(this.l),ab(this.opacity))},displayable(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&
0<=this.opacity&&1>=this.opacity},formatHsl(){const sb=ab(this.opacity);return`${1===sb?"hsl(":"hsla("}${Ha(this.h)}, ${100*Ca(this.s)}%, ${100*Ca(this.l)}%${1===sb?")":`, ${sb})`}`}}));const Ng=Math.PI/180,sk=180/Math.PI,Ji=4/29,Fg=6/29,Vi=3*Fg*Fg,Yk=Fg*Fg*Fg;ta(cb,Ka,aa(ha,{brighter(sb){return new cb(this.l+18*(null==sb?1:sb),this.a,this.b,this.opacity)},darker(sb){return new cb(this.l-18*(null==sb?1:sb),this.a,this.b,this.opacity)},rgb(){var sb=(this.l+16)/116,Yb=isNaN(this.a)?sb:sb+this.a/500,
ic=isNaN(this.b)?sb:sb-this.b/200;Yb=.96422*La(Yb);sb=1*La(sb);ic=.82521*La(ic);return new Ia(Bb(3.1338561*Yb-1.6168667*sb-.4906146*ic),Bb(-.9787684*Yb+1.9161415*sb+.033454*ic),Bb(.0719453*Yb-.2289914*sb+1.4052427*ic),this.opacity)}}));ta(Ic,sc,aa(ha,{brighter(sb){return new Ic(this.h,this.c,this.l+18*(null==sb?1:sb),this.opacity)},darker(sb){return new Ic(this.h,this.c,this.l-18*(null==sb?1:sb),this.opacity)},rgb(){return Xb(this).rgb()}}));var jl=1.78277*-.29227-.1347134789;ta(Kc,Wb,aa(ha,{brighter(sb){sb=
null==sb?ck:Math.pow(ck,sb);return new Kc(this.h,this.s,this.l*sb,this.opacity)},darker(sb){sb=null==sb?.7:Math.pow(.7,sb);return new Kc(this.h,this.s,this.l*sb,this.opacity)},rgb(){var sb=isNaN(this.h)?0:(this.h+120)*Ng,Yb=+this.l,ic=isNaN(this.s)?0:this.s*Yb*(1-Yb),Oc=Math.cos(sb);sb=Math.sin(sb);return new Ia(255*(Yb+ic*(-.14861*Oc+1.78277*sb)),255*(Yb+ic*(-.29227*Oc+-.90649*sb)),255*(Yb+1.97294*ic*Oc),this.opacity)}}));var oj=sb=>()=>sb,xk=function ic(Yb){function Oc(Od,Jd){var fe=Id((Od=la(Od)).r,
(Jd=la(Jd)).r),He=Id(Od.g,Jd.g),ef=Id(Od.b,Jd.b),Mf=nc(Od.opacity,Jd.opacity);return function(Je){Od.r=fe(Je);Od.g=He(Je);Od.b=ef(Je);Od.opacity=Mf(Je);return Od+""}}var Id=Pb(Yb);Oc.gamma=ic;return Oc}(1),Uk=rc(mc),ql=rc(Ub),rl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Jk=new RegExp(rl.source,"g"),Kk=180/Math.PI,Yl={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},dk,vh=yc(function(Yb){Yb=new ("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(Yb+"");return Yb.isIdentity?Yl:
bc(Yb.a,Yb.b,Yb.c,Yb.d,Yb.e,Yb.f)},"px, ","px)","deg)"),Sl=yc(function(Yb){if(null==Yb)return Yl;dk||(dk=document.createElementNS("http://www.w3.org/2000/svg","g"));dk.setAttribute("transform",Yb);if(!(Yb=dk.transform.baseVal.consolidate()))return Yl;Yb=Yb.matrix;return bc(Yb.a,Yb.b,Yb.c,Yb.d,Yb.e,Yb.f)},", ",")",")"),Kh=function Od(ic,Oc,Id){function Jd(fe,He){var ef=fe[0],Mf=fe[1],Je=fe[2];fe=He[2];var Xf=He[0]-ef,Bg=He[1]-Mf,yh=Xf*Xf+Bg*Bg;if(1E-12>yh){var Tg=Math.log(fe/Je)/ic;fe=function(ki){return[ef+
ki*Xf,Mf+ki*Bg,Je*Math.exp(ic*ki*Tg)]}}else{var Qh=Math.sqrt(yh);He=(fe*fe-Je*Je+Id*yh)/(2*Je*Oc*Qh);fe=(fe*fe-Je*Je-Id*yh)/(2*fe*Oc*Qh);var yi=Math.log(Math.sqrt(He*He+1)-He);Tg=(Math.log(Math.sqrt(fe*fe+1)-fe)-yi)/ic;fe=function(ki){ki*=Tg;var th=$c(yi),Xk=ic*ki+yi;var Uh=((Xk=Math.exp(2*Xk))-1)/(Xk+1);var Rh=yi;Xk=((Rh=Math.exp(Rh))-1/Rh)/2;Uh=Je/(Oc*Qh)*(th*Uh-Xk);return[ef+Uh*Xf,Mf+Uh*Bg,Je*th/$c(ic*ki+yi)]}}fe.duration=1E3*Tg*ic/Math.SQRT2;return fe}Jd.rho=function(fe){fe=Math.max(.001,+fe);
var He=fe*fe;return Od(fe,He,He*He)};return Jd}(Math.SQRT2,2,4),og=cc(Mc),zj=cc(nc),gk=tb(Mc),qk=tb(nc),al=tc(Mc),Tk=tc(nc),uk=Object.freeze({__proto__:null,interpolate:fd,interpolateArray:function(ic,Oc){return(Jc(Oc)?Hb:kc)(ic,Oc)},interpolateBasis:mc,interpolateBasisClosed:Ub,interpolateCubehelix:al,interpolateCubehelixLong:Tk,interpolateDate:Ab,interpolateDiscrete:function(ic){var Oc=ic.length;return function(Id){return ic[Math.max(0,Math.min(Oc-1,Math.floor(Id*Oc)))]}},interpolateHcl:gk,interpolateHclLong:qk,
interpolateHsl:og,interpolateHslLong:zj,interpolateHue:function(ic,Oc){var Id=Mc(+ic,+Oc);return function(Od){Od=Id(Od);return Od-360*Math.floor(Od/360)}},interpolateLab:function(ic,Oc){var Id=nc((ic=Ka(ic)).l,(Oc=Ka(Oc)).l),Od=nc(ic.a,Oc.a),Jd=nc(ic.b,Oc.b),fe=nc(ic.opacity,Oc.opacity);return function(He){ic.l=Id(He);ic.a=Od(He);ic.b=Jd(He);ic.opacity=fe(He);return ic+""}},interpolateNumber:md,interpolateNumberArray:Hb,interpolateObject:yd,interpolateRgb:xk,interpolateRgbBasis:Uk,interpolateRgbBasisClosed:ql,
interpolateRound:ed,interpolateString:Qd,interpolateTransformCss:vh,interpolateTransformSvg:Sl,interpolateZoom:Kh,piecewise:Ec,quantize:function(ic,Oc){for(var Id=Array(Oc),Od=0;Od<Oc;++Od)Id[Od]=ic(Od/(Oc-1));return Id}}),Kl=[0,1],Rb=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;rf.prototype=Ff.prototype;Ff.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,this.width|0))+(this.comma?",":
"")+(void 0===this.precision?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};var Bc,gd={"%":(ic,Oc)=>(100*ic).toFixed(Oc),b:ic=>Math.round(ic).toString(2),c:ic=>ic+"",d:function(ic){return 1E21<=Math.abs(ic=Math.round(ic))?ic.toLocaleString("en").replace(/,/g,""):ic.toString(10)},e:(ic,Oc)=>ic.toExponential(Oc),f:(ic,Oc)=>ic.toFixed(Oc),g:(ic,Oc)=>ic.toPrecision(Oc),o:ic=>Math.round(ic).toString(8),p:(ic,Oc)=>pg(100*ic,Oc),r:pg,s:function(ic,Oc){var Id=Fe(ic,Oc);if(!Id)return ic+
"";var Od=Id[0];Id=Id[1];Id=Id-(Bc=3*Math.max(-8,Math.min(8,Math.floor(Id/3))))+1;var Jd=Od.length;return Id===Jd?Od:Id>Jd?Od+Array(Id-Jd+1).join("0"):0<Id?Od.slice(0,Id)+"."+Od.slice(Id):"0."+Array(1-Id).join("0")+Fe(ic,Math.max(0,Oc+Id-1))[0]},X:ic=>Math.round(ic).toString(16).toUpperCase(),x:ic=>Math.round(ic).toString(16)},zd=Array.prototype.map,ce="y z a f p n µ m  k M G T P E Z Y".split(" "),ke,De,Fb;(function(ic){ke=Jb(ic);De=ke.format;Fb=ke.formatPrefix;return ke})({thousands:",",grouping:[3],
currency:["$",""]});const dc=new Date,Dc=new Date,Vc=v(()=>{},(ic,Oc)=>{ic.setTime(+ic+Oc)},(ic,Oc)=>Oc-ic);Vc.every=ic=>{ic=Math.floor(ic);return isFinite(ic)&&0<ic?1<ic?v(Oc=>{Oc.setTime(Math.floor(Oc/ic)*ic)},(Oc,Id)=>{Oc.setTime(+Oc+Id*ic)},(Oc,Id)=>(Id-Oc)/ic):Vc:null};Vc.range;const Ld=6048E5,ge=2592E6,te=31536E6,Te=v(ic=>{ic.setTime(ic-ic.getMilliseconds())},(ic,Oc)=>{ic.setTime(+ic+1E3*Oc)},(ic,Oc)=>(Oc-ic)/1E3,ic=>ic.getUTCSeconds());Te.range;const pe=v(ic=>{ic.setTime(ic-ic.getMilliseconds()-
1E3*ic.getSeconds())},(ic,Oc)=>{ic.setTime(+ic+6E4*Oc)},(ic,Oc)=>(Oc-ic)/6E4,ic=>ic.getMinutes());pe.range;const Qf=v(ic=>{ic.setUTCSeconds(0,0)},(ic,Oc)=>{ic.setTime(+ic+6E4*Oc)},(ic,Oc)=>(Oc-ic)/6E4,ic=>ic.getUTCMinutes());Qf.range;const jf=v(ic=>{ic.setTime(ic-ic.getMilliseconds()-1E3*ic.getSeconds()-6E4*ic.getMinutes())},(ic,Oc)=>{ic.setTime(+ic+36E5*Oc)},(ic,Oc)=>(Oc-ic)/36E5,ic=>ic.getHours());jf.range;const Dg=v(ic=>{ic.setUTCMinutes(0,0,0)},(ic,Oc)=>{ic.setTime(+ic+36E5*Oc)},(ic,Oc)=>(Oc-
ic)/36E5,ic=>ic.getUTCHours());Dg.range;const gg=v(ic=>ic.setHours(0,0,0,0),(ic,Oc)=>ic.setDate(ic.getDate()+Oc),(ic,Oc)=>(Oc-ic-6E4*(Oc.getTimezoneOffset()-ic.getTimezoneOffset()))/864E5,ic=>ic.getDate()-1);gg.range;const Eg=v(ic=>{ic.setUTCHours(0,0,0,0)},(ic,Oc)=>{ic.setUTCDate(ic.getUTCDate()+Oc)},(ic,Oc)=>(Oc-ic)/864E5,ic=>ic.getUTCDate()-1);Eg.range;const Ph=v(ic=>{ic.setUTCHours(0,0,0,0)},(ic,Oc)=>{ic.setUTCDate(ic.getUTCDate()+Oc)},(ic,Oc)=>(Oc-ic)/864E5,ic=>Math.floor(ic/864E5));Ph.range;
const Sg=Xa(0),Ei=Xa(1),Vj=Xa(2),Mh=Xa(3),$h=Xa(4),ll=Xa(5),sh=Xa(6);Sg.range;Ei.range;Vj.range;Mh.range;$h.range;ll.range;sh.range;const Zh=gc(0),Uj=gc(1),Rj=gc(2),Mi=gc(3),si=gc(4),ai=gc(5),Wj=gc(6);Zh.range;Uj.range;Rj.range;Mi.range;si.range;ai.range;Wj.range;const Jj=v(ic=>{ic.setDate(1);ic.setHours(0,0,0,0)},(ic,Oc)=>{ic.setMonth(ic.getMonth()+Oc)},(ic,Oc)=>Oc.getMonth()-ic.getMonth()+12*(Oc.getFullYear()-ic.getFullYear()),ic=>ic.getMonth());Jj.range;const xh=v(ic=>{ic.setUTCDate(1);ic.setUTCHours(0,
0,0,0)},(ic,Oc)=>{ic.setUTCMonth(ic.getUTCMonth()+Oc)},(ic,Oc)=>Oc.getUTCMonth()-ic.getUTCMonth()+12*(Oc.getUTCFullYear()-ic.getUTCFullYear()),ic=>ic.getUTCMonth());xh.range;const sg=v(ic=>{ic.setMonth(0,1);ic.setHours(0,0,0,0)},(ic,Oc)=>{ic.setFullYear(ic.getFullYear()+Oc)},(ic,Oc)=>Oc.getFullYear()-ic.getFullYear(),ic=>ic.getFullYear());sg.every=ic=>isFinite(ic=Math.floor(ic))&&0<ic?v(Oc=>{Oc.setFullYear(Math.floor(Oc.getFullYear()/ic)*ic);Oc.setMonth(0,1);Oc.setHours(0,0,0,0)},(Oc,Id)=>{Oc.setFullYear(Oc.getFullYear()+
Id*ic)}):null;sg.range;const Bh=v(ic=>{ic.setUTCMonth(0,1);ic.setUTCHours(0,0,0,0)},(ic,Oc)=>{ic.setUTCFullYear(ic.getUTCFullYear()+Oc)},(ic,Oc)=>Oc.getUTCFullYear()-ic.getUTCFullYear(),ic=>ic.getUTCFullYear());Bh.every=ic=>isFinite(ic=Math.floor(ic))&&0<ic?v(Oc=>{Oc.setUTCFullYear(Math.floor(Oc.getUTCFullYear()/ic)*ic);Oc.setUTCMonth(0,1);Oc.setUTCHours(0,0,0,0)},(Oc,Id)=>{Oc.setUTCFullYear(Oc.getUTCFullYear()+Id*ic)}):null;Bh.range;const [ti,Zi]=wd(Bh,xh,Zh,Ph,Dg,Qf),[xj,Wl]=wd(sg,Jj,Sg,gg,jf,pe);
var Sk={"-":"",_:" ",0:"0"},Nj=/^\s*\d+/,Pk=/^%/,mk=/[\\^$*+?|[\]().{}]/g,Ni,vl,Bl;(function(ic){Ni=$g(ic);vl=Ni.format;Ni.parse;Bl=Ni.utcFormat;Ni.utcParse;return Ni})({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});
var Qj=Array.prototype.map;const Rl=Array.prototype.slice,cm=new Map,ii=Symbol("vega_scale");Zf("identity",rd);Zf("linear",Zc,"continuous");Zf("log",Lg,["continuous","log"]);Zf("pow",wh,"continuous");Zf("sqrt",function(){return wh.apply(null,arguments).exponent(.5)},"continuous");Zf("symlog",eh,"continuous");Zf("time",function(){return O.apply(Ui(xj,Wl,sg,Jj,Sg,gg,jf,pe,Te,vl).domain([new Date(2E3,0,1),new Date(2E3,0,2)]),arguments)},["continuous","temporal"]);Zf("utc",function(){return O.apply(Ui(ti,
Zi,Bh,xh,Zh,Eg,Dg,Qf,Te,Bl).domain([Date.UTC(2E3,0,1),Date.UTC(2E3,0,2)]),arguments)},["continuous","temporal"]);Zf("sequential",$d,["continuous","interpolating"]);Zf("sequential-linear",$d,["continuous","interpolating"]);Zf("sequential-log",ug,["continuous","interpolating","log"]);Zf("sequential-pow",eg,["continuous","interpolating"]);Zf("sequential-sqrt",function(){return eg.apply(null,arguments).exponent(.5)},["continuous","interpolating"]);Zf("sequential-symlog",nj,["continuous","interpolating"]);
Zf("diverging-linear",ve,["continuous","interpolating"]);Zf("diverging-log",Sb,["continuous","interpolating","log"]);Zf("diverging-pow",ud,["continuous","interpolating"]);Zf("diverging-sqrt",function(){return ud.apply(null,arguments).exponent(.5)},["continuous","interpolating"]);Zf("diverging-symlog",Qc,["continuous","interpolating"]);Zf("quantile",Wc,["discretizing","quantile"]);Zf("quantize",ib,"discretizing");Zf("threshold",Ua,"discretizing");Zf("bin-ordinal",Of,["discrete","discretizing"]);Zf("ordinal",
wa,"discrete");Zf("band",oe,"discrete");Zf("point",function(){return ue(oe().paddingInner(1))},"discrete");const Cl=["clamp","base","constant","exponent"],Lk={};T({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",
category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",
pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},kh);T({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",
oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",
purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",
blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",
redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",
magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",
cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",
sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",
browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",
lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",
darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},ic=>cj(kh(ic)));const uj=ic=>w.isArray(ic)?ic.map(Oc=>String(Oc)):String(ic),ml=(ic,Oc)=>ic[1]-Oc[1],Tj=(ic,Oc)=>Oc[1]-ic[1],Ek={quantile:"quantiles",quantize:"thresholds",threshold:"domain"},Mk={quantile:"quantiles",quantize:"domain"},Nk=ic=>(Oc,Id,Od)=>{Id=Od[Id+1];Od=Od.max;Od=null!=Od?Od:Infinity;Id=null!=
Id?Id:Od;Oc=Number.isFinite(Oc)?ic(Oc):null;Id=Number.isFinite(Id)?ic(Id):null;return Oc&&Id?Oc+" – "+Id:Id?"\x3c "+Id:"≥ "+Oc},nl=ic=>(Oc,Id)=>Id?ic(Oc):null,zl=ic=>Oc=>ic(Oc);A.Band="band";A.BinOrdinal="bin-ordinal";A.DiscreteLegend="discrete";A.Diverging="diverging";A.GradientLegend="gradient";A.Identity="identity";A.Linear="linear";A.Log="log";A.Ordinal="ordinal";A.Point="point";A.Pow="pow";A.Quantile="quantile";A.Quantize="quantize";A.Sequential="sequential";A.Sqrt="sqrt";A.SymbolLegend="symbol";
A.Symlog="symlog";A.Threshold="threshold";A.Time="time";A.UTC="utc";A.bandSpace=x;A.domainCaption=function(ic,Oc,Id){Id=Id||{};var Od=Math.max(3,Id.maxlen||7),Jd=Id.format;const fe=(Id=Id.formatType)||Oc.type;w.isString(Jd)&&Eh(fe)&&(Jd=Jd.replace(/%a/g,"%A").replace(/%b/g,"%B"));ic=Jd||"time"!==fe?Jd||"utc"!==fe?ff(ic,Oc,5,null,Jd,Id,!0):ic.utcFormat("%A, %d %B %Y, %X UTC"):ic.timeFormat("%A, %d %B %Y, %X");if(bj(Oc.type))return Od=Ne(Oc).slice(1).map(ic),Oc=Od.length,`${Oc} boundar${1===Oc?"y":
"ies"}: ${Od.join(", ")}`;if(pi(Oc.type))return Jd=Oc.domain(),Oc=Jd.length,Od=Oc>Od?Jd.slice(0,Od-2).map(ic).join(", ")+", ending with "+Jd.slice(-1).map(ic):Jd.map(ic).join(", "),`${Oc} value${1===Oc?"":"s"}: ${Od}`;Od=Oc.domain();return`values from ${ic(Od[0])} to ${ic(w.peek(Od))}`};A.interpolate=ji;A.interpolateColors=cj;A.interpolateRange=function(ic,Oc){const Id=Oc[0],Od=w.peek(Oc)-Id;return function(Jd){return ic(Id+Jd*Od)}};A.isContinuous=function(ic){return lh(ic,"continuous")};A.isDiscrete=
pi;A.isDiscretizing=bj;A.isInterpolating=function(ic){return lh(ic,"interpolating")};A.isLogarithmic=Sh;A.isQuantile=function(ic){return lh(ic,"quantile")};A.isRegisteredScale=function(ic){return ic&&!0===ic[ii]};A.isTemporal=Eh;A.isValidScaleType=qg;A.labelFormat=ff;A.labelFraction=function(ic){var Oc=ic.domain();const Id=Oc.length-1;let Od=+Oc[0];Oc=+w.peek(Oc);let Jd=Oc-Od;"threshold"===ic.type&&(ic=Id?Jd/Id:.1,Od-=ic,Oc+=ic,Jd=Oc-Od);return fe=>(fe-Od)/Jd};A.labelValues=Ne;A.quantizeInterpolator=
function(ic,Oc){const Id=Array(Oc),Od=Oc+1;for(let Jd=0;Jd<Oc;)Id[Jd]=ic(++Jd/Od);return Id};A.registerScale=kf;A.scale=Zf;A.scaleCopy=function(ic){const Oc=ic.type;ic=ic.copy();ic.type=Oc;return ic};A.scaleFraction=function(ic,Oc,Id){var Od=Id-Oc;let Jd,fe;return Od&&Number.isFinite(Od)?(Od=(Jd=ic.type).indexOf("-"),Jd=0>Od?Jd:Jd.slice(Od+1),fe=Zf(Jd)().domain([Oc,Id]).range([0,1]),Cl.forEach(He=>ic[He]?fe[He](ic[He]()):0),fe):w.constant(.5)};A.scaleImplicit=Hj;A.scheme=Oa;A.tickCount=function(ic,
Oc,Id){let Od;w.isNumber(Oc)&&(ic.bins&&(Oc=Math.max(Oc,ic.bins.length)),null!=Id&&(Oc=Math.min(Oc,Math.floor(w.span(ic.domain())/Id||1)+1)));w.isObject(Oc)&&(Od=Oc.step,Oc=Oc.interval);w.isString(Oc)&&(Oc="time"===ic.type?u.timeInterval(Oc):"utc"==ic.type?u.utcInterval(Oc):w.error("Only time and utc scales accept interval strings."),Od&&(Oc=Oc.every(Od)));return Oc};A.tickFormat=jd;A.tickValues=Ac;A.validTicks=zb})};
shadow$provide[431]=function(ob,Ba,Gb,Ea){(function(A,w){"object"===typeof Ea&&"undefined"!==typeof Gb?w(Ea,Ba(421),Ba(429),Ba(425),Ba(430)):"function"===typeof define&&define.amd?define(["exports","vega-util","vega-canvas","vega-loader","vega-scale"],w):(A="undefined"!==typeof globalThis?globalThis:A||self,w(A.vega={},A.vega,A.vega,A.vega,A.vega))})(this,function(A,w,u,x,I){function B(Rb,Bc,gd){const zd=Rb.gradient;let ce=Rb.id,ke="radial"===zd?"p_":"";ce||(ce=Rb.id="gradient_"+ee++,"radial"===zd?
(Rb.x1=N(Rb.x1,.5),Rb.y1=N(Rb.y1,.5),Rb.r1=N(Rb.r1,0),Rb.x2=N(Rb.x2,.5),Rb.y2=N(Rb.y2,.5),Rb.r2=N(Rb.r2,.5),ke="p_"):(Rb.x1=N(Rb.x1,0),Rb.y1=N(Rb.y1,0),Rb.x2=N(Rb.x2,1),Rb.y2=N(Rb.y2,0)));Bc[ce]=Rb;return"url("+(gd||"")+"#"+ke+ce+")"}function N(Rb,Bc){return null!=Rb?Rb:Bc}function da(Rb){return function(){return Rb}}function U(Rb){return 1<=Rb?Tf:-1>=Rb?-Tf:Math.asin(Rb)}function X(Rb){this._+=Rb[0];for(let Bc=1,gd=Rb.length;Bc<gd;++Bc)this._+=arguments[Bc]+Rb[Bc]}function V(Rb){let Bc=Math.floor(Rb);
if(!(0<=Bc))throw Error(`invalid digits: ${Rb}`);if(15<Bc)return X;const gd=10**Bc;return function(zd){this._+=zd[0];for(let ce=1,ke=zd.length;ce<ke;++ce)this._+=Math.round(arguments[ce]*gd)/gd+zd[ce]}}function P(){return new Yf}function z(Rb){let Bc=3;Rb.digits=function(gd){if(!arguments.length)return Bc;if(null==gd)Bc=null;else{const zd=Math.floor(gd);if(!(0<=zd))throw new RangeError(`invalid digits: ${gd}`);Bc=zd}return Rb};return()=>new Yf(Bc)}function G(Rb){return Rb.innerRadius}function Y(Rb){return Rb.outerRadius}
function Q(Rb){return Rb.startAngle}function ja(Rb){return Rb.endAngle}function pa(Rb){return Rb&&Rb.padAngle}function J(Rb,Bc,gd,zd,ce,ke,De){var Fb=Rb-gd,dc=Bc-zd;De=(De?ke:-ke)/Xd(Fb*Fb+dc*dc);dc*=De;Fb*=-De;var Dc=Rb+dc,Vc=Bc+Fb,Ld=gd+dc,ge=zd+Fb;gd=(Dc+Ld)/2;zd=(Vc+ge)/2;Bc=Ld-Dc;Rb=ge-Vc;De=Bc*Bc+Rb*Rb;ke=ce-ke;ge=Dc*ge-Ld*Vc;var te=(0>Rb?-1:1)*Xd(Oe(0,ke*ke*De-ge*ge));Dc=(ge*Rb-Bc*te)/De;Vc=(-ge*Bc-Rb*te)/De;Ld=(ge*Rb+Bc*te)/De;Bc=(-ge*Bc+Rb*te)/De;Rb=Dc-gd;De=Vc-zd;gd=Ld-gd;zd=Bc-zd;Rb*Rb+
De*De>gd*gd+zd*zd&&(Dc=Ld,Vc=Bc);return{cx:Dc,cy:Vc,x01:-dc,y01:-Fb,x11:Dc*(ce/ke-1),y11:Vc*(ce/ke-1)}}function K(Rb){return"object"===typeof Rb&&"length"in Rb?Rb:Array.from(Rb)}function ba(Rb){this._context=Rb}function O(Rb){return new ba(Rb)}function fa(Rb){return Rb[0]}function wa(Rb){return Rb[1]}function ta(Rb,Bc){function gd(dc){var Dc,Vc=(dc=K(dc)).length,Ld,ge=!1,te;null==ce&&(De=ke(te=Fb()));for(Dc=0;Dc<=Vc;++Dc)!(Dc<Vc&&zd(Ld=dc[Dc],Dc,dc))===ge&&((ge=!ge)?De.lineStart():De.lineEnd()),ge&&
De.point(+Rb(Ld,Dc,dc),+Bc(Ld,Dc,dc));if(te)return De=null,te+""||null}var zd=da(!0),ce=null,ke=O,De=null,Fb=z(gd);Rb="function"===typeof Rb?Rb:void 0===Rb?fa:da(Rb);Bc="function"===typeof Bc?Bc:void 0===Bc?wa:da(Bc);gd.x=function(dc){return arguments.length?(Rb="function"===typeof dc?dc:da(+dc),gd):Rb};gd.y=function(dc){return arguments.length?(Bc="function"===typeof dc?dc:da(+dc),gd):Bc};gd.defined=function(dc){return arguments.length?(zd="function"===typeof dc?dc:da(!!dc),gd):zd};gd.curve=function(dc){return arguments.length?
(ke=dc,null!=ce&&(De=ke(ce)),gd):ke};gd.context=function(dc){return arguments.length?(null==dc?ce=De=null:De=ke(ce=dc),gd):ce};return gd}function aa(Rb,Bc,gd){function zd(Ld){var ge,te,Te=(Ld=K(Ld)).length,pe,Qf=!1,jf,Dg=Array(Te),gg=Array(Te);null==Fb&&(Dc=dc(jf=Vc()));for(ge=0;ge<=Te;++ge){if(!(ge<Te&&De(pe=Ld[ge],ge,Ld))===Qf)if(Qf=!Qf){var Eg=ge;Dc.areaStart();Dc.lineStart()}else{Dc.lineEnd();Dc.lineStart();for(te=ge-1;te>=Eg;--te)Dc.point(Dg[te],gg[te]);Dc.lineEnd();Dc.areaEnd()}Qf&&(Dg[ge]=
+Rb(pe,ge,Ld),gg[ge]=+Bc(pe,ge,Ld),Dc.point(ke?+ke(pe,ge,Ld):Dg[ge],gd?+gd(pe,ge,Ld):gg[ge]))}if(jf)return Dc=null,jf+""||null}function ce(){return ta().defined(De).curve(dc).context(Fb)}var ke=null,De=da(!0),Fb=null,dc=O,Dc=null,Vc=z(zd);Rb="function"===typeof Rb?Rb:void 0===Rb?fa:da(+Rb);Bc="function"===typeof Bc?Bc:void 0===Bc?da(0):da(+Bc);gd="function"===typeof gd?gd:void 0===gd?wa:da(+gd);zd.x=function(Ld){return arguments.length?(Rb="function"===typeof Ld?Ld:da(+Ld),ke=null,zd):Rb};zd.x0=function(Ld){return arguments.length?
(Rb="function"===typeof Ld?Ld:da(+Ld),zd):Rb};zd.x1=function(Ld){return arguments.length?(ke=null==Ld?null:"function"===typeof Ld?Ld:da(+Ld),zd):ke};zd.y=function(Ld){return arguments.length?(Bc="function"===typeof Ld?Ld:da(+Ld),gd=null,zd):Bc};zd.y0=function(Ld){return arguments.length?(Bc="function"===typeof Ld?Ld:da(+Ld),zd):Bc};zd.y1=function(Ld){return arguments.length?(gd=null==Ld?null:"function"===typeof Ld?Ld:da(+Ld),zd):gd};zd.lineX0=zd.lineY0=function(){return ce().x(Rb).y(Bc)};zd.lineY1=
function(){return ce().x(Rb).y(gd)};zd.lineX1=function(){return ce().x(ke).y(Bc)};zd.defined=function(Ld){return arguments.length?(De="function"===typeof Ld?Ld:da(!!Ld),zd):De};zd.curve=function(Ld){return arguments.length?(dc=Ld,null!=Fb&&(Dc=dc(Fb)),zd):dc};zd.context=function(Ld){return arguments.length?(null==Ld?Fb=Dc=null:Dc=dc(Fb=Ld),zd):Fb};return zd}function ha(){}function ka(Rb,Bc,gd){Rb._context.bezierCurveTo((2*Rb._x0+Rb._x1)/3,(2*Rb._y0+Rb._y1)/3,(Rb._x0+2*Rb._x1)/3,(Rb._y0+2*Rb._y1)/
3,(Rb._x0+4*Rb._x1+Bc)/6,(Rb._y0+4*Rb._y1+gd)/6)}function H(Rb){this._context=Rb}function oa(Rb){this._context=Rb}function ea(Rb){this._context=Rb}function D(Rb,Bc){this._basis=new H(Rb);this._beta=Bc}function R(Rb,Bc,gd){Rb._context.bezierCurveTo(Rb._x1+Rb._k*(Rb._x2-Rb._x0),Rb._y1+Rb._k*(Rb._y2-Rb._y0),Rb._x2+Rb._k*(Rb._x1-Bc),Rb._y2+Rb._k*(Rb._y1-gd),Rb._x2,Rb._y2)}function la(Rb,Bc){this._context=Rb;this._k=(1-Bc)/6}function Ia(Rb,Bc){this._context=Rb;this._k=(1-Bc)/6}function Ma(Rb,Bc){this._context=
Rb;this._k=(1-Bc)/6}function Ta(Rb,Bc,gd){var zd=Rb._x1,ce=Rb._y1,ke=Rb._x2,De=Rb._y2;if(1E-12<Rb._l01_a){var Fb=2*Rb._l01_2a+3*Rb._l01_a*Rb._l12_a+Rb._l12_2a,dc=3*Rb._l01_a*(Rb._l01_a+Rb._l12_a);zd=(zd*Fb-Rb._x0*Rb._l12_2a+Rb._x2*Rb._l01_2a)/dc;ce=(ce*Fb-Rb._y0*Rb._l12_2a+Rb._y2*Rb._l01_2a)/dc}1E-12<Rb._l23_a&&(Fb=2*Rb._l23_2a+3*Rb._l23_a*Rb._l12_a+Rb._l12_2a,dc=3*Rb._l23_a*(Rb._l23_a+Rb._l12_a),ke=(ke*Fb+Rb._x1*Rb._l23_2a-Bc*Rb._l12_2a)/dc,De=(De*Fb+Rb._y1*Rb._l23_2a-gd*Rb._l12_2a)/dc);Rb._context.bezierCurveTo(zd,
ce,ke,De,Rb._x2,Rb._y2)}function ab(Rb,Bc){this._context=Rb;this._alpha=Bc}function db(Rb,Bc){this._context=Rb;this._alpha=Bc}function ub(Rb,Bc){this._context=Rb;this._alpha=Bc}function pb(Rb){this._context=Rb}function Ya(Rb,Bc,gd){var zd=Rb._x1-Rb._x0;Bc-=Rb._x1;var ce=(Rb._y1-Rb._y0)/(zd||0>Bc&&-0);Rb=(gd-Rb._y1)/(Bc||0>zd&&-0);return((0>ce?-1:1)+(0>Rb?-1:1))*Math.min(Math.abs(ce),Math.abs(Rb),.5*Math.abs((ce*Bc+Rb*zd)/(zd+Bc)))||0}function Va(Rb,Bc){var gd=Rb._x1-Rb._x0;return gd?(3*(Rb._y1-Rb._y0)/
gd-Bc)/2:Bc}function Pa(Rb,Bc,gd){var zd=Rb._x0,ce=Rb._x1,ke=Rb._y1,De=(ce-zd)/3;Rb._context.bezierCurveTo(zd+De,Rb._y0+De*Bc,ce-De,ke-De*gd,ce,ke)}function Ha(Rb){this._context=Rb}function Ca(Rb){this._context=new Aa(Rb)}function Aa(Rb){this._context=Rb}function Ga(Rb){this._context=Rb}function Ka(Rb){var Bc,gd=Rb.length-1,zd=Array(gd),ce=Array(gd),ke=Array(gd);zd[0]=0;ce[0]=2;ke[0]=Rb[0]+2*Rb[1];for(Bc=1;Bc<gd-1;++Bc)zd[Bc]=1,ce[Bc]=4,ke[Bc]=4*Rb[Bc]+2*Rb[Bc+1];zd[gd-1]=2;ce[gd-1]=7;ke[gd-1]=8*
Rb[gd-1]+Rb[gd];for(Bc=1;Bc<gd;++Bc){var De=zd[Bc]/ce[Bc-1];ce[Bc]-=De;ke[Bc]-=De*ke[Bc-1]}zd[gd-1]=ke[gd-1]/ce[gd-1];for(Bc=gd-2;0<=Bc;--Bc)zd[Bc]=(ke[Bc]-zd[Bc+1])/ce[Bc];ce[gd-1]=(Rb[gd]+zd[gd-1])/2;for(Bc=0;Bc<gd-1;++Bc)ce[Bc]=2*Rb[Bc+1]-zd[Bc+1];return[zd,ce]}function cb(Rb,Bc){this._context=Rb;this._t=Bc}function fb(Rb,Bc,gd){Rb=w.hasOwnProperty(of,Rb)&&of[Rb];var zd=null;Rb&&(zd=Rb.curve||Rb[Bc||"vertical"],Rb.tension&&null!=gd&&(zd=zd[Rb.tension](gd)));return zd}function La(Rb){const Bc=[];
(Rb.match(Ii)||[]).forEach(gd=>{let zd=gd[0];var ce=zd.toLowerCase();const ke=qh[ce];var De=gd.slice(1).trim();gd=[];for(let dc=0;ke&&dc<De.length;)for(let Dc=0;Dc<ke;++Dc){var Fb="a"!==ce||3!==Dc&&4!==Dc?Fi:jh;Fb=De.slice(dc).match(Fb);if(null===Fb)throw Error("Invalid SVG path, incorrect parameter type");dc+=Fb[0].length;gd.push(+Fb[0]);Fb=De.slice(dc).match(Nh);null!==Fb&&(dc+=Fb[0].length)}De=gd.length;if(De<ke||De&&0!==De%ke)throw Error("Invalid SVG path, incorrect parameter count");Bc.push([zd,
...gd.slice(0,ke)]);if(De!==ke)for("m"===ce&&(zd="M"===zd?"L":"l"),ce=ke;ce<De;ce+=ke)Bc.push([zd,...gd.slice(ce,ce+ke)])});return Bc}function Bb(Rb,Bc,gd,zd,ce,ke,De,Fb,dc){const Dc=$d.call(arguments);if(Gi[Dc])return Gi[Dc];var Vc=De*Kg;const Ld=Math.sin(Vc);Vc=Math.cos(Vc);gd=Math.abs(gd);zd=Math.abs(zd);var ge=Vc*(Fb-Rb)*.5+Ld*(dc-Bc)*.5,te=Vc*(dc-Bc)*.5-Ld*(Fb-Rb)*.5;ge=ge*ge/(gd*gd)+te*te/(zd*zd);1<ge&&(ge=Math.sqrt(ge),gd*=ge,zd*=ge);var Te=Vc/gd,pe=Ld/gd,Qf=-Ld/zd,jf=Vc/zd;ge=Te*Fb+pe*dc;
te=Qf*Fb+jf*dc;Te=Te*Rb+pe*Bc;pe=Qf*Rb+jf*Bc;Qf=1/((Te-ge)*(Te-ge)+(pe-te)*(pe-te))-.25;0>Qf&&(Qf=0);jf=Math.sqrt(Qf);ke==ce&&(jf=-jf);Qf=.5*(ge+Te)-jf*(pe-te);jf=.5*(te+pe)+jf*(Te-ge);ge=Math.atan2(te-jf,ge-Qf);te=Math.atan2(pe-jf,Te-Qf)-ge;0>te&&1===ke?te+=nh:0<te&&0===ke&&(te-=nh);Te=Math.ceil(Math.abs(te/(Cf+.001)));pe=[];for(let Dg=0;Dg<Te;++Dg)pe[Dg]=[Qf,jf,ge+Dg*te/Te,ge+(Dg+1)*te/Te,gd,zd,Ld,Vc];return Gi[Dc]=pe}function Ob(Rb,Bc,gd,zd,ce,ke){var De=null,Fb=0,dc=0,Dc=0,Vc=0,Ld=0,ge=0;null==
gd&&(gd=0);null==zd&&(zd=0);null==ce&&(ce=1);null==ke&&(ke=ce);Rb.beginPath&&Rb.beginPath();for(var te=0,Te=Bc.length;te<Te;++te){var pe=Bc[te];if(1!==ce||1!==ke){var Qf=ce;var jf=ke;var Dg=ug[0]=pe[0];if("a"===Dg||"A"===Dg)ug[1]=Qf*pe[1],ug[2]=jf*pe[2],ug[3]=pe[3],ug[4]=pe[4],ug[5]=pe[5],ug[6]=Qf*pe[6],ug[7]=jf*pe[7];else if("h"===Dg||"H"===Dg)ug[1]=Qf*pe[1];else if("v"===Dg||"V"===Dg)ug[1]=jf*pe[1];else{Dg=1;for(var gg=pe.length;Dg<gg;++Dg)ug[Dg]=(1==Dg%2?Qf:jf)*pe[Dg]}pe=ug}switch(pe[0]){case "l":Fb+=
pe[1];dc+=pe[2];Rb.lineTo(Fb+gd,dc+zd);break;case "L":Fb=pe[1];dc=pe[2];Rb.lineTo(Fb+gd,dc+zd);break;case "h":Fb+=pe[1];Rb.lineTo(Fb+gd,dc+zd);break;case "H":Fb=pe[1];Rb.lineTo(Fb+gd,dc+zd);break;case "v":dc+=pe[1];Rb.lineTo(Fb+gd,dc+zd);break;case "V":dc=pe[1];Rb.lineTo(Fb+gd,dc+zd);break;case "m":Fb+=pe[1];dc+=pe[2];Ld=Fb;ge=dc;Rb.moveTo(Fb+gd,dc+zd);break;case "M":Fb=pe[1];dc=pe[2];Ld=Fb;ge=dc;Rb.moveTo(Fb+gd,dc+zd);break;case "c":Qf=Fb+pe[5];jf=dc+pe[6];Dc=Fb+pe[3];Vc=dc+pe[4];Rb.bezierCurveTo(Fb+
pe[1]+gd,dc+pe[2]+zd,Dc+gd,Vc+zd,Qf+gd,jf+zd);Fb=Qf;dc=jf;break;case "C":Fb=pe[5];dc=pe[6];Dc=pe[3];Vc=pe[4];Rb.bezierCurveTo(pe[1]+gd,pe[2]+zd,Dc+gd,Vc+zd,Fb+gd,dc+zd);break;case "s":Qf=Fb+pe[3];jf=dc+pe[4];Dc=2*Fb-Dc;Vc=2*dc-Vc;Rb.bezierCurveTo(Dc+gd,Vc+zd,Fb+pe[1]+gd,dc+pe[2]+zd,Qf+gd,jf+zd);Dc=Fb+pe[1];Vc=dc+pe[2];Fb=Qf;dc=jf;break;case "S":Qf=pe[3];jf=pe[4];Dc=2*Fb-Dc;Vc=2*dc-Vc;Rb.bezierCurveTo(Dc+gd,Vc+zd,pe[1]+gd,pe[2]+zd,Qf+gd,jf+zd);Fb=Qf;dc=jf;Dc=pe[1];Vc=pe[2];break;case "q":Qf=Fb+pe[3];
jf=dc+pe[4];Dc=Fb+pe[1];Vc=dc+pe[2];Rb.quadraticCurveTo(Dc+gd,Vc+zd,Qf+gd,jf+zd);Fb=Qf;dc=jf;break;case "Q":Qf=pe[3];jf=pe[4];Rb.quadraticCurveTo(pe[1]+gd,pe[2]+zd,Qf+gd,jf+zd);Fb=Qf;dc=jf;Dc=pe[1];Vc=pe[2];break;case "t":Qf=Fb+pe[1];jf=dc+pe[2];null===De[0].match(/[QqTt]/)?(Dc=Fb,Vc=dc):"t"===De[0]?(Dc=2*Fb-Eg,Vc=2*dc-Ph):"q"===De[0]&&(Dc=2*Fb-Dc,Vc=2*dc-Vc);var Eg=Dc;var Ph=Vc;Rb.quadraticCurveTo(Dc+gd,Vc+zd,Qf+gd,jf+zd);Fb=Qf;dc=jf;Dc=Fb+pe[1];Vc=dc+pe[2];break;case "T":Qf=pe[1];jf=pe[2];Dc=2*
Fb-Dc;Vc=2*dc-Vc;Rb.quadraticCurveTo(Dc+gd,Vc+zd,Qf+gd,jf+zd);Fb=Qf;dc=jf;break;case "a":ec(Rb,Fb+gd,dc+zd,[pe[1],pe[2],pe[3],pe[4],pe[5],pe[6]+Fb+gd,pe[7]+dc+zd]);Fb+=pe[6];dc+=pe[7];break;case "A":ec(Rb,Fb+gd,dc+zd,[pe[1],pe[2],pe[3],pe[4],pe[5],pe[6]+gd,pe[7]+zd]);Fb=pe[6];dc=pe[7];break;case "z":case "Z":Fb=Ld,dc=ge,Rb.closePath()}De=pe}}function ec(Rb,Bc,gd,zd){Bc=Bb(zd[5],zd[6],zd[0],zd[1],zd[3],zd[4],zd[2],Bc,gd);for(gd=0;gd<Bc.length;++gd){a:{var ce=Bc[gd];zd=$d.call(ce);if(oh[zd]){zd=oh[zd];
break a}var ke=ce[0],De=ce[1],Fb=ce[2],dc=ce[3],Dc=ce[4],Vc=ce[5],Ld=ce[6],ge=ce[7];ce=ge*Dc;const Te=-Ld*Vc;Dc*=Ld;Vc*=ge;var te=Math.cos(Fb);const pe=Math.sin(Fb);Ld=Math.cos(dc);ge=Math.sin(dc);Fb=.5*(dc-Fb);dc=Math.sin(.5*Fb);dc=8/3*dc*dc/Math.sin(Fb);Fb=ke+te-dc*pe;te=De+pe+dc*te;ke+=Ld;De+=ge;ge=ke+dc*ge;Ld=De-dc*Ld;zd=oh[zd]=[ce*Fb+Te*te,Dc*Fb+Vc*te,ce*ge+Te*Ld,Dc*ge+Vc*Ld,ce*ke+Te*De,Dc*ke+Vc*De]}Rb.bezierCurveTo(zd[0],zd[1],zd[2],zd[3],zd[4],zd[5])}}function sc(Rb){return w.hasOwnProperty(nj,
Rb)?nj[Rb]:Ic(Rb)}function Ic(Rb){if(!w.hasOwnProperty(eg,Rb)){const Bc=La(Rb);eg[Rb]={draw:function(gd,zd){Ob(gd,Bc,0,0,Math.sqrt(zd)/2)}}}return eg[Rb]}function Xb(Rb){return Rb.x}function Wb(Rb){return Rb.y}function Kc(Rb){return Rb.width}function Kb(Rb){return Rb.height}function mc(Rb){return"function"===typeof Rb?Rb:()=>+Rb}function Ub(Rb,Bc,gd){return Math.max(Bc,Math.min(Rb,gd))}function oc(){function Rb(Vc,Ld,ge){var te;Ld=null!=Ld?Ld:+Bc.call(this,Vc);ge=null!=ge?ge:+gd.call(this,Vc);var Te=
+zd.call(this,Vc),pe=+ce.call(this,Vc),Qf=Math.min(Te,pe)/2,jf=Ub(+ke.call(this,Vc),0,Qf),Dg=Ub(+De.call(this,Vc),0,Qf),gg=Ub(+Fb.call(this,Vc),0,Qf);Vc=Ub(+dc.call(this,Vc),0,Qf);Dc||(Dc=te=P());0>=jf&&0>=Dg&&0>=gg&&0>=Vc?Dc.rect(Ld,ge,Te,pe):(Te=Ld+Te,pe=ge+pe,Dc.moveTo(Ld+jf,ge),Dc.lineTo(Te-Dg,ge),Dc.bezierCurveTo(Te-.448084975506*Dg,ge,Te,ge+.448084975506*Dg,Te,ge+Dg),Dc.lineTo(Te,pe-Vc),Dc.bezierCurveTo(Te,pe-.448084975506*Vc,Te-.448084975506*Vc,pe,Te-Vc,pe),Dc.lineTo(Ld+gg,pe),Dc.bezierCurveTo(Ld+
.448084975506*gg,pe,Ld,pe-.448084975506*gg,Ld,pe-gg),Dc.lineTo(Ld,ge+jf),Dc.bezierCurveTo(Ld,ge+.448084975506*jf,Ld+.448084975506*jf,ge,Ld+jf,ge),Dc.closePath());if(te)return Dc=null,te+""||null}var Bc=Xb,gd=Wb,zd=Kc,ce=Kb,ke=mc(0),De=ke,Fb=ke,dc=ke,Dc=null;Rb.x=function(Vc){return arguments.length?(Bc=mc(Vc),Rb):Bc};Rb.y=function(Vc){return arguments.length?(gd=mc(Vc),Rb):gd};Rb.width=function(Vc){return arguments.length?(zd=mc(Vc),Rb):zd};Rb.height=function(Vc){return arguments.length?(ce=mc(Vc),
Rb):ce};Rb.cornerRadius=function(Vc,Ld,ge,te){return arguments.length?(ke=mc(Vc),De=null!=Ld?mc(Ld):ke,dc=null!=ge?mc(ge):ke,Fb=null!=te?mc(te):De,Rb):ke};Rb.context=function(Vc){return arguments.length?(Dc=null==Vc?null:Vc,Rb):Dc};return Rb}function Cc(){function Rb(Vc){var Ld,ge=Vc.length,te,Te=!1,pe;null==ke&&(ke=pe=P());for(Ld=0;Ld<=ge;++Ld)if(!(Ld<ge&&ce(te=Vc[Ld],Ld,Vc))===Te&&(Te=!Te)&&(De=0),Te){var Qf=+Bc(te,Ld,Vc),jf=+gd(te,Ld,Vc);const Ei=+zd(te,Ld,Vc)/2;if(De){var Dg=dc-jf,gg=Qf-Fb;if(Dg||
gg){var Eg=Math.hypot(Dg,gg),Ph=(Dg/=Eg)*Dc;Eg=(gg/=Eg)*Dc;var Sg=Math.atan2(gg,Dg);ke.moveTo(Fb-Ph,dc-Eg);ke.lineTo(Qf-Dg*Ei,jf-gg*Ei);ke.arc(Qf,jf,Ei,Sg-Math.PI,Sg);ke.lineTo(Fb+Ph,dc+Eg);ke.arc(Fb,dc,Dc,Sg,Sg+Math.PI)}else ke.arc(Qf,jf,Ei,0,nh);ke.closePath()}else De=1;Fb=Qf;dc=jf;Dc=Ei}if(pe)return ke=null,pe+""||null}var Bc,gd,zd,ce,ke=null,De,Fb,dc,Dc;Rb.x=function(Vc){return arguments.length?(Bc=Vc,Rb):Bc};Rb.y=function(Vc){return arguments.length?(gd=Vc,Rb):gd};Rb.size=function(Vc){return arguments.length?
(zd=Vc,Rb):zd};Rb.defined=function(Vc){return arguments.length?(ce=Vc,Rb):ce};Rb.context=function(Vc){return arguments.length?(ke=null==Vc?null:Vc,Rb):ke};return Rb}function Mc(Rb,Bc){return null!=Rb?Rb:Bc}function Pb(Rb){return Rb.cornerRadius||Rb.cornerRadiusTopLeft||Rb.cornerRadiusTopRight||Rb.cornerRadiusBottomRight||Rb.cornerRadiusBottomLeft}function nc(Rb,Bc,gd,zd){return Of.context(Rb)(Bc,gd,zd)}function rc(Rb,Bc,gd){var zd=Bc.clip;Rb=Rb._defs;Bc=Bc.clip_id||(Bc.clip_id="clip"+Zf++);Rb=Rb.clipping[Bc]||
(Rb.clipping[Bc]={id:Bc});w.isFunction(zd)?Rb.path=zd(null):Pb(gd)?Rb.path=nc(null,gd,0,0):(Rb.width=gd.width||0,Rb.height=gd.height||0);return"url(#"+Bc+")"}function Hb(Rb){this.clear();Rb&&this.union(Rb)}function Jc(Rb){this.mark=Rb;this.bounds=this.bounds||new Hb}function kc(Rb){Jc.call(this,Rb);this.items=this.items||[]}function Ab(Rb){this._pending=0;this._loader=Rb||x.loader()}function md(Rb,Bc,gd){if(Bc.stroke&&0!==Bc.opacity&&0!==Bc.strokeOpacity){const zd=null!=Bc.strokeWidth?+Bc.strokeWidth:
1;Rb.expand(zd+(gd?Bc.strokeJoin&&"miter"!==Bc.strokeJoin?0:zd:0))}return Rb}function yd(Rb,Bc){lh=Rb;Bc?(Sh=Bc*Kg,Eh=ng=Math.cos(Sh),cj=Math.sin(Sh),ji=-cj):(Eh=ng=1,Sh=cj=ji=0);return jd}function hd(Rb,Bc,gd,zd){gd=(Rb-Bc)/(Rb+gd-2*Bc);0<gd&&1>gd&&zd(Rb+(Bc-Rb)*gd)}function Ed(Rb,Bc,gd,zd,ce){const ke=zd-Rb+3*Bc-3*gd,De=Rb+gd-2*Bc;var Fb=Rb-Bc;let dc=0,Dc=0;1E-14<Math.abs(ke)?(Fb=De*De+Fb*ke,0<=Fb&&(Fb=Math.sqrt(Fb),dc=(-De+Fb)/ke,Dc=(-De-Fb)/ke)):dc=.5*Fb/De;0<dc&&1>dc&&ce(Qd(dc,Rb,Bc,gd,zd));
0<Dc&&1>Dc&&ce(Qd(Dc,Rb,Bc,gd,zd))}function Qd(Rb,Bc,gd,zd,ce){const ke=1-Rb,De=ke*ke,Fb=Rb*Rb;return De*ke*Bc+3*De*Rb*gd+3*ke*Fb*zd+Fb*Rb*ce}function fd(Rb){return function(Bc,gd){if(!je)return!0;Rb(je,Bc);Ne.clear().union(Bc.bounds).intersect(gd).round();const {x1:zd,y1:ce,x2:ke,y2:De}=Ne;for(Bc=ce;Bc<=De;++Bc)for(gd=zd;gd<=ke;++gd)if(je.isPointInPath(gd,Bc))return!0;return!1}}function ed(Rb,Bc){return Bc.contains(Rb.x||0,Rb.y||0)}function bc(Rb,Bc){const gd=Rb.x||0,zd=Rb.y||0;return Bc.intersects(Ne.set(gd,
zd,gd+(Rb.width||0),zd+(Rb.height||0)))}function yc(Rb,Bc){const gd=Rb.x||0,zd=Rb.y||0;return $c(Bc,gd,zd,null!=Rb.x2?Rb.x2:gd,null!=Rb.y2?Rb.y2:zd)}function $c(Rb,Bc,gd,zd,ce){const {x1:ke,y1:De,x2:Fb,y2:dc}=Rb;Rb=zd-Bc;ce-=gd;zd=0;let Dc=1,Vc,Ld,ge,te;for(te=0;4>te;++te){0===te&&(Vc=-Rb,Ld=-(ke-Bc));1===te&&(Vc=Rb,Ld=Fb-Bc);2===te&&(Vc=-ce,Ld=-(De-gd));3===te&&(Vc=ce,Ld=dc-gd);if(1E-10>Math.abs(Vc)&&0>Ld)return!1;ge=Ld/Vc;if(0>Vc){if(ge>Dc)return!1;ge>zd&&(zd=ge)}else if(0<Vc){if(ge<zd)return!1;
ge<Dc&&(Dc=ge)}}return!0}function cc(Rb,Bc){Rb.globalCompositeOperation=Bc.blend||"source-over"}function tb(Rb,Bc){return null==Rb?Bc:Rb}function tc(Rb,Bc){const gd=Bc.length;for(let zd=0;zd<gd;++zd)Rb.addColorStop(Bc[zd].offset,Bc[zd].color);return Rb}function Ec(Rb,Bc,gd){const zd=gd.width(),ce=gd.height();if("radial"===Bc.gradient)Rb=Rb.createRadialGradient(gd.x1+tb(Bc.x1,.5)*zd,gd.y1+tb(Bc.y1,.5)*ce,Math.max(zd,ce)*tb(Bc.r1,0),gd.x1+tb(Bc.x2,.5)*zd,gd.y1+tb(Bc.y2,.5)*ce,Math.max(zd,ce)*tb(Bc.r2,
.5));else{const ke=tb(Bc.x1,0),De=tb(Bc.y1,0),Fb=tb(Bc.x2,1),dc=tb(Bc.y2,0);if(ke===Fb||De===dc||zd===ce)Rb=Rb.createLinearGradient(gd.x1+ke*zd,gd.y1+De*ce,gd.x1+Fb*zd,gd.y1+dc*ce);else{gd=u.canvas(Math.ceil(zd),Math.ceil(ce));const Dc=gd.getContext("2d");Dc.scale(zd,ce);Dc.fillStyle=tc(Dc.createLinearGradient(ke,De,Fb,dc),Bc.stops);Dc.fillRect(0,0,zd,ce);return Rb.createPattern(gd,"no-repeat")}}return tc(Rb,Bc.stops)}function cd(Rb,Bc,gd){gd*=null==Bc.fillOpacity?1:Bc.fillOpacity;return 0<gd?(Rb.globalAlpha=
gd,Bc=(gd=Bc.fill)&&gd.gradient?Ec(Rb,gd,Bc.bounds):gd,Rb.fillStyle=Bc,!0):!1}function bd(Rb,Bc,gd){var zd=null!=(zd=Bc.strokeWidth)?zd:1;if(0>=zd)return!1;gd*=null==Bc.strokeOpacity?1:Bc.strokeOpacity;return 0<gd?(Rb.globalAlpha=gd,gd=(gd=Bc.stroke)&&gd.gradient?Ec(Rb,gd,Bc.bounds):gd,Rb.strokeStyle=gd,Rb.lineWidth=zd,Rb.lineCap=Bc.strokeCap||"butt",Rb.lineJoin=Bc.strokeJoin||"miter",Rb.miterLimit=Bc.strokeMiterLimit||10,Rb.setLineDash&&(Rb.setLineDash(Bc.strokeDash||ff),Rb.lineDashOffset=Bc.strokeDashOffset||
0),!0):!1}function od(Rb,Bc){return Rb.zindex-Bc.zindex||Rb.index-Bc.index}function Dd(Rb){if(!Rb.zdirty)return Rb.zitems;var Bc=Rb.items,gd=[],zd;var ce=0;for(zd=Bc.length;ce<zd;++ce){var ke=Bc[ce];ke.index=ce;ke.zindex&&gd.push(ke)}Rb.zdirty=!1;return Rb.zitems=gd.sort(od)}function xd(Rb,Bc){var gd=Rb.items,zd;if(gd&&gd.length){var ce=Dd(Rb);if(ce&&ce.length){Rb=0;for(zd=gd.length;Rb<zd;++Rb)gd[Rb].zindex||Bc(gd[Rb]);gd=ce}Rb=0;for(zd=gd.length;Rb<zd;++Rb)Bc(gd[Rb])}}function sd(Rb,Bc){var gd=Rb.items,
zd,ce;if(!gd||!gd.length)return null;const ke=Dd(Rb);ke&&ke.length&&(gd=ke);for(ce=gd.length;0<=--ce;)if(zd=Bc(gd[ce]))return zd;if(gd===ke)for(gd=Rb.items,ce=gd.length;0<=--ce;)if(!gd[ce].zindex&&(zd=Bc(gd[ce])))return zd;return null}function Vd(Rb){return function(Bc,gd,zd){xd(gd,ce=>{zd&&!zd.intersects(ce.bounds)||Wd(Rb,Bc,ce,ce)})}}function re(Rb){return function(Bc,gd,zd){!gd.items.length||zd&&!zd.intersects(gd.bounds)||Wd(Rb,Bc,gd.items[0],gd.items)}}function Wd(Rb,Bc,gd,zd){var ce=null==gd.opacity?
1:gd.opacity;0===ce||Rb(Bc,zd)||(cc(Bc,gd),gd.fill&&cd(Bc,gd,ce)&&Bc.fill(),gd.stroke&&bd(Bc,gd,ce)&&Bc.stroke())}function Fe(Rb){Rb=Rb||w.truthy;return function(Bc,gd,zd,ce,ke,De){zd*=Bc.pixelRatio;ce*=Bc.pixelRatio;return sd(gd,Fb=>{const dc=Fb.bounds;if((!dc||dc.contains(ke,De))&&dc&&Rb(Bc,Fb,zd,ce,ke,De))return Fb})}}function Bf(Rb,Bc){return function(gd,zd,ce,ke){var De=Array.isArray(zd)?zd[0]:zd,Fb=null==Bc?De.fill:Bc,dc=De.stroke&&gd.isPointInStroke;if(dc){var Dc=De.strokeWidth;De=De.strokeCap;
gd.lineWidth=null!=Dc?Dc:1;gd.lineCap=null!=De?De:"butt"}return Rb(gd,zd)?!1:Fb&&gd.isPointInPath(ce,ke)||dc&&gd.isPointInStroke(ce,ke)}}function Ye(Rb,Bc){return"translate("+Rb+","+Bc+")"}function bg(Rb,Bc,gd){function zd(ce,ke){var De=ke.x||0,Fb=ke.y||0,dc=ke.angle||0;ce.translate(De,Fb);dc&&ce.rotate(dc*=Kg);ce.beginPath();Bc(ce,ke);dc&&ce.rotate(-dc);ce.translate(-De,-Fb)}return{type:Rb,tag:"path",nested:!1,attr:function(ce,ke){var De=Ye(ke.x||0,ke.y||0)+(ke.angle?" rotate("+(ke.angle+")"):"");
ce("transform",De);ce("d",Bc(null,ke))},bound:function(ce,ke){Bc(yd(ce,ke.angle),ke);return md(ce,ke).translate(ke.x||0,ke.y||0)},draw:Vd(zd),pick:Fe(Bf(zd)),isect:gd||fd(zd)}}function rf(Rb,Bc,gd){function zd(ke,De){ke.beginPath();Bc(ke,De)}const ce=Bf(zd);return{type:Rb,tag:"path",nested:!0,attr:function(ke,De){De=De.mark.items;De.length&&ke("d",Bc(null,De))},bound:function(ke,De){De=De.items;if(0===De.length)return ke;Bc(yd(ke),De);return md(ke,De[0])},draw:re(zd),pick:function(ke,De,Fb,dc,Dc,
Vc){var Ld=De.items;De=De.bounds;if(!Ld||!Ld.length||De&&!De.contains(Dc,Vc))return null;Fb*=ke.pixelRatio;dc*=ke.pixelRatio;return ce(ke,Ld,Fb,dc)?Ld[0]:null},isect:ed,tip:gd}}function Ff(Rb,Bc){Rb.beginPath();Pb(Bc)?nc(Rb,Bc,0,0):Rb.rect(0,0,Bc.width||0,Bc.height||0);Rb.clip()}function pg(Rb){const Bc=tb(Rb.strokeWidth,1);return null!=Rb.strokeOffset?Rb.strokeOffset:Rb.stroke&&.5<Bc&&1.5>Bc?.5-Math.abs(Bc-1):0}function gf(Rb,Bc,gd,zd){const ce=pg(Bc);Rb.beginPath();nc(Rb,Bc,(gd||0)+ce,(zd||0)+ce)}
function Jb(Rb,Bc){var gd=Rb.image;if(!gd||Rb.url&&Rb.url!==gd.url)gd={complete:!1,width:0,height:0},Bc.loadImage(Rb.url).then(zd=>{Rb.image=zd;Rb.image.url=Rb.url});return gd}function lc(Rb,Bc){return null!=Rb.width?Rb.width:Bc&&Bc.width?!1!==Rb.aspect&&Rb.height?Rb.height*Bc.width/Bc.height:Bc.width:0}function Uc(Rb,Bc){return null!=Rb.height?Rb.height:Bc&&Bc.height?!1!==Rb.aspect&&Rb.width?Rb.width*Bc.height/Bc.width:Bc.height:0}function Zc(Rb,Bc){return"center"===Rb?Bc/2:"right"===Rb?Bc:0}function rd(Rb,
Bc){return"middle"===Rb?Bc/2:"bottom"===Rb?Bc:0}function Nd(Rb,Bc){var gd=Bc.path;if(null==gd)return!0;var zd=Bc.x||0,ce=Bc.y||0,ke=Bc.scaleX||1,De=Bc.scaleY||1,Fb=(Bc.angle||0)*Kg,dc=Bc.pathCache;dc&&dc.path===gd||((Bc.pathCache=dc=La(gd)).path=gd);Fb&&Rb.rotate&&Rb.translate?(Rb.translate(zd,ce),Rb.rotate(Fb),Ob(Rb,dc,0,0,ke,De),Rb.rotate(-Fb),Rb.translate(-zd,-ce)):Ob(Rb,dc,zd,ce,ke,De)}function he(Rb,Bc){Rb.beginPath();nc(Rb,Bc)}function qd(Rb,Bc,gd){if(Bc.stroke&&bd(Rb,Bc,gd)){gd=Bc.x||0;var zd=
Bc.y||0;var ce=null!=Bc.x2?Bc.x2:gd;Bc=null!=Bc.y2?Bc.y2:zd;Rb.beginPath();Rb.moveTo(gd,zd);Rb.lineTo(ce,Bc);return!0}return!1}function qe(Rb){ci.width=Rb&&je?Cd:we}function we(Rb,Bc){Bc=Lg(Rb,Bc);Rb=Jf(Rb);return~~(.8*Bc.length*Rb)}function Cd(Rb,Bc){return 0>=Jf(Rb)||!(Bc=Lg(Rb,Bc))?0:sf(Bc,fh(Rb))}function sf(Rb,Bc){const gd=`(${Bc}) ${Rb}`;let zd=$k.get(gd);void 0===zd&&(je.font=Bc,zd=je.measureText(Rb).width,$k.set(gd,zd));return zd}function Jf(Rb){return null!=Rb.fontSize?+Rb.fontSize||0:11}
function tf(Rb){return null!=Rb.lineHeight?Rb.lineHeight:Jf(Rb)+2}function lf(Rb){Rb=Rb.lineBreak&&Rb.text&&!w.isArray(Rb.text)?Rb.text.split(Rb.lineBreak):Rb.text;return w.isArray(Rb)?1<Rb.length?Rb:Rb[0]:Rb}function Lg(Rb,Bc){Bc=null==Bc?"":(Bc+"").trim();if(0<Rb.limit&&Bc.length){var gd=+Rb.limit,zd=rg(Rb);if(!(zd(Bc)<gd)){var ce=Rb.ellipsis||"…",ke="rtl"===Rb.dir;Rb=0;var De=Bc.length;gd-=zd(ce);if(ke){for(;Rb<De;)ke=Rb+De>>>1,zd(Bc.slice(ke))>gd?Rb=ke+1:De=ke;Bc=ce+Bc.slice(Rb)}else{for(;Rb<
De;)ke=1+(Rb+De>>>1),zd(Bc.slice(0,ke))<gd?Rb=ke:De=ke-1;Bc=Bc.slice(0,Rb)+ce}}}return Bc}function rg(Rb){if(ci.width===Cd){const Bc=fh(Rb);return gd=>sf(gd,Bc)}if(ci.width===we){const Bc=Jf(Rb);return gd=>~~(.8*gd.length*Bc)}return Bc=>ci.width(Rb,Bc)}function Pg(Rb,Bc){Rb=Rb.font;return(Bc&&Rb?String(Rb).replace(/"/g,"'"):Rb)||"sans-serif"}function fh(Rb,Bc){return(Rb.fontStyle?Rb.fontStyle+" ":"")+(Rb.fontVariant?Rb.fontVariant+" ":"")+(Rb.fontWeight?Rb.fontWeight+" ":"")+Jf(Rb)+"px "+Pg(Rb,Bc)}
function eh(Rb){var Bc=Rb.baseline,gd=Jf(Rb);return Math.round("top"===Bc?.79*gd:"middle"===Bc?.3*gd:"bottom"===Bc?-.21*gd:"line-top"===Bc?.29*gd+.5*tf(Rb):"line-bottom"===Bc?.29*gd-.5*tf(Rb):0)}function Zg(Rb){var Bc=Rb.x||0,gd=Rb.y||0,zd=Rb.radius||0;zd&&(Rb=(Rb.theta||0)-Cf,Bc+=zd*Math.cos(Rb),gd+=zd*Math.sin(Rb));sk.x1=Bc;sk.y1=gd;return sk}function oi(Rb,Bc,gd){var zd=ci.height(Bc),ce=Bc.align,ke=Zg(Bc),De=ke.x1;ke=ke.y1;var Fb=Bc.dx||0,dc=(Bc.dy||0)+eh(Bc)-Math.round(.8*zd),Dc=lf(Bc);w.isArray(Dc)?
(zd+=tf(Bc)*(Dc.length-1),Dc=Dc.reduce((Vc,Ld)=>Math.max(Vc,ci.width(Bc,Ld)),0)):Dc=ci.width(Bc,Dc);"center"===ce?Fb-=Dc/2:"right"===ce&&(Fb-=Dc);Rb.set(Fb+=De,dc+=ke,Fb+Dc,dc+zd);if(Bc.angle&&!gd)Rb.rotate(Bc.angle*Kg,De,ke);else if(2===gd)return Rb.rotatedPoints(Bc.angle*Kg,De,ke);return Rb}function ei(Rb,Bc,gd){var zd=Vi[Rb.mark.marktype];Bc=Bc||zd.bound;zd.nested&&(Rb=Rb.mark);return Bc(Rb.bounds||(Rb.bounds=new Hb),Rb,gd)}function Yh(Rb,Bc,gd){var zd=Vi[Rb.marktype],ce=zd.bound,ke=Rb.items,De=
ke&&ke.length;if(zd.nested)return De?Rb=ke[0]:(Yk.mark=Rb,Rb=Yk),gd=ei(Rb,ce,gd),Bc=Bc&&Bc.union(gd)||gd;Bc=Bc||Rb.bounds&&Rb.bounds.clear()||new Hb;if(De)for(zd=0,De=ke.length;zd<De;++zd)Bc.union(ei(ke[zd],ce,gd));return Rb.bounds=Bc}function wh(Rb,Bc){return JSON.stringify(Rb,jl,Bc)}function Wc(Rb){Rb="string"===typeof Rb?JSON.parse(Rb):Rb;return ib(Rb)}function ib(Rb){var Bc=Rb.marktype,gd=Rb.items,zd;if(gd){var ce=0;for(zd=gd.length;ce<zd;++ce){var ke=Bc?"mark":"group";gd[ce][ke]=Rb;gd[ce].zindex&&
(gd[ce][ke].zdirty=!0);"group"===(Bc||ke)&&ib(gd[ce])}}Bc&&Yh(Rb);return Rb}function Ua(Rb){arguments.length?this.root=Wc(Rb):(this.root=v({marktype:"group",name:"root",role:"frame"}),this.root.items=[new kc(this.root)])}function v(Rb,Bc){Bc={bounds:new Hb,clip:!!Rb.clip,group:Bc,interactive:!1===Rb.interactive?!1:!0,items:[],marktype:Rb.marktype,name:Rb.name||void 0,role:Rb.role||void 0,zindex:Rb.zindex||0};null!=Rb.aria&&(Bc.aria=Rb.aria);Rb.description&&(Bc.description=Rb.description);return Bc}
function Xa(Rb,Bc,gd){!Rb&&"undefined"!==typeof document&&document.createElement&&(Rb=document);return Rb?gd?Rb.createElementNS(gd,Bc):Rb.createElement(Bc):null}function gc(Rb,Bc){Bc=Bc.toLowerCase();Rb=Rb.childNodes;for(var gd=0,zd=Rb.length;gd<zd;++gd)if(Rb[gd].tagName.toLowerCase()===Bc)return Rb[gd]}function wd(Rb,Bc,gd,zd){Bc=Rb.childNodes[Bc];if(!Bc||Bc.tagName.toLowerCase()!==gd.toLowerCase()){var ce=Bc||null;Bc=Xa(Rb.ownerDocument,gd,zd);Rb.insertBefore(Bc,ce)}return Bc}function Ce(Rb,Bc){for(var gd=
Rb.childNodes,zd=gd.length;zd>Bc;)Rb.removeChild(gd[--zd]);return Rb}function Hf(Rb){return"mark-"+Rb.marktype+(Rb.role?" role-"+Rb.role:"")+(Rb.name?" "+Rb.name:"")}function zg(Rb,Bc){const gd=Bc.getBoundingClientRect();return[Rb.clientX-gd.left-(Bc.clientLeft||0),Rb.clientY-gd.top-(Bc.clientTop||0)]}function $g(Rb,Bc){this._active=null;this._handlers={};this._loader=Rb||x.loader();this._tooltip=Bc||lg}function lg(Rb,Bc,gd,zd){Rb.element().setAttribute("title",zd||"")}function Ag(Rb){this._bgcolor=
this._el=null;this._loader=new Ab(Rb)}function Ug(Rb,Bc){$g.call(this,Rb,Bc);this._touch=this._down=null;this._first=!0;this._events={}}function id(Rb,Bc){("touchstart"===Bc||"touchmove"===Bc||"touchend"===Bc?["touchstart","touchmove","touchend"]:[Bc]).forEach(gd=>Bd(Rb,gd))}function Bd(Rb,Bc){const gd=Rb.canvas();gd&&!Rb._events[Bc]&&(Rb._events[Bc]=1,gd.addEventListener(Bc,Rb[Bc]?zd=>Rb[Bc](zd):zd=>Rb.fire(Bc,zd)))}function xe(Rb,Bc,gd){Bc.forEach(zd=>Rb.fire(zd,gd))}function dg(Rb,Bc,gd){return function(zd){const ce=
this._active,ke=this.pickEvent(zd);ke!==ce&&(ce&&ce.exit||xe(this,gd,zd),this._active=ke,xe(this,Bc,zd));xe(this,Rb,zd)}}function Sf(Rb){return function(Bc){xe(this,Rb,Bc);this._active=null}}function Kf(Rb){Ag.call(this,Rb);this._options={};this._redraw=!1;this._dirty=new Hb;this._tempb=new Hb}function wg(Rb,Bc){$g.call(this,Rb,Bc);const gd=this;gd._hrefHandler=xk(gd,(zd,ce)=>{ce&&ce.href&&gd.handleHref(zd,ce,ce.href)});gd._tooltipHandler=xk(gd,(zd,ce)=>{gd.handleTooltip(zd,ce,"pointerout"!==zd.type)})}
function xg(Rb,Bc){var gd=!1===Bc.aria;Rb("aria-hidden",gd||void 0);if(gd||null==Bc.description)for(const zd in Jk)Rb(Jk[zd],void 0);else gd=Bc.mark.marktype,Rb("aria-label",Bc.description),Rb("role",Bc.ariaRole||("group"===gd?"graphics-object":"graphics-symbol")),Rb("aria-roledescription",Bc.ariaRoleDescription||`${gd} mark`)}function dh(Rb){return!1===Rb.aria?{["aria-hidden"]:!0}:ql[Rb.role]?null:rl[Rb.role]?$f(Rb,rl[Rb.role]):cg(Rb)}function cg(Rb){const Bc=Rb.marktype,gd="group"===Bc||"text"===
Bc||Rb.items.some(zd=>null!=zd.description&&!1!==zd.aria);return Uk(gd?"graphics-object":"graphics-symbol",`${Bc} mark container`,Rb.description)}function $f(Rb,Bc){try{const gd=Rb.items[0],zd=Bc.caption||(()=>"");return Uk(Bc.role||"graphics-symbol",Bc.desc,gd.description||zd(gd))}catch(gd){return null}}function Rf(Rb){try{return w.array(w.peek(Rb.items).items[0].text).join(" ")}catch(Bc){return null}}function Gh(Rb){Rb=Rb.map(Bc=>Bc+("fill"===Bc||"stroke"===Bc?" color":""));return 2>Rb.length?Rb[0]:
Rb.slice(0,-1).join(", ")+" and "+w.peek(Rb)}function li(){let Rb="",Bc="",gd="";const zd=[],ce=(De,Fb)=>{null!=Fb&&(Bc+=` ${De}="${Kk(Fb).replace(/"/g,"\x26quot;").replace(/\t/g,"\x26#x9;").replace(/\n/g,"\x26#xA;").replace(/\r/g,"\x26#xD;")}"`);return ke},ke={open(De,...Fb){Bc&&(Rb+=`${Bc}>${gd}`,Bc=gd="");zd.push(De);Bc="\x3c"+De;for(const dc of Fb)for(const Dc in dc)ce(Dc,dc[Dc]);return ke},close(){const De=zd.pop();Rb=Bc?Rb+(Bc+(gd?`>${gd}</${De}>`:"/\x3e")):Rb+`</${De}>`;Bc=gd="";return ke},
attr:ce,text:De=>(gd+=Kk(De),ke),toString:()=>Rb};return ke}function gh(Rb,Bc){Rb.open(Bc.tagName);if(Bc.hasAttributes()){const gd=Bc.attributes,zd=gd.length;for(let ce=0;ce<zd;++ce)Rb.attr(gd[ce].name,gd[ce].value)}if(Bc.hasChildNodes()){Bc=Bc.childNodes;for(const gd of Bc)3===gd.nodeType?Rb.text(gd.nodeValue):gh(Rb,gd)}return Rb.close()}function Lf(Rb){Ag.call(this,Rb);this._dirtyID=0;this._dirty=[];this._defs=this._root=this._svg=null}function bi(Rb,Bc){for(;Rb&&Rb.dirty!==Bc;Rb=Rb.mark.group)if(Rb.dirty=
Bc,Rb.mark&&Rb.mark.dirty!==Bc)Rb.mark.dirty=Bc;else break}function ih(Rb,Bc,gd,zd){Bc=Bc.lastChild.previousSibling;let ce,ke=0;xd(gd,De=>{ce=Rb.mark(Bc,De,ce,zd);++ke});Ce(Bc,1+ke)}function ia(Rb,Bc,gd,zd,ce){let ke=Rb._svg;if(!ke){var De=Bc.ownerDocument;ke=Xa(De,zd,Kh);Rb._svg=ke;Rb.mark&&(ke.__data__=Rb,ke.__values__={fill:"default"},"g"===zd&&(zd=Xa(De,"path",Kh),ke.appendChild(zd),zd.__data__=Rb,zd=Xa(De,"g",Kh),ke.appendChild(zd),zd.__data__=Rb,De=Xa(De,"path",Kh),ke.appendChild(De),De.__data__=
Rb,De.__values__={fill:"default"}))}(ke.ownerSVGElement!==ce||ke.parentNode&&1<ke.parentNode.childNodes.length&&ke.previousSibling!=gd)&&Bc.insertBefore(ke,gd?gd.nextSibling:Bc.firstChild);return ke}function Sa(Rb,Bc,gd){if(Bc!==gk[Rb]){if(gd){var zd=zj;null!=Bc?zd.setAttributeNS(gd,Rb,Bc):zd.removeAttributeNS(gd,Rb)}else Vb(zj,Rb,Bc);gk[Rb]=Bc}}function lb(Rb,Bc,gd){gd!==gk[Bc]&&(null==gd?Rb.style.removeProperty(Bc):Rb.style.setProperty(Bc,gd+""),gk[Bc]=gd)}function Eb(Rb,Bc){for(const gd in Bc)Vb(Rb,
gd,Bc[gd])}function Vb(Rb,Bc,gd){null!=gd?Rb.setAttribute(Bc,gd):Rb.removeAttribute(Bc)}function qc(){let Rb;return"undefined"===typeof window?"":(Rb=window.location).hash?Rb.href.slice(0,-Rb.hash.length):Rb.href}function Za(Rb){Ag.call(this,Rb);this._text=null;this._defs={gradient:{},clipping:{}}}function wb(Rb,Bc,gd,zd,ce){let ke;if(null==Bc)return Rb;"bgrect"===zd&&!1===gd.interactive&&(Rb["pointer-events"]="none");if("bgfore"===zd&&(!1===gd.interactive&&(Rb["pointer-events"]="none"),Rb.display=
"none",null!==Bc.fill))return Rb;"image"===zd&&!1===Bc.smooth&&(ke=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]);"text"===zd&&(Rb["font-family"]=Pg(Bc),Rb["font-size"]=Jf(Bc)+"px",Rb["font-style"]=Bc.fontStyle,Rb["font-variant"]=Bc.fontVariant,Rb["font-weight"]=Bc.fontWeight);for(const De in dk)gd=Bc[De],zd=dk[De],("transparent"!==gd||"fill"!==zd&&"stroke"!==zd)&&null!=gd&&(gd&&gd.gradient&&(gd=B(gd,ce.gradient,"")),Rb[zd]=gd);for(const De in vh)ce=Bc[De],null!=ce&&(ke=ke||[],
ke.push(`${vh[De]}: ${ce};`));ke&&(Rb.style=ke.join(" "));return Rb}function eb(Rb){Ag.call(this,Rb);this._svgRenderer=new Lf(Rb);this._canvasRenderer=new Kf(Rb)}function qb(Rb,Bc){Ug.call(this,Rb,Bc)}function Qb(Rb,Bc,gd,zd){if(Rb.bounds&&Bc.intersects(Rb.bounds)&&("group"===Rb.marktype||!1!==Rb.interactive&&(!gd||gd(Rb)))){const ke=Rb.items;var ce=Rb.marktype;Rb=ke.length;let De=0;if("group"===ce)for(;De<Rb;++De)zc(ke[De],Bc,gd,zd);else for(gd=Vi[ce].isect;De<Rb;++De)ce=ke[De],ad(ce,Bc,gd)&&zd.push(ce)}return zd}
function zc(Rb,Bc,gd,zd){gd&&gd(Rb.mark)&&ad(Rb,Bc,Vi.group.isect)&&zd.push(Rb);const ce=Rb.items,ke=ce&&ce.length;if(ke){const De=Rb.x||0;Rb=Rb.y||0;Bc.translate(-De,-Rb);for(let Fb=0;Fb<ke;++Fb)Qb(ce[Fb],Bc,gd,zd);Bc.translate(De,Rb)}return zd}function ad(Rb,Bc,gd){const zd=Rb.bounds;return Bc.encloses(zd)||Bc.intersects(zd)&&gd(Rb,Bc)}function Rd(Rb,Bc,gd){return Rb===Bc?!0:"path"===gd?Md(Rb,Bc):Rb instanceof Date&&Bc instanceof Date?+Rb===+Bc:w.isNumber(Rb)&&w.isNumber(Bc)?1E-9>=Math.abs(Rb-Bc):
Rb&&Bc&&(w.isObject(Rb)||w.isObject(Bc))?nd(Rb,Bc):Rb==Bc}function Md(Rb,Bc){return Rd(La(Rb),La(Bc))}function nd(Rb,Bc){var gd=Object.keys(Rb),zd=Object.keys(Bc),ce;if(gd.length!==zd.length)return!1;gd.sort();zd.sort();for(ce=gd.length-1;0<=ce;ce--)if(gd[ce]!=zd[ce])return!1;for(ce=gd.length-1;0<=ce;ce--)if(zd=gd[ce],!Rd(Rb[zd],Bc[zd],zd))return!1;return typeof Rb===typeof Bc}let ee=0;const Pd=Math.abs,se=Math.atan2,ye=Math.cos,Oe=Math.max,Se=Math.min,Pe=Math.sin,Xd=Math.sqrt,Ze=Math.PI,Tf=Ze/2,
Xe=2*Ze,Uf=Math.PI,Ue=2*Uf,uf=Ue-1E-6;class Yf{constructor(Rb){this._x0=this._y0=this._x1=this._y1=null;this._="";this._append=null==Rb?X:V(Rb)}moveTo(Rb,Bc){this._append`M${this._x0=this._x1=+Rb},${this._y0=this._y1=+Bc}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(Rb,Bc){this._append`L${this._x1=+Rb},${this._y1=+Bc}`}quadraticCurveTo(Rb,Bc,gd,zd){this._append`Q${+Rb},${+Bc},${this._x1=+gd},${this._y1=+zd}`}bezierCurveTo(Rb,Bc,gd,zd,ce,ke){this._append`C${+Rb},${+Bc},${+gd},${+zd},${this._x1=
+ce},${this._y1=+ke}`}arcTo(Rb,Bc,gd,zd,ce){Rb=+Rb;Bc=+Bc;gd=+gd;zd=+zd;ce=+ce;if(0>ce)throw Error(`negative radius: ${ce}`);var ke=this._x1,De=this._y1;let Fb=gd-Rb,dc=zd-Bc,Dc=ke-Rb,Vc=De-Bc;var Ld=Dc*Dc+Vc*Vc;if(null===this._x1)this._append`M${this._x1=Rb},${this._y1=Bc}`;else if(1E-6<Ld)if(1E-6<Math.abs(Vc*Fb-dc*Dc)&&ce){gd-=ke;zd-=De;let ge=Fb*Fb+dc*dc;De=Math.sqrt(ge);ke=Math.sqrt(Ld);Ld=ce*Math.tan((Uf-Math.acos((ge+Ld-(gd*gd+zd*zd))/(2*De*ke)))/2);ke=Ld/ke;Ld/=De;1E-6<Math.abs(ke-1)&&this._append`L${Rb+
ke*Dc},${Bc+ke*Vc}`;this._append`A${ce},${ce},0,0,${+(Vc*gd>Dc*zd)},${this._x1=Rb+Ld*Fb},${this._y1=Bc+Ld*dc}`}else this._append`L${this._x1=Rb},${this._y1=Bc}`}arc(Rb,Bc,gd,zd,ce,ke){Rb=+Rb;Bc=+Bc;gd=+gd;ke=!!ke;if(0>gd)throw Error(`negative radius: ${gd}`);let De=gd*Math.cos(zd),Fb=gd*Math.sin(zd),dc=Rb+De,Dc=Bc+Fb,Vc=1^ke;zd=ke?zd-ce:ce-zd;null===this._x1?this._append`M${dc},${Dc}`:(1E-6<Math.abs(this._x1-dc)||1E-6<Math.abs(this._y1-Dc))&&this._append`L${dc},${Dc}`;gd&&(0>zd&&(zd=zd%Ue+Ue),zd>
uf?this._append`A${gd},${gd},0,1,${Vc},${Rb-De},${Bc-Fb}A${gd},${gd},0,1,${Vc},${this._x1=dc},${this._y1=Dc}`:1E-6<zd&&this._append`A${gd},${gd},0,${+(zd>=Uf)},${Vc},${this._x1=Rb+gd*Math.cos(ce)},${this._y1=Bc+gd*Math.sin(ce)}`)}rect(Rb,Bc,gd,zd){this._append`M${this._x0=this._x1=+Rb},${this._y0=this._y1=+Bc}h${gd=+gd}v${+zd}h${-gd}Z`}toString(){return this._}}P.prototype=Yf.prototype;ba.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=
0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(Rb,Bc){Rb=+Rb;Bc=+Bc;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(Rb,Bc):this._context.moveTo(Rb,Bc);break;case 1:this._point=2;default:this._context.lineTo(Rb,Bc)}}};var yf={draw(Rb,Bc){Bc=Xd(Bc/Ze);Rb.moveTo(Bc,0);Rb.arc(0,0,Bc,0,Xe)}};H.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=
this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){switch(this._point){case 3:ka(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(Rb,Bc){Rb=+Rb;Bc=+Bc;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(Rb,Bc):this._context.moveTo(Rb,Bc);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/
6,(5*this._y0+this._y1)/6);default:ka(this,Rb,Bc)}this._x0=this._x1;this._x1=Rb;this._y0=this._y1;this._y1=Bc}};oa.prototype={areaStart:ha,areaEnd:ha,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2);this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3);this._context.lineTo((this._x3+
2*this._x2)/3,(this._y3+2*this._y2)/3);this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(Rb,Bc){Rb=+Rb;Bc=+Bc;switch(this._point){case 0:this._point=1;this._x2=Rb;this._y2=Bc;break;case 1:this._point=2;this._x3=Rb;this._y3=Bc;break;case 2:this._point=3;this._x4=Rb;this._y4=Bc;this._context.moveTo((this._x0+4*this._x1+Rb)/6,(this._y0+4*this._y1+Bc)/6);break;default:ka(this,Rb,Bc)}this._x0=this._x1;this._x1=
Rb;this._y0=this._y1;this._y1=Bc}};ea.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(Rb,Bc){Rb=+Rb;Bc=+Bc;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var gd=(this._x0+4*this._x1+Rb)/6,zd=(this._y0+4*this._y1+
Bc)/6;this._line?this._context.lineTo(gd,zd):this._context.moveTo(gd,zd);break;case 3:this._point=4;default:ka(this,Rb,Bc)}this._x0=this._x1;this._x1=Rb;this._y0=this._y1;this._y1=Bc}};D.prototype={lineStart:function(){this._x=[];this._y=[];this._basis.lineStart()},lineEnd:function(){var Rb=this._x,Bc=this._y,gd=Rb.length-1;if(0<gd)for(var zd=Rb[0],ce=Bc[0],ke=Rb[gd]-zd,De=Bc[gd]-ce,Fb=-1,dc;++Fb<=gd;)dc=Fb/gd,this._basis.point(this._beta*Rb[Fb]+(1-this._beta)*(zd+dc*ke),this._beta*Bc[Fb]+(1-this._beta)*
(ce+dc*De));this._x=this._y=null;this._basis.lineEnd()},point:function(Rb,Bc){this._x.push(+Rb);this._y.push(+Bc)}};var vf=function gd(Bc){function zd(ce){return 1===Bc?new H(ce):new D(ce,Bc)}zd.beta=function(ce){return gd(+ce)};return zd}(.85);la.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);
break;case 3:R(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(Bc,gd){Bc=+Bc;gd=+gd;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(Bc,gd):this._context.moveTo(Bc,gd);break;case 1:this._point=2;this._x1=Bc;this._y1=gd;break;case 2:this._point=3;default:R(this,Bc,gd)}this._x0=this._x1;this._x1=this._x2;this._x2=Bc;this._y0=this._y1;this._y1=this._y2;this._y2=gd}};var ne=function zd(gd){function ce(ke){return new la(ke,
gd)}ce.tension=function(ke){return zd(+ke)};return ce}(0);Ia.prototype={areaStart:ha,areaEnd:ha,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),
this.point(this._x5,this._y5)}},point:function(gd,zd){gd=+gd;zd=+zd;switch(this._point){case 0:this._point=1;this._x3=gd;this._y3=zd;break;case 1:this._point=2;this._context.moveTo(this._x4=gd,this._y4=zd);break;case 2:this._point=3;this._x5=gd;this._y5=zd;break;default:R(this,gd,zd)}this._x0=this._x1;this._x1=this._x2;this._x2=gd;this._y0=this._y1;this._y1=this._y2;this._y2=zd}};var wf=function ce(zd){function ke(De){return new Ia(De,zd)}ke.tension=function(De){return ce(+De)};return ke}(0);Ma.prototype=
{areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(zd,ce){zd=+zd;ce=+ce;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);
break;case 3:this._point=4;default:R(this,zd,ce)}this._x0=this._x1;this._x1=this._x2;this._x2=zd;this._y0=this._y1;this._y1=this._y2;this._y2=ce}};var Hh=function ke(ce){function De(Fb){return new Ma(Fb,ce)}De.tension=function(Fb){return ke(+Fb)};return De}(0);ab.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=
0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(ce,ke){ce=+ce;ke=+ke;if(this._point){var De=this._x2-ce,Fb=this._y2-ke;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(De*De+Fb*Fb,this._alpha))}switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(ce,ke):this._context.moveTo(ce,ke);break;case 1:this._point=
2;break;case 2:this._point=3;default:Ta(this,ce,ke)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=ce;this._y0=this._y1;this._y1=this._y2;this._y2=ke}};var ag=function De(ke){function Fb(dc){return ke?new ab(dc,ke):new la(dc,0)}Fb.alpha=function(dc){return De(+dc)};return Fb}(.5);db.prototype={areaStart:ha,areaEnd:ha,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=
this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(ke,De){ke=+ke;De=+De;if(this._point){var Fb=this._x2-
ke,dc=this._y2-De;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Fb*Fb+dc*dc,this._alpha))}switch(this._point){case 0:this._point=1;this._x3=ke;this._y3=De;break;case 1:this._point=2;this._context.moveTo(this._x4=ke,this._y4=De);break;case 2:this._point=3;this._x5=ke;this._y5=De;break;default:Ta(this,ke,De)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=ke;this._y0=this._y1;this._y1=this._y2;this._y2=De}};
var ph=function Fb(De){function dc(Dc){return De?new db(Dc,De):new Ia(Dc,0)}dc.alpha=function(Dc){return Fb(+Dc)};return dc}(.5);ub.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(De,
Fb){De=+De;Fb=+Fb;if(this._point){var dc=this._x2-De,Dc=this._y2-Fb;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(dc*dc+Dc*Dc,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ta(this,De,Fb)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=
this._x2;this._x2=De;this._y0=this._y1;this._y1=this._y2;this._y2=Fb}};var mh=function dc(Fb){function Dc(Vc){return Fb?new ub(Vc,Fb):new Ma(Vc,0)}Dc.alpha=function(Vc){return dc(+Vc)};return Dc}(.5);pb.prototype={areaStart:ha,areaEnd:ha,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(Fb,dc){Fb=+Fb;dc=+dc;this._point?this._context.lineTo(Fb,dc):(this._point=1,this._context.moveTo(Fb,dc))}};Ha.prototype={areaStart:function(){this._line=
0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Pa(this,this._t0,Va(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(Fb,dc){var Dc=NaN;Fb=+Fb;dc=+dc;if(Fb!==this._x1||dc!==this._y1){switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(Fb,
dc):this._context.moveTo(Fb,dc);break;case 1:this._point=2;break;case 2:this._point=3;Pa(this,Va(this,Dc=Ya(this,Fb,dc)),Dc);break;default:Pa(this,this._t0,Dc=Ya(this,Fb,dc))}this._x0=this._x1;this._x1=Fb;this._y0=this._y1;this._y1=dc;this._t0=Dc}}};(Ca.prototype=Object.create(Ha.prototype)).point=function(Fb,dc){Ha.prototype.point.call(this,dc,Fb)};Aa.prototype={moveTo:function(Fb,dc){this._context.moveTo(dc,Fb)},closePath:function(){this._context.closePath()},lineTo:function(Fb,dc){this._context.lineTo(dc,
Fb)},bezierCurveTo:function(Fb,dc,Dc,Vc,Ld,ge){this._context.bezierCurveTo(dc,Fb,Vc,Dc,ge,Ld)}};Ga.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[];this._y=[]},lineEnd:function(){var Fb=this._x,dc=this._y,Dc=Fb.length;if(Dc)if(this._line?this._context.lineTo(Fb[0],dc[0]):this._context.moveTo(Fb[0],dc[0]),2===Dc)this._context.lineTo(Fb[1],dc[1]);else for(var Vc=Ka(Fb),Ld=Ka(dc),ge=0,te=1;te<Dc;++ge,++te)this._context.bezierCurveTo(Vc[0][ge],
Ld[0][ge],Vc[1][ge],Ld[1][ge],Fb[te],dc[te]);(this._line||0!==this._line&&1===Dc)&&this._context.closePath();this._line=1-this._line;this._x=this._y=null},point:function(Fb,dc){this._x.push(+Fb);this._y.push(+dc)}};cb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN;this._point=0},lineEnd:function(){0<this._t&&1>this._t&&2===this._point&&this._context.lineTo(this._x,this._y);(this._line||0!==this._line&&1===this._point)&&this._context.closePath();
0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(Fb,dc){Fb=+Fb;dc=+dc;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(Fb,dc):this._context.moveTo(Fb,dc);break;case 1:this._point=2;default:if(0>=this._t)this._context.lineTo(this._x,dc),this._context.lineTo(Fb,dc);else{var Dc=this._x*(1-this._t)+Fb*this._t;this._context.lineTo(Dc,this._y);this._context.lineTo(Dc,dc)}}this._x=Fb;this._y=dc}};const of={basis:{curve:function(Fb){return new H(Fb)}},"basis-closed":{curve:function(Fb){return new oa(Fb)}},
"basis-open":{curve:function(Fb){return new ea(Fb)}},bundle:{curve:vf,tension:"beta",value:.85},cardinal:{curve:ne,tension:"tension",value:0},"cardinal-open":{curve:Hh,tension:"tension",value:0},"cardinal-closed":{curve:wf,tension:"tension",value:0},"catmull-rom":{curve:ag,tension:"alpha",value:.5},"catmull-rom-closed":{curve:ph,tension:"alpha",value:.5},"catmull-rom-open":{curve:mh,tension:"alpha",value:.5},linear:{curve:O},"linear-closed":{curve:function(Fb){return new pb(Fb)}},monotone:{horizontal:function(Fb){return new Ca(Fb)},
vertical:function(Fb){return new Ha(Fb)}},natural:{curve:function(Fb){return new Ga(Fb)}},step:{curve:function(Fb){return new cb(Fb,.5)}},"step-after":{curve:function(Fb){return new cb(Fb,1)}},"step-before":{curve:function(Fb){return new cb(Fb,0)}}},qh={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Ii=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Fi=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Nh=/^((\s+,?\s*)|(,\s*))/,jh=/^[01]/,Kg=Math.PI/180,Cf=Math.PI/2,nh=2*Math.PI,Ui=Math.sqrt(3)/2;var Gi=
{},oh={},$d=[].join;const ug=["l",0,0,0,0,0,0,0],nj={circle:{draw:function(Fb,dc){dc=Math.sqrt(dc)/2;Fb.moveTo(dc,0);Fb.arc(0,0,dc,0,nh)}},cross:{draw:function(Fb,dc){dc=Math.sqrt(dc)/2;var Dc=dc/2.5;Fb.moveTo(-dc,-Dc);Fb.lineTo(-dc,Dc);Fb.lineTo(-Dc,Dc);Fb.lineTo(-Dc,dc);Fb.lineTo(Dc,dc);Fb.lineTo(Dc,Dc);Fb.lineTo(dc,Dc);Fb.lineTo(dc,-Dc);Fb.lineTo(Dc,-Dc);Fb.lineTo(Dc,-dc);Fb.lineTo(-Dc,-dc);Fb.lineTo(-Dc,-Dc);Fb.closePath()}},diamond:{draw:function(Fb,dc){dc=Math.sqrt(dc)/2;Fb.moveTo(-dc,0);Fb.lineTo(0,
-dc);Fb.lineTo(dc,0);Fb.lineTo(0,dc);Fb.closePath()}},square:{draw:function(Fb,dc){dc=Math.sqrt(dc);var Dc=-dc/2;Fb.rect(Dc,Dc,dc,dc)}},arrow:{draw:function(Fb,dc){dc=Math.sqrt(dc)/2;var Dc=dc/7,Vc=dc/2.5,Ld=dc/8;Fb.moveTo(-Dc,dc);Fb.lineTo(Dc,dc);Fb.lineTo(Dc,-Ld);Fb.lineTo(Vc,-Ld);Fb.lineTo(0,-dc);Fb.lineTo(-Vc,-Ld);Fb.lineTo(-Dc,-Ld);Fb.closePath()}},wedge:{draw:function(Fb,dc){var Dc=Math.sqrt(dc)/2;dc=Ui*Dc;var Vc=dc-.5773502691896257*Dc;Dc/=4;Fb.moveTo(0,-dc-Vc);Fb.lineTo(-Dc,dc-Vc);Fb.lineTo(Dc,
dc-Vc);Fb.closePath()}},triangle:{draw:function(Fb,dc){dc=Math.sqrt(dc)/2;var Dc=Ui*dc,Vc=Dc-.5773502691896257*dc;Fb.moveTo(0,-Dc-Vc);Fb.lineTo(-dc,Dc-Vc);Fb.lineTo(dc,Dc-Vc);Fb.closePath()}},"triangle-up":{draw:function(Fb,dc){dc=Math.sqrt(dc)/2;var Dc=Ui*dc;Fb.moveTo(0,-Dc);Fb.lineTo(-dc,Dc);Fb.lineTo(dc,Dc);Fb.closePath()}},"triangle-down":{draw:function(Fb,dc){dc=Math.sqrt(dc)/2;var Dc=Ui*dc;Fb.moveTo(0,Dc);Fb.lineTo(-dc,-Dc);Fb.lineTo(dc,-Dc);Fb.closePath()}},"triangle-right":{draw:function(Fb,
dc){dc=Math.sqrt(dc)/2;var Dc=Ui*dc;Fb.moveTo(Dc,0);Fb.lineTo(-Dc,-dc);Fb.lineTo(-Dc,dc);Fb.closePath()}},"triangle-left":{draw:function(Fb,dc){dc=Math.sqrt(dc)/2;var Dc=Ui*dc;Fb.moveTo(-Dc,0);Fb.lineTo(Dc,-dc);Fb.lineTo(Dc,dc);Fb.closePath()}},stroke:{draw:function(Fb,dc){dc=Math.sqrt(dc)/2;Fb.moveTo(-dc,0);Fb.lineTo(dc,0)}}};var eg={};const Zd=Fb=>Fb.x||0,ve=Fb=>Fb.y||0,Sb=Fb=>!1!==Fb.defined,Qc=function(){function Fb(){var jf,Dg=+dc.apply(this,arguments),gg=+Dc.apply(this,arguments),Eg=ge.apply(this,
arguments)-Tf,Ph=te.apply(this,arguments)-Tf,Sg=Pd(Ph-Eg),Ei=Ph>Eg;pe||(pe=jf=Qf());if(gg<Dg){var Vj=gg;gg=Dg;Dg=Vj}if(1E-12<gg)if(Sg>Xe-1E-12)pe.moveTo(gg*ye(Eg),gg*Pe(Eg)),pe.arc(0,0,gg,Eg,Ph,!Ei),1E-12<Dg&&(pe.moveTo(Dg*ye(Ph),Dg*Pe(Ph)),pe.arc(0,0,Dg,Ph,Eg,Ei));else{var Mh=Eg,$h=Ph;Vj=Eg;var ll=Ph,sh=Sg,Zh=Sg,Uj=Te.apply(this,arguments)/2,Rj=1E-12<Uj&&(Ld?+Ld.apply(this,arguments):Xd(Dg*Dg+gg*gg)),Mi=Se(Pd(gg-Dg)/2,+Vc.apply(this,arguments)),si=Mi,ai=Mi;if(1E-12<Rj){var Wj=U(Rj/Dg*Pe(Uj));Uj=
U(Rj/gg*Pe(Uj));1E-12<(sh-=2*Wj)?(Wj*=Ei?1:-1,Vj+=Wj,ll-=Wj):(sh=0,Vj=ll=(Eg+Ph)/2);1E-12<(Zh-=2*Uj)?(Uj*=Ei?1:-1,Mh+=Uj,$h-=Uj):(Zh=0,Mh=$h=(Eg+Ph)/2)}Eg=gg*ye(Mh);Ph=gg*Pe(Mh);Wj=Dg*ye(ll);Uj=Dg*Pe(ll);if(1E-12<Mi){var Jj=gg*ye($h),xh=gg*Pe($h),sg=Dg*ye(Vj),Bh=Dg*Pe(Vj);if(Sg<Ze){si=sg-Eg;ai=Bh-Ph;Sg=Wj-Jj;Rj=Uj-xh;var ti=Rj*si-Sg*ai;1E-12>ti*ti?si=void 0:(ti=(Sg*(Ph-xh)-Rj*(Eg-Jj))/ti,si=[Eg+ti*si,Ph+ti*ai]);si?(ai=Eg-si[0],Sg=Ph-si[1],Rj=Jj-si[0],ti=xh-si[1],ai=(ai*Rj+Sg*ti)/(Xd(ai*ai+Sg*Sg)*
Xd(Rj*Rj+ti*ti)),ai=1/Pe((1<ai?0:-1>ai?Ze:Math.acos(ai))/2),Sg=Xd(si[0]*si[0]+si[1]*si[1]),si=Se(Mi,(Dg-Sg)/(ai-1)),ai=Se(Mi,(gg-Sg)/(ai+1))):si=ai=0}}1E-12<Zh?1E-12<ai?(Mh=J(sg,Bh,Eg,Ph,gg,ai,Ei),$h=J(Jj,xh,Wj,Uj,gg,ai,Ei),pe.moveTo(Mh.cx+Mh.x01,Mh.cy+Mh.y01),ai<Mi?pe.arc(Mh.cx,Mh.cy,ai,se(Mh.y01,Mh.x01),se($h.y01,$h.x01),!Ei):(pe.arc(Mh.cx,Mh.cy,ai,se(Mh.y01,Mh.x01),se(Mh.y11,Mh.x11),!Ei),pe.arc(0,0,gg,se(Mh.cy+Mh.y11,Mh.cx+Mh.x11),se($h.cy+$h.y11,$h.cx+$h.x11),!Ei),pe.arc($h.cx,$h.cy,ai,se($h.y11,
$h.x11),se($h.y01,$h.x01),!Ei))):(pe.moveTo(Eg,Ph),pe.arc(0,0,gg,Mh,$h,!Ei)):pe.moveTo(Eg,Ph);1E-12<Dg&&1E-12<sh?1E-12<si?(Mh=J(Wj,Uj,Jj,xh,Dg,-si,Ei),$h=J(Eg,Ph,sg,Bh,Dg,-si,Ei),pe.lineTo(Mh.cx+Mh.x01,Mh.cy+Mh.y01),si<Mi?pe.arc(Mh.cx,Mh.cy,si,se(Mh.y01,Mh.x01),se($h.y01,$h.x01),!Ei):(pe.arc(Mh.cx,Mh.cy,si,se(Mh.y01,Mh.x01),se(Mh.y11,Mh.x11),!Ei),pe.arc(0,0,Dg,se(Mh.cy+Mh.y11,Mh.cx+Mh.x11),se($h.cy+$h.y11,$h.cx+$h.x11),Ei),pe.arc($h.cx,$h.cy,si,se($h.y11,$h.x11),se($h.y01,$h.x01),!Ei))):pe.arc(0,
0,Dg,ll,Vj,Ei):pe.lineTo(Wj,Uj)}else pe.moveTo(0,0);pe.closePath();if(jf)return pe=null,jf+""||null}var dc=G,Dc=Y,Vc=da(0),Ld=null,ge=Q,te=ja,Te=pa,pe=null,Qf=z(Fb);Fb.centroid=function(){var jf=(+dc.apply(this,arguments)+ +Dc.apply(this,arguments))/2,Dg=(+ge.apply(this,arguments)+ +te.apply(this,arguments))/2-Ze/2;return[ye(Dg)*jf,Pe(Dg)*jf]};Fb.innerRadius=function(jf){return arguments.length?(dc="function"===typeof jf?jf:da(+jf),Fb):dc};Fb.outerRadius=function(jf){return arguments.length?(Dc="function"===
typeof jf?jf:da(+jf),Fb):Dc};Fb.cornerRadius=function(jf){return arguments.length?(Vc="function"===typeof jf?jf:da(+jf),Fb):Vc};Fb.padRadius=function(jf){return arguments.length?(Ld=null==jf?null:"function"===typeof jf?jf:da(+jf),Fb):Ld};Fb.startAngle=function(jf){return arguments.length?(ge="function"===typeof jf?jf:da(+jf),Fb):ge};Fb.endAngle=function(jf){return arguments.length?(te="function"===typeof jf?jf:da(+jf),Fb):te};Fb.padAngle=function(jf){return arguments.length?(Te="function"===typeof jf?
jf:da(+jf),Fb):Te};Fb.context=function(jf){return arguments.length?(pe=null==jf?null:jf,Fb):pe};return Fb}().startAngle(Fb=>Fb.startAngle||0).endAngle(Fb=>Fb.endAngle||0).padAngle(Fb=>Fb.padAngle||0).innerRadius(Fb=>Fb.innerRadius||0).outerRadius(Fb=>Fb.outerRadius||0).cornerRadius(Fb=>Fb.cornerRadius||0),ud=aa().x(Zd).y1(ve).y0(Fb=>(Fb.y||0)+(Fb.height||0)).defined(Sb),oe=aa().y(ve).x1(Zd).x0(Fb=>(Fb.x||0)+(Fb.width||0)).defined(Sb),ue=ta().x(Zd).y(ve).defined(Sb),Of=oc().x(Zd).y(ve).width(Fb=>Fb.width||
0).height(Fb=>Fb.height||0).cornerRadius(Fb=>Mc(Fb.cornerRadiusTopLeft,Fb.cornerRadius)||0,Fb=>Mc(Fb.cornerRadiusTopRight,Fb.cornerRadius)||0,Fb=>Mc(Fb.cornerRadiusBottomRight,Fb.cornerRadius)||0,Fb=>Mc(Fb.cornerRadiusBottomLeft,Fb.cornerRadius)||0),kf=function(Fb,dc){function Dc(){let ge;Vc||(Vc=ge=Ld());Fb.apply(this,arguments).draw(Vc,+dc.apply(this,arguments));if(ge)return Vc=null,ge+""||null}let Vc=null,Ld=z(Dc);Fb="function"===typeof Fb?Fb:da(Fb||yf);dc="function"===typeof dc?dc:da(void 0===
dc?64:+dc);Dc.type=function(ge){return arguments.length?(Fb="function"===typeof ge?ge:da(ge),Dc):Fb};Dc.size=function(ge){return arguments.length?(dc="function"===typeof ge?ge:da(+ge),Dc):dc};Dc.context=function(ge){return arguments.length?(Vc=null==ge?null:ge,Dc):Vc};return Dc}().type(Fb=>sc(Fb.shape||"circle")).size(Fb=>Mc(Fb.size,64)),fg=Cc().x(Zd).y(ve).defined(Sb).size(Fb=>Fb.size||1);var Zf=1;Hb.prototype={clone(){return new Hb(this)},clear(){this.x1=+Number.MAX_VALUE;this.y1=+Number.MAX_VALUE;
this.x2=-Number.MAX_VALUE;this.y2=-Number.MAX_VALUE;return this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(Fb){return this.x1===Fb.x1&&this.y1===Fb.y1&&this.x2===Fb.x2&&this.y2===Fb.y2},set(Fb,dc,Dc,Vc){Dc<Fb?(this.x2=Fb,this.x1=Dc):(this.x1=Fb,this.x2=Dc);Vc<dc?(this.y2=dc,this.y1=Vc):(this.y1=dc,this.y2=Vc);return this},add(Fb,dc){Fb<this.x1&&(this.x1=Fb);dc<this.y1&&(this.y1=dc);Fb>this.x2&&(this.x2=
Fb);dc>this.y2&&(this.y2=dc);return this},expand(Fb){this.x1-=Fb;this.y1-=Fb;this.x2+=Fb;this.y2+=Fb;return this},round(){this.x1=Math.floor(this.x1);this.y1=Math.floor(this.y1);this.x2=Math.ceil(this.x2);this.y2=Math.ceil(this.y2);return this},scale(Fb){this.x1*=Fb;this.y1*=Fb;this.x2*=Fb;this.y2*=Fb;return this},translate(Fb,dc){this.x1+=Fb;this.x2+=Fb;this.y1+=dc;this.y2+=dc;return this},rotate(Fb,dc,Dc){Fb=this.rotatedPoints(Fb,dc,Dc);return this.clear().add(Fb[0],Fb[1]).add(Fb[2],Fb[3]).add(Fb[4],
Fb[5]).add(Fb[6],Fb[7])},rotatedPoints(Fb,dc,Dc){var {x1:Vc,y1:Ld,x2:ge,y2:te}=this,Te=Math.cos(Fb);Fb=Math.sin(Fb);var pe=dc-dc*Te+Dc*Fb;dc=Dc-dc*Fb-Dc*Te;return[Te*Vc-Fb*Ld+pe,Fb*Vc+Te*Ld+dc,Te*Vc-Fb*te+pe,Fb*Vc+Te*te+dc,Te*ge-Fb*Ld+pe,Fb*ge+Te*Ld+dc,Te*ge-Fb*te+pe,Fb*ge+Te*te+dc]},union(Fb){Fb.x1<this.x1&&(this.x1=Fb.x1);Fb.y1<this.y1&&(this.y1=Fb.y1);Fb.x2>this.x2&&(this.x2=Fb.x2);Fb.y2>this.y2&&(this.y2=Fb.y2);return this},intersect(Fb){Fb.x1>this.x1&&(this.x1=Fb.x1);Fb.y1>this.y1&&(this.y1=
Fb.y1);Fb.x2<this.x2&&(this.x2=Fb.x2);Fb.y2<this.y2&&(this.y2=Fb.y2);return this},encloses(Fb){return Fb&&this.x1<=Fb.x1&&this.x2>=Fb.x2&&this.y1<=Fb.y1&&this.y2>=Fb.y2},alignsWith(Fb){return Fb&&(this.x1==Fb.x1||this.x2==Fb.x2||this.y1==Fb.y1||this.y2==Fb.y2)},intersects(Fb){return Fb&&!(this.x2<Fb.x1||this.x1>Fb.x2||this.y2<Fb.y1||this.y1>Fb.y2)},contains(Fb,dc){return!(Fb<this.x1||Fb>this.x2||dc<this.y1||dc>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};w.inherits(kc,
Jc);Ab.prototype={pending(){return this._pending},sanitizeURL(Fb){const dc=this;dc._pending+=1;return dc._loader.sanitize(Fb,{context:"href"}).then(Dc=>{--dc._pending;return Dc}).catch(()=>{--dc._pending;return null})},loadImage(Fb){const dc=this,Dc=u.image();dc._pending+=1;return dc._loader.sanitize(Fb,{context:"image"}).then(Vc=>{const Ld=Vc.href;if(!Ld||!Dc)throw{url:Ld};const ge=new Dc;Vc=w.hasOwnProperty(Vc,"crossOrigin")?Vc.crossOrigin:"anonymous";null!=Vc&&(ge.crossOrigin=Vc);ge.onload=()=>
{--dc._pending};ge.onerror=()=>{--dc._pending};ge.src=Ld;return ge}).catch(Vc=>{--dc._pending;return{complete:!1,width:0,height:0,src:Vc&&Vc.url||""}})},ready(){const Fb=this;return new Promise(dc=>{function Dc(Vc){Fb.pending()?setTimeout(()=>{Dc(!0)},10):dc(Vc)}Dc(!1)})}};const qg=nh-1E-8;let lh,pi,bj,Sh,Eh,cj,ji,ng;const kh=(Fb,dc)=>{Fb=pi=Fb;dc=bj=dc;return lh.add(Fb,dc)},T=Fb=>lh.add(Fb,lh.y1),Oa=Fb=>lh.add(lh.x1,Fb),zb=(Fb,dc)=>lh.add(Eh*Fb+ji*dc,cj*Fb+ng*dc),Ac=(Fb,dc)=>kh(Eh*Fb+ji*dc,cj*Fb+
ng*dc),jd={beginPath(){},closePath(){},moveTo:Ac,lineTo:Ac,rect(Fb,dc,Dc,Vc){Sh?(zb(Fb+Dc,dc),zb(Fb+Dc,dc+Vc),zb(Fb,dc+Vc),Ac(Fb,dc)):(lh.add(Fb+Dc,dc+Vc),kh(Fb,dc))},quadraticCurveTo(Fb,dc,Dc,Vc){const Ld=cj*Fb+ng*dc,ge=Eh*Dc+ji*Vc;Dc=cj*Dc+ng*Vc;hd(pi,Eh*Fb+ji*dc,ge,T);hd(bj,Ld,Dc,Oa);kh(ge,Dc)},bezierCurveTo(Fb,dc,Dc,Vc,Ld,ge){const te=cj*Fb+ng*dc,Te=cj*Dc+ng*Vc,pe=Eh*Ld+ji*ge;Ld=cj*Ld+ng*ge;Ed(pi,Eh*Fb+ji*dc,Eh*Dc+ji*Vc,pe,T);Ed(bj,te,Te,Ld,Oa);kh(pe,Ld)},arc(Fb,dc,Dc,Vc,Ld,ge){Vc+=Sh;Ld+=Sh;
pi=Dc*Math.cos(Ld)+Fb;bj=Dc*Math.sin(Ld)+dc;if(Math.abs(Ld-Vc)>qg)lh.add(Fb-Dc,dc-Dc),lh.add(Fb+Dc,dc+Dc);else{const te=pe=>lh.add(Dc*Math.cos(pe)+Fb,Dc*Math.sin(pe)+dc);let Te;te(Vc);te(Ld);if(Ld!==Vc)if(Vc%=nh,0>Vc&&(Vc+=nh),Ld%=nh,0>Ld&&(Ld+=nh),Ld<Vc&&(ge=!ge,Te=Vc,Vc=Ld,Ld=Te),ge)for(Ld-=nh,Te=Vc-Vc%Cf,Vc=0;4>Vc&&Te>Ld;++Vc,Te-=Cf)te(Te);else for(Te=Vc-Vc%Cf+Cf,Vc=0;4>Vc&&Te<Ld;++Vc,Te+=Cf)te(Te)}}};var je=(je=u.canvas(1,1))?je.getContext("2d"):null;const Ne=new Hb;var ff=[],ig=bg("arc",function(Fb,
dc){return Qc.context(Fb)(dc)}),Dh=rf("area",function(Fb,dc){const Dc=dc[0];return("horizontal"===Dc.orient?oe:ud).curve(fb(Dc.interpolate||"linear",Dc.orient,Dc.tension)).context(Fb)(dc)},function(Fb,dc){dc="horizontal"===Fb[0].orient?dc[1]:dc[0];for(var Dc="horizontal"===Fb[0].orient?"y":"x",Vc=Fb.length,Ld=Infinity,ge,te;0<=--Vc;)!1!==Fb[Vc].defined&&(te=Math.abs(Fb[Vc][Dc]-dc),te<Ld&&(Ld=te,ge=Fb[Vc]));return ge});const Di=Bf(gf),Si=Bf(gf,!1),pl=Bf(gf,!0);var Aj={type:"group",tag:"g",nested:!1,
attr:function(Fb,dc){Fb("transform",Ye(dc.x||0,dc.y||0))},bound:function(Fb,dc){if(!dc.clip&&dc.items){const Dc=dc.items,Vc=Dc.length;for(let Ld=0;Ld<Vc;++Ld)Fb.union(Dc[Ld].bounds)}(dc.clip||dc.width||dc.height)&&!dc.noBound&&Fb.add(0,0).add(dc.width||0,dc.height||0);md(Fb,dc);return Fb.translate(dc.x||0,dc.y||0)},draw:function(Fb,dc,Dc,Vc){xd(dc,Ld=>{const ge=Ld.x||0,te=Ld.y||0,Te=Ld.strokeForeground,pe=null==Ld.opacity?1:Ld.opacity;(Ld.stroke||Ld.fill)&&pe&&(gf(Fb,Ld,ge,te),cc(Fb,Ld),Ld.fill&&
cd(Fb,Ld,pe)&&Fb.fill(),Ld.stroke&&!Te&&bd(Fb,Ld,pe)&&Fb.stroke());Fb.save();Fb.translate(ge,te);Ld.clip&&Ff(Fb,Ld);Dc&&Dc.translate(-ge,-te);xd(Ld,Qf=>{("group"===Qf.marktype||null==Vc||Vc.includes(Qf.marktype))&&this.draw(Fb,Qf,Dc,Vc)});Dc&&Dc.translate(ge,te);Fb.restore();Te&&Ld.stroke&&pe&&(gf(Fb,Ld,ge,te),cc(Fb,Ld),bd(Fb,Ld,pe)&&Fb.stroke())})},pick:function(Fb,dc,Dc,Vc,Ld,ge){if(dc.bounds&&!dc.bounds.contains(Ld,ge)||!dc.items)return null;const te=Dc*Fb.pixelRatio,Te=Vc*Fb.pixelRatio;return sd(dc,
pe=>{let Qf,jf;var Dg=pe.bounds;if(!Dg||Dg.contains(Ld,ge)){Qf=pe.x||0;jf=pe.y||0;Dg=Qf+(pe.width||0);var gg=jf+(pe.height||0),Eg=pe.clip;if(!Eg||!(Ld<Qf||Ld>Dg||ge<jf||ge>gg)){Fb.save();Fb.translate(Qf,jf);Qf=Ld-Qf;jf=ge-jf;if(Eg&&Pb(pe)&&!pl(Fb,pe,te,Te))return Fb.restore(),null;gg=pe.strokeForeground;if((Eg=!1!==dc.interactive)&&gg&&pe.stroke&&Si(Fb,pe,te,Te))return Fb.restore(),pe;Dg=sd(pe,Ph=>(!1!==Ph.interactive||"group"===Ph.marktype)&&Ph.bounds&&Ph.bounds.contains(Qf,jf)?this.pick(Ph,Dc,Vc,
Qf,jf):null);!Dg&&Eg&&(pe.fill||!gg&&pe.stroke)&&Di(Fb,pe,te,Te)&&(Dg=pe);Fb.restore();return Dg||null}}})},isect:bc,content:function(Fb,dc,Dc){dc=dc.clip?rc(Dc,dc,dc):null;Fb("clip-path",dc)},background:function(Fb,dc){Fb("class","background");Fb("aria-hidden",!0);const Dc=pg(dc);Fb("d",nc(null,dc,Dc,Dc))},foreground:function(Fb,dc){Fb("class","foreground");Fb("aria-hidden",!0);if(dc.strokeForeground){const Dc=pg(dc);Fb("d",nc(null,dc,Dc,Dc))}else Fb("d","")}},Hj={xmlns:"http://www.w3.org/2000/svg",
"xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"},ck={type:"image",tag:"image",nested:!1,attr:function(Fb,dc,Dc){var Vc=Jb(dc,Dc);Dc=lc(dc,Vc);const Ld=Uc(dc,Vc),ge=(dc.x||0)-Zc(dc.align,Dc),te=(dc.y||0)-rd(dc.baseline,Ld);Vc=!Vc.src&&Vc.toDataURL?Vc.toDataURL():Vc.src||"";Fb("href",Vc,Hj["xmlns:xlink"],"xlink:href");Fb("transform",Ye(ge,te));Fb("width",Dc);Fb("height",Ld);Fb("preserveAspectRatio",!1===dc.aspect?"none":"xMidYMid")},bound:function(Fb,dc){var Dc=dc.image;const Vc=lc(dc,Dc);
Dc=Uc(dc,Dc);const Ld=(dc.x||0)-Zc(dc.align,Vc);dc=(dc.y||0)-rd(dc.baseline,Dc);return Fb.set(Ld,dc,Ld+Vc,dc+Dc)},draw:function(Fb,dc,Dc){xd(dc,Vc=>{if(!Dc||Dc.intersects(Vc.bounds)){var Ld=Jb(Vc,this),ge=lc(Vc,Ld),te=Uc(Vc,Ld);if(0!==ge&&0!==te){var Te=(Vc.x||0)-Zc(Vc.align,ge),pe=(Vc.y||0)-rd(Vc.baseline,te),Qf;if(!1!==Vc.aspect){var jf=Ld.width/Ld.height;var Dg=Vc.width/Vc.height;jf===jf&&Dg===Dg&&jf!==Dg&&(Dg<jf?(jf=ge/jf,pe+=(te-jf)/2,te=jf):(jf*=te,Te+=(ge-jf)/2,ge=jf))}if(Ld.complete||Ld.toDataURL)cc(Fb,
Vc),Fb.globalAlpha=null!=(Qf=Vc.opacity)?Qf:1,Fb.imageSmoothingEnabled=!1!==Vc.smooth,Fb.drawImage(Ld,Te,pe,ge,te)}}})},pick:Fe(),isect:w.truthy,get:Jb,xOffset:Zc,yOffset:rd},Ck=rf("line",function(Fb,dc){const Dc=dc[0];return ue.curve(fb(Dc.interpolate||"linear",Dc.orient,Dc.tension)).context(Fb)(dc)},function(Fb,dc){for(var Dc=Math.pow(Fb[0].strokeWidth||1,2),Vc=Fb.length,Ld,ge;0<=--Vc;)if(!1!==Fb[Vc].defined&&(Ld=Fb[Vc].x-dc[0],ge=Fb[Vc].y-dc[1],Ld=Ld*Ld+ge*ge,Ld<Dc))return Fb[Vc];return null}),
Ri={type:"path",tag:"path",nested:!1,attr:function(Fb,dc){var Dc=dc.scaleY||1;1===(dc.scaleX||1)&&1===Dc||Fb("vector-effect","non-scaling-stroke");Dc=Ye(dc.x||0,dc.y||0)+(dc.angle?" rotate("+(dc.angle+")"):"")+(dc.scaleX||dc.scaleY?" scale("+((dc.scaleX||1)+","+(dc.scaleY||1)+")"):"");Fb("transform",Dc);Fb("d",dc.path)},bound:function(Fb,dc){return Nd(yd(Fb,dc.angle),dc)?Fb.set(0,0,0,0):md(Fb,dc,!0)},draw:Vd(Nd),pick:Fe(Bf(Nd)),isect:fd(Nd)},jk={type:"rect",tag:"path",nested:!1,attr:function(Fb,dc){Fb("d",
nc(null,dc))},bound:function(Fb,dc){var Dc,Vc;return md(Fb.set(Dc=dc.x||0,Vc=dc.y||0,Dc+dc.width||0,Vc+dc.height||0),dc)},draw:Vd(he),pick:Fe(Bf(he)),isect:bc},Gj={type:"rule",tag:"line",nested:!1,attr:function(Fb,dc){Fb("transform",Ye(dc.x||0,dc.y||0));Fb("x2",null!=dc.x2?dc.x2-(dc.x||0):0);Fb("y2",null!=dc.y2?dc.y2-(dc.y||0):0)},bound:function(Fb,dc){var Dc,Vc;return md(Fb.set(Dc=dc.x||0,Vc=dc.y||0,null!=dc.x2?dc.x2:Dc,null!=dc.y2?dc.y2:Vc),dc)},draw:function(Fb,dc,Dc){xd(dc,Vc=>{if(!Dc||Dc.intersects(Vc.bounds)){var Ld=
null==Vc.opacity?1:Vc.opacity;Ld&&qd(Fb,Vc,Ld)&&(cc(Fb,Vc),Fb.stroke())}})},pick:Fe(function(Fb,dc,Dc,Vc){return Fb.isPointInStroke?qd(Fb,dc,1)&&Fb.isPointInStroke(Dc,Vc):!1}),isect:yc},Ik=bg("shape",function(Fb,dc){return(dc.mark.shape||dc.shape).context(Fb)(dc)}),wk=bg("symbol",function(Fb,dc){return kf.context(Fb)(dc)},ed);const $k=w.lruCache();var ci={height:Jf,measureWidth:Cd,estimateWidth:we,width:we,canvas:qe};qe(!0);const Ng={left:"start",center:"middle",right:"end"},sk=new Hb;var Ji={type:"text",
tag:"text",nested:!1,attr:function(Fb,dc){var Dc=dc.dx||0,Vc=(dc.dy||0)+eh(dc),Ld=Zg(dc),ge=Ld.x1;Ld=Ld.y1;var te=dc.angle||0;Fb("text-anchor",Ng[dc.align]||"start");if(te){if(dc=Ye(ge,Ld)+" rotate("+(te+")"),Dc||Vc)dc+=" "+Ye(Dc,Vc)}else dc=Ye(ge+Dc,Ld+Vc);Fb("transform",dc)},bound:oi,draw:function(Fb,dc,Dc){xd(dc,Vc=>{var Ld=null==Vc.opacity?1:Vc.opacity,ge;if(!(Dc&&!Dc.intersects(Vc.bounds)||0===Ld||0>=Vc.fontSize||null==Vc.text||0===Vc.text.length)){Fb.font=fh(Vc);Fb.textAlign=Vc.align||"left";
var te=Zg(Vc);var Te=te.x1;te=te.y1;Vc.angle&&(Fb.save(),Fb.translate(Te,te),Fb.rotate(Vc.angle*Kg),Te=te=0);Te+=Vc.dx||0;te+=(Vc.dy||0)+eh(Vc);var pe=lf(Vc);cc(Fb,Vc);if(w.isArray(pe)){var Qf=tf(Vc);for(ge=0;ge<pe.length;++ge){var jf=Lg(Vc,pe[ge]);Vc.fill&&cd(Fb,Vc,Ld)&&Fb.fillText(jf,Te,te);Vc.stroke&&bd(Fb,Vc,Ld)&&Fb.strokeText(jf,Te,te);te+=Qf}}else jf=Lg(Vc,pe),Vc.fill&&cd(Fb,Vc,Ld)&&Fb.fillText(jf,Te,te),Vc.stroke&&bd(Fb,Vc,Ld)&&Fb.strokeText(jf,Te,te);Vc.angle&&Fb.restore()}})},pick:Fe(function(Fb,
dc,Dc,Vc,Ld,ge){if(0>=dc.fontSize)return!1;if(!dc.angle)return!0;Dc=Zg(dc);Fb=Dc.x1;Dc=Dc.y1;Vc=oi(sk,dc,1);var te=-dc.angle*Kg;dc=Math.cos(te);te=Math.sin(te);return Vc.contains(dc*Ld-te*ge+(Fb-dc*Fb+te*Dc),te*Ld+dc*ge+(Dc-te*Fb-dc*Dc))}),isect:function(Fb,dc){Fb=oi(sk,Fb,2);return $c(dc,Fb[0],Fb[1],Fb[2],Fb[3])||$c(dc,Fb[0],Fb[1],Fb[4],Fb[5])||$c(dc,Fb[4],Fb[5],Fb[6],Fb[7])||$c(dc,Fb[2],Fb[3],Fb[6],Fb[7])}},Fg=rf("trail",function(Fb,dc){return fg.context(Fb)(dc)},function(Fb,dc){for(var Dc=Fb.length,
Vc,Ld;0<=--Dc;)if(!1!==Fb[Dc].defined&&(Vc=Fb[Dc].x-dc[0],Ld=Fb[Dc].y-dc[1],Ld=Vc*Vc+Ld*Ld,Vc=Fb[Dc].size||1,Ld<Vc*Vc))return Fb[Dc];return null}),Vi={arc:ig,area:Dh,group:Aj,image:ck,line:Ck,path:Ri,rect:jk,rule:Gj,shape:Ik,symbol:wk,text:Ji,trail:Fg},Yk={mark:null};const jl="marktype name role interactive clip items zindex x y width height align baseline fill fillOpacity opacity blend stroke strokeOpacity strokeWidth strokeCap strokeDash strokeDashOffset strokeForeground strokeOffset startAngle endAngle innerRadius outerRadius cornerRadius padAngle cornerRadiusTopLeft cornerRadiusTopRight cornerRadiusBottomLeft cornerRadiusBottomRight interpolate tension orient defined url aspect smooth path scaleX scaleY x2 y2 size shape text angle theta radius dir dx dy ellipsis limit lineBreak lineHeight font fontSize fontWeight fontStyle fontVariant description aria ariaRole ariaRoleDescription".split(" ");
Ua.prototype={toJSON(Fb){return wh(this.root,Fb||0)},mark(Fb,dc,Dc){dc=dc||this.root.items[0];Fb=v(Fb,dc);dc.items[Dc]=Fb;Fb.zindex&&(Fb.group.zdirty=!0);return Fb}};$g.prototype={initialize(Fb,dc,Dc){this._el=Fb;this._obj=Dc||null;return this.origin(dc)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(Fb){return arguments.length?(this._origin=Fb||[0,0],this):this._origin.slice()},scene(Fb){if(!arguments.length)return this._scene;this._scene=Fb;return this},on(){},
off(){},_handlerIndex(Fb,dc,Dc){for(let Vc=Fb?Fb.length:0;0<=--Vc;)if(Fb[Vc].type===dc&&(!Dc||Fb[Vc].handler===Dc))return Vc;return-1},handlers(Fb){const dc=this._handlers,Dc=[];if(Fb)Dc.push(...dc[this.eventName(Fb)]);else for(const Vc in dc)Dc.push(...dc[Vc]);return Dc},eventName(Fb){const dc=Fb.indexOf(".");return 0>dc?Fb:Fb.slice(0,dc)},handleHref(Fb,dc,Dc){this._loader.sanitize(Dc,{context:"href"}).then(Vc=>{const Ld=new MouseEvent(Fb.type,Fb),ge=Xa(null,"a");for(const te in Vc)ge.setAttribute(te,
Vc[te]);ge.dispatchEvent(Ld)}).catch(()=>{})},handleTooltip(Fb,dc,Dc){if(dc&&null!=dc.tooltip){var Vc=this.canvas(),Ld=this._origin,ge=dc&&dc.mark,te;if(ge&&(te=Vi[ge.marktype]).tip){Vc=zg(Fb,Vc);Vc[0]-=Ld[0];for(Vc[1]-=Ld[1];dc=dc.mark.group;)Vc[0]-=dc.x||0,Vc[1]-=dc.y||0;dc=te.tip(ge.items,Vc)}this._tooltip.call(this._obj,this,Fb,dc,Dc&&dc&&dc.tooltip||null)}},getItemBoundingClientRect(Fb){var dc=this.canvas();if(dc){var Dc=dc.getBoundingClientRect(),Vc=this._origin,Ld=Fb.bounds;dc=Ld.width();var ge=
Ld.height(),te=Ld.x1+Vc[0]+Dc.left;for(Dc=Ld.y1+Vc[1]+Dc.top;Fb.mark&&(Fb=Fb.mark.group);)te+=Fb.x||0,Dc+=Fb.y||0;return{x:te,y:Dc,width:dc,height:ge,left:te,top:Dc,right:te+dc,bottom:Dc+ge}}}};Ag.prototype={initialize(Fb,dc,Dc,Vc,Ld){this._el=Fb;return this.resize(dc,Dc,Vc,Ld)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(Fb){if(0===arguments.length)return this._bgcolor;this._bgcolor=Fb;return this},resize(Fb,dc,Dc,Vc){this._width=Fb;this._height=dc;this._origin=
Dc||[0,0];this._scale=Vc||1;return this},dirty(){},render(Fb,dc){const Dc=this;Dc._call=function(){Dc._render(Fb,dc)};Dc._call();Dc._call=null;return Dc},_render(){},renderAsync(Fb,dc){const Dc=this.render(Fb,dc);return this._ready?this._ready.then(()=>Dc):Promise.resolve(Dc)},_load(Fb,dc){var Dc=this;Fb=Dc._loader[Fb](dc);if(!Dc._ready){const Vc=Dc._call;Dc._ready=Dc._loader.ready().then(Ld=>{Ld&&Vc();Dc._ready=null})}return Fb},sanitizeURL(Fb){return this._load("sanitizeURL",Fb)},loadImage(Fb){return this._load("loadImage",
Fb)}};w.inherits(Ug,$g,{initialize(Fb,dc,Dc){this._canvas=Fb&&gc(Fb,"canvas");"click mousedown pointerdown pointermove pointerout dragleave".split(" ").forEach(Vc=>id(this,Vc));return $g.prototype.initialize.call(this,Fb,dc,Dc)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:"keydown keypress keyup dragenter dragleave dragover pointerdown pointerup pointermove pointerout pointerover mousedown mouseup mousemove mouseout mouseover click dblclick wheel mousewheel touchstart touchmove touchend".split(" "),
DOMMouseScroll(Fb){this.fire("mousewheel",Fb)},pointermove:dg(["pointermove","mousemove"],["pointerover","mouseover"],["pointerout","mouseout"]),dragover:dg(["dragover"],["dragenter"],["dragleave"]),pointerout:Sf(["pointerout","mouseout"]),dragleave:Sf(["dragleave"]),pointerdown(Fb){this._down=this._active;this.fire("pointerdown",Fb)},mousedown(Fb){this._down=this._active;this.fire("mousedown",Fb)},click(Fb){this._down===this._active&&(this.fire("click",Fb),this._down=null)},touchstart(Fb){this._touch=
this.pickEvent(Fb.changedTouches[0]);this._first&&(this._active=this._touch,this._first=!1);this.fire("touchstart",Fb,!0)},touchmove(Fb){this.fire("touchmove",Fb,!0)},touchend(Fb){this.fire("touchend",Fb,!0);this._touch=null},fire(Fb,dc,Dc){Dc=Dc?this._touch:this._active;const Vc=this._handlers[Fb];dc.vegaType=Fb;"click"===Fb&&Dc&&Dc.href?this.handleHref(dc,Dc,Dc.href):("pointermove"===Fb||"pointerout"===Fb)&&this.handleTooltip(dc,Dc,"pointerout"!==Fb);if(Vc)for(let Ld=0,ge=Vc.length;Ld<ge;++Ld)Vc[Ld].handler.call(this._obj,
dc,Dc)},on(Fb,dc){const Dc=this.eventName(Fb),Vc=this._handlers;0>this._handlerIndex(Vc[Dc],Fb,dc)&&(id(this,Fb),(Vc[Dc]||(Vc[Dc]=[])).push({type:Fb,handler:dc}));return this},off(Fb,dc){var Dc=this.eventName(Fb);Dc=this._handlers[Dc];Fb=this._handlerIndex(Dc,Fb,dc);0<=Fb&&Dc.splice(Fb,1);return this},pickEvent(Fb){Fb=zg(Fb,this._canvas);const dc=this._origin;return this.pick(this._scene,Fb[0],Fb[1],Fb[0]-dc[0],Fb[1]-dc[1])},pick(Fb,dc,Dc,Vc,Ld){const ge=this.context();return Vi[Fb.marktype].pick.call(this,
ge,Fb,dc,Dc,Vc,Ld)}});const oj=Ag.prototype;w.inherits(Kf,Ag,{initialize(Fb,dc,Dc,Vc,Ld,ge){this._options=ge||{};this._canvas=this._options.externalContext?null:u.canvas(1,1,this._options.type);Fb&&this._canvas&&(Ce(Fb,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks"));return oj.initialize.call(this,Fb,dc,Dc,Vc,Ld)},resize(Fb,dc,Dc,Vc){oj.resize.call(this,Fb,dc,Dc,Vc);if(this._canvas){Fb=this._canvas;dc=this._width;Dc=this._height;Vc=this._origin;var Ld=this._scale,ge=this._options.context;
const Te="undefined"!==typeof HTMLElement&&Fb instanceof HTMLElement&&null!=Fb.parentNode,pe=Fb.getContext("2d");Ld=Te?"undefined"!==typeof window?window.devicePixelRatio||1:1:Ld;Fb.width=dc*Ld;Fb.height=Dc*Ld;for(var te in ge)pe[te]=ge[te];Te&&1!==Ld&&(Fb.style.width=dc+"px",Fb.style.height=Dc+"px");pe.pixelRatio=Ld;pe.setTransform(Ld,0,0,Ld,Ld*Vc[0],Ld*Vc[1])}else(te=this._options.externalContext)||w.error("CanvasRenderer is missing a valid canvas or context"),te.scale(this._scale,this._scale),
te.translate(this._origin[0],this._origin[1]);this._redraw=!0;return this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(Fb){const dc=this._tempb.clear().union(Fb.bounds);for(Fb=Fb.mark.group;Fb;)dc.translate(Fb.x||0,Fb.y||0),Fb=Fb.mark.group;this._dirty.union(dc)},_render(Fb,dc){const Dc=this.context(),Vc=this._origin,Ld=this._width,ge=this._height,te=this._dirty;var Te=(new Hb).set(0,0,Ld,ge).translate(-Vc[0],
-Vc[1]);Dc.save();this._redraw||te.empty()?Te=(this._redraw=!1,Te.expand(1)):(Te=Te.intersect(te),Te.expand(1).round(),Dc.pixelRatio%1&&Te.scale(Dc.pixelRatio).round().scale(1/Dc.pixelRatio),Te.translate(-(Vc[0]%1),-(Vc[1]%1)),Dc.beginPath(),Dc.rect(Te.x1,Te.y1,Te.width(),Te.height()),Dc.clip());this.clear(-Vc[0],-Vc[1],Ld,ge);this.draw(Dc,Fb,Te,dc);Dc.restore();te.clear();return this},draw(Fb,dc,Dc,Vc){if("group"===dc.marktype||null==Vc||Vc.includes(dc.marktype)){var Ld=Vi[dc.marktype];if(dc.clip){var ge=
dc.clip;Fb.save();w.isFunction(ge)?(Fb.beginPath(),ge(Fb),Fb.clip()):Ff(Fb,dc.group)}Ld.draw.call(this,Fb,dc,Dc,Vc);dc.clip&&Fb.restore()}},clear(Fb,dc,Dc,Vc){const Ld=this._options,ge=this.context();"pdf"===Ld.type||Ld.externalContext||ge.clearRect(Fb,dc,Dc,Vc);null!=this._bgcolor&&(ge.fillStyle=this._bgcolor,ge.fillRect(Fb,dc,Dc,Vc))}});const xk=(Fb,dc)=>Dc=>{let Vc=Dc.target.__data__;Vc=Array.isArray(Vc)?Vc[0]:Vc;Dc.vegaType=Dc.type;dc.call(Fb._obj,Dc,Vc)};w.inherits(wg,$g,{initialize(Fb,dc,Dc){let Vc=
this._svg;Vc&&(Vc.removeEventListener("click",this._hrefHandler),Vc.removeEventListener("pointermove",this._tooltipHandler),Vc.removeEventListener("pointerout",this._tooltipHandler));if(this._svg=Vc=Fb&&gc(Fb,"svg"))Vc.addEventListener("click",this._hrefHandler),Vc.addEventListener("pointermove",this._tooltipHandler),Vc.addEventListener("pointerout",this._tooltipHandler);return $g.prototype.initialize.call(this,Fb,dc,Dc)},canvas(){return this._svg},on(Fb,dc){const Dc=this.eventName(Fb),Vc=this._handlers;
0>this._handlerIndex(Vc[Dc],Fb,dc)&&(Fb={type:Fb,handler:dc,listener:xk(this,dc)},(Vc[Dc]||(Vc[Dc]=[])).push(Fb),this._svg&&this._svg.addEventListener(Dc,Fb.listener));return this},off(Fb,dc){const Dc=this.eventName(Fb),Vc=this._handlers[Dc];Fb=this._handlerIndex(Vc,Fb,dc);0<=Fb&&(this._svg&&this._svg.removeEventListener(Dc,Vc[Fb].listener),Vc.splice(Fb,1));return this}});const Uk=(Fb,dc,Dc)=>({role:Fb,["aria-roledescription"]:dc,["aria-label"]:Dc||void 0}),ql=w.toSet("axis-domain axis-grid axis-label axis-tick axis-title legend-band legend-entry legend-gradient legend-label legend-title legend-symbol title".split(" ")),
rl={axis:{desc:"axis",caption:function(Fb){var dc=Fb.datum;const Dc=Fb.orient,Vc=dc.title?Rf(Fb):null;var Ld=Fb.context;dc=Ld.scales[dc.scale].value;Ld=Ld.dataflow.locale();const ge=dc.type;return`${"left"===Dc||"right"===Dc?"Y":"X"}-axis`+(Vc?` titled '${Vc}'`:"")+` for a ${I.isDiscrete(ge)?"discrete":ge} scale`+` with ${I.domainCaption(Ld,dc,Fb)}`}},legend:{desc:"legend",caption:function(Fb){var dc=Fb.datum;const Dc=dc.title?Rf(Fb):null,Vc=`${dc.type||""} legend`.trim();var Ld=dc.scales;dc=Object.keys(Ld);
var ge=Fb.context;Ld=ge.scales[Ld[dc[0]]].value;ge=ge.dataflow.locale();return(Vc.length?Vc[0].toUpperCase()+Vc.slice(1):Vc)+(Dc?` titled '${Dc}'`:"")+` for ${Gh(dc)}`+` with ${I.domainCaption(ge,Ld,Fb)}`}},"title-text":{desc:"title",caption:Fb=>`Title text '${w.array(Fb.text).join(" ")}'`},"title-subtitle":{desc:"subtitle",caption:Fb=>`Subtitle text '${w.array(Fb.text).join(" ")}'`}},Jk={ariaRole:"role",ariaRoleDescription:"aria-roledescription",description:"aria-label"},Kk=Fb=>(Fb+"").replace(/&/g,
"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;"),Yl=Fb=>gh(li(),Fb)+"",dk={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},vh={blend:"mix-blend-mode"},Sl={fill:"none","stroke-miterlimit":10},Kh=Hj.xmlns,og=Ag.prototype;w.inherits(Lf,Ag,{initialize(Fb,
dc,Dc,Vc,Ld){this._defs={};this._clearDefs();Fb&&(this._svg=wd(Fb,0,"svg",Kh),this._svg.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns",Kh),this._svg.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink",Hj["xmlns:xlink"]),this._svg.setAttribute("version",Hj.version),this._svg.setAttribute("class","marks"),Ce(Fb,1),this._root=wd(this._svg,0,"g",Kh),Eb(this._root,Sl),Ce(this._svg,1));this.background(this._bgcolor);return og.initialize.call(this,Fb,dc,Dc,Vc,Ld)},background(Fb){arguments.length&&
this._svg&&this._svg.style.setProperty("background-color",Fb);return og.background.apply(this,arguments)},resize(Fb,dc,Dc,Vc){og.resize.call(this,Fb,dc,Dc,Vc);this._svg&&(Eb(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`));this._dirty=[];return this},canvas(){return this._svg},svg(){const Fb=this._svg,dc=this._bgcolor;if(!Fb)return null;let Dc;dc&&(Fb.removeAttribute("style"),
Dc=wd(Fb,0,"rect",Kh),Eb(Dc,{width:this._width,height:this._height,fill:dc}));const Vc=Yl(Fb);dc&&(Fb.removeChild(Dc),this._svg.style.setProperty("background-color",dc));return Vc},_render(Fb,dc){this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,Fb,void 0,dc),Ce(this._root,1));this.defs();this._dirty=[];++this._dirtyID;return this},dirty(Fb){Fb.dirty!==this._dirtyID&&(Fb.dirty=this._dirtyID,this._dirty.push(Fb))},isDirty(Fb){return this._dirtyAll||!Fb._svg||!Fb._svg.ownerSVGElement||
Fb.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const Fb=this._dirty;if(!Fb.length||!this._dirtyID)return!0;const dc=++this._dirtyID;let Dc;let Vc,Ld,ge,te;ge=0;for(te=Fb.length;ge<te;++ge){Dc=Fb[ge];var Te=Dc.mark;Te.marktype!==Vc&&(Vc=Te.marktype,Ld=Vi[Vc]);Te.zdirty&&Te.dirty!==dc&&(this._dirtyAll=!1,bi(Dc,dc),Te.items.forEach(pe=>{pe.dirty=dc}));Te.zdirty||(Dc.exit?(Ld.nested&&Te.items.length?(Te=Te.items[0],Te._svg&&this._update(Ld,Te._svg,Te)):Dc._svg&&(Te=Dc._svg.parentNode)&&Te.removeChild(Dc._svg),
Dc._svg=null):(Dc=Ld.nested?Te.items[0]:Dc,Dc._update!==dc&&(Dc._svg&&Dc._svg.ownerSVGElement?this._update(Ld,Dc._svg,Dc):(this._dirtyAll=!1,bi(Dc,dc)),Dc._update=dc)))}return!this._dirtyAll},mark(Fb,dc,Dc,Vc){if(!this.isDirty(dc))return dc._svg;const Ld=this._svg,ge=dc.marktype,te=Vi[ge];var Te=!1===dc.interactive?"none":null;const pe="g"===te.tag,Qf=ia(dc,Fb,Dc,"g",Ld);if("group"!==ge&&null!=Vc&&!Vc.includes(ge))return Ce(Qf,0),dc._svg;Qf.setAttribute("class",Hf(dc));Fb=dh(dc);for(const gg in Fb)Vb(Qf,
gg,Fb[gg]);pe||Vb(Qf,"pointer-events",Te);Vb(Qf,"clip-path",dc.clip?rc(this,dc,dc.group):null);let jf=null,Dg=0;Te=gg=>{const Eg=this.isDirty(gg),Ph=ia(gg,Qf,jf,te.tag,Ld);Eg&&(this._update(te,Ph,gg),pe&&ih(this,Ph,gg,Vc));jf=Ph;++Dg};te.nested?dc.items.length&&Te(dc.items[0]):xd(dc,Te);Ce(Qf,Dg);return Qf},_update(Fb,dc,Dc){zj=dc;gk=dc.__values__;xg(Sa,Dc);Fb.attr(Sa,Dc,this);const Vc=qk[Fb.type];Vc&&Vc.call(this,Fb,dc,Dc);zj&&this.style(zj,Dc)},style(Fb,dc){if(null!=dc){for(const Dc in dk){let Vc=
"font"===Dc?Pg(dc):dc[Dc];if(Vc===gk[Dc])continue;const Ld=dk[Dc];null==Vc?Fb.removeAttribute(Ld):(Vc&&Vc.gradient&&(Vc=B(Vc,this._defs.gradient,qc())),Fb.setAttribute(Ld,Vc+""));gk[Dc]=Vc}for(const Dc in vh)lb(Fb,vh[Dc],dc[Dc])}},defs(){const Fb=this._svg,dc=this._defs;let Dc=dc.el;var Vc=0;for(var Ld in dc.gradient){Dc||(dc.el=Dc=wd(Fb,1,"defs",Kh));var ge=void 0;let pe,Qf;var te=Dc,Te=dc.gradient[Ld];"radial"===Te.gradient?(ge=wd(te,Vc++,"pattern",Kh),Eb(ge,{id:"p_"+Te.id,viewBox:"0,0,1,1",width:"100%",
height:"100%",preserveAspectRatio:"xMidYMid slice"}),ge=wd(ge,0,"rect",Kh),Eb(ge,{width:1,height:1,fill:`url(${qc()}#${Te.id})`}),te=wd(te,Vc++,"radialGradient",Kh),Eb(te,{id:Te.id,fx:Te.x1,fy:Te.y1,fr:Te.r1,cx:Te.x2,cy:Te.y2,r:Te.r2})):(te=wd(te,Vc++,"linearGradient",Kh),Eb(te,{id:Te.id,x1:Te.x1,x2:Te.x2,y1:Te.y1,y2:Te.y2}));Qf=0;for(pe=Te.stops.length;Qf<pe;++Qf)ge=wd(te,Qf,"stop",Kh),ge.setAttribute("offset",Te.stops[Qf].offset),ge.setAttribute("stop-color",Te.stops[Qf].color);Ce(te,Qf)}for(const pe in dc.clipping)Dc||
(dc.el=Dc=wd(Fb,1,"defs",Kh)),te=Dc,Te=dc.clipping[pe],Ld=Vc,te=wd(te,Ld,"clipPath",Kh),te.setAttribute("id",Te.id),Te.path?(Vc=wd(te,0,"path",Kh),Vc.setAttribute("d",Te.path)):(Vc=wd(te,0,"rect",Kh),Eb(Vc,{x:0,y:0,width:Te.width,height:Te.height})),Ce(te,1),Vc=Ld+1;Dc&&(0===Vc?(Fb.removeChild(Dc),dc.el=null):Ce(Dc,Vc))},_clearDefs(){const Fb=this._defs;Fb.gradient={};Fb.clipping={}}});let zj=null,gk=null;const qk={group(Fb,dc,Dc){const Vc=zj=dc.childNodes[2];gk=Vc.__values__;Fb.foreground(Sa,Dc,
this);gk=dc.__values__;zj=dc.childNodes[1];Fb.content(Sa,Dc,this);dc=zj=dc.childNodes[0];Fb.background(Sa,Dc,this);Fb=!1===Dc.mark.interactive?"none":null;Fb!==gk.events&&(Vb(Vc,"pointer-events",Fb),Vb(dc,"pointer-events",Fb),gk.events=Fb);Dc.strokeForeground&&Dc.stroke?(Fb=Dc.fill,Vb(Vc,"display",null),this.style(dc,Dc),Vb(dc,"stroke",null),Fb&&(Dc.fill=null),gk=Vc.__values__,this.style(Vc,Dc),Fb&&(Dc.fill=Fb),zj=null):Vb(Vc,"display","none")},image(Fb,dc,Dc){!1===Dc.smooth?(lb(dc,"image-rendering",
"optimizeSpeed"),lb(dc,"image-rendering","pixelated")):lb(dc,"image-rendering",null)},text(Fb,dc,Dc){Fb=lf(Dc);let Vc,Ld,ge;w.isArray(Fb)?(Vc=Fb.map(te=>Lg(Dc,te)),Fb=Vc.join("\n"),Fb!==gk.text&&(Ce(dc,0),Ld=dc.ownerDocument,ge=tf(Dc),Vc.forEach((te,Te)=>{const pe=Xa(Ld,"tspan",Kh);pe.__data__=Dc;pe.textContent=te;Te&&(pe.setAttribute("x",0),pe.setAttribute("dy",ge));dc.appendChild(pe)}),gk.text=Fb)):(Vc=Lg(Dc,Fb),Vc!==gk.text&&(dc.textContent=Vc,gk.text=Vc));Vb(dc,"font-family",Pg(Dc));Vb(dc,"font-size",
Jf(Dc)+"px");Vb(dc,"font-style",Dc.fontStyle);Vb(dc,"font-variant",Dc.fontVariant);Vb(dc,"font-weight",Dc.fontWeight)}};w.inherits(Za,Ag,{svg(){return this._text},_render(Fb){const dc=li();dc.open("svg",w.extend({},Hj,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const Dc=this._bgcolor;Dc&&"transparent"!==Dc&&"none"!==Dc&&dc.open("rect",{width:this._width,height:this._height,fill:Dc}).close();dc.open("g",Sl,{transform:"translate("+
this._origin+")"});this.mark(dc,Fb);dc.close();this.defs(dc);this._text=dc.close()+"";return this},mark(Fb,dc){const Dc=Vi[dc.marktype],Vc=Dc.tag,Ld=[xg,Dc.attr];Fb.open("g",{"class":Hf(dc),"clip-path":dc.clip?rc(this,dc,dc.group):null},dh(dc),{"pointer-events":"g"!==Vc&&!1===dc.interactive?"none":null});const ge=te=>{const Te=this.href(te);Te&&Fb.open("a",Te);Fb.open(Vc,this.attr(dc,te,Ld,"g"!==Vc?Vc:null));if("text"===Vc){var pe=lf(te);if(w.isArray(pe)){var Qf={x:0,dy:tf(te)};for(var jf=0;jf<pe.length;++jf)Fb.open("tspan",
jf?Qf:null).text(Lg(te,pe[jf])).close()}else Fb.text(Lg(te,pe))}else"g"===Vc&&(pe=te.strokeForeground,Qf=te.fill,jf=te.stroke,pe&&jf&&(te.stroke=null),Fb.open("path",this.attr(dc,te,Dc.background,"bgrect")).close(),Fb.open("g",this.attr(dc,te,Dc.content)),xd(te,Dg=>this.mark(Fb,Dg)),Fb.close(),pe&&jf?(Qf&&(te.fill=null),te.stroke=jf,Fb.open("path",this.attr(dc,te,Dc.foreground,"bgrect")).close(),Qf&&(te.fill=Qf)):Fb.open("path",this.attr(dc,te,Dc.foreground,"bgfore")).close());Fb.close();Te&&Fb.close()};
Dc.nested?dc.items&&dc.items.length&&ge(dc.items[0]):xd(dc,ge);return Fb.close()},href(Fb){const dc=Fb.href;if(dc){if(Fb=this._hrefs&&this._hrefs[dc])return Fb;this.sanitizeURL(dc).then(Dc=>{Dc["xlink:href"]=Dc.href;Dc.href=null;(this._hrefs||(this._hrefs={}))[dc]=Dc})}return null},attr(Fb,dc,Dc,Vc){const Ld={},ge=(te,Te,pe,Qf)=>{Ld[Qf||te]=Te};Array.isArray(Dc)?Dc.forEach(te=>te(ge,dc,this)):Dc(ge,dc,this);Vc&&wb(Ld,dc,Fb,Vc,this._defs);return Ld},defs(Fb){var dc=this._defs.gradient;const Dc=this._defs.clipping;
if(0!==Object.keys(dc).length+Object.keys(Dc).length){Fb.open("defs");for(const Ld in dc){var Vc=dc[Ld];const ge=Vc.stops;"radial"===Vc.gradient?(Fb.open("pattern",{id:"p_"+Ld,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),Fb.open("rect",{width:"1",height:"1",fill:"url(#"+Ld+")"}).close(),Fb.close(),Fb.open("radialGradient",{id:Ld,fx:Vc.x1,fy:Vc.y1,fr:Vc.r1,cx:Vc.x2,cy:Vc.y2,r:Vc.r2})):Fb.open("linearGradient",{id:Ld,x1:Vc.x1,x2:Vc.x2,y1:Vc.y1,y2:Vc.y2});for(Vc=
0;Vc<ge.length;++Vc)Fb.open("stop",{offset:ge[Vc].offset,"stop-color":ge[Vc].color}).close();Fb.close()}for(const Ld in Dc)dc=Dc[Ld],Fb.open("clipPath",{id:Ld}),dc.path?Fb.open("path",{d:dc.path}).close():Fb.open("rect",{x:0,y:0,width:dc.width,height:dc.height}).close(),Fb.close();Fb.close()}}});const al={svgMarkTypes:["text"],svgOnTop:!0,debug:!1},Tk=Ag.prototype;w.inherits(eb,Ag,{initialize(Fb,dc,Dc,Vc,Ld){this._root_el=wd(Fb,0,"div");const ge=wd(this._root_el,0,"div"),te=wd(this._root_el,1,"div");
this._root_el.style.position="relative";al.debug||(ge.style.height="100%",te.style.position="absolute",te.style.top="0",te.style.left="0",te.style.height="100%",te.style.width="100%");this._svgEl=al.svgOnTop?te:ge;this._canvasEl=al.svgOnTop?ge:te;this._svgEl.style.pointerEvents="none";this._canvasRenderer.initialize(this._canvasEl,dc,Dc,Vc,Ld);this._svgRenderer.initialize(this._svgEl,dc,Dc,Vc,Ld);return Tk.initialize.call(this,Fb,dc,Dc,Vc,Ld)},dirty(Fb){al.svgMarkTypes.includes(Fb.mark.marktype)?
this._svgRenderer.dirty(Fb):this._canvasRenderer.dirty(Fb);return this},_render(Fb,dc){dc=(null!=dc?dc:"arc area image line path rect rule shape symbol text trail".split(" ")).filter(Dc=>!al.svgMarkTypes.includes(Dc));this._svgRenderer.render(Fb,al.svgMarkTypes);this._canvasRenderer.render(Fb,dc)},resize(Fb,dc,Dc,Vc){Tk.resize.call(this,Fb,dc,Dc,Vc);this._svgRenderer.resize(Fb,dc,Dc,Vc);this._canvasRenderer.resize(Fb,dc,Dc,Vc);return this},background(Fb){al.svgOnTop?this._canvasRenderer.background(Fb):
this._svgRenderer.background(Fb);return this}});w.inherits(qb,Ug,{initialize(Fb,dc,Dc){Fb=wd(wd(Fb,0,"div"),al.svgOnTop?0:1,"div");return Ug.prototype.initialize.call(this,Fb,dc,Dc)}});const uk={};uk.canvas=uk.png={renderer:Kf,headless:Kf,handler:Ug};uk.svg={renderer:Lf,headless:Za,handler:wg};uk.hybrid={renderer:eb,headless:eb,handler:qb};uk.none={};const Kl=new Hb;A.Bounds=Hb;A.CanvasHandler=Ug;A.CanvasRenderer=Kf;A.Gradient=function(Fb,dc){var Dc=[],Vc;return Vc={gradient:"linear",x1:Fb?Fb[0]:
0,y1:Fb?Fb[1]:0,x2:dc?dc[0]:1,y2:dc?dc[1]:0,stops:Dc,stop:function(Ld,ge){Dc.push({offset:Ld,color:ge});return Vc}}};A.GroupItem=kc;A.Handler=$g;A.HybridHandler=qb;A.HybridRenderer=eb;A.Item=Jc;A.Marks=Vi;A.RenderType={Canvas:"canvas",PNG:"png",SVG:"svg",Hybrid:"hybrid",None:"none"};A.Renderer=Ag;A.ResourceLoader=Ab;A.SVGHandler=wg;A.SVGRenderer=Lf;A.SVGStringRenderer=Za;A.Scenegraph=Ua;A.boundClip=function(Fb){const dc=Fb.clip;if(w.isFunction(dc))dc(yd(Kl.clear()));else if(dc)Kl.set(0,0,Fb.group.width,
Fb.group.height);else return;Fb.bounds.intersect(Kl)};A.boundContext=yd;A.boundItem=ei;A.boundMark=Yh;A.boundStroke=md;A.domChild=wd;A.domClear=Ce;A.domCreate=Xa;A.domFind=gc;A.font=fh;A.fontFamily=Pg;A.fontSize=Jf;A.intersect=function(Fb,dc,Dc){const Vc=[];dc=(new Hb).union(dc);const Ld=Fb.marktype;return Ld?Qb(Fb,dc,Dc,Vc):"group"===Ld?zc(Fb,dc,Dc,Vc):w.error("Intersect scene must be mark node or group item.")};A.intersectBoxLine=$c;A.intersectPath=fd;A.intersectPoint=ed;A.intersectRule=yc;A.lineHeight=
tf;A.markup=li;A.multiLineOffset=function(Fb){const dc=lf(Fb);return(w.isArray(dc)?dc.length-1:0)*tf(Fb)};A.path=P;A.pathCurves=fb;A.pathEqual=Md;A.pathParse=La;A.pathRectangle=oc;A.pathRender=Ob;A.pathSymbols=sc;A.pathTrail=Cc;A.point=zg;A.renderModule=function(Fb,dc){Fb=String(Fb||"").toLowerCase();return 1<arguments.length?(uk[Fb]=dc,this):uk[Fb]};A.resetSVGClipId=function(){Zf=1};A.resetSVGDefIds=function(){Zf=1;ee=0};A.sceneEqual=Rd;A.sceneFromJSON=Wc;A.scenePickVisit=sd;A.sceneToJSON=wh;A.sceneVisit=
xd;A.sceneZOrder=Dd;A.serializeXML=Yl;A.setHybridRendererOptions=function(Fb){let dc;al.svgMarkTypes=null!=(dc=Fb.svgMarkTypes)?dc:["text"];let Dc;al.svgOnTop=null!=(Dc=Fb.svgOnTop)?Dc:!0;let Vc;al.debug=null!=(Vc=Fb.debug)?Vc:!1};A.textMetrics=ci})};
shadow$provide[432]=function(ob,Ba,Gb,Ea){(function(A,w){"object"===typeof Ea&&"undefined"!==typeof Gb?w(Ea,Ba(426),Ba(431),Ba(421)):"function"===typeof define&&define.amd?define(["exports","vega-dataflow","vega-scenegraph","vega-util"],w):(A="undefined"!==typeof globalThis?globalThis:A||self,w((A.vega=A.vega||{},A.vega.transforms={}),A.vega,A.vega,A.vega))})(this,function(A,w,u,x){function I(Ga){w.Transform.call(this,null,Ga)}function B(Ga,Ka,cb){return Ka(Ga.bounds.clear(),Ga,cb)}function N(Ga){w.Transform.call(this,
0,Ga)}function da(Ga){return Ga._signals[":vega_identifier:"]||(Ga._signals[":vega_identifier:"]=Ga.add(0))}function U(Ga){w.Transform.call(this,null,Ga)}function X(Ga){const Ka=Ga.groups;Ga=Ga.parent;return Ka&&1===Ka.size?Ka.get(Object.keys(Ka.object)[0]):Ka&&Ga?Ka.lookup(Ga):null}function V(Ga){w.Transform.call(this,null,Ga)}function P(Ga){w.Transform.call(this,null,Ga)}function z(Ga,Ka,cb){return Ga[Ka]===cb?0:(Ga[Ka]=cb,1)}function G(Ga){Ga=Ga.items[0].orient;return"left"===Ga||"right"===Ga}
function Y(Ga,Ka,cb,fb){Ka=Ka.items[0];var La=Ka.datum,Bb=null!=Ka.translate?Ka.translate:.5,Ob=Ka.orient,ec=+La.grid;var sc=[La.ticks?ec++:-1,La.labels?ec++:-1,ec+ +La.domain];ec=Ka.range;var Ic=Ka.offset,Xb=Ka.position,Wb=Ka.minExtent,Kc=Ka.maxExtent;La=La.title&&Ka.items[sc[2]].items[0];var Kb=Ka.titlePadding,mc=Ka.bounds,Ub=La&&u.multiLineOffset(La),oc;Ha.clear().union(mc);mc.clear();-1<(oc=sc[0])&&mc.union(Ka.items[oc].bounds);-1<(oc=sc[1])&&mc.union(Ka.items[oc].bounds);switch(Ob){case "top":cb=
Xb||0;fb=-Ic;Wb=Math.max(Wb,Math.min(Kc,-mc.y1));mc.add(0,-Wb).add(ec,0);La&&Q(Ga,La,Wb,Kb,Ub,0,-1,mc);break;case "left":cb=-Ic;fb=Xb||0;Wb=Math.max(Wb,Math.min(Kc,-mc.x1));mc.add(-Wb,0).add(0,ec);La&&Q(Ga,La,Wb,Kb,Ub,1,-1,mc);break;case "right":cb+=Ic;fb=Xb||0;Wb=Math.max(Wb,Math.min(Kc,mc.x2));mc.add(0,0).add(Wb,ec);La&&Q(Ga,La,Wb,Kb,Ub,1,1,mc);break;case "bottom":cb=Xb||0;fb+=Ic;Wb=Math.max(Wb,Math.min(Kc,mc.y2));mc.add(0,0).add(ec,Wb);La&&Q(Ga,La,Wb,Kb,0,0,1,mc);break;default:cb=Ka.x,fb=Ka.y}u.boundStroke(mc.translate(cb,
fb),Ka);z(Ka,"x",cb+Bb)|z(Ka,"y",fb+Bb)&&(Ka.bounds=Ha,Ga.dirty(Ka),Ka.bounds=mc,Ga.dirty(Ka));return Ka.mark.bounds.clear().union(mc)}function Q(Ga,Ka,cb,fb,La,Bb,Ob,ec){const sc=Ka.bounds;Ka.auto&&(cb=Ob*(cb+La+fb),La=fb=0,Ga.dirty(Ka),Bb?fb=(Ka.x||0)-(Ka.x=cb):La=(Ka.y||0)-(Ka.y=cb),Ka.mark.bounds.clear().union(sc.translate(-fb,-La)),Ga.dirty(Ka));ec.union(sc)}function ja(Ga){return(new u.Bounds).set(0,0,Ga.width||0,Ga.height||0)}function pa(Ga){const Ka=Ga.bounds.clone();return Ka.empty()?Ka.set(0,
0,0,0):Ka.translate(-(Ga.x||0),-(Ga.y||0))}function J(Ga,Ka,cb){Ga=x.isObject(Ga)?Ga[Ka]:Ga;return null!=Ga?Ga:void 0!==cb?cb:0}function K(Ga){return 0>Ga?Math.ceil(-Ga):0}function ba(Ga,Ka,cb){var fb=!cb.nodirty,La="flush"===cb.bounds?ja:pa,Bb=Ha.set(0,0,0,0),Ob=J(cb.align,"column"),ec=J(cb.align,"row"),sc=J(cb.padding,"column"),Ic=J(cb.padding,"row"),Xb=cb.columns||Ka.length,Wb=0>=Xb?1:Math.ceil(Ka.length/Xb),Kc=Ka.length,Kb=Array(Kc),mc=Array(Xb),Ub=0,oc=Array(Kc),Cc=Array(Wb),Mc=0,Pb=Array(Kc),
nc=Array(Kc),rc=Array(Kc),Hb,Jc,kc;for(Hb=0;Hb<Xb;++Hb)mc[Hb]=0;for(Hb=0;Hb<Wb;++Hb)Cc[Hb]=0;for(Hb=0;Hb<Kc;++Hb){var Ab=Ka[Hb];var md=rc[Hb]=La(Ab);Ab.x=Ab.x||0;Pb[Hb]=0;Ab.y=Ab.y||0;nc[Hb]=0;Ab=Hb%Xb;var yd=~~(Hb/Xb);Ub=Math.max(Ub,Jc=Math.ceil(md.x2));Mc=Math.max(Mc,kc=Math.ceil(md.y2));mc[Ab]=Math.max(mc[Ab],Jc);Cc[yd]=Math.max(Cc[yd],kc);Kb[Hb]=sc+K(md.x1);oc[Hb]=Ic+K(md.y1);fb&&Ga.dirty(Ka[Hb])}for(Hb=0;Hb<Kc;++Hb)0===Hb%Xb&&(Kb[Hb]=0),Hb<Xb&&(oc[Hb]=0);if("each"===Ob)for(Ab=1;Ab<Xb;++Ab){La=
0;for(Hb=Ab;Hb<Kc;Hb+=Xb)La<Kb[Hb]&&(La=Kb[Hb]);for(Hb=Ab;Hb<Kc;Hb+=Xb)Kb[Hb]=La+mc[Ab-1]}else if("all"===Ob){for(Hb=La=0;Hb<Kc;++Hb)Hb%Xb&&La<Kb[Hb]&&(La=Kb[Hb]);for(Hb=0;Hb<Kc;++Hb)Hb%Xb&&(Kb[Hb]=La+Ub)}else for(Ob=!1,Ab=1;Ab<Xb;++Ab)for(Hb=Ab;Hb<Kc;Hb+=Xb)Kb[Hb]+=mc[Ab-1];if("each"===ec)for(yd=1;yd<Wb;++yd){La=0;Hb=yd*Xb;for(Ab=Hb+Xb;Hb<Ab;++Hb)La<oc[Hb]&&(La=oc[Hb]);for(Hb=yd*Xb;Hb<Ab;++Hb)oc[Hb]=La+Cc[yd-1]}else if("all"===ec){La=0;for(Hb=Xb;Hb<Kc;++Hb)La<oc[Hb]&&(La=oc[Hb]);for(Hb=Xb;Hb<Kc;++Hb)oc[Hb]=
La+Mc}else for(ec=!1,yd=1;yd<Wb;++yd)for(Hb=yd*Xb,Ab=Hb+Xb;Hb<Ab;++Hb)oc[Hb]+=Cc[yd-1];for(Hb=yd=0;Hb<Kc;++Hb)yd=Kb[Hb]+(Hb%Xb?yd:0),Pb[Hb]+=yd-Ka[Hb].x;for(Ab=0;Ab<Xb;++Ab)for(Kb=0,Hb=Ab;Hb<Kc;Hb+=Xb)Kb+=oc[Hb],nc[Hb]+=Kb-Ka[Hb].y;if(Ob&&J(cb.center,"column")&&1<Wb)for(Hb=0;Hb<Kc;++Hb)md="all"===Ob?Ub:mc[Hb%Xb],yd=md-rc[Hb].x2-Ka[Hb].x-Pb[Hb],0<yd&&(Pb[Hb]+=yd/2);if(ec&&J(cb.center,"row")&&1!==Xb)for(Hb=0;Hb<Kc;++Hb)md="all"===ec?Mc:Cc[~~(Hb/Xb)],Kb=md-rc[Hb].y2-Ka[Hb].y-nc[Hb],0<Kb&&(nc[Hb]+=Kb/
2);for(Hb=0;Hb<Kc;++Hb)Bb.union(rc[Hb].translate(Pb[Hb],nc[Hb]));yd=J(cb.anchor,"x");Kb=J(cb.anchor,"y");switch(J(cb.anchor,"column")){case "end":yd-=Bb.width();break;case "middle":yd-=Bb.width()/2}switch(J(cb.anchor,"row")){case "end":Kb-=Bb.height();break;case "middle":Kb-=Bb.height()/2}yd=Math.round(yd);Kb=Math.round(Kb);Bb.clear();for(Hb=0;Hb<Kc;++Hb)Ka[Hb].mark.bounds.clear();for(Hb=0;Hb<Kc;++Hb)Ab=Ka[Hb],Ab.x+=Pb[Hb]+=yd,Ab.y+=nc[Hb]+=Kb,Bb.union(Ab.mark.bounds.union(Ab.bounds.translate(Pb[Hb],
nc[Hb]))),fb&&Ga.dirty(Ab);return Bb}function O(Ga,Ka){return"x1"===Ka?Ga.x||0:"y1"===Ka?Ga.y||0:"x2"===Ka?(Ga.x||0)+(Ga.width||0):"y2"===Ka?(Ga.y||0)+(Ga.height||0):void 0}function fa(Ga,Ka){return Ga.bounds[Ka]}function wa(Ga,Ka,cb,fb,La,Bb,Ob,ec,sc,Ic,Xb,Wb,Kc,Kb){var mc=cb.length,Ub=fb=0,oc,Cc;if(!mc)return fb;for(oc=Xb;oc<mc;oc+=Wb)cb[oc]&&(fb=Ob(fb,sc(cb[oc],Ic)));if(!Ka.length)return fb;Ka.length>La&&(Ga.warn("Grid headers exceed limit: "+La),Ka=Ka.slice(0,La));fb+=Bb;La=0;for(Bb=Ka.length;La<
Bb;++La)Ga.dirty(Ka[La]),Ka[La].mark.bounds.clear();oc=Xb;La=0;for(Bb=Ka.length;La<Bb;++La,oc+=Wb){sc=Ka[La];Xb=sc.mark.bounds;for(mc=oc;0<=mc&&null==(Cc=cb[mc]);mc-=Kc);if(ec){mc=null==Kb?Cc.x:Math.round(Cc.bounds.x1+Kb*Cc.bounds.width());var Mc=fb}else mc=fb,Mc=null==Kb?Cc.y:Math.round(Cc.bounds.y1+Kb*Cc.bounds.height());Xb.union(sc.bounds.translate(mc-(sc.x||0),Mc-(sc.y||0)));sc.x=mc;sc.y=Mc;Ga.dirty(sc);Ub=Ob(Ub,Xb[Ic])}return Ub}function ta(Ga,Ka,cb,fb,La,Bb){if(Ka){Ga.dirty(Ka);var Ob=cb;fb?
Ob=Math.round(La.x1+Bb*La.width()):cb=Math.round(La.y1+Bb*La.height());Ka.bounds.translate(Ob-(Ka.x||0),cb-(Ka.y||0));Ka.mark.bounds.clear().union(Ka.bounds);Ka.x=Ob;Ka.y=cb;Ga.dirty(Ka)}}function aa(Ga,Ka){const cb=Ga[Ka]||{};return(fb,La)=>null!=cb[fb]?cb[fb]:null!=Ga[fb]?Ga[fb]:La}function ha(Ga,Ka){let cb=-Infinity;Ga.forEach(fb=>{null!=fb.offset&&(cb=Math.max(cb,fb.offset))});return-Infinity<cb?cb:Ka}function ka(Ga,Ka,cb,fb,La,Bb,Ob){const ec=aa(cb,Ka);cb=ha(Ga,ec("offset",0));const sc=ec("anchor",
"start"),Ic="end"===sc?1:"middle"===sc?.5:0;Ga={align:"each",bounds:ec("bounds","flush"),columns:"vertical"===ec("direction")?1:Ga.length,padding:ec("margin",8),center:ec("center"),nodirty:!0};switch(Ka){case "left":Ga.anchor={x:Math.floor(fb.x1)-cb,column:"end",y:Ic*(Ob||fb.height()+2*fb.y1),row:sc};break;case "right":Ga.anchor={x:Math.ceil(fb.x2)+cb,y:Ic*(Ob||fb.height()+2*fb.y1),row:sc};break;case "top":Ga.anchor={y:Math.floor(La.y1)-cb,row:"end",x:Ic*(Bb||La.width()+2*La.x1),column:sc};break;
case "bottom":Ga.anchor={y:Math.ceil(La.y2)+cb,x:Ic*(Bb||La.width()+2*La.x1),column:sc};break;case "top-left":Ga.anchor={x:cb,y:cb};break;case "top-right":Ga.anchor={x:Bb-cb,y:cb,column:"end"};break;case "bottom-left":Ga.anchor={x:cb,y:Ob-cb,row:"end"};break;case "bottom-right":Ga.anchor={x:Bb-cb,y:Ob-cb,column:"end",row:"end"}}return Ga}function H(Ga,Ka){Ka=Ka.items[0];var cb=Ka.datum,fb=Ka.orient,La=Ka.bounds,Bb=Ka.x,Ob=Ka.y;Ka._bounds?Ka._bounds.clear().union(La):Ka._bounds=La.clone();La.clear();
var ec=Ka.items[0].items[0];var sc=Ka.padding,Ic=sc-ec.x,Xb=sc-ec.y;if(Ka.datum.title){var Wb=Ka.items[1].items[0],Kc=Wb.anchor,Kb=Ka.titlePadding||0,mc=sc-Wb.x,Ub=sc-Wb.y;switch(Wb.orient){case "left":Ic+=Math.ceil(Wb.bounds.width())+Kb;break;case "right":case "bottom":break;default:Xb+=Wb.bounds.height()+Kb}(Ic||Xb)&&D(Ga,ec,Ic,Xb);switch(Wb.orient){case "left":Ub+=ea(Ka,ec,Wb,Kc,1,1);break;case "right":mc+=ea(Ka,ec,Wb,"end",0,0)+Kb;Ub+=ea(Ka,ec,Wb,Kc,1,1);break;case "bottom":mc+=ea(Ka,ec,Wb,Kc,
0,0);Ub+=ea(Ka,ec,Wb,"end",-1,0,1)+Kb;break;default:mc+=ea(Ka,ec,Wb,Kc,0,0)}(mc||Ub)&&D(Ga,Wb,mc,Ub);0>(mc=Math.round(Wb.bounds.x1-sc))&&(D(Ga,ec,-mc,0),D(Ga,Wb,-mc,0))}else(Ic||Xb)&&D(Ga,ec,Ic,Xb);La=oa(Ka,La);Ga=2*Ka.padding;ec=2*Ka.padding;La.empty()||(Ga=Math.ceil(La.width()+Ga),ec=Math.ceil(La.height()+ec));"symbol"===cb.type&&R(Ka.items[0].items[0].items[0].items);"none"!==fb&&(Ka.x=Bb=0,Ka.y=Ob=0);Ka.width=Ga;Ka.height=ec;u.boundStroke(La.set(Bb,Ob,Bb+Ga,Ob+ec),Ka);Ka.mark.bounds.clear().union(La);
return Ka}function oa(Ga,Ka){Ga.items.forEach(cb=>Ka.union(cb.bounds));Ka.x1=Ga.padding;Ka.y1=Ga.padding;return Ka}function ea(Ga,Ka,cb,fb,La,Bb,Ob){const ec=cb.datum.vgrad;Ga=("symbol"===Ga.datum.type||!Bb&&ec||Ob?Ka:Ka.items[0]).bounds[La?"y2":"x2"]-Ga.padding;Ka=ec&&Bb?Ga:0;Bb=ec&&Bb?0:Ga;cb=0>=La?0:u.multiLineOffset(cb);return Math.round("start"===fb?Ka:"end"===fb?Bb-cb:.5*(Ga-cb))}function D(Ga,Ka,cb,fb){Ka.x+=cb;Ka.y+=fb;Ka.bounds.translate(cb,fb);Ka.mark.bounds.translate(cb,fb);Ga.dirty(Ka)}
function R(Ga){const Ka=Ga.reduce((cb,fb)=>{cb[fb.column]=Math.max(fb.bounds.x2-fb.x,cb[fb.column]||0);return cb},{});Ga.forEach(cb=>{cb.width=Ka[cb.column];cb.height=cb.bounds.y2-cb.y})}function la(Ga,Ka,cb,fb,La){var Bb=Ka.items[0],Ob=Bb.orient,ec=Bb.anchor,sc=Bb.offset,Ic=Bb.padding,Xb=Bb.items[0].items[0],Wb=Bb.items[1]&&Bb.items[1].items[0],Kc="left"===Ob||"right"===Ob?fb:cb,Kb=0,mc=cb=0;"group"!==Bb.frame?"left"===Ob?(Kb=La.y2,Kc=La.y1):"right"===Ob?(Kb=La.y1,Kc=La.y2):(Kb=La.x1,Kc=La.x2):"left"===
Ob&&(Kb=fb,Kc=0);fb="start"===ec?Kb:"end"===ec?Kc:(Kb+Kc)/2;if(Wb&&Wb.text){switch(Ob){case "top":case "bottom":mc=Xb.bounds.height()+Ic;break;case "left":cb=Xb.bounds.width()+Ic;break;case "right":cb=-Xb.bounds.width()-Ic}Ha.clear().union(Wb.bounds);Ha.translate(cb-(Wb.x||0),mc-(Wb.y||0));z(Wb,"x",cb)|z(Wb,"y",mc)&&(Ga.dirty(Wb),Wb.bounds.clear().union(Ha),Wb.mark.bounds.clear().union(Ha),Ga.dirty(Wb));Ha.clear().union(Wb.bounds)}else Ha.clear();Ha.union(Xb.bounds);switch(Ob){case "top":Ob=fb;La=
La.y1-Ha.height()-sc;break;case "left":Ob=La.x1-Ha.width()-sc;La=fb;break;case "right":Ob=La.x2+Ha.width()+sc;La=fb;break;case "bottom":Ob=fb;La=La.y2+sc;break;default:Ob=Bb.x,La=Bb.y}z(Bb,"x",Ob)|z(Bb,"y",La)&&(Ha.translate(Ob,La),Ga.dirty(Bb),Bb.bounds.clear().union(Ha),Ka.bounds.clear().union(Ha),Ga.dirty(Bb));return Bb.bounds}function Ia(Ga){w.Transform.call(this,null,Ga)}function Ma(Ga){return Ga&&"legend-entry"!==Ga.mark.role}function Ta(Ga,Ka,cb){var fb=Ka.items,La=Math.max(0,Ka.width||0),
Bb=Math.max(0,Ka.height||0),Ob=(new u.Bounds).set(0,0,La,Bb),ec=Ob.clone(),sc=Ob.clone(),Ic=[],Xb,Wb;var Kc=0;for(Wb=fb.length;Kc<Wb;++Kc){var Kb=fb[Kc];switch(Kb.role){case "axis":var mc=G(Kb)?ec:sc;mc.union(Y(Ga,Kb,La,Bb));break;case "title":var Ub=Kb;break;case "legend":Ic.push(H(Ga,Kb));break;case "frame":case "scope":case "row-header":case "row-footer":case "row-title":case "column-header":case "column-footer":case "column-title":ec.union(Kb.bounds);sc.union(Kb.bounds);break;default:Ob.union(Kb.bounds)}}if(Ic.length){const oc=
{};Ic.forEach(Cc=>{Xb=Cc.orient||"right";"none"!==Xb&&(oc[Xb]||(oc[Xb]=[])).push(Cc)});for(const Cc in oc)fb=oc[Cc],ba(Ga,fb,ka(fb,Cc,cb.legends,ec,sc,La,Bb));Ic.forEach(Cc=>{const Mc=Cc.bounds;Mc.equals(Cc._bounds)||(Cc.bounds=Cc._bounds,Ga.dirty(Cc),Cc.bounds=Mc,Ga.dirty(Cc));if(!cb.autosize||"fit"!==cb.autosize.type&&"fit-x"!==cb.autosize.type&&"fit-y"!==cb.autosize.type)Ob.union(Mc);else switch(Cc.orient){case "left":case "right":Ob.add(Mc.x1,0).add(Mc.x2,0);break;case "top":case "bottom":Ob.add(0,
Mc.y1).add(0,Mc.y2)}})}Ob.union(ec).union(sc);Ub&&Ob.union(la(Ga,Ub,La,Bb,Ob));Ka.clip&&Ob.set(0,0,Ka.width||0,Ka.height||0);ab(Ga,Ka,Ob,cb)}function ab(Ga,Ka,cb,fb){fb=fb.autosize||{};const La=fb.type;if(!(1>Ga._autosize)&&La){var Bb=Ga._width,Ob=Ga._height,ec=Math.max(0,Ka.width||0),sc=Math.max(0,Math.ceil(-cb.x1));Ka=Math.max(0,Ka.height||0);var Ic=Math.max(0,Math.ceil(-cb.y1)),Xb=Math.max(0,Math.ceil(cb.x2-ec));cb=Math.max(0,Math.ceil(cb.y2-Ka));if("padding"===fb.contains){const Wb=Ga.padding();
Bb-=Wb.left+Wb.right;Ob-=Wb.top+Wb.bottom}"none"===La?(Ic=sc=0,ec=Bb,Ka=Ob):"fit"===La?(ec=Math.max(0,Bb-sc-Xb),Ka=Math.max(0,Ob-Ic-cb)):"fit-x"===La?(ec=Math.max(0,Bb-sc-Xb),Ob=Ka+Ic+cb):"fit-y"===La?(Bb=ec+sc+Xb,Ka=Math.max(0,Ob-Ic-cb)):"pad"===La&&(Bb=ec+sc+Xb,Ob=Ka+Ic+cb);Ga._resizeView(Bb,Ob,ec,Ka,[sc,Ic],fb.resize)}}x.inherits(I,w.Transform,{transform(Ga,Ka){const cb=Ka.dataflow,fb=Ga.mark,La=fb.marktype,Bb=u.Marks[La],Ob=Bb.bound;let ec=fb.bounds,sc;if(Bb.nested)fb.items.length&&cb.dirty(fb.items[0]),
ec=B(fb,Ob),fb.items.forEach(Ic=>{Ic.bounds.clear().union(ec)});else if("group"===La||Ga.modified())switch(Ka.visit(Ka.MOD,Ic=>cb.dirty(Ic)),ec.clear(),fb.items.forEach(Ic=>ec.union(B(Ic,Ob))),fb.role){case "axis":case "legend":case "title":Ka.reflow()}else sc=Ka.changed(Ka.REM),Ka.visit(Ka.ADD,Ic=>{ec.union(B(Ic,Ob))}),Ka.visit(Ka.MOD,Ic=>{sc=sc||ec.alignsWith(Ic.bounds);cb.dirty(Ic);ec.union(B(Ic,Ob))}),sc&&(ec.clear(),fb.items.forEach(Ic=>ec.union(Ic.bounds)));u.boundClip(fb);return Ka.modifies("bounds")}});
N.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};x.inherits(N,w.Transform,{transform(Ga,Ka){const cb=da(Ka.dataflow),fb=Ga.as;let La=cb.value;Ka.visit(Ka.ADD,Bb=>Bb[fb]=Bb[fb]||++La);cb.set(this.value=La);return Ka}});x.inherits(U,w.Transform,{transform(Ga,Ka){let cb=this.value;cb||(cb=Ka.dataflow.scenegraph().mark(Ga.markdef,X(Ga),Ga.index),cb.group.context=Ga.context,Ga.context.group||(Ga.context.group=cb.group),cb.source=this.source,cb.clip=
Ga.clip,cb.interactive=Ga.interactive,this.value=cb);const fb="group"===cb.marktype?u.GroupItem:u.Item;Ka.visit(Ka.ADD,La=>fb.call(La,cb));if(Ga.modified("clip")||Ga.modified("interactive"))cb.clip=Ga.clip,cb.interactive=!!Ga.interactive,cb.zdirty=!0,Ka.reflow();cb.items=Ka.source;return Ka}});const db={parity:Ga=>Ga.filter((Ka,cb)=>cb%2?Ka.opacity=0:1),greedy:(Ga,Ka)=>{let cb;return Ga.filter((fb,La)=>La&&ub(cb.bounds,fb.bounds,Ka)?fb.opacity=0:(cb=fb,1))}},ub=(Ga,Ka,cb)=>cb>Math.max(Ka.x1-Ga.x2,
Ga.x1-Ka.x2,Ka.y1-Ga.y2,Ga.y1-Ka.y2),pb=(Ga,Ka)=>{for(var cb=1,fb=Ga.length,La=Ga[0].bounds;cb<fb;++cb)if(ub(La,La=Ga[cb].bounds,Ka))return!0},Ya=Ga=>{Ga=Ga.bounds;return 1<Ga.width()&&1<Ga.height()},Va=(Ga,Ka,cb)=>{Ga=Ga.range();var fb=new u.Bounds;"top"===Ka||"bottom"===Ka?fb.set(Ga[0],-Infinity,Ga[1],Infinity):fb.set(-Infinity,Ga[0],Infinity,Ga[1]);fb.expand(cb||1);return La=>fb.encloses(La.bounds)},Pa=Ga=>{Ga.forEach(Ka=>Ka.opacity=1);return Ga};x.inherits(V,w.Transform,{transform(Ga,Ka){const cb=
db[Ga.method]||db.parity,fb=Ga.separation||0;let La=Ka.materialize(Ka.SOURCE).source,Bb,Ob;if(La&&La.length){if(!Ga.method)return Ga.modified("method")&&(Pa(La),Ka=Ka.reflow(Ga.modified()).modifies("opacity")),Ka;La=La.filter(Ya);if(La.length){Ga.sort&&(La=La.slice().sort(Ga.sort));Bb=Pa(La);Ka=Ka.reflow(Ga.modified()).modifies("opacity");if(3<=Bb.length&&pb(Bb,fb)){do Bb=cb(Bb,fb);while(3<=Bb.length&&pb(Bb,fb));3>Bb.length&&!x.peek(La).opacity&&(1<Bb.length&&(x.peek(Bb).opacity=0),x.peek(La).opacity=
1)}Ga.boundScale&&0<=Ga.boundTolerance&&(Ob=Va(Ga.boundScale,Ga.boundOrient,+Ga.boundTolerance),La.forEach(sc=>{Ob(sc)||(sc.opacity=0)}));var ec=Bb[0].mark.bounds.clear();La.forEach(sc=>{sc.opacity&&ec.union(sc.bounds)});return Ka}}}});x.inherits(P,w.Transform,{transform(Ga,Ka){const cb=Ka.dataflow;Ka.visit(Ka.ALL,fb=>cb.dirty(fb));Ka.fields&&Ka.fields.zindex&&(Ga=Ka.source&&Ka.source[0])&&(Ga.mark.zdirty=!0)}});const Ha=new u.Bounds,Ca=(Ga,Ka)=>Math.floor(Math.min(Ga,Ka)),Aa=(Ga,Ka)=>Math.ceil(Math.max(Ga,
Ka));x.inherits(Ia,w.Transform,{transform(Ga,Ka){const cb=Ka.dataflow;Ga.mark.items.forEach(fb=>{if(Ga.layout){var La=Ga.layout;var Bb=fb.items;for(var Ob=Bb.length,ec=0,sc,Ic,Xb={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};ec<Ob;++ec)if(sc=Bb[ec],Ic=sc.items,"group"===sc.marktype)switch(sc.role){case "axis":case "legend":case "title":break;case "row-header":Xb.rowheaders.push(...Ic);break;case "row-footer":Xb.rowfooters.push(...Ic);break;case "column-header":Xb.colheaders.push(...Ic);
break;case "column-footer":Xb.colfooters.push(...Ic);break;case "row-title":Xb.rowtitle=Ic[0];break;case "column-title":Xb.coltitle=Ic[0];break;default:Xb.marks.push(...Ic)}Bb=Xb;Ic=Bb.marks;Xb="flush"===La.bounds?O:fa;Ob=La.offset;var Wb=La.columns||Ic.length,Kc=0>=Wb?1:Math.ceil(Ic.length/Wb),Kb=Kc*Wb;ec=ba(cb,Ic,La);ec.empty()&&ec.set(0,0,0,0);if(Bb.rowheaders){sc=J(La.headerBand,"row",null);var mc=wa(cb,Bb.rowheaders,Ic,Wb,Kc,-J(Ob,"rowHeader"),Ca,0,Xb,"x1",0,Wb,1,sc)}if(Bb.colheaders){sc=J(La.headerBand,
"column",null);var Ub=wa(cb,Bb.colheaders,Ic,Wb,Wb,-J(Ob,"columnHeader"),Ca,1,Xb,"y1",0,1,Wb,sc)}if(Bb.rowfooters){sc=J(La.footerBand,"row",null);var oc=wa(cb,Bb.rowfooters,Ic,Wb,Kc,J(Ob,"rowFooter"),Aa,0,Xb,"x2",Wb-1,Wb,1,sc)}if(Bb.colfooters){sc=J(La.footerBand,"column",null);var Cc=wa(cb,Bb.colfooters,Ic,Wb,Wb,J(Ob,"columnFooter"),Aa,1,Xb,"y2",Kb-Wb,1,Wb,sc)}Bb.rowtitle&&(sc=J(La.titleAnchor,"row"),Ic=J(Ob,"rowTitle"),Ic="end"===sc?oc+Ic:mc-Ic,sc=J(La.titleBand,"row",.5),ta(cb,Bb.rowtitle,Ic,0,
ec,sc));Bb.coltitle&&(sc=J(La.titleAnchor,"column"),Ic=J(Ob,"columnTitle"),Ic="end"===sc?Cc+Ic:Ub-Ic,sc=J(La.titleBand,"column",.5),ta(cb,Bb.coltitle,Ic,1,ec,sc))}Ta(cb,fb,Ga)});return Ma(Ga.mark.group)?Ka.reflow():Ka}});A.bound=I;A.identifier=N;A.mark=U;A.overlap=V;A.render=P;A.viewlayout=Ia})};
shadow$provide[433]=function(ob,Ba,Gb,Ea){(function(A,w){"object"===typeof Ea&&"undefined"!==typeof Gb?w(Ea,Ba(426),Ba(430),Ba(421)):"function"===typeof define&&define.amd?define(["exports","vega-dataflow","vega-scale","vega-util"],w):(A="undefined"!==typeof globalThis?globalThis:A||self,w(A.vega={},A.vega,A.vega,A.vega))})(this,function(A,w,u,x){function I(cc){w.Transform.call(this,null,cc)}function B(cc){w.Transform.call(this,null,cc)}function N(){return w.ingest({})}function da(cc){const tb=x.fastmap().test(tc=>
tc.exit);tb.lookup=tc=>tb.get(cc(tc));return tb}function U(cc){w.Transform.call(this,null,cc)}function X(cc){w.Transform.call(this,[],cc)}function V(cc){w.Transform.call(this,{},cc)}function P(cc,tb,tc){cc=+cc;tb=+tb;tc=2>(cd=arguments.length)?(tb=cc,cc=0,1):3>cd?1:+tc;for(var Ec=-1,cd=Math.max(0,Math.ceil((tb-cc)/tc))|0,bd=Array(cd);++Ec<cd;)bd[Ec]=cc+Ec*tc;return bd}function z(cc,tb){let tc=0;if(void 0===tb)for(var Ec of cc){if(Ec=+Ec)tc+=Ec}else{Ec=-1;for(let cd of cc)if(cd=+tb(cd,++Ec,cc))tc+=
cd}return tc}function G(cc){w.Transform.call(this,null,cc)}function Y(cc,tb,tc){cc.prototype=tb.prototype=tc;tc.constructor=cc}function Q(cc,tb){cc=Object.create(cc.prototype);for(var tc in tb)cc[tc]=tb[tc];return cc}function ja(){}function pa(){return this.rgb().formatHex()}function J(){return this.rgb().formatRgb()}function K(cc){var tb,tc;cc=(cc+"").trim().toLowerCase();return(tb=Hb.exec(cc))?(tc=tb[1].length,tb=parseInt(tb[1],16),6===tc?ba(tb):3===tc?new wa(tb>>8&15|tb>>4&240,tb>>4&15|tb&240,
(tb&15)<<4|tb&15,1):8===tc?O(tb>>24&255,tb>>16&255,tb>>8&255,(tb&255)/255):4===tc?O(tb>>12&15|tb>>8&240,tb>>8&15|tb>>4&240,tb>>4&15|tb&240,((tb&15)<<4|tb&15)/255):null):(tb=Jc.exec(cc))?new wa(tb[1],tb[2],tb[3],1):(tb=kc.exec(cc))?new wa(255*tb[1]/100,255*tb[2]/100,255*tb[3]/100,1):(tb=Ab.exec(cc))?O(tb[1],tb[2],tb[3],tb[4]):(tb=md.exec(cc))?O(255*tb[1]/100,255*tb[2]/100,255*tb[3]/100,tb[4]):(tb=yd.exec(cc))?oa(tb[1],tb[2]/100,tb[3]/100,1):(tb=hd.exec(cc))?oa(tb[1],tb[2]/100,tb[3]/100,tb[4]):Ed.hasOwnProperty(cc)?
ba(Ed[cc]):"transparent"===cc?new wa(NaN,NaN,NaN,0):null}function ba(cc){return new wa(cc>>16&255,cc>>8&255,cc&255,1)}function O(cc,tb,tc,Ec){0>=Ec&&(cc=tb=tc=NaN);return new wa(cc,tb,tc,Ec)}function fa(cc,tb,tc,Ec){if(1===arguments.length){var cd=cc;cd instanceof ja||(cd=K(cd));cd?(cd=cd.rgb(),cd=new wa(cd.r,cd.g,cd.b,cd.opacity)):cd=new wa}else cd=new wa(cc,tb,tc,null==Ec?1:Ec);return cd}function wa(cc,tb,tc,Ec){this.r=+cc;this.g=+tb;this.b=+tc;this.opacity=+Ec}function ta(){return`#${H(this.r)}${H(this.g)}${H(this.b)}`}
function aa(){const cc=ha(this.opacity);return`${1===cc?"rgb(":"rgba("}${ka(this.r)}, ${ka(this.g)}, ${ka(this.b)}${1===cc?")":`, ${cc})`}`}function ha(cc){return isNaN(cc)?1:Math.max(0,Math.min(1,cc))}function ka(cc){return Math.max(0,Math.min(255,Math.round(cc)||0))}function H(cc){cc=ka(cc);return(16>cc?"0":"")+cc.toString(16)}function oa(cc,tb,tc,Ec){0>=Ec?cc=tb=tc=NaN:0>=tc||1<=tc?cc=tb=NaN:0>=tb&&(cc=NaN);return new D(cc,tb,tc,Ec)}function ea(cc){if(cc instanceof D)return new D(cc.h,cc.s,cc.l,
cc.opacity);cc instanceof ja||(cc=K(cc));if(!cc)return new D;if(cc instanceof D)return cc;cc=cc.rgb();var tb=cc.r/255,tc=cc.g/255,Ec=cc.b/255,cd=Math.min(tb,tc,Ec),bd=Math.max(tb,tc,Ec),od=NaN,Dd=bd-cd,xd=(bd+cd)/2;Dd?(od=tb===bd?(tc-Ec)/Dd+6*(tc<Ec):tc===bd?(Ec-tb)/Dd+2:(tb-tc)/Dd+4,Dd/=.5>xd?bd+cd:2-bd-cd,od*=60):Dd=0<xd&&1>xd?0:od;return new D(od,Dd,xd,cc.opacity)}function D(cc,tb,tc,Ec){this.h=+cc;this.s=+tb;this.l=+tc;this.opacity=+Ec}function R(cc){cc=(cc||0)%360;return 0>cc?cc+360:cc}function la(cc){return Math.max(0,
Math.min(1,cc||0))}function Ia(cc,tb,tc){return 255*(60>cc?tb+(tc-tb)*cc/60:180>cc?tc:240>cc?tb+(tc-tb)*(240-cc)/60:tb)}function Ma(cc,tb){return function(tc){return cc+tc*tb}}function Ta(cc,tb,tc){return cc=Math.pow(cc,tc),tb=Math.pow(tb,tc)-cc,tc=1/tc,function(Ec){return Math.pow(cc+Ec*tb,tc)}}function ab(cc){return 1===(cc=+cc)?db:function(tb,tc){return tc-tb?Ta(tb,tc,cc):Qd(isNaN(tb)?tc:tb)}}function db(cc,tb){var tc=tb-cc;return tc?Ma(cc,tc):Qd(isNaN(cc)?tb:cc)}function ub(cc,tb){tb||(tb=[]);
var tc=cc?Math.min(tb.length,cc.length):0,Ec=tb.slice(),cd;return function(bd){for(cd=0;cd<tc;++cd)Ec[cd]=cc[cd]*(1-bd)+tb[cd]*bd;return Ec}}function pb(cc,tb){var tc=tb?tb.length:0,Ec=cc?Math.min(tc,cc.length):0,cd=Array(Ec),bd=Array(tc),od;for(od=0;od<Ec;++od)cd[od]=Ga(cc[od],tb[od]);for(;od<tc;++od)bd[od]=tb[od];return function(Dd){for(od=0;od<Ec;++od)bd[od]=cd[od](Dd);return bd}}function Ya(cc,tb){var tc=new Date;return cc=+cc,tb=+tb,function(Ec){return tc.setTime(cc*(1-Ec)+tb*Ec),tc}}function Va(cc,
tb){return cc=+cc,tb=+tb,function(tc){return cc*(1-tc)+tb*tc}}function Pa(cc,tb){var tc={},Ec={},cd;if(null===cc||"object"!==typeof cc)cc={};if(null===tb||"object"!==typeof tb)tb={};for(cd in tb)cd in cc?tc[cd]=Ga(cc[cd],tb[cd]):Ec[cd]=tb[cd];return function(bd){for(cd in tc)Ec[cd]=tc[cd](bd);return Ec}}function Ha(cc){return function(){return cc}}function Ca(cc){return function(tb){return cc(tb)+""}}function Aa(cc,tb){var tc=ed.lastIndex=bc.lastIndex=0,Ec,cd,bd,od=-1,Dd=[],xd=[];cc+="";for(tb+="";(Ec=
ed.exec(cc))&&(cd=bc.exec(tb));)(bd=cd.index)>tc&&(bd=tb.slice(tc,bd),Dd[od]?Dd[od]+=bd:Dd[++od]=bd),(Ec=Ec[0])===(cd=cd[0])?Dd[od]?Dd[od]+=cd:Dd[++od]=cd:(Dd[++od]=null,xd.push({i:od,x:Va(Ec,cd)})),tc=bc.lastIndex;tc<tb.length&&(bd=tb.slice(tc),Dd[od]?Dd[od]+=bd:Dd[++od]=bd);return 2>Dd.length?xd[0]?Ca(xd[0].x):Ha(tb):(tb=xd.length,function(sd){for(var Vd=0,re;Vd<tb;++Vd)Dd[(re=xd[Vd]).i]=re.x(sd);return Dd.join("")})}function Ga(cc,tb){var tc=typeof tb;if(null==tb||"boolean"===tc)cc=Qd(tb);else{if("number"===
tc)var Ec=Va;else"string"===tc?tc=(Ec=K(tb))?(tb=Ec,fd):Aa:(tb instanceof K?Ec=fd:tb instanceof Date?Ec=Ya:(Ec=tb,Ec=!ArrayBuffer.isView(Ec)||Ec instanceof DataView?Array.isArray(tb)?pb:"function"!==typeof tb.valueOf&&"function"!==typeof tb.toString||isNaN(tb)?Pa:Va:ub),tc=Ec),Ec=tc;cc=Ec(cc,tb)}return cc}function Ka(cc,tb){return cc=+cc,tb=+tb,function(tc){return Math.round(cc*(1-tc)+tb*tc)}}function cb(cc){return u.isContinuous(cc)&&cc!==u.Sequential}function fb(cc){w.Transform.call(this,null,cc);
this.modified(!0)}function La(cc,tb,tc){u.isLogarithmic(cc)&&Math.abs(tb.reduce((Ec,cd)=>Ec+(0>cd?-1:0<cd?1:0),0))!==tb.length&&tc.warn("Log scale domain includes zero: "+x.stringValue(tb));return tb}function Bb(cc,tb,tc){return x.isFunction(cc)&&(tb||tc)?u.interpolateRange(cc,Ob(tb||[0,1],tc)):cc}function Ob(cc,tb){return tb?cc.slice().reverse():cc}function ec(cc){w.Transform.call(this,null,cc)}function sc(cc){w.Transform.call(this,null,cc)}function Ic(cc,tb,tc,Ec,cd){tb=(tb-cc.sum)/2;for(var bd=
cc.length,od=0,Dd;od<bd;++od)Dd=cc[od],Dd[Ec]=tb,Dd[cd]=tb+=Math.abs(tc(Dd))}function Xb(cc,tb,tc,Ec,cd){tb=1/cc.sum;for(var bd=0,od=cc.length,Dd=0,xd=0,sd;Dd<od;++Dd)sd=cc[Dd],sd[Ec]=bd,sd[cd]=bd=tb*(xd+=Math.abs(tc(sd)))}function Wb(cc,tb,tc,Ec,cd){for(var bd=tb=0,od=cc.length,Dd=0,xd,sd;Dd<od;++Dd)sd=cc[Dd],xd=+tc(sd),0>xd?(sd[Ec]=bd,sd[cd]=bd+=xd):(sd[Ec]=tb,sd[cd]=tb+=xd)}function Kc(cc,tb,tc,Ec){var cd=[],bd=Wd=>Wd(sd),od;if(null==tb)cd.push(cc.slice());else{var Dd={};var xd=0;for(od=cc.length;xd<
od;++xd){var sd=cc[xd];var Vd=tb.map(bd);var re=Dd[Vd];re||(Dd[Vd]=re=[],cd.push(re));re.push(sd)}}bd=Vd=0;for(cc=cd.length;Vd<cc;++Vd){re=cd[Vd];tb=xd=0;for(od=re.length;xd<od;++xd)tb+=Math.abs(Ec(re[xd]));re.sum=tb;tb>bd&&(bd=tb);tc&&re.sort(tc)}cd.max=bd;return cd}x.inherits(I,w.Transform,{transform(cc,tb){if(this.value&&!cc.modified())return tb.StopPropagation;var tc=tb.dataflow.locale();tb=tb.fork(tb.NO_SOURCE|tb.NO_FIELDS);var Ec=this.value,cd=cc.scale,bd=u.tickCount(cd,null==cc.count?cc.values?
cc.values.length:10:cc.count,cc.minstep),od=cc.format||u.tickFormat(tc,cd,bd,cc.formatSpecifier,cc.formatType,!!cc.values),Dd=cc.values?u.validTicks(cd,cc.values,bd):u.tickValues(cd,bd);Ec&&(tb.rem=Ec);Ec=Dd.map((xd,sd)=>w.ingest({index:sd/(Dd.length-1||1),value:xd,label:od(xd)}));cc.extra&&Ec.length&&Ec.push(w.ingest({index:-1,extra:{value:Ec[0].value},label:""}));tb.source=Ec;this.value=tb.add=Ec;return tb}});x.inherits(B,w.Transform,{transform(cc,tb){var tc=tb.dataflow,Ec=tb.fork(tb.NO_SOURCE|
tb.NO_FIELDS),cd=cc.item||N,bd=cc.key||w.tupleid,od=this.value;x.isArray(Ec.encode)&&(Ec.encode=null);od&&(cc.modified("key")||tb.modified(bd))&&x.error("DataJoin does not support modified key function or fields.");od||(tb=tb.addAll(),this.value=od=da(bd));tb.visit(tb.ADD,Dd=>{const xd=bd(Dd);let sd=od.get(xd);sd?sd.exit?(od.empty--,Ec.add.push(sd)):Ec.mod.push(sd):(sd=cd(Dd),od.set(xd,sd),Ec.add.push(sd));sd.datum=Dd;sd.exit=!1});tb.visit(tb.MOD,Dd=>{var xd=bd(Dd);if(xd=od.get(xd))xd.datum=Dd,Ec.mod.push(xd)});
tb.visit(tb.REM,Dd=>{var xd=bd(Dd);xd=od.get(xd);Dd!==xd.datum||xd.exit||(Ec.rem.push(xd),xd.exit=!0,++od.empty)});tb.changed(tb.ADD_MOD)&&Ec.modifies("datum");(tb.clean()||cc.clean&&od.empty>tc.cleanThreshold)&&tc.runAfter(od.clean);return Ec}});x.inherits(U,w.Transform,{transform(cc,tb){var tc=tb.fork(tb.ADD_REM),Ec=cc.mod||!1,cd=cc.encoders,bd=tb.encode;if(x.isArray(bd))if(tc.changed()||bd.every(re=>cd[re]))bd=bd[0],tc.encode=null;else return tb.StopPropagation;var od="enter"===bd,Dd=cd.update||
x.falsy,xd=cd.enter||x.falsy,sd=cd.exit||x.falsy,Vd=(bd&&!od?cd[bd]:Dd)||x.falsy;tb.changed(tb.ADD)&&(tb.visit(tb.ADD,re=>{xd(re,cc);Dd(re,cc)}),tc.modifies(xd.output),tc.modifies(Dd.output),Vd!==x.falsy&&Vd!==Dd&&(tb.visit(tb.ADD,re=>{Vd(re,cc)}),tc.modifies(Vd.output)));tb.changed(tb.REM)&&sd!==x.falsy&&(tb.visit(tb.REM,re=>{sd(re,cc)}),tc.modifies(sd.output));if(od||Vd!==x.falsy)bd=tb.MOD|(cc.modified()?tb.REFLOW:0),od?(tb.visit(bd,re=>{const Wd=xd(re,cc)||Ec;(Vd(re,cc)||Wd)&&tc.mod.push(re)}),
tc.mod.length&&tc.modifies(xd.output)):tb.visit(bd,re=>{(Vd(re,cc)||Ec)&&tc.mod.push(re)}),tc.mod.length&&tc.modifies(Vd.output);return tc.changed()?tc:tb.StopPropagation}});x.inherits(X,w.Transform,{transform(cc,tb){if(null!=this.value&&!cc.modified())return tb.StopPropagation;var tc=tb.dataflow.locale(),Ec=tb.fork(tb.NO_SOURCE|tb.NO_FIELDS),cd=this.value,bd=cc.type||u.SymbolLegend,od=cc.scale,Dd=+cc.limit,xd=u.tickCount(od,null==cc.count?5:cc.count,cc.minstep),sd=!!cc.values||bd===u.SymbolLegend,
Vd=cc.format||u.labelFormat(tc,od,xd,bd,cc.formatSpecifier,cc.formatType,sd),re=cc.values||u.labelValues(od,xd),Wd;cd&&(Ec.rem=cd);if(bd===u.SymbolLegend){if(Dd&&re.length>Dd){tb.dataflow.warn("Symbol legend count exceeds limit, filtering items.");cd=re.slice(0,Dd-1);var Fe=!0}else cd=re;if(x.isFunction(Wd=cc.size)){cc.values||0!==od(cd[0])||(cd=cd.slice(1));var Bf=cd.reduce((bg,rf)=>Math.max(bg,Wd(rf,cc)),0)}else Wd=x.constant(Bf=Wd||8);cd=cd.map((bg,rf)=>w.ingest({index:rf,label:Vd(bg,rf,cd),value:bg,
offset:Bf,size:Wd(bg,cc)}));Fe&&(Fe=re[cd.length],cd.push(w.ingest({index:cd.length,label:`\u2026${re.length-cd.length} entries`,value:Fe,offset:Bf,size:Wd(Fe,cc)})))}else if(bd===u.GradientLegend){tb=od.domain();var Ye=u.scaleFraction(od,tb[0],x.peek(tb));3>re.length&&!cc.values&&tb[0]!==x.peek(tb)&&(re=[tb[0],x.peek(tb)]);cd=re.map((bg,rf)=>w.ingest({index:rf,label:Vd(bg,rf,re),value:bg,perc:Ye(bg)}))}else Wd=re.length-1,Ye=u.labelFraction(od),cd=re.map((bg,rf)=>w.ingest({index:rf,label:Vd(bg,rf,
re),value:bg,perc:rf?Ye(bg):0,perc2:rf===Wd?1:Ye(re[rf+1])}));Ec.source=cd;this.value=Ec.add=cd;return Ec}});const Kb=cc=>cc.source.x,mc=cc=>cc.source.y,Ub=cc=>cc.target.x,oc=cc=>cc.target.y;V.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field","default":"source.x"},{name:"sourceY",type:"field","default":"source.y"},{name:"targetX",type:"field","default":"target.x"},{name:"targetY",type:"field","default":"target.y"},{name:"orient",type:"enum","default":"vertical",
values:["horizontal","vertical","radial"]},{name:"shape",type:"enum","default":"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string","default":"path"}]};x.inherits(V,w.Transform,{transform(cc,tb){var tc=cc.sourceX||Kb,Ec=cc.sourceY||mc,cd=cc.targetX||Ub,bd=cc.targetY||oc,od=cc.as||"path",Dd=cc.shape||"line",xd=nc.get(Dd+"-"+(cc.orient||"vertical"))||nc.get(Dd);xd||x.error("LinkPath unsupported type: "+cc.shape+(cc.orient?"-"+cc.orient:
""));tb.visit(tb.SOURCE,sd=>{sd[od]=xd(tc(sd),Ec(sd),cd(sd),bd(sd))});return tb.reflow(cc.modified()).modifies(od)}});const Cc=(cc,tb,tc,Ec)=>"M"+cc+","+tb+"L"+tc+","+Ec,Mc=(cc,tb,tc,Ec)=>{var cd=tc-cc,bd=Ec-tb,od=Math.hypot(cd,bd)/2;return"M"+cc+","+tb+"A"+od+","+od+" "+180*Math.atan2(bd,cd)/Math.PI+" 0 1 "+tc+","+Ec},Pb=(cc,tb,tc,Ec)=>{var cd=tc-cc;const bd=Ec-tb,od=.2*(cd+bd);cd=.2*(bd-cd);return"M"+cc+","+tb+"C"+(cc+od)+","+(tb+cd)+" "+(tc+cd)+","+(Ec-od)+" "+tc+","+Ec},nc=x.fastmap({line:Cc,
"line-radial":(cc,tb,tc,Ec)=>Cc(tb*Math.cos(cc),tb*Math.sin(cc),Ec*Math.cos(tc),Ec*Math.sin(tc)),arc:Mc,"arc-radial":(cc,tb,tc,Ec)=>Mc(tb*Math.cos(cc),tb*Math.sin(cc),Ec*Math.cos(tc),Ec*Math.sin(tc)),curve:Pb,"curve-radial":(cc,tb,tc,Ec)=>Pb(tb*Math.cos(cc),tb*Math.sin(cc),Ec*Math.cos(tc),Ec*Math.sin(tc)),"orthogonal-horizontal":(cc,tb,tc,Ec)=>"M"+cc+","+tb+"V"+Ec+"H"+tc,"orthogonal-vertical":(cc,tb,tc,Ec)=>"M"+cc+","+tb+"H"+tc+"V"+Ec,"orthogonal-radial":(cc,tb,tc,Ec)=>{const cd=Math.cos(tc),bd=Math.sin(tc);
return"M"+tb*Math.cos(cc)+","+tb*Math.sin(cc)+"A"+tb+","+tb+" 0 0,"+((Math.abs(tc-cc)>Math.PI?tc<=cc:tc>cc)?1:0)+" "+tb*cd+","+tb*bd+"L"+Ec*cd+","+Ec*bd},"diagonal-horizontal":(cc,tb,tc,Ec)=>{const cd=(cc+tc)/2;return"M"+cc+","+tb+"C"+cd+","+tb+" "+cd+","+Ec+" "+tc+","+Ec},"diagonal-vertical":(cc,tb,tc,Ec)=>{const cd=(tb+Ec)/2;return"M"+cc+","+tb+"C"+cc+","+cd+" "+tc+","+cd+" "+tc+","+Ec},"diagonal-radial":(cc,tb,tc,Ec)=>{const cd=Math.cos(cc);cc=Math.sin(cc);const bd=Math.cos(tc);tc=Math.sin(tc);
const od=(tb+Ec)/2;return"M"+tb*cd+","+tb*cc+"C"+od*cd+","+od*cc+" "+od*bd+","+od*tc+" "+Ec*bd+","+Ec*tc}});G.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number","default":0},{name:"endAngle",type:"number","default":6.283185307179586},{name:"sort",type:"boolean","default":!1},{name:"as",type:"string",array:!0,length:2,"default":["startAngle","endAngle"]}]};x.inherits(G,w.Transform,{transform(cc,tb){var tc=cc.as||["startAngle","endAngle"],
Ec=tc[0],cd=tc[1],bd=cc.startAngle||0,od=null!=cc.endAngle?cc.endAngle:2*Math.PI,Dd=tb.source,xd=Dd.map(cc.field||x.one),sd=xd.length,Vd=bd;bd=(od-bd)/z(xd);od=P(sd);var re;cc.sort&&od.sort((Bf,Ye)=>xd[Bf]-xd[Ye]);for(re=0;re<sd;++re){var Wd=xd[od[re]];var Fe=Dd[od[re]];Fe[Ec]=Vd;Fe[cd]=Vd+=Wd*bd}this.value=xd;return tb.reflow(cc.modified()).modifies(tc)}});var rc=1/.7,Hb=/^#([0-9a-f]{3,8})$/,Jc=RegExp("^rgb\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*\\)$"),kc=RegExp("^rgb\\(\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*\\)$"),
Ab=RegExp("^rgba\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$"),md=RegExp("^rgba\\(\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$"),yd=RegExp("^hsl\\(\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*\\)$"),
hd=RegExp("^hsla\\(\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$"),Ed={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,
cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,
dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,
lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,
mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,
seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Y(ja,K,{copy(cc){return Object.assign(new this.constructor,this,cc)},displayable(){return this.rgb().displayable()},hex:pa,formatHex:pa,
formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return ea(this).formatHsl()},formatRgb:J,toString:J});Y(wa,fa,Q(ja,{brighter(cc){cc=null==cc?rc:Math.pow(rc,cc);return new wa(this.r*cc,this.g*cc,this.b*cc,this.opacity)},darker(cc){cc=null==cc?.7:Math.pow(.7,cc);return new wa(this.r*cc,this.g*cc,this.b*cc,this.opacity)},rgb(){return this},clamp(){return new wa(ka(this.r),ka(this.g),ka(this.b),ha(this.opacity))},displayable(){return-.5<=this.r&&255.5>this.r&&-.5<=this.g&&255.5>
this.g&&-.5<=this.b&&255.5>this.b&&0<=this.opacity&&1>=this.opacity},hex:ta,formatHex:ta,formatHex8:function(){return`#${H(this.r)}${H(this.g)}${H(this.b)}${H(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:aa,toString:aa}));Y(D,function(cc,tb,tc,Ec){return 1===arguments.length?ea(cc):new D(cc,tb,tc,null==Ec?1:Ec)},Q(ja,{brighter(cc){cc=null==cc?rc:Math.pow(rc,cc);return new D(this.h,this.s,this.l*cc,this.opacity)},darker(cc){cc=null==cc?.7:Math.pow(.7,cc);return new D(this.h,this.s,this.l*
cc,this.opacity)},rgb(){var cc=this.h%360+360*(0>this.h),tb=isNaN(cc)||isNaN(this.s)?0:this.s,tc=this.l;tb=tc+(.5>tc?tc:1-tc)*tb;tc=2*tc-tb;return new wa(Ia(240<=cc?cc-240:cc+120,tc,tb),Ia(cc,tc,tb),Ia(120>cc?cc+240:cc-120,tc,tb),this.opacity)},clamp(){return new D(R(this.h),la(this.s),la(this.l),ha(this.opacity))},displayable(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity},formatHsl(){const cc=ha(this.opacity);return`${1===cc?"hsl(":"hsla("}${R(this.h)}, ${100*
la(this.s)}%, ${100*la(this.l)}%${1===cc?")":`, ${cc})`}`}}));var Qd=cc=>()=>cc,fd=function tc(tb){function Ec(bd,od){var Dd=cd((bd=fa(bd)).r,(od=fa(od)).r),xd=cd(bd.g,od.g),sd=cd(bd.b,od.b),Vd=db(bd.opacity,od.opacity);return function(re){bd.r=Dd(re);bd.g=xd(re);bd.b=sd(re);bd.opacity=Vd(re);return bd+""}}var cd=ab(tb);Ec.gamma=tc;return Ec}(1),ed=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bc=new RegExp(ed.source,"g");const yc=x.toSet("set modified clear type scheme schemeExtent schemeCount domain domainMin domainMid domainMax domainRaw domainImplicit nice zero bins range rangeStep round reverse interpolate interpolateGamma".split(" "));
x.inherits(fb,w.Transform,{transform(tb,tc){var Ec=tc.dataflow,cd=this.value;var bd=tb.type;var od="";if(bd===u.Sequential)bd=u.Sequential+"-"+u.Linear;else{var Dd=tb.type;u.isContinuous(Dd)&&Dd!==u.Time&&Dd!==u.UTC&&(tb.scheme||tb.range&&tb.range.length&&tb.range.every(x.isString))&&(od=tb.rawDomain?tb.rawDomain.length:tb.domain?tb.domain.length+ +(null!=tb.domainMid):0,od=2===od?u.Sequential+"-":3===od?u.Diverging+"-":"");bd=(od+bd||u.Linear).toLowerCase()}cd&&bd===cd.type||(this.value=cd=u.scale(bd)());
for(bd in tb)yc[bd]||"padding"===bd&&cb(cd.type)||(x.isFunction(cd[bd])?cd[bd](tb[bd]):Ec.warn("Unsupported scale property: "+bd));od=bd=cd;(Dd=tb.domainRaw)?(cd.domain(La(cd.type,Dd,Ec)),Dd=Dd.length):Dd=-1;if(-1<Dd)Ec=Dd;else{var xd=tb.domain;Dd=cd.type;var sd;!(sd=tb.zero)&&(sd=void 0===tb.zero)&&(sd=cd.type,sd=!cd.bins&&(sd===u.Linear||sd===u.Pow||sd===u.Sqrt));if(xd){if(cb(Dd)&&tb.padding&&xd[0]!==x.peek(xd)){var Vd=tb.range,re=tb.padding;var Wd=tb.exponent;var Fe=tb.constant;Vd=Math.abs(x.peek(Vd)-
Vd[0]);re=Vd/(Vd-2*re);Wd=Dd===u.Log?x.zoomLog(xd,null,re):Dd===u.Sqrt?x.zoomPow(xd,null,re,.5):Dd===u.Pow?x.zoomPow(xd,null,re,Wd||1):Dd===u.Symlog?x.zoomSymlog(xd,null,re,Fe||1):x.zoomLinear(xd,null,re);xd=xd.slice();xd[0]=Wd[0];xd[xd.length-1]=Wd[1]}if(sd||null!=tb.domainMin||null!=tb.domainMax||null!=tb.domainMid)Wd=(xd=xd.slice()).length-1||1,sd&&(0<xd[0]&&(xd[0]=0),0>xd[Wd]&&(xd[Wd]=0)),null!=tb.domainMin&&(xd[0]=tb.domainMin),null!=tb.domainMax&&(xd[Wd]=tb.domainMax),null!=tb.domainMid&&(sd=
tb.domainMid,Fe=sd>xd[Wd]?Wd+1:sd<xd[0]?0:Wd,Fe!==Wd&&Ec.warn("Scale domainMid exceeds domain min or max.",sd),xd.splice(Fe,0,sd));cd.domain(La(Dd,xd,Ec));Dd===u.Ordinal&&cd.unknown(tb.domainImplicit?u.scaleImplicit:void 0);tb.nice&&cd.nice&&cd.nice(!0!==tb.nice&&u.tickCount(cd,tb.nice)||null);Ec=xd.length}else Ec=0}(Dd=tb.bins)&&!x.isArray(Dd)&&(sd=od.domain(),cd=sd[0],sd=x.peek(sd),xd=Dd.step,Wd=null==Dd.start?cd:Dd.start,Dd=null==Dd.stop?sd:Dd.stop,xd||x.error("Scale bins parameter missing step property."),
Wd<cd&&(Wd=xd*Math.ceil(cd/xd)),Dd>sd&&(Dd=xd*Math.floor(sd/xd)),Dd=P(Wd,Dd+xd/2,xd));Dd?od.bins=Dd:od.bins&&delete od.bins;od.type===u.BinOrdinal&&(Dd?tb.domain||tb.domainRaw||(od.domain(Dd),Ec=Dd.length):od.bins=od.domain());cd=Ec;a:{od=bd.type;Ec=tb.round||!1;Dd=tb.range;if(null!=tb.rangeStep)od!==u.Band&&od!==u.Point&&x.error("Only band and point scales support rangeStep."),Dd=[0,tb.rangeStep*u.bandSpace(cd,od===u.Point?1:(null!=tb.paddingInner?tb.paddingInner:tb.padding)||0,(null!=tb.paddingOuter?
tb.paddingOuter:tb.padding)||0)];else if(tb.scheme&&(Dd=tb.schemeExtent,x.isArray(tb.scheme)?sd=u.interpolateColors(tb.scheme,tb.interpolate,tb.interpolateGamma):(sd=tb.scheme.toLowerCase(),(sd=u.scheme(sd))||x.error(`Unrecognized scheme name: ${tb.scheme}`)),cd=od===u.Threshold?cd+1:od===u.BinOrdinal?cd-1:od===u.Quantile||od===u.Quantize?+tb.schemeCount||5:cd,Dd=u.isInterpolating(od)?Bb(sd,Dd,tb.reverse):x.isFunction(sd)?u.quantizeInterpolator(Bb(sd,Dd),cd):od===u.Ordinal?sd:sd.slice(0,cd),x.isFunction(Dd)))if(bd.interpolator){bd.interpolator(Dd);
break a}else x.error(`Scale type ${od} does not support interpolating color schemes.`);Dd&&u.isInterpolating(od)?bd.interpolator(u.interpolateColors(Ob(Dd,tb.reverse),tb.interpolate,tb.interpolateGamma)):(Dd&&tb.interpolate&&bd.interpolate?bd.interpolate(u.interpolate(tb.interpolate,tb.interpolateGamma)):x.isFunction(bd.round)?bd.round(Ec):x.isFunction(bd.rangeRound)&&bd.interpolate(Ec?Ka:Ga),Dd&&bd.range(Ob(Dd,tb.reverse)))}return tc.fork(tc.NO_SOURCE|tc.NO_FIELDS)}});x.inherits(ec,w.Transform,{transform(tb,
tc){const Ec=tb.modified("sort")||tc.changed(tc.ADD)||tc.modified(tb.sort.fields)||tc.modified("datum");Ec&&tc.source.sort(w.stableCompare(tb.sort));this.modified(Ec);return tc}});const $c=["y0","y1"];sc.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum","default":"zero",values:["zero","center","normalize"]},{name:"as",type:"string",array:!0,length:2,"default":$c}]};x.inherits(sc,
w.Transform,{transform(tb,tc){var Ec=tb.as||$c,cd=Ec[0],bd=Ec[1],od=w.stableCompare(tb.sort),Dd=tb.field||x.one,xd="center"===tb.offset?Ic:"normalize"===tb.offset?Xb:Wb,sd;od=Kc(tc.source,tb.groupby,od,Dd);var Vd=0;var re=od.length;for(sd=od.max;Vd<re;++Vd)xd(od[Vd],sd,Dd,cd,bd);return tc.reflow(tb.modified()).modifies(Ec)}});A.axisticks=I;A.datajoin=B;A.encode=U;A.legendentries=X;A.linkpath=V;A.pie=G;A.scale=fb;A.sortitems=ec;A.stack=sc})};
shadow$provide[434]=function(ob,Ba,Gb,Ea){(function(A,w){"object"===typeof Ea&&"undefined"!==typeof Gb?w(Ea,Ba(430)):"function"===typeof define&&define.amd?define(["exports","vega-scale"],w):(A="undefined"!==typeof globalThis?globalThis:A||self,w(A.vega={},A.vega))})(this,function(A,w){function*u(eb){for(const qb of eb)yield*qb}function x(eb){return 1<eb?0:-1>eb?sd:Math.acos(eb)}function I(eb){return 1<eb?Vd:-1>eb?-Vd:Math.asin(eb)}function B(){}function N(eb,qb){if(eb&&he.hasOwnProperty(eb.type))he[eb.type](eb,
qb)}function da(eb,qb,Qb){var zc=-1;Qb=eb.length-Qb;for(qb.lineStart();++zc<Qb;){var ad=eb[zc];qb.point(ad[0],ad[1],ad[2])}qb.lineEnd()}function U(eb,qb){var Qb=-1,zc=eb.length;for(qb.polygonStart();++Qb<zc;)da(eb[Qb],qb,1);qb.polygonEnd()}function X(eb,qb){if(eb&&Nd.hasOwnProperty(eb.type))Nd[eb.type](eb,qb);else N(eb,qb)}function V(eb){return[rf(eb[1],eb[0]),I(eb[2])]}function P(eb){var qb=eb[0];eb=eb[1];var Qb=Ff(eb);return[Qb*Ff(qb),Qb*lc(qb),lc(eb)]}function z(eb,qb){return eb[0]*qb[0]+eb[1]*
qb[1]+eb[2]*qb[2]}function G(eb,qb){return[eb[1]*qb[2]-eb[2]*qb[1],eb[2]*qb[0]-eb[0]*qb[2],eb[0]*qb[1]-eb[1]*qb[0]]}function Y(eb,qb){eb[0]+=qb[0];eb[1]+=qb[1];eb[2]+=qb[2]}function Q(eb,qb){return[eb[0]*qb,eb[1]*qb,eb[2]*qb]}function ja(eb){var qb=Zc(eb[0]*eb[0]+eb[1]*eb[1]+eb[2]*eb[2]);eb[0]/=qb;eb[1]/=qb;eb[2]/=qb}function pa(eb,qb){function Qb(zc,ad){return zc=eb(zc,ad),qb(zc[0],zc[1])}eb.invert&&qb.invert&&(Qb.invert=function(zc,ad){return zc=qb.invert(zc,ad),zc&&eb.invert(zc[0],zc[1])});return Qb}
function J(eb,qb){Ye(eb)>sd&&(eb-=Math.round(eb/Wd)*Wd);return[eb,qb]}function K(eb,qb,Qb){return(eb%=Wd)?qb||Qb?pa(O(eb),fa(qb,Qb)):O(eb):qb||Qb?fa(qb,Qb):J}function ba(eb){return function(qb,Qb){qb+=eb;Ye(qb)>sd&&(qb-=Math.round(qb/Wd)*Wd);return[qb,Qb]}}function O(eb){var qb=ba(eb);qb.invert=ba(-eb);return qb}function fa(eb,qb){function Qb(nd,ee){var Pd=Ff(ee),se=Ff(nd)*Pd;nd=lc(nd)*Pd;ee=lc(ee);Pd=ee*zc+se*ad;return[rf(nd*Rd-Pd*Md,se*zc-ee*ad),I(Pd*Rd+nd*Md)]}var zc=Ff(eb),ad=lc(eb),Rd=Ff(qb),
Md=lc(qb);Qb.invert=function(nd,ee){var Pd=Ff(ee),se=Ff(nd)*Pd;nd=lc(nd)*Pd;ee=lc(ee);Pd=ee*Rd-nd*Md;return[rf(nd*Rd+ee*Md,se*zc+Pd*ad),I(Pd*zc-se*ad)]};return Qb}function wa(eb){function qb(Qb){Qb=eb(Qb[0]*Bf,Qb[1]*Bf);return Qb[0]*=Fe,Qb[1]*=Fe,Qb}eb=K(eb[0]*Bf,eb[1]*Bf,2<eb.length?eb[2]*Bf:0);qb.invert=function(Qb){Qb=eb.invert(Qb[0]*Bf,Qb[1]*Bf);return Qb[0]*=Fe,Qb[1]*=Fe,Qb};return qb}function ta(eb,qb){qb=P(qb);qb[0]-=eb;ja(qb);eb=x(-qb[1]);return((0>-qb[2]?-eb:eb)+Wd-1E-6)%Wd}function aa(){var eb=
[],qb;return{point:function(Qb,zc,ad){qb.push([Qb,zc,ad])},lineStart:function(){eb.push(qb=[])},lineEnd:B,rejoin:function(){1<eb.length&&eb.push(eb.pop().concat(eb.shift()))},result:function(){var Qb=eb;eb=[];qb=null;return Qb}}}function ha(eb,qb){return 1E-6>Ye(eb[0]-qb[0])&&1E-6>Ye(eb[1]-qb[1])}function ka(eb,qb,Qb,zc){this.x=eb;this.z=qb;this.o=Qb;this.e=zc;this.v=!1;this.n=this.p=null}function H(eb,qb,Qb,zc,ad){var Rd=[],Md=[];eb.forEach(function(ye){if(!(0>=(Oe=ye.length-1))){var Oe,Se=ye[0],
Pe=ye[Oe];if(ha(Se,Pe)){if(!Se[2]&&!Pe[2]){ad.lineStart();for(nd=0;nd<Oe;++nd)ad.point((Se=ye[nd])[0],Se[1]);ad.lineEnd();return}Pe[0]+=2E-6}Rd.push(Oe=new ka(Se,ye,null,!0));Md.push(Oe.o=new ka(Se,null,Oe,!1));Rd.push(Oe=new ka(Pe,ye,null,!1));Md.push(Oe.o=new ka(Pe,null,Oe,!0))}});if(Rd.length){Md.sort(qb);oa(Rd);oa(Md);var nd=0;for(eb=Md.length;nd<eb;++nd)Md[nd].e=Qb=!Qb;Qb=Rd[0];for(var ee;;){for(var Pd=Qb,se=!0;Pd.v;)if((Pd=Pd.n)===Qb)return;qb=Pd.z;ad.lineStart();do{Pd.v=Pd.o.v=!0;if(Pd.e){if(se)for(nd=
0,eb=qb.length;nd<eb;++nd)ad.point((ee=qb[nd])[0],ee[1]);else zc(Pd.x,Pd.n.x,1,ad);Pd=Pd.n}else{if(se)for(qb=Pd.p.z,nd=qb.length-1;0<=nd;--nd)ad.point((ee=qb[nd])[0],ee[1]);else zc(Pd.x,Pd.p.x,-1,ad);Pd=Pd.p}Pd=Pd.o;qb=Pd.z;se=!se}while(!Pd.v);ad.lineEnd()}}}function oa(eb){if(qb=eb.length){for(var qb,Qb=0,zc=eb[0],ad;++Qb<qb;)zc.n=ad=eb[Qb],ad.p=zc,zc=ad;zc.n=ad=eb[0];ad.p=zc}}function ea(eb){return Ye(eb[0])<=sd?eb[0]:Uc(eb[0])*((Ye(eb[0])+sd)%Wd-sd)}function D(eb,qb,Qb,zc){return function(ad){function Rd(Ue,
uf){eb(Ue,uf)&&ad.point(Ue,uf)}function Md(Ue,uf){Oe.point(Ue,uf)}function nd(){Uf.point=Md;Oe.lineStart()}function ee(){Uf.point=Rd;Oe.lineEnd()}function Pd(Ue,uf){Xe.push([Ue,uf]);Pe.point(Ue,uf)}function se(){Pe.lineStart();Xe=[]}function ye(){Pd(Xe[0][0],Xe[0][1]);Pe.lineEnd();var Ue=Pe.clean(),uf=Se.result(),Yf=uf.length,yf;Xe.pop();Ze.push(Xe);Xe=null;if(Yf)if(Ue&1){if(Yf=uf[0],0<(uf=Yf.length-1)){Xd||(ad.polygonStart(),Xd=!0);ad.lineStart();for(Ue=0;Ue<uf;++Ue)ad.point((yf=Yf[Ue])[0],yf[1]);
ad.lineEnd()}}else 1<Yf&&Ue&2&&uf.push(uf.pop().concat(uf.shift())),Tf.push(uf.filter(R))}var Oe=qb(ad),Se=aa(),Pe=qb(Se),Xd=!1,Ze,Tf,Xe,Uf={point:Rd,lineStart:nd,lineEnd:ee,polygonStart:function(){Uf.point=Pd;Uf.lineStart=se;Uf.lineEnd=ye;Tf=[];Ze=[]},polygonEnd:function(){Uf.point=Rd;Uf.lineStart=nd;Uf.lineEnd=ee;Tf=Array.from(u(Tf));var Ue=Ze;var uf=ea(zc),Yf=zc[1],yf=lc(Yf),vf=[lc(uf),-Ff(uf),0],ne=0,wf=0,Hh=new xd;1===yf?Yf=Vd+1E-6:-1===yf&&(Yf=-Vd-1E-6);yf=0;for(var ag=Ue.length;yf<ag;++yf)if(mh=
(ph=Ue[yf]).length){var ph,mh,of=ph[mh-1],qh=ea(of),Ii=of[1]/2+re,Fi=lc(Ii),Nh=Ff(Ii);for(Ii=0;Ii<mh;++Ii,qh=Kg,Fi=Cf,Nh=nh,of=jh){var jh=ph[Ii],Kg=ea(jh);nh=jh[1]/2+re;var Cf=lc(nh),nh=Ff(nh),Ui=Kg-qh,Gi=0<=Ui?1:-1,oh=Gi*Ui,$d=oh>sd;Fi*=Cf;Hh.add(rf(Fi*Gi*lc(oh),Nh*nh+Fi*Ff(oh)));ne+=$d?Ui+Gi*Wd:Ui;$d^qh>=uf^Kg>=uf&&(of=G(P(of),P(jh)),ja(of),qh=G(vf,of),ja(qh),qh=($d^0<=Ui?-1:1)*I(qh[2]),Yf>qh||Yf===qh&&(of[0]||of[1]))&&(wf+=$d^0<=Ui?1:-1)}}Ue=(-1E-6>ne||1E-6>ne&&-1E-12>Hh)^wf&1;Tf.length?(Xd||(ad.polygonStart(),
Xd=!0),H(Tf,la,Ue,Qb,ad)):Ue&&(Xd||(ad.polygonStart(),Xd=!0),ad.lineStart(),Qb(null,null,1,ad),ad.lineEnd());Xd&&(ad.polygonEnd(),Xd=!1);Tf=Ze=null},sphere:function(){ad.polygonStart();ad.lineStart();Qb(null,null,1,ad);ad.lineEnd();ad.polygonEnd()}};return Uf}}function R(eb){return 1<eb.length}function la(eb,qb){return(0>(eb=eb.x)[0]?eb[1]-Vd-1E-6:Vd-eb[1])-(0>(qb=qb.x)[0]?qb[1]-Vd-1E-6:Vd-qb[1])}function Ia(eb){function qb(ee,Pd){return Ff(ee)*Ff(Pd)>ad}function Qb(ee,Pd,se){var ye=P(ee),Oe=P(Pd),
Se=[1,0,0];Oe=G(ye,Oe);var Pe=z(Oe,Oe);ye=Oe[0];var Xd=Pe-ye*ye;if(!Xd)return!se&&ee;Pe=ad*Pe/Xd;Xd=-ad*ye/Xd;ye=G(Se,Oe);Se=Q(Se,Pe);Oe=Q(Oe,Xd);Y(Se,Oe);Oe=z(Se,ye);Pe=z(ye,ye);Xd=Oe*Oe-Pe*(z(Se,Se)-1);if(!(0>Xd)){var Ze=Zc(Xd);Xd=Q(ye,(-Oe-Ze)/Pe);Y(Xd,Se);Xd=V(Xd);if(!se)return Xd;se=ee[0];var Tf=Pd[0];ee=ee[1];Pd=Pd[1];if(Tf<se){var Xe=se;se=Tf;Tf=Xe}var Uf=Tf-se,Ue=1E-6>Ye(Uf-sd);!Ue&&Pd<ee&&(Xe=ee,ee=Pd,Pd=Xe);if(Ue||1E-6>Uf?Ue?0<ee+Pd^Xd[1]<(1E-6>Ye(Xd[0]-se)?ee:Pd):ee<=Xd[1]&&Xd[1]<=Pd:Uf>
sd^(se<=Xd[0]&&Xd[0]<=Tf))return Pd=Q(ye,(-Oe+Ze)/Pe),Y(Pd,Se),[Xd,V(Pd)]}}function zc(ee,Pd){var se=Md?eb:sd-eb,ye=0;ee<-se?ye|=1:ee>se&&(ye|=2);Pd<-se?ye|=4:Pd>se&&(ye|=8);return ye}var ad=Ff(eb),Rd=6*Bf,Md=0<ad,nd=1E-6<Ye(ad);return D(qb,function(ee){var Pd,se,ye,Oe,Se;return{lineStart:function(){Oe=ye=!1;Se=1},point:function(Pe,Xd){var Ze=[Pe,Xd],Tf=qb(Pe,Xd);Xd=Md?Tf?0:zc(Pe,Xd):Tf?zc(Pe+(0>Pe?sd:-sd),Xd):0;!Pd&&(Oe=ye=Tf)&&ee.lineStart();Tf!==ye&&(Pe=Qb(Pd,Ze),!Pe||ha(Pd,Pe)||ha(Ze,Pe))&&(Ze[2]=
1);if(Tf!==ye)Se=0,Tf?(ee.lineStart(),Pe=Qb(Ze,Pd),ee.point(Pe[0],Pe[1])):(Pe=Qb(Pd,Ze),ee.point(Pe[0],Pe[1],2),ee.lineEnd()),Pd=Pe;else if(nd&&Pd&&Md^Tf){var Xe;Xd&se||!(Xe=Qb(Ze,Pd,!0))||(Se=0,Md?(ee.lineStart(),ee.point(Xe[0][0],Xe[0][1]),ee.point(Xe[1][0],Xe[1][1]),ee.lineEnd()):(ee.point(Xe[1][0],Xe[1][1]),ee.lineEnd(),ee.lineStart(),ee.point(Xe[0][0],Xe[0][1],3)))}!Tf||Pd&&ha(Pd,Ze)||ee.point(Ze[0],Ze[1]);Pd=Ze;ye=Tf;se=Xd},lineEnd:function(){ye&&ee.lineEnd();Pd=null},clean:function(){return Se|
(Oe&&ye)<<1}}},function(ee,Pd,se,ye){var Oe=ee;if(Rd){ee=Ff(eb);var Se=lc(eb),Pe=se*Rd;if(null==Oe)Oe=eb+se*Wd,Pd=eb-Pe/2;else if(Oe=ta(ee,Oe),Pd=ta(ee,Pd),0<se?Oe<Pd:Oe>Pd)Oe+=se*Wd;for(var Xd=Oe;0<se?Xd>Pd:Xd<Pd;Xd-=Pe)Oe=V([ee,-Se*Ff(Xd),-Se*lc(Xd)]),ye.point(Oe[0],Oe[1])}},Md?[0,-eb]:[-sd,eb-sd])}function Ma(eb,qb,Qb,zc,ad,Rd){var Md=eb[0],nd=eb[1],ee=0,Pd=1,se=qb[0]-Md,ye=qb[1]-nd;Qb-=Md;if(se||!(0<Qb)){Qb/=se;if(0>se){if(Qb<ee)return;Qb<Pd&&(Pd=Qb)}else if(0<se){if(Qb>Pd)return;Qb>ee&&(ee=Qb)}Qb=
ad-Md;if(se||!(0>Qb)){Qb/=se;if(0>se){if(Qb>Pd)return;Qb>ee&&(ee=Qb)}else if(0<se){if(Qb<ee)return;Qb<Pd&&(Pd=Qb)}Qb=zc-nd;if(ye||!(0<Qb)){Qb/=ye;if(0>ye){if(Qb<ee)return;Qb<Pd&&(Pd=Qb)}else if(0<ye){if(Qb>Pd)return;Qb>ee&&(ee=Qb)}Qb=Rd-nd;if(ye||!(0>Qb)){Qb/=ye;if(0>ye){if(Qb>Pd)return;Qb>ee&&(ee=Qb)}else if(0<ye){if(Qb<ee)return;Qb<Pd&&(Pd=Qb)}0<ee&&(eb[0]=Md+ee*se,eb[1]=nd+ee*ye);1>Pd&&(qb[0]=Md+Pd*se,qb[1]=nd+Pd*ye);return!0}}}}}function Ta(eb,qb,Qb,zc){function ad(ee,Pd,se,ye){var Oe=0,Se=0;
if(null==ee||(Oe=Rd(ee,se))!==(Se=Rd(Pd,se))||0>nd(ee,Pd)^0<se){do ye.point(0===Oe||3===Oe?eb:Qb,1<Oe?zc:qb);while((Oe=(Oe+se+4)%4)!==Se)}else ye.point(Pd[0],Pd[1])}function Rd(ee,Pd){return 1E-6>Ye(ee[0]-eb)?0<Pd?0:3:1E-6>Ye(ee[0]-Qb)?0<Pd?2:1:1E-6>Ye(ee[1]-qb)?0<Pd?1:0:0<Pd?3:2}function Md(ee,Pd){return nd(ee.x,Pd.x)}function nd(ee,Pd){var se=Rd(ee,1),ye=Rd(Pd,1);return se!==ye?se-ye:0===se?Pd[1]-ee[1]:1===se?ee[0]-Pd[0]:2===se?ee[1]-Pd[1]:Pd[0]-ee[0]}return function(ee){function Pd(ne,wf){eb<=
ne&&ne<=Qb&&qb<=wf&&wf<=zc&&ye.point(ne,wf)}function se(ne,wf){var Hh=eb<=ne&&ne<=Qb&&qb<=wf&&wf<=zc;Pe&&Xd.push([ne,wf]);if(Yf)Ze=ne,Tf=wf,Xe=Hh,Yf=!1,Hh&&(ye.lineStart(),ye.point(ne,wf));else if(Hh&&uf)ye.point(ne,wf);else{var ag=[Uf=Math.max(-1E9,Math.min(1E9,Uf)),Ue=Math.max(-1E9,Math.min(1E9,Ue))],ph=[ne=Math.max(-1E9,Math.min(1E9,ne)),wf=Math.max(-1E9,Math.min(1E9,wf))];Ma(ag,ph,eb,qb,Qb,zc)?(uf||(ye.lineStart(),ye.point(ag[0],ag[1])),ye.point(ph[0],ph[1]),Hh||ye.lineEnd(),yf=!1):Hh&&(ye.lineStart(),
ye.point(ne,wf),yf=!1)}Uf=ne;Ue=wf;uf=Hh}var ye=ee,Oe=aa(),Se,Pe,Xd,Ze,Tf,Xe,Uf,Ue,uf,Yf,yf,vf={point:Pd,lineStart:function(){vf.point=se;Pe&&Pe.push(Xd=[]);Yf=!0;uf=!1;Uf=Ue=NaN},lineEnd:function(){Se&&(se(Ze,Tf),Xe&&uf&&Oe.rejoin(),Se.push(Oe.result()));vf.point=Pd;uf&&ye.lineEnd()},polygonStart:function(){ye=Oe;Se=[];Pe=[];yf=!0},polygonEnd:function(){for(var ne,wf=ne=0,Hh=Pe.length;wf<Hh;++wf){var ag=Pe[wf],ph=1,mh=ag.length,of=ag[0],qh=of[0];for(of=of[1];ph<mh;++ph){var Ii=qh;var Fi=of;of=ag[ph];
qh=of[0];of=of[1];Fi<=zc?of>zc&&(qh-Ii)*(zc-Fi)>(of-Fi)*(eb-Ii)&&++ne:of<=zc&&(qh-Ii)*(zc-Fi)<(of-Fi)*(eb-Ii)&&--ne}}wf=yf&&ne;Hh=(Se=Array.from(u(Se))).length;if(wf||Hh)ee.polygonStart(),wf&&(ee.lineStart(),ad(null,null,1,ee),ee.lineEnd()),Hh&&H(Se,Md,ne,ad,ee),ee.polygonEnd();ye=ee;Se=Pe=Xd=null}};return vf}}function ab(){Lg.point=db}function db(eb,qb){Lg.point=ub;sf=tf=eb;Jf=lf=qb}function ub(eb,qb){Cd.add(lf*eb-tf*qb);tf=eb;lf=qb}function pb(){ub(sf,Jf)}function Ya(eb,qb){ei+=eb;Yh+=qb;++wh}function Va(){$g.point=
Pa}function Pa(eb,qb){$g.point=Ha;Ya(Hf=eb,zg=qb)}function Ha(eb,qb){var Qb=eb-Hf,zc=qb-zg;Qb=Zc(Qb*Qb+zc*zc);Wc+=Qb*(Hf+eb)/2;ib+=Qb*(zg+qb)/2;Ua+=Qb;Ya(Hf=eb,zg=qb)}function Ca(){$g.point=Ya}function Aa(){$g.point=Ka}function Ga(){cb(wd,Ce)}function Ka(eb,qb){$g.point=cb;Ya(wd=Hf=eb,Ce=zg=qb)}function cb(eb,qb){var Qb=eb-Hf,zc=qb-zg;Qb=Zc(Qb*Qb+zc*zc);Wc+=Qb*(Hf+eb)/2;ib+=Qb*(zg+qb)/2;Ua+=Qb;Qb=zg*eb-Hf*qb;v+=Qb*(Hf+eb);Xa+=Qb*(zg+qb);gc+=3*Qb;Ya(Hf=eb,zg=qb)}function fb(eb){this._context=eb}function La(eb,
qb){Sf.point=Bb;id=xe=eb;Bd=dg=qb}function Bb(eb,qb){xe-=eb;dg-=qb;Ag.add(Zc(xe*xe+dg*dg));xe=eb;dg=qb}function Ob(eb){let qb=1;this._+=eb[0];for(const Qb=eb.length;qb<Qb;++qb)this._+=arguments[qb]+eb[qb]}function ec(eb){const qb=Math.floor(eb);if(!(0<=qb))throw new RangeError(`invalid digits: ${eb}`);if(15<qb)return Ob;if(qb!==wg){const Qb=10**qb;wg=qb;xg=function(zc){let ad=1;this._+=zc[0];for(const Rd=zc.length;ad<Rd;++ad)this._+=Math.round(arguments[ad]*Qb)/Qb+zc[ad]}}return xg}function sc(eb,
qb){function Qb(nd){nd&&("function"===typeof ad&&Md.pointRadius(+ad.apply(this,arguments)),X(nd,Rd(Md)));return Md.result()}let zc=3,ad=4.5,Rd,Md;Qb.area=function(nd){X(nd,Rd(rg));return rg.result()};Qb.measure=function(nd){X(nd,Rd(Kf));return Kf.result()};Qb.bounds=function(nd){X(nd,Rd(oi));return oi.result()};Qb.centroid=function(nd){X(nd,Rd(lg));return lg.result()};Qb.projection=function(nd){if(!arguments.length)return eb;Rd=null==nd?(eb=null,qe):(eb=nd).stream;return Qb};Qb.context=function(nd){if(!arguments.length)return qb;
Md=null==nd?(qb=null,new $f(zc)):new fb(qb=nd);"function"!==typeof ad&&Md.pointRadius(ad);return Qb};Qb.pointRadius=function(nd){if(!arguments.length)return ad;ad="function"===typeof nd?nd:(Md.pointRadius(+nd),+nd);return Qb};Qb.digits=function(nd){if(!arguments.length)return zc;if(null==nd)zc=null;else{const ee=Math.floor(nd);if(!(0<=ee))throw new RangeError(`invalid digits: ${nd}`);zc=ee}null===qb&&(Md=new $f(zc));return Qb};return Qb.projection(eb).digits(zc).context(qb)}function Ic(eb){return function(qb){var Qb=
new Xb,zc;for(zc in eb)Qb[zc]=eb[zc];Qb.stream=qb;return Qb}}function Xb(){}function Wb(eb,qb,Qb){var zc=eb.clipExtent&&eb.clipExtent();eb.scale(150).translate([0,0]);null!=zc&&eb.clipExtent(null);X(Qb,eb.stream(oi));qb(oi.result());null!=zc&&eb.clipExtent(zc);return eb}function Kc(eb,qb,Qb){return Wb(eb,function(zc){var ad=qb[1][0]-qb[0][0],Rd=qb[1][1]-qb[0][1],Md=Math.min(ad/(zc[1][0]-zc[0][0]),Rd/(zc[1][1]-zc[0][1]));ad=+qb[0][0]+(ad-Md*(zc[1][0]+zc[0][0]))/2;zc=+qb[0][1]+(Rd-Md*(zc[1][1]+zc[0][1]))/
2;eb.scale(150*Md).translate([ad,zc])},Qb)}function Kb(eb,qb,Qb){return Wb(eb,function(zc){var ad=+qb,Rd=ad/(zc[1][0]-zc[0][0]);ad=(ad-Rd*(zc[1][0]+zc[0][0]))/2;zc=-Rd*zc[0][1];eb.scale(150*Rd).translate([ad,zc])},Qb)}function mc(eb,qb,Qb){return Wb(eb,function(zc){var ad=+qb,Rd=ad/(zc[1][1]-zc[0][1]),Md=-Rd*zc[0][0];zc=(ad-Rd*(zc[1][1]+zc[0][1]))/2;eb.scale(150*Rd).translate([Md,zc])},Qb)}function Ub(eb){return Ic({point:function(qb,Qb){qb=eb(qb,Qb);this.stream.point(qb[0],qb[1])}})}function oc(eb,
qb){function Qb(zc,ad,Rd,Md,nd,ee,Pd,se,ye,Oe,Se,Pe,Xd,Ze){var Tf=Pd-zc,Xe=se-ad,Uf=Tf*Tf+Xe*Xe;if(Uf>4*qb&&Xd--){var Ue=Md+Oe,uf=nd+Se,Yf=ee+Pe,yf=Zc(Ue*Ue+uf*uf+Yf*Yf),vf=I(Yf/=yf),ne=1E-6>Ye(Ye(Yf)-1)||1E-6>Ye(Rd-ye)?(Rd+ye)/2:rf(uf,Ue),wf=eb(ne,vf);vf=wf[0];wf=wf[1];var Hh=vf-zc,ag=wf-ad,ph=Xe*Hh-Tf*ag;if(ph*ph/Uf>qb||.3<Ye((Tf*Hh+Xe*ag)/Uf-.5)||Md*Oe+nd*Se+ee*Pe<Rf)Qb(zc,ad,Rd,Md,nd,ee,vf,wf,ne,Ue/=yf,uf/=yf,Yf,Xd,Ze),Ze.point(vf,wf),Qb(vf,wf,ne,Ue,uf,Yf,Pd,se,ye,Oe,Se,Pe,Xd,Ze)}}return function(zc){function ad(vf,
ne){vf=eb(vf,ne);zc.point(vf[0],vf[1])}function Rd(){Xe=NaN;yf.point=Md;zc.lineStart()}function Md(vf,ne){var wf=P([vf,ne]);ne=eb(vf,ne);Qb(Xe,Uf,Tf,Ue,uf,Yf,Xe=ne[0],Uf=ne[1],Tf=vf,Ue=wf[0],uf=wf[1],Yf=wf[2],16,zc);zc.point(Xe,Uf)}function nd(){yf.point=ad;zc.lineEnd()}function ee(){Rd();yf.point=Pd;yf.lineEnd=se}function Pd(vf,ne){Md(ye=vf,ne);Oe=Xe;Se=Uf;Pe=Ue;Xd=uf;Ze=Yf;yf.point=Md}function se(){Qb(Xe,Uf,Tf,Ue,uf,Yf,Oe,Se,ye,Pe,Xd,Ze,16,zc);yf.lineEnd=nd;nd()}var ye,Oe,Se,Pe,Xd,Ze,Tf,Xe,Uf,Ue,
uf,Yf,yf={point:ad,lineStart:Rd,lineEnd:nd,polygonStart:function(){zc.polygonStart();yf.lineStart=ee},polygonEnd:function(){zc.polygonEnd();yf.lineStart=Rd}};return yf}}function Cc(eb){return Ic({point:function(qb,Qb){qb=eb(qb,Qb);return this.stream.point(qb[0],qb[1])}})}function Mc(eb,qb,Qb,zc,ad){function Rd(Md,nd){Md*=zc;nd*=ad;return[qb+eb*Md,Qb-eb*nd]}Rd.invert=function(Md,nd){return[(Md-qb)/eb*zc,(Qb-nd)/eb*ad]};return Rd}function Pb(eb,qb,Qb,zc,ad,Rd){function Md(Pe,Xd){Pe*=zc;Xd*=ad;return[ee*
Pe-Pd*Xd+qb,Qb-Pd*Pe-ee*Xd]}if(!Rd)return Mc(eb,qb,Qb,zc,ad);var nd=Ff(Rd);Rd=lc(Rd);var ee=nd*eb,Pd=Rd*eb,se=nd/eb,ye=Rd/eb,Oe=(Rd*Qb-nd*qb)/eb,Se=(Rd*qb+nd*Qb)/eb;Md.invert=function(Pe,Xd){return[zc*(se*Pe-ye*Xd+Oe),ad*(Se-ye*Pe-se*Xd)]};return Md}function nc(eb){return rc(function(){return eb})()}function rc(eb){function qb(of){return ag(of[0]*Bf,of[1]*Bf)}function Qb(of){return(of=ag.invert(of[0],of[1]))&&[of[0]*Fe,of[1]*Fe]}function zc(){var of=Pb(Md,0,0,Ze,Tf,Xd).apply(null,Rd(Pd,se));of=Pb(Md,
nd-of[0],ee-of[1],Ze,Tf,Xd);Pe=K(ye,Oe,Se);Hh=pa(Rd,of);ag=pa(Pe,Hh);of=Hh;wf=+ne?oc(of,ne):Ub(of);return ad()}function ad(){ph=mh=null;return qb}var Rd,Md=150,nd=480,ee=250,Pd=0,se=0,ye=0,Oe=0,Se=0,Pe,Xd=0,Ze=1,Tf=1,Xe=null,Uf=qd,Ue=null,uf,Yf,yf,vf=qe,ne=.5,wf,Hh,ag,ph,mh;qb.stream=function(of){return ph&&mh===of?ph:ph=Gh(Cc(Pe)(Uf(wf(vf(mh=of)))))};qb.preclip=function(of){return arguments.length?(Uf=of,Xe=void 0,ad()):Uf};qb.postclip=function(of){return arguments.length?(vf=of,Ue=uf=Yf=yf=null,
ad()):vf};qb.clipAngle=function(of){return arguments.length?(Uf=+of?Ia(Xe=of*Bf):(Xe=null,qd),ad()):Xe*Fe};qb.clipExtent=function(of){return arguments.length?(vf=null==of?(Ue=uf=Yf=yf=null,qe):Ta(Ue=+of[0][0],uf=+of[0][1],Yf=+of[1][0],yf=+of[1][1]),ad()):null==Ue?null:[[Ue,uf],[Yf,yf]]};qb.scale=function(of){return arguments.length?(Md=+of,zc()):Md};qb.translate=function(of){return arguments.length?(nd=+of[0],ee=+of[1],zc()):[nd,ee]};qb.center=function(of){return arguments.length?(Pd=of[0]%360*Bf,
se=of[1]%360*Bf,zc()):[Pd*Fe,se*Fe]};qb.rotate=function(of){return arguments.length?(ye=of[0]%360*Bf,Oe=of[1]%360*Bf,Se=2<of.length?of[2]%360*Bf:0,zc()):[ye*Fe,Oe*Fe,Se*Fe]};qb.angle=function(of){return arguments.length?(Xd=of%360*Bf,zc()):Xd*Fe};qb.reflectX=function(of){return arguments.length?(Ze=of?-1:1,zc()):0>Ze};qb.reflectY=function(of){return arguments.length?(Tf=of?-1:1,zc()):0>Tf};qb.precision=function(of){if(arguments.length){var qh=Hh;var Ii=ne=of*of;qh=(wf=+Ii?oc(qh,Ii):Ub(qh),ad())}else qh=
Zc(ne);return qh};qb.fitExtent=function(of,qh){return Kc(qb,of,qh)};qb.fitSize=function(of,qh){return Kc(qb,[[0,0],of],qh)};qb.fitWidth=function(of,qh){return Kb(qb,of,qh)};qb.fitHeight=function(of,qh){return mc(qb,of,qh)};return function(){Rd=eb.apply(this,arguments);qb.invert=Rd.invert&&Qb;return zc()}}function Hb(eb){var qb=0,Qb=sd/3,zc=rc(eb);eb=zc(qb,Qb);eb.parallels=function(ad){return arguments.length?zc(qb=ad[0]*Bf,Qb=ad[1]*Bf):[qb*Fe,Qb*Fe]};return eb}function Jc(eb){function qb(zc,ad){return[zc*
Qb,lc(ad)/Qb]}var Qb=Ff(eb);qb.invert=function(zc,ad){return[zc/Qb,I(ad*Qb)]};return qb}function kc(eb,qb){function Qb(nd,ee){ee=Zc(Rd-2*ad*lc(ee))/ad;return[ee*lc(nd*=ad),Md-ee*Ff(nd)]}var zc=lc(eb),ad=(zc+lc(qb))/2;if(1E-6>Ye(ad))return Jc(eb);var Rd=1+zc*(2*ad-zc),Md=Zc(Rd)/ad;Qb.invert=function(nd,ee){ee=Md-ee;var Pd=rf(nd,Ye(ee))*Uc(ee);0>ee*ad&&(Pd-=sd*Uc(nd)*Uc(ee));return[Pd/ad,I((Rd-(nd*nd+ee*ee)*ad*ad)/(2*ad))]};return Qb}function Ab(){return Hb(kc).scale(155.424).center([0,33.6442])}function md(){return Ab().parallels([29.5,
45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function yd(eb){var qb=eb.length;return{point:function(Qb,zc){for(var ad=-1;++ad<qb;)eb[ad].point(Qb,zc)},sphere:function(){for(var Qb=-1;++Qb<qb;)eb[Qb].sphere()},lineStart:function(){for(var Qb=-1;++Qb<qb;)eb[Qb].lineStart()},lineEnd:function(){for(var Qb=-1;++Qb<qb;)eb[Qb].lineEnd()},polygonStart:function(){for(var Qb=-1;++Qb<qb;)eb[Qb].polygonStart()},polygonEnd:function(){for(var Qb=-1;++Qb<qb;)eb[Qb].polygonEnd()}}}function hd(eb){return function(qb,
Qb){var zc=Ff(qb),ad=Ff(Qb);zc=eb(zc*ad);return Infinity===zc?[2,0]:[zc*ad*lc(qb),zc*lc(Qb)]}}function Ed(eb){return function(qb,Qb){var zc=Zc(qb*qb+Qb*Qb),ad=eb(zc),Rd=lc(ad);ad=Ff(ad);return[rf(qb*Rd,zc*ad),I(zc&&Qb*Rd/zc)]}}function Qd(eb,qb){return[eb,gf(rd((Vd+qb)/2))]}function fd(eb){function qb(){var ye=sd*ad(),Oe=Qb(wa(Qb.rotate()).invert([0,0]));return Md(null==nd?[[Oe[0]-ye,Oe[1]-ye],[Oe[0]+ye,Oe[1]+ye]]:eb===Qd?[[Math.max(Oe[0]-ye,nd),ee],[Math.min(Oe[0]+ye,Pd),se]]:[[nd,Math.max(Oe[1]-
ye,ee)],[Pd,Math.min(Oe[1]+ye,se)]])}var Qb=nc(eb),zc=Qb.center,ad=Qb.scale,Rd=Qb.translate,Md=Qb.clipExtent,nd=null,ee,Pd,se;Qb.scale=function(ye){return arguments.length?(ad(ye),qb()):ad()};Qb.translate=function(ye){return arguments.length?(Rd(ye),qb()):Rd()};Qb.center=function(ye){return arguments.length?(zc(ye),qb()):zc()};Qb.clipExtent=function(ye){return arguments.length?(null==ye?nd=ee=Pd=se=null:(nd=+ye[0][0],ee=+ye[0][1],Pd=+ye[1][0],se=+ye[1][1]),qb()):null==nd?null:[[nd,ee],[Pd,se]]};return qb()}
function ed(eb,qb){function Qb(Md,nd){0<Rd?nd<-Vd+1E-6&&(nd=-Vd+1E-6):nd>Vd-1E-6&&(nd=Vd-1E-6);nd=Rd/Jb(rd((Vd+nd)/2),ad);return[nd*lc(ad*Md),Rd-nd*Ff(ad*Md)]}var zc=Ff(eb),ad=eb===qb?lc(eb):gf(zc/Ff(qb))/gf(rd((Vd+qb)/2)/rd((Vd+eb)/2)),Rd=zc*Jb(rd((Vd+eb)/2),ad)/ad;if(!ad)return Qd;Qb.invert=function(Md,nd){nd=Rd-nd;var ee=Uc(ad)*Zc(Md*Md+nd*nd),Pd=rf(Md,Ye(nd))*Uc(nd);0>nd*ad&&(Pd-=sd*Uc(Md)*Uc(nd));return[Pd/ad,2*bg(Jb(Rd/ee,1/ad))-Vd]};return Qb}function bc(eb,qb){return[eb,qb]}function yc(eb,
qb){function Qb(Md,nd){nd=Rd-nd;Md*=ad;return[nd*lc(Md),Rd-nd*Ff(Md)]}var zc=Ff(eb),ad=eb===qb?lc(eb):(zc-Ff(qb))/(qb-eb),Rd=zc/ad+eb;if(1E-6>Ye(ad))return bc;Qb.invert=function(Md,nd){nd=Rd-nd;var ee=rf(Md,Ye(nd))*Uc(nd);0>nd*ad&&(ee-=sd*Uc(Md)*Uc(nd));return[ee/ad,Rd-Uc(ad)*Zc(Md*Md+nd*nd)]};return Qb}function $c(eb,qb){qb=I(Lf*lc(qb));var Qb=qb*qb,zc=Qb*Qb*Qb;return[eb*Ff(qb)/(Lf*(1.340264+3*-.081106*Qb+zc*(7*8.93E-4+.034164*Qb))),qb*(1.340264+-.081106*Qb+zc*(8.93E-4+.003796*Qb))]}function cc(eb,
qb){var Qb=Ff(qb),zc=Ff(eb)*Qb;return[Qb*lc(eb)/zc,lc(qb)/zc]}function tb(eb,qb){var Qb=qb*qb,zc=Qb*Qb;return[eb*(.8707-.131979*Qb+zc*(-.013791+zc*(.003971*Qb-.001529*zc))),qb*(1.007226+Qb*(.015085+zc*(-.044475+.028874*Qb-.005916*zc)))]}function tc(eb,qb){return[Ff(qb)*lc(eb),lc(qb)]}function Ec(eb,qb){var Qb=Ff(qb),zc=1+Ff(eb)*Qb;return[Qb*lc(eb)/zc,lc(qb)/zc]}function cd(eb,qb){return[gf(rd((Vd+qb)/2)),-eb]}function bd(eb){return 1<eb?lb:-1>eb?-lb:Math.asin(eb)}function od(eb,qb){return function zc(){const ad=
qb();ad.type=eb;ad.path=sc().projection(ad);ad.copy=ad.copy||function(){const Rd=zc();Za.forEach(Md=>{if(ad[Md])Rd[Md](ad[Md]())});Rd.path.pointRadius(ad.path.pointRadius());return Rd};return w.registerScale(ad)}}function Dd(eb,qb){if(!eb||"string"!==typeof eb)throw Error("Projection type must be a name string.");eb=eb.toLowerCase();return 1<arguments.length?(wb[eb]=od(eb,qb),this):wb[eb]||null}class xd{constructor(){this._partials=new Float64Array(32);this._n=0}add(eb){const qb=this._partials;let Qb=
0;for(let zc=0;zc<this._n&&32>zc;zc++){const ad=qb[zc],Rd=eb+ad;(eb=Math.abs(eb)<Math.abs(ad)?eb-(Rd-ad):ad-(Rd-eb))&&(qb[Qb++]=eb);eb=Rd}qb[Qb]=eb;this._n=Qb+1;return this}valueOf(){const eb=this._partials;let qb=this._n;let Qb,zc=0;if(0<qb){for(zc=eb[--qb];0<qb;){var ad=zc;Qb=eb[--qb];zc=ad+Qb;if(ad=Qb-(zc-ad))break}0<qb&&(0>ad&&0>eb[qb-1]||0<ad&&0<eb[qb-1])&&(Qb=2*ad,ad=zc+Qb,Qb==ad-zc&&(zc=ad))}return zc}}var sd=Math.PI,Vd=sd/2,re=sd/4,Wd=2*sd,Fe=180/sd,Bf=sd/180,Ye=Math.abs,bg=Math.atan,rf=Math.atan2,
Ff=Math.cos,pg=Math.exp,gf=Math.log,Jb=Math.pow,lc=Math.sin,Uc=Math.sign||function(eb){return 0<eb?1:0>eb?-1:0},Zc=Math.sqrt,rd=Math.tan,Nd={Feature:function(eb,qb){N(eb.geometry,qb)},FeatureCollection:function(eb,qb){eb=eb.features;for(var Qb=-1,zc=eb.length;++Qb<zc;)N(eb[Qb].geometry,qb)}},he={Sphere:function(eb,qb){qb.sphere()},Point:function(eb,qb){eb=eb.coordinates;qb.point(eb[0],eb[1],eb[2])},MultiPoint:function(eb,qb){for(var Qb=eb.coordinates,zc=-1,ad=Qb.length;++zc<ad;)eb=Qb[zc],qb.point(eb[0],
eb[1],eb[2])},LineString:function(eb,qb){da(eb.coordinates,qb,0)},MultiLineString:function(eb,qb){eb=eb.coordinates;for(var Qb=-1,zc=eb.length;++Qb<zc;)da(eb[Qb],qb,0)},Polygon:function(eb,qb){U(eb.coordinates,qb)},MultiPolygon:function(eb,qb){eb=eb.coordinates;for(var Qb=-1,zc=eb.length;++Qb<zc;)U(eb[Qb],qb)},GeometryCollection:function(eb,qb){eb=eb.geometries;for(var Qb=-1,zc=eb.length;++Qb<zc;)N(eb[Qb],qb)}};J.invert=J;var qd=D(function(){return!0},function(eb){var qb=NaN,Qb=NaN,zc=NaN,ad;return{lineStart:function(){eb.lineStart();
ad=1},point:function(Rd,Md){var nd=0<Rd?sd:-sd,ee=Ye(Rd-qb);if(1E-6>Ye(ee-sd))eb.point(qb,Qb=0<(Qb+Md)/2?Vd:-Vd),eb.point(zc,Qb),eb.lineEnd(),eb.lineStart(),eb.point(nd,Qb),eb.point(Rd,Qb),ad=0;else if(zc!==nd&&ee>=sd){1E-6>Ye(qb-zc)&&(qb-=1E-6*zc);1E-6>Ye(Rd-nd)&&(Rd-=1E-6*nd);ee=qb;var Pd=Qb,se=Rd,ye,Oe,Se=lc(ee-se);Qb=1E-6<Ye(Se)?bg((lc(Pd)*(Oe=Ff(Md))*lc(se)-lc(Md)*(ye=Ff(Pd))*lc(ee))/(ye*Oe*Se)):(Pd+Md)/2;eb.point(zc,Qb);eb.lineEnd();eb.lineStart();eb.point(nd,Qb);ad=0}eb.point(qb=Rd,Qb=Md);
zc=nd},lineEnd:function(){eb.lineEnd();qb=Qb=NaN},clean:function(){return 2-ad}}},function(eb,qb,Qb,zc){null==eb?(Qb*=Vd,zc.point(-sd,Qb),zc.point(0,Qb),zc.point(sd,Qb),zc.point(sd,0),zc.point(sd,-Qb),zc.point(0,-Qb),zc.point(-sd,-Qb),zc.point(-sd,0),zc.point(-sd,Qb)):1E-6<Ye(eb[0]-qb[0])?(eb=eb[0]<qb[0]?sd:-sd,Qb=Qb*eb/2,zc.point(-eb,Qb),zc.point(0,Qb),zc.point(eb,Qb)):zc.point(qb[0],qb[1])},[-sd,-Vd]),qe=eb=>eb,we=new xd,Cd=new xd,sf,Jf,tf,lf,Lg={point:B,lineStart:B,lineEnd:B,polygonStart:function(){Lg.lineStart=
ab;Lg.lineEnd=pb},polygonEnd:function(){Lg.lineStart=Lg.lineEnd=Lg.point=B;we.add(Ye(Cd));Cd=new xd},result:function(){var eb=we/2;we=new xd;return eb}},rg=Lg,Pg=Infinity,fh=Pg,eh=-Pg,Zg=eh,oi={point:function(eb,qb){eb<Pg&&(Pg=eb);eb>eh&&(eh=eb);qb<fh&&(fh=qb);qb>Zg&&(Zg=qb)},lineStart:B,lineEnd:B,polygonStart:B,polygonEnd:B,result:function(){var eb=[[Pg,fh],[eh,Zg]];eh=Zg=-(fh=Pg=Infinity);return eb}},ei=0,Yh=0,wh=0,Wc=0,ib=0,Ua=0,v=0,Xa=0,gc=0,wd,Ce,Hf,zg,$g={point:Ya,lineStart:Va,lineEnd:Ca,polygonStart:function(){$g.lineStart=
Aa;$g.lineEnd=Ga},polygonEnd:function(){$g.point=Ya;$g.lineStart=Va;$g.lineEnd=Ca},result:function(){var eb=gc?[v/gc,Xa/gc]:Ua?[Wc/Ua,ib/Ua]:wh?[ei/wh,Yh/wh]:[NaN,NaN];ei=Yh=wh=Wc=ib=Ua=v=Xa=gc=0;return eb}},lg=$g;fb.prototype={_radius:4.5,pointRadius:function(eb){return this._radius=eb,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath();this._point=NaN},point:function(eb,
qb){switch(this._point){case 0:this._context.moveTo(eb,qb);this._point=1;break;case 1:this._context.lineTo(eb,qb);break;default:this._context.moveTo(eb+this._radius,qb),this._context.arc(eb,qb,this._radius,0,Wd)}},result:B};var Ag=new xd,Ug,id,Bd,xe,dg,Sf={point:B,lineStart:function(){Sf.point=La},lineEnd:function(){Ug&&Bb(id,Bd);Sf.point=B},polygonStart:function(){Ug=!0},polygonEnd:function(){Ug=null},result:function(){var eb=+Ag;Ag=new xd;return eb}},Kf=Sf;let wg,xg,dh,cg;class $f{constructor(eb){this._append=
null==eb?Ob:ec(eb);this._radius=4.5;this._=""}pointRadius(eb){this._radius=+eb;return this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z");this._point=NaN}point(eb,qb){switch(this._point){case 0:this._append`M${eb},${qb}`;this._point=1;break;case 1:this._append`L${eb},${qb}`;break;default:this._append`M${eb},${qb}`;if(this._radius!==dh||this._append!==xg)eb=this._radius,qb=this._,this._="",this._append`m0,${eb}a${eb},${eb} 0 1,1 0,${-2*
eb}a${eb},${eb} 0 1,1 0,${2*eb}z`,dh=eb,xg=this._append,cg=this._,this._=qb;this._+=cg}}result(){const eb=this._;this._="";return eb.length?eb:null}}Xb.prototype={constructor:Xb,point:function(eb,qb){this.stream.point(eb,qb)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Rf=Ff(30*Bf),Gh=Ic({point:function(eb,qb){this.stream.point(eb*
Bf,qb*Bf)}}),li=hd(function(eb){return Zc(2/(1+eb))});li.invert=Ed(function(eb){return 2*I(eb/2)});var gh=hd(function(eb){return(eb=x(eb))&&eb/lc(eb)});gh.invert=Ed(function(eb){return eb});Qd.invert=function(eb,qb){return[eb,2*bg(pg(qb))-Vd]};bc.invert=bc;var Lf=Zc(3)/2;$c.invert=function(eb,qb){for(var Qb=qb,zc=Qb*Qb,ad=zc*zc*zc,Rd=0,Md;12>Rd&&!(Md=Qb*(1.340264+-.081106*zc+ad*(8.93E-4+.003796*zc))-qb,zc=1.340264+3*-.081106*zc+ad*(7*8.93E-4+.034164*zc),Qb-=Md/=zc,zc=Qb*Qb,ad=zc*zc*zc,1E-12>Ye(Md));++Rd);
return[Lf*eb*(1.340264+3*-.081106*zc+ad*(7*8.93E-4+.034164*zc))/Ff(Qb),I(lc(Qb)/Lf)]};cc.invert=Ed(bg);tb.invert=function(eb,qb){var Qb=qb,zc=25;do{var ad=Qb*Qb;var Rd=ad*ad;Qb-=Rd=(Qb*(1.007226+ad*(.015085+Rd*(-.044475+.028874*ad-.005916*Rd)))-qb)/(1.007226+ad*(.045255+Rd*(-.311325+.259866*ad-.005916*11*Rd)))}while(1E-6<Ye(Rd)&&0<--zc);return[eb/(.8707+(ad=Qb*Qb)*(-.131979+ad*(-.013791+ad*ad*ad*(.003971-.001529*ad)))),Qb]};tc.invert=Ed(I);Ec.invert=Ed(function(eb){return 2*bg(eb)});cd.invert=function(eb,
qb){return[-qb,2*bg(pg(eb))-Vd]};var bi=Math.abs,ih=Math.cos,ia=Math.sin,Sa=Math.PI,lb=Sa/2,Eb=Math.sqrt(2),Vb=function(eb,qb,Qb){function zc(ad,Rd){var Md=Rd,nd=Qb*ia(Md),ee=30,Pd;do Md-=Pd=(Md+ia(Md)-nd)/(1+ih(Md));while(1E-6<bi(Pd)&&0<--ee);return[eb*ad*ih(Rd=Md/2),qb*ia(Rd)]}zc.invert=function(ad,Rd){return Rd=bd(Rd/qb),[ad/(eb*ih(Rd)),bd((2*Rd+ia(2*Rd))/Qb)]};return zc}(Eb/lb,Eb,Sa);const qc=sc(),Za="clipAngle clipExtent scale translate center rotate parallels precision reflectX reflectY coefficient distance fraction lobes parallel radius ratio spacing tilt".split(" "),
wb={albers:md,albersusa:function(){function eb(Oe){var Se=Oe[0];Oe=Oe[1];return se=null,(Rd.point(Se,Oe),se)||(nd.point(Se,Oe),se)||(Pd.point(Se,Oe),se)}function qb(){Qb=zc=null;return eb}var Qb,zc,ad=md(),Rd,Md=Ab().rotate([154,0]).center([-2,58.5]).parallels([55,65]),nd,ee=Ab().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Pd,se,ye={point:function(Oe,Se){se=[Oe,Se]}};eb.invert=function(Oe){var Se=ad.scale(),Pe=ad.translate(),Xd=(Oe[0]-Pe[0])/Se;Se=(Oe[1]-Pe[1])/Se;return(.12<=Se&&.234>Se&&
-.425<=Xd&&-.214>Xd?Md:.166<=Se&&.234>Se&&-.214<=Xd&&-.115>Xd?ee:ad).invert(Oe)};eb.stream=function(Oe){return Qb&&zc===Oe?Qb:Qb=yd([ad.stream(zc=Oe),Md.stream(Oe),ee.stream(Oe)])};eb.precision=function(Oe){if(!arguments.length)return ad.precision();ad.precision(Oe);Md.precision(Oe);ee.precision(Oe);return qb()};eb.scale=function(Oe){if(!arguments.length)return ad.scale();ad.scale(Oe);Md.scale(.35*Oe);ee.scale(Oe);return eb.translate(ad.translate())};eb.translate=function(Oe){if(!arguments.length)return ad.translate();
var Se=ad.scale(),Pe=+Oe[0],Xd=+Oe[1];Rd=ad.translate(Oe).clipExtent([[Pe-.455*Se,Xd-.238*Se],[Pe+.455*Se,Xd+.238*Se]]).stream(ye);nd=Md.translate([Pe-.307*Se,Xd+.201*Se]).clipExtent([[Pe-.425*Se+1E-6,Xd+.12*Se+1E-6],[Pe-.214*Se-1E-6,Xd+.234*Se-1E-6]]).stream(ye);Pd=ee.translate([Pe-.205*Se,Xd+.212*Se]).clipExtent([[Pe-.214*Se+1E-6,Xd+.166*Se+1E-6],[Pe-.115*Se-1E-6,Xd+.234*Se-1E-6]]).stream(ye);return qb()};eb.fitExtent=function(Oe,Se){return Kc(eb,Oe,Se)};eb.fitSize=function(Oe,Se){return Kc(eb,
[[0,0],Oe],Se)};eb.fitWidth=function(Oe,Se){return Kb(eb,Oe,Se)};eb.fitHeight=function(Oe,Se){return mc(eb,Oe,Se)};return eb.scale(1070)},azimuthalequalarea:function(){return nc(li).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function(){return nc(gh).scale(79.4188).clipAngle(179.999)},conicconformal:function(){return Hb(ed).scale(109.5).parallels([30,30])},conicequalarea:Ab,conicequidistant:function(){return Hb(yc).scale(131.154).center([0,13.9389])},equalEarth:function(){return nc($c).scale(177.158)},
equirectangular:function(){return nc(bc).scale(152.63)},gnomonic:function(){return nc(cc).scale(144.049).clipAngle(60)},identity:function(){function eb(){Pe=Qb*Rd;Xd=Qb*Md;Xe=Uf=null;return qb}function qb(Ue){var uf=Ue[0]*Pe;Ue=Ue[1]*Xd;if(nd){var Yf=Ue*ee-uf*Pd;uf=uf*ee+Ue*Pd;Ue=Yf}return[uf+zc,Ue+ad]}var Qb=1,zc=0,ad=0,Rd=1,Md=1,nd=0,ee,Pd,se=null,ye,Oe,Se,Pe=1,Xd=1,Ze=Ic({point:function(Ue,uf){Ue=qb([Ue,uf]);this.stream.point(Ue[0],Ue[1])}}),Tf=qe,Xe,Uf;qb.invert=function(Ue){var uf=Ue[0]-zc;Ue=
Ue[1]-ad;if(nd){var Yf=Ue*ee+uf*Pd;uf=uf*ee-Ue*Pd;Ue=Yf}return[uf/Pe,Ue/Xd]};qb.stream=function(Ue){return Xe&&Uf===Ue?Xe:Xe=Ze(Tf(Uf=Ue))};qb.postclip=function(Ue){return arguments.length?(Tf=Ue,se=ye=Oe=Se=null,eb()):Tf};qb.clipExtent=function(Ue){return arguments.length?(Tf=null==Ue?(se=ye=Oe=Se=null,qe):Ta(se=+Ue[0][0],ye=+Ue[0][1],Oe=+Ue[1][0],Se=+Ue[1][1]),eb()):null==se?null:[[se,ye],[Oe,Se]]};qb.scale=function(Ue){return arguments.length?(Qb=+Ue,eb()):Qb};qb.translate=function(Ue){return arguments.length?
(zc=+Ue[0],ad=+Ue[1],eb()):[zc,ad]};qb.angle=function(Ue){return arguments.length?(nd=Ue%360*Bf,Pd=lc(nd),ee=Ff(nd),eb()):nd*Fe};qb.reflectX=function(Ue){return arguments.length?(Rd=Ue?-1:1,eb()):0>Rd};qb.reflectY=function(Ue){return arguments.length?(Md=Ue?-1:1,eb()):0>Md};qb.fitExtent=function(Ue,uf){return Kc(qb,Ue,uf)};qb.fitSize=function(Ue,uf){return Kc(qb,[[0,0],Ue],uf)};qb.fitWidth=function(Ue,uf){return Kb(qb,Ue,uf)};qb.fitHeight=function(Ue,uf){return mc(qb,Ue,uf)};return qb},mercator:function(){return fd(Qd).scale(961/
Wd)},mollweide:function(){return nc(Vb).scale(169.529)},naturalEarth1:function(){return nc(tb).scale(175.295)},orthographic:function(){return nc(tc).scale(249.5).clipAngle(90.000001)},stereographic:function(){return nc(Ec).scale(250).clipAngle(142)},transversemercator:function(){var eb=fd(cd),qb=eb.center,Qb=eb.rotate;eb.center=function(zc){return arguments.length?qb([-zc[1],zc[0]]):(zc=qb(),[zc[1],-zc[0]])};eb.rotate=function(zc){return arguments.length?Qb([zc[0],zc[1],2<zc.length?zc[2]+90:90]):
(zc=Qb(),[zc[0],zc[1],zc[2]-90])};return Qb([0,0,90]).scale(159.155)}};for(const eb in wb)Dd(eb,wb[eb]);A.getProjectionPath=function(eb){return eb&&eb.path||qc};A.projection=Dd;A.projectionProperties=Za})};
shadow$provide[435]=function(ob,Ba,Gb,Ea){(function(A,w){"object"===typeof Ea&&"undefined"!==typeof Gb?w(Ea,Ba(426),Ba(421),Ba(427),Ba(434),Ba(429)):"function"===typeof define&&define.amd?define("exports vega-dataflow vega-util vega-statistics vega-projection vega-canvas".split(" "),w):(A="undefined"!==typeof globalThis?globalThis:A||self,w((A.vega=A.vega||{},A.vega.transforms={}),A.vega,A.vega,A.vega,A.vega,A.vega))})(this,function(A,w,u,x,I,B){function N(tb,tc,Ec){var cd=(tc-tb)/Math.max(0,Ec),
bd=Math.floor(Math.log10(cd));cd/=Math.pow(10,bd);cd=cd>=rc?10:cd>=Hb?5:cd>=Jc?2:1;let od;0>bd?(od=Math.pow(10,-bd)/cd,bd=Math.round(tb*od),cd=Math.round(tc*od),bd/od<tb&&++bd,cd/od>tc&&--cd,od=-od):(od=Math.pow(10,bd)*cd,bd=Math.round(tb/od),cd=Math.round(tc/od),bd*od<tb&&++bd,cd*od>tc&&--cd);return cd<bd&&.5<=Ec&&2>Ec?N(tb,tc,2*Ec):[bd,cd,od]}function da(tb,tc,Ec){return N(+tb,+tc,+Ec)[2]}function U(tb,tc){let Ec;if(void 0===tc)for(var cd of tb)null!=cd&&(Ec<cd||void 0===Ec&&cd>=cd)&&(Ec=cd);else{cd=
-1;for(let bd of tb)null!=(bd=tc(bd,++cd,tb))&&(Ec<bd||void 0===Ec&&bd>=bd)&&(Ec=bd)}return Ec}function X(tb,tc,Ec){tb=+tb;tc=+tc;Ec=2>(bd=arguments.length)?(tc=tb,tb=0,1):3>bd?1:+Ec;for(var cd=-1,bd=Math.max(0,Math.ceil((tc-tb)/Ec))|0,od=Array(bd);++cd<bd;)od[cd]=tb+cd*Ec;return od}function V(tb,tc){let Ec=0;if(void 0===tc)for(var cd of tb){if(cd=+cd)Ec+=cd}else{cd=-1;for(let bd of tb)if(bd=+tc(bd,++cd,tb))Ec+=bd}return Ec}function P(){}function z(){function tb(xd,sd){return sd.map(Vd=>tc(xd,Vd))}
function tc(xd,sd){var Vd=[],re=[];Ec(xd,sd,Wd=>{Dd(Wd,xd,sd);for(var Fe=0,Bf=Wd.length,Ye=Wd[Bf-1][1]*Wd[0][0]-Wd[Bf-1][0]*Wd[0][1];++Fe<Bf;)Ye+=Wd[Fe-1][1]*Wd[Fe][0]-Wd[Fe-1][0]*Wd[Fe][1];0<Ye?Vd.push([Wd]):re.push(Wd)});re.forEach(Wd=>{for(var Fe=0,Bf=Vd.length,Ye;Fe<Bf;++Fe){a:{var bg=(Ye=Vd[Fe])[0];for(var rf=Wd,Ff=-1,pg=rf.length;++Ff<pg;){b:{var gf=bg;for(var Jb=rf[Ff],lc=Jb[0],Uc=Jb[1],Zc=-1,rd=0,Nd=gf.length,he=Nd-1;rd<Nd;he=rd++){var qd=gf[rd],qe=qd[0],we=qd[1],Cd=gf[he];he=Cd[0];var sf=
Cd[1],Jf,tf=qd;qd=Cd;Cd=Jb;if(Jf=(qd[0]-tf[0])*(Cd[1]-tf[1])===(Cd[0]-tf[0])*(qd[1]-tf[1]))tf=tf[Jf=+(tf[0]===qd[0])],Cd=Cd[Jf],qd=qd[Jf],Jf=tf<=Cd&&Cd<=qd||qd<=Cd&&Cd<=tf;if(Jf){gf=0;break b}we>Uc!==sf>Uc&&lc<(he-qe)*(Uc-we)/(sf-we)+qe&&(Zc=-Zc)}gf=Zc}if(gf){bg=gf;break a}}bg=0}if(-1!==bg){Ye.push(Wd);break}}});return{type:"MultiPolygon",value:sd,coordinates:Vd}}function Ec(xd,sd,Vd){function re(gf){var Jb=[gf[0][0]+Ye,gf[0][1]+Bf];gf=[gf[1][0]+Ye,gf[1][1]+Bf];var lc=2*Jb[0]+Jb[1]*(bd+1)*4,Uc=2*
gf[0]+gf[1]*(bd+1)*4,Zc,rd;(Zc=Fe[lc])?(rd=Wd[Uc])?(delete Fe[Zc.end],delete Wd[rd.start],Zc===rd?(Zc.ring.push(gf),Vd(Zc.ring)):Wd[Zc.start]=Fe[rd.end]={start:Zc.start,end:rd.end,ring:Zc.ring.concat(rd.ring)}):(delete Fe[Zc.end],Zc.ring.push(gf),Fe[Zc.end=Uc]=Zc):(Zc=Wd[Uc])?(rd=Fe[lc])?(delete Wd[Zc.start],delete Fe[rd.end],Zc===rd?(Zc.ring.push(gf),Vd(Zc.ring)):Wd[rd.start]=Fe[Zc.end]={start:rd.start,end:Zc.end,ring:rd.ring.concat(Zc.ring)}):(delete Wd[Zc.start],Zc.ring.unshift(Jb),Wd[Zc.start=
lc]=Zc):Wd[lc]=Fe[Uc]={start:lc,end:Uc,ring:[Jb,gf]}}var Wd=[],Fe=[],Bf;var Ye=Bf=-1;var bg=xd[0]>=sd;for(kc[bg<<1].forEach(re);++Ye<bd-1;){var rf=bg;bg=xd[Ye+1]>=sd;kc[rf|bg<<1].forEach(re)}for(kc[bg<<0].forEach(re);++Bf<od-1;){Ye=-1;bg=xd[Bf*bd+bd]>=sd;var Ff=xd[Bf*bd]>=sd;for(kc[bg<<1|Ff<<2].forEach(re);++Ye<bd-1;){rf=bg;bg=xd[Bf*bd+bd+Ye+1]>=sd;var pg=Ff;Ff=xd[Bf*bd+Ye+1]>=sd;kc[rf|bg<<1|Ff<<2|pg<<3].forEach(re)}kc[bg|Ff<<3].forEach(re)}Ye=-1;Ff=xd[Bf*bd]>=sd;for(kc[Ff<<2].forEach(re);++Ye<bd-
1;)pg=Ff,Ff=xd[Bf*bd+Ye+1]>=sd,kc[Ff<<2|pg<<3].forEach(re);kc[Ff<<3].forEach(re)}function cd(xd,sd,Vd){xd.forEach(re=>{var Wd=re[0],Fe=re[1],Bf=Wd|0,Ye=Fe|0,bg=sd[Ye*bd+Bf];if(0<Wd&&Wd<bd&&Bf===Wd){var rf=sd[Ye*bd+Bf-1];re[0]=Wd+(Vd-rf)/(bg-rf)-.5}0<Fe&&Fe<od&&Ye===Fe&&(rf=sd[(Ye-1)*bd+Bf],re[1]=Fe+(Vd-rf)/(bg-rf)-.5)})}var bd=1,od=1,Dd=cd;tb.contour=tc;tb.size=function(xd){if(!arguments.length)return[bd,od];var sd=Math.floor(xd[0]),Vd=Math.floor(xd[1]);0<=sd&&0<=Vd||u.error("invalid size");return bd=
sd,od=Vd,tb};tb.smooth=function(xd){return arguments.length?(Dd=xd?cd:P,tb):Dd===cd};return tb}function G(tb,tc,Ec){return function(cd){var bd=u.extent(cd);cd=Ec?Math.min(bd[0],0):bd[0];bd=bd[1];var od=bd-cd;if(tc){var Dd=tb;var xd=+bd;var sd=+cd;Dd=+Dd;sd=(od=xd<sd)?da(xd,sd,Dd):da(sd,xd,Dd);od=(od?-1:1)*(0>sd?1/-sd:sd)}else od/=tb+1;return X(cd+od,bd,od)}}function Y(tb){w.Transform.call(this,null,tb)}function Q(tb,tc,Ec){const cd=G(Ec.levels||10,Ec.nice,!1!==Ec.zero);return"shared"!==Ec.resolve?
cd:cd(tb.map(bd=>U(tc(bd).values)))}function ja(tb,tc,Ec,cd){var bd=cd.scale||tc.scale;let od=cd.translate||tc.translate;u.isFunction(bd)&&(bd=bd(Ec,cd));u.isFunction(od)&&(od=od(Ec,cd));if(1!==bd&&null!=bd||od)Ec=(u.isNumber(bd)?bd:bd[0])||1,bd=(u.isNumber(bd)?bd:bd[1])||1,tb.forEach(pa(tc,Ec,bd,od&&od[0]||0,od&&od[1]||0))}function pa(tb,tc,Ec,cd,bd){function od(Wd){Wd.forEach(Dd)}function Dd(Wd){re&&Wd.reverse();Wd.forEach(xd)}function xd(Wd){Wd[0]=(Wd[0]-sd)*tc+cd;Wd[1]=(Wd[1]-Vd)*Ec+bd}const sd=
tb.x1||0,Vd=tb.y1||0,re=0>tc*Ec;return function(Wd){Wd.coordinates.forEach(od);return Wd}}function J(tb,tc,Ec){tb=0<=tb?tb:x.bandwidthNRD(tc,Ec);return Math.round((Math.sqrt(4*tb*tb+1)-1)/2)}function K(tb){return u.isFunction(tb)?tb:u.constant(+tb)}function ba(){function tb(sd,Vd){const re=J(bd[0],sd,tc)>>xd,Wd=J(bd[1],sd,Ec)>>xd,Fe=re?re+2:0,Bf=Wd?Wd+2:0,Ye=2*Fe+(od>>xd),bg=2*Bf+(Dd>>xd),rf=new Float32Array(Ye*bg),Ff=new Float32Array(Ye*bg);let pg=rf;sd.forEach(gf=>{const Jb=Fe+(+tc(gf)>>xd),lc=
Bf+(+Ec(gf)>>xd);0<=Jb&&Jb<Ye&&0<=lc&&lc<bg&&(rf[Jb+lc*Ye]+=+cd(gf))});0<re&&0<Wd?(O(Ye,bg,rf,Ff,re),fa(Ye,bg,Ff,rf,Wd),O(Ye,bg,rf,Ff,re),fa(Ye,bg,Ff,rf,Wd),O(Ye,bg,rf,Ff,re),fa(Ye,bg,Ff,rf,Wd)):0<re?(O(Ye,bg,rf,Ff,re),O(Ye,bg,Ff,rf,re),O(Ye,bg,rf,Ff,re),pg=Ff):0<Wd&&(fa(Ye,bg,rf,Ff,Wd),fa(Ye,bg,Ff,rf,Wd),fa(Ye,bg,rf,Ff,Wd),pg=Ff);sd=Vd?Math.pow(2,-2*xd):1/V(pg);for(let gf=0,Jb=Ye*bg;gf<Jb;++gf)pg[gf]*=sd;return{values:pg,scale:1<<xd,width:Ye,height:bg,x1:Fe,y1:Bf,x2:Fe+(od>>xd),y2:Bf+(Dd>>xd)}}var tc=
sd=>sd[0],Ec=sd=>sd[1],cd=u.one,bd=[-1,-1],od=960,Dd=500,xd=2;tb.x=function(sd){return arguments.length?(tc=K(sd),tb):tc};tb.y=function(sd){return arguments.length?(Ec=K(sd),tb):Ec};tb.weight=function(sd){return arguments.length?(cd=K(sd),tb):cd};tb.size=function(sd){if(!arguments.length)return[od,Dd];var Vd=+sd[0],re=+sd[1];0<=Vd&&0<=re||u.error("invalid size");return od=Vd,Dd=re,tb};tb.cellSize=function(sd){if(!arguments.length)return 1<<xd;1<=(sd=+sd)||u.error("invalid cell size");xd=Math.floor(Math.log(sd)/
Math.LN2);return tb};tb.bandwidth=function(sd){if(!arguments.length)return bd;sd=u.array(sd);1===sd.length&&(sd=[+sd[0],+sd[0]]);2!==sd.length&&u.error("invalid bandwidth");return bd=sd,tb};return tb}function O(tb,tc,Ec,cd,bd){const od=(bd<<1)+1;for(let Dd=0;Dd<tc;++Dd)for(let xd=0,sd=0;xd<tb+bd;++xd)xd<tb&&(sd+=Ec[xd+Dd*tb]),xd>=bd&&(xd>=od&&(sd-=Ec[xd-od+Dd*tb]),cd[xd-bd+Dd*tb]=sd/Math.min(xd+1,tb-1+od-xd,od))}function fa(tb,tc,Ec,cd,bd){const od=(bd<<1)+1;for(let Dd=0;Dd<tb;++Dd)for(let xd=0,sd=
0;xd<tc+bd;++xd)xd<tc&&(sd+=Ec[Dd+xd*tb]),xd>=bd&&(xd>=od&&(sd-=Ec[Dd+(xd-od)*tb]),cd[Dd+(xd-bd)*tb]=sd/Math.min(xd+1,tc-1+od-xd,od))}function wa(tb){w.Transform.call(this,null,tb)}function ta(tb,tc){Ab.forEach(Ec=>null!=tc[Ec]?tb[Ec](tc[Ec]):0);return tb}function aa(tb,tc){var Ec=[],cd=re=>re(xd),bd;if(null==tc)Ec.push(tb);else{var od={};var Dd=0;for(bd=tb.length;Dd<bd;++Dd){var xd=tb[Dd];var sd=tc.map(cd);var Vd=od[sd];Vd||(od[sd]=Vd=[],Vd.dims=sd,Ec.push(Vd));Vd.push(xd)}}return Ec}function ha(tb){w.Transform.call(this,
null,tb)}function ka(tb){w.Transform.call(this,null,tb)}function H(tb){w.Transform.call(this,null,tb)}function oa(tb,tc){const Ec=tb.pointRadius();tb.context(null);null!=tc&&tb.pointRadius(tc);return Ec}function ea(tb){w.Transform.call(this,null,tb)}function D(tb){w.Transform.call(this,null,tb)}function R(tb,tc,Ec){const cd=null==Ec?bd=>tb(tc(bd)):bd=>{var od=tb.pointRadius();bd=tb.pointRadius(Ec)(tc(bd));tb.pointRadius(od);return bd};cd.context=bd=>{tb.context(bd);return cd};return cd}function la(tb,
tc,Ec){var cd=X(tb,tc-1E-6,Ec).concat(tc);return function(bd){return cd.map(function(od){return[bd,od]})}}function Ia(tb,tc,Ec){var cd=X(tb,tc-1E-6,Ec).concat(tc);return function(bd){return cd.map(function(od){return[od,bd]})}}function Ma(){function tb(){return{type:"MultiLineString",coordinates:tc()}}function tc(){return X(yd(od/Fe)*Fe,bd,Fe).map(rf).concat(X(yd(Vd/Bf)*Bf,sd,Bf).map(Ff)).concat(X(yd(cd/re)*re,Ec,re).filter(function(gf){return 1E-6<md(gf%Fe)}).map(Ye)).concat(X(yd(xd/Wd)*Wd,Dd,Wd).filter(function(gf){return 1E-6<
md(gf%Bf)}).map(bg))}var Ec,cd,bd,od,Dd,xd,sd,Vd,re=10,Wd=re,Fe=90,Bf=360,Ye,bg,rf,Ff,pg=2.5;tb.lines=function(){return tc().map(function(gf){return{type:"LineString",coordinates:gf}})};tb.outline=function(){return{type:"Polygon",coordinates:[rf(od).concat(Ff(sd).slice(1),rf(bd).reverse().slice(1),Ff(Vd).reverse().slice(1))]}};tb.extent=function(gf){return arguments.length?tb.extentMajor(gf).extentMinor(gf):tb.extentMinor()};tb.extentMajor=function(gf){if(!arguments.length)return[[od,Vd],[bd,sd]];
od=+gf[0][0];bd=+gf[1][0];Vd=+gf[0][1];sd=+gf[1][1];od>bd&&(gf=od,od=bd,bd=gf);Vd>sd&&(gf=Vd,Vd=sd,sd=gf);return tb.precision(pg)};tb.extentMinor=function(gf){if(!arguments.length)return[[cd,xd],[Ec,Dd]];cd=+gf[0][0];Ec=+gf[1][0];xd=+gf[0][1];Dd=+gf[1][1];cd>Ec&&(gf=cd,cd=Ec,Ec=gf);xd>Dd&&(gf=xd,xd=Dd,Dd=gf);return tb.precision(pg)};tb.step=function(gf){return arguments.length?tb.stepMajor(gf).stepMinor(gf):tb.stepMinor()};tb.stepMajor=function(gf){if(!arguments.length)return[Fe,Bf];Fe=+gf[0];Bf=
+gf[1];return tb};tb.stepMinor=function(gf){if(!arguments.length)return[re,Wd];re=+gf[0];Wd=+gf[1];return tb};tb.precision=function(gf){if(!arguments.length)return pg;pg=+gf;Ye=la(xd,Dd,90);bg=Ia(cd,Ec,pg);rf=la(Vd,sd,90);Ff=Ia(od,bd,pg);return tb};return tb.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function Ta(tb){w.Transform.call(this,[],tb);this.generator=Ma()}function ab(tb,tc,Ec){tb.prototype=tc.prototype=Ec;Ec.constructor=tb}function db(tb,
tc){tb=Object.create(tb.prototype);for(var Ec in tc)tb[Ec]=tc[Ec];return tb}function ub(){}function pb(){return this.rgb().formatHex()}function Ya(){return this.rgb().formatRgb()}function Va(tb){var tc,Ec;tb=(tb+"").trim().toLowerCase();return(tc=Ed.exec(tb))?(Ec=tc[1].length,tc=parseInt(tc[1],16),6===Ec?Pa(tc):3===Ec?new Aa(tc>>8&15|tc>>4&240,tc>>4&15|tc&240,(tc&15)<<4|tc&15,1):8===Ec?Ha(tc>>24&255,tc>>16&255,tc>>8&255,(tc&255)/255):4===Ec?Ha(tc>>12&15|tc>>8&240,tc>>8&15|tc>>4&240,tc>>4&15|tc&240,
((tc&15)<<4|tc&15)/255):null):(tc=Qd.exec(tb))?new Aa(tc[1],tc[2],tc[3],1):(tc=fd.exec(tb))?new Aa(255*tc[1]/100,255*tc[2]/100,255*tc[3]/100,1):(tc=ed.exec(tb))?Ha(tc[1],tc[2],tc[3],tc[4]):(tc=bc.exec(tb))?Ha(255*tc[1]/100,255*tc[2]/100,255*tc[3]/100,tc[4]):(tc=yc.exec(tb))?Bb(tc[1],tc[2]/100,tc[3]/100,1):(tc=$c.exec(tb))?Bb(tc[1],tc[2]/100,tc[3]/100,tc[4]):cc.hasOwnProperty(tb)?Pa(cc[tb]):"transparent"===tb?new Aa(NaN,NaN,NaN,0):null}function Pa(tb){return new Aa(tb>>16&255,tb>>8&255,tb&255,1)}function Ha(tb,
tc,Ec,cd){0>=cd&&(tb=tc=Ec=NaN);return new Aa(tb,tc,Ec,cd)}function Ca(tb,tc,Ec,cd){if(1===arguments.length){var bd=tb;bd instanceof ub||(bd=Va(bd));bd?(bd=bd.rgb(),bd=new Aa(bd.r,bd.g,bd.b,bd.opacity)):bd=new Aa}else bd=new Aa(tb,tc,Ec,null==cd?1:cd);return bd}function Aa(tb,tc,Ec,cd){this.r=+tb;this.g=+tc;this.b=+Ec;this.opacity=+cd}function Ga(){return`#${La(this.r)}${La(this.g)}${La(this.b)}`}function Ka(){const tb=cb(this.opacity);return`${1===tb?"rgb(":"rgba("}${fb(this.r)}, ${fb(this.g)}, ${fb(this.b)}${1===
tb?")":`, ${tb})`}`}function cb(tb){return isNaN(tb)?1:Math.max(0,Math.min(1,tb))}function fb(tb){return Math.max(0,Math.min(255,Math.round(tb)||0))}function La(tb){tb=fb(tb);return(16>tb?"0":"")+tb.toString(16)}function Bb(tb,tc,Ec,cd){0>=cd?tb=tc=Ec=NaN:0>=Ec||1<=Ec?tb=tc=NaN:0>=tc&&(tb=NaN);return new ec(tb,tc,Ec,cd)}function Ob(tb){if(tb instanceof ec)return new ec(tb.h,tb.s,tb.l,tb.opacity);tb instanceof ub||(tb=Va(tb));if(!tb)return new ec;if(tb instanceof ec)return tb;tb=tb.rgb();var tc=tb.r/
255,Ec=tb.g/255,cd=tb.b/255,bd=Math.min(tc,Ec,cd),od=Math.max(tc,Ec,cd),Dd=NaN,xd=od-bd,sd=(od+bd)/2;xd?(Dd=tc===od?(Ec-cd)/xd+6*(Ec<cd):Ec===od?(cd-tc)/xd+2:(tc-Ec)/xd+4,xd/=.5>sd?od+bd:2-od-bd,Dd*=60):xd=0<sd&&1>sd?0:Dd;return new ec(Dd,xd,sd,tb.opacity)}function ec(tb,tc,Ec,cd){this.h=+tb;this.s=+tc;this.l=+Ec;this.opacity=+cd}function sc(tb){tb=(tb||0)%360;return 0>tb?tb+360:tb}function Ic(tb){return Math.max(0,Math.min(1,tb||0))}function Xb(tb,tc,Ec){return 255*(60>tb?tc+(Ec-tc)*tb/60:180>tb?
Ec:240>tb?tc+(Ec-tc)*(240-tb)/60:tc)}function Wb(tb){w.Transform.call(this,null,tb)}function Kc(tb,tc){let Ec;u.isFunction(tb)?(Ec=cd=>Ca(tb(cd,tc)),Ec.dep=mc(tb)):Ec=u.constant(Ca(tb||"#888"));return Ec}function Kb(tb,tc){let Ec;u.isFunction(tb)?(Ec=cd=>tb(cd,tc),Ec.dep=mc(tb)):tb?Ec=u.constant(tb):(Ec=cd=>cd.$value/cd.$max||0,Ec.dep=!0);return Ec}function mc(tb){if(!u.isFunction(tb))return!1;tb=u.toSet(u.accessorFields(tb));return tb.$x||tb.$y||tb.$value||tb.$max}function Ub(tb,tc,Ec,cd){const bd=
tb.width;var od=tb.height;const Dd=tb.x1||0,xd=tb.y1||0,sd=tb.x2||bd;od=tb.y2||od;const Vd=tb.values;tb=Vd?Ye=>Vd[Ye]:u.zero;const re=B.canvas(sd-Dd,od-xd),Wd=re.getContext("2d"),Fe=Wd.getImageData(0,0,sd-Dd,od-xd),Bf=Fe.data;for(let Ye=xd,bg=0;Ye<od;++Ye){tc.$y=Ye-xd;for(let rf=Dd,Ff=Ye*bd;rf<sd;++rf,bg+=4){tc.$x=rf-Dd;tc.$value=tb(rf+Ff);const pg=Ec(tc);Bf[bg+0]=pg.r;Bf[bg+1]=pg.g;Bf[bg+2]=pg.b;Bf[bg+3]=~~(255*cd(tc))}}Wd.putImageData(Fe,0,0);return re}function oc(tb){w.Transform.call(this,null,
tb);this.modified(!0)}function Cc(tb,tc){const Ec=Pb(tc.fit);tc.extent?tb.fitExtent(tc.extent,Ec):tc.size?tb.fitSize(tc.size,Ec):0}function Mc(tb){const tc=I.projection((tb||"mercator").toLowerCase());tc||u.error("Unrecognized projection type: "+tb);return tc()}function Pb(tb){tb=u.array(tb);return 1===tb.length?tb[0]:{type:"FeatureCollection",features:tb.reduce((tc,Ec)=>tc.concat(nc(Ec)),[])}}function nc(tb){return"FeatureCollection"===tb.type?tb.features:u.array(tb).filter(tc=>null!=tc).map(tc=>
"Feature"===tc.type?tc:{type:"Feature",geometry:tc})}const rc=Math.sqrt(50),Hb=Math.sqrt(10),Jc=Math.sqrt(2),kc=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];Y.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},
{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean","default":!1},{name:"resolve",type:"enum",values:["shared","independent"],"default":"independent"},{name:"zero",type:"boolean","default":!0},{name:"smooth",type:"boolean","default":!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string","null":!0,"default":"contour"}]};u.inherits(Y,w.Transform,{transform(tb,tc){if(this.value&&!tc.changed()&&
!tb.modified())return tc.StopPropagation;var Ec=tc.fork(tc.NO_SOURCE|tc.NO_FIELDS);tc=tc.materialize(tc.SOURCE).source;var cd=tb.field||u.identity,bd=z().smooth(!1!==tb.smooth),od=tb.thresholds||Q(tc,cd,tb),Dd=null===tb.as?null:tb.as||"contour",xd=[];tc.forEach(sd=>{const Vd=cd(sd),re=bd.size([Vd.width,Vd.height])(Vd.values,u.isArray(od)?od:od(Vd.values));ja(re,Vd,sd,tb);re.forEach(Wd=>{xd.push(w.rederive(sd,w.ingest(null!=Dd?{[Dd]:Wd}:Wd)))})});this.value&&(Ec.rem=this.value);this.value=Ec.source=
Ec.add=xd;return Ec}});wa.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean","default":!1},{name:"as",type:"string","default":"grid"}]};const Ab="x y weight size cellSize bandwidth".split(" ");
u.inherits(wa,w.Transform,{transform(tb,tc){if(this.value&&!tc.changed()&&!tb.modified())return tc.StopPropagation;var Ec=tc.fork(tc.NO_SOURCE|tc.NO_FIELDS);tc=tc.materialize(tc.SOURCE).source;tc=aa(tc,tb.groupby);var cd=(tb.groupby||[]).map(u.accessorName),bd=ta(ba(),tb),od=tb.as||"grid",Dd=[];Dd=tc.map(xd=>{var sd=w.ingest,Vd={[od]:bd(xd,tb.counts)};xd=xd.dims;for(let re=0;re<cd.length;++re)Vd[cd[re]]=xd[re];return sd.call(w,Vd)});this.value&&(Ec.rem=this.value);this.value=Ec.source=Ec.add=Dd;return Ec}});
ha.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean","default":!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean","default":!0}]};u.inherits(ha,w.Transform,{transform(tb,
tc){if(this.value&&!tc.changed()&&!tb.modified())return tc.StopPropagation;var Ec=tc.fork(tc.NO_SOURCE|tc.NO_FIELDS),cd=z().smooth(!1!==tb.smooth),bd=tb.values,od=tb.thresholds||G(tb.count||10,tb.nice,!!bd),Dd=tb.size;if(!bd){bd=tc.materialize(tc.SOURCE).source;tb=ta(ba(),tb)(bd,!0);var xd=pa(tb,tb.scale||1,tb.scale||1,0,0);Dd=[tb.width,tb.height];bd=tb.values}od=u.isArray(od)?od:od(bd);bd=cd.size(Dd)(bd,od);xd&&bd.forEach(xd);this.value&&(Ec.rem=this.value);this.value=Ec.source=Ec.add=(bd||[]).map(w.ingest);
return Ec}});ka.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};u.inherits(ka,w.Transform,{transform(tb,tc){var Ec=this._features,cd=this._points,bd=tb.fields,od=bd&&bd[0],Dd=bd&&bd[1],xd=tb.geojson||!bd&&u.identity;bd=tc.ADD;tb=tb.modified()||tc.changed(tc.REM)||tc.modified(u.accessorFields(xd))||od&&tc.modified(u.accessorFields(od))||Dd&&tc.modified(u.accessorFields(Dd));if(!this.value||tb)bd=tc.SOURCE,this._features=
Ec=[],this._points=cd=[];xd&&tc.visit(bd,sd=>Ec.push(xd(sd)));od&&Dd&&(tc.visit(bd,sd=>{var Vd=od(sd);sd=Dd(sd);null!=Vd&&null!=sd&&(Vd=+Vd)===Vd&&(sd=+sd)===sd&&cd.push([Vd,sd])}),Ec=Ec.concat({type:"Feature",geometry:{type:"MultiPoint",coordinates:cd}}));this.value={type:"FeatureCollection",features:Ec}}});H.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",
"default":"path"}]};u.inherits(H,w.Transform,{transform(tb,tc){var Ec=tc.fork(tc.ALL),cd=this.value,bd=tb.field||u.identity,od=tb.as||"path",Dd=Ec.SOURCE;!cd||tb.modified()?(this.value=cd=I.getProjectionPath(tb.projection),Ec.materialize().reflow()):Dd=bd===u.identity||tc.modified(bd.fields)?Ec.ADD_MOD:Ec.ADD;tb=oa(cd,tb.pointRadius);Ec.visit(Dd,xd=>xd[od]=cd(bd(xd)));cd.pointRadius(tb);return Ec.modifies(od)}});ea.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",
required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,"default":["x","y"]}]};u.inherits(ea,w.Transform,{transform(tb,tc){function Ec(Vd){const re=cd([bd(Vd),od(Vd)]);re?(Vd[xd]=re[0],Vd[sd]=re[1]):(Vd[xd]=void 0,Vd[sd]=void 0)}var cd=tb.projection,bd=tb.fields[0],od=tb.fields[1],Dd=tb.as||["x","y"],xd=Dd[0],sd=Dd[1];tb.modified()?tc=tc.materialize().reflow(!0).visit(tc.SOURCE,Ec):(tb=tc.modified(bd.fields)||tc.modified(od.fields),tc.visit(tb?
tc.ADD_MOD:tc.ADD,Ec));return tc.modifies(Dd)}});D.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field","default":"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string","default":"shape"}]};u.inherits(D,w.Transform,{transform(tb,tc){tc=tc.fork(tc.ALL);var Ec=this.value,cd=tb.as||"shape",bd=tc.ADD;if(!Ec||tb.modified())this.value=Ec=R(I.getProjectionPath(tb.projection),tb.field||u.field("datum"),tb.pointRadius),
tc.materialize().reflow(),bd=tc.SOURCE;tc.visit(bd,od=>od[cd]=Ec);return tc.modifies(cd)}});var md=Math.abs,yd=Math.ceil;Ta.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,
length:2},{name:"stepMajor",type:"number",array:!0,length:2,"default":[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,"default":[10,10]},{name:"precision",type:"number","default":2.5}]};u.inherits(Ta,w.Transform,{transform(tb,tc){var Ec=this.value,cd=this.generator;if(!Ec.length||tb.modified())for(const bd in tb)if(u.isFunction(cd[bd]))cd[bd](tb[bd]);tb=cd();Ec.length?tc.mod.push(w.replace(Ec[0],tb)):tc.add.push(w.ingest(tb));Ec[0]=tb;return tc}});var hd=1/.7,Ed=/^#([0-9a-f]{3,8})$/,Qd=
RegExp("^rgb\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*\\)$"),fd=RegExp("^rgb\\(\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*\\)$"),ed=RegExp("^rgba\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$"),bc=RegExp("^rgba\\(\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$"),
yc=RegExp("^hsl\\(\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*\\)$"),$c=RegExp("^hsla\\(\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$"),cc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,
bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,
darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,
lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,
mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,
plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,
yellow:16776960,yellowgreen:10145074};ab(ub,Va,{copy(tb){return Object.assign(new this.constructor,this,tb)},displayable(){return this.rgb().displayable()},hex:pb,formatHex:pb,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Ob(this).formatHsl()},formatRgb:Ya,toString:Ya});ab(Aa,Ca,db(ub,{brighter(tb){tb=null==tb?hd:Math.pow(hd,tb);return new Aa(this.r*tb,this.g*tb,this.b*tb,this.opacity)},darker(tb){tb=null==tb?.7:Math.pow(.7,tb);return new Aa(this.r*tb,this.g*tb,
this.b*tb,this.opacity)},rgb(){return this},clamp(){return new Aa(fb(this.r),fb(this.g),fb(this.b),cb(this.opacity))},displayable(){return-.5<=this.r&&255.5>this.r&&-.5<=this.g&&255.5>this.g&&-.5<=this.b&&255.5>this.b&&0<=this.opacity&&1>=this.opacity},hex:Ga,formatHex:Ga,formatHex8:function(){return`#${La(this.r)}${La(this.g)}${La(this.b)}${La(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Ka,toString:Ka}));ab(ec,function(tb,tc,Ec,cd){return 1===arguments.length?Ob(tb):new ec(tb,tc,Ec,null==
cd?1:cd)},db(ub,{brighter(tb){tb=null==tb?hd:Math.pow(hd,tb);return new ec(this.h,this.s,this.l*tb,this.opacity)},darker(tb){tb=null==tb?.7:Math.pow(.7,tb);return new ec(this.h,this.s,this.l*tb,this.opacity)},rgb(){var tb=this.h%360+360*(0>this.h),tc=isNaN(tb)||isNaN(this.s)?0:this.s,Ec=this.l;tc=Ec+(.5>Ec?Ec:1-Ec)*tc;Ec=2*Ec-tc;return new Aa(Xb(240<=tb?tb-240:tb+120,Ec,tc),Xb(tb,Ec,tc),Xb(120>tb?tb+240:tb-120,Ec,tc),this.opacity)},clamp(){return new ec(sc(this.h),Ic(this.s),Ic(this.l),cb(this.opacity))},
displayable(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity},formatHsl(){const tb=cb(this.opacity);return`${1===tb?"hsl(":"hsla("}${sc(this.h)}, ${100*Ic(this.s)}%, ${100*Ic(this.l)}%${1===tb?")":`, ${tb})`}`}}));Wb.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],"default":"independent"},
{name:"as",type:"string","default":"image"}]};u.inherits(Wb,w.Transform,{transform(tb,tc){if(!tc.changed()&&!tb.modified())return tc.StopPropagation;var Ec=tc.materialize(tc.SOURCE).source,cd="shared"===tb.resolve,bd=tb.field||u.identity,od=Kb(tb.opacity,tb),Dd=Kc(tb.color,tb),xd=tb.as||"image",sd={$x:0,$y:0,$value:0,$max:cd?U(Ec.map(Vd=>U(bd(Vd).values))):0};Ec.forEach(Vd=>{const re=bd(Vd),Wd=u.extend({},Vd,sd);cd||(Wd.$max=U(re.values||[]));Vd[xd]=Ub(re,Wd,Dd.dep?Dd:u.constant(Dd(Wd)),od.dep?od:
u.constant(od(Wd)))});return tc.reflow(!0).modifies(xd)}});u.inherits(oc,w.Transform,{transform(tb,tc){let Ec=this.value;!Ec||tb.modified("type")?(this.value=Ec=Mc(tb.type),I.projectionProperties.forEach(cd=>{if(null!=tb[cd]){var bd=Ec,od=tb[cd];if(u.isFunction(bd[cd]))bd[cd](od)}})):I.projectionProperties.forEach(cd=>{if(tb.modified(cd)){var bd=Ec,od=tb[cd];if(u.isFunction(bd[cd]))bd[cd](od)}});null!=tb.pointRadius&&Ec.path.pointRadius(tb.pointRadius);tb.fit&&Cc(Ec,tb);return tc.fork(tc.NO_SOURCE|
tc.NO_FIELDS)}});A.contour=ha;A.geojson=ka;A.geopath=H;A.geopoint=ea;A.geoshape=D;A.graticule=Ta;A.heatmap=Wb;A.isocontour=Y;A.kde2d=wa;A.projection=oc})};
shadow$provide[436]=function(ob,Ba,Gb,Ea){(function(A,w){"object"===typeof Ea&&"undefined"!==typeof Gb?w(Ea,Ba(426),Ba(421)):"function"===typeof define&&define.amd?define(["exports","vega-dataflow","vega-util"],w):(A="undefined"!==typeof globalThis?globalThis:A||self,w((A.vega=A.vega||{},A.vega.transforms={}),A.vega,A.vega))})(this,function(A,w,u){function x(La,Bb,Ob,ec){if(isNaN(Bb)||isNaN(Ob))return La;var sc,Ic=La._root;ec={data:ec};var Xb=La._x0,Wb=La._y0,Kc=La._x1,Kb=La._y1,mc,Ub,oc,Cc,Mc;if(!Ic)return La._root=
ec,La;for(;Ic.length;)if((oc=Bb>=(mc=(Xb+Kc)/2))?Xb=mc:Kc=mc,(Cc=Ob>=(Ub=(Wb+Kb)/2))?Wb=Ub:Kb=Ub,sc=Ic,!(Ic=Ic[Mc=Cc<<1|oc]))return sc[Mc]=ec,La;var Pb=+La._x.call(null,Ic.data);var nc=+La._y.call(null,Ic.data);if(Bb===Pb&&Ob===nc)return ec.next=Ic,sc?sc[Mc]=ec:La._root=ec,La;do sc=sc?sc[Mc]=Array(4):La._root=Array(4),(oc=Bb>=(mc=(Xb+Kc)/2))?Xb=mc:Kc=mc,(Cc=Ob>=(Ub=(Wb+Kb)/2))?Wb=Ub:Kb=Ub;while((Mc=Cc<<1|oc)===(oc=(nc>=Ub)<<1|Pb>=mc));return sc[oc]=Ic,sc[Mc]=ec,La}function I(La,Bb,Ob,ec,sc){this.node=
La;this.x0=Bb;this.y0=Ob;this.x1=ec;this.y1=sc}function B(La){return La[0]}function N(La){return La[1]}function da(La,Bb,Ob){Bb=new U(null==Bb?B:Bb,null==Ob?N:Ob,NaN,NaN,NaN,NaN);return null==La?Bb:Bb.addAll(La)}function U(La,Bb,Ob,ec,sc,Ic){this._x=La;this._y=Bb;this._x0=Ob;this._y0=ec;this._x1=sc;this._y1=Ic;this._root=void 0}function X(La){for(var Bb={data:La.data},Ob=Bb;La=La.next;)Ob=Ob.next={data:La.data};return Bb}function V(La){return function(){return La}}function P(La){return La.x+La.vx}
function z(La){return La.y+La.vy}function G(La){return La.index}function Y(La,Bb){La=La.get(Bb);if(!La)throw Error("node not found: "+Bb);return La}function Q(){for(var La=0,Bb=arguments.length,Ob={},ec;La<Bb;++La){if(!(ec=arguments[La]+"")||ec in Ob||/[\s.]/.test(ec))throw Error("illegal type: "+ec);Ob[ec]=[]}return new ja(Ob)}function ja(La){this._=La}function pa(La,Bb){return La.trim().split(/^|\s+/).map(function(Ob){var ec="",sc=Ob.indexOf(".");0<=sc&&(ec=Ob.slice(sc+1),Ob=Ob.slice(0,sc));if(Ob&&
!Bb.hasOwnProperty(Ob))throw Error("unknown type: "+Ob);return{type:Ob,name:ec}})}function J(La,Bb,Ob){for(var ec=0,sc=La.length;ec<sc;++ec)if(La[ec].name===Bb){La[ec]=Ma;La=La.slice(0,ec).concat(La.slice(ec+1));break}null!=Ob&&La.push({name:Bb,value:Ob});return La}function K(){Va=0}function ba(){this._call=this._time=this._next=null}function O(La,Bb,Ob){var ec=new ba;ec.restart(La,Bb,Ob);return ec}function fa(){Va=(Ya=Ha.now())+Pa;Ta=ab=0;try{Va||(Ca(K),Va=Ha.now()+Pa);++Ta;for(var La=ub,Bb;La;)0<=
(Bb=Va-La._time)&&La._call.call(void 0,Bb),La=La._next;--Ta}finally{Ta=0;La=ub;for(var Ob=Infinity;La;)if(La._call){Ob>La._time&&(Ob=La._time);var ec=La;La=La._next}else Bb=La._next,La._next=null,La=ec?ec._next=Bb:ub=Bb;pb=ec;ta(Ob);Va=0}}function wa(){var La=Ha.now(),Bb=La-Ya;1E3<Bb&&(Pa-=Bb,Ya=La)}function ta(La){Ta||(ab&&(ab=clearTimeout(ab)),24<La-Va?(Infinity>La&&(ab=setTimeout(fa,La-Ha.now()-Pa)),db&&(db=clearInterval(db))):(db||(Ya=Ha.now(),db=setInterval(wa,1E3)),Ta=1,Ca(fa)))}function aa(){let La=
1;return()=>(La=(1664525*La+1013904223)%4294967296)/4294967296}function ha(La){return La.x}function ka(La){return La.y}function H(La){function Bb(){Ob();Cc.call("tick",Ic);Xb<Wb&&(oc.stop(),Cc.call("end",Ic))}function Ob(Pb){var nc,rc=La.length;void 0===Pb&&(Pb=1);for(var Hb=0;Hb<Pb;++Hb)for(Xb+=(Kb-Xb)*Kc,Ub.forEach(function(kc){kc(Xb)}),nc=0;nc<rc;++nc){var Jc=La[nc];null==Jc.fx?Jc.x+=Jc.vx*=mc:(Jc.x=Jc.fx,Jc.vx=0);null==Jc.fy?Jc.y+=Jc.vy*=mc:(Jc.y=Jc.fy,Jc.vy=0)}return Ic}function ec(){for(var Pb=
0,nc=La.length,rc;Pb<nc;++Pb){rc=La[Pb];rc.index=Pb;null!=rc.fx&&(rc.x=rc.fx);null!=rc.fy&&(rc.y=rc.fy);if(isNaN(rc.x)||isNaN(rc.y)){var Hb=10*Math.sqrt(.5+Pb),Jc=Pb*Aa;rc.x=Hb*Math.cos(Jc);rc.y=Hb*Math.sin(Jc)}if(isNaN(rc.vx)||isNaN(rc.vy))rc.vx=rc.vy=0}}function sc(Pb){Pb.initialize&&Pb.initialize(La,Mc);return Pb}var Ic,Xb=1,Wb=.001,Kc=1-Math.pow(Wb,1/300),Kb=0,mc=.6,Ub=new Map,oc=O(Bb),Cc=Q("tick","end"),Mc=aa();null==La&&(La=[]);ec();return Ic={tick:Ob,restart:function(){return oc.restart(Bb),
Ic},stop:function(){return oc.stop(),Ic},nodes:function(Pb){return arguments.length?(La=Pb,ec(),Ub.forEach(sc),Ic):La},alpha:function(Pb){return arguments.length?(Xb=+Pb,Ic):Xb},alphaMin:function(Pb){return arguments.length?(Wb=+Pb,Ic):Wb},alphaDecay:function(Pb){return arguments.length?(Kc=+Pb,Ic):+Kc},alphaTarget:function(Pb){return arguments.length?(Kb=+Pb,Ic):Kb},velocityDecay:function(Pb){return arguments.length?(mc=1-Pb,Ic):1-mc},randomSource:function(Pb){return arguments.length?(Mc=Pb,Ub.forEach(sc),
Ic):Mc},force:function(Pb,nc){return 1<arguments.length?(null==nc?Ub.delete(Pb):Ub.set(Pb,sc(nc)),Ic):Ub.get(Pb)},find:function(Pb,nc,rc){var Hb,Jc=La.length;rc=null==rc?Infinity:rc*rc;for(Hb=0;Hb<Jc;++Hb){var kc=La[Hb];var Ab=Pb-kc.x;var md=nc-kc.y;Ab=Ab*Ab+md*md;if(Ab<rc){var yd=kc;rc=Ab}}return yd},on:function(Pb,nc){return 1<arguments.length?(Cc.on(Pb,nc),Ic):Cc.on(Pb)}}}function oa(La){w.Transform.call(this,null,La)}function ea(La,Bb){return()=>La.touch(Bb).run()}function D(La,Bb){La=H(La);const Ob=
La.stop,ec=La.restart;let sc=!1;La.stopped=()=>sc;La.restart=()=>(sc=!1,ec());La.stop=()=>(sc=!0,Ob());return R(La,Bb,!0).on("end",()=>sc=!0)}function R(La,Bb,Ob,ec){var sc=u.array(Bb.forces),Ic;var Xb=0;for(Ic=Ka.length;Xb<Ic;++Xb){var Wb=Ka[Xb];if("forces"!==Wb&&Bb.modified(Wb))La[Wb](Bb[Wb])}Xb=0;for(Ic=sc.length;Xb<Ic;++Xb){var Kc="forces"+Xb;if(Ob||Bb.modified("forces",Xb)){Wb=void 0;var Kb=sc[Xb];u.hasOwnProperty(Ga,Kb.force)||u.error("Unrecognized force: "+Kb.force);var mc=Ga[Kb.force]();for(Wb in Kb)u.isFunction(mc[Wb])&&
la(mc[Wb],Kb[Wb],Kb);Wb=mc}else{if(Wb=ec)a:{mc=Wb=void 0;Kb=sc[Xb];var Ub=ec;for(mc in Kb)if(u.isFunction(Wb=Kb[mc])&&Ub.modified(u.accessorFields(Wb))){Wb=1;break a}Wb=0}Wb=Wb?La.force(Kc):null}Wb&&La.force(Kc,Wb)}for(Ic=La.numForces||0;Xb<Ic;++Xb)La.force("forces"+Xb,null);La.numForces=sc.length;return La}function la(La,Bb,Ob){La(u.isFunction(Bb)?ec=>Bb(ec,Ob):Bb)}var Ia=da.prototype=U.prototype;Ia.copy=function(){var La=new U(this._x,this._y,this._x0,this._y0,this._x1,this._y1),Bb=this._root,Ob,
ec;if(!Bb)return La;if(!Bb.length)return La._root=X(Bb),La;for(Ob=[{source:Bb,target:La._root=Array(4)}];Bb=Ob.pop();)for(var sc=0;4>sc;++sc)if(ec=Bb.source[sc])ec.length?Ob.push({source:ec,target:Bb.target[sc]=Array(4)}):Bb.target[sc]=X(ec);return La};Ia.add=function(La){const Bb=+this._x.call(null,La),Ob=+this._y.call(null,La);return x(this.cover(Bb,Ob),Bb,Ob,La)};Ia.addAll=function(La){var Bb,Ob,ec=La.length,sc,Ic,Xb=Array(ec),Wb=Array(ec),Kc=Infinity,Kb=Infinity,mc=-Infinity,Ub=-Infinity;for(Ob=
0;Ob<ec;++Ob)isNaN(sc=+this._x.call(null,Bb=La[Ob]))||isNaN(Ic=+this._y.call(null,Bb))||(Xb[Ob]=sc,Wb[Ob]=Ic,sc<Kc&&(Kc=sc),sc>mc&&(mc=sc),Ic<Kb&&(Kb=Ic),Ic>Ub&&(Ub=Ic));if(Kc>mc||Kb>Ub)return this;this.cover(Kc,Kb).cover(mc,Ub);for(Ob=0;Ob<ec;++Ob)x(this,Xb[Ob],Wb[Ob],La[Ob]);return this};Ia.cover=function(La,Bb){if(isNaN(La=+La)||isNaN(Bb=+Bb))return this;var Ob=this._x0,ec=this._y0,sc=this._x1,Ic=this._y1;if(isNaN(Ob))sc=(Ob=Math.floor(La))+1,Ic=(ec=Math.floor(Bb))+1;else{for(var Xb=sc-Ob||1,Wb=
this._root,Kc,Kb;Ob>La||La>=sc||ec>Bb||Bb>=Ic;)switch(Kb=(Bb<ec)<<1|La<Ob,Kc=Array(4),Kc[Kb]=Wb,Wb=Kc,Xb*=2,Kb){case 0:sc=Ob+Xb;Ic=ec+Xb;break;case 1:Ob=sc-Xb;Ic=ec+Xb;break;case 2:sc=Ob+Xb;ec=Ic-Xb;break;case 3:Ob=sc-Xb,ec=Ic-Xb}this._root&&this._root.length&&(this._root=Wb)}this._x0=Ob;this._y0=ec;this._x1=sc;this._y1=Ic;return this};Ia.data=function(){var La=[];this.visit(function(Bb){if(!Bb.length){do La.push(Bb.data);while(Bb=Bb.next)}});return La};Ia.extent=function(La){return arguments.length?
this.cover(+La[0][0],+La[0][1]).cover(+La[1][0],+La[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]};Ia.find=function(La,Bb,Ob){var ec=this._x0,sc=this._y0,Ic,Xb,Wb,Kc,Kb=this._x1,mc=this._y1,Ub=[],oc=this._root,Cc;oc&&Ub.push(new I(oc,ec,sc,Kb,mc));null==Ob?Ob=Infinity:(ec=La-Ob,sc=Bb-Ob,Kb=La+Ob,mc=Bb+Ob,Ob*=Ob);for(;Cc=Ub.pop();)if(!(!(oc=Cc.node)||(Ic=Cc.x0)>Kb||(Xb=Cc.y0)>mc||(Wb=Cc.x1)<ec||(Kc=Cc.y1)<sc))if(oc.length){Cc=(Ic+Wb)/2;var Mc=(Xb+Kc)/2;Ub.push(new I(oc[3],
Cc,Mc,Wb,Kc),new I(oc[2],Ic,Mc,Cc,Kc),new I(oc[1],Cc,Xb,Wb,Mc),new I(oc[0],Ic,Xb,Cc,Mc));if(oc=(Bb>=Mc)<<1|La>=Cc)Cc=Ub[Ub.length-1],Ub[Ub.length-1]=Ub[Ub.length-1-oc],Ub[Ub.length-1-oc]=Cc}else if(Cc=La-+this._x.call(null,oc.data),Mc=Bb-+this._y.call(null,oc.data),Cc=Cc*Cc+Mc*Mc,Cc<Ob){var Pb=Math.sqrt(Ob=Cc);ec=La-Pb;sc=Bb-Pb;Kb=La+Pb;mc=Bb+Pb;Pb=oc.data}return Pb};Ia.remove=function(La){if(isNaN(Kc=+this._x.call(null,La))||isNaN(Kb=+this._y.call(null,La)))return this;var Bb,Ob=this._root,ec,sc=
this._x0,Ic=this._y0,Xb=this._x1,Wb=this._y1,Kc,Kb,mc,Ub,oc,Cc,Mc;if(!Ob)return this;if(Ob.length)for(;;){(oc=Kc>=(mc=(sc+Xb)/2))?sc=mc:Xb=mc;(Cc=Kb>=(Ub=(Ic+Wb)/2))?Ic=Ub:Wb=Ub;if(!(Bb=Ob,Ob=Ob[Mc=Cc<<1|oc]))return this;if(!Ob.length)break;if(Bb[Mc+1&3]||Bb[Mc+2&3]||Bb[Mc+3&3]){var Pb=Bb;var nc=Mc}}for(;Ob.data!==La;)if(!(ec=Ob,Ob=Ob.next))return this;(La=Ob.next)&&delete Ob.next;if(ec)return La?ec.next=La:delete ec.next,this;if(!Bb)return this._root=La,this;La?Bb[Mc]=La:delete Bb[Mc];(Ob=Bb[0]||
Bb[1]||Bb[2]||Bb[3])&&Ob===(Bb[3]||Bb[2]||Bb[1]||Bb[0])&&!Ob.length&&(Pb?Pb[nc]=Ob:this._root=Ob);return this};Ia.removeAll=function(La){for(var Bb=0,Ob=La.length;Bb<Ob;++Bb)this.remove(La[Bb]);return this};Ia.root=function(){return this._root};Ia.size=function(){var La=0;this.visit(function(Bb){if(!Bb.length){do++La;while(Bb=Bb.next)}});return La};Ia.visit=function(La){var Bb=[],Ob,ec=this._root,sc,Ic,Xb,Wb,Kc;for(ec&&Bb.push(new I(ec,this._x0,this._y0,this._x1,this._y1));Ob=Bb.pop();)if(!La(ec=
Ob.node,Ic=Ob.x0,Xb=Ob.y0,Wb=Ob.x1,Kc=Ob.y1)&&ec.length){Ob=(Ic+Wb)/2;var Kb=(Xb+Kc)/2;(sc=ec[3])&&Bb.push(new I(sc,Ob,Kb,Wb,Kc));(sc=ec[2])&&Bb.push(new I(sc,Ic,Kb,Ob,Kc));(sc=ec[1])&&Bb.push(new I(sc,Ob,Xb,Wb,Kb));(sc=ec[0])&&Bb.push(new I(sc,Ic,Xb,Ob,Kb))}return this};Ia.visitAfter=function(La){var Bb=[],Ob=[],ec;for(this._root&&Bb.push(new I(this._root,this._x0,this._y0,this._x1,this._y1));ec=Bb.pop();){var sc=ec.node;if(sc.length){var Ic,Xb=ec.x0,Wb=ec.y0,Kc=ec.x1,Kb=ec.y1,mc=(Xb+Kc)/2,Ub=(Wb+
Kb)/2;(Ic=sc[0])&&Bb.push(new I(Ic,Xb,Wb,mc,Ub));(Ic=sc[1])&&Bb.push(new I(Ic,mc,Wb,Kc,Ub));(Ic=sc[2])&&Bb.push(new I(Ic,Xb,Ub,mc,Kb));(Ic=sc[3])&&Bb.push(new I(Ic,mc,Ub,Kc,Kb))}Ob.push(ec)}for(;ec=Ob.pop();)La(ec.node,ec.x0,ec.y0,ec.x1,ec.y1);return this};Ia.x=function(La){return arguments.length?(this._x=La,this):this._x};Ia.y=function(La){return arguments.length?(this._y=La,this):this._y};var Ma={value:()=>{}};ja.prototype=Q.prototype={constructor:ja,on:function(La,Bb){var Ob=this._,ec=pa(La+"",
Ob),sc,Ic=-1,Xb=ec.length;if(2>arguments.length)for(;++Ic<Xb;){var Wb;if(Wb=sc=(La=ec[Ic]).type){a:{Wb=Ob[sc];for(var Kc=0,Kb=Wb.length;Kc<Kb;++Kc)if((sc=Wb[Kc]).name===La.name){sc=sc.value;break a}sc=void 0}Wb=sc}if(Wb)return sc}else{if(null!=Bb&&"function"!==typeof Bb)throw Error("invalid callback: "+Bb);for(;++Ic<Xb;)if(sc=(La=ec[Ic]).type)Ob[sc]=J(Ob[sc],La.name,Bb);else if(null==Bb)for(sc in Ob)Ob[sc]=J(Ob[sc],La.name,null);return this}},copy:function(){var La={},Bb=this._,Ob;for(Ob in Bb)La[Ob]=
Bb[Ob].slice();return new ja(La)},call:function(La,Bb){if(0<(sc=arguments.length-2))for(var Ob=Array(sc),ec=0,sc,Ic;ec<sc;++ec)Ob[ec]=arguments[ec+2];if(!this._.hasOwnProperty(La))throw Error("unknown type: "+La);Ic=this._[La];ec=0;for(sc=Ic.length;ec<sc;++ec)Ic[ec].value.apply(Bb,Ob)},apply:function(La,Bb,Ob){if(!this._.hasOwnProperty(La))throw Error("unknown type: "+La);La=this._[La];for(var ec=0,sc=La.length;ec<sc;++ec)La[ec].value.apply(Bb,Ob)}};var Ta=0,ab=0,db=0,ub,pb,Ya=0,Va=0,Pa=0,Ha="object"===
typeof performance&&performance.now?performance:Date,Ca="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(La){setTimeout(La,17)};ba.prototype=O.prototype={constructor:ba,restart:function(La,Bb,Ob){if("function"!==typeof La)throw new TypeError("callback is not a function");Ob=(null==Ob?Va||(Ca(K),Va=Ha.now()+Pa):+Ob)+(null==Bb?0:+Bb);this._next||pb===this||(pb?pb._next=this:ub=this,pb=this);this._call=La;this._time=Ob;ta()},stop:function(){this._call&&
(this._call=null,this._time=Infinity,ta())}};var Aa=Math.PI*(3-Math.sqrt(5));const Ga={center:function(La,Bb){function Ob(){var Ic,Xb=ec.length,Wb=0,Kc=0;for(Ic=0;Ic<Xb;++Ic){var Kb=ec[Ic];Wb+=Kb.x;Kc+=Kb.y}Wb=(Wb/Xb-La)*sc;Kc=(Kc/Xb-Bb)*sc;for(Ic=0;Ic<Xb;++Ic)Kb=ec[Ic],Kb.x-=Wb,Kb.y-=Kc}var ec,sc=1;null==La&&(La=0);null==Bb&&(Bb=0);Ob.initialize=function(Ic){ec=Ic};Ob.x=function(Ic){return arguments.length?(La=+Ic,Ob):La};Ob.y=function(Ic){return arguments.length?(Bb=+Ic,Ob):Bb};Ob.strength=function(Ic){return arguments.length?
(sc=+Ic,Ob):sc};return Ob},collide:function(La){function Bb(){function Kb(Jc,kc,Ab,md,yd){var hd=Jc.data;Jc=Jc.r;var Ed=nc+Jc;if(hd)hd.index>Cc.index&&(kc=Mc-hd.x-hd.vx,Ab=Pb-hd.y-hd.vy,md=kc*kc+Ab*Ab,md<Ed*Ed&&(0===kc&&(kc=1E-6*(Xb()-.5),md+=kc*kc),0===Ab&&(Ab=1E-6*(Xb()-.5),md+=Ab*Ab),md=(Ed-(md=Math.sqrt(md)))/md*Wb,Cc.vx+=(kc*=md)*(Ed=(Jc*=Jc)/(rc+Jc)),Cc.vy+=(Ab*=md)*Ed,hd.vx-=kc*(Ed=1-Ed),hd.vy-=Ab*Ed));else return kc>Mc+Ed||md<Mc-Ed||Ab>Pb+Ed||yd<Pb-Ed}for(var mc,Ub=sc.length,oc,Cc,Mc,Pb,nc,
rc,Hb=0;Hb<Kc;++Hb)for(oc=da(sc,P,z).visitAfter(Ob),mc=0;mc<Ub;++mc)Cc=sc[mc],nc=Ic[Cc.index],rc=nc*nc,Mc=Cc.x+Cc.vx,Pb=Cc.y+Cc.vy,oc.visit(Kb)}function Ob(Kb){if(Kb.data)return Kb.r=Ic[Kb.data.index];for(var mc=Kb.r=0;4>mc;++mc)Kb[mc]&&Kb[mc].r>Kb.r&&(Kb.r=Kb[mc].r)}function ec(){if(sc){var Kb,mc=sc.length;Ic=Array(mc);for(Kb=0;Kb<mc;++Kb){var Ub=sc[Kb];Ic[Ub.index]=+La(Ub,Kb,sc)}}}var sc,Ic,Xb,Wb=1,Kc=1;"function"!==typeof La&&(La=V(null==La?1:+La));Bb.initialize=function(Kb,mc){sc=Kb;Xb=mc;ec()};
Bb.iterations=function(Kb){return arguments.length?(Kc=+Kb,Bb):Kc};Bb.strength=function(Kb){return arguments.length?(Wb=+Kb,Bb):Wb};Bb.radius=function(Kb){return arguments.length?(La="function"===typeof Kb?Kb:V(+Kb),ec(),Bb):La};return Bb},nbody:function(){function La(Cc){var Mc=sc.length,Pb=da(sc,ha,ka).visitAfter(Ob);Wb=Cc;for(Cc=0;Cc<Mc;++Cc)Ic=sc[Cc],Pb.visit(ec)}function Bb(){if(sc){var Cc,Mc=sc.length;Kb=Array(Mc);for(Cc=0;Cc<Mc;++Cc){var Pb=sc[Cc];Kb[Pb.index]=+Kc(Pb,Cc,sc)}}}function Ob(Cc){var Mc=
0,Pb,nc,rc=0,Hb,Jc,kc;if(Cc.length){for(Hb=Jc=kc=0;4>kc;++kc)(Pb=Cc[kc])&&(nc=Math.abs(Pb.value))&&(Mc+=Pb.value,rc+=nc,Hb+=nc*Pb.x,Jc+=nc*Pb.y);Cc.x=Hb/rc;Cc.y=Jc/rc}else{Pb=Cc;Pb.x=Pb.data.x;Pb.y=Pb.data.y;do Mc+=Kb[Pb.data.index];while(Pb=Pb.next)}Cc.value=Mc}function ec(Cc,Mc,Pb,nc){if(!Cc.value)return!0;Pb=Cc.x-Ic.x;var rc=Cc.y-Ic.y;Mc=nc-Mc;nc=Pb*Pb+rc*rc;if(Mc*Mc/oc<nc)return nc<Ub&&(0===Pb&&(Pb=1E-6*(Xb()-.5),nc+=Pb*Pb),0===rc&&(rc=1E-6*(Xb()-.5),nc+=rc*rc),nc<mc&&(nc=Math.sqrt(mc*nc)),Ic.vx+=
Pb*Cc.value*Wb/nc,Ic.vy+=rc*Cc.value*Wb/nc),!0;if(!(Cc.length||nc>=Ub)){if(Cc.data!==Ic||Cc.next)0===Pb&&(Pb=1E-6*(Xb()-.5),nc+=Pb*Pb),0===rc&&(rc=1E-6*(Xb()-.5),nc+=rc*rc),nc<mc&&(nc=Math.sqrt(mc*nc));do Cc.data!==Ic&&(Mc=Kb[Cc.data.index]*Wb/nc,Ic.vx+=Pb*Mc,Ic.vy+=rc*Mc);while(Cc=Cc.next)}}var sc,Ic,Xb,Wb,Kc=V(-30),Kb,mc=1,Ub=Infinity,oc=.81;La.initialize=function(Cc,Mc){sc=Cc;Xb=Mc;Bb()};La.strength=function(Cc){return arguments.length?(Kc="function"===typeof Cc?Cc:V(+Cc),Bb(),La):Kc};La.distanceMin=
function(Cc){return arguments.length?(mc=Cc*Cc,La):Math.sqrt(mc)};La.distanceMax=function(Cc){return arguments.length?(Ub=Cc*Cc,La):Math.sqrt(Ub)};La.theta=function(Cc){return arguments.length?(oc=Cc*Cc,La):Math.sqrt(oc)};return La},link:function(La){function Bb(Pb){for(var nc=0,rc=La.length;nc<Mc;++nc)for(var Hb=0,Jc,kc,Ab,md,yd;Hb<rc;++Hb)Jc=La[Hb],kc=Jc.source,Jc=Jc.target,Ab=Jc.x+Jc.vx-kc.x-kc.vx||1E-6*(Cc()-.5),md=Jc.y+Jc.vy-kc.y-kc.vy||1E-6*(Cc()-.5),yd=Math.sqrt(Ab*Ab+md*md),yd=(yd-Kb[Hb])/
yd*Pb*Wb[Hb],Ab*=yd,md*=yd,Jc.vx-=Ab*(yd=oc[Hb]),Jc.vy-=md*yd,kc.vx+=Ab*(yd=1-yd),kc.vy+=md*yd}function Ob(){if(mc){var Pb=mc.length,nc=La.length,rc=new Map(mc.map((Jc,kc)=>[Ic(Jc,kc,mc),Jc]));var Hb=0;for(Ub=Array(Pb);Hb<nc;++Hb)Pb=La[Hb],Pb.index=Hb,"object"!==typeof Pb.source&&(Pb.source=Y(rc,Pb.source)),"object"!==typeof Pb.target&&(Pb.target=Y(rc,Pb.target)),Ub[Pb.source.index]=(Ub[Pb.source.index]||0)+1,Ub[Pb.target.index]=(Ub[Pb.target.index]||0)+1;Hb=0;for(oc=Array(nc);Hb<nc;++Hb)Pb=La[Hb],
oc[Hb]=Ub[Pb.source.index]/(Ub[Pb.source.index]+Ub[Pb.target.index]);Wb=Array(nc);ec();Kb=Array(nc);sc()}}function ec(){if(mc)for(var Pb=0,nc=La.length;Pb<nc;++Pb)Wb[Pb]=+Xb(La[Pb],Pb,La)}function sc(){if(mc)for(var Pb=0,nc=La.length;Pb<nc;++Pb)Kb[Pb]=+Kc(La[Pb],Pb,La)}var Ic=G,Xb=function(Pb){return 1/Math.min(Ub[Pb.source.index],Ub[Pb.target.index])},Wb,Kc=V(30),Kb,mc,Ub,oc,Cc,Mc=1;null==La&&(La=[]);Bb.initialize=function(Pb,nc){mc=Pb;Cc=nc;Ob()};Bb.links=function(Pb){return arguments.length?(La=
Pb,Ob(),Bb):La};Bb.id=function(Pb){return arguments.length?(Ic=Pb,Bb):Ic};Bb.iterations=function(Pb){return arguments.length?(Mc=+Pb,Bb):Mc};Bb.strength=function(Pb){return arguments.length?(Xb="function"===typeof Pb?Pb:V(+Pb),ec(),Bb):Xb};Bb.distance=function(Pb){return arguments.length?(Kc="function"===typeof Pb?Pb:V(+Pb),sc(),Bb):Kc};return Bb},x:function(La){function Bb(Wb){for(var Kc=0,Kb=sc.length,mc;Kc<Kb;++Kc)mc=sc[Kc],mc.vx+=(Xb[Kc]-mc.x)*Ic[Kc]*Wb}function Ob(){if(sc){var Wb,Kc=sc.length;
Ic=Array(Kc);Xb=Array(Kc);for(Wb=0;Wb<Kc;++Wb)Ic[Wb]=isNaN(Xb[Wb]=+La(sc[Wb],Wb,sc))?0:+ec(sc[Wb],Wb,sc)}}var ec=V(.1),sc,Ic,Xb;"function"!==typeof La&&(La=V(null==La?0:+La));Bb.initialize=function(Wb){sc=Wb;Ob()};Bb.strength=function(Wb){return arguments.length?(ec="function"===typeof Wb?Wb:V(+Wb),Ob(),Bb):ec};Bb.x=function(Wb){return arguments.length?(La="function"===typeof Wb?Wb:V(+Wb),Ob(),Bb):La};return Bb},y:function(La){function Bb(Wb){for(var Kc=0,Kb=sc.length,mc;Kc<Kb;++Kc)mc=sc[Kc],mc.vy+=
(Xb[Kc]-mc.y)*Ic[Kc]*Wb}function Ob(){if(sc){var Wb,Kc=sc.length;Ic=Array(Kc);Xb=Array(Kc);for(Wb=0;Wb<Kc;++Wb)Ic[Wb]=isNaN(Xb[Wb]=+La(sc[Wb],Wb,sc))?0:+ec(sc[Wb],Wb,sc)}}var ec=V(.1),sc,Ic,Xb;"function"!==typeof La&&(La=V(null==La?0:+La));Bb.initialize=function(Wb){sc=Wb;Ob()};Bb.strength=function(Wb){return arguments.length?(ec="function"===typeof Wb?Wb:V(+Wb),Ob(),Bb):ec};Bb.y=function(Wb){return arguments.length?(La="function"===typeof Wb?Wb:V(+Wb),Ob(),Bb):La};return Bb}},Ka=["alpha","alphaMin",
"alphaTarget","velocityDecay","forces"],cb=["static","iterations"],fb=["x","y","vx","vy"];oa.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean","default":!1},{name:"restart",type:"boolean","default":!1},{name:"iterations",type:"number","default":300},{name:"alpha",type:"number","default":1},{name:"alphaMin",type:"number","default":.001},{name:"alphaTarget",type:"number","default":0},{name:"velocityDecay",type:"number","default":.4},{name:"forces",type:"param",array:!0,
params:[{key:{force:"center"},params:[{name:"x",type:"number","default":0},{name:"y",type:"number","default":0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number","default":.7},{name:"iterations",type:"number","default":1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number","default":-30,expr:!0},{name:"theta",type:"number","default":.9},{name:"distanceMin",type:"number","default":1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},
params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number","default":30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number","default":1}]},{key:{force:"x"},params:[{name:"strength",type:"number","default":.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number","default":.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,"default":fb}]};u.inherits(oa,w.Transform,{transform(La,Bb){var Ob=
this.value,ec=Bb.changed(Bb.ADD_REM),sc=La.modified(Ka),Ic=La.iterations||300;Ob?(ec&&(Bb.modifies("index"),Ob.nodes(Bb.source)),(sc||Bb.changed(Bb.MOD))&&R(Ob,La,0,Bb)):(this.value=Ob=D(Bb.source,La),Ob.on("tick",ea(Bb.dataflow,this)),La.static||(ec=!0,Ob.tick()),Bb.modifies("index"));if(sc||ec||La.modified(cb)||Bb.changed()&&La.restart)if(Ob.alpha(Math.max(Ob.alpha(),La.alpha||1)).alphaDecay(1-Math.pow(Ob.alphaMin(),1/Ic)),La.static)for(Ob.stop();0<=--Ic;)Ob.tick();else if(Ob.stopped()&&Ob.restart(),
!ec)return Bb.StopPropagation;return this.finish(La,Bb)},finish(La,Bb){const Ob=Bb.dataflow;for(let Wb=this._argops,Kc=0,Kb=Wb.length,mc;Kc<Kb;++Kc)if(mc=Wb[Kc],"forces"===mc.name&&"link"===mc.op._argval.force)for(var ec=mc.op._argops,sc=0,Ic=ec.length,Xb;sc<Ic;++sc)if("links"===ec[sc].name&&(Xb=ec[sc].op.source)){Ob.pulse(Xb,Ob.changeset().reflow());break}return Bb.reflow(La.modified()).modifies(fb)}});A.force=oa})};
shadow$provide[437]=function(ob,Ba,Gb,Ea){(function(A,w){"object"===typeof Ea&&"undefined"!==typeof Gb?w(Ea,Ba(426),Ba(421)):"function"===typeof define&&define.amd?define(["exports","vega-dataflow","vega-util"],w):(A="undefined"!==typeof globalThis?globalThis:A||self,w(A.vega={},A.vega,A.vega))})(this,function(A,w,u){function x(Hb,Jc,kc){const Ab={};Hb.each(md=>{const yd=md.data;kc(yd)&&(Ab[Jc(yd)]=md)});Hb.lookup=Ab;return Hb}function I(Hb,Jc){return Hb.parent===Jc.parent?1:2}function B(Hb,Jc){return Hb+
Jc.x}function N(Hb,Jc){return Math.max(Hb,Jc.y)}function da(Hb){for(var Jc;Jc=Hb.children;)Hb=Jc[0];return Hb}function U(Hb){for(var Jc;Jc=Hb.children;)Hb=Jc[Jc.length-1];return Hb}function X(Hb){var Jc=0,kc=Hb.children,Ab=kc&&kc.length;if(Ab)for(;0<=--Ab;)Jc+=kc[Ab].value;else Jc=1;Hb.value=Jc}function V(Hb,Jc){Hb instanceof Map?(Hb=[void 0,Hb],void 0===Jc&&(Jc=z)):void 0===Jc&&(Jc=P);Hb=new Q(Hb);for(var kc,Ab=[Hb],md,yd,hd,Ed;kc=Ab.pop();)if((yd=Jc(kc.data))&&(Ed=(yd=Array.from(yd)).length))for(kc.children=
yd,hd=Ed-1;0<=hd;--hd)Ab.push(md=yd[hd]=new Q(yd[hd])),md.parent=kc,md.depth=kc.depth+1;return Hb.eachBefore(Y)}function P(Hb){return Hb.children}function z(Hb){return Array.isArray(Hb)?Hb[1]:null}function G(Hb){void 0!==Hb.data.value&&(Hb.value=Hb.data.value);Hb.data=Hb.data.data}function Y(Hb){var Jc=0;do Hb.height=Jc;while((Hb=Hb.parent)&&Hb.height<++Jc)}function Q(Hb){this.data=Hb;this.depth=this.height=0;this.parent=null}function ja(Hb){if("function"!==typeof Hb)throw Error();return Hb}function pa(){return 0}
function J(Hb){return function(){return Hb}}function K(){let Hb=1;return()=>(Hb=(1664525*Hb+1013904223)%4294967296)/4294967296}function ba(Hb,Jc){var kc=Hb.r-Jc.r,Ab=Jc.x-Hb.x;Hb=Jc.y-Hb.y;return 0>kc||kc*kc<Ab*Ab+Hb*Hb}function O(Hb,Jc){var kc=Hb.r-Jc.r+1E-9*Math.max(Hb.r,Jc.r,1),Ab=Jc.x-Hb.x;Hb=Jc.y-Hb.y;return 0<kc&&kc*kc>Ab*Ab+Hb*Hb}function fa(Hb,Jc){for(var kc=0;kc<Jc.length;++kc)if(!O(Hb,Jc[kc]))return!1;return!0}function wa(Hb,Jc){var kc=Hb.x,Ab=Hb.y;Hb=Hb.r;var md=Jc.x,yd=Jc.y;Jc=Jc.r;var hd=
md-kc,Ed=yd-Ab,Qd=Jc-Hb,fd=Math.sqrt(hd*hd+Ed*Ed);return{x:(kc+md+hd/fd*Qd)/2,y:(Ab+yd+Ed/fd*Qd)/2,r:(fd+Hb+Jc)/2}}function ta(Hb,Jc,kc){var Ab=Hb.x,md=Hb.y;Hb=Hb.r;var yd=Jc.x,hd=Jc.y,Ed=Jc.r,Qd=kc.x,fd=kc.y,ed=kc.r;kc=Ab-yd;Jc=Ab-Qd;var bc=md-hd,yc=md-fd,$c=Ed-Hb,cc=ed-Hb,tb=Ab*Ab+md*md-Hb*Hb;hd=tb-yd*yd-hd*hd+Ed*Ed;fd=tb-Qd*Qd-fd*fd+ed*ed;Qd=Jc*bc-kc*yc;yd=(bc*fd-yc*hd)/(2*Qd)-Ab;bc=(yc*$c-bc*cc)/Qd;yc=(Jc*hd-kc*fd)/(2*Qd)-md;kc=(kc*cc-Jc*$c)/Qd;Jc=bc*bc+kc*kc-1;$c=2*(Hb+yd*bc+yc*kc);Hb=yd*yd+
yc*yc-Hb*Hb;Hb=-(1E-6<Math.abs(Jc)?($c+Math.sqrt($c*$c-4*Jc*Hb))/(2*Jc):Hb/$c);return{x:Ab+yd+bc*Hb,y:md+yc+kc*Hb,r:Hb}}function aa(Hb,Jc,kc){var Ab=Hb.x-Jc.x,md=Hb.y-Jc.y,yd=Ab*Ab+md*md;if(yd){var hd=Jc.r+kc.r;hd*=hd;var Ed=Hb.r+kc.r;Ed*=Ed;if(hd>Ed){var Qd=(yd+Ed-hd)/(2*yd);hd=Math.sqrt(Math.max(0,Ed/yd-Qd*Qd));kc.x=Hb.x-Qd*Ab-hd*md;kc.y=Hb.y-Qd*md+hd*Ab}else Qd=(yd+hd-Ed)/(2*yd),hd=Math.sqrt(Math.max(0,hd/yd-Qd*Qd)),kc.x=Jc.x+Qd*Ab-hd*md,kc.y=Jc.y+Qd*md+hd*Ab}else kc.x=Jc.x+kc.r,kc.y=Jc.y}function ha(Hb,
Jc){var kc=Hb.r+Jc.r-1E-6,Ab=Jc.x-Hb.x;Hb=Jc.y-Hb.y;return 0<kc&&kc*kc>Ab*Ab+Hb*Hb}function ka(Hb){var Jc=Hb._,kc=Hb.next._,Ab=Jc.r+kc.r;Hb=(Jc.x*kc.r+kc.x*Jc.r)/Ab;Jc=(Jc.y*kc.r+kc.y*Jc.r)/Ab;return Hb*Hb+Jc*Jc}function H(Hb){this._=Hb;this.previous=this.next=null}function oa(Hb,Jc){if(!(Ab=(Hb="object"===typeof Hb&&"length"in Hb?Hb:Array.from(Hb)).length))return 0;var kc,Ab;var md=Hb[0];md.x=0;md.y=0;if(!(1<Ab))return md.r;var yd=Hb[1];md.x=-yd.r;yd.x=md.r;yd.y=0;if(!(2<Ab))return md.r+yd.r;aa(yd,
md,kc=Hb[2]);md=new H(md);yd=new H(yd);kc=new H(kc);md.next=kc.previous=yd;yd.next=md.previous=kc;kc.next=yd.previous=md;var hd=3;a:for(;hd<Ab;++hd){aa(md._,yd._,kc=Hb[hd]);kc=new H(kc);var Ed=yd.next;var Qd=md.previous;var fd=yd._.r;var ed=md._.r;do if(fd<=ed){if(ha(Ed._,kc._)){yd=Ed;md.next=yd;yd.previous=md;--hd;continue a}fd+=Ed._.r;Ed=Ed.next}else{if(ha(Qd._,kc._)){md=Qd;md.next=yd;yd.previous=md;--hd;continue a}ed+=Qd._.r;Qd=Qd.previous}while(Ed!==Qd.next);kc.previous=md;kc.next=yd;md.next=
yd.previous=yd=kc;for(Ed=ka(md);(kc=kc.next)!==yd;)(Qd=ka(kc))<Ed&&(md=kc,Ed=Qd);yd=md.next}md=[yd._];for(kc=yd;(kc=kc.next)!==yd;)md.push(kc._);yd=0;md=Array.from(md);for(kc=md.length;kc;)Ed=Jc()*kc--|0,hd=md[kc],md[kc]=md[Ed],md[Ed]=hd;md=(Jc=md).length;kc=[];for(var bc;yd<md;)if(hd=Jc[yd],bc&&O(bc,hd))++yd;else{a:if(bc=kc,fa(hd,bc))bc=[hd];else{for(kc=0;kc<bc.length;++kc)if(ba(hd,bc[kc])&&fa(wa(bc[kc],hd),bc)){bc=[bc[kc],hd];break a}for(kc=0;kc<bc.length-1;++kc)for(yd=kc+1;yd<bc.length;++yd)if(ba(wa(bc[kc],
bc[yd]),hd)&&ba(wa(bc[kc],hd),bc[yd])&&ba(wa(bc[yd],hd),bc[kc])&&fa(ta(bc[kc],bc[yd],hd),bc)){bc=[bc[kc],bc[yd],hd];break a}throw Error();}a:{bc=kc=bc;switch(bc.length){case 1:bc=bc[0];bc={x:bc.x,y:bc.y,r:bc.r};break a;case 2:bc=wa(bc[0],bc[1]);break a;case 3:bc=ta(bc[0],bc[1],bc[2]);break a}bc=void 0}yd=0}kc=bc;for(hd=0;hd<Ab;++hd)md=Hb[hd],md.x-=kc.x,md.y-=kc.y;return kc.r}function ea(Hb){return Math.sqrt(Hb.value)}function D(Hb){return function(Jc){Jc.children||(Jc.r=Math.max(0,+Hb(Jc)||0))}}function R(Hb,
Jc,kc){return function(Ab){if(md=Ab.children){var md,yd,hd=md.length,Ed=Hb(Ab)*Jc||0;if(Ed)for(yd=0;yd<hd;++yd)md[yd].r+=Ed;var Qd=oa(md,kc);if(Ed)for(yd=0;yd<hd;++yd)md[yd].r-=Ed;Ab.r=Qd+Ed}}}function la(Hb){return function(Jc){var kc=Jc.parent;Jc.r*=Hb;kc&&(Jc.x=kc.x+Hb*Jc.x,Jc.y=kc.y+Hb*Jc.y)}}function Ia(Hb){Hb.x0=Math.round(Hb.x0);Hb.y0=Math.round(Hb.y0);Hb.x1=Math.round(Hb.x1);Hb.y1=Math.round(Hb.y1)}function Ma(Hb,Jc,kc,Ab,md){var yd=Hb.children,hd=-1,Ed=yd.length;for(Ab=Hb.value&&(Ab-Jc)/
Hb.value;++hd<Ed;)Hb=yd[hd],Hb.y0=kc,Hb.y1=md,Hb.x0=Jc,Hb.x1=Jc+=Hb.value*Ab}function Ta(Hb){return Hb.id}function ab(Hb){return Hb.parentId}function db(){function Hb(md){var yd=Array.from(md),hd=Jc,Ed=kc,Qd,fd,ed=new Map;if(null!=Ab){const tc=yd.map((cd,bd)=>{cd=Ab(cd,bd,md);cd=`${cd}`;bd=cd.length;pb(cd,bd-1)&&!pb(cd,bd-2)&&(cd=cd.slice(0,-1));return"/"===cd[0]?cd:`/${cd}`}),Ec=tc.map(ub);hd=(new Set(tc)).add("");for($c of Ec)hd.has($c)||(hd.add($c),tc.push($c),Ec.push(ub($c)),yd.push(mc));hd=(cd,
bd)=>tc[bd];Ed=(cd,bd)=>Ec[bd]}var bc=0;for(Qd=yd.length;bc<Qd;++bc){var yc=yd[bc];var $c=yd[bc]=new Q(yc);if(null!=(fd=hd(yc,bc,md))&&(fd+="")){var cc=$c.id=fd;ed.set(cc,ed.has(cc)?Kb:$c)}null!=(fd=Ed(yc,bc,md))&&(fd+="")&&($c.parent=fd)}for(bc=0;bc<Qd;++bc)if($c=yd[bc],fd=$c.parent){hd=ed.get(fd);if(!hd)throw Error("missing: "+fd);if(hd===Kb)throw Error("ambiguous: "+fd);hd.children?hd.children.push($c):hd.children=[$c];$c.parent=hd}else{if(tb)throw Error("multiple roots");var tb=$c}if(!tb)throw Error("no root");
if(null!=Ab){for(;tb.data===mc&&1===tb.children.length;)tb=tb.children[0],--Qd;for(fd=yd.length-1;0<=fd;--fd){$c=yd[fd];if($c.data!==mc)break;$c.data=null}}tb.parent=Kc;tb.eachBefore(function(tc){tc.depth=tc.parent.depth+1;--Qd}).eachBefore(Y);tb.parent=null;if(0<Qd)throw Error("cycle");return tb}var Jc=Ta,kc=ab,Ab;Hb.id=function(md){return arguments.length?(Jc=null==md?null:ja(md),Hb):Jc};Hb.parentId=function(md){return arguments.length?(kc=null==md?null:ja(md),Hb):kc};Hb.path=function(md){return arguments.length?
(Ab=null==md?null:ja(md),Hb):Ab};return Hb}function ub(Hb){let Jc=Hb.length;if(2>Jc)return"";for(;1<--Jc&&!pb(Hb,Jc););return Hb.slice(0,Jc)}function pb(Hb,Jc){if("/"===Hb[Jc]){let kc=0;for(;0<Jc&&"\\"===Hb[--Jc];)++kc;if(0===(kc&1))return!0}return!1}function Ya(Hb,Jc){return Hb.parent===Jc.parent?1:2}function Va(Hb){var Jc=Hb.children;return Jc?Jc[0]:Hb.t}function Pa(Hb){var Jc=Hb.children;return Jc?Jc[Jc.length-1]:Hb.t}function Ha(Hb,Jc){this._=Hb;this.A=this.children=this.parent=null;this.a=this;
this.s=this.c=this.m=this.z=0;this.t=null;this.i=Jc}function Ca(Hb){Hb=new Ha(Hb,0);for(var Jc,kc=[Hb],Ab,md,yd;Jc=kc.pop();)if(md=Jc._.children)for(Jc.children=Array(Ab=md.length),yd=Ab-1;0<=yd;--yd)kc.push(Ab=Jc.children[yd]=new Ha(md[yd],yd)),Ab.parent=Jc;(Hb.parent=new Ha(null,0)).children=[Hb];return Hb}function Aa(Hb,Jc,kc,Ab,md){var yd=Hb.children,hd=-1,Ed=yd.length;for(md=Hb.value&&(md-kc)/Hb.value;++hd<Ed;)Hb=yd[hd],Hb.x0=Jc,Hb.x1=Ab,Hb.y0=kc,Hb.y1=kc+=Hb.value*md}function Ga(Hb,Jc,kc,Ab,
md,yd){for(var hd=[],Ed=Jc.children,Qd,fd,ed=Qd=0,bc=Ed.length,yc,$c=Jc.value,cc,tb,tc,Ec,cd,bd;Qd<bc;){Jc=md-kc;yc=yd-Ab;do cc=Ed[ed++].value;while(!cc&&ed<bc);tb=tc=cc;bd=Math.max(yc/Jc,Jc/yc)/($c*Hb);Ec=cc*cc*bd;for(cd=Math.max(tc/Ec,Ec/tb);ed<bc;++ed){cc+=fd=Ed[ed].value;fd<tb&&(tb=fd);fd>tc&&(tc=fd);Ec=cc*cc*bd;Ec=Math.max(tc/Ec,Ec/tb);if(Ec>cd){cc-=fd;break}cd=Ec}hd.push(Qd={value:cc,dice:Jc<yc,children:Ed.slice(Qd,ed)});Qd.dice?Ma(Qd,kc,Ab,md,$c?Ab+=yc*cc/$c:yd):Aa(Qd,kc,Ab,$c?kc+=Jc*cc/$c:
md,yd);$c-=cc;Qd=ed}return hd}function Ka(){function Hb(yc){yc.x0=yc.y0=0;yc.x1=md;yc.y1=yd;yc.eachBefore(Jc);hd=[0];Ab&&yc.eachBefore(Ia);return yc}function Jc(yc){var $c=hd[yc.depth],cc=yc.x0+$c,tb=yc.y0+$c,tc=yc.x1-$c,Ec=yc.y1-$c;tc<cc&&(cc=tc=(cc+tc)/2);Ec<tb&&(tb=Ec=(tb+Ec)/2);yc.x0=cc;yc.y0=tb;yc.x1=tc;yc.y1=Ec;yc.children&&($c=hd[yc.depth+1]=Ed(yc)/2,cc+=bc(yc)-$c,tb+=Qd(yc)-$c,tc-=fd(yc)-$c,Ec-=ed(yc)-$c,tc<cc&&(cc=tc=(cc+tc)/2),Ec<tb&&(tb=Ec=(tb+Ec)/2),kc(yc,cc,tb,tc,Ec))}var kc=oc,Ab=!1,
md=1,yd=1,hd=[0],Ed=pa,Qd=pa,fd=pa,ed=pa,bc=pa;Hb.round=function(yc){return arguments.length?(Ab=!!yc,Hb):Ab};Hb.size=function(yc){return arguments.length?(md=+yc[0],yd=+yc[1],Hb):[md,yd]};Hb.tile=function(yc){return arguments.length?(kc=ja(yc),Hb):kc};Hb.padding=function(yc){return arguments.length?Hb.paddingInner(yc).paddingOuter(yc):Hb.paddingInner()};Hb.paddingInner=function(yc){return arguments.length?(Ed="function"===typeof yc?yc:J(+yc),Hb):Ed};Hb.paddingOuter=function(yc){return arguments.length?
Hb.paddingTop(yc).paddingRight(yc).paddingBottom(yc).paddingLeft(yc):Hb.paddingTop()};Hb.paddingTop=function(yc){return arguments.length?(Qd="function"===typeof yc?yc:J(+yc),Hb):Qd};Hb.paddingRight=function(yc){return arguments.length?(fd="function"===typeof yc?yc:J(+yc),Hb):fd};Hb.paddingBottom=function(yc){return arguments.length?(ed="function"===typeof yc?yc:J(+yc),Hb):ed};Hb.paddingLeft=function(yc){return arguments.length?(bc="function"===typeof yc?yc:J(+yc),Hb):bc};return Hb}function cb(Hb){w.Transform.call(this,
null,Hb)}function fb(){function Hb(md,yd){if(yd>=kc.length)return md;const hd=md.length,Ed=kc[yd++],Qd={},fd={};let ed=-1,bc,yc,$c;for(;++ed<hd;)bc=Ed(yc=md[ed])+"",($c=Qd[bc])?$c.push(yc):Qd[bc]=[yc];for(bc in Qd)fd[bc]=Hb(Qd[bc],yd);return fd}function Jc(md,yd){if(++yd>kc.length)return md;const hd=[];for(const Ed in md)hd.push({key:Ed,values:Jc(md[Ed],yd)});return hd}const kc=[],Ab={entries:md=>Jc(Hb(md,0),0),key:md=>(kc.push(md),Ab)};return Ab}function La(Hb){w.Transform.call(this,null,Hb)}function Bb(Hb,
Jc,kc){for(let Ab,md=0,yd=Jc.length;md<yd;++md)if(Ab=Jc[md],Ab in kc)Hb[Ab](kc[Ab])}function Ob(Hb){La.call(this,Hb)}function ec(Hb){La.call(this,Hb)}function sc(Hb){w.Transform.call(this,null,Hb)}function Ic(Hb){La.call(this,Hb)}function Xb(Hb){w.Transform.call(this,[],Hb)}function Wb(Hb){La.call(this,Hb)}Q.prototype=V.prototype={constructor:Q,count:function(){return this.eachAfter(X)},each:function(Hb,Jc){let kc=-1;for(const Ab of this)Hb.call(Jc,Ab,++kc,this);return this},eachAfter:function(Hb,
Jc){for(var kc,Ab=[this],md=[],yd,hd,Ed=-1;kc=Ab.pop();)if(md.push(kc),kc=kc.children)for(yd=0,hd=kc.length;yd<hd;++yd)Ab.push(kc[yd]);for(;kc=md.pop();)Hb.call(Jc,kc,++Ed,this);return this},eachBefore:function(Hb,Jc){for(var kc,Ab=[this],md,yd=-1;kc=Ab.pop();)if(Hb.call(Jc,kc,++yd,this),kc=kc.children)for(md=kc.length-1;0<=md;--md)Ab.push(kc[md]);return this},find:function(Hb,Jc){let kc=-1;for(const Ab of this)if(Hb.call(Jc,Ab,++kc,this))return Ab},sum:function(Hb){return this.eachAfter(function(Jc){for(var kc=
+Hb(Jc.data)||0,Ab=Jc.children,md=Ab&&Ab.length;0<=--md;)kc+=Ab[md].value;Jc.value=kc})},sort:function(Hb){return this.eachBefore(function(Jc){Jc.children&&Jc.children.sort(Hb)})},path:function(Hb){var Jc=this;var kc=Jc;var Ab=Hb;if(kc!==Ab){var md=kc.ancestors(),yd=Ab.ancestors(),hd=null;kc=md.pop();for(Ab=yd.pop();kc===Ab;)hd=kc,kc=md.pop(),Ab=yd.pop();kc=hd}for(Ab=[Jc];Jc!==kc;)Jc=Jc.parent,Ab.push(Jc);for(Jc=Ab.length;Hb!==kc;)Ab.splice(Jc,0,Hb),Hb=Hb.parent;return Ab},ancestors:function(){for(var Hb=
this,Jc=[Hb];Hb=Hb.parent;)Jc.push(Hb);return Jc},descendants:function(){return Array.from(this)},leaves:function(){var Hb=[];this.eachBefore(function(Jc){Jc.children||Hb.push(Jc)});return Hb},links:function(){var Hb=this,Jc=[];Hb.each(function(kc){kc!==Hb&&Jc.push({source:kc.parent,target:kc})});return Jc},copy:function(){return V(this).eachBefore(G)},[Symbol.iterator]:function*(){var Hb,Jc=[this],kc;do{var Ab=Jc.reverse();for(Jc=[];Hb=Ab.pop();)if(yield Hb,Hb=Hb.children){var md=0;for(kc=Hb.length;md<
kc;++md)Jc.push(Hb[md])}}while(Jc.length)}};var Kc={depth:-1},Kb={},mc={};Ha.prototype=Object.create(Q.prototype);var Ub=(1+Math.sqrt(5))/2,oc=function kc(Jc){function Ab(md,yd,hd,Ed,Qd){Ga(Jc,md,yd,hd,Ed,Qd)}Ab.ratio=function(md){return kc(1<(md=+md)?md:1)};return Ab}(Ub);Ub=function Ab(kc){function md(yd,hd,Ed,Qd,fd){if((ed=yd._squarify)&&ed.ratio===kc)for(var ed,bc,yc,$c=-1,cc,tb=ed.length,tc=yd.value;++$c<tb;){yd=ed[$c];bc=yd.children;yc=yd.value=0;for(cc=bc.length;yc<cc;++yc)yd.value+=bc[yc].value;
yd.dice?Ma(yd,hd,Ed,Qd,tc?Ed+=(fd-Ed)*yd.value/tc:fd):Aa(yd,hd,Ed,tc?hd+=(Qd-hd)*yd.value/tc:Qd,fd);tc-=yd.value}else yd._squarify=ed=Ga(kc,yd,hd,Ed,Qd,fd),ed.ratio=kc}md.ratio=function(yd){return Ab(1<(yd=+yd)?yd:1)};return md}(Ub);cb.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const Cc=kc=>kc.values;u.inherits(cb,w.Transform,{transform(kc,Ab){Ab.source||u.error("Nest transform requires an upstream data source.");
var md=kc.generate,yd=kc.modified(),hd=Ab.clone(),Ed=this.value;if(!Ed||yd||Ab.changed())Ed&&Ed.each(Qd=>{Qd.children&&w.isTuple(Qd.data)&&hd.rem.push(Qd.data)}),this.value=Ed=V({values:u.array(kc.keys).reduce((Qd,fd)=>{Qd.key(fd);return Qd},fb()).entries(hd.source)},Cc),md&&Ed.each(Qd=>{Qd.children&&(Qd=w.ingest(Qd.data),hd.add.push(Qd),hd.source.push(Qd))}),x(Ed,w.tupleid,w.tupleid);hd.source.root=Ed;return hd}});const Mc=(kc,Ab)=>kc.parent===Ab.parent?1:2;u.inherits(La,w.Transform,{transform(kc,
Ab){Ab.source&&Ab.source.root||u.error(this.constructor.name+" transform requires a backing tree data source.");const md=this.layout(kc.method),yd=this.fields,hd=Ab.source.root,Ed=kc.as||yd;kc.field?hd.sum(kc.field):hd.count();kc.sort&&hd.sort(w.stableCompare(kc.sort,Qd=>Qd.data));Bb(md,this.params,kc);md.separation&&md.separation(!1!==kc.separation?Mc:u.one);try{this.value=md(hd)}catch(Qd){u.error(Qd)}hd.each(Qd=>{const fd=Qd.data,ed=yd.length-1;for(let bc=0;bc<ed;++bc)fd[Ed[bc]]=Qd[yd[bc]];fd[Ed[ed]]=
Qd.children?Qd.children.length:0});return Ab.reflow(kc.modified()).modifies(Ed).modifies("leaf")}});var Pb=["x","y","r","depth","children"];Ob.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number","default":0},{name:"radius",type:"field","default":null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Pb.length,"default":Pb}]};u.inherits(Ob,La,{layout:function(){function kc(Ed){const Qd=
K();Ed.x=md/2;Ed.y=yd/2;Ab?Ed.eachBefore(D(Ab)).eachAfter(R(hd,.5,Qd)).eachBefore(la(1)):Ed.eachBefore(D(ea)).eachAfter(R(pa,1,Qd)).eachAfter(R(hd,Ed.r/Math.min(md,yd),Qd)).eachBefore(la(Math.min(md,yd)/(2*Ed.r)));return Ed}var Ab=null,md=1,yd=1,hd=pa;kc.radius=function(Ed){return arguments.length?(Ab=null==Ed?null:ja(Ed),kc):Ab};kc.size=function(Ed){return arguments.length?(md=+Ed[0],yd=+Ed[1],kc):[md,yd]};kc.padding=function(Ed){return arguments.length?(hd="function"===typeof Ed?Ed:J(+Ed),kc):hd};
return kc},params:["radius","size","padding"],fields:Pb});Pb="x0 y0 x1 y1 depth children".split(" ");ec.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number","default":0},{name:"round",type:"boolean","default":!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Pb.length,"default":Pb}]};u.inherits(ec,La,{layout:function(){function kc(Qd){var fd=Qd.height+1;Qd.x0=
Qd.y0=hd;Qd.x1=md;Qd.y1=yd/fd;Qd.eachBefore(Ab(yd,fd));Ed&&Qd.eachBefore(Ia);return Qd}function Ab(Qd,fd){return function(ed){ed.children&&Ma(ed,ed.x0,Qd*(ed.depth+1)/fd,ed.x1,Qd*(ed.depth+2)/fd);var bc=ed.x0,yc=ed.y0,$c=ed.x1-hd,cc=ed.y1-hd;$c<bc&&(bc=$c=(bc+$c)/2);cc<yc&&(yc=cc=(yc+cc)/2);ed.x0=bc;ed.y0=yc;ed.x1=$c;ed.y1=cc}}var md=1,yd=1,hd=0,Ed=!1;kc.round=function(Qd){return arguments.length?(Ed=!!Qd,kc):Ed};kc.size=function(Qd){return arguments.length?(md=+Qd[0],yd=+Qd[1],kc):[md,yd]};kc.padding=
function(Qd){return arguments.length?(hd=+Qd,kc):hd};return kc},params:["size","round","padding"],fields:Pb});sc.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};u.inherits(sc,w.Transform,{transform(kc,Ab){Ab.source||u.error("Stratify transform requires an upstream data source.");let md=this.value;const yd=kc.modified(),hd=Ab.fork(Ab.ALL).materialize(Ab.SOURCE);Ab=!md||yd||Ab.changed(Ab.ADD_REM)||Ab.modified(kc.key.fields)||
Ab.modified(kc.parentKey.fields);hd.source=hd.source.slice();Ab&&(md=hd.source.length?x(db().id(kc.key).parentId(kc.parentKey)(hd.source),kc.key,u.truthy):x(db()([{}]),kc.key,kc.key));hd.source.root=this.value=md;return hd}});const nc={tidy:function(){function kc(ed){var bc=Ca(ed);bc.eachAfter(Ab);bc.parent.m=-bc.z;bc.eachBefore(md);if(fd)ed.eachBefore(yd);else{var yc=ed,$c=ed,cc=ed;ed.eachBefore(function(cd){cd.x<yc.x&&(yc=cd);cd.x>$c.x&&($c=cd);cd.depth>cc.depth&&(cc=cd)});bc=yc===$c?1:hd(yc,$c)/
2;var tb=bc-yc.x,tc=Ed/($c.x+bc+tb),Ec=Qd/(cc.depth||1);ed.eachBefore(function(cd){cd.x=(cd.x+tb)*tc;cd.y=cd.depth*Ec})}return ed}function Ab(ed){var bc=ed.children,yc=ed.parent.children,$c=ed.i?yc[ed.i-1]:null;if(bc){for(var cc=0,tb=0,tc=ed.children,Ec=tc.length,cd;0<=--Ec;)cd=tc[Ec],cd.z+=cc,cd.m+=cc,cc+=cd.s+(tb+=cd.c);bc=(bc[0].z+bc[bc.length-1].z)/2;$c?(ed.z=$c.z+hd(ed._,$c._),ed.m=ed.z-bc):ed.z=bc}else $c&&(ed.z=$c.z+hd(ed._,$c._));bc=ed.parent;yc=ed.parent.A||yc[0];if($c){tb=cc=ed;tc=cc.parent.children[0];
Ec=cc.m;cd=tb.m;for(var bd=$c.m,od=tc.m,Dd;$c=Pa($c),cc=Va(cc),$c&&cc;){tc=Va(tc);tb=Pa(tb);tb.a=ed;Dd=$c.z+bd-cc.z-Ec+hd($c._,cc._);if(0<Dd){var xd=$c.a.parent===ed.parent?$c.a:yc,sd=ed,Vd=Dd,re=Vd/(sd.i-xd.i);sd.c-=re;sd.s+=Vd;xd.c+=re;sd.z+=Vd;sd.m+=Vd;Ec+=Dd;cd+=Dd}bd+=$c.m;Ec+=cc.m;od+=tc.m;cd+=tb.m}$c&&!Pa(tb)&&(tb.t=$c,tb.m+=bd-cd);cc&&!Va(tc)&&(tc.t=cc,tc.m+=Ec-od,yc=ed)}bc.A=yc}function md(ed){ed._.x=ed.z+ed.parent.m;ed.m+=ed.parent.m}function yd(ed){ed.x*=Ed;ed.y=ed.depth*Qd}var hd=Ya,Ed=
1,Qd=1,fd=null;kc.separation=function(ed){return arguments.length?(hd=ed,kc):hd};kc.size=function(ed){return arguments.length?(fd=!1,Ed=+ed[0],Qd=+ed[1],kc):fd?null:[Ed,Qd]};kc.nodeSize=function(ed){return arguments.length?(fd=!0,Ed=+ed[0],Qd=+ed[1],kc):fd?[Ed,Qd]:null};return kc},cluster:function(){function kc(Ed){var Qd,fd=0;Ed.eachAfter(function(cc){var tb=cc.children;if(tb){var tc=tb.reduce(B,0)/tb.length;cc.x=tc;cc.y=1+tb.reduce(N,0)}else cc.x=Qd?fd+=Ab(cc,Qd):0,cc.y=0,Qd=cc});var ed=da(Ed),
bc=U(Ed),yc=ed.x-Ab(ed,bc)/2,$c=bc.x+Ab(bc,ed)/2;return Ed.eachAfter(hd?function(cc){cc.x=(cc.x-Ed.x)*md;cc.y=(Ed.y-cc.y)*yd}:function(cc){cc.x=(cc.x-yc)/($c-yc)*md;cc.y=(1-(Ed.y?cc.y/Ed.y:1))*yd})}var Ab=I,md=1,yd=1,hd=!1;kc.separation=function(Ed){return arguments.length?(Ab=Ed,kc):Ab};kc.size=function(Ed){return arguments.length?(hd=!1,md=+Ed[0],yd=+Ed[1],kc):hd?null:[md,yd]};kc.nodeSize=function(Ed){return arguments.length?(hd=!0,md=+Ed[0],yd=+Ed[1],kc):hd?[md,yd]:null};return kc}};Pb=["x","y",
"depth","children"];Ic.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum","default":"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean","default":!0},{name:"as",type:"string",array:!0,length:Pb.length,"default":Pb}]};u.inherits(Ic,La,{layout(kc){kc=kc||"tidy";if(u.hasOwnProperty(nc,kc))return nc[kc]();
u.error("Unrecognized Tree layout method: "+kc)},params:["size","nodeSize"],fields:Pb});Xb.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};u.inherits(Xb,w.Transform,{transform(kc,Ab){kc=this.value;const md=Ab.source&&Ab.source.root,yd=Ab.fork(Ab.NO_SOURCE),hd={};md||u.error("TreeLinks transform requires a tree data source.");Ab.changed(Ab.ADD_REM)?(yd.rem=kc,Ab.visit(Ab.SOURCE,Ed=>hd[w.tupleid(Ed)]=1),md.each(Ed=>{const Qd=Ed.data;(Ed=Ed.parent&&Ed.parent.data)&&
hd[w.tupleid(Qd)]&&hd[w.tupleid(Ed)]&&yd.add.push(w.ingest({source:Ed,target:Qd}))}),this.value=yd.add):Ab.changed(Ab.MOD)&&(Ab.visit(Ab.MOD,Ed=>hd[w.tupleid(Ed)]=1),kc.forEach(Ed=>{(hd[w.tupleid(Ed.source)]||hd[w.tupleid(Ed.target)])&&yd.mod.push(Ed)}));return yd}});const rc={binary:function(kc,Ab,md,yd,hd){function Ed($c,cc,tb,tc,Ec,cd,bd){if($c>=cc-1)$c=Qd[$c],$c.x0=tc,$c.y0=Ec,$c.x1=cd,$c.y1=bd;else{for(var od=yc[$c],Dd=tb/2+od,xd=$c+1,sd=cc-1;xd<sd;){var Vd=xd+sd>>>1;yc[Vd]<Dd?xd=Vd+1:sd=Vd}Dd-
yc[xd-1]<yc[xd]-Dd&&$c+1<xd&&--xd;od=yc[xd]-od;Dd=tb-od;cd-tc>bd-Ec?(tb=tb?(tc*Dd+cd*od)/tb:cd,Ed($c,xd,od,tc,Ec,tb,bd),Ed(xd,cc,Dd,tb,Ec,cd,bd)):(tb=tb?(Ec*Dd+bd*od)/tb:bd,Ed($c,xd,od,tc,Ec,cd,tb),Ed(xd,cc,Dd,tc,tb,cd,bd))}}var Qd=kc.children,fd,ed=Qd.length,bc,yc=Array(ed+1);for(yc[0]=bc=fd=0;fd<ed;++fd)yc[fd+1]=bc+=Qd[fd].value;Ed(0,ed,kc.value,Ab,md,yd,hd)},dice:Ma,slice:Aa,slicedice:function(kc,Ab,md,yd,hd){(kc.depth&1?Aa:Ma)(kc,Ab,md,yd,hd)},squarify:oc,resquarify:Ub};Ub="x0 y0 x1 y1 depth children".split(" ");
Wb.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum","default":"squarify",values:"squarify resquarify binary dice slice slicedice".split(" ")},{name:"padding",type:"number","default":0},{name:"paddingInner",type:"number","default":0},{name:"paddingOuter",type:"number","default":0},{name:"paddingTop",type:"number","default":0},{name:"paddingRight",type:"number","default":0},{name:"paddingBottom",type:"number",
"default":0},{name:"paddingLeft",type:"number","default":0},{name:"ratio",type:"number","default":1.618033988749895},{name:"round",type:"boolean","default":!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Ub.length,"default":Ub}]};u.inherits(Wb,La,{layout(){const kc=Ka();kc.ratio=Ab=>{const md=kc.tile();md.ratio&&kc.tile(md.ratio(Ab))};kc.method=Ab=>{u.hasOwnProperty(rc,Ab)?kc.tile(rc[Ab]):u.error("Unrecognized Treemap layout method: "+Ab)};return kc},params:"method ratio size round padding paddingInner paddingOuter paddingTop paddingRight paddingBottom paddingLeft".split(" "),
fields:Ub});A.nest=cb;A.pack=Ob;A.partition=ec;A.stratify=sc;A.tree=Ic;A.treelinks=Xb;A.treemap=Wb})};
shadow$provide[438]=function(ob,Ba,Gb,Ea){(function(A,w){"object"===typeof Ea&&"undefined"!==typeof Gb?w(Ea,Ba(431),Ba(429),Ba(426),Ba(421)):"function"===typeof define&&define.amd?define(["exports","vega-scenegraph","vega-canvas","vega-dataflow","vega-util"],w):(A="undefined"!==typeof globalThis?globalThis:A||self,w((A.vega=A.vega||{},A.vega.transforms={}),A.vega,A.vega,A.vega,A.vega))})(this,function(A,w,u,x,I){function B(ea,D){const R=ea.bitmap();(D||[]).forEach(la=>R.set(ea(la.boundary[0]),ea(la.boundary[3])));
return[R,void 0]}function N(ea,D,R,la,Ia){const Ma=ea.width,Ta=ea.height;la=la||Ia;const ab=u.canvas(Ma,Ta).getContext("2d");var db=u.canvas(Ma,Ta).getContext("2d"),ub=la&&u.canvas(Ma,Ta).getContext("2d");R.forEach(Ka=>da(ab,Ka,!1));da(db,D,!1);la&&da(ub,D,!0);D=new Uint32Array(ab.getImageData(0,0,Ma,Ta).data.buffer);R=new Uint32Array(db.getImageData(0,0,Ma,Ta).data.buffer);ub=la&&new Uint32Array(ub.getImageData(0,0,Ma,Ta).data.buffer);db=ea.bitmap();const pb=la&&ea.bitmap();let Ya,Va;let Pa,Ha,Ca,
Aa;for(Va=0;Va<Ta;++Va)for(Ya=0;Ya<Ma;++Ya){var Ga=Va*Ma+Ya;Ha=D[Ga]&4278190080;Aa=R[Ga]&4278190080;Ca=la&&ub[Ga]&4278190080;if(Ha||Ca||Aa)Ga=ea(Ya),Pa=ea(Va),Ia||!Ha&&!Aa||db.set(Ga,Pa),la&&(Ha||Ca)&&pb.set(Ga,Pa)}return[db,pb]}function da(ea,D,R){if(D.length){var la=D[0].mark.marktype;"group"===la?D.forEach(Ia=>{Ia.items.forEach(Ma=>da(ea,Ma.items,R))}):w.Marks[la].draw(ea,{items:R?D.map(U):D})}}function U(ea){ea=x.rederive(ea,{});return ea.stroke&&0!==ea.strokeOpacity||ea.fill&&0!==ea.fillOpacity?
Object.assign({},ea,{strokeOpacity:1,stroke:"#000",fillOpacity:0}):ea}function X(ea,D){const R=new Uint32Array(~~((ea*D+32)/32));return{array:R,get:(la,Ia)=>{la=Ia*ea+la;return R[la>>>5]&1<<(la&31)},set:(la,Ia)=>{la=Ia*ea+la;R[la>>>5]|=1<<(la&31)},clear:(la,Ia)=>{la=Ia*ea+la;R[la>>>5]&=~(1<<(la&31))},getRange:(la,Ia,Ma,Ta)=>{let ab,db,ub;for(;Ta>=Ia;--Ta){var pb=Ta*ea+la;ab=Ta*ea+Ma;db=pb>>>5;ub=ab>>>5;if(db===ub){if(R[db]&ba[pb&31]&O[(ab&31)+1])return!0}else{if(R[db]&ba[pb&31]||R[ub]&O[(ab&31)+1])return!0;
for(pb=db+1;pb<ub;++pb)if(R[pb])return!0}}return!1},setRange:(la,Ia,Ma,Ta)=>{let ab,db,ub;for(;Ia<=Ta;++Ia){var pb=Ia*ea+la;ab=Ia*ea+Ma;db=pb>>>5;ub=ab>>>5;if(db===ub)R[db]|=ba[pb&31]&O[(ab&31)+1];else for(R[db]|=ba[pb&31],R[ub]|=O[(ab&31)+1],pb=db+1;pb<ub;++pb)R[pb]|=4294967295}},clearRange:(la,Ia,Ma,Ta)=>{let ab,db,ub;for(;Ia<=Ta;++Ia){var pb=Ia*ea+la;ab=Ia*ea+Ma;db=pb>>>5;ub=ab>>>5;if(db===ub)R[db]&=O[pb&31]|ba[(ab&31)+1];else for(R[db]&=O[pb&31],R[ub]&=ba[(ab&31)+1],pb=db+1;pb<ub;++pb)R[pb]&=
0}},outOfBounds:(la,Ia,Ma,Ta)=>0>la||0>Ia||Ta>=D||Ma>=ea}}function V(ea,D,R){const la=Math.max(1,Math.sqrt(ea*D/1E6)),Ia=~~((ea+2*R+la)/la),Ma=~~((D+2*R+la)/la),Ta=ab=>~~((ab+R)/la);Ta.invert=ab=>ab*la-R;Ta.bitmap=()=>X(Ia,Ma);Ta.ratio=la;Ta.padding=R;Ta.width=ea;Ta.height=D;return Ta}function P(ea,D,R,la,Ia,Ma){R/=2;return 0>ea-R||ea+R>Ia||0>D-(R=la/2)||D+R>Ma}function z(ea,D,R,la,Ia,Ma,Ta,ab){Ia=Ia*Ma/(2*la);la=ea(D-Ia);D=ea(D+Ia);Ia=ea(R-(Ma/=2));ea=ea(R+Ma);return Ta.outOfBounds(la,Ia,D,ea)||
Ta.getRange(la,Ia,D,ea)||ab&&ab.getRange(la,Ia,D,ea)}function G(ea,D,R,la){const Ia=ea.width,Ma=ea.height,Ta=D[0],ab=D[1],db=la.length;return function(ub){const pb=ub.boundary,Ya=ub.datum.fontSize;if(0>pb[2]||0>pb[5]||pb[0]>Ia||pb[3]>Ma)return!1;var Va;let Pa=null!=(Va=ub.textWidth)?Va:0,Ha;let Ca,Aa;let Ga;let Ka;let cb,fb;for(let oc=0;oc<db;++oc){Va=(R[oc]&3)-1;Ha=(R[oc]>>>2&3)-1;var La=0===Va&&0===Ha||0>la[oc];var Bb=Va&&Ha?Math.SQRT1_2:1;Ca=0>la[oc]?-1:1;Aa=pb[1+Va]+la[oc]*Va*Bb;Ka=pb[4+Ha]+Ca*
Ya*Ha/2+la[oc]*Ha*Bb;Bb=Ka-Ya/2;Ga=Ka+Ya/2;var Ob=ea(Aa);cb=ea(Bb);fb=ea(Ga);if(!Pa){var ec=Ob;var sc=cb;var Ic=fb;var Xb=Ta,Wb=ab,Kc=La;if(Xb.outOfBounds(ec,sc,Ob,Ic)||(Kc&&Wb||Xb).getRange(ec,sc,Ob,Ic))continue;else Pa=w.textMetrics.width(ub.datum,ub.datum.text)}sc=Aa+Ca*Pa*Va/2;Aa=sc-Pa/2;ec=sc+Pa/2;Ob=ea(Aa);Ic=ea(ec);Xb=Ob;Wb=Ic;Kc=cb;var Kb=fb,mc=Ta,Ub=ab;if(!mc.outOfBounds(Xb,Kc,Wb,Kb)&&!(La&&Ub||mc).getRange(Xb,Kc,Wb,Kb))return ub.x=Va?0>Va*Ca?ec:Aa:sc,ub.y=Ha?0>Ha*Ca?Ga:Bb:Ka,ub.align=ta[Va*
Ca+1],ub.baseline=aa[Ha*Ca+1],Ta.setRange(Ob,cb,Ic,fb),!0}return!1}}function Y(ea,D,R,la,Ia,Ma,Ta,ab,db,ub,pb){if(!ea.length)return ea;var Ya=Math.max(la.length,Ia.length);const Va=Q(la,Ya);Ia=ja(Ia,Ya);const Pa=pa(ea[0].datum);var Ha="group"===Pa&&ea[0].datum.items[db].marktype;Ya="area"===Ha;const Ca=J(Pa,Ha,ab,db),Aa=null===ub||Infinity===ub;Ha=Ya&&"naive"===pb;let Ga=-1,Ka=-1;ab=ea.map(La=>{const Bb=Aa?w.textMetrics.width(La,La.text):void 0;Ga=Math.max(Ga,Bb);Ka=Math.max(Ka,La.fontSize);return{datum:La,
opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:Ca(La),textWidth:Bb}});ub=null===ub||Infinity===ub?Math.max(Ga,Ka)+Math.max(...la):ub;D=V(D[0],D[1],ub);if(!Ha){R&&ab.sort((La,Bb)=>R(La.datum,Bb.datum));var cb=!1;for(la=0;la<Ia.length&&!cb;++la)cb=5===Ia[la]||0>Va[la];ea=(Pa&&Ta||Ya)&&ea.map(La=>La.datum);cb=Ma.length||ea?N(D,ea||[],Ma,cb,Ya):B(D,Ta&&ab)}const fb=Ya?ka[pb](D,cb,Ta,db):G(D,cb,Ia,Va);ab.forEach(La=>La.opacity=+fb(La));return ab}function Q(ea,D){const R=new Float64Array(D),
la=ea.length;for(let Ia=0;Ia<la;++Ia)R[Ia]=ea[Ia]||0;for(ea=la;ea<D;++ea)R[ea]=R[la-1];return R}function ja(ea,D){const R=new Int8Array(D),la=ea.length;for(let Ia=0;Ia<la;++Ia)R[Ia]|=ha[ea[Ia]];for(ea=la;ea<D;++ea)R[ea]=R[la-1];return R}function pa(ea){return ea&&ea.mark&&ea.mark.marktype}function J(ea,D,R,la){const Ia=Ma=>[Ma.x,Ma.x,Ma.x,Ma.y,Ma.y,Ma.y];return ea?"line"===ea||"area"===ea?Ma=>Ia(Ma.datum):"line"===D?Ma=>{Ma=Ma.datum.items[la].items;return Ia(Ma.length?Ma["start"===R?0:Ma.length-1]:
{x:NaN,y:NaN})}:Ma=>{Ma=Ma.datum.bounds;return[Ma.x1,(Ma.x1+Ma.x2)/2,Ma.x2,Ma.y1,(Ma.y1+Ma.y2)/2,Ma.y2]}:Ia}function K(ea){x.Transform.call(this,null,ea)}const ba=new Uint32Array(33),O=new Uint32Array(33);O[0]=0;ba[0]=~O[0];for(let ea=1;32>=ea;++ea)O[ea]=O[ea-1]<<1|1,ba[ea]=~O[ea];const fa=[-1,-1,1,1],wa=[-1,1,-1,1],ta=["right","center","left"],aa=["bottom","middle","top"],ha={"top-left":0,top:1,"top-right":2,left:4,middle:5,right:6,"bottom-left":8,bottom:9,"bottom-right":10},ka={naive:function(ea,
D,R,la){const Ia=ea.width,Ma=ea.height;return function(Ta){const ab=Ta.datum.datum.items[la].items,db=ab.length,ub=Ta.datum.fontSize,pb=w.textMetrics.width(Ta.datum,Ta.datum.text);let Ya=0;let Va,Pa,Ha,Ca,Aa;for(let Ka=0;Ka<db;++Ka){var Ga=ab[Ka].x;Pa=ab[Ka].y;Va=void 0===ab[Ka].x2?Ga:ab[Ka].x2;Ha=void 0===ab[Ka].y2?Pa:ab[Ka].y2;Ca=(Ga+Va)/2;Aa=(Pa+Ha)/2;Ga=Math.abs(Va-Ga+Ha-Pa);Ga>=Ya&&(Ya=Ga,Ta.x=Ca,Ta.y=Aa)}Ca=pb/2;Aa=ub/2;Ga=Ta.x-Ca;Va=Ta.x+Ca;Pa=Ta.y-Aa;Ha=Ta.y+Aa;Ta.align="center";0>Ga&&Va<=
Ia?Ta.align="left":0<=Ga&&Ia<Va&&(Ta.align="right");Ta.baseline="middle";0>Pa&&Ha<=Ma?Ta.baseline="top":0<=Pa&&Ma<Ha&&(Ta.baseline="bottom");return!0}},"reduced-search":function(ea,D,R,la){function Ia(ub,pb,Ya,Va,Pa){ub=ea.invert(ub);pb=ea.invert(pb);let Ha=Ya,Ca=Ta,Aa;if(!P(ub,pb,Va,Pa,Ma,Ta)&&!z(ea,ub,pb,Pa,Va,Ha,ab,db)&&!z(ea,ub,pb,Pa,Va,Pa,ab,null)){for(;1<=Ca-Ha;)Aa=(Ha+Ca)/2,z(ea,ub,pb,Pa,Va,Aa,ab,db)?Ca=Aa:Ha=Aa;if(Ha>Ya)return[ub,pb,Ha,!0]}}const Ma=ea.width,Ta=ea.height,ab=D[0],db=D[1];return function(ub){const pb=
ub.datum.datum.items[la].items,Ya=pb.length,Va=ub.datum.fontSize,Pa=w.textMetrics.width(ub.datum,ub.datum.text);let Ha=R?Va:0,Ca=!1,Aa=!1,Ga=0;let Ka;let cb;let fb,La,Bb,Ob,ec,sc,Ic,Xb;for(let mc=0;mc<Ya;++mc){var Wb=pb[mc].x;var Kc=pb[mc].y;Ka=void 0===pb[mc].x2?Wb:pb[mc].x2;cb=void 0===pb[mc].y2?Kc:pb[mc].y2;if(Wb>Ka){var Kb=Wb;Wb=Ka;Ka=Kb}Kc>cb&&(Kb=Kc,Kc=cb,cb=Kb);La=ea(Wb);Ob=ea(Ka);Bb=~~((La+Ob)/2);ec=ea(Kc);Ic=ea(cb);sc=~~((ec+Ic)/2);for(Kb=Bb;Kb>=La;--Kb)for(fb=sc;fb>=ec;--fb)(Xb=Ia(Kb,fb,
Ha,Pa,Va))&&([ub.x,ub.y,Ha,Ca]=Xb);for(Kb=Bb;Kb<=Ob;++Kb)for(fb=sc;fb<=Ic;++fb)(Xb=Ia(Kb,fb,Ha,Pa,Va))&&([ub.x,ub.y,Ha,Ca]=Xb);Ca||R||(Kb=Math.abs(Ka-Wb+cb-Kc),Wb=(Wb+Ka)/2,Kc=(Kc+cb)/2,Kb>=Ga&&!P(Wb,Kc,Pa,Va,Ma,Ta)&&!z(ea,Wb,Kc,Va,Pa,Va,ab,null)&&(Ga=Kb,ub.x=Wb,ub.y=Kc,Aa=!0))}return Ca||Aa?(Wb=Pa/2,Kc=Va/2,ab.setRange(ea(ub.x-Wb),ea(ub.y-Kc),ea(ub.x+Wb),ea(ub.y+Kc)),ub.align="center",ub.baseline="middle",!0):!1}},floodfill:function(ea,D,R,la){const Ia=ea.width,Ma=ea.height,Ta=D[0],ab=D[1],db=ea.bitmap();
return function(ub){const pb=ub.datum.datum.items[la].items,Ya=pb.length,Va=ub.datum.fontSize,Pa=w.textMetrics.width(ub.datum,ub.datum.text),Ha=[];let Ca=R?Va:0,Aa=!1,Ga=!1,Ka=0,cb,fb,La,Bb,Ob,ec;var sc;for(let Wb=0;Wb<Ya;++Wb){cb=pb[Wb].x;La=pb[Wb].y;fb=void 0===pb[Wb].x2?cb:pb[Wb].x2;Bb=void 0===pb[Wb].y2?La:pb[Wb].y2;for(Ha.push([ea((cb+fb)/2),ea((La+Bb)/2)]);Ha.length;)if([Ic,Xb]=Ha.pop(),!(Ta.get(Ic,Xb)||ab.get(Ic,Xb)||db.get(Ic,Xb))){db.set(Ic,Xb);for(sc=0;4>sc;++sc)Ob=Ic+fa[sc],ec=Xb+wa[sc],
db.outOfBounds(Ob,ec,Ob,ec)||Ha.push([Ob,ec]);Ob=ea.invert(Ic);ec=ea.invert(Xb);var Ic=Ca;var Xb=Ma;if(!P(Ob,ec,Pa,Va,Ia,Ma)&&!z(ea,Ob,ec,Va,Pa,Ic,Ta,ab)&&!z(ea,Ob,ec,Va,Pa,Va,Ta,null)){for(;1<=Xb-Ic;)sc=(Ic+Xb)/2,z(ea,Ob,ec,Va,Pa,sc,Ta,ab)?Xb=sc:Ic=sc;Ic>Ca&&(ub.x=Ob,ub.y=ec,Ca=Ic,Aa=!0)}}Aa||R||(Ic=Math.abs(fb-cb+Bb-La),Ob=(cb+fb)/2,ec=(La+Bb)/2,Ic>=Ka&&!P(Ob,ec,Pa,Va,Ia,Ma)&&!z(ea,Ob,ec,Va,Pa,Va,Ta,null)&&(Ka=Ic,ub.x=Ob,ub.y=ec,Ga=!0))}return Aa||Ga?(Ob=Pa/2,ec=Va/2,Ta.setRange(ea(ub.x-Ob),ea(ub.y-
ec),ea(ub.x+Ob),ea(ub.y+ec)),ub.align="center",ub.baseline="middle",!0):!1}}},H=["x","y","opacity","align","baseline"],oa="top-left left bottom-left top bottom top-right right bottom-right".split(" ");K.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:oa},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",
type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:H.length,default:H}]};I.inherits(K,x.Transform,{transform(ea,D){function R(Ma){Ma=ea[Ma];return I.isFunction(Ma)&&D.modified(Ma.fields)}const la=ea.modified();if(la||D.changed(D.ADD_REM)||R("sort")){ea.size&&2===ea.size.length||I.error("Size parameter should be specified as a [width, height] array.");
var Ia=ea.as||H;Y(D.materialize(D.SOURCE).source||[],ea.size,ea.sort,I.array(null==ea.offset?1:ea.offset),I.array(ea.anchor||oa),ea.avoidMarks||[],!1!==ea.avoidBaseMark,ea.lineAnchor||"end",ea.markIndex||0,void 0===ea.padding?0:ea.padding,ea.method||"naive").forEach(Ma=>{const Ta=Ma.datum;Ta[Ia[0]]=Ma.x;Ta[Ia[1]]=Ma.y;Ta[Ia[2]]=Ma.opacity;Ta[Ia[3]]=Ma.align;Ta[Ia[4]]=Ma.baseline});return D.reflow(la).modifies(Ia)}}});A.label=K})};
shadow$provide[439]=function(ob,Ba,Gb,Ea){(function(A,w){"object"===typeof Ea&&"undefined"!==typeof Gb?w(Ea,Ba(427),Ba(426),Ba(421)):"function"===typeof define&&define.amd?define(["exports","vega-statistics","vega-dataflow","vega-util"],w):(A="undefined"!==typeof globalThis?globalThis:A||self,w(A.vega={},A.vega,A.vega,A.vega))})(this,function(A,w,u,x){function I(U,X){var V=[],P=function(J){return J(Q)},z;if(null==X)V.push(U);else{var G={};var Y=0;for(z=U.length;Y<z;++Y){var Q=U[Y];var ja=X.map(P);
var pa=G[ja];pa||(G[ja]=pa=[],pa.dims=ja,V.push(pa));pa.push(Q)}}return V}function B(U){u.Transform.call(this,null,U)}function N(U){u.Transform.call(this,null,U)}B.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number","default":.3},{name:"as",type:"string",array:!0}]};x.inherits(B,u.Transform,{transform(U,X){const V=X.fork(X.NO_SOURCE|X.NO_FIELDS);if(!this.value||
X.changed()||U.modified()){X=X.materialize(X.SOURCE).source;X=I(X,U.groupby);const P=(U.groupby||[]).map(x.accessorName),z=P.length,G=U.as||[x.accessorName(U.x),x.accessorName(U.y)],Y=[];X.forEach(Q=>{w.regressionLoess(Q,U.x,U.y,U.bandwidth||.3).forEach(ja=>{const pa={};for(let J=0;J<z;++J)pa[P[J]]=Q.dims[J];pa[G[0]]=ja[0];pa[G[1]]=ja[1];Y.push(u.ingest(pa))})});this.value&&(V.rem=this.value);this.value=V.add=V.source=Y}return V}});const da={constant:w.regressionConstant,linear:w.regressionLinear,
log:w.regressionLog,exp:w.regressionExp,pow:w.regressionPow,quad:w.regressionQuad,poly:w.regressionPoly};N.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string","default":"linear",values:Object.keys(da)},{name:"order",type:"number","default":3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean","default":!1},{name:"as",type:"string",
array:!0}]};x.inherits(N,u.Transform,{transform(U,X){const V=X.fork(X.NO_SOURCE|X.NO_FIELDS);if(!this.value||X.changed()||U.modified()){var P=X.materialize(X.SOURCE).source;P=I(P,U.groupby);const z=(U.groupby||[]).map(x.accessorName),G=U.method||"linear",Y=null==U.order?3:U.order,Q="poly"===G?Y:"quad"===G?2:1,ja=U.as||[x.accessorName(U.x),x.accessorName(U.y)],pa=da[G],J=[];let K=U.extent;x.hasOwnProperty(da,G)||x.error("Invalid regression method: "+G);null!=K&&"log"===G&&0>=K[0]&&(X.dataflow.warn("Ignoring extent with values \x3c\x3d 0 for log regression."),
K=null);P.forEach(ba=>{if(ba.length<=Q)X.dataflow.warn("Skipping regression with more parameters than data points.");else{var O=pa(ba,U.x,U.y,Y);if(U.params)J.push(u.ingest({keys:ba.dims,coef:O.coef,rSquared:O.rSquared}));else{var fa=K||x.extent(ba,U.x),wa=ta=>{const aa={};for(let ha=0;ha<z.length;++ha)aa[z[ha]]=ba.dims[ha];aa[ja[0]]=ta[0];aa[ja[1]]=ta[1];J.push(u.ingest(aa))};"linear"===G||"constant"===G?fa.forEach(ta=>wa([ta,O.predict(ta)])):w.sampleCurve(O.predict,fa,25,200).forEach(wa)}}});this.value&&
(V.rem=this.value);this.value=V.add=V.source=J}return V}});A.loess=B;A.regression=N})};
shadow$provide[440]=function(ob,Ba,Gb,Ea){(function(A,w){"object"===typeof Ea&&"undefined"!==typeof Gb?w(Ea,Ba(426),Ba(421)):"function"===typeof define&&define.amd?define(["exports","vega-dataflow","vega-util"],w):(A="undefined"!==typeof globalThis?globalThis:A||self,w((A.vega=A.vega||{},A.vega.transforms={}),A.vega,A.vega))})(this,function(A,w,u){function x(D,R,la,Ia,Ma){let Ta,ab;let db=R[0],ub=Ia[0],pb=0,Ya=0;ub>db===ub>-db?(Ta=db,db=R[++pb]):(Ta=ub,ub=Ia[++Ya]);let Va=0;if(pb<D&&Ya<la){if(ub>
db===ub>-db){ab=db+Ta;var Pa=Ta-(ab-db);db=R[++pb]}else ab=ub+Ta,Pa=Ta-(ab-ub),ub=Ia[++Ya];Ta=ab;for(0!==Pa&&(Ma[Va++]=Pa);pb<D&&Ya<la;)ub>db===ub>-db?(ab=Ta+db,Pa=ab-Ta,Pa=Ta-(ab-Pa)+(db-Pa),db=R[++pb]):(ab=Ta+ub,Pa=ab-Ta,Pa=Ta-(ab-Pa)+(ub-Pa),ub=Ia[++Ya]),Ta=ab,0!==Pa&&(Ma[Va++]=Pa)}for(;pb<D;)ab=Ta+db,Pa=ab-Ta,Pa=Ta-(ab-Pa)+(db-Pa),db=R[++pb],Ta=ab,0!==Pa&&(Ma[Va++]=Pa);for(;Ya<la;)ab=Ta+ub,Pa=ab-Ta,Pa=Ta-(ab-Pa)+(ub-Pa),ub=Ia[++Ya],Ta=ab,0!==Pa&&(Ma[Va++]=Pa);if(0!==Ta||0===Va)Ma[Va++]=Ta;return Va}
function I(D,R,la,Ia,Ma,Ta){var ab=(R-Ta)*(la-Ma),db=(D-Ma)*(Ia-Ta),ub=ab-db;if(0===ab||0===db||0<ab!==0<db)return ub;ab=Math.abs(ab+db);if(Math.abs(ub)>=3.3306690738754716E-16*ab)return ub;{let Aa;ub=D-Ma;const Ga=la-Ma;db=R-Ta;const Ka=Ia-Ta;var pb=ub*Ka;var Ya=134217729*ub;var Va=Ya-(Ya-ub);var Pa=ub-Va;Ya=134217729*Ka;Ya-=Ya-Ka;Aa=Ka-Ya;var Ha=Pa*Aa-(pb-Va*Ya-Pa*Ya-Va*Aa);var Ca=db*Ga;Ya=134217729*db;Va=Ya-(Ya-db);Pa=db-Va;Ya=134217729*Ga;Ya-=Ya-Ga;Aa=Ga-Ya;Ya=Pa*Aa-(Ca-Va*Ya-Pa*Ya-Va*Aa);Pa=
Ha-Ya;Va=Ha-Pa;ja[0]=Ha-(Pa+Va)+(Va-Ya);Ha=pb+Pa;Va=Ha-pb;pb=pb-(Ha-Va)+(Pa-Va);Pa=pb-Ca;Va=pb-Pa;ja[1]=pb-(Pa+Va)+(Va-Ca);Ca=Ha+Pa;Va=Ca-Ha;ja[2]=Ha-(Ca-Va)+(Pa-Va);ja[3]=Ca;Ca=ja[0];for(pb=1;4>pb;pb++)Ca+=ja[pb];pb=2.2204460492503146E-16*ab;Ca>=pb||-Ca>=pb?Ia=Ca:(Va=D-ub,D=D-(ub+Va)+(Va-Ma),Va=la-Ga,la=la-(Ga+Va)+(Va-Ma),Va=R-db,R=R-(db+Va)+(Va-Ta),Va=Ia-Ka,Ia=Ia-(Ka+Va)+(Va-Ta),0===D&&0===R&&0===la&&0===Ia?Ia=Ca:(pb=1.1093356479670487E-31*ab+3.3306690738754706E-16*Math.abs(Ca),Ca+=ub*Ia+Ka*D-(db*
la+Ga*R),Ca>=pb||-Ca>=pb?Ia=Ca:(pb=D*Ka,Ya=134217729*D,Va=Ya-(Ya-D),Pa=D-Va,Ya=134217729*Ka,Ya-=Ya-Ka,Aa=Ka-Ya,Ha=Pa*Aa-(pb-Va*Ya-Pa*Ya-Va*Aa),Ca=R*Ga,Ya=134217729*R,Va=Ya-(Ya-R),Pa=R-Va,Ya=134217729*Ga,Ya-=Ya-Ga,Aa=Ga-Ya,Ya=Pa*Aa-(Ca-Va*Ya-Pa*Ya-Va*Aa),Pa=Ha-Ya,Va=Ha-Pa,ba[0]=Ha-(Pa+Va)+(Va-Ya),Ha=pb+Pa,Va=Ha-pb,pb=pb-(Ha-Va)+(Pa-Va),Pa=pb-Ca,Va=pb-Pa,ba[1]=pb-(Pa+Va)+(Va-Ca),Ca=Ha+Pa,Va=Ca-Ha,ba[2]=Ha-(Ca-Va)+(Pa-Va),ba[3]=Ca,Ta=x(4,ja,4,ba,pa),pb=ub*Ia,Ya=134217729*ub,Va=Ya-(Ya-ub),Pa=ub-Va,Ya=
134217729*Ia,Ya-=Ya-Ia,Aa=Ia-Ya,Ha=Pa*Aa-(pb-Va*Ya-Pa*Ya-Va*Aa),Ca=db*la,Ya=134217729*db,Va=Ya-(Ya-db),Pa=db-Va,Ya=134217729*la,Ya-=Ya-la,Aa=la-Ya,Ya=Pa*Aa-(Ca-Va*Ya-Pa*Ya-Va*Aa),Pa=Ha-Ya,Va=Ha-Pa,ba[0]=Ha-(Pa+Va)+(Va-Ya),Ha=pb+Pa,Va=Ha-pb,pb=pb-(Ha-Va)+(Pa-Va),Pa=pb-Ca,Va=pb-Pa,ba[1]=pb-(Pa+Va)+(Va-Ca),Ca=Ha+Pa,Va=Ca-Ha,ba[2]=Ha-(Ca-Va)+(Pa-Va),ba[3]=Ca,Ta=x(Ta,pa,4,ba,J),pb=D*Ia,Ya=134217729*D,Va=Ya-(Ya-D),Pa=D-Va,Ya=134217729*Ia,Ya-=Ya-Ia,Aa=Ia-Ya,Ha=Pa*Aa-(pb-Va*Ya-Pa*Ya-Va*Aa),Ca=R*la,Ya=134217729*
R,Va=Ya-(Ya-R),Pa=R-Va,Ya=134217729*la,Ya-=Ya-la,Aa=la-Ya,Ya=Pa*Aa-(Ca-Va*Ya-Pa*Ya-Va*Aa),Pa=Ha-Ya,Va=Ha-Pa,ba[0]=Ha-(Pa+Va)+(Va-Ya),Ha=pb+Pa,Va=Ha-pb,pb=pb-(Ha-Va)+(Pa-Va),Pa=pb-Ca,Va=pb-Pa,ba[1]=pb-(Pa+Va)+(Va-Ca),Ca=Ha+Pa,Va=Ca-Ha,ba[2]=Ha-(Ca-Va)+(Pa-Va),ba[3]=Ca,Ia=x(Ta,J,4,ba,K),Ia=K[Ia-1])))}return-Ia}function B(D,R,la,Ia){D-=la;R-=Ia;return D*D+R*R}function N(D,R,la,Ia){if(20>=Ia-la)for(var Ma=la+1;Ma<=Ia;Ma++){for(var Ta=D[Ma],ab=R[Ta],db=Ma-1;db>=la&&R[D[db]]>ab;)D[db+1]=D[db--];D[db+1]=
Ta}else{Ma=la+1;Ta=Ia;da(D,la+Ia>>1,Ma);R[D[la]]>R[D[Ia]]&&da(D,la,Ia);R[D[Ma]]>R[D[Ia]]&&da(D,Ma,Ia);R[D[la]]>R[D[Ma]]&&da(D,la,Ma);ab=D[Ma];for(db=R[ab];;){do Ma++;while(R[D[Ma]]<db);do Ta--;while(R[D[Ta]]>db);if(Ta<Ma)break;da(D,Ma,Ta)}D[la+1]=D[Ta];D[Ta]=ab;Ia-Ma+1>=Ta-la?(N(D,R,Ma,Ia),N(D,R,la,Ta-1)):(N(D,R,la,Ta-1),N(D,R,Ma,Ia))}}function da(D,R,la){const Ia=D[R];D[R]=D[la];D[la]=Ia}function U(D){return D[0]}function X(D){return D[1]}function V(D){return D[0]}function P(D){return D[1]}function z(D){const {triangles:R,
coords:la}=D;for(D=0;D<R.length;D+=3){const Ia=2*R[D],Ma=2*R[D+1],Ta=2*R[D+2];if(1E-10<(la[Ta]-la[Ia])*(la[Ma+1]-la[Ia+1])-(la[Ma]-la[Ia])*(la[Ta+1]-la[Ia+1]))return!1}return!0}function G(D,R,la){return[D+Math.sin(D+R)*la,R+Math.cos(D-R)*la]}function*Y(D,R,la,Ia){let Ma=0;for(const Ta of D)yield R.call(Ia,Ta,Ma,D),yield la.call(Ia,Ta,Ma,D),++Ma}function Q(D){w.Transform.call(this,null,D)}const ja=new Float64Array(4),pa=new Float64Array(8),J=new Float64Array(12),K=new Float64Array(16),ba=new Float64Array(4),
O=Math.pow(2,-52),fa=new Uint32Array(512);class wa{static from(D,R=U,la=X){const Ia=D.length,Ma=new Float64Array(2*Ia);for(let Ta=0;Ta<Ia;Ta++){const ab=D[Ta];Ma[2*Ta]=R(ab);Ma[2*Ta+1]=la(ab)}return new wa(Ma)}constructor(D){const R=D.length>>1;if(0<R&&"number"!==typeof D[0])throw Error("Expected coords to contain numbers.");this.coords=D;D=Math.max(2*R-5,0);this._triangles=new Uint32Array(3*D);this._halfedges=new Int32Array(3*D);this._hashSize=Math.ceil(Math.sqrt(R));this._hullPrev=new Uint32Array(R);
this._hullNext=new Uint32Array(R);this._hullTri=new Uint32Array(R);this._hullHash=(new Int32Array(this._hashSize)).fill(-1);this._ids=new Uint32Array(R);this._dists=new Float64Array(R);this.update()}update(){const {coords:D,_hullPrev:R,_hullNext:la,_hullTri:Ia,_hullHash:Ma}=this;var Ta=D.length>>1,ab=Infinity,db=Infinity,ub=-Infinity,pb=-Infinity;for(var Ya=0;Ya<Ta;Ya++){var Va=D[2*Ya];var Pa=D[2*Ya+1];Va<ab&&(ab=Va);Pa<db&&(db=Pa);Va>ub&&(ub=Va);Pa>pb&&(pb=Pa);this._ids[Ya]=Ya}ub=(ab+ub)/2;db=(db+
pb)/2;ab=Infinity;for(pb=0;pb<Ta;pb++)if(Ya=B(ub,db,D[2*pb],D[2*pb+1]),Ya<ab){var Ha=pb;ab=Ya}db=D[2*Ha];pb=D[2*Ha+1];ab=Infinity;for(ub=0;ub<Ta;ub++)if(ub!==Ha&&(Ya=B(db,pb,D[2*ub],D[2*ub+1]),Ya<ab&&0<Ya)){var Ca=ub;ab=Ya}ab=D[2*Ca];ub=D[2*Ca+1];Pa=Infinity;for(Ya=0;Ya<Ta;Ya++)if(Ya!==Ha&&Ya!==Ca){Va=ab-db;var Aa=ub-pb;var Ga=D[2*Ya]-db;var Ka=D[2*Ya+1]-pb,cb=Va*Va+Aa*Aa,fb=Ga*Ga+Ka*Ka,La=.5/(Va*Ka-Aa*Ga);Aa=(Ka*cb-Aa*fb)*La;Va=(Va*fb-Ga*cb)*La;Va=Aa*Aa+Va*Va;if(Va<Pa){var Bb=Ya;Pa=Va}}Ya=D[2*Bb];
Va=D[2*Bb+1];if(Infinity===Pa){for(Ha=0;Ha<Ta;Ha++)this._dists[Ha]=D[2*Ha]-D[0]||D[2*Ha+1]-D[1];N(this._ids,this._dists,0,Ta-1);Ha=new Uint32Array(Ta);Ca=0;for(let Ob=0,ec=-Infinity;Ob<Ta;Ob++)Bb=this._ids[Ob],this._dists[Bb]>ec&&(Ha[Ca++]=Bb,ec=this._dists[Bb]);this.hull=Ha.subarray(0,Ca);this.triangles=new Uint32Array(0);this.halfedges=new Uint32Array(0)}else{0>I(db,pb,ab,ub,Ya,Va)&&(Pa=Ca,Ga=ab,cb=ub,Ca=Bb,ab=Ya,ub=Va,Bb=Pa,Ya=Ga,Va=cb);Ga=ab-db;Pa=ub-pb;cb=Ya-db;Ka=Va-pb;fb=Ga*Ga+Pa*Pa;La=cb*
cb+Ka*Ka;Aa=.5/(Ga*Ka-Pa*cb);Pa=db+(Ka*fb-Pa*La)*Aa;Ga=pb+(Ga*La-cb*fb)*Aa;this._cx=Pa;this._cy=Ga;for(cb=0;cb<Ta;cb++)this._dists[cb]=B(D[2*cb],D[2*cb+1],Pa,Ga);N(this._ids,this._dists,0,Ta-1);this._hullStart=Ha;Ta=3;la[Ha]=R[Bb]=Ca;la[Ca]=R[Ha]=Bb;la[Bb]=R[Ca]=Ha;Ia[Ha]=0;Ia[Ca]=1;Ia[Bb]=2;Ma.fill(-1);Ma[this._hashKey(db,pb)]=Ha;Ma[this._hashKey(ab,ub)]=Ca;Ma[this._hashKey(Ya,Va)]=Bb;this.trianglesLen=0;this._addTriangle(Ha,Ca,Bb,-1,-1,-1);for(let Ob=0,ec,sc;Ob<this._ids.length;Ob++){db=this._ids[Ob];
pb=D[2*db];ab=D[2*db+1];if(0<Ob&&Math.abs(pb-ec)<=O&&Math.abs(ab-sc)<=O)continue;ec=pb;sc=ab;if(db===Ha||db===Ca||db===Bb)continue;ub=0;for(let Xb=0,Wb=this._hashKey(pb,ab);Xb<this._hashSize&&(ub=Ma[(Wb+Xb)%this._hashSize],-1===ub||ub===la[ub]);Xb++);Ya=ub=R[ub];let Ic;for(;Ic=la[Ya],0<=I(pb,ab,D[2*Ya],D[2*Ya+1],D[2*Ic],D[2*Ic+1]);)if(Ya=Ic,Ya===ub){Ya=-1;break}if(-1!==Ya){Va=this._addTriangle(Ya,db,la[Ya],-1,-1,Ia[Ya]);Ia[db]=this._legalize(Va+2);Ia[Ya]=Va;Ta++;for(Pa=la[Ya];Ic=la[Pa],0>I(pb,ab,
D[2*Pa],D[2*Pa+1],D[2*Ic],D[2*Ic+1]);)Va=this._addTriangle(Pa,db,Ic,Ia[db],-1,Ia[Pa]),Ia[db]=this._legalize(Va+2),la[Pa]=Pa,Ta--,Pa=Ic;if(Ya===ub)for(;Ic=R[Ya],0>I(pb,ab,D[2*Ic],D[2*Ic+1],D[2*Ya],D[2*Ya+1]);)Va=this._addTriangle(Ic,db,Ya,-1,Ia[Ya],Ia[Ic]),this._legalize(Va+2),Ia[Ic]=Va,la[Ya]=Ya,Ta--,Ya=Ic;this._hullStart=R[db]=Ya;la[Ya]=R[Pa]=db;la[db]=Pa;Ma[this._hashKey(pb,ab)]=db;Ma[this._hashKey(D[2*Ya],D[2*Ya+1])]=Ya}}this.hull=new Uint32Array(Ta);for(let Ob=0,ec=this._hullStart;Ob<Ta;Ob++)this.hull[Ob]=
ec,ec=la[ec];this.triangles=this._triangles.subarray(0,this.trianglesLen);this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}}_hashKey(D,R){var la=Math;D-=this._cx;R-=this._cy;D/=Math.abs(D)+Math.abs(R);return la.floor.call(la,(0<R?3-D:1+D)/4*this._hashSize)%this._hashSize}_legalize(D){const {_triangles:R,_halfedges:la,coords:Ia}=this;let Ma=0;for(var Ta;;){const Pa=la[D];var ab=D-D%3;Ta=ab+(D+2)%3;if(-1===Pa){if(0===Ma)break;D=fa[--Ma];continue}const Ha=Pa-Pa%3,Ca=Ha+(Pa+2)%3;var db=R[Ta],
ub=R[D],pb=R[ab+(D+1)%3];ab=R[Ca];var Ya=Ia[2*ab],Va=Ia[2*ab+1];const Aa=Ia[2*db]-Ya,Ga=Ia[2*db+1]-Va,Ka=Ia[2*ub]-Ya;ub=Ia[2*ub+1]-Va;Ya=Ia[2*pb]-Ya;Va=Ia[2*pb+1]-Va;pb=Ka*Ka+ub*ub;const cb=Ya*Ya+Va*Va;if(0>Aa*(ub*cb-pb*Va)-Ga*(Ka*cb-pb*Ya)+(Aa*Aa+Ga*Ga)*(Ka*Va-ub*Ya)){R[D]=ab;R[Pa]=db;db=la[Ca];if(-1===db){ab=this._hullStart;do{if(this._hullTri[ab]===Ca){this._hullTri[ab]=D;break}ab=this._hullPrev[ab]}while(ab!==this._hullStart)}this._link(D,db);this._link(Pa,la[Ta]);this._link(Ta,Ca);Ta=Ha+(Pa+
1)%3;Ma<fa.length&&(fa[Ma++]=Ta)}else{if(0===Ma)break;D=fa[--Ma]}}return Ta}_link(D,R){this._halfedges[D]=R;-1!==R&&(this._halfedges[R]=D)}_addTriangle(D,R,la,Ia,Ma,Ta){const ab=this.trianglesLen;this._triangles[ab]=D;this._triangles[ab+1]=R;this._triangles[ab+2]=la;this._link(ab,Ia);this._link(ab+1,Ma);this._link(ab+2,Ta);this.trianglesLen+=3;return ab}}class ta{constructor(){this._x0=this._y0=this._x1=this._y1=null;this._=""}moveTo(D,R){this._+=`M${this._x0=this._x1=+D},${this._y0=this._y1=+R}`}closePath(){null!==
this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(D,R){this._+=`L${this._x1=+D},${this._y1=+R}`}arc(D,R,la){D=+D;R=+R;la=+la;const Ia=D+la,Ma=R;if(0>la)throw Error("negative radius");if(null===this._x1)this._+=`M${Ia},${Ma}`;else if(1E-6<Math.abs(this._x1-Ia)||1E-6<Math.abs(this._y1-Ma))this._+="L"+Ia+","+Ma;la&&(this._+=`A${la},${la},0,1,1,${D-la},${R}A${la},${la},0,1,1,${this._x1=Ia},${this._y1=Ma}`)}rect(D,R,la,Ia){this._+=`M${this._x0=this._x1=+D},${this._y0=this._y1=+R}h${+la}v${+Ia}h${-la}Z`}value(){return this._||
null}}class aa{constructor(){this._=[]}moveTo(D,R){this._.push([D,R])}closePath(){this._.push(this._[0].slice())}lineTo(D,R){this._.push([D,R])}value(){return this._.length?this._:null}}let ha=class{constructor(D,[R,la,Ia,Ma]=[0,0,960,500]){if(!((Ia=+Ia)>=(R=+R)&&(Ma=+Ma)>=(la=+la)))throw Error("invalid bounds");this.delaunay=D;this._circumcenters=new Float64Array(2*D.points.length);this.vectors=new Float64Array(2*D.points.length);this.xmax=Ia;this.xmin=R;this.ymax=Ma;this.ymin=la;this._init()}update(){this.delaunay.update();
this._init();return this}_init(){const {delaunay:{points:D,hull:R,triangles:la},vectors:Ia}=this;var Ma,Ta=this.circumcenters=this._circumcenters.subarray(0,la.length/3*2);for(let Aa=0,Ga=0,Ka=la.length,cb,fb;Aa<Ka;Aa+=3,Ga+=2){var ab=2*la[Aa],db=2*la[Aa+1],ub=2*la[Aa+2],pb=D[ab];ab=D[ab+1];var Ya=D[ub],Va=D[ub+1];ub=D[db]-pb;const La=D[db+1]-ab;db=Ya-pb;const Bb=Va-ab;var Pa=2*(ub*Bb-La*db);if(1E-9>Math.abs(Pa)){if(void 0===Ha){var Ha=Ma=0;for(var Ca of R)Ha+=D[2*Ca],Ma+=D[2*Ca+1];Ha/=R.length;Ma/=
R.length}ub=1E9*Math.sign((Ha-pb)*Bb-(Ma-ab)*db);cb=(pb+Ya)/2-ub*Bb;fb=(ab+Va)/2+ub*db}else Ya=1/Pa,Va=ub*ub+La*La,Pa=db*db+Bb*Bb,cb=pb+(Bb*Va-La*Pa)*Ya,fb=ab+(ub*Pa-db*Va)*Ya;Ta[Ga]=cb;Ta[Ga+1]=fb}Ha=R[R.length-1];Ta=4*Ha;Ca=D[2*Ha];ub=D[2*Ha+1];Ia.fill(0);for(db=0;db<R.length;++db)Ha=R[db],Ma=Ta,pb=Ca,ab=ub,Ta=4*Ha,Ca=D[2*Ha],ub=D[2*Ha+1],Ia[Ma+2]=Ia[Ta]=ab-ub,Ia[Ma+3]=Ia[Ta+1]=Ca-pb}render(D){const R=null==D?D=new ta:void 0,{delaunay:{halfedges:la,inedges:Ia,hull:Ma},circumcenters:Ta,vectors:ab}=
this;if(1>=Ma.length)return null;for(let Va=0,Pa=la.length;Va<Pa;++Va){var db=la[Va];if(!(db<Va)){var ub=2*Math.floor(Va/3);db=2*Math.floor(db/3);this._renderSegment(Ta[ub],Ta[ub+1],Ta[db],Ta[db+1],D)}}ub=Ma[Ma.length-1];for(db=0;db<Ma.length;++db){var pb=ub;ub=Ma[db];var Ya=2*Math.floor(Ia[ub]/3);const Va=Ta[Ya];Ya=Ta[Ya+1];pb*=4;(pb=this._project(Va,Ya,ab[pb+2],ab[pb+3]))&&this._renderSegment(Va,Ya,pb[0],pb[1],D)}return R&&R.value()}renderBounds(D){const R=null==D?D=new ta:void 0;D.rect(this.xmin,
this.ymin,this.xmax-this.xmin,this.ymax-this.ymin);return R&&R.value()}renderCell(D,R){const la=null==R?R=new ta:void 0;D=this._clip(D);if(null!==D&&D.length){R.moveTo(D[0],D[1]);for(var Ia=D.length;D[0]===D[Ia-2]&&D[1]===D[Ia-1]&&1<Ia;)Ia-=2;for(let Ma=2;Ma<Ia;Ma+=2)D[Ma]===D[Ma-2]&&D[Ma+1]===D[Ma-1]||R.lineTo(D[Ma],D[Ma+1]);R.closePath();return la&&la.value()}}*cellPolygons(){var {delaunay:{points:D}}=this;for(let R=0,la=D.length/2;R<la;++R)if(D=this.cellPolygon(R))D.index=R,yield D}cellPolygon(D){const R=
new aa;this.renderCell(D,R);return R.value()}_renderSegment(D,R,la,Ia,Ma){const Ta=this._regioncode(D,R),ab=this._regioncode(la,Ia);if(0===Ta&&0===ab)Ma.moveTo(D,R),Ma.lineTo(la,Ia);else if(D=this._clipSegment(D,R,la,Ia,Ta,ab))Ma.moveTo(D[0],D[1]),Ma.lineTo(D[2],D[3])}contains(D,R,la){return(R=+R,R!==R)||(la=+la,la!==la)?!1:this.delaunay._step(D,R,la)===D}*neighbors(D){const R=this._clip(D);if(R)for(const la of this.delaunay.neighbors(D))if(D=this._clip(la))a:for(let Ia=0,Ma=R.length;Ia<Ma;Ia+=2)for(let Ta=
0,ab=D.length;Ta<ab;Ta+=2)if(R[Ia]===D[Ta]&&R[Ia+1]===D[Ta+1]&&R[(Ia+2)%Ma]===D[(Ta+ab-2)%ab]&&R[(Ia+3)%Ma]===D[(Ta+ab-1)%ab]){yield la;break a}}_cell(D){const {circumcenters:R,delaunay:{inedges:la,halfedges:Ia,triangles:Ma}}=this,Ta=la[D];if(-1===Ta)return null;const ab=[];let db=Ta;do{const ub=Math.floor(db/3);ab.push(R[2*ub],R[2*ub+1]);db=2===db%3?db-2:db+1;if(Ma[db]!==D)break;db=Ia[db]}while(db!==Ta&&-1!==db);return ab}_clip(D){if(0===D&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,
this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const R=this._cell(D);if(null===R)return null;const {vectors:la}=this,Ia=4*D;return this._simplify(la[Ia]||la[Ia+1]?this._clipInfinite(D,R,la[Ia],la[Ia+1],la[Ia+2],la[Ia+3]):this._clipFinite(D,R))}_clipFinite(D,R){const la=R.length;let Ia=null;let Ma=R[la-2],Ta=R[la-1];let ab=this._regioncode(Ma,Ta),db=0;for(let Va=0;Va<la;Va+=2){var ub=Ma;var pb=Ta;Ma=R[Va];Ta=R[Va+1];var Ya=ab;ab=this._regioncode(Ma,Ta);if(0===Ya&&0===ab)db=0,Ia?Ia.push(Ma,
Ta):Ia=[Ma,Ta];else{let Pa,Ha;if(0===Ya){if(null===(ub=this._clipSegment(ub,pb,Ma,Ta,Ya,ab)))continue;[pb,Ya,Pa,Ha]=ub}else{if(null===(ub=this._clipSegment(Ma,Ta,ub,pb,ab,Ya)))continue;[Pa,Ha,pb,Ya]=ub;ub=db;db=this._edgecode(pb,Ya);ub&&db&&this._edge(D,ub,db,Ia,Ia.length);Ia?Ia.push(pb,Ya):Ia=[pb,Ya]}ub=db;db=this._edgecode(Pa,Ha);ub&&db&&this._edge(D,ub,db,Ia,Ia.length);Ia?Ia.push(Pa,Ha):Ia=[Pa,Ha]}}if(Ia)ub=db,db=this._edgecode(Ia[0],Ia[1]),ub&&db&&this._edge(D,ub,db,Ia,Ia.length);else if(this.contains(D,
(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return Ia}_clipSegment(D,R,la,Ia,Ma,Ta){const ab=Ma<Ta;for(ab&&([D,R,la,Ia,Ma,Ta]=[la,Ia,D,R,Ta,Ma]);;){if(0===Ma&&0===Ta)return ab?[la,Ia,D,R]:[D,R,la,Ia];if(Ma&Ta)return null;var db=void 0;let ub;db=Ma||Ta;db&8?(db=D+(la-D)*(this.ymax-R)/(Ia-R),ub=this.ymax):db&4?(db=D+(la-D)*(this.ymin-R)/(Ia-R),ub=this.ymin):db&2?(ub=R+(Ia-R)*(this.xmax-D)/(la-D),db=this.xmax):
(ub=R+(Ia-R)*(this.xmin-D)/(la-D),db=this.xmin);Ma?(D=db,R=ub,Ma=this._regioncode(D,R)):(la=db,Ia=ub,Ta=this._regioncode(la,Ia))}}_clipInfinite(D,R,la,Ia,Ma,Ta){R=Array.from(R);let ab;(ab=this._project(R[0],R[1],la,Ia))&&R.unshift(ab[0],ab[1]);(ab=this._project(R[R.length-2],R[R.length-1],Ma,Ta))&&R.push(ab[0],ab[1]);if(R=this._clipFinite(D,R))for(let db=0,ub=R.length,pb,Ya=this._edgecode(R[ub-2],R[ub-1]);db<ub;db+=2)pb=Ya,Ya=this._edgecode(R[db],R[db+1]),pb&&Ya&&(db=this._edge(D,pb,Ya,R,db),ub=R.length);
else this.contains(D,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(R=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return R}_edge(D,R,la,Ia,Ma){for(;R!==la;){let Ta,ab;switch(R){case 5:R=4;continue;case 4:R=6;Ta=this.xmax;ab=this.ymin;break;case 6:R=2;continue;case 2:R=10;Ta=this.xmax;ab=this.ymax;break;case 10:R=8;continue;case 8:R=9;Ta=this.xmin;ab=this.ymax;break;case 9:R=1;continue;case 1:R=5,Ta=this.xmin,ab=this.ymin}Ia[Ma]===Ta&&Ia[Ma+1]===ab||!this.contains(D,
Ta,ab)||(Ia.splice(Ma,0,Ta,ab),Ma+=2)}return Ma}_project(D,R,la,Ia){let Ma=Infinity,Ta,ab,db;if(0>Ia){if(R<=this.ymin)return null;(Ta=(this.ymin-R)/Ia)<Ma&&(db=this.ymin,ab=D+(Ma=Ta)*la)}else if(0<Ia){if(R>=this.ymax)return null;(Ta=(this.ymax-R)/Ia)<Ma&&(db=this.ymax,ab=D+(Ma=Ta)*la)}if(0<la){if(D>=this.xmax)return null;(Ta=(this.xmax-D)/la)<Ma&&(ab=this.xmax,db=R+Ta*Ia)}else if(0>la){if(D<=this.xmin)return null;(Ta=(this.xmin-D)/la)<Ma&&(ab=this.xmin,db=R+Ta*Ia)}return[ab,db]}_edgecode(D,R){return(D===
this.xmin?1:D===this.xmax?2:0)|(R===this.ymin?4:R===this.ymax?8:0)}_regioncode(D,R){return(D<this.xmin?1:D>this.xmax?2:0)|(R<this.ymin?4:R>this.ymax?8:0)}_simplify(D){if(D&&4<D.length){for(let R=0;R<D.length;R+=2){const la=(R+2)%D.length,Ia=(R+4)%D.length;if(D[R]===D[la]&&D[la]===D[Ia]||D[R+1]===D[la+1]&&D[la+1]===D[Ia+1])D.splice(la,2),R-=2}D.length||(D=null)}return D}};const ka=2*Math.PI,H=Math.pow;class oa{static from(D,R=V,la=P,Ia){if("length"in D){const Ma=D.length,Ta=new Float64Array(2*Ma);
for(let ab=0;ab<Ma;++ab){const db=D[ab];Ta[2*ab]=R.call(Ia,db,ab,D);Ta[2*ab+1]=la.call(Ia,db,ab,D)}D=Ta}else D=Float64Array.from(Y(D,R,la,Ia));return new oa(D)}constructor(D){this._delaunator=new wa(D);this.inedges=new Int32Array(D.length/2);this._hullIndex=new Int32Array(D.length/2);this.points=this._delaunator.coords;this._init()}update(){this._delaunator.update();this._init();return this}_init(){var D=this._delaunator;const R=this.points;if(D.hull&&2<D.hull.length&&z(D)){this.collinear=Int32Array.from({length:R.length/
2},(ab,db)=>db).sort((ab,db)=>R[2*ab]-R[2*db]||R[2*ab+1]-R[2*db+1]);D=this.collinear[0];var la=this.collinear[this.collinear.length-1];D=[R[2*D],R[2*D+1],R[2*la],R[2*la+1]];D=1E-8*Math.hypot(D[3]-D[1],D[2]-D[0]);for(let ab=0,db=R.length/2;ab<db;++ab)la=G(R[2*ab],R[2*ab+1],D),R[2*ab]=la[0],R[2*ab+1]=la[1];this._delaunator=new wa(R)}else delete this.collinear;D=this.halfedges=this._delaunator.halfedges;la=this.hull=this._delaunator.hull;const Ia=this.triangles=this._delaunator.triangles,Ma=this.inedges.fill(-1),
Ta=this._hullIndex.fill(-1);for(let ab=0,db=D.length;ab<db;++ab){const ub=Ia[2===ab%3?ab-2:ab+1];if(-1===D[ab]||-1===Ma[ub])Ma[ub]=ab}for(let ab=0,db=la.length;ab<db;++ab)Ta[la[ab]]=ab;2>=la.length&&0<la.length&&(this.triangles=(new Int32Array(3)).fill(-1),this.halfedges=(new Int32Array(3)).fill(-1),this.triangles[0]=la[0],Ma[la[0]]=1,2===la.length&&(Ma[la[1]]=0,this.triangles[1]=la[1],this.triangles[2]=la[1]))}voronoi(D){return new ha(this,D)}*neighbors(D){const {inedges:R,hull:la,_hullIndex:Ia,
halfedges:Ma,triangles:Ta,collinear:ab}=this;if(ab){var db=ab.indexOf(D);0<db&&(yield ab[db-1]);db<ab.length-1&&(yield ab[db+1])}else{var ub=R[D];if(-1!==ub){var pb=ub;do{yield(db=Ta[pb]);pb=2===pb%3?pb-2:pb+1;if(Ta[pb]!==D)break;pb=Ma[pb];if(-1===pb){D=la[(Ia[D]+1)%la.length];D!==db&&(yield D);break}}while(pb!==ub)}}}find(D,R,la=0){if((D=+D,D!==D)||(R=+R,R!==R))return-1;const Ia=la;let Ma;for(;0<=(Ma=this._step(la,D,R))&&Ma!==la&&Ma!==Ia;)la=Ma;return Ma}_step(D,R,la){const {inedges:Ia,hull:Ma,_hullIndex:Ta,
halfedges:ab,triangles:db,points:ub}=this;if(-1===Ia[D]||!ub.length)return(D+1)%(ub.length>>1);let pb=D,Ya=H(R-ub[2*D],2)+H(la-ub[2*D+1],2);const Va=Ia[D];let Pa=Va;do{let Ha=db[Pa];const Ca=H(R-ub[2*Ha],2)+H(la-ub[2*Ha+1],2);Ca<Ya&&(Ya=Ca,pb=Ha);Pa=2===Pa%3?Pa-2:Pa+1;if(db[Pa]!==D)break;Pa=ab[Pa];if(-1===Pa){Pa=Ma[(Ta[D]+1)%Ma.length];if(Pa!==Ha&&H(R-ub[2*Pa],2)+H(la-ub[2*Pa+1],2)<Ya)return Pa;break}}while(Pa!==Va);return pb}render(D){const R=null==D?D=new ta:void 0,{points:la,halfedges:Ia,triangles:Ma}=
this;for(let ab=0,db=Ia.length;ab<db;++ab){var Ta=Ia[ab];if(Ta<ab)continue;const ub=2*Ma[ab];Ta=2*Ma[Ta];D.moveTo(la[ub],la[ub+1]);D.lineTo(la[Ta],la[Ta+1])}this.renderHull(D);return R&&R.value()}renderPoints(D,R){void 0!==R||D&&"function"===typeof D.moveTo||(R=D,D=null);R=void 0==R?2:+R;const la=null==D?D=new ta:void 0,{points:Ia}=this;for(let Ma=0,Ta=Ia.length;Ma<Ta;Ma+=2){const ab=Ia[Ma],db=Ia[Ma+1];D.moveTo(ab+R,db);D.arc(ab,db,R,0,ka)}return la&&la.value()}renderHull(D){const R=null==D?D=new ta:
void 0,{hull:la,points:Ia}=this;var Ma=2*la[0];const Ta=la.length;D.moveTo(Ia[Ma],Ia[Ma+1]);for(Ma=1;Ma<Ta;++Ma){const ab=2*la[Ma];D.lineTo(Ia[ab],Ia[ab+1])}D.closePath();return R&&R.value()}hullPolygon(){const D=new aa;this.renderHull(D);return D.value()}renderTriangle(D,R){const la=null==R?R=new ta:void 0,{points:Ia,triangles:Ma}=this,Ta=2*Ma[D*=3],ab=2*Ma[D+1];D=2*Ma[D+2];R.moveTo(Ia[Ta],Ia[Ta+1]);R.lineTo(Ia[ab],Ia[ab+1]);R.lineTo(Ia[D],Ia[D+1]);R.closePath();return la&&la.value()}*trianglePolygons(){const {triangles:D}=
this;for(let R=0,la=D.length/3;R<la;++R)yield this.trianglePolygon(R)}trianglePolygon(D){const R=new aa;this.renderTriangle(D,R);return R.value()}}Q.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,"default":[[-1E5,-1E5],[1E5,1E5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string","default":"path"}]};const ea=
[-1E5,-1E5,1E5,1E5];u.inherits(Q,w.Transform,{transform(D,R){const la=D.as||"path",Ia=R.source;if(!Ia||!Ia.length)return R;var Ma=D.size;Ma=Ma?[0,0,Ma[0],Ma[1]]:(Ma=D.extent)?[Ma[0][0],Ma[0][1],Ma[1][0],Ma[1][1]]:ea;Ma=this.value=oa.from(Ia,D.x,D.y).voronoi(Ma);for(let db=0,ub=Ia.length;db<ub;++db){var Ta=Ma.cellPolygon(db),ab=Ia[db];if(!Ta||2===Ta.length&&Ta[0][0]===Ta[1][0]&&Ta[0][1]===Ta[1][1])Ta=null;else{const pb=Ta[0][0],Ya=Ta[0][1];let Va=Ta.length-1;for(;Ta[Va][0]===pb&&Ta[Va][1]===Ya;--Va);
Ta="M"+Ta.slice(0,Va+1).join("L")+"Z"}ab[la]=Ta}return R.reflow(D.modified()).modifies(la)}});A.voronoi=Q})};
shadow$provide[441]=function(ob,Ba,Gb,Ea){(function(A,w){"object"===typeof Ea&&"undefined"!==typeof Gb?w(Ea,Ba(429),Ba(426),Ba(421),Ba(430),Ba(427)):"function"===typeof define&&define.amd?define("exports vega-canvas vega-dataflow vega-util vega-scale vega-statistics".split(" "),w):(A="undefined"!==typeof globalThis?globalThis:A||self,w((A.vega=A.vega||{},A.vega.transforms={}),A.vega,A.vega,A.vega,A.vega,A.vega))})(this,function(A,w,u,x,I,B){function N(){function pa(D){D.width=D.height=1;var R=Math.sqrt(D.getContext("2d").getImageData(0,
0,1,1).data.length>>2);D.width=2048/R;D.height=2048/R;D=D.getContext("2d");D.fillStyle=D.strokeStyle="red";D.textAlign="center";return{context:D,ratio:R}}function J(D,R,la){for(var Ia=R.x,Ma=R.y,Ta=Math.sqrt(K[0]*K[0]+K[1]*K[1]),ab=ka(K),db=.5>oa()?1:-1,ub=-db,pb,Ya;pb=ab(ub+=db);){Ya=~~pb[0];pb=~~pb[1];if(Math.min(Math.abs(Ya),Math.abs(pb))>=Ta)break;R.x=Ia+Ya;R.y=Ma+pb;if(!(0>R.x+R.x0||0>R.y+R.y0||R.x+R.x1>K[0]||R.y+R.y1>K[1])){if(!(Ya=!la)){a:{Ya=K[0];Ya>>=5;pb=R.sprite;var Va=R.width>>5;var Pa=
R.x-(Va<<4);for(var Ha=Pa&127,Ca=32-Ha,Aa=R.y1-R.y0,Ga=(R.y+R.y0)*Ya+(Pa>>5),Ka=0;Ka<Aa;Ka++){for(var cb=Pa=0;cb<=Va;cb++)if((Pa<<Ca|(cb<Va?(Pa=pb[Ka*Va+cb])>>>Ha:0))&D[Ga+cb]){Ya=!0;break a}Ga+=Ya}Ya=!1}Ya=!Ya}if(Ya&&(!la||R.x+R.x1>la[0].x&&R.x+R.x0<la[1].x&&R.y+R.y1>la[0].y&&R.y+R.y0<la[1].y)){la=R.sprite;Ia=R.width>>5;Ma=K[0]>>5;ub=R.x-(Ia<<4);Ta=ub&127;ab=32-Ta;db=R.y1-R.y0;ub=(R.y+R.y0)*Ma+(ub>>5);for(pb=0;pb<db;pb++){for(Va=Ya=0;Va<=Ia;Va++)D[ub+Va]=D[ub+Va]|Ya<<ab|(Va<Ia?(Ya=la[pb*Ia+Va])>>>
Ta:0);ub+=Ma}R.sprite=null;return!0}}}return!1}var K=[256,256],ba,O,fa,wa,ta,aa,ha,ka=X,H=[],oa=Math.random,ea={layout:function(){for(var D=pa(w.canvas()),R=V((K[0]>>5)*K[1]),la=null,Ia=H.length,Ma=-1,Ta=[],ab=H.map(ub=>({text:ba(ub),font:O(ub),style:wa(ub),weight:ta(ub),rotate:aa(ub),size:~~(fa(ub)+1E-14),padding:ha(ub),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:ub})).sort((ub,pb)=>pb.size-ub.size);++Ma<Ia;){var db=ab[Ma];db.x=K[0]*(oa()+.5)>>1;db.y=K[1]*(oa()+.5)>>1;da(D,db,
ab,Ma);db.hasText&&J(R,db,la)&&(Ta.push(db),la?U(la,db):la=[{x:db.x+db.x0,y:db.y+db.y0},{x:db.x+db.x1,y:db.y+db.y1}],db.x-=K[0]>>1,db.y-=K[1]>>1)}return Ta},words:function(D){return arguments.length?(H=D,ea):H},size:function(D){return arguments.length?(K=[+D[0],+D[1]],ea):K},font:function(D){return arguments.length?(O=P(D),ea):O},fontStyle:function(D){return arguments.length?(wa=P(D),ea):wa},fontWeight:function(D){return arguments.length?(ta=P(D),ea):ta},rotate:function(D){return arguments.length?
(aa=P(D),ea):aa},text:function(D){return arguments.length?(ba=P(D),ea):ba},spiral:function(D){return arguments.length?(ka=Y[D]||D,ea):ka},fontSize:function(D){return arguments.length?(fa=P(D),ea):fa},padding:function(D){return arguments.length?(ha=P(D),ea):ha},random:function(D){return arguments.length?(oa=D,ea):oa}};return ea}function da(pa,J,K,ba){if(!J.sprite){var O=pa.context,fa=pa.ratio;O.clearRect(0,0,2048/fa,2048/fa);var wa=pa=0,ta=0,aa=K.length;for(--ba;++ba<aa;){J=K[ba];O.save();O.font=J.style+
" "+J.weight+" "+~~((J.size+1)/fa)+"px "+J.font;var ha=O.measureText(J.text+"m").width*fa;var ka=J.size<<1;if(J.rotate){var H=Math.sin(J.rotate*G),oa=Math.cos(J.rotate*G),ea=ha*oa,D=ha*H;oa*=ka;ha=ka*H;ha=Math.max(Math.abs(ea+ha),Math.abs(ea-ha))+31>>5<<5;ka=~~Math.max(Math.abs(D+oa),Math.abs(D-oa))}else ha=ha+31>>5<<5;ka>ta&&(ta=ka);2048<=pa+ha&&(pa=0,wa+=ta,ta=0);if(2048<=wa+ka)break;O.translate((pa+(ha>>1))/fa,(wa+(ka>>1))/fa);J.rotate&&O.rotate(J.rotate*G);O.fillText(J.text,0,0);J.padding&&(O.lineWidth=
2*J.padding,O.strokeText(J.text,0,0));O.restore();J.width=ha;J.height=ka;J.xoff=pa;J.yoff=wa;J.x1=ha>>1;J.y1=ka>>1;J.x0=-J.x1;J.y0=-J.y1;J.hasText=!0;pa+=ha}aa=O.getImageData(0,0,2048/fa,2048/fa).data;for(ea=[];0<=--ba;)if(J=K[ba],J.hasText){ha=J.width;O=ha>>5;ka=J.y1-J.y0;for(fa=0;fa<ka*O;fa++)ea[fa]=0;pa=J.xoff;if(null==pa)break;wa=J.yoff;D=0;H=-1;for(ta=0;ta<ka;ta++){for(fa=0;fa<ha;fa++)oa=aa[2048*(wa+ta)+(pa+fa)<<2]?1<<31-fa%32:0,ea[O*ta+(fa>>5)]|=oa,D|=oa;D?H=ta:(J.y0++,ka--,ta--,wa++)}J.y1=
J.y0+H;J.sprite=ea.slice(0,(J.y1-J.y0)*O)}}}function U(pa,J){var K=pa[0];pa=pa[1];J.x+J.x0<K.x&&(K.x=J.x+J.x0);J.y+J.y0<K.y&&(K.y=J.y+J.y0);J.x+J.x1>pa.x&&(pa.x=J.x+J.x1);J.y+J.y1>pa.y&&(pa.y=J.y+J.y1)}function X(pa){var J=pa[0]/pa[1];return function(K){return[J*(K*=.1)*Math.cos(K),K*Math.sin(K)]}}function V(pa){for(var J=[],K=-1;++K<pa;)J[K]=0;return J}function P(pa){return"function"===typeof pa?pa:function(){return pa}}function z(pa){u.Transform.call(this,N(),pa)}var G=Math.PI/180,Y={archimedean:X,
rectangular:function(pa){var J=4*pa[0]/pa[1],K=0,ba=0;return function(O){var fa=0>O?-1:1;switch(Math.sqrt(1+4*fa*O)-fa&3){case 0:K+=J;break;case 1:ba+=4;break;case 2:K-=J;break;default:ba-=4}return[K,ba]}}};const Q="x y font fontSize fontStyle fontWeight angle".split(" "),ja="text font rotate fontSize fontStyle fontWeight".split(" ");z.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,"default":"sans-serif"},
{name:"fontStyle",type:"string",expr:!0,"default":"normal"},{name:"fontWeight",type:"string",expr:!0,"default":"normal"},{name:"fontSize",type:"number",expr:!0,"default":14},{name:"fontSizeRange",type:"number",array:"nullable","default":[10,50]},{name:"rotate",type:"number",expr:!0,"default":0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,"default":Q}]};x.inherits(z,u.Transform,
{transform(pa,J){function K(ha){ha=pa[ha];return x.isFunction(ha)&&J.modified(ha.fields)}!pa.size||pa.size[0]&&pa.size[1]||x.error("Wordcloud size dimensions must be non-zero.");const ba=pa.modified();if(ba||J.changed(J.ADD_REM)||ja.some(K)){var O=J.materialize(J.SOURCE).source,fa=this.value,wa=pa.as||Q,ta=pa.fontSize||14,aa;x.isFunction(ta)?aa=pa.fontSizeRange:ta=x.constant(ta);if(aa){const ha=ta,ka=I.scale("sqrt")().domain(x.extent(O,ha)).range(aa);ta=H=>ka(ha(H))}O.forEach(ha=>{ha[wa[0]]=NaN;ha[wa[1]]=
NaN;ha[wa[3]]=0});O=fa.words(O).text(pa.text).size(pa.size||[500,500]).padding(pa.padding||1).spiral(pa.spiral||"archimedean").rotate(pa.rotate||0).font(pa.font||"sans-serif").fontStyle(pa.fontStyle||"normal").fontWeight(pa.fontWeight||"normal").fontSize(ta).random(B.random).layout();ta=fa.size();fa=ta[0]>>1;ta=ta[1]>>1;aa=O.length;for(let ha=0,ka,H;ha<aa;++ha)ka=O[ha],H=ka.datum,H[wa[0]]=ka.x+fa,H[wa[1]]=ka.y+ta,H[wa[2]]=ka.font,H[wa[3]]=ka.size,H[wa[4]]=ka.style,H[wa[5]]=ka.weight,H[wa[6]]=ka.rotate;
return J.reflow(ba).modifies(wa)}}});A.wordcloud=z})};
shadow$provide[442]=function(ob,Ba,Gb,Ea){(function(A,w){"object"===typeof Ea&&"undefined"!==typeof Gb?w(Ea,Ba(426),Ba(421)):"function"===typeof define&&define.amd?define(["exports","vega-dataflow","vega-util"],w):(A="undefined"!==typeof globalThis?globalThis:A||self,w((A.vega=A.vega||{},A.vega.transforms={}),A.vega,A.vega))})(this,function(A,w,u){function x(){let O=8,fa=[],wa=new Uint32Array(0),ta=I(0,O),aa=I(0,O);return{data:()=>fa,seen:()=>{var ha=wa;var ka=fa.length;ha.length>=ka||(ka=new ha.constructor(ka),
ka.set(ha),ha=ka);return wa=ha},add(ha){for(let ka=0,H=fa.length,oa=ha.length,ea;ka<oa;++ka)ea=ha[ka],ea._index=H++,fa.push(ea)},remove(ha,ka){const H=fa.length;ha=Array(H-ha);const oa=fa;let ea,D,R;for(D=0;!ka[D]&&D<H;++D)ha[D]=fa[D],oa[D]=D;for(R=D;D<H;++D)ea=fa[D],ka[D]?oa[D]=-1:(oa[D]=R,ta[R]=ta[D],aa[R]=aa[D],ha[R]=ea,ea._index=R++),ta[D]=0;fa=ha;return oa},size:()=>fa.length,curr:()=>ta,prev:()=>aa,reset:ha=>aa[ha]=ta[ha],all:()=>257>O?255:65537>O?65535:4294967295,set(ha,ka){ta[ha]|=ka},clear(ha,
ka){ta[ha]&=~ka},resize(ha,ka){if(ha>ta.length||ka>O)O=Math.max(ka,O),ta=I(ha,O,ta),aa=I(ha,O)}}}function I(O,fa,wa){O=(257>fa?Q:65537>fa?ja:pa)(O);wa&&O.set(wa);return O}function B(O,fa,wa){const ta=1<<fa;return{one:ta,zero:~ta,range:wa.slice(),bisect:O.bisect,index:O.index,size:O.size,onAdd(aa,ha){var ka=this.bisect(this.range,aa.value);aa=aa.index;const H=ka[0];ka=ka[1];const oa=aa.length;let ea;for(ea=0;ea<H;++ea)ha[aa[ea]]|=ta;for(ea=ka;ea<oa;++ea)ha[aa[ea]]|=ta;return this}}}function N(O,fa){return null==
O||null==fa?NaN:O<fa?-1:O>fa?1:O>=fa?0:NaN}function da(O,fa){return null==O||null==fa?NaN:fa<O?-1:fa>O?1:fa>=O?0:NaN}function U(O){function fa(ha,ka,H=0,oa=ha.length){if(H<oa){if(0!==wa(ka,ka))return oa;do{const ea=H+oa>>>1;0>ta(ha[ea],ka)?H=ea+1:oa=ea}while(H<oa)}return H}let wa,ta,aa;2!==O.length?(wa=N,ta=(ha,ka)=>N(O(ha),ka),aa=(ha,ka)=>O(ha)-ka):(wa=O===N||O===da?O:X,aa=ta=O);return{left:fa,center:function(ha,ka,H=0,oa=ha.length){oa=fa(ha,ka,H,oa-1);return oa>H&&aa(ha[oa-1],ka)>-aa(ha[oa],ka)?
oa-1:oa},right:function(ha,ka,H=0,oa=ha.length){if(H<oa){if(0!==wa(ka,ka))return oa;do{const ea=H+oa>>>1;0>=ta(ha[ea],ka)?H=ea+1:oa=ea}while(H<oa)}return H}}}function X(){return 0}function V(O,fa){return Array.from(fa,wa=>O[wa])}function P(){let O=new Uint32Array(0),fa=[],wa=0;return{insert:function(ta,aa,ha){if(!aa.length)return[];const ka=wa,H=aa.length,oa=new Uint32Array(H);let ea=Array(H);var D;for(D=0;D<H;++D)ea[D]=ta(aa[D]),oa[D]=D;ea=z(ea,oa);if(ka){ta=fa;aa=O;fa=Array(ka+H);O=new Uint32Array(ka+
H);D=ea;var R=fa,la=O;let Ia=0,Ma=0,Ta;for(Ta=0;Ia<ka&&Ma<H;++Ta)ta[Ia]<D[Ma]?(R[Ta]=ta[Ia],la[Ta]=aa[Ia++]):(R[Ta]=D[Ma],la[Ta]=oa[Ma++]+ha);for(;Ia<ka;++Ia,++Ta)R[Ta]=ta[Ia],la[Ta]=aa[Ia];for(;Ma<H;++Ma,++Ta)R[Ta]=D[Ma],la[Ta]=oa[Ma]+ha}else{if(0<ha)for(D=0;D<H;++D)oa[D]+=ha;fa=ea;O=oa}wa=ka+H;return{index:oa,value:ea}},remove:function(ta,aa){const ha=wa;let ka,H,oa;for(H=0;!aa[O[H]]&&H<ha;++H);for(oa=H;H<ha;++H)aa[ka=O[H]]||(O[oa]=ka,fa[oa]=fa[H],++oa);wa=ha-ta},bisect:function(ta,aa){let ha;aa?
ha=aa.length:(aa=fa,ha=wa);return[ba(aa,ta[0],0,ha),K(aa,ta[1],0,ha)]},reindex:function(ta){for(let aa=0,ha=wa;aa<ha;++aa)O[aa]=ta[O[aa]]},index:()=>O,size:()=>wa}}function z(O,fa){O.sort.call(fa,(wa,ta)=>{wa=O[wa];ta=O[ta];return wa<ta?-1:wa>ta?1:0});return V(O,fa)}function G(O){w.Transform.call(this,x(),O);this._dims=this._indices=null}function Y(O){w.Transform.call(this,null,O)}const Q=O=>new Uint8Array(O),ja=O=>new Uint16Array(O),pa=O=>new Uint32Array(O),J=U(N),K=J.right,ba=J.left;U(function(O){return null===
O?NaN:+O}).center;G.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};u.inherits(G,w.Transform,{transform(O,fa){return this._dims?O.modified("fields")||O.fields.some(wa=>fa.modified(wa.fields))?this.reinit(O,fa):this.eval(O,fa):this.init(O,fa)},init(O,fa){const wa=O.fields,ta=O.query,aa=this._indices={},ha=this._dims=[],ka=ta.length;let H=0;for(var oa;H<ka;++H)oa=
wa[H].fname,oa=aa[oa]||(aa[oa]=P()),ha.push(B(oa,H,ta[H]));return this.eval(O,fa)},reinit(O,fa){const wa=fa.materialize().fork(),ta=O.fields,aa=O.query,ha=this._indices,ka=this._dims,H=this.value,oa=H.curr(),ea=H.prev(),D=H.all(),R=wa.rem=wa.add,la=wa.mod,Ia=aa.length,Ma={};let Ta;var ab;let db,ub,pb,Ya;ea.set(oa);fa.rem.length&&(db=this.remove(O,fa,wa));fa.add.length&&H.add(fa.add);if(fa.mod.length){ub={};var Va=fa.mod;pb=0;for(ab=Va.length;pb<ab;++pb)ub[Va[pb]._index]=1}for(pb=0;pb<Ia;++pb)if(Ya=
ta[pb],!ka[pb]||O.modified("fields",pb)||fa.modified(Ya.fields))ab=Ya.fname,(Va=Ma[ab])||(ha[ab]=Ta=P(),Ma[ab]=Va=Ta.insert(Ya,fa.source,0)),ka[pb]=B(Ta,pb,aa[pb]).onAdd(Va,oa);pb=0;for(ab=H.data().length;pb<ab;++pb)db[pb]||(ea[pb]!==oa[pb]?R.push(pb):ub[pb]&&oa[pb]!==D&&la.push(pb));H.mask=(1<<Ia)-1;return wa},eval(O,fa){const wa=fa.materialize().fork(),ta=this._dims.length;let aa=0;fa.rem.length&&(this.remove(O,fa,wa),aa|=(1<<ta)-1);O.modified("query")&&!O.modified("fields")&&(aa|=this.update(O,
fa,wa));fa.add.length&&(this.insert(O,fa,wa),aa|=(1<<ta)-1);fa.mod.length&&(this.modify(fa,wa),aa|=(1<<ta)-1);this.value.mask=aa;return wa},insert(O,fa,wa){fa=fa.add;var ta=this.value;const aa=this._dims,ha=this._indices;O=O.fields;const ka={};wa=wa.add;const H=ta.size()+fa.length,oa=aa.length;let ea=ta.size();ta.resize(H,oa);ta.add(fa);const D=ta.curr(),R=ta.prev(),la=ta.all();for(ta=0;ta<oa;++ta){var Ia=O[ta].fname;Ia=ka[Ia]||(ka[Ia]=ha[Ia].insert(O[ta],fa,ea));aa[ta].onAdd(Ia,D)}for(;ea<H;++ea)R[ea]=
la,D[ea]!==la&&wa.push(ea)},modify(O,fa){fa=fa.mod;var wa=this.value;const ta=wa.curr();wa=wa.all();O=O.mod;let aa,ha,ka;aa=0;for(ha=O.length;aa<ha;++aa)ka=O[aa]._index,ta[ka]!==wa&&fa.push(ka)},remove(O,fa,wa){O=this._indices;var ta=this.value;const aa=ta.curr(),ha=ta.prev();ta=ta.all();const ka={};wa=wa.rem;const H=fa.rem;let oa,ea,D,R;oa=0;for(ea=H.length;oa<ea;++oa)D=H[oa]._index,ka[D]=1,ha[D]=R=aa[D],aa[D]=ta,R!==ta&&wa.push(D);for(D in O)O[D].remove(ea,ka);this.reindex(fa,ea,ka);return ka},
reindex(O,fa,wa){const ta=this._indices,aa=this.value;O.runAfter(()=>{const ha=aa.remove(fa,wa);for(const ka in ta)ta[ka].reindex(ha)})},update(O,fa,wa){const ta=this._dims,aa=O.query;fa=fa.stamp;const ha=ta.length;let ka=0,H,oa;for(oa=wa.filters=0;oa<ha;++oa)O.modified("query",oa)&&(H=oa,++ka);if(1===ka)ka=ta[H].one,this.incrementOne(ta[H],aa[H],wa.add,wa.rem);else for(ka=oa=0;oa<ha;++oa)O.modified("query",oa)&&(ka|=ta[oa].one,this.incrementAll(ta[oa],aa[oa],fa,wa.add),wa.rem=wa.add);return ka},
incrementAll(O,fa,wa,ta){var aa=this.value;const ha=aa.seen(),ka=aa.curr();aa=aa.prev();const H=O.index();var oa=O.bisect(O.range),ea=O.bisect(fa);const D=ea[0];ea=ea[1];const R=oa[0];oa=oa[1];const la=O.one;let Ia,Ma,Ta;if(D<R)for(Ia=D,Ma=Math.min(R,ea);Ia<Ma;++Ia)Ta=H[Ia],ha[Ta]!==wa&&(aa[Ta]=ka[Ta],ha[Ta]=wa,ta.push(Ta)),ka[Ta]^=la;else if(D>R)for(Ia=R,Ma=Math.min(D,oa);Ia<Ma;++Ia)Ta=H[Ia],ha[Ta]!==wa&&(aa[Ta]=ka[Ta],ha[Ta]=wa,ta.push(Ta)),ka[Ta]^=la;if(ea>oa)for(Ia=Math.max(D,oa),Ma=ea;Ia<Ma;++Ia)Ta=
H[Ia],ha[Ta]!==wa&&(aa[Ta]=ka[Ta],ha[Ta]=wa,ta.push(Ta)),ka[Ta]^=la;else if(ea<oa)for(Ia=Math.max(R,ea),Ma=oa;Ia<Ma;++Ia)Ta=H[Ia],ha[Ta]!==wa&&(aa[Ta]=ka[Ta],ha[Ta]=wa,ta.push(Ta)),ka[Ta]^=la;O.range=fa.slice()},incrementOne(O,fa,wa,ta){const aa=this.value.curr(),ha=O.index();var ka=O.bisect(O.range),H=O.bisect(fa);const oa=H[0];H=H[1];const ea=ka[0];ka=ka[1];const D=O.one;let R,la,Ia;if(oa<ea)for(R=oa,la=Math.min(ea,H);R<la;++R)Ia=ha[R],aa[Ia]^=D,wa.push(Ia);else if(oa>ea)for(R=ea,la=Math.min(oa,
ka);R<la;++R)Ia=ha[R],aa[Ia]^=D,ta.push(Ia);if(H>ka)for(R=Math.max(oa,ka),la=H;R<la;++R)Ia=ha[R],aa[Ia]^=D,wa.push(Ia);else if(H<ka)for(R=Math.max(ea,H),la=ka;R<la;++R)Ia=ha[R],aa[Ia]^=D,ta.push(Ia);O.range=fa.slice()}});Y.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};u.inherits(Y,
w.Transform,{transform(O,fa){const wa=~(O.ignore||0);O=O.filter;const ta=O.mask;if(0===(ta&wa))return fa.StopPropagation;fa=fa.fork(fa.ALL);const aa=O.data(),ha=O.curr(),ka=O.prev(),H=oa=>ha[oa]&wa?null:aa[oa];fa.filter(fa.MOD,H);ta&ta-1?(fa.filter(fa.ADD,oa=>{const ea=ha[oa]&wa;return!ea&&ea^ka[oa]&wa?aa[oa]:null}),fa.filter(fa.REM,oa=>{const ea=ha[oa]&wa;return!ea||ea^ea^ka[oa]&wa?null:aa[oa]})):(fa.filter(fa.ADD,H),fa.filter(fa.REM,oa=>(ha[oa]&wa)===ta?aa[oa]:null));return fa.filter(fa.SOURCE,
oa=>H(oa._index))}});A.crossfilter=G;A.resolvefilter=Y})};
shadow$provide[443]=function(ob,Ba,Gb,Ea){(function(A,w){"object"===typeof Ea&&"undefined"!==typeof Gb?w(Ea,Ba(421)):"function"===typeof define&&define.amd?define(["exports","vega-util"],w):(A="undefined"!==typeof globalThis?globalThis:A||self,w(A.vega={},A.vega))})(this,function(A,w){function u(Aa){this.type=Aa}function x(Aa){switch(Aa.type){case "ArrayExpression":return Aa.elements;case "BinaryExpression":case "LogicalExpression":return[Aa.left,Aa.right];case "CallExpression":return[Aa.callee].concat(Aa.arguments);
case "ConditionalExpression":return[Aa.test,Aa.consequent,Aa.alternate];case "MemberExpression":return[Aa.object,Aa.property];case "ObjectExpression":return Aa.properties;case "Property":return[Aa.key,Aa.value];case "UnaryExpression":return[Aa.argument];default:return[]}}function I(Aa,Ga){if(!Aa)throw Error("ASSERT: "+Ga);}function B(Aa){return 48<=Aa&&57>=Aa}function N(Aa){return 0<="0123456789abcdefABCDEF".indexOf(Aa)}function da(Aa){return 0<="01234567".indexOf(Aa)}function U(Aa){return 10===Aa||
13===Aa||8232===Aa||8233===Aa}function X(Aa){return 36===Aa||95===Aa||65<=Aa&&90>=Aa||97<=Aa&&122>=Aa||92===Aa||128<=Aa&&Ya.test(String.fromCharCode(Aa))}function V(Aa){return 36===Aa||95===Aa||65<=Aa&&90>=Aa||97<=Aa&&122>=Aa||48<=Aa&&57>=Aa||92===Aa||128<=Aa&&Va.test(String.fromCharCode(Aa))}function P(){for(;db<ub;){const Aa=ab.charCodeAt(db);if(32===Aa||9===Aa||11===Aa||12===Aa||160===Aa||5760<=Aa&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(Aa)||
U(Aa))++db;else break}}function z(Aa){var Ga=0;var Ka="u"===Aa?4:2;for(Aa=0;Aa<Ka;++Aa)if(db<ub&&N(ab[db])){var cb=ab[db++];Ga=16*Ga+"0123456789abcdef".indexOf(cb.toLowerCase())}else aa({},"Unexpected token %0","ILLEGAL");return String.fromCharCode(Ga)}function G(){var Aa=ab.charCodeAt(db++);var Ga=String.fromCharCode(Aa);92===Aa&&(117!==ab.charCodeAt(db)&&aa({},"Unexpected token %0","ILLEGAL"),++db,(Aa=z("u"))&&"\\"!==Aa&&X(Aa.charCodeAt(0))||aa({},"Unexpected token %0","ILLEGAL"),Ga=Aa);for(;db<
ub;){Aa=ab.charCodeAt(db);if(!V(Aa))break;++db;Ga+=String.fromCharCode(Aa);92===Aa&&(Ga=Ga.substr(0,Ga.length-1),117!==ab.charCodeAt(db)&&aa({},"Unexpected token %0","ILLEGAL"),++db,(Aa=z("u"))&&"\\"!==Aa&&V(Aa.charCodeAt(0))||aa({},"Unexpected token %0","ILLEGAL"),Ga+=Aa)}return Ga}function Y(){var Aa=db,Ga=ab.charCodeAt(db),Ka=ab[db];switch(Ga){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++db,{type:7,value:String.fromCharCode(Ga),start:Aa,
end:db};default:var cb=ab.charCodeAt(db+1);if(61===cb)switch(Ga){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return db+=2,{type:7,value:String.fromCharCode(Ga)+String.fromCharCode(cb),start:Aa,end:db};case 33:case 61:return db+=2,61===ab.charCodeAt(db)&&++db,{type:7,value:ab.slice(Aa,db),start:Aa,end:db}}}Ga=ab.substr(db,4);if("\x3e\x3e\x3e\x3d"===Ga)return db+=4,{type:7,value:Ga,start:Aa,end:db};Ga=Ga.substr(0,3);if("\x3e\x3e\x3e"===Ga||"\x3c\x3c\x3d"===Ga||"\x3e\x3e\x3d"===
Ga)return db+=3,{type:7,value:Ga,start:Aa,end:db};Ga=Ga.substr(0,2);if(Ka===Ga[1]&&0<="+-\x3c\x3e\x26|".indexOf(Ka)||"\x3d\x3e"===Ga)return db+=2,{type:7,value:Ga,start:Aa,end:db};"//"===Ga&&aa({},"Unexpected token %0","ILLEGAL");if(0<="\x3c\x3e\x3d!+-*%\x26|^/".indexOf(Ka))return++db,{type:7,value:Ka,start:Aa,end:db};aa({},"Unexpected token %0","ILLEGAL")}function Q(){var Aa=ab[db];I(B(Aa.charCodeAt(0))||"."===Aa,"Numeric literal must start with a decimal digit or a decimal point");var Ga=db;var Ka=
"";if("."!==Aa){Ka=ab[db++];Aa=ab[db];if("0"===Ka){if("x"===Aa||"X"===Aa){++db;for(Ka="";db<ub&&N(ab[db]);)Ka+=ab[db++];0===Ka.length&&aa({},"Unexpected token %0","ILLEGAL");X(ab.charCodeAt(db))&&aa({},"Unexpected token %0","ILLEGAL");return{type:6,value:parseInt("0x"+Ka,16),start:Ga,end:db}}if(da(Aa)){for(Ka="0"+ab[db++];db<ub&&da(ab[db]);)Ka+=ab[db++];(X(ab.charCodeAt(db))||B(ab.charCodeAt(db)))&&aa({},"Unexpected token %0","ILLEGAL");return{type:6,value:parseInt(Ka,8),octal:!0,start:Ga,end:db}}Aa&&
B(Aa.charCodeAt(0))&&aa({},"Unexpected token %0","ILLEGAL")}for(;B(ab.charCodeAt(db));)Ka+=ab[db++];Aa=ab[db]}if("."===Aa){for(Ka+=ab[db++];B(ab.charCodeAt(db));)Ka+=ab[db++];Aa=ab[db]}if("e"===Aa||"E"===Aa){Ka+=ab[db++];Aa=ab[db];if("+"===Aa||"-"===Aa)Ka+=ab[db++];if(B(ab.charCodeAt(db)))for(;B(ab.charCodeAt(db));)Ka+=ab[db++];else aa({},"Unexpected token %0","ILLEGAL")}X(ab.charCodeAt(db))&&aa({},"Unexpected token %0","ILLEGAL");return{type:6,value:parseFloat(Ka),start:Ga,end:db}}function ja(Aa,
Ga){let Ka=Aa;0<=Ga.indexOf("u")&&(Ka=Ka.replace(/\\u\{([0-9a-fA-F]+)\}/g,(cb,fb)=>{if(1114111>=parseInt(fb,16))return"x";aa({},"Invalid regular expression")}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(Ka)}catch(cb){aa({},"Invalid regular expression")}try{return new RegExp(Aa,Ga)}catch(cb){return null}}function pa(){P();if(db>=ub)return{type:2,start:db,end:db};var Aa=ab.charCodeAt(db);if(X(Aa)){Aa=db;if(92===ab.charCodeAt(db))var Ga=G();else a:{for(Ga=db++;db<ub;){var Ka=ab.charCodeAt(db);
if(92===Ka){db=Ga;Ga=G();break a}if(V(Ka))++db;else break}Ga=ab.slice(Ga,db)}return{type:1===Ga.length?3:Pa.hasOwnProperty(Ga)?4:"null"===Ga?5:"true"===Ga||"false"===Ga?1:3,value:Ga,start:Aa,end:db}}if(40===Aa||41===Aa||59===Aa)return Y();if(39===Aa||34===Aa){var cb="";Ka=!1;Aa=ab[db];I("'"===Aa||'"'===Aa,"String literal must starts with a quote");Ga=db;for(++db;db<ub;){var fb=ab[db++];if(fb===Aa){Aa="";break}else if("\\"===fb)if((fb=ab[db++])&&U(fb.charCodeAt(0)))"\r"===fb&&"\n"===ab[db]&&++db;else switch(fb){case "u":case "x":if("{"===
ab[db]){++db;var La=ab[db];fb=0;for("}"===La&&aa({},"Unexpected token %0","ILLEGAL");db<ub;){La=ab[db++];if(!N(La))break;fb=16*fb+"0123456789abcdef".indexOf(La.toLowerCase())}(1114111<fb||"}"!==La)&&aa({},"Unexpected token %0","ILLEGAL");fb=65535>=fb?String.fromCharCode(fb):String.fromCharCode((fb-65536>>10)+55296,(fb-65536&1023)+56320);cb+=fb}else cb+=z(fb);break;case "n":cb+="\n";break;case "r":cb+="\r";break;case "t":cb+="\t";break;case "b":cb+="\b";break;case "f":cb+="\f";break;case "v":cb+="\v";
break;default:da(fb)?(La="01234567".indexOf(fb),0!==La&&(Ka=!0),db<ub&&da(ab[db])&&(Ka=!0,La=8*La+"01234567".indexOf(ab[db++]),0<="0123".indexOf(fb)&&db<ub&&da(ab[db])&&(La=8*La+"01234567".indexOf(ab[db++]))),cb+=String.fromCharCode(La)):cb+=fb}else if(U(fb.charCodeAt(0)))break;else cb+=fb}""!==Aa&&aa({},"Unexpected token %0","ILLEGAL");return{type:8,value:cb,octal:Ka,start:Ga,end:db}}return 46===Aa?B(ab.charCodeAt(db+1))?Q():Y():B(Aa)?Q():Y()}function J(){const Aa=pb;db=Aa.end;pb=pa();db=Aa.end;
return Aa}function K(){const Aa=db;pb=pa();db=Aa}function ba(Aa,Ga,Ka){const cb=new u("||"===Aa||"\x26\x26"===Aa?"LogicalExpression":"BinaryExpression");cb.operator=Aa;cb.left=Ga;cb.right=Ka;return cb}function O(Aa){const Ga=new u("Identifier");Ga.name=Aa;return Ga}function fa(Aa){const Ga=new u("Literal");Ga.value=Aa.value;Ga.raw=ab.slice(Aa.start,Aa.end);Aa.regex&&("//"===Ga.raw&&(Ga.raw="/(?:)/"),Ga.regex=Aa.regex);return Ga}function wa(Aa,Ga,Ka){const cb=new u("MemberExpression");cb.computed=
"["===Aa;cb.object=Ga;cb.property=Ka;cb.computed||(Ka.member=!0);return cb}function ta(Aa,Ga,Ka){const cb=new u("Property");cb.key=Ga;cb.value=Ka;cb.kind=Aa;return cb}function aa(Aa,Ga){var Ka=Array.prototype.slice.call(arguments,2),cb=Ga.replace(/%(\d)/g,(La,Bb)=>{I(Bb<Ka.length,"Message reference must be in range");return Ka[Bb]});var fb=Error(cb);fb.index=db;fb.description=cb;throw fb;}function ha(Aa){2===Aa.type&&aa(Aa,"Unexpected end of input");6===Aa.type&&aa(Aa,"Unexpected number");8===Aa.type&&
aa(Aa,"Unexpected string");3===Aa.type&&aa(Aa,"Unexpected identifier");4===Aa.type&&aa(Aa,"Unexpected reserved word");aa(Aa,"Unexpected token %0",Aa.value)}function ka(Aa){const Ga=J();7===Ga.type&&Ga.value===Aa||ha(Ga)}function H(Aa){return 7===pb.type&&pb.value===Aa}function oa(){db=pb.start;const Aa=J();return 8===Aa.type||6===Aa.type?(Aa.octal&&aa(Aa,"Octal literals are not allowed in strict mode."),fa(Aa)):O(Aa.value)}function ea(){if(H("(")){ka("(");var Aa=Ma();ka(")");return Aa}if(H("[")){Aa=
[];db=pb.start;for(ka("[");!H("]");)H(",")?(J(),Aa.push(null)):(Aa.push(Ia()),H("]")||ka(","));J();var Ga=new u("ArrayExpression");Ga.elements=Aa;return Ga}if(H("{")){Aa=[];Ga={};var Ka=String;db=pb.start;for(ka("{");!H("}");){db=pb.start;var cb=pb;if(3===cb.type){var fb=oa();ka(":");cb=Ia();cb=ta("init",fb,cb)}else 2===cb.type||7===cb.type?(ha(cb),cb=void 0):(fb=oa(),ka(":"),cb=Ia(),cb=ta("init",fb,cb));fb="Identifier"===cb.key.type?cb.key.name:Ka(cb.key.value);fb="$"+fb;Object.prototype.hasOwnProperty.call(Ga,
fb)?aa({},"Duplicate data property in object literal not allowed in strict mode"):Ga[fb]=!0;Aa.push(cb);H("}")||ka(",")}ka("}");Ga=new u("ObjectExpression");Ga.properties=Aa;return Ga}Aa=pb.type;db=pb.start;if(3===Aa||Ha[pb.value])Ga=O(J().value);else if(8===Aa||6===Aa)pb.octal&&aa(pb,"Octal literals are not allowed in strict mode."),Ga=fa(J());else{if(4===Aa)throw Error("Disabled.");if(1===Aa)Aa=J(),Aa.value="true"===Aa.value,Ga=fa(Aa);else if(5===Aa)Aa=J(),Aa.value=null,Ga=fa(Aa);else if(H("/")||
H("/\x3d")){var La;pb=null;P();Aa=db;Ga=ab[db];I("/"===Ga,"Regular expression literal must start with a slash");Ka=ab[db++];for(fb=cb=!1;db<ub;)if(Ga=ab[db++],Ka+=Ga,"\\"===Ga)Ga=ab[db++],U(Ga.charCodeAt(0))&&aa({},"Invalid regular expression: missing /"),Ka+=Ga;else if(U(Ga.charCodeAt(0)))aa({},"Invalid regular expression: missing /");else if(cb)"]"===Ga&&(cb=!1);else if("/"===Ga){fb=!0;break}else"["===Ga&&(cb=!0);fb||aa({},"Invalid regular expression: missing /");Ga=Ka.substr(1,Ka.length-2);for(La=
fb="";db<ub;){cb=ab[db];if(!V(cb.charCodeAt(0)))break;++db;"\\"===cb&&db<ub?aa({},"Unexpected token %0","ILLEGAL"):(La+=cb,fb+=cb)}0<=La.search(/[^gimuy]/g)&&aa({},"Invalid regular expression",La);cb=La;La=ja(Ga,cb);Ga=fa({literal:Ka+fb,value:La,regex:{pattern:Ga,flags:cb},start:Aa,end:db});K()}else ha(J())}return Ga}function D(){var Aa;for(Aa=ea();;)if(H(".")){ka(".");db=pb.start;var Ga=J();3===Ga.type||4===Ga.type||1===Ga.type||5===Ga.type||ha(Ga);Ga=O(Ga.value);Aa=wa(".",Aa,Ga)}else if(H("(")){Ga=
[];ka("(");if(!H(")"))for(;db<ub;){Ga.push(Ia());if(H(")"))break;ka(",")}ka(")");const Ka=new u("CallExpression");Ka.callee=Aa;Ka.arguments=Ga;Aa=Ka}else if(H("["))ka("["),Ga=Ma(),ka("]"),Aa=wa("[",Aa,Ga);else break;if(7===pb.type&&(H("++")||H("--")))throw Error("Disabled.");return Aa}function R(){if(7!==pb.type&&4!==pb.type)var Aa=D();else{if(H("++")||H("--"))throw Error("Disabled.");if(H("+")||H("-")||H("~")||H("!")){var Ga=J();Aa=R();Ga=Ga.value;const Ka=new u("UnaryExpression");Ka.operator=Ga;
Ka.argument=Aa;Ka.prefix=!0;Aa=Ka}else{if(4===pb.type&&"delete"===pb.value||4===pb.type&&"void"===pb.value||4===pb.type&&"typeof"===pb.value)throw Error("Disabled.");Aa=D()}}return Aa}function la(Aa){let Ga=0;if(7!==Aa.type&&4!==Aa.type)return 0;switch(Aa.value){case "||":Ga=1;break;case "\x26\x26":Ga=2;break;case "|":Ga=3;break;case "^":Ga=4;break;case "\x26":Ga=5;break;case "\x3d\x3d":case "!\x3d":case "\x3d\x3d\x3d":case "!\x3d\x3d":Ga=6;break;case "\x3c":case "\x3e":case "\x3c\x3d":case "\x3e\x3d":case "instanceof":case "in":Ga=
7;break;case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":Ga=8;break;case "+":case "-":Ga=9;break;case "*":case "/":case "%":Ga=11}return Ga}function Ia(){var Aa=pb;var Ga=R();var Ka=pb;var cb=la(Ka);if(0===cb)var fb=Ga;else{Ka.prec=cb;J();Aa=[Aa,pb];var La=R();for(fb=[Ga,Ka,La];0<(cb=la(pb));){for(;2<fb.length&&cb<=fb[fb.length-2].prec;)La=fb.pop(),Ka=fb.pop().value,Ga=fb.pop(),Aa.pop(),Ga=ba(Ka,Ga,La),fb.push(Ga);Ka=J();Ka.prec=cb;fb.push(Ka);Aa.push(pb);Ga=R();fb.push(Ga)}cb=fb.length-1;Ga=fb[cb];
for(Aa.pop();1<cb;)Aa.pop(),Ga=ba(fb[cb-1].value,fb[cb-2],Ga),cb-=2;fb=Ga}H("?")&&(J(),Aa=Ia(),ka(":"),cb=Ia(),Ga=new u("ConditionalExpression"),Ga.test=fb,Ga.consequent=Aa,Ga.alternate=cb,fb=Ga);return fb}function Ma(){const Aa=Ia();if(H(","))throw Error("Disabled.");return Aa}function Ta(Aa){function Ga(Ka,cb,fb){return La=>{let Bb=Aa(La[0]);cb&&(Bb=cb+"("+Bb+")",0===cb.lastIndexOf("new ",0)&&(Bb="("+Bb+")"));return Bb+"."+Ka+(0>fb?"":0===fb?"()":"("+La.slice(1).map(Aa).join(",")+")")}}return{isNaN:"Number.isNaN",
isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(Ka){3>Ka.length&&w.error("Missing arguments to clamp function.");3<Ka.length&&w.error("Too many arguments to clamp function.");Ka=Ka.map(Aa);return"Math.max("+
Ka[1]+", Math.min("+Ka[2]+","+Ka[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:"new Date",date:Ga("getDate","new Date",0),day:Ga("getDay","new Date",0),year:Ga("getFullYear","new Date",0),month:Ga("getMonth","new Date",0),hours:Ga("getHours","new Date",0),minutes:Ga("getMinutes","new Date",0),seconds:Ga("getSeconds","new Date",0),milliseconds:Ga("getMilliseconds","new Date",0),time:Ga("getTime","new Date",0),timezoneoffset:Ga("getTimezoneOffset","new Date",0),utcdate:Ga("getUTCDate","new Date",
0),utcday:Ga("getUTCDay","new Date",0),utcyear:Ga("getUTCFullYear","new Date",0),utcmonth:Ga("getUTCMonth","new Date",0),utchours:Ga("getUTCHours","new Date",0),utcminutes:Ga("getUTCMinutes","new Date",0),utcseconds:Ga("getUTCSeconds","new Date",0),utcmilliseconds:Ga("getUTCMilliseconds","new Date",0),length:Ga("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:Ga("toUpperCase","String",0),lower:Ga("toLowerCase","String",0),substring:Ga("substring","String"),split:Ga("split","String"),
trim:Ga("trim","String",0),regexp:"RegExp",test:Ga("test","RegExp"),if:function(Ka){3>Ka.length&&w.error("Missing arguments to if function.");3<Ka.length&&w.error("Too many arguments to if function.");Ka=Ka.map(Aa);return"("+Ka[0]+"?"+Ka[1]+":"+Ka[2]+")"}}}u.prototype.visit=function(Aa){let Ga,Ka,cb;if(Aa(this))return 1;Ga=x(this);Ka=0;for(cb=Ga.length;Ka<cb;++Ka)if(Ga[Ka].visit(Aa))return 1};var ab,db,ub,pb,Ya=RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),
Va=RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");
const Pa={"if":1,"in":1,"do":1,"var":1,"for":1,"new":1,"try":1,let:1,"this":1,"else":1,"case":1,"void":1,"with":1,"enum":1,"while":1,"break":1,"catch":1,"throw":1,"const":1,yield:1,"class":1,"super":1,"return":1,"typeof":1,"delete":1,"switch":1,"export":1,"import":1,"public":1,"static":1,"default":1,"finally":1,"extends":1,"package":1,"private":1,"function":1,"continue":1,"debugger":1,"interface":1,"protected":1,"instanceof":1,"implements":1},Ha={"if":1};var Ca={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",
LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};A.ASTNode=u;A.ArrayExpression="ArrayExpression";A.BinaryExpression="BinaryExpression";A.CallExpression="CallExpression";A.ConditionalExpression="ConditionalExpression";A.Identifier="Identifier";A.Literal="Literal";A.LogicalExpression="LogicalExpression";A.MemberExpression="MemberExpression";A.ObjectExpression="ObjectExpression";
A.Property="Property";A.RawCode="RawCode";A.UnaryExpression="UnaryExpression";A.codegenExpression=function(Aa){function Ga(Kb){if(w.isString(Kb))return Kb;const mc=Kc[Kb.type];null==mc&&w.error("Unsupported type: "+Kb.type);return mc(Kb)}function Ka(Kb){Kb={code:Ga(Kb),globals:Object.keys(Ic),fields:Object.keys(Xb)};Ic={};Xb={};return Kb}Aa=Aa||{};const cb=Aa.allowed?w.toSet(Aa.allowed):{},fb=Aa.forbidden?w.toSet(Aa.forbidden):{},La=Aa.constants||Ca,Bb=(Aa.functions||Ta)(Ga),Ob=Aa.globalvar,ec=Aa.fieldvar,
sc=w.isFunction(Ob)?Ob:Kb=>`${Ob}["${Kb}"]`;let Ic={},Xb={},Wb=0;const Kc={Literal:Kb=>Kb.raw,Identifier:Kb=>{Kb=Kb.name;if(0<Wb)return Kb;if(w.hasOwnProperty(fb,Kb))return w.error("Illegal identifier: "+Kb);if(w.hasOwnProperty(La,Kb))return La[Kb];if(w.hasOwnProperty(cb,Kb))return Kb;Ic[Kb]=1;return sc(Kb)},MemberExpression:Kb=>{const mc=!Kb.computed,Ub=Ga(Kb.object);mc&&(Wb+=1);Kb=Ga(Kb.property);if(Ub===ec){var oc=Xb;var Cc=(Cc=Kb&&Kb.length-1)&&('"'===Kb[0]&&'"'===Kb[Cc]||"'"===Kb[0]&&"'"===Kb[Cc])?
Kb.slice(1,-1):Kb;oc[Cc]=1}mc&&--Wb;return Ub+(mc?"."+Kb:"["+Kb+"]")},CallExpression:Kb=>{"Identifier"!==Kb.callee.type&&w.error("Illegal callee type: "+Kb.callee.type);const mc=Kb.callee.name;Kb=Kb.arguments;const Ub=w.hasOwnProperty(Bb,mc)&&Bb[mc];Ub||w.error("Unrecognized function: "+mc);return w.isFunction(Ub)?Ub(Kb):Ub+"("+Kb.map(Ga).join(",")+")"},ArrayExpression:Kb=>"["+Kb.elements.map(Ga).join(",")+"]",BinaryExpression:Kb=>"("+Ga(Kb.left)+" "+Kb.operator+" "+Ga(Kb.right)+")",UnaryExpression:Kb=>
"("+Kb.operator+Ga(Kb.argument)+")",ConditionalExpression:Kb=>"("+Ga(Kb.test)+"?"+Ga(Kb.consequent)+":"+Ga(Kb.alternate)+")",LogicalExpression:Kb=>"("+Ga(Kb.left)+Kb.operator+Ga(Kb.right)+")",ObjectExpression:Kb=>"{"+Kb.properties.map(Ga).join(",")+"}",Property:Kb=>{Wb+=1;const mc=Ga(Kb.key);--Wb;return mc+":"+Ga(Kb.value)}};Ka.functions=Bb;Ka.constants=La;return Ka};A.constants=Ca;A.functions=Ta;A.parseExpression=function(Aa){ab=Aa;db=0;ub=ab.length;pb=null;K();Aa=Ma();if(2!==pb.type)throw Error("Unexpect token after expression.");
return Aa}})};
shadow$provide[444]=function(ob,Ba,Gb,Ea){(function(A,w){"object"===typeof Ea&&"undefined"!==typeof Gb?w(Ea,Ba(421),Ba(443)):"function"===typeof define&&define.amd?define(["exports","vega-util","vega-expression"],w):(A="undefined"!==typeof globalThis?globalThis:A||self,w(A.vega={},A.vega,A.vega))})(this,function(A,w,u){function x(ba,O){return null==ba||null==O?NaN:ba<O?-1:ba>O?1:ba>=O?0:NaN}function I(ba,O){return null==ba||null==O?NaN:O<ba?-1:O>ba?1:O>=ba?0:NaN}function B(){return 0}function N({_intern:ba,
_key:O},fa){O=O(fa);return ba.has(O)?ba.get(O):fa}function da({_intern:ba,_key:O},fa){O=O(fa);if(ba.has(O))return ba.get(O);ba.set(O,fa);return fa}function U({_intern:ba,_key:O},fa){O=O(fa);ba.has(O)&&(fa=ba.get(O),ba.delete(O));return fa}function X(ba){return null!==ba&&"object"===typeof ba?ba.valueOf():ba}function V(ba){return ba instanceof G?ba:new G(ba)}function P(ba){ba.getter&&ba.getter[Y]||(ba.getter=w.field(ba.field),ba.getter[Y]=!0);return ba.getter}function z(ba,O){var fa=O.fields;O=O.values;
for(var wa=fa.length,ta=0,aa,ha;ta<wa;++ta)if(ha=fa[ta],aa=P(ha)(ba),w.isDate(aa)&&(aa=w.toNumber(aa)),w.isDate(O[ta])&&(O[ta]=w.toNumber(O[ta])),w.isArray(O[ta])&&w.isDate(O[ta][0])&&(O[ta]=O[ta].map(w.toNumber)),"E"===ha.type){if(w.isArray(O[ta])?0>O[ta].indexOf(aa):aa!==O[ta])return!1}else if("R"===ha.type){if(!w.inrange(aa,O[ta]))return!1}else if("R-RE"===ha.type){if(!w.inrange(aa,O[ta],!0,!1))return!1}else if("R-E"===ha.type){if(!w.inrange(aa,O[ta],!1,!1))return!1}else if("R-LE"===ha.type&&!w.inrange(aa,
O[ta],!1,!0))return!1;return!0}class G extends Set{constructor(ba,O=X){super();Object.defineProperties(this,{_intern:{value:new Map},_key:{value:O}});if(null!=ba)for(const fa of ba)this.add(fa)}has(ba){return super.has(N(this,ba))}add(ba){return super.add(da(this,ba))}delete(ba){return super.delete(U(this,ba))}}const Y=Symbol("vega_selection_getter"),Q=w.field("_vgsid_"),ja=function(ba){function O(aa,ha,ka=0,H=aa.length){if(ka<H){if(0!==fa(ha,ha))return H;do{const oa=ka+H>>>1;0>wa(aa[oa],ha)?ka=oa+
1:H=oa}while(ka<H)}return ka}let fa,wa,ta;2!==ba.length?(fa=x,wa=(aa,ha)=>x(ba(aa),ha),ta=(aa,ha)=>ba(aa)-ha):(fa=ba===x||ba===I?ba:B,ta=wa=ba);return{left:O,center:function(aa,ha,ka=0,H=aa.length){H=O(aa,ha,ka,H-1);return H>ka&&ta(aa[H-1],ha)>-ta(aa[H],ha)?H-1:H},right:function(aa,ha,ka=0,H=aa.length){if(ka<H){if(0!==fa(ha,ha))return H;do{const oa=ka+H>>>1;0>=wa(aa[oa],ha)?ka=oa+1:H=oa}while(ka<H)}return ka}}}(Q),pa=ja.left,J=ja.right;var K={_vgsid__union:function(...ba){const O=new G;for(const fa of ba)for(const wa of fa)O.add(wa);
return O},_vgsid__intersect:function(ba,...O){ba=new G(ba);O=O.map(V);a:for(const fa of ba)for(const wa of O)if(!wa.has(fa)){ba.delete(fa);continue a}return ba},E_union:function(ba,O){if(!ba.length)return O;for(var fa=0,wa=O.length;fa<wa;++fa)0>ba.indexOf(O[fa])&&ba.push(O[fa]);return ba},E_intersect:function(ba,O){return ba.length?ba.filter(fa=>0<=O.indexOf(fa)):O},R_union:function(ba,O){var fa=w.toNumber(O[0]),wa=w.toNumber(O[1]);fa>wa&&(fa=O[1],wa=O[0]);if(!ba.length)return[fa,wa];ba[0]>fa&&(ba[0]=
fa);ba[1]<wa&&(ba[1]=wa);return ba},R_intersect:function(ba,O){var fa=w.toNumber(O[0]),wa=w.toNumber(O[1]);fa>wa&&(fa=O[1],wa=O[0]);if(!ba.length)return[fa,wa];if(wa<ba[0]||ba[1]<fa)return[];ba[0]<fa&&(ba[0]=fa);ba[1]>wa&&(ba[1]=wa);return ba}};A.selectionIdTest=function(ba,O,fa){var wa=this.context.data[ba];ba=wa?wa.values.value:[];wa=wa?wa["index:unit"]&&wa["index:unit"].value:void 0;fa="intersect"===fa;O=Q(O);const ta=pa(ba,O);if(ta===ba.length||Q(ba[ta])!==O)return!1;if(wa&&fa){if(1===wa.size)return!0;
if(J(ba,O)-ta<wa.size)return!1}return!0};A.selectionResolve=function(ba,O,fa,wa){ba=(ba=this.context.data[ba])?ba.values.value:[];for(var ta={},aa={},ha={},ka,H,oa,ea,D,R,la=ba.length,Ia=0,Ma,Ta;Ia<la;++Ia)if(ka=ba[Ia],ea=ka.unit,H=ka.fields,oa=ka.values,H&&oa){Ma=0;for(Ta=H.length;Ma<Ta;++Ma)D=H[Ma],ka=ta[D.field]||(ta[D.field]={}),R=ka[ea]||(ka[ea]=[]),ha[D.field]=D=D.type.charAt(0),D=K[`${D}_union`],ka[ea]=D(R,w.array(oa[Ma]));fa&&(R=aa[ea]||(aa[ea]=[]),R.push(w.array(oa).reduce((ab,db,ub)=>(ab[H[ub].field]=
db,ab),{})))}else D="_vgsid_",oa=Q(ka),ka=ta[D]||(ta[D]={}),R=ka[ea]||(ka[ea]=[]),R.push(oa),fa&&(R=aa[ea]||(aa[ea]=[]),R.push({_vgsid_:oa}));O=O||"union";ta._vgsid_?ta._vgsid_=K[`${"_vgsid_"}_${O}`](...Object.values(ta._vgsid_)):Object.keys(ta).forEach(ab=>{ta[ab]=Object.keys(ta[ab]).map(db=>ta[ab][db]).reduce((db,ub)=>void 0===db?ub:K[`${ha[ab]}_${O}`](db,ub))});ba=Object.keys(aa);fa&&ba.length&&(ta[wa?"vlPoint":"vlMulti"]="union"===O?{or:ba.reduce((ab,db)=>(ab.push(...aa[db]),ab),[])}:{and:ba.map(ab=>
({or:aa[ab]}))});return ta};A.selectionTest=function(ba,O,fa){var wa=this.context.data[ba];ba=wa?wa.values.value:[];wa=wa?wa["index:unit"]&&wa["index:unit"].value:void 0;fa="intersect"===fa;for(var ta=ba.length,aa=0,ha,ka,H,oa;aa<ta;++aa)if(ha=ba[aa],wa&&fa){if(ka=ka||{},H=ka[oa=ha.unit]||0,-1!==H){ha=z(O,ha);ka[oa]=ha?-1:++H;if(ha&&1===wa.size)return!0;if(!ha&&H===wa.get(oa).count)return!1}}else if(ha=z(O,ha),fa^ha)return ha;return ta&&fa};A.selectionTuples=function(ba,O){return ba.map(fa=>w.extend(O.fields?
{values:O.fields.map(wa=>P(wa)(fa.datum))}:{_vgsid_:Q(fa.datum)},O))};A.selectionVisitor=function(ba,O,fa,wa){O[0].type!==u.Literal&&w.error("First argument to selection functions must be a string literal.");ba=O[0].value;O=2<=O.length&&w.peek(O).value;const ta=":"+ba;"intersect"!==O||w.hasOwnProperty(wa,"@unit")||(wa["@unit"]=fa.getData(ba).indataRef(fa,"unit"));w.hasOwnProperty(wa,ta)||(wa[ta]=fa.getData(ba).tuplesRef())}})};
shadow$provide[445]=function(ob,Ba,Gb,Ea){(function(A,w){"object"===typeof Ea&&"undefined"!==typeof Gb?w(Ea,Ba(421),Ba(443),Ba(430),Ba(426),Ba(431),Ba(444),Ba(427),Ba(423)):"function"===typeof define&&define.amd?define("exports vega-util vega-expression vega-scale vega-dataflow vega-scenegraph vega-selections vega-statistics vega-time".split(" "),w):(A="undefined"!==typeof globalThis?globalThis:A||self,w(A.vega={},A.vega,A.vega,A.vega,A.vega,A.vega,A.vega,A.vega,A.vega))})(this,function(A,w,u,x,I,
B,N,da,U){function X(Sb){return(Sb=this.context.data[Sb])?Sb.values.value:[]}function V(Sb,Qc,ud){return(ud=(Sb=this.context.data[Sb]["index:"+Qc])?Sb.value.get(ud):void 0)?ud.count:ud}function P(Sb,Qc){const ud=this.context.dataflow;ud.pulse(this.context.data[Sb].input,ud.changeset().remove(w.truthy).insert(Qc));return 1}function z(Sb,Qc,ud){if(Sb){const oe=this.context.dataflow;oe.pulse(Sb.mark.source,oe.changeset().encode(Sb,Qc))}return void 0!==ud?ud:Sb}function G(Sb,Qc,ud){if(!Number.isInteger(Sb)||
!Number.isInteger(Qc))return"";lg.setYear(2E3);lg.setMonth(Sb);lg.setDate(Qc);return Ce.call(this,lg,ud)}function Y(Sb){return G.call(this,Sb,1,"%B")}function Q(Sb){return G.call(this,Sb,1,"%b")}function ja(Sb){return G.call(this,0,2+Sb,"%A")}function pa(Sb){return G.call(this,0,2+Sb,"%a")}function J(Sb,Qc,ud,oe){Qc[0].type!==u.Literal&&w.error("First argument to data functions must be a string literal.");Sb=Qc[0].value;Qc=":"+Sb;if(!w.hasOwnProperty(Qc,oe))try{oe[Qc]=ud.getData(Sb).tuplesRef()}catch(ue){}}
function K(Sb,Qc,ud,oe){Qc[0].type!==u.Literal&&w.error("First argument to indata must be a string literal.");Qc[1].type!==u.Literal&&w.error("Second argument to indata must be a string literal.");Sb=Qc[0].value;Qc=Qc[1].value;const ue="@"+Qc;w.hasOwnProperty(ue,oe)||(oe[ue]=ud.getData(Sb).indataRef(ud,Qc))}function ba(Sb,Qc,ud,oe){if(Qc[0].type===u.Literal)O(ud,oe,Qc[0].value);else for(Sb in ud.scales)O(ud,oe,Sb)}function O(Sb,Qc,ud){const oe="%"+ud;if(!w.hasOwnProperty(Qc,oe))try{Qc[oe]=Sb.scaleRef(ud)}catch(ue){}}
function fa(Sb,Qc){if(w.isFunction(Sb))return Sb;if(w.isString(Sb))return(Sb=Qc.scales[Sb])&&x.isRegisteredScale(Sb.value)?Sb.value:void 0}function wa(Sb,Qc,ud){Qc.__bandwidth=ue=>ue&&ue.bandwidth?ue.bandwidth():0;ud._bandwidth=ba;ud._range=ba;ud._scale=ba;const oe=ue=>"_["+(ue.type===u.Literal?w.stringValue("%"+ue.value):w.stringValue("%")+"+"+Sb(ue))+"]";return{_bandwidth:ue=>`this.__bandwidth(${oe(ue[0])})`,_range:ue=>`${oe(ue[0])}.range()`,_scale:ue=>`${oe(ue[0])}(${Sb(ue[1])})`}}function ta(Sb){return 1<
Sb?id:-1>Sb?-id:Math.asin(Sb)}function aa(){}function ha(Sb,Qc){if(Sb&&Gh.hasOwnProperty(Sb.type))Gh[Sb.type](Sb,Qc)}function ka(Sb,Qc,ud){var oe=-1;ud=Sb.length-ud;for(Qc.lineStart();++oe<ud;){var ue=Sb[oe];Qc.point(ue[0],ue[1],ue[2])}Qc.lineEnd()}function H(Sb,Qc){var ud=-1,oe=Sb.length;for(Qc.polygonStart();++ud<oe;)ka(Sb[ud],Qc,1);Qc.polygonEnd()}function oa(Sb,Qc){if(Sb&&Rf.hasOwnProperty(Sb.type))Rf[Sb.type](Sb,Qc);else ha(Sb,Qc)}function ea(){lb.point=R}function D(){la(Lf,bi)}function R(Sb,
Qc){lb.point=la;Lf=Sb;bi=Qc;Sb*=Sf;Qc*=Sf;ih=Sb;ia=xg(Qc=Qc/2+Bd);Sa=cg(Qc)}function la(Sb,Qc){Sb*=Sf;Qc*=Sf;Qc=Qc/2+Bd;var ud=Sb-ih,oe=0<=ud?1:-1,ue=oe*ud;ud=xg(Qc);Qc=cg(Qc);var Of=Sa*Qc,kf=ia*ud+Of*xg(ue);oe=Of*oe*cg(ue);li.add(wg(oe,kf));ih=Sb;ia=ud;Sa=Qc}function Ia(Sb,Qc){return[Sb[1]*Qc[2]-Sb[2]*Qc[1],Sb[2]*Qc[0]-Sb[0]*Qc[2],Sb[0]*Qc[1]-Sb[1]*Qc[0]]}function Ma(Sb,Qc){ad.push(Rd=[Eb=Sb,qc=Sb]);Qc<Vb&&(Vb=Qc);Qc>Za&&(Za=Qc)}function Ta(Sb,Qc){var ud=[Sb*Sf,Qc*Sf];var oe=ud[0];ud=ud[1];var ue=
xg(ud);oe=[ue*xg(oe),ue*cg(oe),cg(ud)];if(Qb){ud=Ia(Qb,oe);ue=ud=Ia([ud[1],-ud[0],0],ud);var Of=$f(ue[0]*ue[0]+ue[1]*ue[1]+ue[2]*ue[2]);ue[0]/=Of;ue[1]/=Of;ue[2]/=Of;ud=[wg(ud[1],ud[0]),ta(ud[2])];var kf=Sb-wb;ue=0<kf?1:-1;Of=ud[0]*dg*ue;kf=180<Kf(kf);kf^(ue*wb<Of&&Of<ue*Sb)?(ud=ud[1]*dg,ud>Za&&(Za=ud)):(Of=(Of+360)%360-180,kf^(ue*wb<Of&&Of<ue*Sb))?(ud=-ud[1]*dg,ud<Vb&&(Vb=ud)):(Qc<Vb&&(Vb=Qc),Qc>Za&&(Za=Qc));kf?Sb<wb?Va(Eb,Sb)>Va(Eb,qc)&&(qc=Sb):Va(Sb,qc)>Va(Eb,qc)&&(Eb=Sb):qc>=Eb?(Sb<Eb&&(Eb=Sb),
Sb>qc&&(qc=Sb)):Sb>wb?Va(Eb,Sb)>Va(Eb,qc)&&(qc=Sb):Va(Sb,qc)>Va(Eb,qc)&&(Eb=Sb)}else ad.push(Rd=[Eb=Sb,qc=Sb]);Qc<Vb&&(Vb=Qc);Qc>Za&&(Za=Qc);Qb=oe;wb=Sb}function ab(){Md.point=Ta}function db(){Rd[0]=Eb;Rd[1]=qc;Md.point=Ma;Qb=null}function ub(Sb,Qc){if(Qb){var ud=Sb-wb;zc.add(180<Kf(ud)?ud+(0<ud?360:-360):ud)}else eb=Sb,qb=Qc;lb.point(Sb,Qc);Ta(Sb,Qc)}function pb(){lb.lineStart()}function Ya(){ub(eb,qb);lb.lineEnd();1E-6<Kf(zc)&&(Eb=-(qc=180));Rd[0]=Eb;Rd[1]=qc;Qb=null}function Va(Sb,Qc){return 0>
(Qc-=Sb)?Qc+360:Qc}function Pa(Sb,Qc){return Sb[0]-Qc[0]}function Ha(Sb,Qc){return Sb[0]<=Sb[1]?Sb[0]<=Qc&&Qc<=Sb[1]:Qc<Sb[0]||Sb[1]<Qc}function Ca(Sb,Qc){Sb*=Sf;Qc*=Sf;var ud=xg(Qc);Aa(ud*xg(Sb),ud*cg(Sb),cg(Qc))}function Aa(Sb,Qc,ud){++nd;Pd+=(Sb-Pd)/nd;se+=(Qc-se)/nd;ye+=(ud-ye)/nd}function Ga(){yf.point=Ka}function Ka(Sb,Qc){Sb*=Sf;Qc*=Sf;var ud=xg(Qc);Ue=ud*xg(Sb);uf=ud*cg(Sb);Yf=cg(Qc);yf.point=cb;Aa(Ue,uf,Yf)}function cb(Sb,Qc){Sb*=Sf;Qc*=Sf;var ud=xg(Qc),oe=ud*xg(Sb);Sb=ud*cg(Sb);Qc=cg(Qc);
var ue=wg($f((ue=uf*Qc-Yf*Sb)*ue+(ue=Yf*oe-Ue*Qc)*ue+(ue=Ue*Sb-uf*oe)*ue),Ue*oe+uf*Sb+Yf*Qc);ee+=ue;Oe+=ue*(Ue+(Ue=oe));Se+=ue*(uf+(uf=Sb));Pe+=ue*(Yf+(Yf=Qc));Aa(Ue,uf,Yf)}function fb(){yf.point=Ca}function La(){yf.point=Ob}function Bb(){ec(Xe,Uf);yf.point=Ca}function Ob(Sb,Qc){Xe=Sb;Uf=Qc;Sb*=Sf;Qc*=Sf;yf.point=ec;var ud=xg(Qc);Ue=ud*xg(Sb);uf=ud*cg(Sb);Yf=cg(Qc);Aa(Ue,uf,Yf)}function ec(Sb,Qc){Sb*=Sf;Qc*=Sf;var ud=xg(Qc),oe=ud*xg(Sb);Sb=ud*cg(Sb);Qc=cg(Qc);ud=uf*Qc-Yf*Sb;var ue=Yf*oe-Ue*Qc,Of=
Ue*Sb-uf*oe,kf=dh(ud,ue,Of),fg=ta(kf);kf=kf&&-fg/kf;Xd.add(kf*ud);Ze.add(kf*ue);Tf.add(kf*Of);ee+=fg;Oe+=fg*(Ue+(Ue=oe));Se+=fg*(uf+(uf=Sb));Pe+=fg*(Yf+(Yf=Qc));Aa(Ue,uf,Yf)}function sc(Sb,Qc){return function(ud,oe,ue){return ud?(ud=fa(ud,(ue||this).context))&&ud.path[Sb](oe):Qc(oe)}}function Ic(Sb,Qc){return(Sb=fa(Sb,(Qc||this).context))&&Sb.scale()}function Xb(Sb){const Qc=this.context.group;let ud=!1;if(Qc)for(;Sb;){if(Sb===Qc){ud=!0;break}Sb=Sb.mark.group}return ud}function Wb(Sb,Qc,ud){try{Sb[Qc].apply(Sb,
["EXPRESSION"].concat([].slice.call(ud)))}catch(oe){Sb.warn(oe)}return ud[ud.length-1]}function Kc(){return Wb(this.context.dataflow,"warn",arguments)}function Kb(){return Wb(this.context.dataflow,"info",arguments)}function mc(){return Wb(this.context.dataflow,"debug",arguments)}function Ub(Sb,Qc,ud){Sb.prototype=Qc.prototype=ud;ud.constructor=Sb}function oc(Sb,Qc){Sb=Object.create(Sb.prototype);for(var ud in Qc)Sb[ud]=Qc[ud];return Sb}function Cc(){}function Mc(){return this.rgb().formatHex()}function Pb(){return this.rgb().formatRgb()}
function nc(Sb){var Qc,ud;Sb=(Sb+"").trim().toLowerCase();return(Qc=ag.exec(Sb))?(ud=Qc[1].length,Qc=parseInt(Qc[1],16),6===ud?rc(Qc):3===ud?new Ab(Qc>>8&15|Qc>>4&240,Qc>>4&15|Qc&240,(Qc&15)<<4|Qc&15,1):8===ud?Hb(Qc>>24&255,Qc>>16&255,Qc>>8&255,(Qc&255)/255):4===ud?Hb(Qc>>12&15|Qc>>8&240,Qc>>8&15|Qc>>4&240,Qc>>4&15|Qc&240,((Qc&15)<<4|Qc&15)/255):null):(Qc=ph.exec(Sb))?new Ab(Qc[1],Qc[2],Qc[3],1):(Qc=mh.exec(Sb))?new Ab(255*Qc[1]/100,255*Qc[2]/100,255*Qc[3]/100,1):(Qc=of.exec(Sb))?Hb(Qc[1],Qc[2],Qc[3],
Qc[4]):(Qc=qh.exec(Sb))?Hb(255*Qc[1]/100,255*Qc[2]/100,255*Qc[3]/100,Qc[4]):(Qc=Ii.exec(Sb))?fd(Qc[1],Qc[2]/100,Qc[3]/100,1):(Qc=Fi.exec(Sb))?fd(Qc[1],Qc[2]/100,Qc[3]/100,Qc[4]):Nh.hasOwnProperty(Sb)?rc(Nh[Sb]):"transparent"===Sb?new Ab(NaN,NaN,NaN,0):null}function rc(Sb){return new Ab(Sb>>16&255,Sb>>8&255,Sb&255,1)}function Hb(Sb,Qc,ud,oe){0>=oe&&(Sb=Qc=ud=NaN);return new Ab(Sb,Qc,ud,oe)}function Jc(Sb){Sb instanceof Cc||(Sb=nc(Sb));if(!Sb)return new Ab;Sb=Sb.rgb();return new Ab(Sb.r,Sb.g,Sb.b,Sb.opacity)}
function kc(Sb,Qc,ud,oe){return 1===arguments.length?Jc(Sb):new Ab(Sb,Qc,ud,null==oe?1:oe)}function Ab(Sb,Qc,ud,oe){this.r=+Sb;this.g=+Qc;this.b=+ud;this.opacity=+oe}function md(){return`#${Qd(this.r)}${Qd(this.g)}${Qd(this.b)}`}function yd(){const Sb=hd(this.opacity);return`${1===Sb?"rgb(":"rgba("}${Ed(this.r)}, ${Ed(this.g)}, ${Ed(this.b)}${1===Sb?")":`, ${Sb})`}`}function hd(Sb){return isNaN(Sb)?1:Math.max(0,Math.min(1,Sb))}function Ed(Sb){return Math.max(0,Math.min(255,Math.round(Sb)||0))}function Qd(Sb){Sb=
Ed(Sb);return(16>Sb?"0":"")+Sb.toString(16)}function fd(Sb,Qc,ud,oe){0>=oe?Sb=Qc=ud=NaN:0>=ud||1<=ud?Sb=Qc=NaN:0>=Qc&&(Sb=NaN);return new yc(Sb,Qc,ud,oe)}function ed(Sb){if(Sb instanceof yc)return new yc(Sb.h,Sb.s,Sb.l,Sb.opacity);Sb instanceof Cc||(Sb=nc(Sb));if(!Sb)return new yc;if(Sb instanceof yc)return Sb;Sb=Sb.rgb();var Qc=Sb.r/255,ud=Sb.g/255,oe=Sb.b/255,ue=Math.min(Qc,ud,oe),Of=Math.max(Qc,ud,oe),kf=NaN,fg=Of-ue,Zf=(Of+ue)/2;fg?(kf=Qc===Of?(ud-oe)/fg+6*(ud<oe):ud===Of?(oe-Qc)/fg+2:(Qc-ud)/
fg+4,fg/=.5>Zf?Of+ue:2-Of-ue,kf*=60):fg=0<Zf&&1>Zf?0:kf;return new yc(kf,fg,Zf,Sb.opacity)}function bc(Sb,Qc,ud,oe){return 1===arguments.length?ed(Sb):new yc(Sb,Qc,ud,null==oe?1:oe)}function yc(Sb,Qc,ud,oe){this.h=+Sb;this.s=+Qc;this.l=+ud;this.opacity=+oe}function $c(Sb){Sb=(Sb||0)%360;return 0>Sb?Sb+360:Sb}function cc(Sb){return Math.max(0,Math.min(1,Sb||0))}function tb(Sb,Qc,ud){return 255*(60>Sb?Qc+(ud-Qc)*Sb/60:180>Sb?ud:240>Sb?Qc+(ud-Qc)*(240-Sb)/60:Qc)}function tc(Sb){if(Sb instanceof cd)return new cd(Sb.l,
Sb.a,Sb.b,Sb.opacity);if(Sb instanceof re)return Wd(Sb);Sb instanceof Ab||(Sb=Jc(Sb));var Qc=xd(Sb.r),ud=xd(Sb.g),oe=xd(Sb.b),ue=bd(.2225045*Qc+.7168786*ud+.0606169*oe);if(Qc===ud&&ud===oe)var Of=Qc=ue;else Of=bd((.4360747*Qc+.3850649*ud+.1430804*oe)/.96422),Qc=bd((.0139322*Qc+.0971045*ud+.7141733*oe)/.82521);return new cd(116*ue-16,500*(Of-ue),200*(ue-Qc),Sb.opacity)}function Ec(Sb,Qc,ud,oe){return 1===arguments.length?tc(Sb):new cd(Sb,Qc,ud,null==oe?1:oe)}function cd(Sb,Qc,ud,oe){this.l=+Sb;this.a=
+Qc;this.b=+ud;this.opacity=+oe}function bd(Sb){return Sb>Gi?Math.pow(Sb,1/3):Sb/Ui+Cf}function od(Sb){return Sb>nh?Sb*Sb*Sb:Ui*(Sb-Cf)}function Dd(Sb){return 255*(.0031308>=Sb?12.92*Sb:1.055*Math.pow(Sb,1/2.4)-.055)}function xd(Sb){return.04045>=(Sb/=255)?Sb/12.92:Math.pow((Sb+.055)/1.055,2.4)}function sd(Sb){if(Sb instanceof re)return new re(Sb.h,Sb.c,Sb.l,Sb.opacity);Sb instanceof cd||(Sb=tc(Sb));if(0===Sb.a&&0===Sb.b)return new re(NaN,0<Sb.l&&100>Sb.l?0:NaN,Sb.l,Sb.opacity);var Qc=Math.atan2(Sb.b,
Sb.a)*Kg;return new re(0>Qc?Qc+360:Qc,Math.sqrt(Sb.a*Sb.a+Sb.b*Sb.b),Sb.l,Sb.opacity)}function Vd(Sb,Qc,ud,oe){return 1===arguments.length?sd(Sb):new re(Sb,Qc,ud,null==oe?1:oe)}function re(Sb,Qc,ud,oe){this.h=+Sb;this.c=+Qc;this.l=+ud;this.opacity=+oe}function Wd(Sb){if(isNaN(Sb.h))return new cd(Sb.l,0,0,Sb.opacity);var Qc=Sb.h*jh;return new cd(Sb.l,Math.cos(Qc)*Sb.c,Math.sin(Qc)*Sb.c,Sb.opacity)}function Fe(Sb){Sb/=255;return.03928>=Sb?Sb/12.92:Math.pow((Sb+.055)/1.055,2.4)}function Bf(Sb){var Qc=
kc(Sb);Sb=Fe(Qc.r);const ud=Fe(Qc.g);Qc=Fe(Qc.b);return.2126*Sb+.7152*ud+.0722*Qc}function Ye(Sb,Qc){Sb=Bf(Sb);Qc=Bf(Qc);return(Math.max(Sb,Qc)+.05)/(Math.min(Sb,Qc)+.05)}function bg(){const Sb=[].slice.call(arguments);Sb.unshift({});return w.extend(...Sb)}function rf(Sb,Qc){if(Sb===Qc||Sb!==Sb&&Qc!==Qc)Sb=!0;else if(w.isArray(Sb))if(w.isArray(Qc)&&Sb.length===Qc.length)a:{for(let ud=0,oe=Sb.length;ud<oe;++ud)if(!rf(Sb[ud],Qc[ud])){Sb=!1;break a}Sb=!0}else Sb=!1;else Sb=w.isObject(Sb)&&w.isObject(Qc)?
Ff(Sb,Qc):!1;return Sb}function Ff(Sb,Qc){for(const ud in Sb)if(!rf(Sb[ud],Qc[ud]))return!1;return!0}function pg(Sb){return Qc=>Ff(Sb,Qc)}function gf(Sb,Qc,ud,oe,ue,Of){const kf=this.context.dataflow,fg=this.context.data[Sb],Zf=fg.input;Sb=kf.stamp();let qg=fg.changes,lh;if(!1===kf._trigger||!(Zf.value.length||Qc||oe))return 0;if(!qg||qg.stamp<Sb)fg.changes=qg=kf.changeset(),qg.stamp=Sb,kf.runAfter(()=>{fg.modified=!0;kf.pulse(Zf,qg).run()},!0,1);ud&&(ud=!0===ud?w.truthy:w.isArray(ud)||I.isTuple(ud)?
ud:pg(ud),qg.remove(ud));Qc&&qg.insert(Qc);oe&&(ud=pg(oe),Zf.value.some(ud)?qg.remove(ud):qg.insert(oe));if(ue)for(lh in Of)qg.modify(ue,lh,Of[lh]);return 1}function Jb(Sb){Sb=Sb.touches;return Math.hypot(Sb[0].clientX-Sb[1].clientX,Sb[0].clientY-Sb[1].clientY)}function lc(Sb){Sb=Sb.touches;return Math.atan2(Sb[0].clientY-Sb[1].clientY,Sb[0].clientX-Sb[1].clientX)}function Uc(Sb,Qc){Qc=oh[Qc]||(oh[Qc]=w.field(Qc));return w.isArray(Sb)?Sb.map(Qc):Qc(Sb)}function Zc(Sb){return w.isArray(Sb)||ArrayBuffer.isView(Sb)?
Sb:null}function rd(Sb){return Zc(Sb)||(w.isString(Sb)?Sb:null)}function Nd(Sb,...Qc){return Zc(Sb).join(...Qc)}function he(Sb,...Qc){return rd(Sb).indexOf(...Qc)}function qd(Sb,...Qc){return rd(Sb).lastIndexOf(...Qc)}function qe(Sb,...Qc){return rd(Sb).slice(...Qc)}function we(Sb,Qc,ud){w.isFunction(ud)&&w.error("Function argument passed to replace.");return String(Sb).replace(Qc,ud)}function Cd(Sb){return Zc(Sb).slice().reverse()}function sf(Sb,Qc,ud){return x.bandSpace(Sb||0,Qc||0,ud||0)}function Jf(Sb,
Qc){return(Sb=fa(Sb,(Qc||this).context))&&Sb.bandwidth?Sb.bandwidth():0}function tf(Sb,Qc){return(Sb=fa(Sb,(Qc||this).context))?Sb.copy():void 0}function lf(Sb,Qc){return(Sb=fa(Sb,(Qc||this).context))?Sb.domain():[]}function Lg(Sb,Qc,ud){return(Sb=fa(Sb,(ud||this).context))?w.isArray(Qc)?(Sb.invertRange||Sb.invert)(Qc):(Sb.invert||Sb.invertExtent)(Qc):void 0}function rg(Sb,Qc){return(Sb=fa(Sb,(Qc||this).context))&&Sb.range?Sb.range():[]}function Pg(Sb,Qc,ud){return(Sb=fa(Sb,(ud||this).context))?Sb(Qc):
void 0}function fh(Sb,Qc,ud,oe,ue){Sb=fa(Sb,(ue||this).context);const Of=B.Gradient(Qc,ud);Qc=Sb.domain();ud=Qc[0];ue=w.peek(Qc);let kf=w.identity;ue-ud?kf=x.scaleFraction(Sb,ud,ue):Sb=(Sb.interpolator?x.scale("sequential")().interpolator(Sb.interpolator()):x.scale("linear")().interpolate(Sb.interpolate()).range(Sb.range())).domain([ud=0,ue=1]);Sb.ticks&&(Qc=Sb.ticks(+oe||15),ud!==Qc[0]&&Qc.unshift(ud),ue!==w.peek(Qc)&&Qc.push(ue));Qc.forEach(fg=>Of.stop(kf(fg),Sb(fg)));return Of}function eh(Sb,Qc,
ud){const oe=fa(Sb,(ud||this).context);return function(ue){return oe?oe.path.context(ue)(Qc):""}}function Zg(Sb){let Qc=null;return function(ud){return ud?B.pathRender(ud,Qc=Qc||B.pathParse(Sb)):Sb}}function oi(Sb,Qc){Sb=X.call(Qc,Sb);return Sb.root&&Sb.root.lookup||{}}function ei(Sb,Qc,ud){Sb=oi(Sb,this);Qc=Sb[Qc];ud=Sb[ud];return Qc&&ud?Qc.path(ud).map($d):void 0}function Yh(Sb,Qc){return(Sb=oi(Sb,this)[Qc])?Sb.ancestors().map($d):void 0}function wh(){const Sb="undefined"!==typeof window&&window||
null;return Sb?Sb.screen:{}}function Wc(){const Sb="undefined"!==typeof window&&window||null;return Sb?[Sb.innerWidth,Sb.innerHeight]:[void 0,void 0]}function ib(){var Sb=this.context.dataflow;return(Sb=Sb.container&&Sb.container())?[Sb.clientWidth,Sb.clientHeight]:[void 0,void 0]}function Ua(Sb,Qc,ud){if(!Sb)return[];const [oe,ue]=Sb;Sb=(new B.Bounds).set(oe[0],oe[1],ue[0],ue[1]);ud=ud||this.context.dataflow.scenegraph().root;return B.intersect(ud,Sb,v(Qc))}function v(Sb){let Qc=null;if(Sb){const ud=
w.array(Sb.marktype),oe=w.array(Sb.markname);Qc=ue=>(!ud.length||ud.some(Of=>ue.marktype===Of))&&(!oe.length||oe.some(Of=>ue.name===Of))}return Qc}function Xa(Sb,Qc,ud){if(1===arguments.length)return ug[Sb];ug[Sb]=Qc;ud&&(eg[Sb]=ud);ve&&(ve.functions[Sb]="this."+Sb);return this}const gc=Sb=>function(Qc,ud){return this.context.dataflow.locale()[Sb](ud)(Qc)},wd=gc("format"),Ce=gc("timeFormat"),Hf=gc("utcFormat"),zg=gc("timeParse"),$g=gc("utcParse"),lg=new Date(2E3,0,1);class Ag{constructor(){this._partials=
new Float64Array(32);this._n=0}add(Sb){const Qc=this._partials;let ud=0;for(let oe=0;oe<this._n&&32>oe;oe++){const ue=Qc[oe],Of=Sb+ue;(Sb=Math.abs(Sb)<Math.abs(ue)?Sb-(Of-ue):ue-(Of-Sb))&&(Qc[ud++]=Sb);Sb=Of}Qc[ud]=Sb;this._n=ud+1;return this}valueOf(){const Sb=this._partials;let Qc=this._n;let ud,oe=0;if(0<Qc){for(oe=Sb[--Qc];0<Qc;){var ue=oe;ud=Sb[--Qc];oe=ue+ud;if(ue=ud-(oe-ue))break}0<Qc&&(0>ue&&0>Sb[Qc-1]||0<ue&&0<Sb[Qc-1])&&(ud=2*ue,ue=oe+ud,ud==ue-oe&&(oe=ue))}return oe}}var Ug=Math.PI,id=
Ug/2,Bd=Ug/4,xe=2*Ug,dg=180/Ug,Sf=Ug/180,Kf=Math.abs,wg=Math.atan2,xg=Math.cos,dh=Math.hypot,cg=Math.sin,$f=Math.sqrt,Rf={Feature:function(Sb,Qc){ha(Sb.geometry,Qc)},FeatureCollection:function(Sb,Qc){Sb=Sb.features;for(var ud=-1,oe=Sb.length;++ud<oe;)ha(Sb[ud].geometry,Qc)}},Gh={Sphere:function(Sb,Qc){Qc.sphere()},Point:function(Sb,Qc){Sb=Sb.coordinates;Qc.point(Sb[0],Sb[1],Sb[2])},MultiPoint:function(Sb,Qc){for(var ud=Sb.coordinates,oe=-1,ue=ud.length;++oe<ue;)Sb=ud[oe],Qc.point(Sb[0],Sb[1],Sb[2])},
LineString:function(Sb,Qc){ka(Sb.coordinates,Qc,0)},MultiLineString:function(Sb,Qc){Sb=Sb.coordinates;for(var ud=-1,oe=Sb.length;++ud<oe;)ka(Sb[ud],Qc,0)},Polygon:function(Sb,Qc){H(Sb.coordinates,Qc)},MultiPolygon:function(Sb,Qc){Sb=Sb.coordinates;for(var ud=-1,oe=Sb.length;++ud<oe;)H(Sb[ud],Qc)},GeometryCollection:function(Sb,Qc){Sb=Sb.geometries;for(var ud=-1,oe=Sb.length;++ud<oe;)ha(Sb[ud],Qc)}},li=new Ag,gh=new Ag,Lf,bi,ih,ia,Sa,lb={point:aa,lineStart:aa,lineEnd:aa,polygonStart:function(){li=
new Ag;lb.lineStart=ea;lb.lineEnd=D},polygonEnd:function(){var Sb=+li;gh.add(0>Sb?xe+Sb:Sb);this.lineStart=this.lineEnd=this.point=aa},sphere:function(){gh.add(xe)}},Eb,Vb,qc,Za,wb,eb,qb,Qb,zc,ad,Rd,Md={point:Ma,lineStart:ab,lineEnd:db,polygonStart:function(){Md.point=ub;Md.lineStart=pb;Md.lineEnd=Ya;zc=new Ag;lb.polygonStart()},polygonEnd:function(){lb.polygonEnd();Md.point=Ma;Md.lineStart=ab;Md.lineEnd=db;0>li?(Eb=-(qc=180),Vb=-(Za=90)):1E-6<zc?Za=90:-1E-6>zc&&(Vb=-90);Rd[0]=Eb;Rd[1]=qc},sphere:function(){Eb=
-(qc=180);Vb=-(Za=90)}},nd,ee,Pd,se,ye,Oe,Se,Pe,Xd,Ze,Tf,Xe,Uf,Ue,uf,Yf,yf={sphere:aa,point:Ca,lineStart:Ga,lineEnd:fb,polygonStart:function(){yf.lineStart=La;yf.lineEnd=Bb},polygonEnd:function(){yf.lineStart=Ga;yf.lineEnd=fb}};const vf=sc("area",function(Sb){gh=new Ag;oa(Sb,lb);return 2*gh}),ne=sc("bounds",function(Sb){var Qc,ud,oe;Za=qc=-(Eb=Vb=Infinity);ad=[];oa(Sb,Md);if(Qc=ad.length){ad.sort(Pa);Sb=1;var ue=ad[0];for(ud=[ue];Sb<Qc;++Sb){var Of=ad[Sb];Ha(ue,Of[0])||Ha(ue,Of[1])?(Va(ue[0],Of[1])>
Va(ue[0],ue[1])&&(ue[1]=Of[1]),Va(Of[0],ue[1])>Va(ue[0],ue[1])&&(ue[0]=Of[0])):ud.push(ue=Of)}var kf=-Infinity;Qc=ud.length-1;Sb=0;for(ue=ud[Qc];Sb<=Qc;ue=Of,++Sb)Of=ud[Sb],(oe=Va(ue[1],Of[0]))>kf&&(kf=oe,Eb=Of[0],qc=ue[1])}ad=Rd=null;return Infinity===Eb||Infinity===Vb?[[NaN,NaN],[NaN,NaN]]:[[Eb,Vb],[qc,Za]]}),wf=sc("centroid",function(Sb){nd=ee=Pd=se=ye=Oe=Se=Pe=0;Xd=new Ag;Ze=new Ag;Tf=new Ag;oa(Sb,yf);Sb=+Xd;var Qc=+Ze,ud=+Tf,oe=dh(Sb,Qc,ud);return 1E-12>oe&&(Sb=Oe,Qc=Se,ud=Pe,1E-6>ee&&(Sb=Pd,
Qc=se,ud=ye),oe=dh(Sb,Qc,ud),1E-12>oe)?[NaN,NaN]:[wg(Qc,Sb)*dg,ta(ud/oe)*dg]});var Hh=1/.7,ag=/^#([0-9a-f]{3,8})$/,ph=RegExp("^rgb\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*\\)$"),mh=RegExp("^rgb\\(\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*\\)$"),of=RegExp("^rgba\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$"),
qh=RegExp("^rgba\\(\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$"),Ii=RegExp("^hsl\\(\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*\\)$"),Fi=RegExp("^hsla\\(\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$"),
Nh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,
darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,
hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,
linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,
palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,
turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ub(Cc,nc,{copy(Sb){return Object.assign(new this.constructor,this,Sb)},displayable(){return this.rgb().displayable()},hex:Mc,formatHex:Mc,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return ed(this).formatHsl()},formatRgb:Pb,toString:Pb});Ub(Ab,kc,oc(Cc,{brighter(Sb){Sb=null==Sb?Hh:Math.pow(Hh,Sb);return new Ab(this.r*Sb,this.g*Sb,this.b*Sb,this.opacity)},
darker(Sb){Sb=null==Sb?.7:Math.pow(.7,Sb);return new Ab(this.r*Sb,this.g*Sb,this.b*Sb,this.opacity)},rgb(){return this},clamp(){return new Ab(Ed(this.r),Ed(this.g),Ed(this.b),hd(this.opacity))},displayable(){return-.5<=this.r&&255.5>this.r&&-.5<=this.g&&255.5>this.g&&-.5<=this.b&&255.5>this.b&&0<=this.opacity&&1>=this.opacity},hex:md,formatHex:md,formatHex8:function(){return`#${Qd(this.r)}${Qd(this.g)}${Qd(this.b)}${Qd(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:yd,toString:yd}));Ub(yc,
bc,oc(Cc,{brighter(Sb){Sb=null==Sb?Hh:Math.pow(Hh,Sb);return new yc(this.h,this.s,this.l*Sb,this.opacity)},darker(Sb){Sb=null==Sb?.7:Math.pow(.7,Sb);return new yc(this.h,this.s,this.l*Sb,this.opacity)},rgb(){var Sb=this.h%360+360*(0>this.h),Qc=isNaN(Sb)||isNaN(this.s)?0:this.s,ud=this.l;Qc=ud+(.5>ud?ud:1-ud)*Qc;ud=2*ud-Qc;return new Ab(tb(240<=Sb?Sb-240:Sb+120,ud,Qc),tb(Sb,ud,Qc),tb(120>Sb?Sb+240:Sb-120,ud,Qc),this.opacity)},clamp(){return new yc($c(this.h),cc(this.s),cc(this.l),hd(this.opacity))},
displayable(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity},formatHsl(){const Sb=hd(this.opacity);return`${1===Sb?"hsl(":"hsla("}${$c(this.h)}, ${100*cc(this.s)}%, ${100*cc(this.l)}%${1===Sb?")":`, ${Sb})`}`}}));const jh=Math.PI/180,Kg=180/Math.PI,Cf=4/29,nh=6/29,Ui=3*nh*nh,Gi=nh*nh*nh;Ub(cd,Ec,oc(Cc,{brighter(Sb){return new cd(this.l+18*(null==Sb?1:Sb),this.a,this.b,this.opacity)},darker(Sb){return new cd(this.l-18*(null==Sb?1:Sb),this.a,this.b,
this.opacity)},rgb(){var Sb=(this.l+16)/116,Qc=isNaN(this.a)?Sb:Sb+this.a/500,ud=isNaN(this.b)?Sb:Sb-this.b/200;Qc=.96422*od(Qc);Sb=1*od(Sb);ud=.82521*od(ud);return new Ab(Dd(3.1338561*Qc-1.6168667*Sb-.4906146*ud),Dd(-.9787684*Qc+1.9161415*Sb+.033454*ud),Dd(.0719453*Qc-.2289914*Sb+1.4052427*ud),this.opacity)}}));Ub(re,Vd,oc(Cc,{brighter(Sb){return new re(this.h,this.c,this.l+18*(null==Sb?1:Sb),this.opacity)},darker(Sb){return new re(this.h,this.c,this.l-18*(null==Sb?1:Sb),this.opacity)},rgb(){return Wd(this).rgb()}}));
const oh={},$d=Sb=>Sb.data,ug={random(){return da.random()},cumulativeNormal:da.cumulativeNormal,cumulativeLogNormal:da.cumulativeLogNormal,cumulativeUniform:da.cumulativeUniform,densityNormal:da.densityNormal,densityLogNormal:da.densityLogNormal,densityUniform:da.densityUniform,quantileNormal:da.quantileNormal,quantileLogNormal:da.quantileLogNormal,quantileUniform:da.quantileUniform,sampleNormal:da.sampleNormal,sampleLogNormal:da.sampleLogNormal,sampleUniform:da.sampleUniform,isArray:w.isArray,isBoolean:w.isBoolean,
isDate:w.isDate,isDefined(Sb){return void 0!==Sb},isNumber:w.isNumber,isObject:w.isObject,isRegExp:w.isRegExp,isString:w.isString,isTuple:I.isTuple,isValid(Sb){return null!=Sb&&Sb===Sb},toBoolean:w.toBoolean,toDate(Sb){return w.toDate(Sb)},toNumber:w.toNumber,toString:w.toString,indexof:he,join:Nd,lastindexof:qd,replace:we,reverse:Cd,slice:qe,flush:w.flush,lerp:w.lerp,merge:bg,pad:w.pad,peek:w.peek,pluck:Uc,span:w.span,inrange:w.inrange,truncate:w.truncate,rgb:kc,lab:Ec,hcl:Vd,hsl:bc,luminance:Bf,
contrast:Ye,sequence:function(Sb,Qc,ud){Sb=+Sb;Qc=+Qc;ud=2>(ue=arguments.length)?(Qc=Sb,Sb=0,1):3>ue?1:+ud;for(var oe=-1,ue=Math.max(0,Math.ceil((Qc-Sb)/ud))|0,Of=Array(ue);++oe<ue;)Of[oe]=Sb+oe*ud;return Of},format:wd,utcFormat:Hf,utcParse:$g,utcOffset:U.utcOffset,utcSequence:U.utcSequence,timeFormat:Ce,timeParse:zg,timeOffset:U.timeOffset,timeSequence:U.timeSequence,timeUnitSpecifier:U.timeUnitSpecifier,monthFormat:Y,monthAbbrevFormat:Q,dayFormat:ja,dayAbbrevFormat:pa,quarter:w.quarter,utcquarter:w.utcquarter,
week:U.week,utcweek:U.utcweek,dayofyear:U.dayofyear,utcdayofyear:U.utcdayofyear,warn:Kc,info:Kb,debug:mc,extent(Sb){return w.extent(Sb)},inScope:Xb,intersect:Ua,clampRange:w.clampRange,pinchDistance:Jb,pinchAngle:lc,screen:wh,containerSize:ib,windowSize:Wc,bandspace:sf,setdata:P,pathShape:Zg,panLinear:w.panLinear,panLog:w.panLog,panPow:w.panPow,panSymlog:w.panSymlog,zoomLinear:w.zoomLinear,zoomLog:w.zoomLog,zoomPow:w.zoomPow,zoomSymlog:w.zoomSymlog,encode:z,modify:gf,lassoAppend:function(Sb,Qc,ud,
oe=5){Sb=w.array(Sb);const ue=Sb[Sb.length-1];return void 0===ue||Math.hypot(ue[0]-Qc,ue[1]-ud)>oe?[...Sb,[Qc,ud]]:Sb},lassoPath:function(Sb){return w.array(Sb).reduce((Qc,[ud,oe],ue)=>Qc+(0==ue?`M ${ud},${oe} `:ue===Sb.length-1?" Z":`L ${ud},${oe} `),"")},intersectLasso:function(Sb,Qc,ud){const {x:oe,y:ue,mark:Of}=ud;ud=(new B.Bounds).set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const [kf,fg]of Qc)kf<ud.x1&&(ud.x1=kf),kf>ud.x2&&(ud.x2=kf),
fg<ud.y1&&(ud.y1=fg),fg>ud.y2&&(ud.y2=fg);ud.translate(oe,ue);return Ua([[ud.x1,ud.y1],[ud.x2,ud.y2]],Sb,Of).filter(kf=>{var fg=kf.y;let Zf=0;for(let qg=0,lh=Qc.length-1;qg<Qc.length;lh=qg++){const [pi,bj]=Qc[lh],[Sh,Eh]=Qc[qg];Eh>fg!=bj>fg&&kf.x<(pi-Sh)*(fg-Eh)/(bj-Eh)+Sh&&Zf++}return Zf&1})}},nj="view item group xy x y".split(" "),eg={},Zd={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:Sb=>`_[${w.stringValue("$"+Sb)}]`,functions:function(Sb){const Qc=u.functions(Sb);
nj.forEach(ud=>Qc[ud]="event.vega."+ud);for(const ud in ug)Qc[ud]="this."+ud;w.extend(Qc,wa(Sb,ug,eg));return Qc},constants:u.constants,visitors:eg},ve=u.codegenExpression(Zd);Xa("bandwidth",Jf,ba);Xa("copy",tf,ba);Xa("domain",lf,ba);Xa("range",rg,ba);Xa("invert",Lg,ba);Xa("scale",Pg,ba);Xa("gradient",fh,ba);Xa("geoArea",vf,ba);Xa("geoBounds",ne,ba);Xa("geoCentroid",wf,ba);Xa("geoShape",eh,ba);Xa("geoScale",Ic,ba);Xa("indata",V,K);Xa("data",X,J);Xa("treePath",ei,J);Xa("treeAncestors",Yh,J);Xa("vlSelectionTest",
N.selectionTest,N.selectionVisitor);Xa("vlSelectionIdTest",N.selectionIdTest,N.selectionVisitor);Xa("vlSelectionResolve",N.selectionResolve,N.selectionVisitor);Xa("vlSelectionTuples",N.selectionTuples);A.DataPrefix=":";A.IndexPrefix="@";A.ScalePrefix="%";A.SignalPrefix="$";A.bandspace=sf;A.bandwidth=Jf;A.codeGenerator=ve;A.codegenParams=Zd;A.containerSize=ib;A.contrast=Ye;A.copy=tf;A.data=X;A.dataVisitor=J;A.dayAbbrevFormat=pa;A.dayFormat=ja;A.debug=mc;A.domain=lf;A.encode=z;A.expressionFunction=
Xa;A.format=wd;A.functionContext=ug;A.geoArea=vf;A.geoBounds=ne;A.geoCentroid=wf;A.geoScale=Ic;A.geoShape=eh;A.inScope=Xb;A.indata=V;A.indataVisitor=K;A.indexof=he;A.info=Kb;A.invert=Lg;A.join=Nd;A.lastindexof=qd;A.luminance=Bf;A.merge=bg;A.modify=gf;A.monthAbbrevFormat=Q;A.monthFormat=Y;A.parseExpression=function(Sb,Qc){const ud={};let oe;try{Sb=w.isString(Sb)?Sb:w.stringValue(Sb)+"",oe=u.parseExpression(Sb)}catch(ue){w.error("Expression parse error: "+Sb)}oe.visit(ue=>{if(ue.type===u.CallExpression){var Of=
ue.callee.name,kf=Zd.visitors[Of];kf&&kf(Of,ue.arguments,Qc,ud)}});Sb=ve(oe);Sb.globals.forEach(ue=>{const Of="$"+ue;!w.hasOwnProperty(ud,Of)&&Qc.getSignal(ue)&&(ud[Of]=Qc.signalRef(ue))});return{$expr:w.extend({code:Sb.code},Qc.options.ast?{ast:oe}:null),$fields:Sb.fields,$params:ud}};A.pathShape=Zg;A.pinchAngle=lc;A.pinchDistance=Jb;A.pluck=Uc;A.range=rg;A.replace=we;A.reverse=Cd;A.scale=Pg;A.scaleGradient=fh;A.scaleVisitor=ba;A.screen=wh;A.setdata=P;A.slice=qe;A.timeFormat=Ce;A.timeParse=zg;A.treeAncestors=
Yh;A.treePath=ei;A.utcFormat=Hf;A.utcParse=$g;A.warn=Kc;A.windowSize=Wc})};
shadow$provide[446]=function(ob,Ba,Gb,Ea){(function(A,w){"object"===typeof Ea&&"undefined"!==typeof Gb?w(Ea,Ba(421),Ba(426)):"function"===typeof define&&define.amd?define(["exports","vega-util","vega-dataflow"],w):(A="undefined"!==typeof globalThis?globalThis:A||self,w(A.vega={},A.vega,A.vega))})(this,function(A,w,u){function x(z,G,Y){Y.endsWith(";")||(Y="return("+Y+");");G=Function(...G.concat(Y));return z&&z.functions?G.bind(z.functions):G}function I(z,G,Y){if(!z||!w.isObject(z))return z;for(let Q=
0,ja=V.length,pa;Q<ja;++Q)if(pa=V[Q],w.hasOwnProperty(z,pa.key))return pa.parse(z,G,Y);return z}function B(z,G,Y,Q){this.dataflow=z;this.transforms=G;this.events=z.events.bind(z);this.expr=Q||X;this.signals={};this.scales={};this.nodes={};this.data={};this.fn={};Y&&(this.functions=Object.create(Y),this.functions.context=this)}function N(z){this.dataflow=z.dataflow;this.transforms=z.transforms;this.events=z.events;this.expr=z.expr;this.signals=Object.create(z.signals);this.scales=Object.create(z.scales);
this.nodes=Object.create(z.nodes);this.data=Object.create(z.data);this.fn=Object.create(z.fn);z.functions&&(this.functions=Object.create(z.functions),this.functions.context=this)}const da=w.toSet(["rule"]),U=w.toSet(["group","image","rect"]);var X={operator:(z,G)=>x(z,["_"],G.code),parameter:(z,G)=>x(z,["datum","_"],G.code),event:(z,G)=>x(z,["event"],G.code),handler:(z,G)=>x(z,["_","event"],`var datum=event.item&&event.item.datum;return ${G.code};`),encode:(z,G)=>{const {marktype:Y,channels:Q}=G;
G="var o\x3ditem,datum\x3do.datum,m\x3d0,$;";for(var ja in Q){const pa="o["+w.stringValue(ja)+"]";G+=`$=${Q[ja].code};if(${pa}!==$)${pa}=$,m=1;`}ja="";da[Y]||(Q.x2&&(Q.x?(U[Y]&&(ja+="if(o.x\x3eo.x2)$\x3do.x,o.x\x3do.x2,o.x2\x3d$;"),ja+="o.width\x3do.x2-o.x;"):ja+="o.x\x3do.x2-(o.width||0);"),Q.xc&&(ja+="o.x\x3do.xc-(o.width||0)/2;"),Q.y2&&(Q.y?(U[Y]&&(ja+="if(o.y\x3eo.y2)$\x3do.y,o.y\x3do.y2,o.y2\x3d$;"),ja+="o.height\x3do.y2-o.y;"):ja+="o.y\x3do.y2-(o.height||0);"),Q.yc&&(ja+="o.y\x3do.yc-(o.height||0)/2;"));
G+=ja;return x(z,["item","_"],G+"return m;")},codegen:{get(z){z=`[${z.map(w.stringValue).join("][")}]`;const G=Function("_",`return _${z};`);G.path=z;return G},comparator(z,G){let Y;z=Function("a","b","var u, v; return "+z.map((Q,ja)=>{const pa=G[ja];let J;Q.path?(J=`a${Q.path}`,Q=`b${Q.path}`):((Y=Y||{})["f"+ja]=Q,J=`this.f${ja}(a)`,Q=`this.f${ja}(b)`);ja=-pa;return`((u = ${J}) < (v = ${Q}) || u == null) && v != null ? ${ja}
  : (u > v || v == null) && u != null ? ${pa}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${ja}
  : v !== v && u === u ? ${pa} : `}).join("")+"0;");return Y?z.bind(Y):z}}},V=[{key:"$ref",parse:function(z,G){return G.get(z.$ref)||w.error("Operator not defined: "+z.$ref)}},{key:"$key",parse:function(z,G){const Y="k:"+z.$key+"_"+!!z.$flat;return G.fn[Y]||(G.fn[Y]=w.key(z.$key,z.$flat,G.expr.codegen))}},{key:"$expr",parse:function(z,G,Y){z.$params&&G.parseParameters(z.$params,Y);Y="e:"+z.$expr.code;return G.fn[Y]||(G.fn[Y]=w.accessor(G.parameterExpression(z.$expr),z.$fields))}},{key:"$field",parse:function(z,
G){if(!z.$field)return null;const Y="f:"+z.$field+"_"+z.$name;return G.fn[Y]||(G.fn[Y]=w.field(z.$field,z.$name,G.expr.codegen))}},{key:"$encode",parse:function(z,G){z=z.$encode;const Y={};for(const Q in z){const ja=z[Q];Y[Q]=w.accessor(G.encodeExpression(ja.$expr),ja.$fields);Y[Q].output=ja.$output}return Y}},{key:"$compare",parse:function(z,G){const Y="c:"+z.$compare+"_"+z.$order,Q=w.array(z.$compare).map(ja=>ja&&ja.$tupleid?u.tupleid:ja);return G.fn[Y]||(G.fn[Y]=w.compare(Q,z.$order,G.expr.codegen))}},
{key:"$context",parse:function(z,G){return G}},{key:"$subflow",parse:function(z,G){const Y=z.$subflow;return function(Q,ja,pa){const J=G.fork().parse(Y);Q=J.get(Y.operators[0].id);(ja=J.signals.parent)&&ja.set(pa);Q.detachSubflow=()=>G.detach(J);return Q}}},{key:"$tupleid",parse:function(){return u.tupleid}}];const P={skip:!0};B.prototype=N.prototype={fork(){const z=new N(this);(this.subcontext||(this.subcontext=[])).push(z);return z},detach(z){this.subcontext=this.subcontext.filter(Y=>Y!==z);const G=
Object.keys(z.nodes);for(const Y of G)z.nodes[Y]._targets=null;for(const Y of G)z.nodes[Y].detach();z.nodes=null},get(z){return this.nodes[z]},set(z,G){return this.nodes[z]=G},add(z,G){const Y=this,Q=Y.dataflow,ja=z.value;Y.set(z.id,G);"collect"===(z.type+"").toLowerCase()&&ja&&(ja.$ingest?Q.ingest(G,ja.$ingest,ja.$format):ja.$request?Q.preload(G,ja.$request,ja.$format):Q.pulse(G,Q.changeset().insert(ja)));z.root&&(Y.root=G);if(z.parent){let pa=Y.get(z.parent.$ref);pa?(Q.connect(pa,[G]),G.targets().add(pa)):
(Y.unresolved=Y.unresolved||[]).push(()=>{pa=Y.get(z.parent.$ref);Q.connect(pa,[G]);G.targets().add(pa)})}z.signal&&(Y.signals[z.signal]=G);z.scale&&(Y.scales[z.scale]=G);if(z.data)for(const pa in z.data){const J=Y.data[pa]||(Y.data[pa]={});z.data[pa].forEach(K=>J[K]=G)}},resolve(){(this.unresolved||[]).forEach(z=>z());delete this.unresolved;return this},operator(z,G){this.add(z,this.dataflow.add(z.value,G))},transform(z,G){this.add(z,this.dataflow.add(this.transforms[(G+"").toLowerCase()]))},stream(z,
G){this.set(z.id,G)},update(z,G,Y,Q,ja){this.dataflow.on(G,Y,Q,ja,z.options)},operatorExpression(z){return this.expr.operator(this,z)},parameterExpression(z){return this.expr.parameter(this,z)},eventExpression(z){return this.expr.event(this,z)},handlerExpression(z){return this.expr.handler(this,z)},encodeExpression(z){return this.expr.encode(this,z)},parse:function(z){const G=this,Y=z.operators||[];z.background&&(G.background=z.background);z.eventConfig&&(G.eventConfig=z.eventConfig);z.locale&&(G.locale=
z.locale);Y.forEach(Q=>G.parseOperator(Q));Y.forEach(Q=>G.parseOperatorParameters(Q));(z.streams||[]).forEach(Q=>G.parseStream(Q));(z.updates||[]).forEach(Q=>G.parseUpdate(Q));return G.resolve()},parseOperator:function(z){"operator"!==(z.type+"").toLowerCase()&&z.type?this.transform(z,z.type):this.operator(z,z.update?this.operatorExpression(z.update):null)},parseOperatorParameters:function(z){if(z.params){const G=this.get(z.id);G||w.error("Invalid operator id: "+z.id);this.dataflow.connect(G,G.parameters(this.parseParameters(z.params),
z.react,z.initonly))}},parseParameters:function(z,G){G=G||{};const Y=this;for(const Q in z){const ja=z[Q];G[Q]=w.isArray(ja)?ja.map(pa=>I(pa,Y,G)):I(ja,Y,G)}return G},parseStream:function(z){var G=this,Y=null!=z.filter?G.eventExpression(z.filter):void 0,Q=null!=z.stream?G.get(z.stream):void 0;if(z.source)Q=G.events(z.source,z.type,Y);else if(z.merge){var ja=z.merge.map(pa=>G.get(pa));Q=ja[0].merge.apply(ja[0],ja.slice(1))}z.between&&(ja=z.between.map(pa=>G.get(pa)),Q=Q.between(ja[0],ja[1]));z.filter&&
(Q=Q.filter(Y));null!=z.throttle&&(Q=Q.throttle(+z.throttle));null!=z.debounce&&(Q=Q.debounce(+z.debounce));null==Q&&w.error("Invalid stream definition: "+JSON.stringify(z));z.consume&&Q.consume(!0);G.stream(z,Q)},parseUpdate:function(z){var G=w.isObject(G=z.source)?G.$ref:G;G=this.get(G);var Y=z.update,Q=void 0;G||w.error("Source not defined: "+z.source);var ja=z.target&&z.target.$expr?this.eventExpression(z.target.$expr):this.get(z.target);Y&&Y.$expr&&(Y.$params&&(Q=this.parseParameters(Y.$params)),
Y=this.handlerExpression(Y.$expr));this.update(z,G,ja,Y,Q)},getState:function(z){var G=this,Y={};if(z.signals){var Q=Y.signals={};Object.keys(G.signals).forEach(pa=>{const J=G.signals[pa];z.signals(pa,J)&&(Q[pa]=J.value)})}if(z.data){var ja=Y.data={};Object.keys(G.data).forEach(pa=>{const J=G.data[pa];z.data(pa,J)&&(ja[pa]=J.input.value)})}G.subcontext&&!1!==z.recurse&&(Y.subcontext=G.subcontext.map(pa=>pa.getState(z)));return Y},setState:function(z){var G=this,Y=G.dataflow,Q=z.data,ja=z.signals;
Object.keys(ja||{}).forEach(pa=>{Y.update(G.signals[pa],ja[pa],P)});Object.keys(Q||{}).forEach(pa=>{Y.pulse(G.data[pa].input,Y.changeset().remove(w.truthy).insert(Q[pa]))});(z.subcontext||[]).forEach((pa,J)=>{(J=G.subcontext[J])&&J.setState(pa)})}};A.context=function(z,G,Y,Q){return new B(z,G,Y,Q)}})};
shadow$provide[447]=function(ob,Ba,Gb,Ea){(function(A,w){"object"===typeof Ea&&"undefined"!==typeof Gb?w(Ea,Ba(421),Ba(426),Ba(431),Ba(445),Ba(446),Ba(424)):"function"===typeof define&&define.amd?define("exports vega-util vega-dataflow vega-scenegraph vega-functions vega-runtime vega-format".split(" "),w):(A="undefined"!==typeof globalThis?globalThis:A||self,w(A.vega={},A.vega,A.vega,A.vega,A.vega,A.vega,A.vega))})(this,function(A,w,u,x,I,B,N){function da(bc){const yc=bc.container();yc&&(yc.setAttribute("role",
"graphics-document"),yc.setAttribute("aria-roleDescription","visualization"),U(yc,bc.description()))}function U(bc,yc){bc&&(null==yc?bc.removeAttribute("aria-label"):bc.setAttribute("aria-label",yc))}function X(bc){bc.add(null,yc=>{bc._background=yc.bg;bc._resize=1;return yc.bg},{bg:bc._signals.background})}function V(bc){const yc=bc._signals.cursor||(bc._signals.cursor=bc.add({user:"default",item:null}));bc.on(bc.events("view","pointermove"),yc,($c,cc)=>{const tb=($c=yc.value)?w.isString($c)?$c:
$c.user:"default";cc=cc.item&&cc.item.cursor||null;return $c&&tb===$c.user&&cc==$c.item?$c:{user:tb,item:cc}});bc.add(null,function($c){$c=$c.cursor;let cc=this.value;w.isString($c)||(cc=$c.item,$c=$c.user);P(bc,$c&&"default"!==$c?$c:cc||$c);return cc},{cursor:yc})}function P(bc,yc){if(bc=bc.globalCursor()?"undefined"!==typeof document&&document.body:bc.container())return null==yc?bc.style.removeProperty("cursor"):bc.style.cursor=yc}function z(bc,yc){bc=bc._runtime.data;w.hasOwnProperty(bc,yc)||w.error("Unrecognized data set: "+
yc);return bc[yc]}function G(bc,yc){u.isChangeSet(yc)||w.error("Second argument to changes must be a changeset.");bc=z(this,bc);bc.modified=!0;return this.pulse(bc.input,yc)}function Y(bc){var yc=bc.padding();return Math.max(0,bc._viewWidth+yc.left+yc.right)}function Q(bc){var yc=bc.padding();return Math.max(0,bc._viewHeight+yc.top+yc.bottom)}function ja(bc){var yc=bc.padding();bc=bc._origin;return[yc.left+bc[0],yc.top+bc[1]]}function pa(bc){var yc=ja(bc),$c=Y(bc),cc=Q(bc);bc._renderer.background(bc.background());
bc._renderer.resize($c,cc,yc);bc._handler.origin(yc);bc._resizeListeners.forEach(tb=>{try{tb($c,cc)}catch(tc){bc.error(tc)}})}function J(bc,yc,$c){function cc(Ec){var cd=tc,bd;if(Ec)for(bd=yc;bd;bd=bd.mark.group)if(bd.mark.name===Ec){cd=bd;break}return cd&&cd.mark&&cd.mark.interactive?cd:{}}function tb(Ec){if(!Ec)return $c;w.isString(Ec)&&(Ec=cc(Ec));const cd=$c.slice();for(;Ec;)cd[0]-=Ec.x||0,cd[1]-=Ec.y||0,Ec=Ec.mark&&Ec.mark.group;return cd}const tc=yc?"group"===yc.mark.marktype?yc:yc.mark.group:
null;return{view:w.constant(bc),item:w.constant(yc||{}),group:cc,xy:tb,x:Ec=>tb(Ec)[0],y:Ec=>tb(Ec)[1]}}function K(bc){bc=w.extend({defaults:{}},bc);const yc=($c,cc)=>{cc.forEach(tb=>{w.isArray($c[tb])&&($c[tb]=w.toSet($c[tb]))})};yc(bc.defaults,["prevent","allow"]);yc(bc,["view","window","selector"]);return bc}function ba(bc,yc,$c,cc){bc._eventListeners.push({type:$c,sources:w.array(yc),handler:cc})}function O(bc,yc,$c){const cc=bc._eventConfig&&bc._eventConfig[yc];return!1===cc||w.isObject(cc)&&
!cc[$c]?(bc.warn(`Blocked ${yc} ${$c} event listener.`),!1):!0}function fa(bc){return bc.item}function wa(bc){return bc.item.mark.source}function ta(bc){return function(yc,$c){return $c.vega.view().changeset().encode($c.item,bc)}}function aa(bc,yc,$c){bc=document.createElement(bc);for(const cc in yc)bc.setAttribute(cc,yc[cc]);null!=$c&&(bc.textContent=$c);return bc}function ha(bc,yc,$c){var cc=(yc-bc)/Math.max(0,$c),tb=Math.floor(Math.log10(cc));cc/=Math.pow(10,tb);cc=cc>=Pb?10:cc>=nc?5:cc>=rc?2:
1;let tc;0>tb?(tc=Math.pow(10,-tb)/cc,tb=Math.round(bc*tc),cc=Math.round(yc*tc),tb/tc<bc&&++tb,cc/tc>yc&&--cc,tc=-tc):(tc=Math.pow(10,tb)*cc,tb=Math.round(bc/tc),cc=Math.round(yc/tc),tb*tc<bc&&++tb,cc*tc>yc&&--cc);return cc<tb&&.5<=$c&&2>$c?ha(bc,yc,2*$c):[tb,cc,tc]}function ka(bc,yc,$c){return ha(+bc,+yc,+$c)[2]}function H(bc,yc,$c){yc=+yc;bc=+bc;$c=+$c;const cc=yc<bc;bc=cc?ka(yc,bc,$c):ka(bc,yc,$c);return(cc?-1:1)*(0>bc?1/-bc:bc)}function oa(bc,yc,$c){if(yc){var cc=$c.param,tb=$c.state;tb||(tb=
$c.state={elements:null,active:!1,set:null,update:tc=>{tc!=bc.signal(cc.signal)&&bc.runAsync(null,()=>{tb.source=!0;bc.signal(cc.signal,tc)})}},cc.debounce&&(tb.update=w.debounce(cc.debounce,tb.update)));(null==cc.input&&cc.element?ea:D)(tb,yc,cc,bc);tb.active||(bc.on(bc._signals[cc.signal],null,()=>{tb.source?tb.source=!1:tb.set(bc.signal(cc.signal))}),tb.active=!0);return tb}}function ea(bc,yc,$c,cc){const tb=$c.event||"input",tc=()=>bc.update(yc.value);cc.signal($c.signal,yc.value);yc.addEventListener(tb,
tc);ba(cc,yc,tb,tc);bc.set=Ec=>{yc.value=Ec;Ec=yc.dispatchEvent;var cd="undefined"!==typeof Event?new Event(tb):{type:tb};Ec.call(yc,cd)}}function D(bc,yc,$c,cc){cc=cc.signal($c.signal);const tb=aa("div",{"class":"vega-bind"}),tc="radio"===$c.input?tb:tb.appendChild(aa("label"));tc.appendChild(aa("span",{"class":"vega-bind-name"},$c.name||$c.signal));yc.appendChild(tb);yc=R;switch($c.input){case "checkbox":yc=la;break;case "select":yc=Ia;break;case "radio":yc=Ma;break;case "range":yc=Ta}yc(bc,tc,
$c,cc)}function R(bc,yc,$c,cc){const tb=aa("input");for(const tc in $c)"signal"!==tc&&"element"!==tc&&tb.setAttribute("input"===tc?"type":tc,$c[tc]);tb.setAttribute("name",$c.signal);tb.value=cc;yc.appendChild(tb);tb.addEventListener("input",()=>bc.update(tb.value));bc.elements=[tb];bc.set=tc=>tb.value=tc}function la(bc,yc,$c,cc){$c={type:"checkbox",name:$c.signal};cc&&($c.checked=!0);const tb=aa("input",$c);yc.appendChild(tb);tb.addEventListener("change",()=>bc.update(tb.checked));bc.elements=[tb];
bc.set=tc=>tb.checked=!!tc||null}function Ia(bc,yc,$c,cc){const tb=aa("select",{name:$c.signal}),tc=$c.labels||[];$c.options.forEach((Ec,cd)=>{const bd={value:Ec};ab(Ec,cc)&&(bd.selected=!0);tb.appendChild(aa("option",bd,(tc[cd]||Ec)+""))});yc.appendChild(tb);tb.addEventListener("change",()=>{bc.update($c.options[tb.selectedIndex])});bc.elements=[tb];bc.set=Ec=>{for(let cd=0,bd=$c.options.length;cd<bd;++cd)if(ab($c.options[cd],Ec)){tb.selectedIndex=cd;break}}}function Ma(bc,yc,$c,cc){const tb=aa("span",
{"class":"vega-bind-radio"}),tc=$c.labels||[];yc.appendChild(tb);bc.elements=$c.options.map((Ec,cd)=>{var bd={type:"radio",name:$c.signal,value:Ec};ab(Ec,cc)&&(bd.checked=!0);bd=aa("input",bd);bd.addEventListener("change",()=>bc.update(Ec));cd=aa("label",{},(tc[cd]||Ec)+"");cd.prepend(bd);tb.appendChild(cd);return bd});bc.set=Ec=>{const cd=bc.elements,bd=cd.length;for(let od=0;od<bd;++od)ab(cd[od].value,Ec)&&(cd[od].checked=!0)}}function Ta(bc,yc,$c,cc){cc=void 0!==cc?cc:(+$c.max+ +$c.min)/2;const tb=
null!=$c.max?$c.max:Math.max(100,+cc)||100,tc=$c.min||Math.min(0,tb,+cc)||0,Ec=$c.step||H(tc,tb,100),cd=aa("input",{type:"range",name:$c.signal,min:tc,max:tb,step:Ec});cd.value=cc;const bd=aa("span",{},+cc);yc.appendChild(cd);yc.appendChild(bd);yc=()=>{bd.textContent=cd.value;bc.update(+cd.value)};cd.addEventListener("input",yc);cd.addEventListener("change",yc);bc.elements=[cd];bc.set=od=>{cd.value=od;bd.textContent=od}}function ab(bc,yc){return bc===yc||bc+""===yc+""}function db(bc,yc,$c,cc,tb,tc){yc=
yc||new cc(bc.loader());return yc.initialize($c,Y(bc),Q(bc),ja(bc),tb,tc).background(bc.background())}function ub(bc,yc){return yc?function(){try{yc.apply(this,arguments)}catch($c){bc.error($c)}}:null}function pb(bc,yc,$c,cc){const tb=(new cc(bc.loader(),ub(bc,bc.tooltip()))).scene(bc.scenegraph().root).initialize($c,ja(bc),bc);yc&&yc.handlers().forEach(tc=>{tb.on(tc.type,tc.handler)});return tb}function Ya(bc,yc,$c){if("string"===typeof yc)if("undefined"!==typeof document){if(yc=document.querySelector(yc),
!yc)return bc.error("Signal bind element not found: "+yc),null}else return bc.error("DOM document instance not found."),null;if(yc&&$c)try{yc.textContent=""}catch(cc){yc=null,bc.error(cc)}return yc}function Va(bc){w.isObject(bc)?bc={top:+bc.top||0,bottom:+bc.bottom||0,left:+bc.left||0,right:+bc.right||0}:(bc=+bc||0,bc={top:bc,bottom:bc,left:bc,right:bc});return bc}async function Pa(bc,yc,$c,cc){var tb=x.renderModule(yc);(tb=tb&&tb.headless)||w.error("Unrecognized renderer type: "+yc);await bc.runAsync();
return db(bc,null,null,tb,$c,cc).renderAsync(bc._scenegraph.root)}function Ha(bc,yc,$c){return B.context(bc,u.transforms,I.functionContext,$c).parse(yc)}function Ca(bc,yc){var $c=bc.autosize();bc=bc.padding();return yc-($c&&"padding"===$c.contains?bc.left+bc.right:0)}function Aa(bc,yc){var $c=bc.autosize();bc=bc.padding();return yc-($c&&"padding"===$c.contains?bc.top+bc.bottom:0)}function Ga(bc){function yc(){bc._autosize=bc._resize=1}var $c=bc._signals,cc=$c.width,tb=$c.height;$c=$c.padding;bc._resizeWidth=
bc.add(null,Ec=>{bc._width=Ec.size;bc._viewWidth=Ca(bc,Ec.size);yc()},{size:cc});bc._resizeHeight=bc.add(null,Ec=>{bc._height=Ec.size;bc._viewHeight=Aa(bc,Ec.size);yc()},{size:tb});const tc=bc.add(null,yc,{pad:$c});bc._resizeWidth.rank=cc.rank+1;bc._resizeHeight.rank=tb.rank+1;tc.rank=$c.rank+1}function Ka(bc,yc){return yc.modified&&w.isArray(yc.input.value)&&!bc.startsWith("_:vega:_")}function cb(bc,yc){return!("parent"===bc||yc instanceof u.transforms.proxy)}function fb(){return Ed||(ed(La),Ed=
fd.now()+Qd)}function La(){Ed=0}function Bb(){this._call=this._time=this._next=null}function Ob(){Ed=(hd=fd.now())+Qd;Jc=kc=0;try{fb();++Jc;for(var bc=md,yc;bc;)0<=(yc=Ed-bc._time)&&bc._call.call(void 0,yc),bc=bc._next;--Jc}finally{Jc=0;bc=md;for(var $c=Infinity;bc;)if(bc._call){$c>bc._time&&($c=bc._time);var cc=bc;bc=bc._next}else yc=bc._next,bc._next=null,bc=cc?cc._next=yc:md=yc;yd=cc;sc($c);Ed=0}}function ec(){var bc=fd.now(),yc=bc-hd;1E3<yc&&(Qd-=yc,hd=bc)}function sc(bc){Jc||(kc&&(kc=clearTimeout(kc)),
24<bc-Ed?(Infinity>bc&&(kc=setTimeout(Ob,bc-fd.now()-Qd)),Ab&&(Ab=clearInterval(Ab))):(Ab||(hd=fd.now(),Ab=setInterval(ec,1E3)),Jc=1,ed(Ob)))}function Ic(bc,yc,$c){var cc=new Bb,tb=yc;if(null==yc)return cc.restart(bc,yc,$c),cc;cc._restart=cc.restart;cc.restart=function(tc,Ec,cd){Ec=+Ec;cd=null==cd?fb():+cd;cc._restart(function Dd(od){od+=tb;cc._restart(Dd,tb+=Ec,cd);tc(od)},Ec,cd)};cc.restart(bc,yc,$c);return cc}function Xb(bc,yc,$c,cc){if(bc=bc.element())yc=bc.setAttribute,cc=null==cc?"":w.isArray(cc)?
"["+cc.map(Kc).join(", ")+"]":w.isObject(cc)&&!w.isDate(cc)?Wb(cc):cc+"",yc.call(bc,"title",cc)}function Wb(bc){return Object.keys(bc).map(yc=>{const $c=bc[yc];return yc+": "+(w.isArray($c)?"["+$c.map(Kc).join(", ")+"]":Kc($c))}).join("\n")}function Kc(bc){return w.isArray(bc)?"[…]":w.isObject(bc)&&!w.isDate(bc)?"{…}":bc}function Kb(bc,yc){yc=yc||{};u.Dataflow.call(this);yc.loader&&this.loader(yc.loader);yc.logger&&this.logger(yc.logger);null!=yc.logLevel&&this.logLevel(yc.logLevel);if(yc.locale||
bc.locale){var $c=w.extend({},bc.locale,yc.locale);this.locale(N.locale($c.number,$c.time))}this._elBind=this._el=null;this._renderType=yc.renderer||x.RenderType.Canvas;this._scenegraph=new x.Scenegraph;$c=this._scenegraph.root;this._renderer=null;this._tooltip=yc.tooltip||Xb;this._redraw=!0;this._handler=(new x.CanvasHandler).scene($c);this._preventDefault=this._globalCursor=!1;this._timers=[];this._eventListeners=[];this._resizeListeners=[];this._eventConfig=K(bc.eventConfig);this.globalCursor(this._eventConfig.globalCursor);
const cc=Ha(this,bc,yc.expr);this._runtime=cc;this._signals=cc.signals;this._bind=(bc.bindings||[]).map(tb=>({state:null,param:w.extend({},tb)}));cc.root&&cc.root.set($c);$c.source=cc.data.root.input;this.pulse(cc.data.root.input,this.changeset().insert($c.items));this._width=this.width();this._height=this.height();this._viewWidth=Ca(this,this._width);this._viewHeight=Aa(this,this._height);this._origin=[0,0];this._resize=0;this._autosize=1;Ga(this);X(this);V(this);this.description(bc.description);
yc.hover&&this.hover();yc.container&&this.initialize(yc.container,yc.bind);yc.watchPixelRatio&&this._watchPixelRatio()}function mc(bc,yc){return w.hasOwnProperty(bc._signals,yc)?bc._signals[yc]:w.error("Unrecognized signal name: "+w.stringValue(yc))}function Ub(bc,yc){bc=(bc._targets||[]).filter($c=>$c._update&&$c._update.handler===yc);return bc.length?bc[0]:null}function oc(bc,yc,$c,cc){let tb=Ub($c,cc);tb||(tb=ub(bc,()=>cc(yc,$c.value)),tb.handler=cc,bc.on($c,null,tb));return bc}function Cc(bc,
yc,$c){($c=Ub(yc,$c))&&yc._targets.remove($c);return bc}const Mc={trap:!1},Pb=Math.sqrt(50),nc=Math.sqrt(10),rc=Math.sqrt(2);var Hb={skip:!0},Jc=0,kc=0,Ab=0,md,yd,hd=0,Ed=0,Qd=0,fd="object"===typeof performance&&performance.now?performance:Date,ed="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(bc){setTimeout(bc,17)};Bb.prototype={constructor:Bb,restart:function(bc,yc,$c){if("function"!==typeof bc)throw new TypeError("callback is not a function");
$c=(null==$c?fb():+$c)+(null==yc?0:+yc);this._next||yd===this||(yd?yd._next=this:md=this,yd=this);this._call=bc;this._time=$c;sc()},stop:function(){this._call&&(this._call=null,this._time=Infinity,sc())}};w.inherits(Kb,u.Dataflow,{async evaluate(bc,yc,$c){await u.Dataflow.prototype.evaluate.call(this,bc,yc);if(this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,pa(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(cc){this.error(cc)}$c&&
u.asyncCallback(this,$c);return this},dirty(bc){this._redraw=!0;this._renderer&&this._renderer.dirty(bc)},description(bc){if(arguments.length){const yc=null!=bc?bc+"":null;yc!==this._desc&&U(this._el,this._desc=yc);return this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(bc,yc,$c){const cc=mc(this,bc);return 1===arguments.length?cc.value:this.update(cc,yc,$c)},width(bc){return arguments.length?this.signal("width",
bc):this.signal("width")},height(bc){return arguments.length?this.signal("height",bc):this.signal("height")},padding(bc){return arguments.length?this.signal("padding",Va(bc)):Va(this.signal("padding"))},autosize(bc){return arguments.length?this.signal("autosize",bc):this.signal("autosize")},background(bc){return arguments.length?this.signal("background",bc):this.signal("background")},renderer(bc){if(!arguments.length)return this._renderType;x.renderModule(bc)||w.error("Unrecognized renderer type: "+
bc);bc!==this._renderType&&(this._renderType=bc,this._resetRenderer());return this},tooltip(bc){if(!arguments.length)return this._tooltip;bc!==this._tooltip&&(this._tooltip=bc,this._resetRenderer());return this},loader(bc){if(!arguments.length)return this._loader;bc!==this._loader&&(u.Dataflow.prototype.loader.call(this,bc),this._resetRenderer());return this},resize(){this._autosize=1;return this.touch(mc(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,
this._elBind))},_resizeView:function(bc,yc,$c,cc,tb,tc){this.runAfter(Ec=>{let cd=0;Ec._autosize=0;Ec.width()!==$c&&(cd=1,Ec.signal("width",$c,Hb),Ec._resizeWidth.skip(!0));Ec.height()!==cc&&(cd=1,Ec.signal("height",cc,Hb),Ec._resizeHeight.skip(!0));Ec._viewWidth!==bc&&(Ec._resize=1,Ec._viewWidth=bc);Ec._viewHeight!==yc&&(Ec._resize=1,Ec._viewHeight=yc);if(Ec._origin[0]!==tb[0]||Ec._origin[1]!==tb[1])Ec._resize=1,Ec._origin=tb;cd&&Ec.run("enter");tc&&Ec.runAfter(bd=>bd.resize())},!1,1)},addEventListener(bc,
yc,$c){let cc=yc;$c&&!1===$c.trap||(cc=ub(this,yc),cc.raw=yc);this._handler.on(bc,cc);return this},removeEventListener(bc,yc){for(var $c=this._handler.handlers(bc),cc=$c.length,tb,tc;0<=--cc;)if(tc=$c[cc].type,tb=$c[cc].handler,bc===tc&&(yc===tb||yc===tb.raw)){this._handler.off(tc,tb);break}return this},addResizeListener(bc){const yc=this._resizeListeners;yc.includes(bc)||yc.push(bc);return this},removeResizeListener(bc){var yc=this._resizeListeners;bc=yc.indexOf(bc);0<=bc&&yc.splice(bc,1);return this},
addSignalListener(bc,yc){return oc(this,bc,mc(this,bc),yc)},removeSignalListener(bc,yc){return Cc(this,mc(this,bc),yc)},addDataListener(bc,yc){return oc(this,bc,z(this,bc).values,yc)},removeDataListener(bc,yc){return Cc(this,z(this,bc).values,yc)},globalCursor(bc){if(arguments.length){if(this._globalCursor!==!!bc){const yc=P(this,null);this._globalCursor=!!bc;yc&&P(this,yc)}return this}return this._globalCursor},preventDefault(bc){return arguments.length?(this._preventDefault=bc,this):this._preventDefault},
timer:function(bc,yc){this._timers.push(Ic(function($c){bc({timestamp:Date.now(),elapsed:$c})},yc))},events:function(bc,yc,$c){var cc=this,tb=new u.EventStream($c);$c=function(bd,od){cc.runAsync(null,()=>{var Dd;if(Dd="view"===bc){var xd=cc._eventConfig.defaults;Dd=xd.prevent;xd=xd.allow;Dd=!1===Dd||!0===xd?!1:!0===Dd||!1===xd?!0:Dd?Dd[yc]:xd?!xd[yc]:cc.preventDefault()}Dd&&bd.preventDefault();Dd=tb.receive;xd=(xd=cc._renderer)&&xd.canvas();if(xd){var sd=ja(cc);var Vd=bd.changedTouches?bd.changedTouches[0]:
bd;Vd=x.point(Vd,xd);Vd[0]-=sd[0];Vd[1]-=sd[1]}bd.dataflow=cc;bd.item=od;bd.vega=J(cc,od,Vd);Dd.call(tb,bd)})};var tc;if("timer"===bc)O(cc,"timer",yc)&&cc.timer($c,yc);else if("view"===bc)O(cc,"view",yc)&&cc.addEventListener(yc,$c,Mc);else if("window"===bc?O(cc,"window",yc)&&"undefined"!==typeof window&&(tc=[window]):"undefined"!==typeof document&&O(cc,"selector",yc)&&(tc=Array.from(document.querySelectorAll(bc))),tc){for(var Ec=0,cd=tc.length;Ec<cd;++Ec)tc[Ec].addEventListener(yc,$c);ba(cc,tc,yc,
$c)}else cc.warn("Can not resolve event source: "+bc);return tb},finalize:function(){var bc=this._tooltip,yc=this._timers,$c=this._eventListeners,cc;for(cc=yc.length;0<=--cc;)yc[cc].stop();for(cc=$c.length;0<=--cc;){var tb=$c[cc];for(yc=tb.sources.length;0<=--yc;)tb.sources[yc].removeEventListener(tb.type,tb.handler)}bc&&bc.call(this,this._handler,null,null,null);return this},hover:function(bc,yc){bc=[bc||"hover"];yc=[yc||"update",bc[0]];this.on(this.events("view","pointerover",fa),wa,ta(bc));this.on(this.events("view",
"pointerout",fa),wa,ta(yc));return this},data:function(bc,yc){return 2>arguments.length?z(this,bc).values.value:G.call(this,bc,u.changeset().remove(w.truthy).insert(yc))},change:G,insert:function(bc,yc){return G.call(this,bc,u.changeset().insert(yc))},remove:function(bc,yc){return G.call(this,bc,u.changeset().remove(yc))},scale:function(bc){var yc=this._runtime.scales;w.hasOwnProperty(yc,bc)||w.error("Unrecognized scale or projection: "+bc);return yc[bc].value},initialize:function(bc,yc){const $c=
this;var cc=$c._renderType;const tb=$c._eventConfig.bind;var tc=x.renderModule(cc);bc=$c._el=bc?Ya($c,bc,!0):null;da($c);tc||$c.error("Unrecognized renderer type: "+cc);cc=tc.handler||x.CanvasHandler;tc=bc?tc.renderer:tc.headless;$c._renderer=tc?db($c,$c._renderer,bc,tc):null;$c._handler=pb($c,$c._handler,bc,cc);$c._redraw=!0;bc&&"none"!==tb&&(yc=yc?$c._elBind=Ya($c,yc,!0):bc.appendChild(aa("form",{"class":"vega-bindings"})),$c._bind.forEach(Ec=>{Ec.param.element&&"container"!==tb&&(Ec.element=Ya($c,
Ec.param.element,!!Ec.param.input))}),$c._bind.forEach(Ec=>{oa($c,Ec.element||yc,Ec)}));return $c},toImageURL:async function(bc,yc){bc!==x.RenderType.Canvas&&bc!==x.RenderType.SVG&&bc!==x.RenderType.PNG&&w.error("Unrecognized image type: "+bc);yc=await Pa(this,bc,yc);bc===x.RenderType.SVG?(bc=yc.svg(),bc=new Blob([bc],{type:"image/svg+xml"}),bc=window.URL.createObjectURL(bc)):bc=yc.canvas().toDataURL("image/png");return bc},toCanvas:async function(bc,yc){return(await Pa(this,x.RenderType.Canvas,bc,
yc)).canvas()},toSVG:async function(bc){return(await Pa(this,x.RenderType.SVG,bc)).svg()},getState:function(bc){return this._runtime.getState(bc||{data:Ka,signals:cb,recurse:!0})},setState:function(bc){this.runAsync(null,yc=>{yc._trigger=!1;yc._runtime.setState(bc)},yc=>{yc._trigger=!0});return this},_watchPixelRatio:function(){if("canvas"===this.renderer()&&this._renderer._canvas){let bc=null;const yc=()=>{null!=bc&&bc();const $c=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);$c.addEventListener("change",
yc);bc=()=>{$c.removeEventListener("change",yc)};this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1;this._redraw=!0;this._resize=1;this.resize().runAsync()};yc()}}});A.View=Kb})};
shadow$provide[448]=function(ob,Ba,Gb,Ea){(function(A,w){"object"===typeof Ea&&"undefined"!==typeof Gb?w(Ea):"function"===typeof define&&define.amd?define(["exports"],w):(A="undefined"!==typeof globalThis?globalThis:A||self,w(A.vega={}))})(this,function(A){function w(X,V,P,z,G){const Y=X.length;let Q=0,ja;for(;V<Y;++V)if(ja=X[V],Q||ja!==P)G&&0<=G.indexOf(ja)?--Q:z&&0<=z.indexOf(ja)&&++Q;else break;return V}function u(X){const V=[],P=X.length;let z=0,G=0;for(;G<P;)G=w(X,G,",","[{","]}"),V.push(X.substring(z,
G).trim()),z=++G;if(0===V.length)throw"Empty event selector: "+X;return V}function x(X){if("["===X[0]){var V=X;var P=V.length;X=w(V,1,"]","[","]");if(X===P)throw"Empty between selector: "+V;P=u(V.substring(1,X));if(2!==P.length)throw"Between selector must have two elements: "+V;V=V.slice(X+1).trim();if("\x3e"!==V[0])throw"Expected '\x3e' after between selector: "+V;P=P.map(x);V=x(V.slice(1).trim());V.between?V={between:P,stream:V}:V.between=P}else{P={source:da};const z=[];let G=[0,0],Y=0,Q=0,ja=X.length,
pa=0,J;if("}"===X[ja-1]){pa=X.lastIndexOf("{");if(0<=pa){try{G=I(X.substring(pa+1,ja-1))}catch(K){throw"Invalid throttle specification: "+X;}X=X.slice(0,pa).trim();ja=X.length}else throw"Unmatched right brace: "+X;pa=0}if(!ja)throw X;"@"===X[0]&&(Y=++pa);J=w(X,pa,":");J<ja&&(z.push(X.substring(Q,J).trim()),Q=pa=++J);pa=w(X,pa,"[");if(pa===ja)z.push(X.substring(Q,ja).trim());else if(z.push(X.substring(Q,pa).trim()),V=[],Q=++pa,Q===ja)throw"Unmatched left bracket: "+X;for(;pa<ja;){pa=w(X,pa,"]");if(pa===
ja)throw"Unmatched left bracket: "+X;V.push(X.substring(Q,pa).trim());if(pa<ja-1&&"["!==X[++pa])throw"Expected left bracket: "+X;Q=++pa}if(!(ja=z.length)||B.test(z[ja-1]))throw"Invalid event selector: "+X;1<ja?(P.type=z[1],Y?P.markname=z[0].slice(1):U[z[0]]?P.marktype=z[0]:P.source=z[0]):P.type=z[0];"!"===P.type.slice(-1)&&(P.consume=!0,P.type=P.type.slice(0,-1));null!=V&&(P.filter=V);G[0]&&(P.throttle=G[0]);G[1]&&(P.debounce=G[1]);V=P}return V}function I(X){const V=X.split(",");if(!X.length||2<V.length)throw X;
return V.map(P=>{P=+P;if(P!==P)throw X;return P})}const B=/[[\]{}]/,N={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let da,U;A.parseSelector=function(X,V,P){da=V||"view";U=P||N;return u(X.trim()).map(x)}})};
shadow$provide[449]=function(ob,Ba,Gb,Ea){(function(A,w){"object"===typeof Ea&&"undefined"!==typeof Gb?w(Ea,Ba(421),Ba(445),Ba(448),Ba(430),Ba(426)):"function"===typeof define&&define.amd?define("exports vega-util vega-functions vega-event-selector vega-scale vega-dataflow".split(" "),w):(A="undefined"!==typeof globalThis?globalThis:A||self,w(A.vega={},A.vega,A.vega,A.vega,A.vega,A.vega))})(this,function(A,w,u,x,I,B){function N(Za){return w.isObject(Za)?Za:{type:Za||"pad"}}function da(Za){w.isObject(Za)?
Za=Za.signal?Za:{top:+Za.top||0,bottom:+Za.bottom||0,left:+Za.left||0,right:+Za.right||0}:(Za=+Za||0,Za={top:Za,bottom:Za,left:Za,right:Za});return Za}function U(Za,wb,eb,qb){return null!=eb?(w.isObject(eb)&&!w.isArray(eb)||w.isArray(eb)&&eb.length&&w.isObject(eb[0])?Za.update[wb]=eb:Za[qb||"enter"][wb]={value:eb},1):0}function X(Za,wb,eb){for(const qb in wb)U(Za,qb,wb[qb]);for(const qb in eb)U(Za,qb,eb[qb],"update")}function V(Za,wb,eb){for(const qb in wb)eb&&w.hasOwnProperty(eb,qb)||(Za[qb]=w.extend(Za[qb]||
{},wb[qb]));return Za}function P(Za,wb){return wb&&(wb.enter&&wb.enter[Za]||wb.update&&wb.update[Za])}function z(Za,wb,eb,qb,Qb){const zc={},ad={};let Rd,Md;Md="lineBreak";"text"!==wb||null==Qb[Md]||P(Md,Za)||G(zc,Md,Qb[Md]);if("legend"==eb||String(eb).startsWith("axis"))eb=null;eb="frame"===eb?Qb.group:"mark"===eb?w.extend({},Qb.mark,Qb[wb]):null;for(Md in eb)(wb=P(Md,Za)||("fill"===Md||"stroke"===Md)&&(P("fill",Za)||P("stroke",Za)))||G(zc,Md,eb[Md]);w.array(qb).forEach(nd=>{nd=Qb.style&&Qb.style[nd];
for(const ee in nd)P(ee,Za)||G(zc,ee,nd[ee])});Za=w.extend({},Za);for(Md in zc)eb=zc[Md],eb.signal?(Rd=Rd||{})[Md]=eb:ad[Md]=eb;Za.enter=w.extend(ad,Za.enter);Rd&&(Za.update=w.extend(Rd,Za.update));return Za}function G(Za,wb,eb){Za[wb]=eb&&eb.signal?{signal:eb.signal}:{value:eb}}function Y(Za){if(null!=Za.gradient)return Q(Za);if(Za.signal)var wb=`(${Za.signal})`;else Za.color?(wb=Za.color,wb=wb.c?Jf("hcl",wb.h,wb.c,wb.l):wb.h||wb.s?Jf("hsl",wb.h,wb.s,wb.l):wb.l||wb.a?Jf("lab",wb.l,wb.a,wb.b):wb.r||
wb.g||wb.b?Jf("rgb",wb.r,wb.g,wb.b):null):wb=null!=Za.field?pa(Za.field):void 0!==Za.value?w.stringValue(Za.value):void 0;if(null!=Za.scale){const eb=sf(Za.scale);null!=Za.range?wb=`lerp(_range(${eb}), ${+Za.range})`:(void 0!==wb&&(wb=`_scale(${eb}, ${wb})`),Za.band&&(wb=(wb?wb+"+":"")+`_bandwidth(${eb})`+(1===+Za.band?"":"*"+ja(Za.band)),Za.extra&&(wb=`(datum.extra ? _scale(${eb}, datum.extra.value) : ${wb})`)),null==wb&&(wb="0"))}void 0===wb&&(wb=null);null!=Za.exponent&&(wb=`pow(${wb},${ja(Za.exponent)})`);
null!=Za.mult&&(wb+=`*${ja(Za.mult)}`);null!=Za.offset&&(wb+=`+${ja(Za.offset)}`);Za.round&&(wb=`round(${wb})`);return wb}function Q(Za){const wb=[Za.start,Za.stop,Za.count].map(eb=>null==eb?null:w.stringValue(eb));for(;wb.length&&null==w.peek(wb);)wb.pop();wb.unshift(sf(Za.gradient));return`gradient(${wb.join(",")})`}function ja(Za){return w.isObject(Za)?"("+Y(Za)+")":Za}function pa(Za){return J(w.isObject(Za)?Za:{datum:Za})}function J(Za){let wb;if(Za.signal){wb="datum";var eb=Za.signal}else if(Za.group||
Za.parent){eb=Math.max(1,Za.level||1);for(wb="item";0<eb--;)wb+=".mark.group";Za.parent?(eb=Za.parent,wb+=".datum"):eb=Za.group}else Za.datum?(wb="datum",eb=Za.datum):w.error("Invalid field reference: "+w.stringValue(Za));Za.signal||(eb=w.isString(eb)?w.splitAccessPath(eb).map(w.stringValue).join("]["):J(eb));return wb+"["+eb+"]"}function K(Za){let wb="";Za.forEach(eb=>{const qb=Y(eb);wb+=eb.test?`(${eb.test})?${qb}:`:qb});":"===w.peek(wb)&&(wb+="null");return wb}function ba(Za,wb,eb,qb,Qb,zc){const ad=
{};zc=zc||{};zc.encoders={$encode:ad};Za=z(Za,wb,eb,qb,Qb.config);for(const Pd in Za){eb=Za[Pd];qb=wb;var Rd=zc,Md=Qb;const se={},ye={};for(const Oe in eb)if(null!=eb[Oe]){var nd=O;var ee=eb[Oe];ee=w.isArray(ee)?K(ee):Y(ee);se[Oe]=nd(ee,Md,Rd,ye)}eb={$expr:{marktype:qb,channels:se},$fields:Object.keys(ye),$output:Object.keys(eb)};ad[Pd]=eb}return zc}function O(Za,wb,eb,qb){Za=u.parseExpression(Za,wb);Za.$fields.forEach(Qb=>qb[Qb]=1);w.extend(eb,Za.$params);return Za.$expr}function fa(Za,wb){w.error(Za+
' for "outer" push: '+w.stringValue(wb))}function wa(Za,wb){const eb=Za.name;if("outer"===Za.push)wb.signals[eb]||fa("No prior signal definition",eb),tf.forEach(qb=>{void 0!==Za[qb]&&fa("Invalid property ",qb)});else{const qb=wb.addSignal(eb,Za.value);!1===Za.react&&(qb.react=!1);Za.bind&&wb.addBinding(eb,Za.bind)}}function ta(Za,wb,eb,qb){this.id=-1;this.type=Za;this.value=wb;this.params=eb;qb&&(this.parent=qb)}function aa(Za){const wb={$ref:Za.id};0>Za.id&&(Za.refs=Za.refs||[]).push(wb);return wb}
function ha(Za,wb){return wb?{$field:Za,$name:wb}:{$field:Za}}function ka(Za,wb){Za={$key:Za};wb&&(Za.$flat=!0);return Za}function H(Za,wb){return(Za&&Za.signal?"$"+Za.signal:Za||"")+(Za&&wb?"_":"")+(wb&&wb.signal?"$"+wb.signal:wb||"")}function oa(Za){return Za&&Za.signal}function ea(Za){if(oa(Za))return!0;if(w.isObject(Za))for(const wb in Za)if(ea(Za[wb]))return!0;return!1}function D(Za,wb){return null!=Za?Za:wb}function R(Za){return Za&&Za.signal||Za}function la(Za,wb){return(Za.merge?Ia:Za.stream?
Ma:Za.type?Ta:w.error("Invalid stream specification: "+w.stringValue(Za)))(Za,wb)}function Ia(Za,wb){const eb=Za.merge.map(qb=>la(qb,wb));Za=ab({merge:eb},Za,wb);return wb.addStream(Za).id}function Ma(Za,wb){const eb=la(Za.stream,wb);Za=ab({stream:eb},Za,wb);return wb.addStream(Za).id}function Ta(Za,wb){if("timer"===Za.type){var eb=wb.event("timer",Za.throttle);Za={between:Za.between,filter:Za.filter}}else eb=Za.source,eb=wb.event.call(wb,"scope"===eb?"view":eb||"view",Za.type);Za=ab({stream:eb},
Za,wb);return 1===Object.keys(Za).length?eb:wb.addStream(Za).id}function ab(Za,wb,eb){let qb=wb.between;qb&&(2!==qb.length&&w.error('Stream "between" parameter must have 2 entries: '+w.stringValue(wb)),Za.between=[la(qb[0],eb),la(qb[1],eb)]);qb=wb.filter?[].concat(wb.filter):[];if(wb.marktype||wb.markname||wb.markrole){var Qb=qb,zc=wb.marktype,ad=wb.markname,Rd=wb.markrole;Qb.push.call(Qb,"event.item"+(zc&&"*"!==zc?"\x26\x26event.item.mark.marktype\x3d\x3d\x3d'"+zc+"'":"")+(Rd?"\x26\x26event.item.mark.role\x3d\x3d\x3d'"+
Rd+"'":"")+(ad?"\x26\x26event.item.mark.name\x3d\x3d\x3d'"+ad+"'":""))}"scope"===wb.source&&qb.push("inScope(event.item)");qb.length&&(Za.filter=u.parseExpression("("+qb.join(")\x26\x26(")+")",eb).$expr);null!=(qb=wb.throttle)&&(Za.throttle=+qb);null!=(qb=wb.debounce)&&(Za.debounce=+qb);wb.consume&&(Za.consume=!0);return Za}function db(Za,wb,eb){const qb=Za.encode,Qb={target:eb};eb=Za.events;let zc=Za.update,ad=[];eb||w.error("Signal update missing events specification.");w.isString(eb)&&(eb=x.parseSelector(eb,
wb.isSubscope()?"scope":"view"));eb=w.array(eb).filter(Rd=>Rd.signal||Rd.scale?(ad.push(Rd),0):1);1<ad.length&&(ad=[ub(ad)]);eb.length&&ad.push(1<eb.length?{merge:eb}:eb[0]);null!=qb&&(zc&&w.error("Signal encode and update are mutually exclusive."),zc="encode(item(),"+w.stringValue(qb)+")");Qb.update=w.isString(zc)?u.parseExpression(zc,wb):null!=zc.expr?u.parseExpression(zc.expr,wb):null!=zc.value?zc.value:null!=zc.signal?{$expr:Lg,$params:{$value:wb.signalRef(zc.signal)}}:w.error("Invalid signal update specification.");
Za.force&&(Qb.options={force:!0});ad.forEach(Rd=>{var Md=wb.addUpdate,nd=w.extend;Rd={source:Rd.signal?wb.signalRef(Rd.signal):Rd.scale?wb.scaleRef(Rd.scale):la(Rd,wb)};return Md.call(wb,nd.call(w,Rd,Qb))})}function ub(Za){return{signal:"["+Za.map(wb=>wb.scale?'scale("'+wb.scale+'")':wb.signal)+"]"}}function pb(Za,wb){const eb=wb.getSignal(Za.name);let qb=Za.update;Za.init&&(qb?w.error("Signals can not include both init and update expressions."):(qb=Za.init,eb.initonly=!0));qb&&(qb=u.parseExpression(qb,
wb),eb.update=qb.$expr,eb.params=qb.$params);Za.on&&Za.on.forEach(Qb=>db(Qb,wb,eb.id))}function Ya(Za,wb){return w.isObject(Za)?Za.signal?wb.signalRef(Za.signal):w.error("Unsupported object: "+w.stringValue(Za)):Za}function Va(Za,wb){return Za.signal?wb.signalRef(Za.signal):Za.map(eb=>Ya(eb,wb))}function Pa(Za){w.error("Can not find data set: "+w.stringValue(Za))}function Ha(Za,wb,eb){if(Za)return Za.signal?eb.signalRef(Za.signal):(w.isArray(Za)?Ca:Za.fields?Ga:Aa)(Za,wb,eb);null==wb.domainMin&&null==
wb.domainMax||w.error("No scale domain defined for domainMin/domainMax to override.")}function Ca(Za,wb,eb){return Za.map(qb=>Ya(qb,eb))}function Aa(Za,wb,eb){const qb=eb.getData(Za.data);qb||Pa(Za.data);return I.isDiscrete(wb.type)?qb.valuesRef(eb,Za.field,cb(Za.sort,!1)):I.isQuantile(wb.type)?qb.domainRef(eb,Za.field):qb.extentRef(eb,Za.field)}function Ga(Za,wb,eb){const qb=Za.data,Qb=Za.fields.reduce((zc,ad)=>{if(w.isString(ad))ad={data:qb,field:ad};else if(w.isArray(ad)||ad.signal){var Rd=ad;
ad="_:vega:_"+wg++;const Md=Zg({});w.isArray(Rd)?Md.value={$ingest:Rd}:Rd.signal&&(Rd="setdata("+w.stringValue(ad)+","+Rd.signal+")",Md.params.input=eb.signalRef(Rd));eb.addDataPipeline(ad,[Md,xe({})]);ad={data:ad,field:"data"}}zc.push(ad);return zc},[]);return(I.isDiscrete(wb.type)?Ka:I.isQuantile(wb.type)?fb:La)(Za,eb,Qb)}function Ka(Za,wb,eb){const qb=cb(Za.sort,!0);Za=eb.map(zc=>{const ad=wb.getData(zc.data);ad||Pa(zc.data);return ad.countsRef(wb,zc.field,qb)});const Qb={groupby:lf,pulse:Za};
qb&&(Za=qb.op||"count",eb=qb.field?H(Za,qb.field):"count",Qb.ops=[xg[Za]],Qb.fields=[wb.fieldRef(eb)],Qb.as=[eb]);Za=wb.add(Pg(Qb));Za=wb.add(Zg({pulse:aa(Za)}));eb=wb.add(Kf({field:lf,sort:wb.sortRef(qb),pulse:aa(Za)}));return aa(eb)}function cb(Za,wb){Za&&(Za.field||Za.op?Za.field||"count"===Za.op?wb&&Za.field&&Za.op&&!xg[Za.op]&&w.error("Multiple domain scales can not be sorted using "+Za.op):w.error("No field provided for sort aggregate op: "+Za.op):w.isObject(Za)?Za.field="key":Za={field:"key"});
return Za}function fb(Za,wb,eb){Za=eb.map(qb=>{const Qb=wb.getData(qb.data);Qb||Pa(qb.data);return Qb.domainRef(wb,qb.field)});return aa(wb.add(Ce({values:Za})))}function La(Za,wb,eb){Za=eb.map(qb=>{const Qb=wb.getData(qb.data);Qb||Pa(qb.data);return Qb.extentRef(wb,qb.field)});return aa(wb.add(wd({extents:Za})))}function Bb(Za,wb,eb){const qb=wb.config.range;let Qb=Za.range;if(Qb.signal)return wb.signalRef(Qb.signal);if(w.isString(Qb)){if(qb&&w.hasOwnProperty(qb,Qb))return Za=w.extend({},Za,{range:qb[Qb]}),
Bb(Za,wb,eb);"width"===Qb?Qb=[0,{signal:"width"}]:"height"===Qb?Qb=I.isDiscrete(Za.type)?[0,{signal:"height"}]:[{signal:"height"},0]:w.error("Unrecognized scale range value: "+w.stringValue(Qb))}else{if(Qb.scheme){eb.scheme=w.isArray(Qb.scheme)?Va(Qb.scheme,wb):Ya(Qb.scheme,wb);Qb.extent&&(eb.schemeExtent=Va(Qb.extent,wb));Qb.count&&(eb.schemeCount=Ya(Qb.count,wb));return}if(Qb.step){eb.rangeStep=Ya(Qb.step,wb);return}if(I.isDiscrete(Za.type)&&!w.isArray(Qb))return Ha(Qb,Za,wb);w.isArray(Qb)||w.error("Unsupported range type: "+
w.stringValue(Qb))}return Qb.map(zc=>(w.isArray(zc)?Va:Ya)(zc,wb))}function Ob(Za,wb,eb){return w.isArray(Za)?Za.map(qb=>Ob(qb,wb,eb)):w.isObject(Za)?Za.signal?eb.signalRef(Za.signal):"fit"===wb?Za:w.error("Unsupported parameter object: "+w.stringValue(Za)):Za}function ec(Za){Za.type="group";Za.interactive=Za.interactive||!1;return Za}function sc(Za,wb){const eb=(qb,Qb)=>D(Za[qb],D(wb[qb],Qb));eb.isVertical=qb=>"vertical"===D(Za.direction,wb.direction||(qb?wb.symbolDirection:wb.gradientDirection));
eb.gradientLength=()=>D(Za.gradientLength,wb.gradientLength||wb.gradientWidth);eb.gradientThickness=()=>D(Za.gradientThickness,wb.gradientThickness||wb.gradientHeight);eb.entryColumns=()=>D(Za.columns,D(wb.columns,+eb.isVertical(!0)));return eb}function Ic(Za,wb){return(Za=wb&&(wb.update&&wb.update[Za]||wb.enter&&wb.enter[Za]))&&Za.signal?Za:Za?Za.value:null}function Xb(Za,wb,eb){return`item.anchor === '${"start"}' ? ${Za} : item.anchor === '${"end"}' ? ${wb} : ${eb}`}function Wb(Za,wb){return wb?
Za?w.isObject(Za)?Object.assign({},Za,{offset:Wb(Za.offset,wb)}):{value:Za,offset:wb}:wb:Za}function Kc(Za,wb){wb?(Za.name=wb.name,Za.style=wb.style||Za.style,Za.interactive=!!wb.interactive,Za.encode=V(Za.encode,wb,cg)):Za.interactive=!1;return Za}function Kb(Za,wb,eb,qb){Za=sc(Za,eb);eb=Za.isVertical();var Qb=Za.gradientThickness();const zc=Za.gradientLength();let ad,Rd,Md;eb?(eb=[0,1],Rd=[0,0],Md=Qb,Qb=zc):(eb=[0,0],Rd=[1,0],Md=zc);Qb={enter:ad={opacity:$f,x:$f,y:$f,width:Cd(Md),height:Cd(Qb)},
update:w.extend({},ad,{opacity:Rf,fill:{gradient:wb,start:eb,stop:Rd}}),exit:{opacity:$f}};X(Qb,{stroke:Za("gradientStrokeColor"),strokeWidth:Za("gradientStrokeWidth")},{opacity:Za("gradientOpacity")});return Kc({type:"rect",role:"legend-gradient",encode:Qb},qb)}function mc(Za,wb,eb,qb,Qb){Za=sc(Za,eb);const zc=Za.isVertical();eb=Za.gradientThickness();const ad=Za.gradientLength();var Rd;let Md,nd,ee,Pd="";zc?(Rd="y",nd="y2",Md="x",ee="width",Pd="1-"):(Rd="x",nd="x2",Md="y",ee="height");wb={opacity:$f,
fill:{scale:wb,field:"value"}};wb[Rd]={signal:Pd+"datum.perc",mult:ad};wb[Md]=$f;wb[nd]={signal:Pd+"datum.perc2",mult:ad};wb[ee]=Cd(eb);Rd={enter:wb,update:w.extend({},wb,{opacity:Rf}),exit:{opacity:$f}};X(Rd,{stroke:Za("gradientStrokeColor"),strokeWidth:Za("gradientStrokeWidth")},{opacity:Za("gradientOpacity")});return Kc({type:"rect",role:"legend-band",key:"value",from:Qb,encode:Rd},qb)}function Ub(Za,wb,eb,qb){const Qb=sc(Za,wb);var zc=Qb.isVertical();const ad=Cd(Qb.gradientThickness()),Rd=Qb.gradientLength();
let Md=Qb("labelOverlap"),nd,ee,Pd,se="";const ye={enter:nd={opacity:$f},update:ee={opacity:Rf,text:{field:"label"}},exit:{opacity:$f}};X(ye,{fill:Qb("labelColor"),fillOpacity:Qb("labelOpacity"),font:Qb("labelFont"),fontSize:Qb("labelFontSize"),fontStyle:Qb("labelFontStyle"),fontWeight:Qb("labelFontWeight"),limit:D(Za.labelLimit,wb.gradientLabelLimit)});zc?(nd.align={value:"left"},nd.baseline=ee.baseline={signal:'datum.perc\x3c\x3d0?"bottom":datum.perc\x3e\x3d1?"top":"middle"'},zc="y",Pd="x",se="1-"):
(nd.align=ee.align={signal:'datum.perc\x3c\x3d0?"left":datum.perc\x3e\x3d1?"right":"center"'},nd.baseline={value:"top"},zc="x",Pd="y");nd[zc]=ee[zc]={signal:se+"datum.perc",mult:Rd};nd[Pd]=ee[Pd]=ad;ad.offset=D(Za.labelOffset,wb.gradientLabelOffset)||0;Md=Md?{separation:Qb("labelSeparation"),method:Md,order:"datum.index"}:void 0;return Kc({type:"text",role:"legend-label",style:"guide-label",key:"value",from:qb,encode:ye,overlap:Md},eb)}function oc(Za,wb,eb,qb,Qb){var zc=sc(Za,wb);const ad=eb.entries,
Rd=!(!ad||!ad.interactive),Md=ad?ad.name:void 0,nd=zc("clipHeight"),ee=zc("symbolOffset"),Pd={data:"value"},se=`(${Qb}) ? datum.${"offset"} : datum.${"size"}`,ye=nd?Cd(nd):{field:"size"},Oe=`max(1, ${Qb})`;let Se,Pe;ye.mult=.5;var Xd={enter:Se={opacity:$f,x:{signal:se,mult:.5,offset:ee},y:ye},update:Pe={opacity:Rf,x:Se.x,y:Se.y},exit:{opacity:$f}};let Ze=null,Tf=null;Za.fill||(Ze=wb.symbolBaseFillColor,Tf=wb.symbolBaseStrokeColor);X(Xd,{fill:zc("symbolFillColor",Ze),shape:zc("symbolType"),size:zc("symbolSize"),
stroke:zc("symbolStrokeColor",Tf),strokeDash:zc("symbolDash"),strokeDashOffset:zc("symbolDashOffset"),strokeWidth:zc("symbolStrokeWidth")},{opacity:zc("symbolOpacity")});dh.forEach(Xe=>{Za[Xe]&&(Pe[Xe]=Se[Xe]={scale:Za[Xe],field:"value"})});wb=Kc({type:"symbol",role:"legend-symbol",key:"value",from:Pd,clip:nd?!0:void 0,encode:Xd},eb.symbols);Xd=Cd(ee);Xd.offset=zc("labelOffset");Xd={enter:Se={opacity:$f,x:{signal:se,offset:Xd},y:ye},update:Pe={opacity:Rf,text:{field:"label"},x:Se.x,y:Se.y},exit:{opacity:$f}};
X(Xd,{align:zc("labelAlign"),baseline:zc("labelBaseline"),fill:zc("labelColor"),fillOpacity:zc("labelOpacity"),font:zc("labelFont"),fontSize:zc("labelFontSize"),fontStyle:zc("labelFontStyle"),fontWeight:zc("labelFontWeight"),limit:zc("labelLimit")});eb=Kc({type:"text",role:"legend-label",style:"guide-label",key:"value",from:Pd,encode:Xd},eb.labels);Xd={enter:{noBound:{value:!nd},width:$f,height:nd?Cd(nd):$f,opacity:$f},exit:{opacity:$f},update:Pe={opacity:Rf,row:{signal:null},column:{signal:null}}};
zc.isVertical(!0)?(zc=`ceil(item.mark.items.length / ${Oe})`,Pe.row.signal=`${"datum.index"}%${zc}`,Pe.column.signal=`floor(${"datum.index"} / ${zc})`,zc={field:["row","datum.index"]}):(Pe.row.signal=`floor(${"datum.index"} / ${Oe})`,Pe.column.signal=`${"datum.index"} % ${Oe}`,zc={field:"datum.index"});Pe.column.signal=`(${Qb})?${Pe.column.signal}:${"datum.index"}`;qb={facet:{data:qb,name:"value",groupby:"index"}};return ec({role:"scope",from:qb,encode:V(Xd,ad,cg),marks:[wb,eb],name:Md,interactive:Rd,
sort:zc})}function Cc(Za,wb){Za=sc(Za,wb);return{align:Za("gridAlign"),columns:Za.entryColumns(),center:{row:!0,column:!1},padding:{row:Za("rowPadding"),column:Za("columnPadding")}}}function Mc(Za,wb,eb,qb){wb=sc(Za,wb);const Qb={enter:{opacity:$f},update:{opacity:Rf,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:$f}};X(Qb,{orient:wb("titleOrient"),_anchor:wb("titleAnchor"),anchor:{signal:'item._anchor || ((item.orient \x3d\x3d\x3d "left" || item.orient \x3d\x3d\x3d "right") ? "middle" : "start")'},
angle:{signal:'datum.vgrad \x26\x26 (item.orient \x3d\x3d\x3d "left" || item.orient \x3d\x3d\x3d "right") ? (item.orient \x3d\x3d\x3d "left" ? -90 : 90) : 0'},align:{signal:gh},baseline:{signal:Lf},text:Za.title,fill:wb("titleColor"),fillOpacity:wb("titleOpacity"),font:wb("titleFont"),fontSize:wb("titleFontSize"),fontStyle:wb("titleFontStyle"),fontWeight:wb("titleFontWeight"),limit:wb("titleLimit"),lineHeight:wb("titleLineHeight")},{align:wb("titleAlign"),baseline:wb("titleBaseline")});return Kc({type:"text",
role:"legend-title",style:"guide-title",from:qb,encode:Qb},eb)}function Pb(Za,wb){let eb;w.isObject(Za)&&(Za.signal?eb=Za.signal:Za.path?eb="pathShape("+nc(Za.path)+")":Za.sphere&&(eb="geoShape("+nc(Za.sphere)+', {type: "Sphere"})'));return eb?wb.signalRef(eb):!!Za}function nc(Za){return w.isObject(Za)&&Za.signal?Za.signal:w.stringValue(Za)}function rc(Za){const wb=Za.role||"";return wb.startsWith("axis")||wb.startsWith("legend")||wb.startsWith("title")?wb:"group"===Za.type?"scope":wb||"mark"}function Hb(Za){return{marktype:Za.type,
name:Za.name||void 0,role:Za.role||rc(Za),zindex:+Za.zindex||void 0,aria:Za.aria,description:Za.description}}function Jc(Za,wb){return Za&&Za.signal?wb.signalRef(Za.signal):!1===Za?!1:!0}function kc(Za,wb){const eb=B.definition(Za.type);eb||w.error("Unrecognized transform type: "+w.stringValue(Za.type));var qb=eb.type.toLowerCase();var Qb=Ab(eb,Za,wb);qb=new ta(qb,null,Qb,void 0);Za.signal&&wb.addSignal(Za.signal,wb.proxy(qb));qb.metadata=eb.metadata||{};return qb}function Ab(Za,wb,eb){const qb={},
Qb=Za.params.length;for(let zc=0;zc<Qb;++zc){const ad=Za.params[zc];qb[ad.name]=md(ad,wb,eb)}return qb}function md(Za,wb,eb){const qb=Za.type,Qb=wb[Za.name];if("index"===qb)return hd(Za,wb,eb);if(void 0===Qb)Za.required&&w.error("Missing required "+w.stringValue(wb.type)+" parameter: "+w.stringValue(Za.name));else return"param"===qb?Ed(Za,wb,eb):"projection"===qb?eb.projectionRef(wb[Za.name]):Za.array&&!oa(Qb)?Qb.map(zc=>yd(Za,zc,eb)):yd(Za,Qb,eb)}function yd(Za,wb,eb){const qb=Za.type;return oa(wb)?
"expr"===qb?w.error("Expression references can not be signals."):"field"===qb?eb.fieldRef(wb):"compare"===qb?eb.compareRef(wb):eb.signalRef(wb.signal):(Za=Za.expr||"field"===qb)&&wb&&wb.expr?eb.exprRef(wb.expr,wb.as):Za&&wb&&wb.field?ha(wb.field,wb.as):"expr"===qb?u.parseExpression(wb,eb):"data"===qb?aa(eb.getData(wb).values):"field"===qb?ha(wb):"compare"===qb?eb.compareRef(wb):wb}function hd(Za,wb,eb){w.isString(wb.from)||w.error('Lookup "from" parameter must be a string literal.');return eb.getData(wb.from).lookupRef(eb,
wb.key)}function Ed(Za,wb,eb){wb=wb[Za.name];return Za.array?(w.isArray(wb)||w.error("Expected an array of sub-parameters. Instead: "+w.stringValue(wb)),wb.map(qb=>Qd(Za,qb,eb))):Qd(Za,wb,eb)}function Qd(Za,wb,eb){const qb=Za.params.length;let Qb;for(let zc=0;zc<qb;++zc){Qb=Za.params[zc];for(const ad in Qb.key)if(Qb.key[ad]!==wb[ad]){Qb=null;break}if(Qb)break}Qb||w.error("Unsupported parameter: "+w.stringValue(wb));Za=w.extend(Ab(Qb,wb,eb),Qb.key);return aa(eb.add(zg(Za)))}function fd(Za,wb,eb){let qb,
Qb,zc,ad;if(!Za)zc=aa(eb.add(Zg(null,[{}])));else if(qb=Za.facet)wb||w.error("Only group marks can be faceted."),null!=qb.field?zc=ad=ed(qb,eb):(Za.data?ad=aa(eb.getData(Za.data).aggregate):(wb=kc(w.extend({type:"aggregate",groupby:w.array(qb.groupby)},qb.aggregate),eb),wb.params.key=eb.keyRef(qb.groupby),wb.params.pulse=ed(qb,eb),zc=ad=aa(eb.add(wb))),Qb=eb.keyRef(qb.groupby,!0));zc||(zc=ed(Za,eb));return{key:Qb,pulse:zc,parent:ad}}function ed(Za,wb){return Za.$ref?Za:Za.data&&Za.data.$ref?Za.data:
aa(wb.getData(Za.data).output)}function bc(Za,wb,eb,qb,Qb){this.scope=Za;this.input=wb;this.output=eb;this.values=qb;this.aggregate=Qb;this.index={}}function yc(Za){return w.isString(Za)?Za:null}function $c(Za,wb,eb){const qb=H(eb.op,eb.field);let Qb;if(wb.ops)for(let zc=0,ad=wb.as.length;zc<ad;++zc){if(wb.as[zc]===qb)return}else wb.ops=["count"],wb.fields=[null],wb.as=["count"];eb.op&&(wb.ops.push((Qb=eb.op.signal)?Za.signalRef(Qb):eb.op),wb.fields.push(Za.fieldRef(eb.field)),wb.as.push(qb))}function cc(Za,
wb,eb,qb,Qb,zc,ad){eb=wb[eb]||(wb[eb]={});var Rd=w.isObject(zc)?("descending"===zc.order?"-":"+")+H(zc.op,zc.field):"";let Md=yc(Qb);if(null!=Md){Za=wb.scope;Md+=Rd?"|"+Rd:"";var nd=eb[Md]}nd||(nd=zc?{field:lf,pulse:wb.countsRef(Za,Qb,zc)}:{field:Za.fieldRef(Qb),pulse:aa(wb.output)},Rd&&(nd.sort=Za.sortRef(zc)),Za=Za.add(new ta(qb,void 0,nd,void 0)),ad&&(wb.index[Qb]=Za),nd=aa(Za),null!=Md&&(eb[Md]=nd));return nd}function tb(Za,wb,eb){var qb=Za.from.facet;const Qb=qb.name,zc=ed(qb,wb);let ad;qb.name||
w.error("Facet must have a name: "+w.stringValue(qb));qb.data||w.error("Facet must reference a data set: "+w.stringValue(qb));qb.field?ad=wb.add($g({field:wb.fieldRef(qb.field),pulse:zc})):qb.groupby?ad=wb.add(Wc({key:wb.keyRef(qb.groupby),group:aa(wb.proxy(eb.parent)),pulse:zc})):w.error("Facet must specify groupby or field: "+w.stringValue(qb));wb=wb.fork();eb=wb.add(Zg());qb=wb.add(xe({pulse:aa(eb)}));wb.addData(Qb,new bc(wb,eb,eb,qb));wb.addSignal("parent",null);ad.params.subflow={$subflow:wb.parse(Za).toRuntime()}}
function tc(Za,wb,eb){eb=wb.add($g({pulse:eb.pulse}));wb=wb.fork();wb.add(xe());wb.addSignal("parent",null);eb.params.subflow={$subflow:wb.parse(Za).toRuntime()}}function Ec(Za,wb,eb){const qb=Za.remove,Qb=Za.insert,zc=Za.toggle,ad=Za.modify,Rd=Za.values,Md=wb.add(new ta("operator",void 0,void 0,void 0));Za="if("+Za.trigger+',modify("'+eb+'",'+[Qb,qb,zc,ad,Rd].map(nd=>null==nd?"null":nd).join(",")+"),0)";wb=u.parseExpression(Za,wb);Md.update=wb.$expr;Md.params=wb.$params}function cd(Za,wb){var eb=
rc(Za),qb="group"===Za.type,Qb=Za.from&&Za.from.facet;const zc=Za.overlap;let ad=Za.layout||"scope"===eb||"frame"===eb,Rd,Md,nd,ee,Pd,se;const ye="mark"===eb||ad||Qb,Oe=fd(Za.from,qb,wb);Md=wb.add(ei({key:Oe.key||(Za.key?ha(Za.key):void 0),pulse:Oe.pulse,clean:!qb}));const Se=aa(Md);Md=nd=wb.add(Zg({pulse:Se}));Md=wb.add(gc({markdef:Hb(Za),interactive:Jc(Za.interactive,wb),clip:Pb(Za.clip,wb),context:{$context:!0},groups:wb.lookup(),parent:wb.signals.parent?wb.signalRef("parent"):null,index:wb.markpath(),
pulse:aa(Md)}));var Pe=aa(Md);Md=ee=wb.add(Yh(ba(Za.encode,Za.type,eb,Za.style,wb,{mod:!1,pulse:Pe})));Md.params.parent=wb.encode();Za.transform&&Za.transform.forEach(Ze=>{Ze=kc(Ze,wb);const Tf=Ze.metadata;(Tf.generates||Tf.changes)&&w.error("Mark transforms should not generate new data.");Tf.nomod||(ee.params.mod=!0);Ze.params.pulse=aa(Md);wb.add(Md=Ze)});Za.sort&&(Md=wb.add(dg({sort:wb.compareRef(Za.sort),pulse:aa(Md)})));eb=aa(Md);if(Qb||ad)ad=wb.add(Sf({layout:wb.objectProperty(Za.layout),legends:wb.legends,
mark:Pe,pulse:eb})),se=aa(ad);const Xd=wb.add(eh({mark:Pe,pulse:se||eb}));Pe=aa(Xd);qb&&(ye&&(Rd=wb.operators,Rd.pop(),ad&&Rd.pop()),wb.pushState(eb,se||Pe,Se),Qb?tb(Za,wb,Oe):ye?tc(Za,wb,Oe):wb.parse(Za),wb.popState(),ye&&(ad&&Rd.push(ad),Rd.push(Xd)));zc&&(Pe=bd(zc,Pe,wb));qb=wb.add(id({pulse:Pe}));Qb=wb.add(xe({pulse:aa(qb)},void 0,wb.parent()));null!=Za.name&&(Pd=Za.name,wb.addData(Pd,new bc(wb,nd,qb,Qb)),Za.on&&Za.on.forEach(Ze=>{(Ze.insert||Ze.remove||Ze.toggle)&&w.error("Marks only support modify triggers.");
Ec(Ze,wb,Pd)}))}function bd(Za,wb,eb){const qb=Za.method,Qb=Za.bound,zc=Za.separation;wb={separation:oa(zc)?eb.signalRef(zc.signal):zc,method:oa(qb)?eb.signalRef(qb.signal):qb,pulse:wb};Za.order&&(wb.sort=eb.compareRef({field:Za.order}));Qb&&(Za=Qb.tolerance,wb.boundTolerance=oa(Za)?eb.signalRef(Za.signal):+Za,wb.boundScale=eb.scaleRef(Qb.scale),wb.boundOrient=Qb.orient);return aa(eb.add(Hf(wb)))}function od(Za,wb){const eb=wb.config.legend,qb=Za.encode||{},Qb=sc(Za,eb),zc=qb.legend||{},ad=zc.name||
void 0,Rd=zc.interactive,Md=zc.style,nd={};let ee=0,Pd,se;dh.forEach(Xd=>Za[Xd]?(nd[Xd]=Za[Xd],ee=ee||Za[Xd]):0);ee||w.error("Missing valid scale for legend.");var ye=Dd(Za,wb.scaleType(ee));const Oe={title:null!=Za.title,scales:nd,type:ye,vgrad:"symbol"!==ye&&Qb.isVertical()},Se=aa(wb.add(Zg(null,[Oe]))),Pe=aa(wb.add(v(se={type:ye,scale:wb.scaleRef(ee),count:wb.objectProperty(Qb("tickCount")),limit:wb.property(Qb("symbolLimit")),values:wb.objectProperty(Za.values),minstep:wb.property(Za.tickMinStep),
formatType:wb.property(Za.formatType),formatSpecifier:wb.property(Za.format)})));"gradient"===ye?(ye=[Kb(Za,ee,eb,qb.gradient),Ub(Za,eb,qb.labels,Pe)],se.count=se.count||wb.signalRef(`max(2,2*floor((${R(Qb.gradientLength())})/100))`)):"discrete"===ye?ye=[mc(Za,ee,eb,qb.gradient,Pe),Ub(Za,eb,qb.labels,Pe)]:(Pd=Cc(Za,eb),ye=[oc(Za,eb,qb,Pe,R(Pd.columns))],se.size=Vd(Za,wb,ye[0].marks));ye=[ec({role:"legend-entry",from:Se,encode:{enter:{x:{value:0},y:{value:0}}},marks:ye,layout:Pd,interactive:Rd})];
Oe.title&&ye.push(Mc(Za,eb,qb.title,Se));return cd(ec({role:"legend",from:Se,encode:V(sd(Qb,Za,eb),zc,cg),marks:ye,aria:Qb("aria"),description:Qb("description"),zindex:Qb("zindex"),name:ad,interactive:Rd,style:Md}),wb)}function Dd(Za,wb){let eb=Za.type||"symbol";Za.type||1!==xd(Za)||!Za.fill&&!Za.stroke||(eb=I.isContinuous(wb)?"gradient":I.isDiscretizing(wb)?"discrete":"symbol");return"gradient"!==eb?eb:I.isDiscretizing(wb)?"discrete":"gradient"}function xd(Za){return dh.reduce((wb,eb)=>wb+(Za[eb]?
1:0),0)}function sd(Za,wb,eb){const qb={enter:{},update:{}};X(qb,{orient:Za("orient"),offset:Za("offset"),padding:Za("padding"),titlePadding:Za("titlePadding"),cornerRadius:Za("cornerRadius"),fill:Za("fillColor"),stroke:Za("strokeColor"),strokeWidth:eb.strokeWidth,strokeDash:eb.strokeDash,x:Za("legendX"),y:Za("legendY"),format:wb.format,formatType:wb.formatType});return qb}function Vd(Za,wb,eb){const qb=R(re("size",Za,eb));Za=R(re("strokeWidth",Za,eb));(eb=Ic("fontSize",eb[1].encode))||(eb=(eb=wb.config.style["guide-label"])&&
eb.fontSize);eb=R(eb);return u.parseExpression(`max(ceil(sqrt(${qb})+${Za}),${eb})`,wb)}function re(Za,wb,eb){return wb[Za]?`scale("${wb[Za]}",datum)`:Ic(Za,eb[0].encode)}function Wd(Za,wb){Za=w.isString(Za)?{text:Za}:Za;const eb=sc(Za,wb.config.title);var qb=Za.encode||{},Qb=qb.group||{};const zc=Qb.name||void 0,ad=Qb.interactive,Rd=Qb.style,Md=[],nd=aa(wb.add(Zg(null,[{}])));var ee=Md.push,Pd=Za;var se=(se=Za.encode)&&se.title||w.extend({name:Za.name,interactive:Za.interactive,style:Za.style},se);
var ye={value:0};ye={enter:{opacity:ye},update:{opacity:{value:1}},exit:{opacity:ye}};X(ye,{text:Pd.text,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:eb("dx"),dy:eb("dy"),fill:eb("color"),font:eb("font"),fontSize:eb("fontSize"),fontStyle:eb("fontStyle"),fontWeight:eb("fontWeight"),lineHeight:eb("lineHeight")},{align:eb("align"),angle:eb("angle"),baseline:eb("baseline")});Pd=Kc({type:"text",role:"title-text",
style:"group-title",from:nd,encode:ye},se);ee.call(Md,Pd);Za.subtitle&&(ee=Md.push,qb=qb.subtitle,Pd={value:0},Pd={enter:{opacity:Pd},update:{opacity:{value:1}},exit:{opacity:Pd}},X(Pd,{text:Za.subtitle,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:eb("dx"),dy:eb("dy"),fill:eb("subtitleColor"),font:eb("subtitleFont"),fontSize:eb("subtitleFontSize"),fontStyle:eb("subtitleFontStyle"),fontWeight:eb("subtitleFontWeight"),
lineHeight:eb("subtitleLineHeight")},{align:eb("align"),angle:eb("angle"),baseline:eb("baseline")}),Za=Kc({type:"text",role:"title-subtitle",style:"group-subtitle",from:nd,encode:Pd},qb),ee.call(Md,Za));Za={enter:{},update:{}};X(Za,{orient:eb("orient"),anchor:eb("anchor"),align:{signal:Gh},angle:{signal:'item.orient\x3d\x3d\x3d"left"?-90:item.orient\x3d\x3d\x3d"right"?90:0'},limit:eb("limit"),frame:eb("frame"),offset:eb("offset")||0,padding:eb("subtitlePadding")});Qb=V(Za,Qb,cg);return cd(ec({role:"title",
from:nd,encode:Qb,marks:Md,aria:eb("aria"),description:eb("description"),zindex:eb("zindex"),name:zc,interactive:ad,style:Rd}),wb)}function Fe(Za,wb){const eb=[];Za.transform&&Za.transform.forEach(qb=>{eb.push(kc(qb,wb))});Za.on&&Za.on.forEach(qb=>{Ec(qb,wb,Za.name)});wb.addDataPipeline(Za.name,Bf(Za,wb,eb))}function Bf(Za,wb,eb){const qb=[];let Qb=null,zc=!1,ad=!1,Rd,Md,nd,ee;Za.values?oa(Za.values)||ea(Za.format)?(qb.push(bg(wb,Za)),qb.push(Qb=Ye())):qb.push(Qb=Ye({$ingest:Za.values,$format:Za.format})):
Za.url?ea(Za.url)||ea(Za.format)?(qb.push(bg(wb,Za)),qb.push(Qb=Ye())):qb.push(Qb=Ye({$request:Za.url,$format:Za.format})):Za.source&&(Qb=Rd=w.array(Za.source).map(Pd=>aa(wb.getData(Pd).output)),qb.push(null));Za=0;for(Md=eb.length;Za<Md;++Za)nd=eb[Za],ee=nd.metadata,Qb||ee.source||qb.push(Qb=Ye()),qb.push(nd),ee.generates&&(ad=!0),ee.modifies&&!ad&&(zc=!0),ee.source?Qb=nd:ee.changes&&(Qb=null);Rd&&(Md=Rd.length-1,qb[0]=Ug({derive:zc,pulse:Md?Rd:Rd[0]}),(zc||Md)&&qb.splice(1,0,Ye()));Qb||qb.push(Ye());
qb.push(xe({}));return qb}function Ye(Za){Za=Zg({},Za);Za.metadata={source:!0};return Za}function bg(Za,wb){return Xa({url:wb.url?Za.property(wb.url):void 0,async:wb.async?Za.property(wb.async):void 0,values:wb.values?Za.property(wb.values):void 0,format:Za.objectProperty(wb.format)})}function rf(Za,wb,eb,qb){let Qb;if(wb&&w.hasOwnProperty(wb,Za))return wb[Za];if(w.hasOwnProperty(eb,Za))return eb[Za];if(Za.startsWith("title")){switch(Za){case "titleColor":Qb="fill";break;case "titleFont":case "titleFontSize":case "titleFontWeight":Qb=
Za[5].toLowerCase()+Za.slice(6)}return qb["guide-title"][Qb]}if(Za.startsWith("label")){switch(Za){case "labelColor":Qb="fill";break;case "labelFont":case "labelFontSize":Qb=Za[5].toLowerCase()+Za.slice(6)}return qb["guide-label"][Qb]}return null}function Ff(Za){const wb={};for(const eb of Za)if(eb)for(const qb in eb)wb[qb]=1;return Object.keys(wb)}function pg(Za,wb,eb,qb,Qb){return{signal:'flush(range("'+Za+'"), scale("'+Za+'", datum.value), '+wb+","+eb+","+qb+","+Qb+")"}}function gf(Za,wb,eb,qb){const Qb=
(ad,Rd)=>null!=ad?(eb.update[Rd]=qc(Cd(ad),eb.update[Rd]),!1):P(Rd,qb)?!1:!0,zc=Qb(Za("titleX"),"x");Za=Qb(Za("titleY"),"y");eb.enter.auto=Za===zc?Cd(Za):ih(wb,Cd(Za),Cd(zc))}function Jb(Za,wb,eb){const qb=w.array(Za.signals),Qb=w.array(Za.scales);eb||qb.forEach(zc=>wa(zc,wb));w.array(Za.projections).forEach(zc=>{const ad=wb.config.projection||{},Rd={};for(const Md in zc)"name"!==Md&&(Rd[Md]=Ob(zc[Md],Md,wb));for(const Md in ad)null==Rd[Md]&&(Rd[Md]=Ob(ad[Md],Md,wb));wb.addProjection(zc.name,Rd)});
Qb.forEach(zc=>{const ad=zc.type||"linear";I.isValidScaleType(ad)||w.error("Unrecognized scale type: "+w.stringValue(ad));wb.addScale(zc.name,{type:ad,domain:void 0})});w.array(Za.data).forEach(zc=>Fe(zc,wb));Qb.forEach(zc=>{const ad=wb.getScale(zc.name).params;let Rd;ad.domain=Ha(zc.domain,zc,wb);null!=zc.range&&(ad.range=Bb(zc,wb,ad));if(null!=zc.interpolate){var Md=zc.interpolate;ad.interpolate=Ya(Md.type||Md);null!=Md.gamma&&(ad.interpolateGamma=Ya(Md.gamma))}null!=zc.nice&&(Md=zc.nice,Md=Md.signal?
wb.signalRef(Md.signal):w.isObject(Md)?{interval:Ya(Md.interval),step:Ya(Md.step)}:Ya(Md),ad.nice=Md);null!=zc.bins&&(Md=zc.bins,Md=Md.signal||w.isArray(Md)?Va(Md,wb):wb.objectProperty(Md),ad.bins=Md);for(Rd in zc)w.hasOwnProperty(ad,Rd)||"name"===Rd||(ad[Rd]=Ya(zc[Rd],wb))});(eb||qb).forEach(zc=>pb(zc,wb));w.array(Za.axes).forEach(zc=>{var ad=wb.config,Rd=ad.style,Md=ad.axis,nd="band"===wb.scaleType(zc.scale)&&ad.axisBand,ee=zc.orient,Pd;if(oa(ee)){const ng=Ff([ad.axisX,ad.axisY]),kh=Ff([ad.axisTop,
ad.axisBottom,ad.axisLeft,ad.axisRight]);var se={};for(Pd of ng)se[Pd]=ih(ee,rf(Pd,ad.axisX,Md,Rd),rf(Pd,ad.axisY,Md,Rd));var ye={};for(Pd of kh){var Oe=ye,Se=Pd,Pe=ee.signal,Xd=rf(Pd,ad.axisTop,Md,Rd),Ze=rf(Pd,ad.axisBottom,Md,Rd),Tf=rf(Pd,ad.axisLeft,Md,Rd),Xe=rf(Pd,ad.axisRight,Md,Rd);var Uf={signal:(null!=Tf?`${Pe} === '${"left"}' ? (${Vb(Tf)}) : `:"")+(null!=Ze?`${Pe} === '${"bottom"}' ? (${Vb(Ze)}) : `:"")+(null!=Xe?`${Pe} === '${"right"}' ? (${Vb(Xe)}) : `:"")+(null!=Xd?`${Pe} === '${"top"}' ? (${Vb(Xd)}) : `:
"")+"(null)"};Oe[Se]=Uf}}else se="top"===ee||"bottom"===ee?ad.axisX:ad.axisY,ye=ad["axis"+ee[0].toUpperCase()+ee.slice(1)];var Ue=se||ye||nd?w.extend({},Md,se,ye,nd):Md;const uf=zc.encode||{},Yf=uf.axis||{},yf=Yf.name||void 0,vf=Yf.interactive,ne=Yf.style,wf=sc(zc,Ue),Hh=wf("tickBand");let ag=wf("tickOffset"),ph,mh;Hh?Hh.signal?(ph={signal:`(${Hh.signal}) === 'extent' ? 1 : 0.5`},mh={signal:`(${Hh.signal}) === 'extent'`},w.isObject(ag)||(ag={signal:`(${Hh.signal}) === 'extent' ? 0 : ${ag}`})):"extent"===
Hh?(ph=1,mh=!0,ag=0):(ph=.5,mh=!1):(ph=wf("bandPosition"),mh=wf("tickExtra"));var of=mh;var qh=ph;var Ii=ag;const Fi={scale:zc.scale,ticks:!!wf("ticks"),labels:!!wf("labels"),grid:!!wf("grid"),domain:!!wf("domain"),title:null!=zc.title},Nh=aa(wb.add(Zg({},[Fi]))),jh=aa(wb.add(fh({scale:wb.scaleRef(zc.scale),extra:wb.property(of),count:wb.objectProperty(zc.tickCount),values:wb.objectProperty(zc.values),minstep:wb.property(zc.tickMinStep),formatType:wb.property(zc.formatType),formatSpecifier:wb.property(zc.format)}))),
Kg=[];let Cf;if(Fi.grid){var nh=Kg.push,Ui=uf.grid;const ng=sc(zc,Ue),kh=zc.orient,T=zc.gridScale,Oa=bi(kh,1,-1);a:{var Gi=zc.offset,oh=Oa;if(1!==oh)if(w.isObject(Gi)){let Si=Gi=w.extend({},Gi);for(;null!=Si.mult;)if(w.isObject(Si.mult))Si=Si.mult=w.extend({},Si.mult);else{Si.mult=oa(oh)?{signal:`(${Si.mult}) * (${oh.signal})`}:Si.mult*oh;var $d=Gi;break a}Si.mult=oh}else Gi=oa(oh)?{signal:`(${oh.signal}) * (${Gi||0})`}:oh*(Gi||0);$d=Gi}const zb=$d;let Ac,jd,je;const Ne={enter:Ac={opacity:$f},update:je=
{opacity:Rf},exit:jd={opacity:$f}};X(Ne,{stroke:ng("gridColor"),strokeCap:ng("gridCap"),strokeDash:ng("gridDash"),strokeDashOffset:ng("gridDashOffset"),strokeOpacity:ng("gridOpacity"),strokeWidth:ng("gridWidth")});const ff={scale:zc.scale,field:"value",band:qh,extra:of,offset:Ii,round:ng("tickRound")},ig=ih(kh,{signal:"height"},{signal:"width"}),Dh=T?{scale:T,range:0,mult:Oa,offset:zb}:{value:0,offset:zb},Di=T?{scale:T,range:1,mult:Oa,offset:zb}:w.extend(ig,{mult:Oa,offset:zb});Ac.x=je.x=ih(kh,ff,
Dh);Ac.y=je.y=ia(kh,ff,Dh);Ac.x2=je.x2=ia(kh,Di);Ac.y2=je.y2=ih(kh,Di);jd.x=ih(kh,ff);jd.y=ia(kh,ff);var ug=Kc({type:"rule",role:"axis-grid",key:"value",from:jh,encode:Ne},Ui);nh.call(Kg,ug)}if(Fi.ticks){Cf=wf("tickSize");var nj=Kg.push,eg=uf.ticks,Zd=Cf;const ng=sc(zc,Ue),kh=zc.orient,T=bi(kh,-1,1);let Oa,zb,Ac;const jd={enter:Oa={opacity:$f},update:Ac={opacity:Rf},exit:zb={opacity:$f}};X(jd,{stroke:ng("tickColor"),strokeCap:ng("tickCap"),strokeDash:ng("tickDash"),strokeDashOffset:ng("tickDashOffset"),
strokeOpacity:ng("tickOpacity"),strokeWidth:ng("tickWidth")});const je=Cd(Zd);je.mult=T;const Ne={scale:zc.scale,field:"value",band:qh,extra:of,offset:Ii,round:ng("tickRound")};Ac.y=Oa.y=ih(kh,$f,Ne);Ac.y2=Oa.y2=ih(kh,je);zb.x=ih(kh,Ne);Ac.x=Oa.x=ia(kh,$f,Ne);Ac.x2=Oa.x2=ia(kh,je);zb.y=ia(kh,Ne);var ve=Kc({type:"rule",role:"axis-tick",key:"value",from:jh,encode:jd},eg);nj.call(Kg,ve)}if(Fi.labels){Cf=Fi.ticks?Cf:0;var Sb=Kg.push,Qc=uf.labels,ud=Cf;const ng=sc(zc,Ue),kh=zc.orient,T=zc.scale,Oa=bi(kh,
-1,1),zb=R(ng("labelFlush")),Ac=R(ng("labelFlushOffset")),jd=ng("labelAlign"),je=ng("labelBaseline");let Ne=0===zb||!!zb,ff;const ig=Cd(ud);ig.mult=Oa;ig.offset=Cd(ng("labelPadding")||0);ig.offset.mult=Oa;const Dh={scale:T,field:"value",band:.5,offset:Wb(Ii,ng("labelOffset"))};var oe=Ne?pg(T,zb,'"left"','"right"','"center"'):{value:"center"},ue=kh;var Of=oa(ue)?Eb(`${ue.signal} === '${"right"}'`,"left","right"):"right"===ue?{value:"left"}:{value:"right"};const Di=ih(kh,oe,Of),Si=ih(kh,Sa(kh,"bottom",
"top"),Ne?pg(T,zb,'"top"','"bottom"','"middle"'):{value:"middle"}),pl=pg(T,zb,`-(${Ac})`,Ac,0);Ne=Ne&&Ac;const Aj={opacity:$f,x:ih(kh,Dh,ig),y:ia(kh,Dh,ig)},Hj={enter:Aj,update:ff={opacity:Rf,text:{field:"label"},x:Aj.x,y:Aj.y,align:Di,baseline:Si},exit:{opacity:$f,x:Aj.x,y:Aj.y}};X(Hj,{dx:!jd&&Ne?ih(kh,pl):null,dy:!je&&Ne?ia(kh,pl):null});X(Hj,{angle:ng("labelAngle"),fill:ng("labelColor"),fillOpacity:ng("labelOpacity"),font:ng("labelFont"),fontSize:ng("labelFontSize"),fontWeight:ng("labelFontWeight"),
fontStyle:ng("labelFontStyle"),limit:ng("labelLimit"),lineHeight:ng("labelLineHeight")},{align:jd,baseline:je});const ck=ng("labelBound");let Ck=ng("labelOverlap");Ck=Ck||ck?{separation:ng("labelSeparation"),method:Ck,order:"datum.index",bound:ck?{scale:T,orient:kh,tolerance:ck}:null}:void 0;ff.align!==Di&&(ff.align=qc(ff.align,Di));ff.baseline!==Si&&(ff.baseline=qc(ff.baseline,Si));var kf=Kc({type:"text",role:"axis-label",style:"guide-label",key:"value",from:jh,encode:Hj,overlap:Ck},Qc);Sb.call(Kg,
kf)}if(Fi.domain){var fg=Kg.push,Zf=uf.domain;const ng=sc(zc,Ue),kh=zc.orient;let T,Oa;const zb={enter:T={opacity:$f},update:Oa={opacity:Rf},exit:{opacity:$f}};X(zb,{stroke:ng("domainColor"),strokeCap:ng("domainCap"),strokeDash:ng("domainDash"),strokeDashOffset:ng("domainDashOffset"),strokeWidth:ng("domainWidth"),strokeOpacity:ng("domainOpacity")});const Ac={scale:zc.scale,range:0},jd={scale:zc.scale,range:1};T.x=Oa.x=ih(kh,Ac,$f);T.x2=Oa.x2=ih(kh,jd);T.y=Oa.y=ia(kh,Ac,$f);T.y2=Oa.y2=ia(kh,jd);var qg=
Kc({type:"rule",role:"axis-domain",from:Nh,encode:zb},Zf);fg.call(Kg,qg)}if(Fi.title){var lh=Kg.push,pi=uf.title;const ng=sc(zc,Ue),kh=zc.orient,T=bi(kh,-1,1);let Oa,zb;const Ac={enter:Oa={opacity:$f,anchor:Cd(ng("titleAnchor",null)),align:{signal:Gh}},update:zb=w.extend({},Oa,{opacity:Rf,text:Cd(zc.title)}),exit:{opacity:$f}},jd={signal:`lerp(range("${zc.scale}"), ${Xb(0,1,.5)})`};zb.x=ih(kh,jd);zb.y=ia(kh,jd);var bj=Oa,Sh=T;var Eh=oa(Sh)?{signal:`(${Sh.signal}) * ${90}`}:{value:90*Sh};bj.angle=
ih(kh,$f,Eh);Oa.baseline=ih(kh,Sa(kh,"bottom","top"),{value:"bottom"});zb.angle=Oa.angle;zb.baseline=Oa.baseline;X(Ac,{fill:ng("titleColor"),fillOpacity:ng("titleOpacity"),font:ng("titleFont"),fontSize:ng("titleFontSize"),fontStyle:ng("titleFontStyle"),fontWeight:ng("titleFontWeight"),limit:ng("titleLimit"),lineHeight:ng("titleLineHeight")},{align:ng("titleAlign"),angle:ng("titleAngle"),baseline:ng("titleBaseline")});gf(ng,kh,Ac,pi);Ac.update.align=qc(Ac.update.align,Oa.align);Ac.update.angle=qc(Ac.update.angle,
Oa.angle);Ac.update.baseline=qc(Ac.update.baseline,Oa.baseline);var cj=Kc({type:"text",role:"axis-title",style:"guide-title",from:Nh,encode:Ac},pi);lh.call(Kg,cj)}const ji={enter:{},update:{}};X(ji,{orient:wf("orient"),offset:wf("offset")||0,position:D(zc.position,0),titlePadding:wf("titlePadding"),minExtent:wf("minExtent"),maxExtent:wf("maxExtent"),range:{signal:`abs(span(range("${zc.scale}")))`},translate:wf("translate"),format:zc.format,formatType:zc.formatType});return cd(ec({role:"axis",from:Nh,
encode:V(ji,Yf,cg),marks:Kg,aria:wf("aria"),description:wf("description"),zindex:wf("zindex"),name:yf,interactive:vf,style:ne}),wb)});w.array(Za.marks).forEach(zc=>cd(zc,wb));w.array(Za.legends).forEach(zc=>od(zc,wb));Za.title&&Wd(Za.title,wb);wb.parseLambdas();return wb}function lc(Za,wb){var eb=wb.config;const qb=aa(wb.root=wb.add(new ta("operator",void 0,void 0,void 0))),Qb=Zc(Za,eb);Qb.forEach(Rd=>wa(Rd,wb));wb.description=Za.description||eb.description;wb.eventConfig=eb.events;wb.legends=wb.objectProperty(eb.legend&&
eb.legend.layout);wb.locale=eb.locale;eb=wb.add(Zg());const zc=wb.add(Yh(ba(V({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},Za.encode),"group","frame",Za.style,wb,{pulse:aa(eb)}))),ad=wb.add(Sf({layout:wb.objectProperty(Za.layout),legends:wb.legends,autosize:wb.signalRef("autosize"),mark:qb,pulse:aa(zc)}));wb.operators.pop();wb.pushState(aa(zc),aa(ad),null);Jb(Za,wb,Qb);wb.operators.push(ad);Za=wb.add(eh({mark:qb,pulse:aa(ad)}));Za=wb.add(id({pulse:aa(Za)}));
Za=wb.add(xe({pulse:aa(Za)}));wb.addData("root",new bc(wb,eb,eb,Za));return wb}function Uc(Za,wb){return wb&&wb.signal?{name:Za,update:wb.signal}:{name:Za,value:wb}}function Zc(Za,wb){const eb=ad=>D(Za[ad],wb[ad]),qb=[Uc("background",eb("background")),Uc("autosize",N(eb("autosize"))),Uc("padding",da(eb("padding"))),Uc("width",eb("width")||0),Uc("height",eb("height")||0)],Qb=qb.reduce((ad,Rd)=>(ad[Rd.name]=Rd,ad),{}),zc={};w.array(Za.signals).forEach(ad=>{w.hasOwnProperty(Qb,ad.name)?ad=w.extend(Qb[ad.name],
ad):qb.push(ad);zc[ad.name]=ad});w.array(wb.signals).forEach(ad=>{w.hasOwnProperty(zc,ad.name)||w.hasOwnProperty(Qb,ad.name)||qb.push(ad)});return qb}function rd(Za,wb){this.config=Za||{};this.options=wb||{};this.bindings=[];this.field={};this.signals={};this.lambdas={};this.scales={};this.events={};this.data={};this.streams=[];this.updates=[];this.operators=[];this.locale=this.eventConfig=null;this._subid=this._id=0;this._nextsub=[0];this._parent=[];this._encode=[];this._lookup=[];this._markpath=
[]}function Nd(Za){this.config=Za.config;this.options=Za.options;this.legends=Za.legends;this.field=Object.create(Za.field);this.signals=Object.create(Za.signals);this.lambdas=Object.create(Za.lambdas);this.scales=Object.create(Za.scales);this.events=Object.create(Za.events);this.data=Object.create(Za.data);this.streams=[];this.updates=[];this.operators=[];this._id=0;this._subid=++Za._nextsub[0];this._nextsub=Za._nextsub;this._parent=Za._parent.slice();this._encode=Za._encode.slice();this._lookup=
Za._lookup.slice();this._markpath=Za._markpath}function he(Za){return(w.isArray(Za)?qd:qe)(Za)}function qd(Za){const wb=Za.length;let eb="[";for(let qb=0;qb<wb;++qb){const Qb=Za[qb];eb+=(0<qb?",":"")+(w.isObject(Qb)?Qb.signal||he(Qb):w.stringValue(Qb))}return eb+"]"}function qe(Za){let wb="{",eb=0,qb,Qb;for(qb in Za)Qb=Za[qb],wb+=(1<++eb?",":"")+w.stringValue(qb)+":"+(w.isObject(Qb)?Qb.signal||he(Qb):w.stringValue(Qb));return wb+"}"}function we(){return{description:"Vega visualization",padding:0,
autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:"#4c78a8"},area:{fill:"#4c78a8"},image:null,line:{stroke:"#4c78a8",strokeWidth:2},path:{stroke:"#4c78a8"},rect:{fill:"#4c78a8"},rule:{stroke:"#000"},shape:{stroke:"#4c78a8"},symbol:{fill:"#4c78a8",size:64},text:{fill:"#000",font:"sans-serif",fontSize:11},trail:{fill:"#4c78a8",size:2},style:{"guide-label":{fill:"#000",font:"sans-serif",fontSize:10},"guide-title":{fill:"#000",font:"sans-serif",fontSize:11,
fontWeight:"bold"},"group-title":{fill:"#000",font:"sans-serif",fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:"#000",font:"sans-serif",fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:"#ddd"},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:"#888",grid:!1,
gridWidth:1,gridColor:"#ddd",labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:"#888",tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:"#ddd",gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",
labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:"#888",titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",
extent:[1,0]},symbol:"circle square triangle-up cross diamond triangle-right triangle-down triangle-left".split(" ")}}}const Cd=Za=>w.isObject(Za)&&!w.isArray(Za)?w.extend({},Za):{value:Za},sf=Za=>w.isString(Za)?w.stringValue(Za):Za.signal?`(${Za.signal})`:pa(Za),Jf=(Za,wb,eb,qb)=>`(${Za}(${[wb,eb,qb].map(Y).join(",")})+'')`,tf=["value","update","init","react","bind"],lf=ha("key"),Lg={code:"_.$value",ast:{type:"Identifier",value:"value"}},rg=Za=>(wb,eb,qb)=>new ta(Za,eb,wb||void 0,qb),Pg=rg("aggregate"),
fh=rg("axisticks"),eh=rg("bound"),Zg=rg("collect"),oi=rg("compare"),ei=rg("datajoin"),Yh=rg("encode"),wh=rg("expression"),Wc=rg("facet"),ib=rg("field"),Ua=rg("key"),v=rg("legendentries"),Xa=rg("load"),gc=rg("mark"),wd=rg("multiextent"),Ce=rg("multivalues"),Hf=rg("overlap"),zg=rg("params"),$g=rg("prefacet"),lg=rg("projection"),Ag=rg("proxy"),Ug=rg("relay"),id=rg("render"),Bd=rg("scale"),xe=rg("sieve"),dg=rg("sortitems"),Sf=rg("viewlayout"),Kf=rg("values");let wg=0;const xg={min:"min",max:"max",count:"sum"},
dh="size shape fill stroke strokeWidth strokeDash opacity".split(" "),cg={name:1,style:1,interactive:1},$f={value:0},Rf={value:1},Gh=Xb(w.stringValue("left"),w.stringValue("right"),w.stringValue("center")),li=Xb('"top"','"bottom"','"middle"'),gh=`datum.vgrad && ${'item.orient \x3d\x3d\x3d "right"'} ? (${Xb('"right"','"left"','"center"')}) : (${'(item.orient \x3d\x3d\x3d "left" || item.orient \x3d\x3d\x3d "right")'} && !(datum.vgrad && ${'item.orient \x3d\x3d\x3d "left"'})) ? "left" : ${Gh}`,Lf=`${'(item.orient \x3d\x3d\x3d "left" || item.orient \x3d\x3d\x3d "right")'} ? (datum.vgrad ? (${'item.orient \x3d\x3d\x3d "right"'} ? "bottom" : "top") : ${li}) : "top"`;
bc.fromEntries=function(Za,wb){const eb=wb.length,qb=wb[eb-1],Qb=wb[eb-2];let zc=wb[0],ad=null,Rd=1;zc&&"load"===zc.type&&(zc=wb[1]);for(Za.add(wb[0]);Rd<eb;++Rd)wb[Rd].params.pulse=aa(wb[Rd-1]),Za.add(wb[Rd]),"aggregate"===wb[Rd].type&&(ad=wb[Rd]);return new bc(Za,zc,Qb,qb,ad)};bc.prototype={countsRef(Za,wb,eb){const qb=this.counts||(this.counts={}),Qb=yc(wb);if(null!=Qb){Za=this.scope;var zc=qb[Qb]}zc?eb&&eb.field&&$c(Za,zc.agg.params,eb):(zc={groupby:Za.fieldRef(wb,"key"),pulse:aa(this.output)},
eb&&eb.field&&$c(Za,zc,eb),eb=Za.add(Pg(zc)),zc=Za.add(Zg({pulse:aa(eb)})),zc={agg:eb,ref:aa(zc)},null!=Qb&&(qb[Qb]=zc));return zc.ref},tuplesRef(){return aa(this.values)},extentRef(Za,wb){return cc(Za,this,"extent","extent",wb,!1)},domainRef(Za,wb){return cc(Za,this,"domain","values",wb,!1)},valuesRef(Za,wb,eb){return cc(Za,this,"vals","values",wb,eb||!0)},lookupRef(Za,wb){return cc(Za,this,"lookup","tupleindex",wb,!1)},indataRef(Za,wb){return cc(Za,this,"indata","tupleindex",wb,!0,!0)}};const bi=
(Za,wb,eb)=>{oa(Za)?(Za=Za.signal,wb=Eb(`${Za} === '${"left"}' || ${Za} === '${"top"}'`,wb,eb)):wb="left"===Za||"top"===Za?wb:eb;return wb},ih=(Za,wb,eb)=>{oa(Za)?(Za=Za.signal,wb=lb(`${Za} === '${"top"}' || ${Za} === '${"bottom"}'`,wb,eb)):wb="bottom"===Za||"top"===Za?wb:eb;return wb},ia=(Za,wb,eb)=>{oa(Za)?(Za=Za.signal,wb=lb(`${Za} !== '${"top"}' && ${Za} !== '${"bottom"}'`,wb,eb)):wb="bottom"===Za||"top"===Za?eb:wb;return wb},Sa=(Za,wb,eb)=>oa(Za)?Eb(`${Za.signal} === '${"top"}'`,wb,eb):"top"===
Za?{value:wb}:{value:eb},lb=(Za,wb,eb)=>{wb=null!=wb?Cd(wb):wb;eb=null!=eb?Cd(eb):eb;if(null!=wb&&1!==Object.keys(wb).length||null!=eb&&1!==Object.keys(eb).length)return[w.extend({test:Za},wb)].concat(eb||[]);wb=wb?wb.signal||w.stringValue(wb.value):null;eb=eb?eb.signal||w.stringValue(eb.value):null;return{signal:`${Za} ? (${wb}) : (${eb})`}},Eb=(Za,wb,eb)=>({signal:`${Za} ? (${Vb(wb)}) : (${Vb(eb)})`}),Vb=Za=>oa(Za)?Za.signal:null==Za?null:w.stringValue(Za),qc=(Za,wb)=>{const eb=Za.signal;return eb&&
eb.endsWith("(null)")?{signal:eb.slice(0,-6)+wb.signal}:Za};rd.prototype=Nd.prototype={parse(Za){return Jb(Za,this)},fork(){return new Nd(this)},isSubscope(){return 0<this._subid},toRuntime(){this.finish();return{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(Za){this.operators.push(Za);Za.id=this.id();Za.refs&&(Za.refs.forEach(wb=>
{wb.$ref=Za.id}),Za.refs=null);return Za},proxy(Za){Za=Za instanceof ta?aa(Za):Za;return this.add(Ag({value:Za}))},addStream(Za){this.streams.push(Za);Za.id=this.id();return Za},addUpdate(Za){this.updates.push(Za);return Za},finish(){function Za(qb,Qb,zc){qb&&(qb=qb.data||(qb.data={}),Qb=qb[Qb]||(qb[Qb]=[]),Qb.push(zc))}let wb,eb;this.root&&(this.root.root=!0);for(wb in this.signals)this.signals[wb].signal=wb;for(wb in this.scales)this.scales[wb].scale=wb;for(wb in this.data){eb=this.data[wb];Za(eb.input,
wb,"input");Za(eb.output,wb,"output");Za(eb.values,wb,"values");for(const qb in eb.index)Za(eb.index[qb],wb,"index:"+qb)}return this},pushState(Za,wb,eb){this._encode.push(aa(this.add(xe({pulse:Za}))));this._parent.push(wb);this._lookup.push(eb?aa(this.proxy(eb)):null);this._markpath.push(-1)},popState(){this._encode.pop();this._parent.pop();this._lookup.pop();this._markpath.pop()},parent(){return w.peek(this._parent)},encode(){return w.peek(this._encode)},lookup(){return w.peek(this._lookup)},markpath(){const Za=
this._markpath;return++Za[Za.length-1]},fieldRef(Za,wb){if(w.isString(Za))return ha(Za,wb);Za.signal||w.error("Unsupported field reference: "+w.stringValue(Za));Za=Za.signal;var eb=this.field[Za];eb||(eb={name:this.signalRef(Za)},wb&&(eb.as=wb),this.field[Za]=eb=aa(this.add(ib(eb))));return eb},compareRef(Za){let wb=!1;const eb=Qb=>oa(Qb)?(wb=!0,this.signalRef(Qb.signal)):Qb&&Qb.expr?(wb=!0,this.exprRef(Qb.expr)):Qb,qb=w.array(Za.field).map(eb);Za=w.array(Za.order).map(eb);return wb?aa(this.add(oi({fields:qb,
orders:Za}))):{$compare:qb,$order:Za}},keyRef(Za,wb){let eb=!1;const qb=this.signals;Za=w.array(Za).map(Qb=>oa(Qb)?(eb=!0,aa(qb[Qb.signal])):Qb);return eb?aa(this.add(Ua({fields:Za,flat:wb}))):ka(Za,wb)},sortRef(Za){if(!Za)return Za;const wb=H(Za.op,Za.field);Za=Za.order||"ascending";return Za.signal?aa(this.add(oi({fields:wb,orders:this.signalRef(Za.signal)}))):{$compare:wb,$order:Za}},event(Za,wb){const eb=Za+":"+wb;if(!this.events[eb]){const qb=this.id();this.streams.push({id:qb,source:Za,type:wb});
this.events[eb]=qb}return this.events[eb]},hasOwnSignal(Za){return w.hasOwnProperty(this.signals,Za)},addSignal(Za,wb){this.hasOwnSignal(Za)&&w.error("Duplicate signal name: "+w.stringValue(Za));wb=wb instanceof ta?wb:this.add(new ta("operator",wb,void 0,void 0));return this.signals[Za]=wb},getSignal(Za){this.signals[Za]||w.error("Unrecognized signal name: "+w.stringValue(Za));return this.signals[Za]},signalRef(Za){if(this.signals[Za])return aa(this.signals[Za]);w.hasOwnProperty(this.lambdas,Za)||
(this.lambdas[Za]=this.add(new ta("operator",null,void 0,void 0)));return aa(this.lambdas[Za])},parseLambdas(){const Za=Object.keys(this.lambdas);for(let eb=0,qb=Za.length;eb<qb;++eb){var wb=Za[eb];const Qb=u.parseExpression(wb,this);wb=this.lambdas[wb];wb.params=Qb.$params;wb.update=Qb.$expr}},property(Za){return Za&&Za.signal?this.signalRef(Za.signal):Za},objectProperty(Za){return Za&&w.isObject(Za)?this.signalRef(Za.signal||he(Za)):Za},exprRef(Za,wb){Za={expr:u.parseExpression(Za,this)};wb&&(Za.expr.$name=
wb);return aa(this.add(wh(Za)))},addBinding(Za,wb){this.bindings||w.error("Nested signals do not support binding: "+w.stringValue(Za));this.bindings.push(w.extend({signal:Za},wb))},addScaleProj(Za,wb){w.hasOwnProperty(this.scales,Za)&&w.error("Duplicate scale or projection name: "+w.stringValue(Za));this.scales[Za]=this.add(wb)},addScale(Za,wb){this.addScaleProj(Za,Bd(wb))},addProjection(Za,wb){this.addScaleProj(Za,lg(wb))},getScale(Za){this.scales[Za]||w.error("Unrecognized scale name: "+w.stringValue(Za));
return this.scales[Za]},scaleRef(Za){return aa(this.getScale(Za))},scaleType(Za){return this.getScale(Za).params.type},projectionRef(Za){return this.scaleRef(Za)},projectionType(Za){return this.scaleType(Za)},addData(Za,wb){w.hasOwnProperty(this.data,Za)&&w.error("Duplicate data set name: "+w.stringValue(Za));return this.data[Za]=wb},getData(Za){this.data[Za]||w.error("Undefined data set name: "+w.stringValue(Za));return this.data[Za]},addDataPipeline(Za,wb){w.hasOwnProperty(this.data,Za)&&w.error("Duplicate data set name: "+
w.stringValue(Za));return this.addData(Za,bc.fromEntries(this,wb))}};A.AxisDomainRole="axis-domain";A.AxisGridRole="axis-grid";A.AxisLabelRole="axis-label";A.AxisRole="axis";A.AxisTickRole="axis-tick";A.AxisTitleRole="axis-title";A.DataScope=bc;A.FrameRole="frame";A.LegendEntryRole="legend-entry";A.LegendLabelRole="legend-label";A.LegendRole="legend";A.LegendSymbolRole="legend-symbol";A.LegendTitleRole="legend-title";A.MarkRole="mark";A.Scope=rd;A.ScopeRole="scope";A.config=we;A.parse=function(Za,
wb,eb){w.isObject(Za)||w.error("Input Vega specification must be an object.");wb=w.mergeConfig(we(),wb,Za.config);return lc(Za,new rd(wb,eb)).toRuntime()};A.signal=wa;A.signalUpdates=pb;A.stream=la})};
shadow$provide[450]=function(ob,Ba,Gb,Ea){function A(aa){var ha=Object.create(null);aa&&Object.keys(aa).forEach(function(ka){if("default"!==ka){var H=Object.getOwnPropertyDescriptor(aa,ka);Object.defineProperty(ha,ka,H.get?H:{enumerable:!0,get:function(){return aa[ka]}})}});ha.default=aa;return Object.freeze(ha)}var w=Ba(421),u=Ba(426),x=Ba(428),I=Ba(432),B=Ba(433),N=Ba(435),da=Ba(436),U=Ba(437),X=Ba(438),V=Ba(439),P=Ba(440);Gb=Ba(441);ob=Ba(442);var z=Ba(427),G=Ba(423),Y=Ba(425),Q=Ba(431),ja=Ba(430),
pa=Ba(434),J=Ba(447),K=Ba(424),ba=Ba(445),O=Ba(449),fa=Ba(446),wa=Ba(443),ta=Ba(448);Ba=A(x);I=A(I);B=A(B);N=A(N);da=A(da);U=A(U);X=A(X);V=A(V);P=A(P);Gb=A(Gb);ob=A(ob);w.extend(u.transforms,Ba,I,B,N,da,X,U,V,P,Gb,ob);Object.defineProperty(Ea,"Dataflow",{enumerable:!0,get:function(){return u.Dataflow}});Object.defineProperty(Ea,"EventStream",{enumerable:!0,get:function(){return u.EventStream}});Object.defineProperty(Ea,"MultiPulse",{enumerable:!0,get:function(){return u.MultiPulse}});Object.defineProperty(Ea,
"Operator",{enumerable:!0,get:function(){return u.Operator}});Object.defineProperty(Ea,"Parameters",{enumerable:!0,get:function(){return u.Parameters}});Object.defineProperty(Ea,"Pulse",{enumerable:!0,get:function(){return u.Pulse}});Object.defineProperty(Ea,"Transform",{enumerable:!0,get:function(){return u.Transform}});Object.defineProperty(Ea,"changeset",{enumerable:!0,get:function(){return u.changeset}});Object.defineProperty(Ea,"definition",{enumerable:!0,get:function(){return u.definition}});
Object.defineProperty(Ea,"ingest",{enumerable:!0,get:function(){return u.ingest}});Object.defineProperty(Ea,"isTuple",{enumerable:!0,get:function(){return u.isTuple}});Object.defineProperty(Ea,"transform",{enumerable:!0,get:function(){return u.transform}});Object.defineProperty(Ea,"transforms",{enumerable:!0,get:function(){return u.transforms}});Object.defineProperty(Ea,"tupleid",{enumerable:!0,get:function(){return u.tupleid}});Object.defineProperty(Ea,"interpolate",{enumerable:!0,get:function(){return ja.interpolate}});
Object.defineProperty(Ea,"interpolateColors",{enumerable:!0,get:function(){return ja.interpolateColors}});Object.defineProperty(Ea,"interpolateRange",{enumerable:!0,get:function(){return ja.interpolateRange}});Object.defineProperty(Ea,"quantizeInterpolator",{enumerable:!0,get:function(){return ja.quantizeInterpolator}});Object.defineProperty(Ea,"scale",{enumerable:!0,get:function(){return ja.scale}});Object.defineProperty(Ea,"scheme",{enumerable:!0,get:function(){return ja.scheme}});Object.defineProperty(Ea,
"projection",{enumerable:!0,get:function(){return pa.projection}});Object.defineProperty(Ea,"View",{enumerable:!0,get:function(){return J.View}});Object.defineProperty(Ea,"defaultLocale",{enumerable:!0,get:function(){return K.defaultLocale}});Object.defineProperty(Ea,"formatLocale",{enumerable:!0,get:function(){return K.numberFormatDefaultLocale}});Object.defineProperty(Ea,"locale",{enumerable:!0,get:function(){return K.locale}});Object.defineProperty(Ea,"resetDefaultLocale",{enumerable:!0,get:function(){return K.resetDefaultLocale}});
Object.defineProperty(Ea,"timeFormatLocale",{enumerable:!0,get:function(){return K.timeFormatDefaultLocale}});Object.defineProperty(Ea,"expressionFunction",{enumerable:!0,get:function(){return ba.expressionFunction}});Object.defineProperty(Ea,"parse",{enumerable:!0,get:function(){return O.parse}});Object.defineProperty(Ea,"runtimeContext",{enumerable:!0,get:function(){return fa.context}});Object.defineProperty(Ea,"codegenExpression",{enumerable:!0,get:function(){return wa.codegenExpression}});Object.defineProperty(Ea,
"parseExpression",{enumerable:!0,get:function(){return wa.parseExpression}});Object.defineProperty(Ea,"parseSelector",{enumerable:!0,get:function(){return ta.parseSelector}});Ea.version="5.28.0";Object.keys(w).forEach(function(aa){"default"===aa||Object.prototype.hasOwnProperty.call(Ea,aa)||Object.defineProperty(Ea,aa,{enumerable:!0,get:function(){return w[aa]}})});Object.keys(z).forEach(function(aa){"default"===aa||Object.prototype.hasOwnProperty.call(Ea,aa)||Object.defineProperty(Ea,aa,{enumerable:!0,
get:function(){return z[aa]}})});Object.keys(G).forEach(function(aa){"default"===aa||Object.prototype.hasOwnProperty.call(Ea,aa)||Object.defineProperty(Ea,aa,{enumerable:!0,get:function(){return G[aa]}})});Object.keys(Y).forEach(function(aa){"default"===aa||Object.prototype.hasOwnProperty.call(Ea,aa)||Object.defineProperty(Ea,aa,{enumerable:!0,get:function(){return Y[aa]}})});Object.keys(Q).forEach(function(aa){"default"===aa||Object.prototype.hasOwnProperty.call(Ea,aa)||Object.defineProperty(Ea,
aa,{enumerable:!0,get:function(){return Q[aa]}})})};
shadow$provide[451]=function(ob,Ba,Gb,Ea){var A=Ba(33).Buffer;(function(w,u){"object"===typeof Ea&&"undefined"!==typeof Gb?u(Ea):"function"===typeof define&&define.amd?define(["exports"],u):(w="undefined"!==typeof globalThis?globalThis:w||self,u(w.vegaLite={}))})(this,function(w){function u(S,Da,F){S.fields=Da||[];S.fname=F;return S}function x(S){return 1===S.length?jm(S[0]):Ql(S)}function I(S){function Da(){F.push(Db+S.substring(Nb,Gc));Db="";Nb=Gc+1}const F=[],qa=S.length;let Fa=null,nb=0,Db="",
Nb,Gc,Xc;S+="";for(Nb=Gc=0;Gc<qa;++Gc)if(Xc=S[Gc],"\\"===Xc)Db+=S.substring(Nb,Gc),Db+=S.substring(++Gc,++Gc),Nb=Gc;else if(Xc===Fa)Da(),Fa=null,nb=-1;else if(!Fa)if(Nb===nb&&'"'===Xc)Nb=Gc+1,Fa=Xc;else if(Nb===nb&&"'"===Xc)Nb=Gc+1,Fa=Xc;else if("."===Xc&&!nb)Gc>Nb?Da():Nb=Gc+1;else if("["===Xc)Gc>Nb&&Da(),nb=Nb=Gc+1;else if("]"===Xc){if(!nb)throw Error("Access path missing open bracket: "+S);0<nb&&Da();nb=0;Nb=Gc+1}if(nb)throw Error("Access path missing closing bracket: "+S);if(Fa)throw Error("Access path missing closing quote: "+
S);Gc>Nb&&(Gc++,Da());return F}function B(S,Da,F){Da=[Da].concat([].slice.call(F));console[S].apply(console,Da)}function N(S){return S===Object(S)}function da(...S){return S.reduce((Da,F)=>{for(const qa in F)"signals"===qa?Da.signals=X(Da.signals,F.signals):U(Da,qa,F[qa],"legend"===qa?{layout:1}:"style"===qa?!0:null);return Da},{})}function U(S,Da,F,qa){if("__proto__"!==Da){var Fa;if(N(F)&&!Jh(F))for(Fa in S=N(S[Da])?S[Da]:S[Da]={},F)qa&&(!0===qa||qa[Fa])?U(S,Fa,F[Fa]):"__proto__"!==Fa&&(S[Fa]=F[Fa]);
else S[Da]=F}}function X(S,Da){function F(nb){qa[nb.name]||(qa[nb.name]=1,Fa.push(nb))}if(null==S)return Da;const qa={},Fa=[];Da.forEach(F);S.forEach(F);return Fa}function V(S){return null!=S?Jh(S)?S:[S]:[]}function P(S){return"boolean"===typeof S}function z(S){return"number"===typeof S}function G(S){return"string"===typeof S}function Y(S){return Jh(S)?"["+S.map(Y)+"]":N(S)||G(S)?JSON.stringify(S).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):S}function Q(S){const Da={},F=S.length;for(let qa=
0;qa<F;++qa)Da[S[qa]]=!0;return Da}function ja(S,Da){if(S.not)ja(S.not,Da);else if(S.and)for(const F of S.and)ja(F,Da);else if(S.or)for(const F of S.or)ja(F,Da);else Da(S)}function pa(S,Da){return S.not?{not:pa(S.not,Da)}:S.and?{and:S.and.map(F=>pa(F,Da))}:S.or?{or:S.or.map(F=>pa(F,Da))}:Da(S)}function J(S,Da){const F={};for(const qa of Da)vk.call(S,qa)&&(F[qa]=S[qa]);return F}function K(S,Da){S=Object.assign({},S);for(const F of Da)delete S[F];return S}function ba(S){if(z(S))return S;S=G(S)?S:bm(S);
if(250>S.length)return S;let Da=0;for(let F=0;F<S.length;F++){const qa=S.charCodeAt(F);Da=(Da<<5)-Da+qa;Da&=Da}return Da}function O(S){return!1===S||null===S}function fa(S,Da){return-1<S.indexOf(Da)}function wa(S,Da){let F=0;for(const qa of S.entries()){const [Fa,nb]=qa;if(Da(nb,Fa,F++))return!0}return!1}function ta(S,Da){let F=0;for(const qa of S.entries()){const [Fa,nb]=qa;if(!Da(nb,Fa,F++))return!1}return!0}function aa(S,...Da){for(const qa of Da){Da=S;var F=null!==qa&&void 0!==qa?qa:{};for(const Fa of jc(F))U(Da,
Fa,F[Fa],!0)}return S}function ha(S,Da){const F=[],qa={};for(const Fa of S)S=Da(Fa),S in qa||(qa[S]=1,F.push(Fa));return F}function ka(S,Da){if(S.size!==Da.size)return!1;for(const F of S)if(!Da.has(F))return!1;return!0}function H(S,Da){for(const F of S)if(Da.has(F))return!0;return!1}function oa(S){const Da=new Set;for(const F of S){const qa=I(F).map((Fa,nb)=>0===nb?Fa:"[".concat(Fa,"]"));S=qa.map((Fa,nb)=>qa.slice(0,nb+1).join(""));for(const Fa of S)Da.add(Fa)}return Da}function ea(S,Da){return void 0===
S||void 0===Da?!0:H(oa(S),oa(Da))}function D(S){return 0===jc(S).length}function R(S){return!0===S||!1===S}function la(S){const Da=S.replace(/\W/g,"_");return(S.match(/^\d+/)?"_":"")+Da}function Ia(S,Da){return S.not?"!("+Ia(S.not,Da)+")":S.and?"("+S.and.map(F=>Ia(F,Da)).join(") \x26\x26 (")+")":S.or?"("+S.or.map(F=>Ia(F,Da)).join(") || (")+")":Da(S)}function Ma(S,Da){if(0===Da.length)return!0;const F=Da.shift();F in S&&Ma(S[F],Da)&&delete S[F];return D(S)}function Ta(S){return S.charAt(0).toUpperCase()+
S.substr(1)}function ab(S,Da){Da=void 0===Da?"datum":Da;S=I(S);const F=[];for(let qa=1;qa<=S.length;qa++){const Fa="[".concat(S.slice(0,qa).map(Y).join("]["),"]");F.push("".concat(Da).concat(Fa))}return F.join(" \x26\x26 ")}function db(S,Da){return"".concat(void 0===Da?"datum":Da,"[").concat(Y(I(S).join(".")),"]")}function ub(S){return S.replace(/(\[|\]|\.|'|")/g,"\\$1")}function pb(S){return"".concat(I(S).map(ub).join("\\."))}function Ya(S,Da,F){return S.replace(new RegExp(Da.replace(/[-/\\^$*+?.()|[\]{}]/g,
"\\$\x26"),"g"),F)}function Va(S){return"".concat(I(S).join("."))}function Pa(S){return S?I(S).length:0}function Ha(...S){for(const Da of S)if(void 0!==Da)return Da}function Ca(S){const Da=++va;return S?String(S)+Da:Da}function Aa(S){return Ga(S)?S:"__".concat(S)}function Ga(S){return 0===S.indexOf("__")}function Ka(S){if(void 0!==S)return(S%360+360)%360}function cb(S){return z(S)?!0:!isNaN(S)&&!isNaN(parseFloat(S))}function fb(S){return S&&S.condition}function La(S){return!!S&&!!S.argmin}function Bb(S){return!!S&&
!!S.argmax}function Ob(S){return G(S)&&!!gb[S]}function ec(S){return G(S)&&fa(yb,S)}function sc(S){switch(S){case "latitude":return"y";case "latitude2":return"y2";case "longitude":return"x";case "longitude2":return"x2"}}function Ic(S){return"color"===S||"fill"===S||"stroke"===S}function Xb(S){return Wb(S)!==S}function Wb(S){switch(S){case "x2":return"x";case "y2":return"y";case "latitude2":return"latitude";case "longitude2":return"longitude";case "theta2":return"theta";case "radius2":return"radius"}return S}
function Kc(S){if(S in $b)switch(S){case "theta":return"startAngle";case "theta2":return"endAngle";case "radius":return"outerRadius";case "radius2":return"innerRadius"}return S}function Kb(S){switch(S){case "x":return"x2";case "y":return"y2";case "latitude":return"latitude2";case "longitude":return"longitude2";case "theta":return"theta2";case "radius":return"radius2"}}function mc(S){switch(S){case "x":case "x2":return"width";case "y":case "y2":return"height"}}function Ub(S){switch(S){case "x":return"xOffset";
case "y":return"yOffset";case "x2":return"x2Offset";case "y2":return"y2Offset";case "theta":return"thetaOffset";case "radius":return"radiusOffset";case "theta2":return"theta2Offset";case "radius2":return"radius2Offset"}}function oc(S){return"width"===S?"x":"y"}function Cc(S){switch(S){case "color":case "fill":case "stroke":case "description":case "detail":case "key":case "tooltip":case "href":case "order":case "opacity":case "fillOpacity":case "strokeOpacity":case "strokeWidth":case "facet":case "row":case "column":return Qg;
case "x":case "y":case "latitude":case "longitude":return qf;case "x2":case "y2":case "latitude2":case "longitude2":return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case "size":return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case "strokeDash":return{line:"always",point:"always",tick:"always",
rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case "shape":return{point:"always",geoshape:"always"};case "text":return{text:"always"};case "angle":return{point:"always",square:"always",text:"always"};case "url":return{image:"always"};case "theta":return{text:"always",arc:"always"};case "radius":return{text:"always",arc:"always"};case "theta2":case "radius2":return{arc:"always"}}}function Mc(S){switch(S){case "facet":case "row":case "column":case "shape":case "strokeDash":case "text":case "tooltip":case "href":case "url":case "description":return"discrete";
case "color":case "fill":case "stroke":return"flexible"}}function Pb(S){P(S)&&(S=Se(S,void 0));return"bin"+jc(S).map(Da=>Hb(S[Da])?la("_".concat(Da,"_").concat(Pc(S[Da]))):la("_".concat(Da,"_").concat(S[Da]))).join("")}function nc(S){return!0===S||N(S)&&!S.binned}function rc(S){return"binned"===S||N(S)&&!0===S.binned}function Hb(S){return null===S||void 0===S?void 0:S.selection}function Jc(S){switch(S){case "row":case "column":case "size":case "color":case "fill":case "stroke":case "strokeWidth":case "opacity":case "fillOpacity":case "strokeOpacity":case "shape":return 6;
case "strokeDash":return 4;default:return 10}}function kc(S,Da,F){Da in S?Object.defineProperty(S,Da,{value:F,enumerable:!0,configurable:!0,writable:!0}):S[Da]=F;return S}function Ab(S,Da,F){Da=Da.get(S);if(!Da)throw new TypeError("attempted to set private field on non-instance");if(Da.set)Da.set.call(S,F);else{if(!Da.writable)throw new TypeError("attempted to set read only private field");Da.value=F}return F}function md(S){return"Invalid specification ".concat(JSON.stringify(S),'. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".')}
function yd(S){return"".concat("width"==S?"Width":"Height",' "container" only works for single views and layered views.')}function hd(S){const Da="width"==S?"x":"y";return"".concat("width"==S?"Width":"Height",' "container" only works well with autosize "fit" or "fit-').concat(Da,'".')}function Ed(S){return S?'Dropping "fit-'.concat(S,'" because spec has discrete ').concat(mc(S),"."):'Dropping "fit" because spec has discrete size.'}function Qd(S){return"Unknown field for ".concat(S,". Cannot calculate view size.")}
function fd(S){return'Cannot project a selection on encoding channel "'.concat(S,'", which has no field.')}function ed(S,Da){return'Cannot project a selection on encoding channel "'.concat(S,'" as it uses an aggregate function ("').concat(Da,'").')}function bc(S){return"Selection not supported for ".concat(S," yet.")}function yc(S){return'The "columns" property cannot be used when "'.concat(S,'" has nested row/column.')}function $c(S,Da,F){return'An ancestor parsed field "'.concat(S,'" as ').concat(F,
" but a child wants to parse the field as ").concat(Da,".")}function cc(S){return"Config.customFormatTypes is not true, thus custom format type and format for channel ".concat(S," are dropped.")}function tb(S,Da){const {fill:F,stroke:qa}=Da;return"Dropping color ".concat(S," as the plot also has ").concat(F&&qa?"fill and stroke":F?"fill":"stroke",".")}function tc(S,Da){return"Dropping ".concat(fc(S),' from channel "').concat(Da,'" since it does not contain any data field, datum, value, or signal.')}
function Ec(S,Da,F){return"".concat(S,' dropped as it is incompatible with "').concat(Da,'"').concat(F?" when ".concat(F):"",".")}function cd(S){return"".concat(S,"-encoding is dropped as ").concat(S," is not a valid encoding channel.")}function bd(S,Da){return'Using discrete channel "'.concat(S,'" to encode "').concat(Da,'" field can be misleading as it does not encode ').concat("ordinal"===Da?"order":"magnitude",".")}function od(S,Da,F){return"".concat(F,"-scale's \"").concat(Da,'" is dropped as it does not work with ').concat(S,
" scale.")}function Dd(S){return'The step for "'.concat(S,'" is dropped because the ').concat("width"===S?"x":"y"," is continuous.")}function xd(S){return'Cannot stack "'.concat(S,'" if there is already "').concat(S,'2".')}function sd(S,Da){return"Invalid ".concat(S,": ").concat(fc(Da),".")}function Vd(S){return"1D error band does not support ".concat(S,".")}function re(S){return"Channel ".concat(S,' is required for "binned" bin.')}function Wd(...S){mi.warn(...S)}function Fe(S){if(S&&N(S))for(const Da of Hi)if(Da in
S)return!0;return!1}function Bf(S){cb(S)&&(S=+S);if(z(S))return S-1;var Da=S.toLowerCase();const F=Mj.indexOf(Da);if(-1!==F)return F;Da=Da.substr(0,3);Da=Ih.indexOf(Da);if(-1!==Da)return Da;throw Error(sd("month",S));}function Ye(S){cb(S)&&(S=+S);if(z(S))return S%7;var Da=S.toLowerCase();const F=ah.indexOf(Da);if(-1!==F)return F;Da=Da.substr(0,3);Da=Lj.indexOf(Da);if(-1!==Da)return Da;throw Error(sd("day",S));}function bg(S,Da){const F=[];Da&&void 0!==S.day&&1<jc(S).length&&(Wd("Dropping day from datetime ".concat(fc(S),
" as day cannot be combined with other units.")),S=vb(S),delete S.day);void 0!==S.year?F.push(S.year):F.push(2012);if(void 0!==S.month){var qa=Da?Bf(S.month):S.month;F.push(qa)}else if(void 0!==S.quarter){if(Da)if(qa=S.quarter,cb(qa)&&(qa=+qa),z(qa))4<qa&&Wd(sd("quarter",qa)),--qa;else throw Error(sd("quarter",qa));else qa=S.quarter;F.push(z(qa)?3*qa:qa+"*3")}else F.push(0);void 0!==S.date?F.push(S.date):void 0!==S.day?(Da=Da?Ye(S.day):S.day,F.push(z(Da)?Da+1:Da+"+1")):F.push(1);for(const Fa of["hours",
"minutes","seconds","milliseconds"])Da=S[Fa],F.push("undefined"===typeof Da?0:Da);return F}function rf(S){const Da=bg(S,!0).join(", ");return S.utc?"utc(".concat(Da,")"):"datetime(".concat(Da,")")}function Ff(S){const Da=bg(S,!0);return S.utc?+new Date(Date.UTC(...Da)):+new Date(...Da)}function pg(S){const Da=[];for(const F of Hi)gf(S,F)&&Da.push(F);return Da}function gf(S,Da){const F=S.indexOf(Da);return 0>F||0<F&&"seconds"===Da&&"i"===S.charAt(F-1)||S.length>F+3&&"day"===Da&&"o"===S.charAt(F+3)||
0<F&&"year"===Da&&"f"===S.charAt(F-1)?!1:!0}function Jb(S){if(S)return S=pg(S),"timeUnitSpecifier(".concat(bm(S),", ").concat(bm(xi),")")}function lc(S){if(S){var Da;G(S)?Da={unit:S}:N(S)&&(Da=Object.assign({},S,S.unit?{unit:S.unit}:{}));Da.unit.startsWith("utc")&&(Da.utc=!0,Da.unit=Da.unit.substr(3));return Da}}function Uc(S){var Da=lc(S);S=Object.assign({},Da);Da=Da.utc;const F=(delete S.utc,S);return F.unit?(Da?"utc":"")+jc(F).map(qa=>la("".concat("unit"===qa?"":"_".concat(qa,"_")).concat(F[qa]))).join(""):
(Da?"utc":"")+"timeunit"+jc(F).map(qa=>la("_".concat(qa,"_").concat(F[qa]))).join("")}function Zc(S){return S&&!!S.signal}function rd(S){return!!S.step}function Nd(S){return Jh(S)?!1:"field"in S&&"data"in S}function he(S){return S&&!!S.field&&void 0!==S.equal}function qd(S){return S&&!!S.field&&void 0!==S.lt}function qe(S){return S&&!!S.field&&void 0!==S.lte}function we(S){return S&&!!S.field&&void 0!==S.gt}function Cd(S){return S&&!!S.field&&void 0!==S.gte}function sf(S){return S&&S.field&&(Jh(S.range)&&
2===S.range.length||Zc(S.range))?!0:!1}function Jf(S){return S&&!!S.field&&(Jh(S.oneOf)||Jh(S.in))}function tf(S){return Jf(S)||he(S)||sf(S)||qd(S)||we(S)||qe(S)||Cd(S)}function lf(S,Da){return Ze(S,{timeUnit:Da,wrapTime:!0})}function Lg(S,Da){return S.map(F=>lf(F,Da))}function rg(S,Da){Da=void 0===Da?!0:Da;var F,{field:qa}=S;const Fa=null===(F=lc(S.timeUnit))||void 0===F?void 0:F.unit;if(Fa){({end:F}={end:!1});qa=ab(qa);const Nb=Fa.startsWith("utc")?"utc":"";const Gc={};for(Db of Hi)if(gf(Fa,Db)){var nb=
Db;nb="quarter"===nb?"(".concat(Nb,"quarter(").concat(qa,")-1)"):"".concat(Nb).concat(nb,"(").concat(qa,")");Gc[Db]=nb;nb=Db}F&&(Gc[nb]+="+1");var Db=Gc;F=bg(Db,!1).join(", ");Db="time("+(Db.utc?"utc(".concat(F,")"):"datetime(".concat(F,")"))+")"}else Db=qb(S,{expr:"datum"});if(he(S))return Db+"\x3d\x3d\x3d"+lf(S.equal,Fa);if(qd(S))return Da=S.lt,"".concat(Db,"\x3c").concat(lf(Da,Fa));if(we(S))return Da=S.gt,"".concat(Db,"\x3e").concat(lf(Da,Fa));if(qe(S))return Da=S.lte,"".concat(Db,"\x3c\x3d").concat(lf(Da,
Fa));if(Cd(S))return Da=S.gte,"".concat(Db,"\x3e\x3d").concat(lf(Da,Fa));if(Jf(S))return"indexof([".concat(Lg(S.oneOf,Fa).join(","),"], ").concat(Db,") !\x3d\x3d -1");if(S&&S.field&&void 0!==S.valid)return Pg(Db,S.valid);if(sf(S)){({range:F}=S);S=Zc(F)?{signal:"".concat(F.signal,"[0]")}:F[0];F=Zc(F)?{signal:"".concat(F.signal,"[1]")}:F[1];if(null!==S&&null!==F&&Da)return"inrange("+Db+", ["+lf(S,Fa)+", "+lf(F,Fa)+"])";Da=[];null!==S&&Da.push("".concat(Db," \x3e\x3d ").concat(lf(S,Fa)));null!==F&&Da.push("".concat(Db,
" \x3c\x3d ").concat(lf(F,Fa)));return 0<Da.length?Da.join(" \x26\x26 "):"true"}throw Error("Invalid field predicate: ".concat(JSON.stringify(S)));}function Pg(S,Da){return void 0===Da||Da?"isValid(".concat(S,") \x26\x26 isFinite(+").concat(S,")"):"!isValid(".concat(S,") || !isFinite(+").concat(S,")")}function fh(S){if(tf(S)&&S.timeUnit){var Da;return Object.assign({},S,{timeUnit:null===(Da=lc(S.timeUnit))||void 0===Da?void 0:Da.unit})}return S}function eh(S){if(S)switch(S=S.toLowerCase(),S){case "q":case "quantitative":return"quantitative";
case "t":case "temporal":return"temporal";case "o":case "ordinal":return"ordinal";case "n":case "nominal":return"nominal";case "geojson":return"geojson"}}function Zg(S){return null===S||void 0===S?void 0:S.selection}function oi(S,Da){switch(Da){case "type":case "domain":case "reverse":case "range":return!0;case "scheme":case "interpolate":return!fa(["point","band","identity"],S);case "bins":return!fa(["point","band","identity","ordinal"],S);case "round":return S in Hd||"band"===S||"point"===S;case "padding":case "rangeMin":case "rangeMax":return S in
Hd||fa(["point","band"],S);case "paddingOuter":case "align":return fa(["point","band"],S);case "paddingInner":return"band"===S;case "domainMax":case "domainMid":case "domainMin":case "clamp":return S in Hd;case "nice":return S in Hd||"quantize"===S||"threshold"===S;case "exponent":return"pow"===S;case "base":return"log"===S;case "constant":return"symlog"===S;case "zero":return S in Ef&&!fa(["log","time","utc","threshold","quantile"],S)}}function ei(S,Da){switch(Da){case "interpolate":case "scheme":case "domainMid":if(!Ic(S))return'Cannot use the scale property "'.concat(S,
'" with non-color channel.')}}function Yh(S,Da){if(!gi[S])return!1;switch(S){case "x":case "y":case "theta":case "radius":return Da in Hd||fa(["band","point"],Da);case "size":case "strokeWidth":case "opacity":case "fillOpacity":case "strokeOpacity":case "angle":return Da in Hd||Da in ze||fa(["band","point","ordinal"],Da);case "color":case "fill":case "stroke":return"band"!==Da;case "strokeDash":return"ordinal"===Da||Da in ze;case "shape":return"ordinal"===Da}}function wh(S){return S&&!!S.expr}function Wc(S){const Da=
jc(S||{}),F={};for(const qa of Da)F[qa]=Yf(S[qa]);return F}function ib(S){return fa(["line","area","trail"],S)}function Ua(S){return S.type}function v(S){const {channel:Da,channelDef:F,markDef:qa,scale:Fa,config:nb}=S;S=Hf(S);return Lf(F)&&!ec(F.aggregate)&&Fa&&Fa.get("type")in Hd&&!1===Fa.get("zero")?Xa({fieldDef:F,channel:Da,markDef:qa,ref:S,config:nb}):S}function Xa(S){var {fieldDef:Da,channel:F,markDef:qa,ref:Fa,config:nb}=S;if(ib(qa.type)||null===ag("invalid",qa,nb))return Fa;S=gc(Da,!0);const Db=
"y"===Wb(F)?{field:{group:"height"}}:{value:0};return[Object.assign({},{test:S},Db),Fa]}function gc(S,Da){Da=void 0===Da?!0:Da;return Pg(G(S)?S:qb(S,{expr:"datum"}),!Da)}function wd(S,Da,F,qa){const Fa={};Da&&(Fa.scale=Da);ih(S)?({datum:S}=S,Fe(S)?Fa.signal=rf(S):Zc(S)?Fa.signal=S.signal:wh(S)?Fa.signal=S.expr:Fa.value=S):Fa.field=qb(S,F);if(qa){const {offset:nb,band:Db}=qa;nb&&(Fa.offset=nb);Db&&(Fa.band=Db)}return Fa}function Ce(S){var {scaleName:Da,fieldOrDatumDef:F,fieldOrDatumDef2:qa,offset:Fa,
startSuffix:nb,band:Db=.5}=S,Nb=0<Db&&1>Db?"datum":void 0;S=qb(F,{expr:Nb,suffix:nb});const Gc=void 0!==qa?qb(qa,{expr:Nb}):qb(F,{suffix:"end",expr:Nb});Nb={};0===Db||1===Db?(Nb.scale=Da,Nb.field=0===Db?S:Gc):(S="".concat(Db," * ").concat(S," + ").concat(1-Db," * ").concat(Gc),Nb.signal='scale("'.concat(Da,'", ').concat(S,")"));Fa&&(Nb.offset=Fa);return Nb}function Hf(S){var {channel:Da,channelDef:F,channel2Def:qa,markDef:Fa,config:nb,scaleName:Db,scale:Nb,stack:Gc,offset:Xc,defaultRef:Ad,band:Fd}=
S;if(F){if(lb(F)){var le,We;if(Eb(F)){var Le;Fd=null!==(Le=Fd)&&void 0!==Le?Le:Rf({channel:Da,fieldDef:F,fieldDef2:qa,markDef:Fa,stack:Gc,config:nb,isMidPoint:!0});const {bin:pf,timeUnit:kg,type:Ig}=F;if(nc(pf)||Fd&&kg&&"temporal"===Ig)return Gc&&Gc.impute?wd(F,Db,{binSuffix:"mid"},{offset:Xc}):Fd?Ce({scaleName:Db,fieldOrDatumDef:F,band:Fd,offset:Xc}):wd(F,Db,Xe(F,Da)?{binSuffix:"range"}:{},{offset:Xc});if(rc(pf)){if(Lf(qa))return Ce({scaleName:Db,fieldOrDatumDef:F,fieldOrDatumDef2:qa,band:Fd,offset:Xc});
Wd(re("x"===Da?"x2":"y2"))}}S=null===Nb||void 0===Nb?void 0:Nb.get("type");return wd(F,Db,S in jg?{binSuffix:"range"}:{},{offset:Xc,band:"band"===S?null!==(le=null!==(We=Fd)&&void 0!==We?We:F.band)&&void 0!==le?le:.5:void 0})}if(Vb(F))return le=Xc?{offset:Xc}:{},Object.assign({},zg(Da,F.value),le)}"function"===typeof Ad&&(Ad=Ad());return Ad?Object.assign({},Ad,Xc?{offset:Xc}:{}):Ad}function zg(S,Da){return fa(["x","x2"],S)&&"width"===Da?{field:{group:"width"}}:fa(["y","y2"],S)&&"height"===Da?{field:{group:"height"}}:
vf(Da)}function $g(S){return S&&"number"!==S&&"time"!==S}function lg(S,Da,F){return"".concat(S,"(").concat(Da).concat(F?", ".concat(JSON.stringify(F)):"",")")}function Ag(S){var {fieldOrDatumDef:Da,format:F,formatType:qa,expr:Fa,normalizeStack:nb,config:Db}=S;if($g(qa))return id({fieldOrDatumDef:Da,format:F,formatType:qa,expr:Fa,config:Db});S=Ug(Da,Fa,nb);if(Xd(Da)){var Nb,Gc;var Xc=Lf(Da)?null===(Nb=lc(Da.timeUnit))||void 0===Nb?void 0:Nb.unit:void 0,Ad=F,Fd=Db.timeFormat;Nb=qc(Da)&&(null===(Gc=
Da.scale)||void 0===Gc?void 0:Gc.type)===jb.UTC;!Xc||Ad?(Ad=G(Ad)?Ad:Fd,S="".concat(Nb?"utc":"time","Format(").concat(S,", '").concat(Ad,"')")):Xc?(Gc=Jb(Xc),Xc=Nb||Xc.startsWith("utc"),S="".concat(Xc?"utc":"time","Format(").concat(S,", ").concat(Gc,")")):S=void 0;return S?{signal:S}:void 0}F=dg(bi(Da),F,Db);return Lf(Da)&&nc(Da.bin)?(Gc=qb(Da,{expr:Fa,binSuffix:"end"}),{signal:wg(S,Gc,F,qa,Db)}):F||"quantitative"===bi(Da)?{signal:"".concat(Sf(S,F))}:{signal:"isValid(".concat(S,") ? ").concat(S,' : ""+').concat(S)}}
function Ug(S,Da,F){if(Lf(S))return F?"".concat(qb(S,{expr:Da,suffix:"end"}),"-").concat(qb(S,{expr:Da,suffix:"start"})):qb(S,{expr:Da});({datum:S}=S);S=Fe(S)?rf(S):"".concat(JSON.stringify(S));return S}function id(S){var {fieldOrDatumDef:Da,format:F,formatType:qa,expr:Fa,normalizeStack:nb,config:Db,field:Nb}=S,Gc;Nb=null!==(Gc=Nb)&&void 0!==Gc?Gc:Ug(Da,Fa,nb);return Lf(Da)&&nc(Da.bin)?(S=qb(Da,{expr:Fa,binSuffix:"end"}),{signal:wg(Nb,S,F,qa,Db)}):{signal:lg(qa,Nb,F)}}function Bd(S,Da,F,qa,Fa,nb){if(!$g(qa)){if(Xd(S)){var Db;
S=Lf(S)?null===(Db=lc(S.timeUnit))||void 0===Db?void 0:Db.unit:void 0;F=F?F:S?{signal:Jb(S)}:nb?void 0:Fa.timeFormat;return F}return dg(Da,F,Fa)}}function xe(S,Da,F){if(S&&(Zc(S)||"number"===S||"time"===S))return S;if(Xd(Da)&&"time"!==F&&"utc"!==F)return"time"}function dg(S,Da,F){if(G(Da))return Da;if("quantitative"===S)return F.numberFormat}function Sf(S,Da){return"format(".concat(S,', "').concat(Da||"",'")')}function Kf(S,Da,F,qa){var Fa;return $g(F)?lg(F,S,Da):Sf(S,null!==(Fa=G(Da)?Da:void 0)&&
void 0!==Fa?Fa:qa.numberFormat)}function wg(S,Da,F,qa,Fa){const nb=Kf(S,F,qa,Fa);Da=Kf(Da,F,qa,Fa);return"".concat(Pg(S,!1),' ? "null" : ').concat(nb,' + "').concat(" – ",'" + ').concat(Da)}function xg(S){return!!S&&("count"===S.op||!!S.field)}function dh(S){return!!S&&Jh(S)}function cg(S){return"row"in S||"column"in S}function $f(S){const {field:Da,timeUnit:F,bin:qa,aggregate:Fa}=S;return Object.assign({},F?{timeUnit:F}:{},qa?{bin:qa}:{},Fa?{aggregate:Fa}:{},{field:Da})}function Rf(S){var {channel:Da,
fieldDef:F,fieldDef2:qa,markDef:Fa,stack:nb,config:Db,isMidPoint:Nb}=S;if(lb(F)&&void 0!==F.band)return F.band;if(Lf(F)){const {timeUnit:Gc,bin:Xc}=F;if(Gc&&!qa)return Nb?ph("timeUnitBandPosition",Fa,Db):fa(["rect","bar","image","arc"],Fa.type)?ph("timeUnitBand",Fa,Db):0;if(nc(Xc))return fa(["rect","bar","image","arc"],Fa.type)&&!Nb?1:.5}if((null===nb||void 0===nb?void 0:nb.fieldChannel)===Da&&Nb)return.5}function Gh(S,Da,F,qa,Fa,nb){return nc(Da.bin)||Da.timeUnit&&Eb(Da)&&"temporal"===Da.type?!!Rf({channel:S,
fieldDef:Da,fieldDef2:F,stack:qa,markDef:Fa,config:nb}):!1}function li(S){S=S&&S.condition;return!!S&&!Jh(S)&&Lf(S)}function gh(S){S=S&&S.condition;return!!S&&!Jh(S)&&lb(S)}function Lf(S){return!!S&&(!!S.field||"count"===S.aggregate)}function bi(S){return S&&S.type}function ih(S){return!!S&&"datum"in S}function ia(S){return Eb(S)&&!Qb(S)||Sa(S)}function Sa(S){return ih(S)&&z(S.datum)}function lb(S){return Lf(S)||ih(S)}function Eb(S){return!!S&&("field"in S||"count"===S.aggregate)&&"type"in S}function Vb(S){return S&&
"value"in S&&"value"in S}function qc(S){return!!S&&("scale"in S||"sort"in S)}function Za(S){return S&&("axis"in S||"stack"in S||"impute"in S)}function wb(S){return!!S&&("format"in S||"formatType"in S)}function eb(S){return K(S,["legend","axis","header","scale"])}function qb(S,Da){Da=void 0===Da?{}:Da;let F=S.field;const qa=Da.prefix;let Fa=Da.suffix,nb="";if("count"===S.aggregate)F=Aa("count");else{let Xc;if(!Da.nofn)if("op"in S)Xc=S.op;else{const {bin:Ad,aggregate:Fd,timeUnit:le}=S;if(nc(Ad)){var Db,
Nb;Xc=Pb(Ad);Fa=(null!==(Db=Da.binSuffix)&&void 0!==Db?Db:"")+(null!==(Nb=Da.suffix)&&void 0!==Nb?Nb:"")}else if(Fd)Bb(Fd)?(nb='["'.concat(F,'"]'),F="argmax_".concat(Fd.argmax)):La(Fd)?(nb='["'.concat(F,'"]'),F="argmin_".concat(Fd.argmin)):Xc=String(Fd);else if(le){var Gc;Xc=Uc(le);Fa=(!fa(["range","mid"],Da.binSuffix)&&Da.binSuffix||"")+(null!==(Gc=Da.suffix)&&void 0!==Gc?Gc:"")}}Xc&&(F=F?"".concat(Xc,"_").concat(F):Xc)}Fa&&(F="".concat(F,"_").concat(Fa));qa&&(F="".concat(qa,"_").concat(F));return Da.forAs?
Va(F):Da.expr?db(F,Da.expr)+nb:pb(F)+nb}function Qb(S){switch(S.type){case "nominal":case "ordinal":case "geojson":return!0;case "quantitative":return Lf(S)&&!!S.bin;case "temporal":return!1}throw Error('Invalid field type "'.concat(S.type,'".'));}function zc(S,Da){const {field:F,bin:qa,timeUnit:Fa,aggregate:nb}=S;if("count"===nb)return Da.countTitle;if(nc(qa))return"".concat(F," (binned)");if(Fa){var Db;if(S=null===(Db=lc(Fa))||void 0===Db?void 0:Db.unit)return"".concat(F," (").concat(pg(S).join("-"),
")")}else if(nb)return Bb(nb)?"".concat(F," for max ").concat(nb.argmax):La(nb)?"".concat(F," for min ").concat(nb.argmin):"".concat(Ta(nb)," of ").concat(F);return F}function ad(S,Da,F){var {allowDisabling:qa,includeDefault:Fa=!0}=F,nb;F=null===(nb=Rd(S))||void 0===nb?void 0:nb.title;if(!Lf(S))return F;Da=Fa?Df(S,Da):void 0;if(qa)return Ha(F,S.title,Da);var Db;return null!==(Db=null!==F&&void 0!==F?F:S.title)&&void 0!==Db?Db:Da}function Rd(S){if(Za(S)&&S.axis)return S.axis;if(S&&"legend"in S&&S.legend)return S.legend;
if(S&&"header"in S&&S.header)return S.header}function Md(S){if(wb(S)){const {format:Fa,formatType:nb}=S;return{format:Fa,formatType:nb}}var Da;S=null!==(Da=Rd(S))&&void 0!==Da?Da:{};const {format:F,formatType:qa}=S;return{format:F,formatType:qa}}function nd(S,Da){var F;switch(Da){case "latitude":case "longitude":return"quantitative";case "row":case "column":case "facet":case "shape":case "strokeDash":return"nominal";case "order":return"ordinal"}if("sort"in S&&Jh(S.sort))return"ordinal";const {aggregate:qa,
bin:Fa,timeUnit:nb}=S;if(nb)return"temporal";if(Fa||qa&&!Bb(qa)&&!La(qa))return"quantitative";if(qc(S)&&(null===(F=S.scale)||void 0===F?0:F.type))switch(Lb[S.scale.type]){case "numeric":case "discretizing":return"quantitative";case "time":return"temporal"}return"nominal"}function ee(S){if(Lf(S))return S;if(li(S))return S.condition}function Pd(S){if(lb(S))return S;if(gh(S))return S.condition}function se(S,Da,F,qa){qa=void 0===qa?{}:qa;return G(S)||z(S)||P(S)?(F=G(S)?"string":z(S)?"number":"boolean",
Da="Channel ".concat(Da," is a ").concat(F,". Converted to {value: ").concat(fc(S),"}."),Wd(Da),{value:S}):lb(S)?ye(S,Da,F,qa):gh(S)?Object.assign({},S,{condition:ye(S.condition,Da,F,qa)}):S}function ye(S,Da,F,qa){if(wb(S)){var Fa=Object.assign({},S),nb=S.formatType;Fa=(delete Fa.format,delete Fa.formatType,Fa);if($g(nb)&&!F.customFormatTypes)return Wd(cc(Da)),ye(Fa,Da,F,qa)}else if((nb=Za(S)?"axis":S&&"legend"in S?"legend":S&&"header"in S?"header":null)&&S[nb]){var Db=S[nb];Fa=Object.assign({},Db);
Db=Db.formatType;Fa=(delete Fa.format,delete Fa.formatType,Fa);if($g(Db)&&!F.customFormatTypes)return Wd(cc(Da)),ye(Object.assign({},S,{[nb]:Fa}),Da,F,qa)}if(Lf(S))return Oe(S,Da,qa);Da=S.type;Da||({datum:Da}=S,Da=z(Da)?"quantitative":G(Da)?"nominal":Fe(Da)?"temporal":void 0,S=Object.assign({},S,{type:Da}));return S}function Oe(S,Da,F){({compositeMark:F=!1}=void 0===F?{}:F);const {aggregate:qa,timeUnit:Fa,bin:nb,field:Db}=S;S=Object.assign({},S);F||!qa||Ob(qa)||Bb(qa)||La(qa)||(Wd('Invalid aggregation operator "'.concat(qa,
'".')),delete S.aggregate);Fa&&(S.timeUnit=lc(Fa));Db&&(S.field="".concat(Db));nc(nb)&&(S.bin=Se(nb,Da));!rc(nb)||Da in df||Wd("Channel ".concat(Da,' should not be used with "binned" bin.'));if(Eb(S)){({type:F}=S);var Nb=eh(F);F!==Nb&&(S.type=Nb);"quantitative"!==F&&ec(qa)&&(F='Invalid field type "'.concat(F,'" for aggregate: "').concat(qa,'", using "quantitative" instead.'),Wd(F),S.type="quantitative")}else Xb(Da)||(F=nd(S,Da),S.type=F);if(Eb(S)){const {compatible:Gc,warning:Xc}=Pe(S,Da)||{};!1===
Gc&&Wd(Xc)}if("sort"in S&&G(S.sort)){({sort:Da}=S);if(Da in ie)return Object.assign({},S,{sort:{encoding:Da}});F=Da.substr(1);if("-"===Da.charAt(0)&&F in ie)return Object.assign({},S,{sort:{encoding:F,order:"descending"}})}return S&&"header"in S&&({header:Da}=S,Nb=Da,F=Object.assign({},Nb),Nb=Nb.orient,F=(delete F.orient,F),Nb)?Object.assign({},S,{header:Object.assign({},F,{labelOrient:Da.labelOrient||Nb,titleOrient:Da.titleOrient||Nb})}):S}function Se(S,Da){return P(S)?{maxbins:Jc(Da)}:"binned"===
S?{binned:!0}:S.maxbins||S.step?S:Object.assign({},S,{maxbins:Jc(Da)})}function Pe(S,Da){const F=S.type;if("geojson"===F&&"shape"!==Da)return{compatible:!1,warning:"Channel ".concat(Da," should not be used with a geojson data.")};switch(Da){case "row":case "column":case "facet":return Qb(S)?hh:{compatible:!1,warning:"".concat(Da," encoding should be discrete (ordinal / nominal / binned).")};case "x":case "y":case "color":case "fill":case "stroke":case "text":case "detail":case "key":case "tooltip":case "href":case "url":case "angle":case "theta":case "radius":case "description":return hh;
case "longitude":case "longitude2":case "latitude":case "latitude2":return"quantitative"!==F?{compatible:!1,warning:"Channel ".concat(Da," should be used with a quantitative field only, not ").concat(S.type," field.")}:hh;case "opacity":case "fillOpacity":case "strokeOpacity":case "strokeWidth":case "size":case "theta2":case "radius2":case "x2":case "y2":return"nominal"!==F||S.sort?hh:{compatible:!1,warning:"Channel ".concat(Da," should not be used with an unsorted discrete field.")};case "strokeDash":return fa(["ordinal",
"nominal"],S.type)?hh:{compatible:!1,warning:"StrokeDash channel should be used with only discrete data."};case "shape":return fa(["ordinal","nominal","geojson"],S.type)?hh:{compatible:!1,warning:"Shape channel should be used with only either discrete or geojson data."};case "order":return"nominal"!==S.type||"sort"in S?hh:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}}function Xd(S){var {formatType:Da}=Md(S),F;if(!(F="time"===Da)){if(Da=!Da)Da=
S&&("temporal"===S.type||Lf(S)&&!!S.timeUnit);F=Da}return F}function Ze(S,Da){var {timeUnit:F,type:qa,wrapTime:Fa,undefinedIfExprNotRequired:nb}=Da;var Db=(Da=F&&(null===(Db=lc(F))||void 0===Db?void 0:Db.unit))||"temporal"===qa;let Nb;wh(S)?Nb=S.expr:Zc(S)?Nb=S.signal:Fe(S)?(Db=!0,Nb=rf(S)):(G(S)||z(S))&&Db&&(Nb="datetime(".concat(JSON.stringify(S),")"),hj[Da]&&(z(S)&&1E4>S||G(S)&&isNaN(Date.parse(S)))&&(Nb=rf({[Da]:S})));return Nb?Fa&&Db?"time(".concat(Nb,")"):Nb:nb?void 0:JSON.stringify(S)}function Tf(S,
Da){const {type:F}=S;return Da.map(qa=>{const Fa=Ze(qa,{timeUnit:Lf(S)?S.timeUnit:void 0,type:F,undefinedIfExprNotRequired:!0});return void 0!==Fa?{signal:Fa}:qa})}function Xe(S,Da){return nc(S.bin)?!!gi[Da]&&fa(["ordinal","nominal"],S.type):(console.warn("Only call this method for binned field defs."),!1)}function Uf(S){var Da=Object.assign({},S),F=S.anchor;const qa=S.frame,Fa=S.offset,nb=S.orient;var Db=S.color,Nb=S.subtitleColor,Gc=S.subtitleFont;const Xc=S.subtitleFontSize,Ad=S.subtitleFontStyle,
Fd=S.subtitleFontWeight,le=S.subtitleLineHeight;S=S.subtitlePadding;Da=(delete Da.anchor,delete Da.frame,delete Da.offset,delete Da.orient,delete Da.color,delete Da.subtitleColor,delete Da.subtitleFont,delete Da.subtitleFontSize,delete Da.subtitleFontStyle,delete Da.subtitleFontWeight,delete Da.subtitleLineHeight,delete Da.subtitlePadding,Da);Db=Object.assign({},Da,Db?{fill:Db}:{});F=Object.assign({},F?{anchor:F}:{},qa?{frame:qa}:{},Fa?{offset:Fa}:{},nb?{orient:nb}:{});Nb=Object.assign({},Nb?{subtitleColor:Nb}:
{},Gc?{subtitleFont:Gc}:{},Xc?{subtitleFontSize:Xc}:{},Ad?{subtitleFontStyle:Ad}:{},Fd?{subtitleFontWeight:Fd}:{},le?{subtitleLineHeight:le}:{},S?{subtitlePadding:S}:{});Gc=J(Db,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:Db,subtitleMarkConfig:Gc,nonMark:F,subtitle:Nb}}function Ue(S){return G(S)||Jh(S)&&G(S[0])}function uf(S){const Da=Jh(S.condition)?S.condition.map(yf):yf(S.condition);return Object.assign({},Yf(S),{condition:Da})}function Yf(S){if(wh(S)){var Da=Object.assign({},
S);S=S.expr;Da=(delete Da.expr,Da);return Object.assign({},{signal:S},Da)}return S}function yf(S){if(wh(S)){var Da=Object.assign({},S);S=S.expr;Da=(delete Da.expr,Da);return Object.assign({},{signal:S},Da)}return S}function vf(S){if(wh(S)){var Da=Object.assign({},S);S=S.expr;Da=(delete Da.expr,Da);return Object.assign({},{signal:S},Da)}return Zc(S)?S:void 0!==S?{value:S}:void 0}function ne(S){return Zc(S)?S.signal:Y(S.value)}function wf(S){return Zc(S)?S.signal:null==S?null:Y(S)}function Hh(S){var Da;
return[].concat(S.type,null!==(Da=S.style)&&void 0!==Da?Da:[])}function ag(S,Da,F,qa){qa=void 0===qa?{}:qa;const {vgChannel:Fa,ignoreVgConfig:nb}=qa;if(Fa&&void 0!==Da[Fa])return Da[Fa];if(void 0!==Da[S])return Da[S];if(!nb||Fa&&Fa!==S)return ph(S,Da,F,qa)}function ph(S,Da,F,qa){({vgChannel:qa}=void 0===qa?{}:qa);return Ha(qa?mh(S,Da,F.style):void 0,mh(S,Da,F.style),qa?F[Da.type][qa]:void 0,F[Da.type][S],qa?F.mark[qa]:F.mark[S])}function mh(S,Da,F){return of(S,Hh(Da),F)}function of(S,Da,F){Da=V(Da);
let qa;for(const Fa of Da)(Da=F[Fa])&&void 0!==Da[S]&&(qa=Da[S]);return qa}function qh(S,Da){return V(S).reduce((F,qa)=>{var Fa;F.field.push(qb(qa,Da));F.order.push(null!==(Fa=qa.sort)&&void 0!==Fa?Fa:"ascending");return F},{field:[],order:[]})}function Ii(S,Da){const F=[...S];Da.forEach(qa=>{for(const Fa of F)if(Hk(Fa,qa))return;F.push(qa)});return F}function Fi(S,Da){return Hk(S,Da)||!Da?S:S?[...V(S),...V(Da)].join(", "):Da}function Nh(S,Da){const F=S.value;Da=Da.value;if(null==F||null===Da)return{explicit:S.explicit,
value:null};if((Ue(F)||Zc(F))&&(Ue(Da)||Zc(Da)))return{explicit:S.explicit,value:Fi(F,Da)};if(Ue(F)||Zc(F))return{explicit:S.explicit,value:F};if(Ue(Da)||Zc(Da))return{explicit:S.explicit,value:Da};if(!(Ue(F)||Zc(F)||Ue(Da)||Zc(Da)))return{explicit:S.explicit,value:Ii(F,Da)};throw Error("It should never reach here");}function jh(S){return"mark"in S}function Kg(S,Da){return(S=S&&S[Da])?Jh(S)?wa(S,F=>!!F.field):Lf(S)||li(S):!1}function Cf(S){return wa(de,Da=>Kg(S,Da)?(Da=S[Da],Jh(Da)?wa(Da,F=>!!F.aggregate):
(Da=ee(Da))&&!!Da.aggregate):!1)}function nh(S,Da){const F=[],qa=[],Fa=[],nb=[],Db={};ug(S,(Nb,Gc)=>{if(Lf(Nb)){var Xc=Object.assign({},Nb),Ad=Nb.field;const le=Nb.aggregate,We=Nb.bin,Le=Nb.timeUnit;Xc=(delete Xc.field,delete Xc.aggregate,delete Xc.bin,delete Xc.timeUnit,Xc);if(le||Le||We){var Fd=Rd(Nb);const pf=Fd&&Fd.title;Fd=qb(Nb,{forAs:!0});Xc=Object.assign({},pf?[]:{title:ad(Nb,Da,{allowDisabling:!0})},Xc,{field:Fd});if(le){let kg;Bb(le)?(kg="argmax",Fd=qb({op:"argmax",field:le.argmax},{forAs:!0}),
Xc.field="".concat(Fd,".").concat(Ad)):La(le)?(kg="argmin",Fd=qb({op:"argmin",field:le.argmin},{forAs:!0}),Xc.field="".concat(Fd,".").concat(Ad)):"boxplot"!==le&&"errorbar"!==le&&"errorband"!==le&&(kg=le);kg&&(Nb={op:kg,as:Fd},Ad&&(Nb.field=Ad),nb.push(Nb))}else F.push(Fd),Eb(Nb)&&nc(We)?(qa.push({bin:We,field:Ad,as:Fd}),F.push(qb(Nb,{binSuffix:"end"})),Xe(Nb,Gc)&&F.push(qb(Nb,{binSuffix:"range"})),Gc in df&&(Db[Gc+"2"]={field:Fd+"_end"}),Xc.bin="binned",Xb(Gc)||(Xc.type="quantitative")):Le&&(Fa.push({timeUnit:Le,
field:Ad,as:Fd}),(Ad=Eb(Nb)&&"temporal"!==Nb.type&&"time")&&("text"===Gc||"tooltip"===Gc?Xc.formatType=Ad:Qe[Gc]?Xc.legend=Object.assign({},{formatType:Ad},Xc.legend):Gc in df&&(Xc.axis=Object.assign({},{formatType:Ad},Xc.axis))));Db[Gc]=Xc}else F.push(Ad),Db[Gc]=S[Gc]}else Db[Gc]=S[Gc]});return{bins:qa,timeUnits:Fa,aggregate:nb,groupby:F,encoding:Db}}function Ui(S,Da,F){F=Cc(Da)[F];return F&&("binned"!==F||(F=S["x2"===Da?"x":"y"],Lf(F)&&Lf(S[Da])&&rc(F.bin)))?!0:!1}function Gi(S,Da,F,qa){return jc(S).reduce((Fa,
nb)=>{if(!td[nb])return Wd(cd(nb)),Fa;const Db=S[nb];"angle"!==nb||"arc"!==Da||S.theta||(Wd("Arc marks uses theta channel rather than angle, replacing angle with theta."),nb="theta");if(!Ui(S,nb,Da))return Wd(Ec(nb,Da)),Fa;if("size"===nb&&"line"===Da){const Nb=ee(S[nb]);if(null===Nb||void 0===Nb?0:Nb.aggregate)return Wd("Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead."),Fa}if("color"===nb&&(F?"fill"in S:"stroke"in S))return Wd(tb("encoding",{fill:"fill"in
S,stroke:"stroke"in S})),Fa;if("detail"===nb||"order"===nb&&!Jh(Db)&&!Vb(Db)||"tooltip"===nb&&Jh(Db))Db&&(Fa[nb]=V(Db).reduce((Nb,Gc)=>{Lf(Gc)?Nb.push(Oe(Gc,nb)):Wd(tc(Gc,nb));return Nb},[]));else{if("tooltip"===nb&&null===Db)Fa[nb]=null;else if(!(Lf(Db)||ih(Db)||Vb(Db)||Db&&"condition"in Db||Zc(Db)))return Wd(tc(Db,nb)),Fa;Fa[nb]=se(Db,nb,qa)}return Fa},{})}function oh(S,Da){const F={};for(const qa of jc(S)){const Fa=se(S[qa],qa,Da,{compositeMark:!0});F[qa]=Fa}return F}function $d(S){const Da=[];
for(const F of jc(S))if(Kg(S,F)){const qa=V(S[F]);for(const Fa of qa)Lf(Fa)?Da.push(Fa):li(Fa)&&Da.push(Fa.condition)}return Da}function ug(S,Da,F){if(S)for(const qa of jc(S)){const Fa=S[qa];if(Jh(Fa))for(const nb of Fa)Da.call(F,nb,qa);else Da.call(F,Fa,qa)}}function nj(S,Da,F,qa){return S?jc(S).reduce((Fa,nb)=>{const Db=S[nb];return Jh(Db)?Db.reduce((Nb,Gc)=>Da.call(qa,Nb,Gc,nb),Fa):Da.call(qa,Fa,Db,nb)},F):F}function eg(S,Da){return jc(Da).reduce((F,qa)=>{switch(qa){case "x":case "y":case "href":case "description":case "url":case "x2":case "y2":case "theta":case "theta2":case "radius":case "radius2":case "latitude":case "longitude":case "latitude2":case "longitude2":case "text":case "shape":case "angle":case "tooltip":return F;
case "order":if("line"===S||"trail"===S)return F;case "detail":case "key":qa=Da[qa];if(Jh(qa)||Lf(qa))for(var Fa of V(qa))Fa.aggregate||F.push(qb(Fa,{}));return F;case "size":if("trail"===S)return F;case "color":case "fill":case "stroke":case "opacity":case "fillOpacity":case "strokeOpacity":case "strokeDash":case "strokeWidth":return(Fa=ee(Da[qa]))&&!Fa.aggregate&&F.push(qb(Fa,{})),F}},[])}function Zd(S,Da,F,qa){qa=void 0===qa?!0:qa;if("tooltip"in F)return{tooltip:F.tooltip};S=S.map(Fa=>{var {fieldPrefix:nb,
titlePrefix:Db}=Fa;Fa=qa?" of ".concat(ve(Da)):"";return{field:nb+Da.field,type:Da.type,title:Zc(Db)?{signal:Db+'"'.concat(escape(Fa),'"')}:Db+Fa}});F=$d(F).map(eb);return{tooltip:[...S,...ha(F,ba)]}}function ve(S){const {title:Da,field:F}=S;return Ha(Da,F)}function Sb(S,Da,F,qa,Fa){const {scale:nb,axis:Db}=F;return Nb=>{var {partName:Gc,mark:Xc,positionPrefix:Ad,endPositionPrefix:Fd,extraEncoding:le={}}=Nb;Nb=ve(F);return Qc(S,Gc,Fa,{mark:Xc,encoding:Object.assign({},{[Da]:Object.assign({},{field:Ad+
"_"+F.field,type:F.type},void 0!==Nb?{title:Nb}:{},void 0!==nb?{scale:nb}:{},void 0!==Db?{axis:Db}:{})},G(Fd)?{[Da+"2"]:{field:Fd+"_"+F.field}}:{},qa,le)})}}function Qc(S,Da,F,qa){const {clip:Fa,color:nb,opacity:Db}=S,Nb=S.type;return S[Da]||void 0===S[Da]&&F[Da]?[Object.assign({},qa,{mark:Object.assign({},F[Da],Fa?{clip:Fa}:{},nb?{color:nb}:{},Db?{opacity:Db}:{},Ua(qa.mark)?qa.mark:{type:qa.mark},{style:"".concat(Nb,"-").concat(Da)},P(S[Da])?{}:S[Da])})]:[]}function ud(S,Da,F){({encoding:S}=S);Da=
"vertical"===Da?"y":"x";const qa=S[Da+"2"],Fa=S[Da+"Error"],nb=S[Da+"Error2"];return{continuousAxisChannelDef:oe(S[Da],F),continuousAxisChannelDef2:oe(qa,F),continuousAxisChannelDefError:oe(Fa,F),continuousAxisChannelDefError2:oe(nb,F),continuousAxis:Da}}function oe(S,Da){if(S&&S.aggregate){var F=Object.assign({},S);S=S.aggregate;F=(delete F.aggregate,F);S!==Da&&(Da="Continuous axis should not have customized aggregation function ".concat(S,"; ").concat(Da," already agregates the axis."),Wd(Da));
return F}return S}function ue(S,Da){const {mark:F,encoding:qa}=S,{x:Fa,y:nb}=qa;if(Ua(F)&&F.orient)return F.orient;if(ia(Fa)){if(ia(nb)){S=Lf(Fa)&&Fa.aggregate;const Db=Lf(nb)&&nb.aggregate;if(!S&&Db===Da)return"vertical";if(Db||S!==Da){if(S===Da&&Db===Da)throw Error("Both x and y cannot have aggregate");return Xd(nb)&&!Xd(Fa)?"horizontal":"vertical"}}return"horizontal"}if(ia(nb))return"vertical";throw Error("Need a valid continuous axis for ".concat(Da,"s"));}function Of(S){return z(S)?"tukey":S}
function kf(S,Da){var {config:F}=Da,qa,Fa=S=Object.assign({},S,{encoding:oh(S.encoding,F)});Da=Object.assign({},Fa);var nb=Fa.mark;Fa=Fa.selection;Da=(delete Da.mark,delete Da.encoding,delete Da.selection,delete Da.projection,Da);nb=Ua(nb)?nb:{type:nb};Fa&&Wd(bc("boxplot"));Fa=null!==(qa=nb.extent)&&void 0!==qa?qa:F.boxplot.extent;var Db=ag("size",nb,F);qa=Of(Fa);var Nb=S;S=ue(Nb,"boxplot");const {continuousAxisChannelDef:Gc,continuousAxis:Xc}=ud(Nb,S,"boxplot");var Ad=Gc.field,Fd=Of(Fa),le=[...fg(Ad),
{op:"median",field:Ad,as:"mid_box_"+Ad},{op:"min",field:Ad,as:("min-max"===Fd?"lower_whisker_":"min_")+Ad},{op:"max",field:Ad,as:("min-max"===Fd?"upper_whisker_":"max_")+Ad}];Ad="min-max"===Fd||"tukey"===Fd?[]:[{calculate:'datum["upper_box_'.concat(Ad,'"] - datum["lower_box_').concat(Ad,'"]'),as:"iqr_"+Ad},{calculate:'min(datum["upper_box_'.concat(Ad,'"] + datum["iqr_').concat(Ad,'"] * ').concat(Fa,', datum["max_').concat(Ad,'"])'),as:"upper_whisker_"+Ad},{calculate:'max(datum["lower_box_'.concat(Ad,
'"] - datum["iqr_').concat(Ad,'"] * ').concat(Fa,', datum["min_').concat(Ad,'"])'),as:"lower_whisker_"+Ad}];Nb=Object.assign({},Nb.encoding);var We;Fd=(delete Nb[Xc],Nb);Nb=Object.assign({},Fd);Fd=Fd.tooltip;Nb=(delete Nb.tooltip,Nb);if(Fd){var Le;if(Jh(Fd)){for(var pf of Fd)pf.aggregate?(We||(We=[]),We.push(pf)):(Le||(Le=[]),Le.push(pf));We&&(Nb.tooltip=We)}else Fd.aggregate?Nb.tooltip=Fd:Le=Fd;Jh(Le)&&1===Le.length&&(Le=Le[0]);We={customTooltipWithoutAggregatedField:Le,filteredEncoding:Nb}}else We=
{filteredEncoding:Nb};const {customTooltipWithoutAggregatedField:kg,filteredEncoding:Ig}=We,{bins:Yg,timeUnits:pj,aggregate:yg,groupby:Jg,encoding:Fh}=nh(Ig,F);We=[...Yg,...pj,{aggregate:[...yg,...le],groupby:Jg},...Ad];const {bins:nk,timeUnits:Li,transform:Xi,continuousAxisChannelDef:ej,continuousAxis:bl,groupby:Hl,aggregate:xl,encodingWithoutContinuousAxis:ok,ticksOrient:un,boxOrient:Hq,customTooltipWithoutAggregatedField:Vm}={bins:Yg,timeUnits:pj,transform:We,groupby:Jg,aggregate:yg,continuousAxisChannelDef:Gc,
continuousAxis:Xc,encodingWithoutContinuousAxis:Fh,ticksOrient:"vertical"===S?"horizontal":"vertical",boxOrient:S,customTooltipWithoutAggregatedField:kg};Le=Object.assign({},ok);We=ok.color;le=ok.size;Le=(delete Le.color,delete Le.size,Le);pf=Sb(nb,bl,ej,Le,F.boxplot);S=Sb(nb,bl,ej,ok,F.boxplot);le=Sb(nb,bl,ej,Object.assign({},Le,le?{size:le}:{}),F.boxplot);Ad=Zd([{fieldPrefix:"min-max"===qa?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",
titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===qa?"lower_whisker_":"min_",titlePrefix:"Min"}],ej,ok);Nb={type:"tick",color:"black",opacity:1,orient:un,invalid:null,aria:!1};Fd="min-max"===qa?Ad:Zd([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],ej,ok);pf=[...pf({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:Fd}),
...pf({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:Fd}),...pf({partName:"ticks",mark:Nb,positionPrefix:"lower_whisker",extraEncoding:Fd}),...pf({partName:"ticks",mark:Nb,positionPrefix:"upper_whisker",extraEncoding:Fd})];Db=[...("tukey"!==qa?pf:[]),...S({partName:"box",mark:Object.assign({},{type:"bar"},Db?{size:Db}:{},{orient:Hq,invalid:null,ariaRoleDescription:"box"}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",
extraEncoding:Ad}),...le({partName:"median",mark:Object.assign({},{type:"tick",invalid:null},N(F.boxplot.median)&&F.boxplot.median.color?{color:F.boxplot.median.color}:{},Db?{size:Db}:{},{orient:un,aria:!1}),positionPrefix:"mid_box",extraEncoding:Ad})];if("min-max"===qa){var Qm;return Object.assign({},Da,{transform:(null!==(Qm=Da.transform)&&void 0!==Qm?Qm:[]).concat(Xi),layer:Db})}Qm='datum["lower_box_'.concat(ej.field,'"]');qa='datum["upper_box_'.concat(ej.field,'"]');S="(".concat(qa," - ").concat(Qm,
")");Qm="".concat(Qm," - ").concat(Fa," * ").concat(S);S="".concat(qa," + ").concat(Fa," * ").concat(S);le='datum["'.concat(ej.field,'"]');Fa={joinaggregate:fg(ej.field),groupby:Hl};qa={transform:[{filter:"(".concat(Qm," \x3c\x3d ").concat(le,") \x26\x26 (").concat(le," \x3c\x3d ").concat(S,")")},{aggregate:[{op:"min",field:ej.field,as:"lower_whisker_"+ej.field},{op:"max",field:ej.field,as:"upper_whisker_"+ej.field},{op:"min",field:"lower_box_"+ej.field,as:"lower_box_"+ej.field},{op:"max",field:"upper_box_"+
ej.field,as:"upper_box_"+ej.field},...xl],groupby:Hl}],layer:pf};Le=Object.assign({},Le);Le=(delete Le.tooltip,Le);const {scale:Ao,axis:Kr}=ej;pf=ve(ej);Ad=K(Kr,["title"]);F=Qc(nb,"outliers",F.boxplot,{transform:[{filter:"(".concat(le," \x3c ").concat(Qm,") || (").concat(le," \x3e ").concat(S,")")}],mark:"point",encoding:Object.assign({},{[bl]:Object.assign({},{field:ej.field,type:ej.type},void 0!==pf?{title:pf}:{},void 0!==Ao?{scale:Ao}:{},D(Ad)?{}:{axis:Ad})},Le,We?{color:We}:{},Vm?{tooltip:Vm}:
{})})[0];nb=[...nk,...Li,Fa];F?F={transform:nb,layer:[F,qa]}:(F=qa,F.transform.unshift(...nb));return Object.assign({},Da,{layer:[F,{transform:Xi,layer:Db}]})}function fg(S){return[{op:"q1",field:S,as:"lower_box_"+S},{op:"q3",field:S,as:"upper_box_"+S}]}function Zf(S,Da){({config:Da}=Da);S=Object.assign({},S,{encoding:oh(S.encoding,Da)});const {transform:F,continuousAxisChannelDef:qa,continuousAxis:Fa,encodingWithoutContinuousAxis:nb,ticksOrient:Db,markDef:Nb,outerSpec:Gc,tooltipEncoding:Xc}=lh(S,
"errorbar",Da);delete nb.size;S=Sb(Nb,Fa,qa,nb,Da.errorbar);Da=Nb.thickness;var Ad=Nb.size;Ad=Object.assign({},{type:"tick",orient:Db,aria:!1},void 0!==Da?{thickness:Da}:{},void 0!==Ad?{size:Ad}:{});S=[...S({partName:"ticks",mark:Ad,positionPrefix:"lower",extraEncoding:Xc}),...S({partName:"ticks",mark:Ad,positionPrefix:"upper",extraEncoding:Xc}),...S({partName:"rule",mark:Object.assign({},{type:"rule",ariaRoleDescription:"errorbar"},void 0!==Da?{size:Da}:{}),positionPrefix:"lower",endPositionPrefix:"upper",
extraEncoding:Xc})];return Object.assign({},Gc,{transform:F},1<S.length?{layer:S}:Object.assign({},S[0]))}function qg(S,Da){var {encoding:F}=S;if(!(!lb(F.x)&&!lb(F.y)||lb(F.x2)||lb(F.y2)||lb(F.xError)||lb(F.xError2)||lb(F.yError)||lb(F.yError2)))return{orient:ue(S,Da),inputType:"raw"};var qa=lb(F.x2)||lb(F.y2);var Fa=lb(F.xError)||lb(F.xError2)||lb(F.yError)||lb(F.yError2);S=F.x;const nb=F.y;if(qa){if(Fa)throw Error("".concat(Da," cannot be both type aggregated-upper-lower and aggregated-error"));
qa=F.x2;F=F.y2;if(lb(qa)&&lb(F))throw Error("".concat(Da," cannot have both x2 and y2"));if(lb(qa)){if(ia(S))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw Error("Both x and x2 have to be quantitative in ".concat(Da));}if(lb(F)){if(ia(nb))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw Error("Both y and y2 have to be quantitative in ".concat(Da));}}else{qa=F.xError;Fa=F.yError;const Db=F.yError2;if(lb(F.xError2)&&!lb(qa))throw Error("".concat(Da," cannot have xError2 without xError"));
if(lb(Db)&&!lb(Fa))throw Error("".concat(Da," cannot have yError2 without yError"));if(lb(qa)&&lb(Fa))throw Error("".concat(Da," cannot have both xError and yError with both are quantiative"));if(lb(qa)){if(ia(S))return{orient:"horizontal",inputType:"aggregated-error"};throw Error("All x, xError, and xError2 (if exist) have to be quantitative");}if(lb(Fa)){if(ia(nb))return{orient:"vertical",inputType:"aggregated-error"};throw Error("All y, yError, and yError2 (if exist) have to be quantitative");
}}throw Error("No ranged axis");}function lh(S,Da,F){var qa,Fa=Object.assign({},S),nb=S.mark,Db=S.encoding,Nb=S.selection;Fa=(delete Fa.mark,delete Fa.encoding,delete Fa.selection,delete Fa.projection,Fa);nb=Ua(nb)?nb:{type:nb};Nb&&Wd(bc(Da));const {orient:Gc,inputType:Xc}=qg(S,Da),{continuousAxisChannelDef:Ad,continuousAxisChannelDef2:Fd,continuousAxisChannelDefError:le,continuousAxisChannelDefError2:We,continuousAxis:Le}=ud(S,Gc,Da);Nb=[];S=[];var pf=Ad.field,kg=!1;if("raw"===Xc){var Ig=nb.center?
nb.center:nb.extent?"iqr"===nb.extent?"median":"mean":F.errorbar.center;var Yg=nb.extent?nb.extent:"mean"===Ig?"stderr":"iqr";"median"===Ig!==("iqr"===Yg)&&(Nb=Yg,Nb="".concat(Ig," is not usually used with ").concat(Nb," for ").concat(Da,"."),Wd(Nb));"stderr"===Yg||"stdev"===Yg?(Nb=[{op:Yg,field:pf,as:"extent_"+pf},{op:Ig,field:pf,as:"center_"+pf}],S=[{calculate:'datum["center_'.concat(pf,'"] + datum["extent_').concat(pf,'"]'),as:"upper_"+pf},{calculate:'datum["center_'.concat(pf,'"] - datum["extent_').concat(pf,
'"]'),as:"lower_"+pf}],pf={fieldPrefix:"center_",titlePrefix:Ta(Ig)},kg=Yg,kg={fieldPrefix:"upper_",titlePrefix:Ta(Ig)+" + "+kg},Da=Yg,Da=Ta(Ig)+" - "+Da,Ig=[pf,kg,{fieldPrefix:"lower_",titlePrefix:Da}],kg=!0):("ci"===Yg?(Da="mean",Ig="ci0",Yg="ci1"):(Da="median",Ig="q1",Yg="q3"),Nb=[{op:Ig,field:pf,as:"lower_"+pf},{op:Yg,field:pf,as:"upper_"+pf},{op:Da,field:pf,as:"center_"+pf}],Ig=[{fieldPrefix:"upper_",titlePrefix:ad({field:pf,aggregate:Yg,type:"quantitative"},F,{allowDisabling:!1})},{fieldPrefix:"lower_",
titlePrefix:ad({field:pf,aggregate:Ig,type:"quantitative"},F,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:ad({field:pf,aggregate:Da,type:"quantitative"},F,{allowDisabling:!1})}])}else{if(nb.center||nb.extent){Da=nb.center;var pj=nb.extent;Da="".concat(pj?"extent ":"").concat(pj&&Da?"and ":"").concat(Da?"center ":"").concat(pj&&Da?"are ":"is ","not needed when data are aggregated.");Wd(Da)}"aggregated-upper-lower"===Xc?(Ig=[],S=[{calculate:'datum["'.concat(Fd.field,'"]'),as:"upper_"+pf},
{calculate:'datum["'.concat(pf,'"]'),as:"lower_"+pf}]):"aggregated-error"===Xc&&(Ig=[{fieldPrefix:"",titlePrefix:pf}],S=[{calculate:'datum["'.concat(pf,'"] + datum["').concat(le.field,'"]'),as:"upper_"+pf}],We?S.push({calculate:'datum["'.concat(pf,'"] + datum["').concat(We.field,'"]'),as:"lower_"+pf}):S.push({calculate:'datum["'.concat(pf,'"] - datum["').concat(le.field,'"]'),as:"lower_"+pf}));for(Yg of S)Ig.push({fieldPrefix:Yg.as.substring(0,6),titlePrefix:Ya(Ya(Yg.calculate,'datum["',""),'"]',
"")})}const {errorBarSpecificAggregate:yg,postAggregateCalculates:Jg,tooltipSummary:Fh,tooltipTitleWithFieldName:nk}={postAggregateCalculates:S,errorBarSpecificAggregate:Nb,tooltipSummary:Ig,tooltipTitleWithFieldName:kg};Db=Object.assign({},Db);S="x"===Le?"x2":"y2";Nb="x"===Le?"xError":"yError";pf="x"===Le?"xError2":"yError2";Db=(delete Db[Le],delete Db[S],delete Db[Nb],delete Db[pf],Db);const {bins:Li,timeUnits:Xi,aggregate:ej,groupby:bl,encoding:Hl}=nh(Db,F);F=[...ej,...yg];Db="raw"!==Xc?[]:bl;
S=Zd(Fh,Ad,Hl,nk);return{transform:[...(null!==(qa=Fa.transform)&&void 0!==qa?qa:[]),...Li,...Xi,...(0===F.length?[]:[{aggregate:F,groupby:Db}]),...Jg],groupby:Db,continuousAxisChannelDef:Ad,continuousAxis:Le,encodingWithoutContinuousAxis:Hl,ticksOrient:"vertical"===Gc?"horizontal":"vertical",markDef:nb,outerSpec:Fa,tooltipEncoding:S}}function pi(S,Da){({config:Da}=Da);S=Object.assign({},S,{encoding:oh(S.encoding,Da)});const {transform:F,continuousAxisChannelDef:qa,continuousAxis:Fa,encodingWithoutContinuousAxis:nb,
markDef:Db,outerSpec:Nb,tooltipEncoding:Gc}=lh(S,"errorband",Da);Da=Sb(Db,Fa,qa,nb,Da.errorband);S=void 0!==S.encoding.x&&void 0!==S.encoding.y;let Xc={type:S?"area":"rect"},Ad={type:S?"line":"rule"};const Fd=Object.assign({},Db.interpolate?{interpolate:Db.interpolate}:{},Db.tension&&Db.interpolate?{tension:Db.tension}:{});S?(Xc=Object.assign({},Xc,Fd,{ariaRoleDescription:"errorband"}),Ad=Object.assign({},Ad,Fd,{aria:!1})):Db.interpolate?Wd(Vd("interpolate")):Db.tension&&Wd(Vd("tension"));return Object.assign({},
Nb,{transform:F,layer:[...Da({partName:"band",mark:Xc,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:Gc}),...Da({partName:"borders",mark:Ad,positionPrefix:"lower",extraEncoding:Gc}),...Da({partName:"borders",mark:Ad,positionPrefix:"upper",extraEncoding:Gc})]})}function bj(S,Da,F){Da=new aj(S,Da);Qi[S]={normalizer:Da,parts:F}}function Sh(S){const Da=[];for(const Fa of S||[]){var F=Fa,qa=Object.assign({},F);S=F.expr;F=F.bind;qa=(delete qa.expr,delete qa.bind,qa);F&&S?(S=Object.assign({},
qa,{bind:F,init:S}),Da.push(S)):(S=Object.assign({},qa,S?{update:S}:{},F?{bind:F}:{}),Da.push(S))}return Da}function Eh(S){return!!S&&("legend"===S||!!S.legend)}function cj(S){return Eh(S)&&N(S)}function ji(S,Da){const F={};for(const qa of vj)S&&void 0!==S[qa]&&(F[qa]=Yf(S[qa]));Da&&(F.params=S.params);return F}function ng(S){return N(S)&&void 0!==S.step}function kh(S){return S.view||S.width||S.height}function T(S,Da,F){const qa={},{spacing:Fa,columns:nb}=F[Da];void 0!==Fa&&(qa.spacing=Fa);void 0!==
nb&&("facet"in S&&!cg(S.facet)||"concat"in S)&&(qa.columns=nb);"vconcat"in S&&(qa.columns=1);for(const Gc of Yj)if(void 0!==S[Gc])if("spacing"===Gc){var Db,Nb;Da=S[Gc];qa[Gc]=z(Da)?Da:{row:null!==(Db=Da.row)&&void 0!==Db?Db:Fa,column:null!==(Nb=Da.column)&&void 0!==Nb?Nb:Fa}}else qa[Gc]=S[Gc];return qa}function Oa(S,Da){var F;return null!==(F=S[Da])&&void 0!==F?F:S["width"===Da?"continuousWidth":"continuousHeight"]}function zb(S,Da){S=Ac(S,Da);return ng(S)?S.step:20}function Ac(S,Da){var F;const qa=
null!==(F=S[Da])&&void 0!==F?F:S["width"===Da?"discreteWidth":"discreteHeight"];return Ha(qa,{step:S.step})}function jd(S){var Da=jc(S||{});const F={};for(const qa of Da)Da=S[qa],F[qa]=fb(Da)?uf(Da):Yf(Da);return F}function je(S){S=void 0===S?{}:S;var Da=Object.assign({},S),F=S.color,qa=S.font;S=S.fontSize;Da=(delete Da.color,delete Da.font,delete Da.fontSize,Da);qa=qa?{text:{font:qa},style:{"guide-label":{font:qa},"guide-title":{font:qa},"group-title":{font:qa},"group-subtitle":{font:qa}}}:{};F?
(F=void 0===F?{}:F,F={signals:[{name:"color",value:N(F)?Object.assign({},tp,F):tp}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},
range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}):F={};S=S?{signals:[{name:"fontSize",value:N(S)?Object.assign({},Yn,S):Yn}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},
"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}:{};S=da({},yj,qa,F,S,Da||{});Da=K(S,qq);for(var Fa of["background","lineBreak","padding"])S[Fa]&&(Da[Fa]=Yf(S[Fa]));for(var nb of vd)S[nb]&&(Da[nb]=Wc(S[nb]));for(var Db of Na)S[Db]&&(Da[Db]=jd(S[Db]));for(const Nb of qj)S[Nb]&&(Da[Nb]=Wc(S[Nb]));S.legend&&(Da.legend=Wc(S.legend));S.scale&&(Da.scale=Wc(S.scale));if(S.style){Fa=S.style;nb=jc(Fa);Db={};for(const Nb of nb)Db[Nb]=jd(Fa[Nb]);Da.style=Db}S.title&&(Da.title=Wc(S.title));S.view&&
(Da.view=Wc(S.view));return Da}function Ne(S){S=vb(S);for(var Da of yr)delete S[Da];if(S.axis)for(var F in S.axis)fb(S.axis[F])&&delete S.axis[F];if(S.legend)for(var qa of cf)delete S.legend[qa];if(S.mark){for(var Fa of Lc)delete S.mark[Fa];S.mark.tooltip&&N(S.mark.tooltip)&&delete S.mark.tooltip}S.params&&(S.signals=(S.signals||[]).concat(Sh(S.params)),delete S.params);for(var nb of up){for(const Fd of Lc)delete S[nb][Fd];if(Da=rq[nb])for(const Fd of Da)delete S[nb][Fd];F=Da=void 0;qa=S;Fa=nb;var Db=
void 0,Nb=qa[Fa];"view"===Fa&&(Db="cell");Nb=Object.assign({},Nb,qa.style[null!==(F=Db)&&void 0!==F?F:Fa]);D(Nb)||(qa.style[null!==(Da=Db)&&void 0!==Da?Da:Fa]=Nb);delete qa[Fa]}for(const Fd of jc(Qi))delete S[Fd];nb=S;const {titleMarkConfig:Gc,subtitleMarkConfig:Xc,subtitle:Ad}=Uf(nb.title);D(Gc)||(nb.style["group-title"]=Object.assign({},nb.style["group-title"],Gc));D(Xc)||(nb.style["group-subtitle"]=Object.assign({},nb.style["group-subtitle"],Xc));D(Ad)?delete nb.title:nb.title=Ad;for(const Fd in S)N(S[Fd])&&
D(S[Fd])&&delete S[Fd];return D(S)?void 0:S}function ff(S,Da){const F="x"===Da?"y":"radius";var qa=S[Da];S=S[F];if(Lf(qa)&&Lf(S))if("quantitative"===bi(qa)&&"quantitative"===bi(S)){if(qa.stack)return Da;if(S.stack)return F;const Db=Lf(qa)&&!!qa.aggregate,Nb=Lf(S)&&!!S.aggregate;if(Db!==Nb)return Db?Da:F;var Fa,nb;qa=null===(Fa=qa.scale)||void 0===Fa?void 0:Fa.type;Fa=null===(nb=S.scale)||void 0===nb?void 0:nb.type;if(qa&&"linear"!==qa)return F;if(Fa&&"linear"!==Fa)return Da}else{if("quantitative"===
bi(qa))return Da;if("quantitative"===bi(S))return F}else{if("quantitative"===bi(qa))return Da;if("quantitative"===bi(S))return F}}function ig(S){switch(S){case "x":return"y";case "y":return"x";case "theta":return"radius";case "radius":return"theta"}}function Dh(S,Da,F){F=void 0===F?{}:F;S=Ua(S)?S.type:S;if(!Vl.has(S))return null;const qa=ff(Da,"x")||ff(Da,"theta");if(!qa)return null;const Fa=Da[qa];var nb=Lf(Fa)?qb(Fa,{}):void 0;let Db=ig(qa),Nb=Da[Db],Gc=Lf(Nb)?qb(Nb,{}):void 0;Gc===nb&&(Db=Nb=Gc=
void 0);nb=af.reduce((Ad,Fd)=>{if("tooltip"!==Fd&&Kg(Da,Fd)){var le=Da[Fd];for(const We of V(le)){le=ee(We);if(le.aggregate)continue;const Le=qb(le,{});Le&&Le===Gc||Ad.push({channel:Fd,fieldDef:le})}}return Ad},[]);let Xc;void 0!==Fa.stack?Xc=P(Fa.stack)?Fa.stack?"zero":null:Fa.stack:0<nb.length&&zs.has(S)&&(Xc="zero");if(!(Xc&&Xc in ys)||Cf(Da)&&0===nb.length)return null;if(Fa.scale&&Fa.scale.type&&Fa.scale.type!==jb.LINEAR){if(F.disallowNonLinearStack)return null;Wd("Cannot stack non-linear scale (".concat(Fa.scale.type,
")."))}if(lb(Da[Kb(qa)]))return void 0!==Fa.stack&&Wd(xd(qa)),null;Lf(Fa)&&Fa.aggregate&&!fa(Mb,Fa.aggregate)&&Wd('Stacking is applied even though the aggregate function is non-summative ("'.concat(Fa.aggregate,'").'));return{groupbyChannel:Nb?Db:void 0,groupbyField:Gc,fieldChannel:qa,impute:null===Fa.impute?!1:ib(S),stackBy:nb,offset:Xc}}function Di(S,Da,F){Da=void 0===Da?{}:Da;if("transparent"===S.point)return{opacity:0};if(S.point)return N(S.point)?S.point:{};if(void 0!==S.point)return null;if(Da.point||
F.shape)return N(Da.point)?Da.point:{}}function Si(S,Da){Da=void 0===Da?{}:Da;if(S.line)return!0===S.line?{}:S.line;if(void 0!==S.line)return null;if(Da.line)return!0===Da.line?{}:Da.line}function pl(S,Da){return Da?Ri(S,Da):S}function Aj(S,Da,F){const qa=Da[S];if(qa&&!G(qa)&&"repeat"in qa){if(qa.repeat in F)return Object.assign({},Da,{[S]:F[qa.repeat]});Wd('Unknown repeated value "'.concat(qa.repeat,'".'))}else return Da}function Hj(S,Da){S=Aj("field",S,Da);if(void 0!==S){if(null===S)return null;
"sort"in S&&xg(S.sort)&&(Da=Aj("field",S.sort,Da),S=Object.assign({},S,Da?{sort:Da}:{}));return S}}function ck(S,Da){if(Lf(S))return Hj(S,Da);Da=Aj("datum",S,Da);Da===S||Da.type||(Da.type="nominal");return Da}function Ck(S,Da){if(lb(S)){if(Da=ck(S,Da))return Da;if(S&&"condition"in S)return{condition:S.condition}}else{if(gh(S)){if(Da=ck(S.condition,Da))return Object.assign({},S,{condition:Da});S=Object.assign({},S);return delete S.condition,S}return S}}function Ri(S,Da){const F={};for(const Fa in S)if(vk.call(S,
Fa)){var qa=S[Fa];Jh(qa)?F[Fa]=qa.map(nb=>Ck(nb,Da)).filter(nb=>nb):(qa=Ck(qa,Da),void 0!==qa&&(F[Fa]=qa))}return F}function jk(S){var {parentEncoding:Da,encoding:F={},layer:qa}=S;S={};if(Da){var Fa=new Set([...jc(Da),...jc(F)]);for(const nb of Fa){Fa=F[nb];const Db=Da[nb];if(lb(Fa))Fa=Object.assign({},Db,Fa),S[nb]=Fa;else if(gh(Fa))S[nb]=Object.assign({},Fa,{condition:Object.assign({},Db,Fa.condition)});else if(Fa||null===Fa)S[nb]=Fa;else if(qa||Vb(Db)||Zc(Db)||lb(Db)||Jh(Db))S[nb]=Db}}else S=F;
return!S||D(S)?void 0:S}function Gj(S){const {parentProjection:Da,projection:F}=S;if(Da&&F){const {parentProjection:qa,projection:Fa}={parentProjection:Da,projection:F};S="Layer's shared projection ".concat(fc(qa)," is overridden by a child projection ").concat(fc(Fa),".");Wd(S)}return null!==F&&void 0!==F?F:Da}function Ik(S,Da){void 0===Da&&(Da=je(S.config));var F=Da;F=void 0===F?{}:F;F=So.map(S,{config:F});const {width:qa,height:Fa}=S;{let {width:nb,height:Db}={width:qa,height:Fa,autosize:S.autosize};
S=jh(F)||"layer"in F;const Nb={};S?"container"==nb&&"container"==Db?(Nb.type="fit",Nb.contains="padding"):"container"==nb?(Nb.type="fit-x",Nb.contains="padding"):"container"==Db&&(Nb.type="fit-y",Nb.contains="padding"):("container"==nb&&(Wd(yd("width")),nb=void 0),"container"==Db&&(Wd(yd("height")),Db=void 0));Da=Object.assign({},{type:"pad"},Nb,Da?wk(Da.autosize):{},wk(F.autosize));"fit"!==Da.type||S||(Wd('Autosize "fit" only works for single views and layered views.'),Da.type="pad");"container"==
nb&&"fit"!=Da.type&&"fit-x"!=Da.type&&Wd(hd("width"));"container"==Db&&"fit"!=Da.type&&"fit-y"!=Da.type&&Wd(hd("height"));S=Hk(Da,{type:"pad"})?void 0:Da}return Object.assign({},F,S?{autosize:S}:{})}function wk(S){return G(S)?{type:S}:null!==S&&void 0!==S?S:{}}function $k(S){return{explicit:!0,value:S}}function ci(S){return{explicit:!1,value:S}}function Ng(S){return(Da,F,qa,Fa)=>{const nb=S(Da.value,F.value);return 0<nb?Da:0>nb?F:sk(Da,F,qa,Fa)}}function sk(S,Da,F,qa){if(S.explicit&&Da.explicit){var Fa=
S.value;Da=Da.value;F="Conflicting ".concat(qa.toString(),' property "').concat(F.toString(),'" (').concat(fc(Fa)," and ").concat(fc(Da),"). Using ").concat(fc(Fa),".");Wd(F)}return S}function Ji(S,Da,F,qa,Fa){Fa=void 0===Fa?sk:Fa;return void 0===S||void 0===S.value?Da:S.explicit&&!Da.explicit?S:Da.explicit&&!S.explicit?Da:Hk(S.value,Da.value)?S:Fa(S,Da,F,qa)}function Fg(S){return"name"in S&&!("url"in S)&&!("values"in S)&&!Vi(S)}function Vi(S){return S&&("sequence"in S||"sphere"in S||"graticule"in
S)}function Yk(S){return S.map(Da=>"filter"in Da?{filter:pa(Da.filter,fh)}:Da)}function jl(S,Da,F){To=Da||"view";Uo=F||wp;return xk(S.trim()).map(Uk)}function oj(S,Da,F,qa,Fa){const nb=S.length;let Db=0,Nb;for(;Da<nb;++Da)if(Nb=S[Da],Db||Nb!==F)Fa&&0<=Fa.indexOf(Nb)?--Db:qa&&0<=qa.indexOf(Nb)&&++Db;else break;return Da}function xk(S){const Da=[],F=S.length;let qa=0,Fa=0;for(;Fa<F;)Fa=oj(S,Fa,",","[{","]}"),Da.push(S.substring(qa,Fa).trim()),qa=++Fa;if(0===Da.length)throw"Empty event selector: "+S;
return Da}function Uk(S){if("["===S[0]){var Da=S;var F=Da.length;S=oj(Da,1,"]","[","]");if(S===F)throw"Empty between selector: "+Da;F=xk(Da.substring(1,S));if(2!==F.length)throw"Between selector must have two elements: "+Da;Da=Da.slice(S+1).trim();if("\x3e"!==Da[0])throw"Expected '\x3e' after between selector: "+Da;F=F.map(Uk);Da=Uk(Da.slice(1).trim());Da.between?Da={between:F,stream:Da}:Da.between=F}else{F={source:To};const qa=[];let Fa=[0,0],nb=0,Db=0,Nb=S.length,Gc=0,Xc;if("}"===S[Nb-1]){Gc=S.lastIndexOf("{");
if(0<=Gc){try{Fa=ql(S.substring(Gc+1,Nb-1))}catch(Ad){throw"Invalid throttle specification: "+S;}S=S.slice(0,Gc).trim();Nb=S.length}else throw"Unmatched right brace: "+S;Gc=0}if(!Nb)throw S;"@"===S[0]&&(nb=++Gc);Xc=oj(S,Gc,":");Xc<Nb&&(qa.push(S.substring(Db,Xc).trim()),Db=Gc=++Xc);Gc=oj(S,Gc,"[");if(Gc===Nb)qa.push(S.substring(Db,Nb).trim());else if(qa.push(S.substring(Db,Gc).trim()),Da=[],Db=++Gc,Db===Nb)throw"Unmatched left bracket: "+S;for(;Gc<Nb;){Gc=oj(S,Gc,"]");if(Gc===Nb)throw"Unmatched left bracket: "+
S;Da.push(S.substring(Db,Gc).trim());if(Gc<Nb-1&&"["!==S[++Gc])throw"Expected left bracket: "+S;Db=++Gc}if(!(Nb=qa.length)||Br.test(qa[Nb-1]))throw"Invalid event selector: "+S;1<Nb?(F.type=qa[1],nb?F.markname=qa[0].slice(1):Uo[qa[0]]?F.marktype=qa[0]:F.source=qa[0]):F.type=qa[0];"!"===F.type.slice(-1)&&(F.consume=!0,F.type=F.type.slice(0,-1));null!=Da&&(F.filter=Da);Fa[0]&&(F.throttle=Fa[0]);Fa[1]&&(F.debounce=Fa[1]);Da=F}return Da}function ql(S){const Da=S.split(",");if(!S.length||2<Da.length)throw S;
return Da.map(F=>{F=+F;if(F!==F)throw S;return F})}function rl(S,Da,F,qa){var Fa=!!Da&&"condition"in Da&&Da.condition;Da=qa(Da);return Fa?(Fa=V(Fa).map(nb=>{const Db=qa(nb);nb=nb.selection?Od(S,nb.selection):He(S,nb.test);return Object.assign({},{test:nb},Db)}),{[F]:[...Fa,...(void 0!==Da?[Da]:[])]}):void 0!==Da?{[F]:Da}:{}}function Jk(S,Da){Da=void 0===Da?"text":Da;return rl(S,S.encoding[Da],Da,F=>Kk(F,S.config))}function Kk(S,Da,F){F=void 0===F?"datum":F;if(S){if(Vb(S))return vf(S.value);if(lb(S)){const {format:qa,
formatType:Fa}=Md(S);return Ag({fieldOrDatumDef:S,format:qa,formatType:Fa,expr:F,config:Da})}}}function Yl(S,Da){Da=void 0===Da?{}:Da;const {encoding:F,markDef:qa,config:Fa,stack:nb}=S,Db=F.tooltip;if(Jh(Db))return{tooltip:vh({tooltip:Db},nb,Fa,Da)};const Nb=Da.reactiveGeom?"datum.datum":"datum";return rl(S,Db,"tooltip",Gc=>{const Xc=Kk(Gc,Fa,Nb);if(Xc)return Xc;if(null!==Gc){Gc=ag("tooltip",qa,Fa);!0===Gc&&(Gc={content:"encoding"});if(G(Gc))return{value:Gc};if(N(Gc))return Zc(Gc)?Gc:"encoding"===
Gc.content?vh(F,nb,Fa,Da):{signal:Nb}}})}function dk(S,Da,F,qa){function Fa(Gc,Xc){var Ad,Fd=Wb(Xc);Gc=Eb(Gc)?Gc:Object.assign({},Gc,{type:S[Fd].type});Fd=Gc.title||Df(Gc,F);Fd=V(Fd).join(", ");if(Xc in df){const Le="x"===Xc?"x2":"y2";var le=ee(S[Le]);if(rc(Gc.bin)&&le){var We=qb(Gc,{expr:Db});le=qb(le,{expr:Db});const {format:pf,formatType:kg}=Md(Gc);We=wg(We,le,pf,kg,F);nb[Le]=!0}else if(Da&&Da.fieldChannel===Xc&&"normalize"===Da.offset){const {format:pf,formatType:kg}=Md(Gc);We=Ag({fieldOrDatumDef:Gc,
format:pf,formatType:kg,expr:Db,config:F,normalizeStack:!0}).signal}}We=null!==(Ad=We)&&void 0!==Ad?Ad:Kk(Gc,F,Db).signal;Nb.push({channel:Xc,key:Fd,value:We})}({reactiveGeom:qa}=void 0===qa?{}:qa);const nb={},Db=qa?"datum.datum":"datum",Nb=[];ug(S,(Gc,Xc)=>{Lf(Gc)?Fa(Gc,Xc):li(Gc)&&Fa(Gc.condition,Xc)});qa={};for(const Gc of Nb){const {channel:Xc,key:Ad,value:Fd}=Gc;nb[Xc]||qa[Ad]||(qa[Ad]=Fd)}return qa}function vh(S,Da,F,qa){({reactiveGeom:qa}=void 0===qa?{}:qa);S=dk(S,Da,F,{reactiveGeom:qa});S=
Pc(S).map(Fa=>{var [nb,Db]=Fa;return'"'.concat(nb,'": ').concat(Db)});return 0<S.length?{signal:"{".concat(S.join(", "),"}")}:void 0}function Sl(S){const {encoding:Da,markDef:F,config:qa,stack:Fa}=S;var nb=Da.description;if(nb)return rl(S,nb,"description",Db=>Kk(Db,S.config));nb=ag("description",F,qa);if(null!=nb)return{description:vf(nb)};if(!1===qa.aria)return{};nb=dk(Da,Fa,qa);if(!D(nb))return{description:{signal:Pc(nb).map((Db,Nb)=>{var [Gc,Xc]=Db;return'"'.concat(0<Nb?"; ":"").concat(Gc,': " + (').concat(Xc,
")")}).join(" + ")}}}function Kh(S,Da,F){F=void 0===F?{}:F;const {markDef:qa,encoding:Fa,config:nb}=Da,{vgChannel:Db}=F;let {defaultRef:Nb,defaultValue:Gc}=F;if(void 0===Nb){var Xc;Gc=null!==(Xc=Gc)&&void 0!==Xc?Xc:ag(S,qa,nb,{vgChannel:Db,ignoreVgConfig:!0});void 0!==Gc&&(Nb=vf(Gc))}return rl(Da,Fa[S],null!==Db&&void 0!==Db?Db:S,Ad=>Hf({channel:S,channelDef:Ad,markDef:qa,config:nb,scaleName:Da.scaleName(S),scale:Da.getScaleComponent(S),stack:null,defaultRef:Nb}))}function og(S,Da){Da=void 0===Da?
{filled:void 0}:Da;var F,qa,Fa,nb;const {markDef:Db,encoding:Nb,config:Gc}=S;var {type:Xc}=Db;Da=null!==(F=Da.filled)&&void 0!==F?F:ag("filled",Db,Gc);Xc=fa(["bar","point","circle","square","geoshape"],Xc)?"transparent":void 0;F=null!==(qa=null!==(Fa=ag(!0===Da?"color":void 0,Db,Gc,{vgChannel:"fill"}))&&void 0!==Fa?Fa:Gc.mark[!0===Da&&"color"])&&void 0!==qa?qa:Xc;qa=null!==(nb=ag(!1===Da?"color":void 0,Db,Gc,{vgChannel:"stroke"}))&&void 0!==nb?nb:Gc.mark[!1===Da&&"color"];nb=Da?"fill":"stroke";Fa=
Object.assign({},F?{fill:vf(F)}:{},qa?{stroke:vf(qa)}:{});Db.color&&(Da?Db.fill:Db.stroke)&&Wd(tb("property",{fill:"fill"in Db,stroke:"stroke"in Db}));return Object.assign({},Fa,Kh("color",S,{vgChannel:nb,defaultValue:Da?F:qa}),Kh("fill",S,{defaultValue:Nb.fill?F:void 0}),Kh("stroke",S,{defaultValue:Nb.stroke?qa:void 0}))}function zj(S){const {encoding:Da,mark:F}=S,qa=Da.order;return!ib(F)&&Vb(qa)?rl(S,qa,"zindex",Fa=>vf(Fa.value)):{}}function gk(S,Da){S=Ub(S);if(Da=Da[S])return Da}function qk(S,
Da,F){var {defaultPos:qa,vgChannel:Fa,isMidPoint:nb}=F;const {encoding:Db,markDef:Nb,config:Gc,stack:Xc}=Da;F=Db[S];const Ad=Db[Kb(S)],Fd=Da.scaleName(S),le=Da.getScaleComponent(S),We=gk(S,Nb),Le=al({model:Da,defaultPos:qa,channel:S,scaleName:Fd,scale:le});if(!F&&S in df&&(Db.latitude||Db.longitude))Da={field:Da.getName(S)};else a:{Da={channel:S,channelDef:F,channel2Def:Ad,markDef:Nb,config:Gc,isMidPoint:nb,scaleName:Fd,scale:le,stack:Xc,offset:We,defaultRef:Le};const {channel:pf,channelDef:kg,isMidPoint:Ig,
scaleName:Yg,stack:pj,offset:yg,markDef:Jg,config:Fh}=Da;if(lb(kg)&&pj&&pf===pj.fieldChannel){if(Lf(kg)&&(Da=Rf({channel:pf,fieldDef:kg,isMidPoint:Ig,markDef:Jg,stack:pj,config:Fh}),void 0!==Da)){Da=Ce({scaleName:Yg,fieldOrDatumDef:kg,startSuffix:"start",band:Da,offset:yg});break a}Da=wd(kg,Yg,{suffix:"end"},{offset:yg})}else Da=v(Da)}return Da?{[Fa||S]:Da}:void 0}function al(S){var {model:Da,defaultPos:F,channel:qa,scaleName:Fa,scale:nb}=S;const {markDef:Db,config:Nb}=Da;return()=>{var Gc=Wb(qa),
Xc=Kc(qa);Xc=ag(qa,Db,Nb,{vgChannel:Xc});if(void 0!==Xc)return zg(qa,Xc);switch(F){case "zeroOrMin":case "zeroOrMax":if(Fa&&(Xc=nb.get("type"),!fa([jb.LOG,jb.TIME,jb.UTC],Xc)&&nb.domainDefinitelyIncludesZero()))return{scale:Fa,value:0};if("zeroOrMin"===F)return"y"===Gc?{field:{group:"height"}}:{value:0};switch(Gc){case "radius":return{signal:"min(".concat(Da.width.signal,",").concat(Da.height.signal,")/2")};case "theta":return{signal:"2*PI"};case "x":return{field:{group:"width"}};case "y":return{value:0}}break;
case "mid":return Gc=Da[mc(qa)],Object.assign({},Gc,{mult:.5})}}}function Tk(S,Da,F,qa){qa=void 0===qa?"middle":qa;if("radius"===S||"theta"===S)return Kc(S);var Fa="x"===S?"align":"baseline";Da=ag(Fa,Da,F);Zc(Da)?(Wd("The ".concat(Fa," for range marks cannot be an expression")),Fa=void 0):Fa=Da;return"x"===S?Cr[Fa||("top"===qa?"left":"center")]:so[Fa||qa]}function uk(S,Da,F){var {defaultPos:qa,defaultPos2:Fa,range:nb}=F;return nb?Kl(S,Da,{defaultPos:qa,defaultPos2:Fa}):qk(S,Da,{defaultPos:qa})}function Kl(S,
Da,F){var {defaultPos:qa,defaultPos2:Fa}=F;const {markDef:nb,config:Db}=Da;var Nb=Kb(S);F=mc(S);{const {encoding:yg,mark:Jg,markDef:Fh,stack:nk,config:Li}=Da;var Gc=Wb(Nb);const Xi=mc(Nb),ej=Kc(Nb);var Xc=yg[Gc];const bl=Da.scaleName(Gc),Hl=Da.getScaleComponent(Gc);Gc=Nb in yg||Nb in Fh?gk(Nb,Da.markDef):gk(Gc,Da.markDef);if(Xc||"x2"!==Nb&&"y2"!==Nb||!yg.latitude&&!yg.longitude){var {channel:Ad,channelDef:Fd,channel2Def:le,markDef:We,config:Le,scaleName:pf,scale:kg,stack:Ig,offset:Yg,defaultRef:pj}=
{channel:Nb,channelDef:Xc,channel2Def:yg[Nb],markDef:Fh,config:Li,scaleName:bl,scale:Hl,stack:nk,offset:Gc,defaultRef:void 0};Xc=lb(Fd)&&Ig&&Ad.charAt(0)===Ig.fieldChannel.charAt(0)?wd(Fd,pf,{suffix:"start"},{offset:Yg}):v({channel:Ad,channelDef:le,scaleName:pf,scale:kg,stack:Ig,markDef:We,config:Le,offset:Yg,defaultRef:pj});Nb=void 0!==Xc?{[ej]:Xc}:Rb(Nb,Fh)||Rb(Nb,{[Nb]:mh(Nb,Fh,Li.style),[Xi]:mh(Xi,Fh,Li.style)})||Rb(Nb,Li[Jg])||Rb(Nb,Li.mark)||{[ej]:al({model:Da,defaultPos:Fa,channel:Nb,scaleName:bl,
scale:Hl})()}}else Nb={[ej]:{field:Da.getName(Nb)}}}F=Nb[F]?Tk(S,nb,Db):Kc(S);return Object.assign({},qk(S,Da,{defaultPos:qa,vgChannel:F}),Nb)}function Rb(S,Da){const F=mc(S),qa=Kc(S);if(void 0!==Da[qa])return{[qa]:zg(S,Da[qa])};if(void 0!==Da[S])return{[qa]:zg(S,Da[S])};if(Da[F])return{[F]:zg(S,Da[F])}}function Bc(S,Da,F){var qa,Fa;const {config:nb,encoding:Db,markDef:Nb,stack:Gc}=S;var Xc=Kb(Da),Ad=mc(Da),Fd=Db[Da];Xc=Db[Xc];var le=S.getScaleComponent(Da);const We=le?le.get("type"):void 0;var Le=
S.scaleName(Da);const pf=Nb.orient,kg=null!==(qa=null!==(Fa=Db[Ad])&&void 0!==Fa?Fa:Db.size)&&void 0!==qa?qa:ag("size",Nb,nb,{vgChannel:Ad});qa="bar"===F&&("x"===Da?"vertical"===pf:"horizontal"===pf);if(Lf(Fd)&&(nc(Fd.bin)||rc(Fd.bin)||Fd.timeUnit&&!Xc)&&!kg&&!(We in jg)){var Ig,Yg;F=Rf({channel:Da,fieldDef:Fd,stack:Gc,markDef:Nb,config:nb});S=null===(Ig=S.component.axes[Da])||void 0===Ig?void 0:Ig[0];S=null!==(Yg=null===S||void 0===S?void 0:S.get("translate"))&&void 0!==Yg?Yg:.5;a:{Da={fieldDef:Fd,
fieldDef2:Xc,channel:Da,markDef:Nb,scaleName:Le,band:F,axisTranslate:S,spacing:Da in df?ag("binSpacing",Nb,nb):void 0,reverse:le.get("reverse"),config:nb};var {fieldDef:pj,fieldDef2:yg,channel:Jg,band:Fh,scaleName:nk,markDef:Li,spacing:Xi=0,axisTranslate:ej,reverse:bl,config:Hl}=Da;Da=Kb(Jg);Fd=Kc(Jg);S=Kc(Da);F=gk(Jg,Li);if(nc(pj.bin)||pj.timeUnit)Da={[S]:zd({channel:Jg,fieldDef:pj,scaleName:nk,markDef:Li,band:(1-Fh)/2,offset:gd(Da,Xi,bl,ej,F),config:Hl}),[Fd]:zd({channel:Jg,fieldDef:pj,scaleName:nk,
markDef:Li,band:1-(1-Fh)/2,offset:gd(Jg,Xi,bl,ej,F),config:Hl})};else{if(rc(pj.bin)){var xl=wd(pj,nk,{},{offset:gd(Da,Xi,bl,ej,F)});if(Lf(yg)){Da={[S]:xl,[Fd]:wd(yg,nk,{},{offset:gd(Jg,Xi,bl,ej,F)})};break a}if(N(pj.bin)&&pj.bin.step){Da={[S]:xl,[Fd]:{signal:'scale("'.concat(nk,'", ').concat(qb(pj,{expr:"datum"})," + ").concat(pj.bin.step,")"),offset:gd(Jg,Xi,bl,ej,F)}};break a}}Wd(re(Da));Da=void 0}}return Da}if((lb(Fd)&&We in jg||qa)&&!Xc){{var ok;const {markDef:un,encoding:Hq,config:Vm,stack:Qm}=
S;Ig=un.orient;le=S.scaleName(Da);Le=S.getScaleComponent(Da);Yg=mc(Da);Xc=Kb(Da);Ig="horizontal"===Ig&&"y"===Da||"vertical"===Ig&&"x"===Da;qa=ag(Ig?"size":Yg,un,Vm,{vgChannel:Yg});if(Hq.size||void 0!==qa)Ig?xl=Kh("size",S,{vgChannel:Yg,defaultValue:qa}):Wd('Cannot apply size to non-oriented mark "'.concat(un.type,'".'));Ig=null!==(ok=lb(Fd)?Rf({channel:Da,fieldDef:Fd,markDef:un,stack:Qm,config:Vm}):void 0)&&void 0!==ok?ok:1;xl||(Ad=Yg,ok=le,qa=Le,xl=Vm,Fa=Ig,qa?(Ad=qa.get("type"),"point"===Ad||"band"===
Ad?void 0!==xl[F].discreteBandSize?F={value:xl[F].discreteBandSize}:Ad===jb.POINT?(F=qa.get("range"),F=rd(F)&&z(F.step)?{value:F.step-2}:{value:18}):F={scale:ok,band:Fa}:F={value:xl[F].continuousBandSize}):(ok=zb(xl.view,Ad),F=Ha(xl[F].discreteBandSize,ok-2),F=void 0!==F?{value:F}:void 0),xl={[Yg]:F});qa="band"!==(null===Le||void 0===Le?void 0:Le.get("type"))||!("band"in xl[Yg]);F=Tk(Da,un,Vm,qa?"middle":"top");ok=gk(Da,un);Da=v({channel:Da,channelDef:Fd,markDef:un,config:Vm,scaleName:le,scale:Le,
stack:Qm,offset:ok,defaultRef:al({model:S,defaultPos:"mid",channel:Da,scaleName:le,scale:Le}),band:qa?.5:(1-Ig)/2});Yg?Da=Object.assign({},{[F]:Da},xl):(Fd=Kc(Xc),S=xl[Yg],S=ok?Object.assign({},S,{offset:ok}):S,Da={[F]:Da,[Fd]:Jh(Da)?[Da[0],Object.assign({},Da[1],{offset:S})]:Object.assign({},Da,{offset:S})})}return Da}return Kl(Da,S,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function gd(S,Da,F,qa,Fa){if(S in $b)return 0;S="x"===S||"y2"===S?-Da/2:Da/2;if(Zc(F)||Zc(Fa)||Zc(qa))return F=wf(F),
Fa=wf(Fa),qa=(qa=wf(qa))?"".concat(qa," + "):"",F=F?"(".concat(F," ? -1 : 1) * "):"",S=Fa?"(".concat(Fa," + ").concat(S,")"):S,{signal:qa+F+S};Fa=Fa||0;return qa+(F?-Fa-S:+Fa+S)}function zd(S){var {channel:Da,fieldDef:F,scaleName:qa,markDef:Fa,band:nb,offset:Db,config:Nb}=S;S=Ce({scaleName:qa,fieldOrDatumDef:F,band:nb,offset:Db});return Xa({fieldDef:F,channel:Da,markDef:Fa,ref:S,config:Nb})}function ce(S,Da){const {fill:F,stroke:qa}="include"===Da.color?og(S):{};var Fa=Object,nb=Fa.assign;Da=De(S.markDef,
Da);var Db=ke(S,"fill",F),Nb=ke(S,"stroke",qa),Gc=Kh("opacity",S),Xc=Kh("fillOpacity",S),Ad=Kh("strokeOpacity",S),Fd=Kh("strokeWidth",S),le=Kh("strokeDash",S),We=zj(S),Le=Yl(S),pf=Jk(S,"href");{const {markDef:pj,config:yg}=S,Jg=ag("aria",pj,yg);if(!1===Jg)S={};else{var kg=Object,Ig=kg.assign;{const {mark:Fh,markDef:nk,config:Li}=S;if(!1===Li.aria)var Yg={};else Yg=ag("ariaRoleDescription",nk,Li),Yg=null!=Yg?{ariaRoleDescription:{value:Yg}}:Fh in r?{}:{ariaRoleDescription:{value:Fh}}}S=Ig.call(kg,
{},Jg?{aria:Jg}:{},Yg,Sl(S))}}return nb.call(Fa,{},Da,Db,Nb,Gc,Xc,Ad,Fd,le,We,Le,pf,S)}function ke(S,Da,F){const {config:qa,mark:Fa,markDef:nb}=S;return"hide"===ag("invalid",nb,qa)&&F&&!ib(Fa)&&(S=Fb(S,{invalid:!0,channels:Vg}))?{[Da]:[{test:S,value:null},...V(F)]}:F?{[Da]:F}:{}}function De(S,Da){return M.reduce((F,qa)=>{Dr.has(qa)||void 0===S[qa]||"ignore"===Da[qa]||(F[qa]=vf(S[qa]));return F},{})}function Fb(S,Da){var {invalid:F=!1,channels:qa}=Da;Da=qa.reduce((Fa,nb)=>{var Db=S.getScaleComponent(nb);
Db&&(Db=Db.get("type"),(nb=S.vgField(nb,{expr:"datum"}))&&Db in Ef&&(Fa[nb]=!0));return Fa},{});Da=jc(Da);if(0<Da.length){const Fa=F?"||":"\x26\x26";return Da.map(nb=>gc(nb,F)).join(" ".concat(Fa," "))}}function dc(S){const {config:Da,markDef:F}=S;return ag("invalid",F,Da)&&(S=Dc(S,{channels:rh}))?{defined:{signal:S}}:{}}function Dc(S,Da){var {invalid:F=!1,channels:qa}=Da;Da=qa.reduce((Fa,nb)=>{var Db=S.getScaleComponent(nb);Db&&(Db=Db.get("type"),(nb=S.vgField(nb,{expr:"datum"}))&&Db in Ef&&(Fa[nb]=
!0));return Fa},{});Da=jc(Da);if(0<Da.length){const Fa=F?"||":"\x26\x26";return Da.map(nb=>gc(nb,F)).join(" ".concat(Fa," "))}}function Vc(S,Da){if(void 0!==Da)return{[S]:vf(Da)}}function Ld(S,Da){S=Y(S.scaleName(Da));return"domain(".concat(S,")")}function ge(S){var Da;return S.parent&&hk(S.parent)&&(null!==(Da=!S.parent.parent)&&void 0!==Da?Da:ge(S.parent.parent))}function te(S,Da,F){var qa;const Fa=null===(qa=S.fieldDef(Da))||void 0===qa?void 0:qa.field;sh(S,nb=>{var Db;const Nb=null!==(Db=nb.project.hasField[Fa])&&
void 0!==Db?Db:nb.project.hasChannel[Da];if(Nb&&Vo.has(nb)){var Gc;Db=null!==(Gc=F.get("selections"))&&void 0!==Gc?Gc:[];Db.push(nb.name);F.set("selections",Db,!1);Nb.hasLegend=!0}})}function Te(S,Da,F,qa,Fa){var nb,Db=Da.name,Nb=Db+"_translate_anchor";Db+="_translate_delta";var Gc=F.channel;const Xc=Tm.has(Da);Da=Fa.filter(Fd=>Fd.name===F.signals[Xc?"data":"visual"])[0];qa=S.getSizeSignalRef(qa).signal;S=S.getScaleComponent(Gc);Fa=S.get("type");const Ad=Xc&&"x"===Gc?"-":"";Nb="".concat(Nb,".extent_").concat(Gc);
Gc="".concat(Ad).concat(Db,".").concat(Gc," / ")+(Xc?"".concat(qa):"span(".concat(Nb,")"));Nb="".concat(Xc?"log"===Fa?"panLog":"pow"===Fa?"panPow":"panLinear":"panLinear","(").concat(Nb,", ").concat(Gc)+(Xc&&"pow"===Fa?", ".concat(null!==(nb=S.get("exponent"))&&void 0!==nb?nb:1):"")+")";Da.on.push({events:{signal:Db},update:Xc?Nb:"clampRange(".concat(Nb,", 0, ").concat(qa,")")})}function pe(S,Da,F,qa,Fa){var nb,Db=Da.name;const Nb=F.channel,Gc=Tm.has(Da);Da=Fa.filter(Fd=>Fd.name===F.signals[Gc?"data":
"visual"])[0];qa=S.getSizeSignalRef(qa).signal;Fa=S.getScaleComponent(Nb);const Xc=Fa.get("type"),Ad=Gc?Ld(S,Nb):Da.name;S=Db+"_zoom_delta";Db="".concat(Db).concat("_zoom_anchor",".").concat(Nb);Db="".concat(Gc?"log"===Xc?"zoomLog":"pow"===Xc?"zoomPow":"zoomLinear":"zoomLinear","(").concat(Ad,", ").concat(Db,", ").concat(S)+(Gc&&"pow"===Xc?", ".concat(null!==(nb=Fa.get("exponent"))&&void 0!==nb?nb:1):"")+")";Da.on.push({events:{signal:S},update:Gc?Db:"clampRange(".concat(Db,", 0, ").concat(qa,")")})}
function Qf(S,Da){for(const F of yp)F.has(S)&&Da(F)}function jf(S,Da,F){Da=void 0===Da?!0:Da;F=void 0===F?Km:F;return Jh(S)?(S=S.map(qa=>jf(qa,Da,F)),Da?"[".concat(S.join(", "),"]"):S):Fe(S)?Da?F(rf(S)):F(Ff(S)):Da?F(JSON.stringify(S)):S}function Dg(S,Da){sh(S,(F,qa)=>{const Fa=F.name;let nb=qa.modifyExpr(S,F);Da.push(...qa.signals(S,F));Qf(F,Db=>{Db.signals&&(Da=Db.signals(S,F,Da));Db.modifyExpr&&(nb=Db.modifyExpr(S,F,nb))});Da.push({name:Fa+"_modify",on:[{events:{signal:F.name+"_tuple"},update:"modify(".concat(Y(F.name+
"_store"),", ").concat(nb,")")}]})});return Vj(Da)}function gg(S,Da){S.component.selection&&jc(S.component.selection).length&&(S=Y(S.getName("cell")),Da.unshift({name:"facet",value:{},on:[{events:jl("mousemove","scope"),update:"isTuple(facet) ? facet : group(".concat(S,").datum")}]}));return Vj(Da)}function Eg(S,Da){let F=!1;sh(S,(qa,Fa)=>{const nb=qa.name,Db=Y(nb+"_store");if(0===Da.filter(Nb=>Nb.name===nb).length){const Nb="global"===qa.resolve?"union":qa.resolve,Gc="multi"===qa.type?", true)":
")";Da.push({name:qa.name,update:"".concat("vlSelectionResolve","(").concat(Db,", ").concat(Y(Nb)).concat(Gc)})}F=!0;Fa.topLevelSignals&&(Da=Fa.topLevelSignals(S,qa,Da));Qf(qa,Nb=>{Nb.topLevelSignals&&(Da=Nb.topLevelSignals(S,qa,Da))})});F&&0===Da.filter(qa=>"unit"===qa.name).length&&Da.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]});return Vj(Da)}function Ph(S,Da){const F=[...Da];sh(S,qa=>{const Fa={name:qa.name+"_store"};if(qa.init){const nb=
qa.project.items.map(Nb=>{Nb=Object.assign({},Nb);return delete Nb.signals,Nb}),Db=qa.init.map(Nb=>jf(Nb,!1));Fa.values="interval"===qa.type?[{unit:Zh(S,{escape:!1}),fields:nb,values:Db}]:Db.map(Nb=>({unit:Zh(S,{escape:!1}),fields:nb,values:Nb}))}F.filter(nb=>nb.name===qa.name+"_store").length||F.push(Fa)});return F}function Sg(S,Da){sh(S,(F,qa)=>{Da=qa.marks?qa.marks(S,F,Da):Da;Qf(F,Fa=>{Fa.marks&&(Da=Fa.marks(S,F,Da))})});return Da}function Ei(S,Da){for(const F of S.children)Ij(F)&&(Da=Sg(F,Da));
return Da}function Vj(S){return S.map(Da=>{Da.on&&!Da.on.length&&delete Da.on;return Da})}function Mh(S,Da,F,qa){const Fa=F.channel,nb=F.signals.visual;F=F.signals.data;const Db=Tm.has(Da),Nb=Y(S.scaleName(Fa));var Gc=S.getScaleComponent(Fa);Gc=Gc?Gc.get("type"):void 0;const Xc=le=>"scale(".concat(Nb,", ").concat(le,")"),Ad=S.getSizeSignalRef("x"===Fa?"width":"height").signal,Fd="".concat(Fa,"(unit)");S=$h(Da,(le,We)=>[...le,{events:We.between[0],update:"[".concat(Fd,", ").concat(Fd,"]")},{events:We,
update:"[".concat(nb,"[0], clamp(").concat(Fd,", 0, ").concat(Ad,")]")}]);S.push({events:{signal:Da.name+"_scale_trigger"},update:Gc in Ef?"[".concat(Xc("".concat(F,"[0]")),", ").concat(Xc("".concat(F,"[1]")),"]"):"[0, 0]"});return Db?[{name:F,on:[]}]:[Object.assign({},{name:nb},qa?{init:jf(qa,!0,Xc)}:{value:[]},{on:S}),Object.assign({},{name:F},qa?{init:jf(qa)}:{},{on:[{events:{signal:nb},update:"".concat(nb,"[0] \x3d\x3d\x3d ").concat(nb,"[1] ? null : invert(").concat(Nb,", ").concat(nb,")")}]})]}
function $h(S,Da){return S.events.reduce((F,qa)=>qa.between?Da(F,qa):(Wd("".concat(qa," is not an ordered event stream for interval selections.")),F),[])}function ll(S,Da){const F=Da.name;var qa=F+"_tuple_fields";const Fa=Da.project.items.map(nb=>{const Db=S.fieldDef(nb.channel);return Db&&Db.bin?"[".concat("(item().isVoronoi ? datum.datum : datum)","[").concat(Y(S.vgField(nb.channel,{})),"], ")+"".concat("(item().isVoronoi ? datum.datum : datum)","[").concat(Y(S.vgField(nb.channel,{binSuffix:"end"})),
"]]"):"".concat("(item().isVoronoi ? datum.datum : datum)","[").concat(Y(nb.field),"]")}).join(", ");qa="unit: ".concat(Zh(S),", fields: ").concat(qa,", values");Da=Da.events;return[{name:F+"_tuple",on:Da?[{events:Da,update:"datum \x26\x26 item().mark.marktype !\x3d\x3d 'group' ? {".concat(qa,": [").concat(Fa,"]} : null"),force:!0}]:[]}]}function sh(S,Da){if(S=S.component.selection)for(const F of Fc(S))if(!0===Da(F,Zj[F.type]))break}function Zh(S,Da){({escape:Da}=void 0===Da?{escape:!0}:Da);Da=Da?
Y(S.name):S.name;for(S=S.parent;S&&!kk(S);)S=S.parent;if(S){const {facet:F}=S;for(const qa of pd)F[qa]&&(Da+=" + '__facet_".concat(qa,"_' + (facet[").concat(Y(S.vgField(qa)),"])"))}return Da}function Uj(S){let Da=!1;sh(S,F=>{Da=Da||F.project.items.some(qa=>"_vgsid_"===qa.field)});return Da}function Rj(S){this.type=S}function Mi(S){switch(S.type){case "ArrayExpression":return S.elements;case "BinaryExpression":case "LogicalExpression":return[S.left,S.right];case "CallExpression":return[S.callee].concat(S.arguments);
case "ConditionalExpression":return[S.test,S.consequent,S.alternate];case "MemberExpression":return[S.object,S.property];case "ObjectExpression":return S.properties;case "Property":return[S.key,S.value];case "UnaryExpression":return[S.argument];default:return[]}}function si(S,Da){if(!S)throw Error("ASSERT: "+Da);}function ai(S){return 48<=S&&57>=S}function Wj(S){return 0<="0123456789abcdefABCDEF".indexOf(S)}function Jj(S){return 0<="01234567".indexOf(S)}function xh(S){return 10===S||13===S||8232===
S||8233===S}function sg(S){return 36===S||95===S||65<=S&&90>=S||97<=S&&122>=S||92===S||128<=S&&Zn.test(String.fromCharCode(S))}function Bh(S){return 36===S||95===S||65<=S&&90>=S||97<=S&&122>=S||48<=S&&57>=S||92===S||128<=S&&uo.test(String.fromCharCode(S))}function ti(){for(;Vf<qm;){const S=Xh.charCodeAt(Vf);if(32===S||9===S||11===S||12===S||160===S||5760<=S&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(S)||xh(S))++Vf;else break}}function Zi(S){var Da=
0;var F="u"===S?4:2;for(S=0;S<F;++S)if(Vf<qm&&Wj(Xh[Vf])){var qa=Xh[Vf++];Da=16*Da+"0123456789abcdef".indexOf(qa.toLowerCase())}else ii({},"Unexpected token %0","ILLEGAL");return String.fromCharCode(Da)}function xj(){var S=Xh.charCodeAt(Vf++);var Da=String.fromCharCode(S);92===S&&(117!==Xh.charCodeAt(Vf)&&ii({},"Unexpected token %0","ILLEGAL"),++Vf,(S=Zi("u"))&&"\\"!==S&&sg(S.charCodeAt(0))||ii({},"Unexpected token %0","ILLEGAL"),Da=S);for(;Vf<qm;){S=Xh.charCodeAt(Vf);if(!Bh(S))break;++Vf;Da+=String.fromCharCode(S);
92===S&&(Da=Da.substr(0,Da.length-1),117!==Xh.charCodeAt(Vf)&&ii({},"Unexpected token %0","ILLEGAL"),++Vf,(S=Zi("u"))&&"\\"!==S&&Bh(S.charCodeAt(0))||ii({},"Unexpected token %0","ILLEGAL"),Da+=S)}return Da}function Wl(){var S=Vf,Da=Xh.charCodeAt(Vf),F=Xh[Vf];switch(Da){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Vf,{type:7,value:String.fromCharCode(Da),start:S,end:Vf};default:var qa=Xh.charCodeAt(Vf+1);if(61===qa)switch(Da){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Vf+=
2,{type:7,value:String.fromCharCode(Da)+String.fromCharCode(qa),start:S,end:Vf};case 33:case 61:return Vf+=2,61===Xh.charCodeAt(Vf)&&++Vf,{type:7,value:Xh.slice(S,Vf),start:S,end:Vf}}}Da=Xh.substr(Vf,4);if("\x3e\x3e\x3e\x3d"===Da)return Vf+=4,{type:7,value:Da,start:S,end:Vf};Da=Da.substr(0,3);if("\x3e\x3e\x3e"===Da||"\x3c\x3c\x3d"===Da||"\x3e\x3e\x3d"===Da)return Vf+=3,{type:7,value:Da,start:S,end:Vf};Da=Da.substr(0,2);if(F===Da[1]&&0<="+-\x3c\x3e\x26|".indexOf(F)||"\x3d\x3e"===Da)return Vf+=2,{type:7,
value:Da,start:S,end:Vf};if(0<="\x3c\x3e\x3d!+-*%\x26|^/".indexOf(F))return++Vf,{type:7,value:F,start:S,end:Vf};ii({},"Unexpected token %0","ILLEGAL")}function Sk(){var S=Xh[Vf];si(ai(S.charCodeAt(0))||"."===S,"Numeric literal must start with a decimal digit or a decimal point");var Da=Vf;var F="";if("."!==S){F=Xh[Vf++];S=Xh[Vf];if("0"===F){if("x"===S||"X"===S){++Vf;for(F="";Vf<qm&&Wj(Xh[Vf]);)F+=Xh[Vf++];0===F.length&&ii({},"Unexpected token %0","ILLEGAL");sg(Xh.charCodeAt(Vf))&&ii({},"Unexpected token %0",
"ILLEGAL");return{type:6,value:parseInt("0x"+F,16),start:Da,end:Vf}}if(Jj(S)){for(F="0"+Xh[Vf++];Vf<qm&&Jj(Xh[Vf]);)F+=Xh[Vf++];(sg(Xh.charCodeAt(Vf))||ai(Xh.charCodeAt(Vf)))&&ii({},"Unexpected token %0","ILLEGAL");return{type:6,value:parseInt(F,8),octal:!0,start:Da,end:Vf}}S&&ai(S.charCodeAt(0))&&ii({},"Unexpected token %0","ILLEGAL")}for(;ai(Xh.charCodeAt(Vf));)F+=Xh[Vf++];S=Xh[Vf]}if("."===S){for(F+=Xh[Vf++];ai(Xh.charCodeAt(Vf));)F+=Xh[Vf++];S=Xh[Vf]}if("e"===S||"E"===S){F+=Xh[Vf++];S=Xh[Vf];
if("+"===S||"-"===S)F+=Xh[Vf++];if(ai(Xh.charCodeAt(Vf)))for(;ai(Xh.charCodeAt(Vf));)F+=Xh[Vf++];else ii({},"Unexpected token %0","ILLEGAL")}sg(Xh.charCodeAt(Vf))&&ii({},"Unexpected token %0","ILLEGAL");return{type:6,value:parseFloat(F),start:Da,end:Vf}}function Nj(S,Da){let F=S;0<=Da.indexOf("u")&&(F=F.replace(/\\u\{([0-9a-fA-F]+)\}/g,(qa,Fa)=>{if(1114111>=parseInt(Fa,16))return"x";ii({},"Invalid regular expression")}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(F)}catch(qa){ii({},
"Invalid regular expression")}try{return new RegExp(S,Da)}catch(qa){return null}}function Pk(){ti();if(Vf>=qm)return{type:2,start:Vf,end:Vf};var S=Xh.charCodeAt(Vf);if(sg(S)){S=Vf;if(92===Xh.charCodeAt(Vf))var Da=xj();else a:{for(Da=Vf++;Vf<qm;){var F=Xh.charCodeAt(Vf);if(92===F){Vf=Da;Da=xj();break a}if(Bh(F))++Vf;else break}Da=Xh.slice(Da,Vf)}return{type:1===Da.length?3:Fr.hasOwnProperty(Da)?4:"null"===Da?5:"true"===Da||"false"===Da?1:3,value:Da,start:S,end:Vf}}if(40===S||41===S||59===S)return Wl();
if(39===S||34===S){var qa="";F=!1;S=Xh[Vf];si("'"===S||'"'===S,"String literal must starts with a quote");Da=Vf;for(++Vf;Vf<qm;){var Fa=Xh[Vf++];if(Fa===S){S="";break}else if("\\"===Fa)if((Fa=Xh[Vf++])&&xh(Fa.charCodeAt(0)))"\r"===Fa&&"\n"===Xh[Vf]&&++Vf;else switch(Fa){case "u":case "x":if("{"===Xh[Vf]){++Vf;var nb=Xh[Vf];Fa=0;for("}"===nb&&ii({},"Unexpected token %0","ILLEGAL");Vf<qm;){nb=Xh[Vf++];if(!Wj(nb))break;Fa=16*Fa+"0123456789abcdef".indexOf(nb.toLowerCase())}(1114111<Fa||"}"!==nb)&&ii({},
"Unexpected token %0","ILLEGAL");Fa=65535>=Fa?String.fromCharCode(Fa):String.fromCharCode((Fa-65536>>10)+55296,(Fa-65536&1023)+56320);qa+=Fa}else qa+=Zi(Fa);break;case "n":qa+="\n";break;case "r":qa+="\r";break;case "t":qa+="\t";break;case "b":qa+="\b";break;case "f":qa+="\f";break;case "v":qa+="\v";break;default:Jj(Fa)?(nb="01234567".indexOf(Fa),0!==nb&&(F=!0),Vf<qm&&Jj(Xh[Vf])&&(F=!0,nb=8*nb+"01234567".indexOf(Xh[Vf++]),0<="0123".indexOf(Fa)&&Vf<qm&&Jj(Xh[Vf])&&(nb=8*nb+"01234567".indexOf(Xh[Vf++]))),
qa+=String.fromCharCode(nb)):qa+=Fa}else if(xh(Fa.charCodeAt(0)))break;else qa+=Fa}""!==S&&ii({},"Unexpected token %0","ILLEGAL");return{type:8,value:qa,octal:F,start:Da,end:Vf}}return 46===S?ai(Xh.charCodeAt(Vf+1))?Sk():Wl():ai(S)?Sk():Wl()}function mk(){const S=Ak;Vf=S.end;Ak=Pk();Vf=S.end;return S}function Ni(){const S=Vf;Ak=Pk();Vf=S}function vl(S,Da,F){const qa=new Rj("||"===S||"\x26\x26"===S?"LogicalExpression":"BinaryExpression");qa.operator=S;qa.left=Da;qa.right=F;return qa}function Bl(S){const Da=
new Rj("Identifier");Da.name=S;return Da}function Qj(S){const Da=new Rj("Literal");Da.value=S.value;Da.raw=Xh.slice(S.start,S.end);S.regex&&("//"===Da.raw&&(Da.raw="/(?:)/"),Da.regex=S.regex);return Da}function Rl(S,Da,F){const qa=new Rj("MemberExpression");qa.computed="["===S;qa.object=Da;qa.property=F;qa.computed||(F.member=!0);return qa}function cm(S,Da,F){const qa=new Rj("Property");qa.key=Da;qa.value=F;qa.kind=S;return qa}function ii(S,Da){var F=Array.prototype.slice.call(arguments,2),qa=Da.replace(/%(\d)/g,
(nb,Db)=>{si(Db<F.length,"Message reference must be in range");return F[Db]});var Fa=Error(qa);Fa.index=Vf;Fa.description=qa;throw Fa;}function Cl(S){2===S.type&&ii(S,"Unexpected end of input");6===S.type&&ii(S,"Unexpected number");8===S.type&&ii(S,"Unexpected string");3===S.type&&ii(S,"Unexpected identifier");4===S.type&&ii(S,"Unexpected reserved word");ii(S,"Unexpected token %0",S.value)}function Lk(S){const Da=mk();7===Da.type&&Da.value===S||Cl(Da)}function uj(S){return 7===Ak.type&&Ak.value===
S}function ml(){Vf=Ak.start;const S=mk();return 8===S.type||6===S.type?(S.octal&&ii(S,"Octal literals are not allowed in strict mode."),Qj(S)):Bl(S.value)}function Tj(){if(uj("(")){Lk("(");var S=zl();Lk(")");return S}if(uj("[")){S=[];Vf=Ak.start;for(Lk("[");!uj("]");)uj(",")?(mk(),S.push(null)):(S.push(nl()),uj("]")||Lk(","));mk();var Da=new Rj("ArrayExpression");Da.elements=S;return Da}if(uj("{")){S=[];Da={};var F=String;Vf=Ak.start;for(Lk("{");!uj("}");){Vf=Ak.start;var qa=Ak;if(3===qa.type){var Fa=
ml();Lk(":");qa=nl();qa=cm("init",Fa,qa)}else 2===qa.type||7===qa.type?(Cl(qa),qa=void 0):(Fa=ml(),Lk(":"),qa=nl(),qa=cm("init",Fa,qa));Fa="Identifier"===qa.key.type?qa.key.name:F(qa.key.value);Fa="$"+Fa;Object.prototype.hasOwnProperty.call(Da,Fa)?ii({},"Duplicate data property in object literal not allowed in strict mode"):Da[Fa]=!0;S.push(qa);uj("}")||Lk(",")}Lk("}");Da=new Rj("ObjectExpression");Da.properties=S;return Da}S=Ak.type;Vf=Ak.start;if(3===S||wq[Ak.value])Da=Bl(mk().value);else if(8===
S||6===S)Ak.octal&&ii(Ak,"Octal literals are not allowed in strict mode."),Da=Qj(mk());else{if(4===S)throw Error("Disabled.");if(1===S)S=mk(),S.value="true"===S.value,Da=Qj(S);else if(5===S)S=mk(),S.value=null,Da=Qj(S);else if(uj("/")||uj("/\x3d")){var nb;Ak=null;ti();S=Vf;Da=Xh[Vf];si("/"===Da,"Regular expression literal must start with a slash");F=Xh[Vf++];for(Fa=qa=!1;Vf<qm;)if(Da=Xh[Vf++],F+=Da,"\\"===Da)Da=Xh[Vf++],xh(Da.charCodeAt(0))&&ii({},"Invalid regular expression: missing /"),F+=Da;else if(xh(Da.charCodeAt(0)))ii({},
"Invalid regular expression: missing /");else if(qa)"]"===Da&&(qa=!1);else if("/"===Da){Fa=!0;break}else"["===Da&&(qa=!0);Fa||ii({},"Invalid regular expression: missing /");Da=F.substr(1,F.length-2);for(nb=Fa="";Vf<qm;){qa=Xh[Vf];if(!Bh(qa.charCodeAt(0)))break;++Vf;"\\"===qa&&Vf<qm?ii({},"Unexpected token %0","ILLEGAL"):(nb+=qa,Fa+=qa)}0<=nb.search(/[^gimuy]/g)&&ii({},"Invalid regular expression",nb);qa=nb;nb=Nj(Da,qa);Da=Qj({literal:F+Fa,value:nb,regex:{pattern:Da,flags:qa},start:S,end:Vf});Ni()}else Cl(mk())}return Da}
function Ek(){var S;for(S=Tj();;)if(uj(".")){Lk(".");Vf=Ak.start;var Da=mk();3===Da.type||4===Da.type||1===Da.type||5===Da.type||Cl(Da);Da=Bl(Da.value);S=Rl(".",S,Da)}else if(uj("(")){Da=[];Lk("(");if(!uj(")"))for(;Vf<qm;){Da.push(nl());if(uj(")"))break;Lk(",")}Lk(")");const F=new Rj("CallExpression");F.callee=S;F.arguments=Da;S=F}else if(uj("["))Lk("["),Da=zl(),Lk("]"),S=Rl("[",S,Da);else break;if(7===Ak.type&&(uj("++")||uj("--")))throw Error("Disabled.");return S}function Mk(){if(7!==Ak.type&&4!==
Ak.type)var S=Ek();else{if(uj("++")||uj("--"))throw Error("Disabled.");if(uj("+")||uj("-")||uj("~")||uj("!")){var Da=mk();S=Mk();Da=Da.value;const F=new Rj("UnaryExpression");F.operator=Da;F.argument=S;F.prefix=!0;S=F}else{if(4===Ak.type&&"delete"===Ak.value||4===Ak.type&&"void"===Ak.value||4===Ak.type&&"typeof"===Ak.value)throw Error("Disabled.");S=Ek()}}return S}function Nk(S){let Da=0;if(7!==S.type&&4!==S.type)return 0;switch(S.value){case "||":Da=1;break;case "\x26\x26":Da=2;break;case "|":Da=
3;break;case "^":Da=4;break;case "\x26":Da=5;break;case "\x3d\x3d":case "!\x3d":case "\x3d\x3d\x3d":case "!\x3d\x3d":Da=6;break;case "\x3c":case "\x3e":case "\x3c\x3d":case "\x3e\x3d":case "instanceof":case "in":Da=7;break;case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":Da=8;break;case "+":case "-":Da=9;break;case "*":case "/":case "%":Da=11}return Da}function nl(){var S=Ak;var Da=Mk();var F=Ak;var qa=Nk(F);if(0===qa)var Fa=Da;else{F.prec=qa;mk();S=[S,Ak];var nb=Mk();for(Fa=[Da,F,nb];0<(qa=Nk(Ak));){for(;2<
Fa.length&&qa<=Fa[Fa.length-2].prec;)nb=Fa.pop(),F=Fa.pop().value,Da=Fa.pop(),S.pop(),Da=vl(F,Da,nb),Fa.push(Da);F=mk();F.prec=qa;Fa.push(F);S.push(Ak);Da=Mk();Fa.push(Da)}qa=Fa.length-1;Da=Fa[qa];for(S.pop();1<qa;)S.pop(),Da=vl(Fa[qa-1].value,Fa[qa-2],Da),qa-=2;Fa=Da}uj("?")&&(mk(),S=nl(),Lk(":"),qa=nl(),Da=new Rj("ConditionalExpression"),Da.test=Fa,Da.consequent=S,Da.alternate=qa,Fa=Da);return Fa}function zl(){const S=nl();if(uj(","))throw Error("Disabled.");return S}function sb(S){Xh=S;Vf=0;qm=
Xh.length;Ak=null;Ni();S=zl();if(2!==Ak.type)throw Error("Unexpect token after expression.");return S}function Yb(S){const Da=[];if("Identifier"===S.type)return[S.name];if("Literal"===S.type)return[S.value];"MemberExpression"===S.type&&(Da.push(...Yb(S.object)),Da.push(...Yb(S.property)));return Da}function ic(S){return"MemberExpression"===S.object.type?ic(S.object):"datum"===S.object.name}function Oc(S){S=sb(S);const Da=new Set;S.visit(F=>{"MemberExpression"===F.type&&ic(F)&&Da.add(Yb(F).slice(1).join("."))});
return Da}function Id(S,Da){const F={},qa=S.config.selection;for(const Db of jc(null!==Da&&void 0!==Da?Da:{})){const Nb=vb(Da[Db]);var Fa=Object.assign({},qa[Nb.type]);Fa=(delete Fa.fields,delete Fa.encodings,Fa);for(const Xc in Fa)if(!("encodings"===Xc&&Nb.fields||"fields"===Xc&&Nb.encodings)&&("mark"===Xc&&(Nb[Xc]=Object.assign({},Fa[Xc],Nb[Xc])),void 0===Nb[Xc]||!0===Nb[Xc])){var nb;Nb[Xc]=null!==(nb=Fa[Xc])&&void 0!==nb?nb:Nb[Xc]}Fa=la(Db);const Gc=F[Fa]=Object.assign({},Nb,{name:Fa,events:G(Nb.on)?
jl(Nb.on,"scope"):vb(Nb.on)});Qf(Gc,Xc=>{Xc.has(Gc)&&Xc.parse&&Xc.parse(S,Gc,Nb,Da[Db])})}return F}function Od(S,Da,F,qa){qa=void 0===qa?"datum":qa;const Fa=[];Da=Ia(Da,function(nb){var Db=la(nb);nb=S.getSelectionComponent(Db,nb);Db=Y(Db+"_store");if(nb.project.timeUnit){const Nb=null!==F&&void 0!==F?F:S.component.data.raw,Gc=nb.project.timeUnit.clone();Nb.parent?Gc.insertAsParentOf(Nb):Nb.parent=Gc}"none"!==nb.empty&&Fa.push(Db);return"vlSelectionTest(".concat(Db,", ").concat(qa)+("global"===nb.resolve?
")":", ".concat(Y(nb.resolve),")"))});return(Fa.length?"!("+Fa.map(nb=>"length(data(".concat(nb,"))")).join(" || ")+") || ":"")+"(".concat(Da,")")}function Jd(S,Da){const F=Da.encoding;let qa=Da.field;if(!F&&!qa)qa=S.project.items[0].field,1<S.project.items.length&&Wd('A "field" or "encoding" must be specified when using a selection as a scale domain. '+'Using "field": '.concat(Y(qa),"."));else if(F&&!qa){const Fa=S.project.items.filter(nb=>nb.channel===F);!Fa.length||1<Fa.length?(qa=S.project.items[0].field,
Wd((Fa.length?"Multiple ":"No ")+"matching ".concat(Y(F)," encoding found for selection ").concat(Y(Da.selection),". ")+'Using "field": '.concat(Y(qa),"."))):qa=Fa[0].field}return"".concat(S.name,"[").concat(Y(qa),"]")}function fe(S,Da){sh(S,F=>{const qa=F.name,Fa=S.getName("lookup_".concat(qa));S.component.data.outputNodes[Fa]=F.materialized=new ym(new Hn(Da,S,{selection:qa}),Fa,fl.Lookup,S.component.data.outputNodeRefCounts)})}function He(S,Da,F){return Ia(Da,qa=>G(qa)?qa:(null===qa||void 0===qa?
0:qa.selection)?Od(S,qa.selection,F):rg(qa))}function ef(S,Da){if(S)return Jh(S)&&!Ue(S)?S.map(F=>Df(F,Da)).join(", "):S}function Mf(S,Da,F,qa){var Fa,nb,Db;S.encode=null!==(Fa=S.encode)&&void 0!==Fa?Fa:{};S.encode[Da]=null!==(nb=S.encode[Da])&&void 0!==nb?nb:{};S.encode[Da].update=null!==(Db=S.encode[Da].update)&&void 0!==Db?Db:{};S.encode[Da].update[F]=qa}function Je(S,Da,F,qa){qa=void 0===qa?{header:!1}:qa;var Fa=S.combine(),nb=Object.assign({},Fa),Db=Fa.disable;const Nb=Fa.orient,Gc=Fa.scale,
Xc=Fa.labelExpr,Ad=Fa.title;Fa=Fa.zindex;nb=(delete nb.disable,delete nb.orient,delete nb.scale,delete nb.labelExpr,delete nb.title,delete nb.zindex,nb);if(!Db){for(const Le in nb){var Fd=E[Le];Db=nb[Le];if(Fd&&Fd!==Da&&"both"!==Fd)delete nb[Le];else if(fb(Db)){Fd=Db;Db=Object.assign({},Fd);Fd=Fd.condition;Db=(delete Db.condition,Db);Fd=V(Fd);const pf=sa[Le];if(pf){const {vgProp:kg,part:Ig}=pf;Db=[...Fd.map(Yg=>{var pj=Object.assign({},Yg);Yg=Yg.test;pj=(delete pj.test,pj);return Object.assign({},
{test:He(null,Yg)},pj)}),Db];Mf(nb,Ig,kg,Db);delete nb[Le]}else null===pf&&(Db={signal:Fd.map(kg=>{var Ig=Object.assign({},kg);kg=kg.test;Ig=(delete Ig.test,Ig);return"".concat(He(null,kg)," ? ").concat(ne(Ig)," : ")}).join("")+ne(Db)},nb[Le]=Db)}else if(Zc(Db)&&(Fd=sa[Le])){const {vgProp:pf,part:kg}=Fd;Mf(nb,kg,pf,Db);delete nb[Le]}}if("grid"===Da){if(nb.grid)return nb.encode&&({grid:F}=nb.encode,nb.encode=Object.assign({},F?{grid:F}:{}),D(nb.encode)&&delete nb.encode),Object.assign({},{scale:Gc,
orient:Nb},nb,{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Ha(Fa,0)})}else if(qa.header||!S.mainExtracted){if(void 0!==Xc){var le,We;Da=Xc;(null===(le=nb.encode)||void 0===le?0:null===(We=le.labels)||void 0===We?0:We.update)&&Zc(nb.encode.labels.update.text)&&(Da=Ya(Xc,"datum.label",nb.encode.labels.update.text.signal));Mf(nb,"labels","text",{signal:Da})}null===nb.labelAlign&&delete nb.labelAlign;if(nb.encode){for(const Le of Ja)S.hasAxisPart(Le)||delete nb.encode[Le];D(nb.encode)&&
delete nb.encode}S=ef(Ad,F);return Object.assign({},{scale:Gc,orient:Nb,grid:!1},S?{title:S}:{},nb,!1===F.aria?{aria:!1}:{},{zindex:Ha(Fa,0)})}}}function Xf(S){const {axes:Da}=S.component,F=[];for(const qa of rh)if(Da[qa])for(const Fa of Da[qa])if(!Fa.get("disable")&&!Fa.get("gridScale")){const nb="x"===qa?"height":"width",Db=S.getSizeSignalRef(nb).signal;nb!==Db&&F.push({name:nb,update:Db})}return F}function Bg(S,Da){const {x:F=[],y:qa=[]}=S;return[...F.map(Fa=>Je(Fa,"grid",Da)),...qa.map(Fa=>Je(Fa,
"grid",Da)),...F.map(Fa=>Je(Fa,"main",Da)),...qa.map(Fa=>Je(Fa,"main",Da))].filter(Fa=>Fa)}function yh(S,Da,F,qa){return Object.assign.apply(null,[{},...S.map(Fa=>{if("axisOrient"===Fa){Fa="x"===F?"bottom":"left";const nb=Da["x"===F?"axisBottom":"axisLeft"]||{},Db=Da["x"===F?"axisTop":"axisRight"]||{},Nb=new Set([...jc(nb),...jc(Db)]),Gc={};for(const Xc of Nb.values())Gc[Xc]={signal:"".concat(qa.signal,' \x3d\x3d\x3d "').concat(Fa,'" ? ').concat(wf(nb[Xc])," : ").concat(wf(Db[Xc]))};return Gc}return Da[Fa]})])}
function Tg(S,Da,F,qa){var Fa="band"===Da?["axisDiscrete","axisBand"]:"point"===Da?["axisDiscrete","axisPoint"]:Da in Kd?["axisQuantitative"]:"time"===Da||"utc"===Da?["axisTemporal"]:[];const nb="x"===S?"axisX":"axisY";Da=Zc(F)?"axisOrient":"axis"+Ta(F);Fa=[...Fa,...Fa.map(Db=>nb+Db.substr(4))];Da=["axis",Da,nb];return{vlOnlyAxisConfig:yh(Fa,qa,S,F),vgAxisConfig:yh(Da,qa,S,F),axisConfigStyle:Qh([...Da,...Fa],qa)}}function Qh(S,Da){const F=[{}];for(const Fa of S){var qa;if(S=null===(qa=Da[Fa])||void 0===
qa?void 0:qa.style){S=V(S);for(const nb of S)F.push(Da.style[nb])}}return Object.assign.apply(null,F)}function yi(S,Da,F,qa){qa=void 0===qa?{}:qa;Da=of(S,F,Da);if(void 0!==Da)return{configFrom:"style",configValue:Da};for(const nb of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"]){var Fa;if(void 0!==(null===(Fa=qa[nb])||void 0===Fa?void 0:Fa[S]))return{configFrom:nb,configValue:qa[nb][S]}}return{}}function ki(S,Da,F,qa,Fa){const nb=null===Da||void 0===Da?void 0:Da.labelAngle;if(void 0!==nb)return Zc(nb)?
nb:Ka(nb);({configValue:Da}=yi("labelAngle",qa,null===Da||void 0===Da?void 0:Da.style,Fa));if(void 0!==Da)return Ka(Da);if("x"===F&&fa(["nominal","ordinal"],S.type)&&(!Lf(S)||!S.timeUnit))return 270}function th(S){return"(((".concat(S.signal," % 360) + 360) % 360)")}function Xk(S,Da,F,qa){if(void 0!==S)return"x"===F?Zc(S)?(qa=th(S),Da=Zc(Da)?"(".concat(Da.signal,' \x3d\x3d\x3d "top")'):"top"===Da,{signal:"(45 \x3c ".concat(qa," \x26\x26 ").concat(qa," \x3c 135) || (225 \x3c ").concat(qa," \x26\x26 ").concat(qa,
' \x3c 315) ? "middle" :')+"(".concat(qa," \x3c\x3d 45 || 315 \x3c\x3d ").concat(qa,") \x3d\x3d\x3d ").concat(Da,' ? "bottom" : "top"')}):45<S&&135>S||225<S&&315>S?"middle":Zc(Da)?(qa=45>=S||315<=S?"\x3d\x3d\x3d":"!\x3d\x3d",{signal:"".concat(Da.signal," ").concat(qa,' "top" ? "bottom" : "top"')}):(45>=S||315<=S)===("top"===Da)?"bottom":"top":Zc(S)?(S=th(S),Da=Zc(Da)?"(".concat(Da.signal,' \x3d\x3d\x3d "left")'):"left"===Da,qa=qa?'"middle"':"null",{signal:"".concat(S," \x3c\x3d 45 || 315 \x3c\x3d ").concat(S,
" || (135 \x3c\x3d ").concat(S," \x26\x26 ").concat(S," \x3c\x3d 225) ? ").concat(qa," : (45 \x3c\x3d ").concat(S," \x26\x26 ").concat(S," \x3c\x3d 135) \x3d\x3d\x3d ").concat(Da,' ? "top" : "bottom"')}):45>=S||315<=S||135<=S&&225>=S?qa?"middle":null:Zc(Da)?(qa=45<=S&&135>=S?"\x3d\x3d\x3d":"!\x3d\x3d",{signal:"".concat(Da.signal," ").concat(qa,' "left" ? "top" : "bottom"')}):(45<=S&&135>=S)===("left"===Da)?"top":"bottom"}function Uh(S,Da,F){if(void 0!==S){var qa=(F="x"===F)?0:90,Fa=F?"bottom":"left";
return Zc(S)?(S=th(S),Da=Zc(Da)?"(".concat(Da.signal,' \x3d\x3d\x3d "').concat(Fa,'")'):Da===Fa,{signal:"(".concat(qa?"("+S+" + 90)":S," % 180 \x3d\x3d\x3d 0) ? ").concat(F?null:'"center"'," :")+"(".concat(qa," \x3c ").concat(S," \x26\x26 ").concat(S," \x3c ").concat(180+qa,") \x3d\x3d\x3d ").concat(Da,' ? "left" : "right"')}):0===(S+qa)%180?F?null:"center":Zc(Da)?(F=qa<S&&S<180+qa?"\x3d\x3d\x3d":"!\x3d\x3d",Da="".concat(Da.signal," ").concat(F,' "').concat(Fa,'"'),{signal:"".concat(Da,' ? "left" : "right"')}):
(qa<S&&S<180+qa)===(Da===Fa)?"left":"right"}}function Rh(S,Da){var F="x"===Da?"x2":"y2";Da=S.fieldDef(Da);S=S.fieldDef(F);F=Da?Da.title:void 0;S=S?S.title:void 0;if(F&&S)return Fi(F,S);if(F)return F;if(S)return S;if(void 0!==F)return F;if(void 0!==S)return S}function Ej(S,Da,F){return qb(S,Object.assign({},{prefix:Da,suffix:"sort_index"},null!==F&&void 0!==F?F:{}))}function dm(S,Da){return fa(["top","bottom"],Da)?"column":fa(["left","right"],Da)?"row":"row"===S?"row":"column"}function bh(S,Da,F,qa){return Ha((Da||
{})[S],("row"===qa?F.headerRow:"column"===qa?F.headerColumn:F.headerFacet)[S],F.header[S])}function Nf(S,Da,F,qa){const Fa={};for(const nb of S)S=bh(nb,Da||{},F,qa),void 0!==S&&(Fa[nb]=S);return Fa}function ch(S,Da,F){switch(void 0===F?"middle":F){case "start":return{align:"left"};case "end":return{align:"right"}}return(S=Uh(Da,"row"===S?"left":"top","row"===S?"y":"x"))?{align:S}:{}}function Cg(S,Da){return(S=Xk(S,"row"===Da?"left":"top","row"===Da?"y":"x",!0))?{baseline:S}:{}}function Ki(S,Da,F){const {format:qa,
formatType:Fa,labelAngle:nb,labelAnchor:Db,labelOrient:Nb,labelExpr:Gc}=Nf("format formatType labelAngle labelAnchor labelOrient labelExpr".split(" "),S.header,F,Da),Xc=Ag({fieldOrDatumDef:S,format:qa,formatType:Fa,expr:"parent",config:F}).signal,Ad=dm(Da,Nb);return Object.assign({},{text:{signal:Gc?Ya(Ya(Gc,"datum.label",Xc),"datum.value",qb(S,{expr:"parent"})):Xc}},"row"===Da?{orient:"left"}:{},{style:"guide-label",frame:"group"},Cg(nb,Ad),ch(Ad,nb,Db),bk(F,S,Da,mg,$e))}function bk(S,Da,F,qa,Fa){const nb=
{};for(const Db of qa)Fa[Db]&&(qa=bh(Db,null===Da||void 0===Da?void 0:Da.header,S,F),void 0!==qa&&(nb[Fa[Db]]=qa));return nb}function ui(S){return[...Ci(S,"width"),...Ci(S,"height"),...Ci(S,"childWidth"),...Ci(S,"childHeight")]}function Ci(S,Da){var F="width"===Da?"x":"y",qa=S.component.layoutSize.get(Da);if(!qa||"merged"===qa)return[];Da=S.getSizeSignalRef(Da).signal;if("step"===qa){if(qa=S.getScaleComponent(F)){var Fa=qa.get("type");const nb=qa.get("range");if(Fa in jg&&rd(nb))return Fa=S.scaleName(F),
kk(S.parent)&&"independent"===S.parent.component.resolve.scale[F]?[{name:Fa+"_step",value:nb.step}]:[{name:Fa+"_step",value:nb.step},{name:Da,update:fi(Fa,qa,"domain('".concat(Fa,"').length"))}]}throw Error("layout size is step although width/height is not step.");}return"container"==qa?(F=(qa=Da.endsWith("width"))?"containerSize()[0]":"containerSize()[1]",S=Oa(S.config.view,qa?"width":"height"),S="isFinite(".concat(F,") ? ").concat(F," : ").concat(S),[{name:Da,init:S,on:[{update:S,events:"window:resize"}]}]):
[{name:Da,value:qa}]}function fi(S,Da,F){const qa=Da.get("type"),Fa=Da.get("padding"),nb=Ha(Da.get("paddingOuter"),Fa);Da=Da.get("paddingInner");Da="band"===qa?void 0!==Da?Da:Fa:1;return"bandspace(".concat(F,", ").concat(wf(Da),", ").concat(wf(nb),") * ").concat(S,"_step")}function mj(S){return"childWidth"===S?"width":"childHeight"===S?"height":S}function fj(S,Da){return jc(S).reduce((F,qa)=>Object.assign({},F,rl(Da,S[qa],qa,Fa=>vf(Fa.value))),{})}function ak(S,Da){const F=Da in df?"axis":"legend";
return"independent"===S.scale[Da]?("shared"===S[F][Da]&&Wd('Setting the scale to be independent for "'.concat(Da,'" means we also have to set the guide (axis or legend) to be independent.')),"independent"):S[F][Da]||"shared"}function Wk(S){return Rk(S,(Da,F)=>Math.max(Da,F.value))}function Oi(S){return Rk(S,(Da,F)=>Ha(Da,F.value))}function Rk(S,Da){const F=S&&S.condition;if(F&&(Jh(F)||Vb(F)))return V(S.condition).reduce(Da,S.value);if(Vb(S))return S.value}function lm(S,Da,F){S=Da.get("selections");
if(null!==S&&void 0!==S&&S.length){var qa=Y(F.field);return S.map(Fa=>{const nb=Y(la(Fa)+"_store");return"(!length(data(".concat(nb,")) || (").concat(Fa,"[").concat(qa,"] \x26\x26 indexof(").concat(Fa,"[").concat(qa,"], datum.value) \x3e\x3d 0))")}).join(" || ")}}function Ul(S,Da,F,qa){S=S.getSizeSignalRef(Da).signal;return{signal:"clamp(".concat(S,", ").concat(F,", ").concat(qa,")")}}function Bj(S){var Da;if(Ij(S)){var {encoding:F}=S,qa={};for(const Li of["color",...Vh]){var Fa=Pd(F[Li]);if(Fa&&
S.getScaleComponent(Li)&&("shape"!==Li||!Lf(Fa)||"geojson"!==Fa.type)){a:{var nb=Fa=void 0,Db=void 0,Nb=void 0,Gc=void 0;var Xc=void 0;var Ad=S,Fd=Li;let Xi=Ad.legend(Fd);const {markDef:ej,encoding:bl,config:Hl}=Ad;var le=Hl.legend;b:{var We=Ad;var Le=Fd,pf=We.scaleName(Le);if("trail"===We.mark){if("color"===Le){We={stroke:pf};break b}if("size"===Le){We={strokeWidth:pf};break b}}We="color"===Le?We.markDef.filled?{fill:pf}:{stroke:pf}:{[Le]:pf}}We=new xq({},We);te(Ad,Fd,We);Le=void 0!==Xi?!Xi:le.disable;
We.set("disable",Le,void 0!==Xi);if(Le){Fa=We;break a}Xi=Xi||{};pf=Ad.getScaleComponent(Fd).get("type");Le=Pd(bl[Fd]);var kg=Lf(Le)?null===(Xc=lc(Le.timeUnit))||void 0===Xc?void 0:Xc.unit:void 0;const xl=Xi.orient||Hl.legend.orient||"right";Xc={legend:Xi,channel:Fd,timeUnit:kg,scaleType:pf};({legend:kg}=Xc);kg=kg.type;b:{var {channel:Ig,timeUnit:Yg,scaleType:pj}=Xc;if(Ic(Ig)){if(fa(["quarter","month","day"],Yg)){Xc="symbol";break b}if(pj in Hd){Xc="gradient";break b}}Xc="symbol"}Xc=Ha(kg,Xc);var {legendConfig:yg,
legendType:Jg,orient:Fh,legend:nk}={legend:Xi,legendType:Xc,orient:xl,legendConfig:le};if(null!==(Db=null!==(nb=nk.direction)&&void 0!==nb?nb:yg[Jg?"gradientDirection":"symbolDirection"])&&void 0!==Db)nb=Db;else b:{switch(Fh){case "top":case "bottom":nb="horizontal";break b;case "left":case "right":case "none":case void 0:break;default:nb="gradient"===Jg?"horizontal":void 0;break b}nb=void 0}le={legend:Xi,channel:Fd,model:Ad,markDef:ej,encoding:bl,fieldOrDatumDef:Le,legendConfig:le,config:Hl,scaleType:pf,
orient:xl,legendType:Xc,direction:nb};for(const ok of In)if(!("gradient"===Xc&&ok.startsWith("symbol")||"symbol"===Xc&&ok.startsWith("gradient"))&&(nb=ok in Cp?Cp[ok](le):Xi[ok],void 0!==nb)){b:{Db=Ad.fieldDef(Fd);switch(ok){case "disable":Db=void 0!==Xi;break b;case "values":Db=!(null===Xi||void 0===Xi||!Xi.values);break b;case "title":if("title"===ok&&nb===(null===Db||void 0===Db?void 0:Db.title)){Db=!0;break b}}Db=nb===(Xi||{})[ok]}(Db||void 0===Hl.legend[ok])&&We.set(ok,nb,Db)}le=null!==(Gc=null===
(Nb=Xi)||void 0===Nb?void 0:Nb.encoding)&&void 0!==Gc?Gc:{};Nb=We.get("selections");Gc={};Fd={fieldOrDatumDef:Le,model:Ad,channel:Fd,legendCmpt:We,legendType:Xc};for(const ok of"labels legend title symbols gradient entries".split(" "))nb=fj(null!==(Da=le[ok])&&void 0!==Da?Da:{},Ad),nb=ok in yq?yq[ok](nb,Fd):nb,void 0===nb||D(nb)||(Gc[ok]=Object.assign({},(null===Nb||void 0===Nb?0:Nb.length)&&Lf(Le)?{name:"".concat(la(Le.field),"_legend_").concat(ok)}:{},(null===Nb||void 0===Nb?0:Nb.length)?{interactive:!!Nb}:
{},{update:nb}));D(Gc)||We.set("encode",Gc,!(null===(Fa=Xi)||void 0===Fa||!Fa.encoding));Fa=We}qa[Li]=Fa}}Da=qa}else{const {legends:Li,resolve:Xi}=S.component;for(F of S.children){Bj(F);for(qa of jc(F.component.legends))Xi.legend[qa]=ak(S.component.resolve,qa),"shared"===Xi.legend[qa]&&(Li[qa]=el(Li[qa],F.component.legends[qa]),Li[qa]||(Xi.legend[qa]="independent",delete Li[qa]))}for(Fa of jc(Li))for(Ad of S.children)Ad.component.legends[Fa]&&"shared"===Xi.legend[Fa]&&delete Ad.component.legends[Fa];
Da=Li}return S.component.legends=Da}function el(S,Da){if(!S)return Da.clone();var F=S.getWithExplicit("orient");const qa=Da.getWithExplicit("orient");if(!F.explicit||!qa.explicit||F.value===qa.value){var Fa=!1;for(const Xc of In)F=Ji(S.getWithExplicit(Xc),Da.getWithExplicit(Xc),Xc,"legend",(Ad,Fd)=>{switch(Xc){case "symbolType":return Ad="circle"===Fd.value?Fd:Ad,Ad;case "title":return Nh(Ad,Fd);case "type":return Fa=!0,ci("symbol")}return sk(Ad,Fd,Xc,"legend")}),S.setWithExplicit(Xc,F);if(Fa){var nb,
Db,Nb,Gc;(null===(nb=S.implicit)||void 0===nb?0:null===(Db=nb.encode)||void 0===Db?0:Db.gradient)&&Ma(S.implicit,["encode","gradient"]);(null===(Nb=S.explicit)||void 0===Nb?0:null===(Gc=Nb.encode)||void 0===Gc?0:Gc.gradient)&&Ma(S.explicit,["encode","gradient"])}return S}}function ik(S){const Da=S.component.legends,F={};for(const Fa of jc(Da)){var qa=S.getScaleComponent(Fa);qa=fc(qa.get("domains"));if(F[qa])for(const nb of F[qa])el(nb,Da[Fa])||F[qa].push(Da[Fa]);else F[qa]=[Da[Fa].clone()]}return Fc(F).flat().map(Fa=>
{{var nb=S.config,Db,Nb=Fa.combine();Fa=Object.assign({},Nb);const Le=Nb.disable;Nb=Nb.labelExpr;Fa=(delete Fa.disable,delete Fa.labelExpr,delete Fa.selections,Fa);if(Le)var Gc=void 0;else{!1===nb.aria&&void 0==Fa.aria&&(Fa.aria=!1);if(null===(Db=Fa.encode)||void 0===Db?0:Db.symbols){nb=Fa.encode.symbols.update;!nb.fill||"transparent"===nb.fill.value||nb.stroke||Fa.stroke||(nb.stroke={value:"transparent"});for(var Xc of Vh)Fa[Xc]&&delete nb[Xc]}Fa.title||delete Fa.title;if(void 0!==Nb){var Ad,Fd;
Xc=Nb;(null===(Ad=Fa.encode)||void 0===Ad?0:null===(Fd=Ad.labels)||void 0===Fd?0:Fd.update)&&Zc(Fa.encode.labels.update.text)&&(Xc=Ya(Nb,"datum.label",Fa.encode.labels.update.text.signal));Ad=Fa;Fd={signal:Xc};var le,We;Ad.encode=null!==(Gc=Ad.encode)&&void 0!==Gc?Gc:{};Ad.encode.labels=null!==(le=Ad.encode.labels)&&void 0!==le?le:{};Ad.encode.labels.update=null!==(We=Ad.encode.labels.update)&&void 0!==We?We:{};Ad.encode.labels.update.text=Fd}Gc=Fa}}return Gc}).filter(Fa=>void 0!==Fa)}function Wg(S){return S.children.reduce((Da,
F)=>Da.concat(F.assembleProjections()),Dl(S))}function Dl(S){var Da=S.component.projection;if(!Da||Da.merged)return[];const F=Da.combine(),{name:qa}=F;if(Da.data){const Fa={signal:"[".concat(Da.size.map(nb=>nb.signal).join(", "),"]")};Da=Da.data.reduce((nb,Db)=>{Db=Zc(Db)?Db.signal:"data('".concat(S.lookupDataSource(Db),"')");fa(nb,Db)||nb.push(Db);return nb},[]);if(0>=Da.length)throw Error("Projection's fit didn't find any data sources");return[Object.assign({},{name:qa,size:Fa,fit:{signal:1<Da.length?
"[".concat(Da.join(", "),"]"):Da[0]}},F)]}return[Object.assign({},{name:qa},{translate:{signal:"[width / 2, height / 2]"}},F)]}function em(S){var Da=S.component;if(Ij(S))if(S.hasProjection){var F;const nb=S.specifiedProjection;var qa=!(nb&&(null!=nb.scale||null!=nb.translate));const Db=qa?[S.getSizeSignalRef("width"),S.getSizeSignalRef("height")]:void 0;if(qa){qa=[];const {encoding:Nb}=S;for(Fa of[["longitude","latitude"],["longitude2","latitude2"]])(Pd(Nb[Fa[0]])||Pd(Nb[Fa[1]]))&&qa.push({signal:S.getName("geojson_".concat(qa.length))});
S.channelHasField("shape")&&"geojson"===S.typedFieldDef("shape").type&&qa.push({signal:S.getName("geojson_".concat(qa.length))});0===qa.length&&qa.push(S.requestDataName(fl.Main));var Fa=qa}else Fa=void 0;S=new zq(S.projectionName(!0),Object.assign({},null!==(F=S.config.projection)&&void 0!==F?F:{},null!==nb&&void 0!==nb?nb:{}),Db,Fa)}else S=void 0;else S=Fm(S);Da.projection=S}function Ml(S,Da){const F=ta(wo,qa=>!vk.call(S.explicit,qa)&&!vk.call(Da.explicit,qa)||vk.call(S.explicit,qa)&&vk.call(Da.explicit,
qa)&&fc(S.get(qa))===fc(Da.get(qa))?!0:!1);if(fc(S.size)===fc(Da.size)){if(F)return S;if(fc(S.explicit)===fc({}))return Da;if(fc(Da.explicit)===fc({}))return S}return null}function Fm(S){if(0!==S.children.length){var Da;for(var F of S.children)em(F);F=ta(S.children,qa=>{if(qa=qa.component.projection){if(Da)return(qa=Ml(Da,qa))&&(Da=qa),!!qa;Da=qa}return!0});if(Da&&F){F=S.projectionName(!0);const qa=new zq(F,Da.specifiedProjection,Da.size,vb(Da.data));for(const Fa of S.children)if(S=Fa.component.projection)S.isFit&&
qa.data.push(...Fa.component.projection.data),Fa.renameProjection(S.get("name"),F),S.merged=!0;return qa}}}function om(S,Da){return"".concat(Pb(S),"_").concat(Da)}function mm(S,Da,F){var qa;F=null!==(qa=Se(F,void 0))&&void 0!==qa?qa:{};Da=om(F,Da);return S.getName("".concat(Da,"_bins"))}function hm(S,Da,F){let qa;qa="as"in S?G(S.as)?[S.as,"".concat(S.as,"_end")]:[S.as[0],S.as[1]]:[qb(S,{forAs:!0}),qb(S,{binSuffix:"end",forAs:!0})];const Fa=Object.assign({},Se(Da,void 0));Da=om(Fa,S.field);var nb=
{signal:F.getName("".concat(Da,"_bins")),extentSignal:F.getName("".concat(Da,"_extent"))};const {signal:Db,extentSignal:Nb}=nb;if(Hb(Fa.extent)){var Gc=Fa.extent;nb=Gc.selection;Gc=Jd(F.getSelectionComponent(la(nb),nb),Gc);delete Fa.extent}S=Object.assign({},{bin:Fa,field:S.field,as:[qa]},Db?{signal:Db}:{},Nb?{extentSignal:Nb}:{},Gc?{span:Gc}:{});return{key:Da,binComponent:S}}function Gm(S){return"'"===S[0]&&"'"===S[S.length-1]||'"'===S[0]&&'"'===S[S.length-1]?S.slice(1,-1):S}function im(S,Da){S=
ab(S);if("number"===Da)return"toNumber(".concat(S,")");if("boolean"===Da)return"toBoolean(".concat(S,")");if("string"===Da)return"toString(".concat(S,")");if("date"===Da)return"toDate(".concat(S,")");if("flatten"===Da)return S;if(0===Da.indexOf("date:"))return Da=Gm(Da.slice(5,Da.length)),"timeParse(".concat(S,",'").concat(Da,"')");if(0===Da.indexOf("utc:"))return Da=Gm(Da.slice(4,Da.length)),"utcParse(".concat(S,",'").concat(Da,"')");Wd('Unrecognized parse "'.concat(Da,'".'));return null}function Om(S){const Da=
{};ja(S.filter,F=>{if(tf(F)){let Fa=null;if(he(F))Fa=Yf(F.equal);else if(qe(F))Fa=Yf(F.lte);else if(qd(F))Fa=Yf(F.lt);else if(we(F))Fa=Yf(F.gt);else if(Cd(F))Fa=Yf(F.gte);else if(sf(F))Fa=F.range[0];else if(Jf(F)){var qa;Fa=(null!==(qa=F.oneOf)&&void 0!==qa?qa:F["in"])[0]}Fa&&(Fe(Fa)?Da[F.field]="date":z(Fa)?Da[F.field]="number":G(Fa)&&(Da[F.field]="string"));F.timeUnit&&(Da[F.field]="date")}});return Da}function zk(S){function Da(qa){if(Xd(qa))F[qa.field]="date";else{var Fa;if(Fa="quantitative"===
qa.type)Fa=qa.aggregate,Fa=G(Fa)&&fa(["min","max"],Fa);Fa?F[qa.field]="number":1<Pa(qa.field)?qa.field in F||(F[qa.field]="flatten"):qc(qa)&&xg(qa.sort)&&1<Pa(qa.sort.field)&&(qa.sort.field in F||(F[qa.sort.field]="flatten"))}}const F={};(Ij(S)||kk(S))&&S.forEachFieldDef((qa,Fa)=>{Eb(qa)?Da(qa):(Fa=Wb(Fa),Fa=S.fieldDef(Fa),Da(Object.assign({},qa,{type:Fa.type})))});if(Ij(S)){const {mark:qa,markDef:Fa,encoding:nb}=S;if(ib(qa)&&!S.encoding.order){const Db=nb["horizontal"===Fa.orient?"y":"x"];!Lf(Db)||
"quantitative"!==Db.type||Db.field in F||(F[Db.field]="number")}}return F}function Xl(S){return S instanceof Jn||S instanceof Dp||S instanceof Ep}function Zl(S){return S.stack.stackBy.reduce((Da,F)=>{(F=qb(F.fieldDef))&&Da.push(F);return Da},[])}function cn(S){return Jh(S)&&S.every(Da=>G(Da))&&1<S.length}function Wh(S){function Da(F){if(!(F instanceof $n)){const qa=F.clone();if(qa instanceof ym){const Fa="scale_"+qa.getSource();qa.setSource(Fa);S.model.component.data.outputNodes[Fa]=qa}else(qa instanceof
gn||qa instanceof tn||qa instanceof yo||qa instanceof ao)&&qa.addDimensions(S.fields);for(const Fa of F.children.flatMap(Da))Fa.parent=qa;return[qa]}return F.children.flatMap(Da)}return Da}function El(S){if(S instanceof $n)if(1!==S.numChildren()||S.children[0]instanceof ym){var Da=S.model.component.data.main;Sj(Da);const F=Wh(S);S=S.children.map(F).flat();for(const qa of S)qa.parent=Da}else Da=S.children[0],(Da instanceof gn||Da instanceof tn||Da instanceof yo||Da instanceof ao)&&Da.addDimensions(S.fields),
Da.swapWithParent(),El(S);else S.children.map(El)}function Sj(S){if(S instanceof ym&&S.type===fl.Main&&1===S.numChildren()){const Da=S.children[0];Da instanceof $n||(Da.swapWithParent(),Sj(S))}}function Xj(S){for(const Da of S){for(const F of Da.children)if(F.parent!==Da)return!1;if(!Xj(Da.children))return!1}return!0}function Oj(S,Da){let F=!1;for(const qa of Da)F=S.optimize(qa)||F;return F}function tm(S,Da,F){let qa=S.sources,Fa=!1;Fa=Oj(new Cs,qa)||Fa;Fa=Oj(new Um(Da),qa)||Fa;qa=qa.filter(nb=>0<
nb.numChildren());Fa=Oj(new Ds,qa)||Fa;qa=qa.filter(nb=>0<nb.numChildren());F||(Fa=Oj(new xo,qa)||Fa,Fa=Oj(new Gr(Da),qa)||Fa,Fa=Oj(new Aq,qa)||Fa,Fa=Oj(new Bn,qa)||Fa,Fa=Oj(new Gp,qa)||Fa,Fa=Oj(new Es,qa)||Fa,Fa=Oj(new Bs,qa)||Fa,Fa=Oj(new Hp,qa)||Fa);S.sources=qa;return Fa}function fm(S){const Da=S.component.scales;for(const Xc of jc(Da)){var F=S,qa=Xc,Fa=F.getScaleComponent(qa).get("type"),{encoding:nb}=F;var Db=F.scaleDomain(qa);var Nb=F.typedFieldDef(qa),Gc=F.config.scale;if("unaggregated"===
Db){const {valid:Ad,reason:Fd}=uc(Nb,Fa);Ad||(Wd(Fd),Db=void 0)}else void 0===Db&&Gc.useUnaggregatedDomain&&({valid:Nb}=uc(Nb,Fa),Nb&&(Db="unaggregated"));Db!==F.scaleDomain(qa)&&(F.specifiedScales[qa]=Object.assign({},F.specifiedScales[qa],{domain:Db}));F="x"===qa&&Pd(nb.x2)?Pd(nb.x)?Ji(Ra(Fa,Db,F,"x"),Ra(Fa,Db,F,"x2"),"domain","scale",xc):Ra(Fa,Db,F,"x2"):"y"===qa&&Pd(nb.y2)?Pd(nb.y)?Ji(Ra(Fa,Db,F,"y"),Ra(Fa,Db,F,"y2"),"domain","scale",xc):Ra(Fa,Db,F,"y2"):Ra(Fa,Db,F,qa);Da[Xc].setWithExplicit("domains",
F);nb=void 0;qa=S.component.scales[Xc];Db=S.specifiedScales[Xc].domain;Fa=null===(nb=S.fieldDef(Xc))||void 0===nb?void 0:nb.bin;nb=Zg(Db)&&Db;Fa=N(Fa)&&Hb(Fa.extent)&&Fa.extent;(nb||Fa)&&qa.set("selectionExtent",null!==nb&&void 0!==nb?nb:Fa,!0);if(S.component.data.isFaceted){for(qa=S;!kk(qa)&&qa.parent;)qa=qa.parent;if("shared"===qa.component.resolve.scale[Xc])for(const Ad of F.value)Nd(Ad)&&(Ad.data="scale_"+Ad.data.replace("scale_",""))}}}function y(S){for(var Da of S.children){var F=Da;Ij(F)?fm(F):
y(F)}F=S.component.scales;for(const Fa of jc(F)){let nb;Da=null;for(const Db of S.children){var qa=Db.component.scales[Fa];qa&&(nb=void 0===nb?qa.getWithExplicit("domains"):Ji(nb,qa.getWithExplicit("domains"),"domains","scale",xc),qa=qa.get("selectionExtent"),Da&&qa&&Da.selection!==qa.selection&&Wd("The same selection must be used to override scale domains in a layered view."),Da=qa)}F[Fa].setWithExplicit("domains",nb);Da&&F[Fa].set("selectionExtent",Da,!0)}}function ma(S,Da,F){return S.map(qa=>{qa=
Ze(qa,{timeUnit:F,type:Da});return{signal:"{data: ".concat(qa,"}")}})}function Wa(S,Da,F){var qa;F=null===(qa=lc(F))||void 0===qa?void 0:qa.unit;return"temporal"===Da||F?ma(S,Da,F):[S]}function Ra(S,Da,F,qa){var {encoding:Fa}=F;Fa=Pd(Fa[qa]);const {type:nb}=Fa,Db=Fa.timeUnit;if(Da&&Da.unionWith)return qa=Ra(S,void 0,F,qa),Da=Wa(Da.unionWith,nb,Db),$k([...qa.value,...Da]);if(Zc(Da))return $k([Da]);if(Da&&"unaggregated"!==Da&&!Zg(Da))return $k(Wa(Da,nb,Db));var Nb=F.stack;if(Nb&&qa===Nb.fieldChannel){if("normalize"===
Nb.offset)return ci([[0,1]]);Da=F.requestDataName(fl.Main);return ci([{data:Da,field:F.vgField(qa,{suffix:"start"})},{data:Da,field:F.vgField(qa,{suffix:"end"})}])}Nb=gi[qa]&&Lf(Fa)?Tb(F,qa,S):void 0;if(ih(Fa))return qa=Wa([Fa.datum],nb,Db),ci(qa);if("unaggregated"===Da)return qa=F.requestDataName(fl.Main),{field:Da}=Fa,ci([{data:qa,field:qb({field:Da,aggregate:"min"})},{data:qa,field:qb({field:Da,aggregate:"max"})}]);if(nc(Fa.bin)){if(S in jg)return"bin-ordinal"===S?ci([]):ci([{data:R(Nb)?F.requestDataName(fl.Main):
F.requestDataName(fl.Raw),field:F.vgField(qa,Xe(Fa,qa)?{binSuffix:"range"}:{}),sort:!0!==Nb&&N(Nb)?Nb:{field:F.vgField(qa,{}),op:"min"}}]);({bin:Da}=Fa);if(nc(Da)){const Gc=mm(F,Fa.field,Da);return ci([new zm(()=>{const Xc=F.getSignalName(Gc);return"[".concat(Xc,".start, ").concat(Xc,".stop]")})])}return ci([{data:F.requestDataName(fl.Main),field:F.vgField(qa,{})}])}return Fa.timeUnit&&fa(["time","utc"],S)&&Gh(qa,Fa,Ij(F)?F.encoding[Kb(qa)]:void 0,F.stack,F.markDef,F.config)?(Da=F.requestDataName(fl.Main),
ci([{data:Da,field:F.vgField(qa)},{data:Da,field:F.vgField(qa,{suffix:"end"})}])):Nb?ci([{data:R(Nb)?F.requestDataName(fl.Main):F.requestDataName(fl.Raw),field:F.vgField(qa),sort:Nb}]):ci([{data:F.requestDataName(fl.Main),field:F.vgField(qa)}])}function kb(S,Da){const {op:F,field:qa,order:Fa}=S;return Object.assign({},{op:null!==F&&void 0!==F?F:Da?"sum":"min"},qa?{field:pb(qa)}:{},Fa?{order:Fa}:{})}function Tb(S,Da,F){if(F in jg){var qa=S.fieldDef(Da);F=qa.sort;if(dh(F))return{op:"min",field:Ej(qa,
Da),order:"ascending"};({stack:qa}=S);var Fa=qa?[...(qa.groupbyField?[qa.groupbyField]:[]),...qa.stackBy.map(nb=>nb.fieldDef.field)]:void 0;if(xg(F))return S=qa&&!fa(Fa,F.field),kb(F,S);if(F&&F.encoding){const {encoding:nb,order:Db}=F;S=S.fieldDef(nb);const {aggregate:Nb,field:Gc}=S;Da=qa&&!fa(Fa,Gc);if(La(Nb)||Bb(Nb))return kb({field:qb(S),order:Db},Da);if(Ob(Nb)||!Nb)return kb({op:Nb,field:Gc,order:Db},Da)}else{if("descending"===F)return{op:"min",field:S.vgField(Da),order:"descending"};if(fa(["ascending",
void 0],F))return!0}}}function uc(S,Da){const {aggregate:F,type:qa}=S;return F?G(F)&&!Ib[F]?{valid:!1,reason:'Unaggregated domain not applicable for "'.concat(F,'" since it produces values outside the origin domain of the source data.')}:"quantitative"===qa&&"log"===Da?{valid:!1,reason:"Unaggregated domain is currently unsupported for log scale (".concat(fc(S),").")}:{valid:!0}:{valid:!1,reason:"Using unaggregated domain with raw field has no effect (".concat(fc(S),").")}}function xc(S,Da,F,qa){if(S.explicit&&
Da.explicit){var Fa=S.value,nb=Da.value;F="Conflicting ".concat(qa.toString(),' property "').concat(F.toString(),'" (').concat(fc(Fa)," and ").concat(fc(nb),"). Using the union of the two domains.");Wd(F)}return{explicit:S.explicit,value:[...S.value,...Da.value]}}function dd(S){var Da=ha(S.map(Fa=>Nd(Fa)?(Fa=Object.assign({},Fa),delete Fa.sort,Fa):Fa),ba),F=ha(S.map(Fa=>{if(Nd(Fa))return Fa=Fa.sort,void 0===Fa||R(Fa)||("op"in Fa&&"count"===Fa.op&&delete Fa.field,"ascending"===Fa.order&&delete Fa.order),
Fa}).filter(Fa=>void 0!==Fa),ba);if(0!==Da.length){if(1===Da.length){Da=S[0];if(Nd(Da)&&0<F.length){var qa=F[0];1<F.length?(Wd("Domains that should be unioned has conflicting sort properties. Sort will be set to true."),qa=!0):N(qa)&&"field"in qa&&Da.field===qa.field&&(qa=qa.order?{order:qa.order}:!0);return Object.assign({},Da,{sort:qa})}return Da}F=ha(F.map(Fa=>{if(R(Fa)||!("op"in Fa)||G(Fa.op)&&Fa.op in rb)return Fa;Wd("Dropping sort property ".concat(fc(Fa),' as unioned domains only support boolean or op "count", "min", and "max".'));
return!0}),ba);1===F.length?qa=F[0]:1<F.length&&(Wd("Domains that should be unioned has conflicting sort properties. Sort will be set to true."),qa=!0);F=ha(S.map(Fa=>Nd(Fa)?Fa.data:null),Fa=>Fa);return 1===F.length&&null!==F[0]?Object.assign({},{data:F[0],fields:Da.map(Fa=>Fa.field)},qa?{sort:qa}:{}):Object.assign({},{fields:Da},qa?{sort:qa}:{})}}function Gd(S){if(Nd(S)&&G(S.field))return S.field;var Da=Jh(S)?!1:"fields"in S&&!("data"in S);if(Da){let F;for(const qa of S.fields)if(Nd(qa)&&G(qa.field))if(!F)F=
qa.field;else if(F!==qa.field)return Wd("Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect."),F;Wd("Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.");return F}Da=Jh(S)?!1:
"fields"in S&&"data"in S;if(Da)return Wd("Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect."),S=S.fields[0],G(S)?S:void 0}function Yd(S,Da){Da=S.component.scales[Da].get("domains").map(F=>{Nd(F)&&(F.data=S.lookupDataSource(F.data));return F});return dd(Da)}function Be(S){return hk(S)||Gl(S)?S.children.reduce((Da,F)=>Da.concat(Be(F)),Ie(S)):Ie(S)}function Ie(S){return jc(S.component.scales).reduce((Da,
F)=>{var qa=S.component.scales[F];if(qa.merged)return Da;var Fa=qa.combine(),nb=Object.assign({},Fa);qa=Fa.name;const Db=Fa.type,Nb=Fa.selectionExtent,Gc=Fa.reverse;nb=(delete nb.name,delete nb.type,delete nb.selectionExtent,delete nb.domains,delete nb.range,delete nb.reverse,nb);Fa=Fa.range;F in df?rd(Fa)&&(Fa={step:{signal:qa+"_step"}}):N(Fa)&&Nd(Fa)&&(Fa=Object.assign({},Fa,{data:S.lookupDataSource(Fa.data)}));if(Nb){var Xc=Nb.selection;Xc=S.getSelectionComponent(Xc,la(Xc));Xc={signal:Jd(Xc,Nb)}}F=
Yd(S,F);Da.push(Object.assign({},{name:qa,type:Db},F?{domain:F}:{},Xc?{domainRaw:Xc}:{},{range:Fa},void 0!==Gc?{reverse:Gc}:{},nb));return Da},[])}function Ke(S){return"x"===S?"width":"y"===S?"height":void 0}function Af(S,Da){const F=S.fieldDef(Da);if(F&&F.bin&&nc(F.bin)){const qa=mm(S,F.field,F.bin);Da=Ke(Da);const Fa=S.getName(Da);return new zm(()=>{var nb=S.getSignalName(qa);nb="(".concat(nb,".stop - ").concat(nb,".start) / ").concat(nb,".step");return"".concat(S.getSignalName(Fa)," / (").concat(nb,
")")})}}function Gg(S,Da){const F=Da.specifiedScales[S];var {size:qa}=Da,Fa=Da.getScaleComponent(S).get("type");for(var nb of Fs)if(void 0!==F[nb]){const Gc=oi(Fa,nb),Xc=ei(S,nb);if(Gc)if(Xc)Wd(Xc);else switch(nb){case "range":Fa=F.range;if(Jh(Fa)){if(S in df)return $k(Fa.map(Ad=>{if("width"===Ad||"height"===Ad){Ad=Da.getName(Ad);const Fd=Da.getSignalName.bind(Da);return zm.fromName(Fd,Ad)}return Ad}))}else if(N(Fa))return $k({data:Da.requestDataName(fl.Main),field:Fa.field,sort:{op:"min",field:Da.vgField(S)}});
return $k(Fa);case "scheme":return $k(zh(F[nb]))}else Wd(od(Fa,nb,S))}if("x"===S||"y"===S)if(nb="x"===S?"width":"height",qa=qa[nb],ng(qa)){if(Fa in jg)return $k({step:qa.step});Wd(Dd(nb))}const {rangeMin:Db,rangeMax:Nb}=F;S=Fk(S,Da);return(void 0!==Db||void 0!==Nb)&&oi(Fa,"rangeMin")&&Jh(S)&&2===S.length?$k([null!==Db&&void 0!==Db?Db:S[0],null!==Nb&&void 0!==Nb?Nb:S[1]]):ci(S)}function zh(S){return!G(S)&&S.name?Object.assign({},{scheme:S.name},K(S,["name"])):{scheme:S}}function Fk(S,Da){const {size:F,
config:qa,mark:Fa,encoding:nb}=Da;var Db=Da.getSignalName.bind(Da),{type:Nb}=Pd(nb[S]);const Gc=Da.getScaleComponent(S).get("type"),{domain:Xc,domainMid:Ad}=Da.specifiedScales[S];switch(S){case "x":case "y":if(fa(["point","band"],Gc))if("x"===S&&!F.width){if(Nb=Ac(qa.view,"width"),ng(Nb))return Nb}else if("y"===S&&!F.height&&(Nb=Ac(qa.view,"height"),ng(Nb)))return Nb;Nb=Ke(S);Nb=Da.getName(Nb);return"y"===S&&Gc in Ef?[zm.fromName(Db,Nb),0]:[0,zm.fromName(Db,Nb)];case "size":return Db=Da.component.scales[S].get("zero"),
Db=Fj(Fa,Db,qa),Nb=Kj(Fa,F,Da,qa),Gc in ze?zi(Db,Nb,Ah(Gc,qa,Xc,S)):[Db,Nb];case "theta":return[0,2*Math.PI];case "angle":return[0,360];case "radius":return[0,new zm(()=>{const Fd=Da.getSignalName("width"),le=Da.getSignalName("height");return"min(".concat(Fd,",").concat(le,")/2")})];case "strokeWidth":return[qa.scale.minStrokeWidth,qa.scale.maxStrokeWidth];case "strokeDash":return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case "shape":return"symbol";case "color":case "fill":case "stroke":return"ordinal"===
Gc?"nominal"===Nb?"category":"ordinal":void 0!==Ad?"diverging":"rect"===Fa||"geoshape"===Fa?"heatmap":"ramp";case "opacity":case "fillOpacity":case "strokeOpacity":return[qa.scale.minOpacity,qa.scale.maxOpacity]}throw Error("Scale range undefined for channel ".concat(S));}function Ah(S,Da,F,qa){switch(S){case "quantile":return Da.scale.quantileCount;case "quantize":return Da.scale.quantizeCount;case "threshold":if(void 0!==F&&Jh(F))return F.length+1;Wd("Domain for ".concat(qa," is required for threshold scale."));
return 3}}function zi(S,Da,F){const qa=()=>{const Fa=wf(Da),nb=wf(S),Db="(".concat(Fa," - ").concat(nb,") / (").concat(F," - 1)");return"sequence(".concat(nb,", ").concat(Fa," + ").concat(Db,", ").concat(Db,")")};return Zc(Da)?new zm(qa):{signal:qa()}}function Fj(S,Da,F){if(Da)return Zc(Da)?{signal:"".concat(Da.signal," ? 0 : ").concat(Fj(S,!1,F))}:0;switch(S){case "bar":case "tick":return F.scale.minBandSize;case "line":case "trail":case "rule":return F.scale.minStrokeWidth;case "text":return F.scale.minFontSize;
case "point":case "square":case "circle":return F.scale.minSize}throw Error(Ec("size",S));}function Kj(S,Da,F,qa){F={x:Af(F,"x"),y:Af(F,"y")};switch(S){case "bar":case "tick":if(void 0!==qa.scale.maxBandSize)return qa.scale.maxBandSize;const Fa=Pi(Da,F,qa.view);return z(Fa)?Fa-1:new zm(()=>"".concat(Fa.signal," - 1"));case "line":case "trail":case "rule":return qa.scale.maxStrokeWidth;case "text":return qa.scale.maxFontSize;case "point":case "square":case "circle":if(qa.scale.maxSize)return qa.scale.maxSize;
const nb=Pi(Da,F,qa.view);return z(nb)?Math.pow(.95*nb,2):new zm(()=>"pow(".concat(.95," * ").concat(nb.signal,", 2)"))}throw Error(Ec("size",S));}function Pi(S,Da,F){const qa=ng(S.width)?S.width.step:zb(F,"width"),Fa=ng(S.height)?S.height.step:zb(F,"height");return Da.x||Da.y?new zm(()=>"min(".concat([Da.x?Da.x.signal:qa,Da.y?Da.y.signal:Fa].join(", "),")")):Math.min(qa,Fa)}function Ti(S,Da){if(Ij(S)){const Db=S.component.scales,{config:Nb,encoding:Gc,markDef:Xc,specifiedScales:Ad}=S;for(const Fd of jc(Db)){var F=
Ad[Fd];const le=Db[Fd];var qa=S.getScaleComponent(Fd),Fa=Pd(Gc[Fd]),nb=F[Da];const We=qa.get("type"),Le=qa.get("padding");qa=qa.get("paddingInner");const pf=oi(We,Da),kg=ei(Fd,Da);void 0!==nb&&(pf?kg&&Wd(kg):Wd(od(We,Da,Fd)));if(pf&&void 0===kg)if(void 0!==nb)switch(nb=Fa.timeUnit,Fa=Fa.type,Da){case "domainMax":case "domainMin":Fe(F[Da])||"temporal"===Fa||nb?le.set(Da,{signal:Ze(F[Da],{type:Fa,timeUnit:nb})},!0):le.set(Da,F[Da],!0);break;default:le.copyKeyFromObject(Da,F)}else F=Da in Mm?Mm[Da]({model:S,
channel:Fd,fieldOrDatumDef:Fa,scaleType:We,scalePadding:Le,scalePaddingInner:qa,domain:F.domain,markDef:Xc,config:Nb}):Nb.scale[Da],void 0!==F&&le.set(Da,F,!1)}}else jj(S,Da)}function Cj(S){if(Ij(S)){const Da=S.component.scales;for(const F of Vg){const qa=Da[F];if(!qa)continue;const Fa=Gg(F,S);qa.setWithExplicit("range",Fa)}}else jj(S,"range")}function jj(S,Da){const F=S.component.scales;for(var qa of S.children)"range"===Da?Cj(qa):Ti(qa,Da);for(const Fa of jc(F)){let nb;for(const Db of S.children)if(qa=
Db.component.scales[Fa])qa=qa.getWithExplicit(Da),nb=Ji(nb,qa,Da,"scale",Ng((Nb,Gc)=>{switch(Da){case "range":if(Nb.step&&Gc.step)return Nb.step-Gc.step}return 0}));F[Fa].setWithExplicit(Da,nb)}}function $i(S,Da){const F=Da.bin;if(nc(F)){const qa=mm(S,Da.field,F);return new zm(()=>S.getSignalName(qa))}if(rc(F)&&N(F)&&void 0!==F.step)return{step:F.step}}function Ok(S,Da,F){var qa;switch(Da.type){case "nominal":case "ordinal":if(Ic(S)||"discrete"===Mc(S))return"shape"===S&&"ordinal"===Da.type&&Wd(bd(S,
"ordinal")),"ordinal";if(S in df){if(fa(["rect","bar","image","rule"],F))return"band"}else if("arc"===F&&S in ij)return"band";return void 0!==Da.band||Za(Da)&&(null===(qa=Da.axis)||void 0===qa?0:qa.tickBand)?"band":"point";case "temporal":if(!Ic(S)){if("discrete"===Mc(S))return Wd(bd(S,"temporal")),"ordinal";if(Lf(Da)&&Da.timeUnit&&lc(Da.timeUnit).utc)return"utc"}return"time";case "quantitative":if(Ic(S)){if(Lf(Da)&&nc(Da.bin))return"bin-ordinal"}else if("discrete"===Mc(S))return Wd(bd(S,"quantitative")),
"ordinal";return"linear";case "geojson":return}throw Error('Invalid field type "'.concat(Da.type,'".'));}function yk(S){if(Ij(S))S.component.scales=dl(S);else{var Da=S.component;const Nb=S.component.scales={},Gc={};var F=S.component.resolve;for(const Xc of S.children){yk(Xc);for(const Ad of jc(Xc.component.scales)){var qa,Fa=F.scale;if(null!==(qa=F.scale[Ad])&&void 0!==qa)var nb=qa;else{nb=Ad;var Db=S;if(hk(Db)||kk(Db))nb="shared";else if(Gl(Db))nb=nb in df?"independent":"shared";else throw Error("invalid model type for resolve");
}Fa[Ad]=nb;if("shared"===F.scale[Ad])if(Fa=Gc[Ad],nb=Xc.component.scales[Ad].getWithExplicit("type"),Fa){Db=Lb[Fa.value];const Fd=Lb[nb.value];Db===Fd||"ordinal-position"===Db&&"time"===Fd||"ordinal-position"===Fd&&"time"===Db?Gc[Ad]=Ji(Fa,nb,"type","scale",Hr):(F.scale[Ad]="independent",delete Gc[Ad])}else Gc[Ad]=nb}}for(const Xc of jc(Gc)){qa=S.scaleName(Xc,!0);Nb[Xc]=new Ip(qa,Gc[Xc]);for(const Ad of S.children)if(F=Ad.component.scales[Xc])Ad.renameScale(F.get("name"),qa),F.merged=!0}Da.scales=
Nb}}function dl(S){const {encoding:Da,mark:F}=S;return Vg.reduce((qa,Fa)=>{var nb=Pd(Da[Fa]);if(nb&&F===za&&"shape"===Fa&&"geojson"===nb.type)return qa;let Db=nb&&nb.scale;if(nb&&null!==Db&&!1!==Db){var Nb;Db=null!==(Nb=Db)&&void 0!==Nb?Nb:{};var Gc=Db;Nb=Ok(Fa,nb,F);({type:Gc}=Gc);if(gi[Fa]){if(void 0!==Gc)if(Yh(Fa,Gc)){var Xc;if(Xc=Lf(nb))Xc=Gc,nb=nb.type,Xc=!(fa(["ordinal","nominal"],nb)?void 0===Xc||Xc in jg:"temporal"===nb?fa([jb.TIME,jb.UTC,void 0],Xc):"quantitative"===nb?fa([jb.LOG,jb.POW,
jb.SQRT,jb.SYMLOG,jb.QUANTILE,jb.QUANTIZE,jb.THRESHOLD,jb.LINEAR,void 0],Xc):1);Xc?(nb=Nb,nb='FieldDef does not work with "'.concat(Gc,'" scale. We are using "').concat(nb,'" scale instead.'),Wd(nb)):Nb=Gc}else nb=Gc,Gc=Nb,nb='Channel "'.concat(Fa,'" does not work with "').concat(nb,'" scale. We are using "').concat(Gc,'" scale instead.'),Wd(nb)}else Nb=null;qa[Fa]=new Ip(S.scaleName(Fa+"",!0),{value:Nb,explicit:Db.type===Nb})}return qa},{})}function Ij(S){return"unit"===(null===S||void 0===S?void 0:
S.type)}function kk(S){return"facet"===(null===S||void 0===S?void 0:S.type)}function Gl(S){return"concat"===(null===S||void 0===S?void 0:S.type)}function hk(S){return"layer"===(null===S||void 0===S?void 0:S.type)}function il(S){function Da(qa,Fa){qa instanceof Jn&&!(qa.isGenerator||"url"in qa.data)&&(S.push(Fa),Fa={name:null,source:Fa.name,transform:[]});if(qa instanceof tl)if(qa.parent instanceof Jn&&!Fa.source){var nb;Fa.format=Object.assign({},null!==(nb=Fa.format)&&void 0!==nb?nb:{},{parse:qa.assembleFormatParse()});
Fa.transform.push(...qa.assembleTransforms(!0))}else Fa.transform.push(...qa.assembleTransforms());if(qa instanceof $n){Fa.name||(Fa.name="data_".concat(F++));!Fa.source||0<Fa.transform.length?(S.push(Fa),qa.data=Fa.name):qa.data=Fa.source;for(const Db of qa.assemble())S.push(Db)}else switch((qa instanceof Dp||qa instanceof Ep||qa instanceof Xo||qa instanceof Hn||qa instanceof vo||qa instanceof zo||qa instanceof co||qa instanceof gn||qa instanceof fo||qa instanceof yo||qa instanceof ao||qa instanceof
Yo||qa instanceof Mn||qa instanceof Ln||qa instanceof Jp||qa instanceof Kp||qa instanceof Zo||qa instanceof Lm||qa instanceof Dq||qa instanceof Lp)&&Fa.transform.push(qa.assemble()),(qa instanceof rm||qa instanceof sn||qa instanceof eo||qa instanceof tn)&&Fa.transform.push(...qa.assemble()),qa instanceof ym&&(Fa.source&&0===Fa.transform.length?qa.setSource(Fa.source):qa.parent instanceof ym?qa.setSource(Fa.name):(Fa.name||(Fa.name="data_".concat(F++)),qa.setSource(Fa.name),1===qa.numChildren()&&(S.push(Fa),
Fa={name:null,source:Fa.name,transform:[]}))),qa.numChildren()){case 0:qa instanceof ym&&(!Fa.source||0<Fa.transform.length)&&S.push(Fa);break;case 1:Da(qa.children[0],Fa);break;default:Fa.name||(Fa.name="data_".concat(F++));nb=Fa.name;!Fa.source||0<Fa.transform.length?S.push(Fa):nb=Fa.source;for(const Db of qa.children)Da(Db,{name:null,source:nb,transform:[]})}}let F=0;return Da}function cl(S){const Da=[],F=il(Da);for(const qa of S.children)F(qa,{source:S.name,name:null,transform:[]});return Da}
function Bm(S,Da){const F=[];var qa=il(F);let Fa=0;for(const Nb of S.sources){Nb.hasName()||(Nb.dataName="source_".concat(Fa++));const Gc=Nb.assemble();qa(Nb,Gc)}for(const Nb of F)0===Nb.transform.length&&delete Nb.transform;qa=0;for(const Nb of F.entries()){const [Gc,Xc]=Nb;var nb;0!==(null!==(nb=Xc.transform)&&void 0!==nb?nb:[]).length||Xc.source||F.splice(qa++,0,F.splice(Gc,1)[0])}for(const Nb of F)for(const Gc of null!==(Db=Nb.transform)&&void 0!==Db?Db:[]){var Db;"lookup"===Gc.type&&(Gc.from=
S.outputNodes[Gc.from].getSource())}for(const Nb of F)Nb.name in Da&&(Nb.values=Da[Nb.name]);return F}function qn(S,Da,F){Da="row"===Da?"height":"width";return{labels:F,sizeSignal:S.child.component.layoutSize.get(Da)?S.child.getSizeSignalRef(Da):void 0,axes:[]}}function Cm(S,Da){var {child:F}=S;if(F.component.axes[Da]){const {layoutHeaders:Fa,resolve:nb}=S.component;nb.axis[Da]=ak(nb,Da);if("shared"===nb.axis[Da]){const Db="x"===Da?"column":"row",Nb=Fa[Db];for(const Gc of F.component.axes[Da]){var qa;
Da=Gc.get("orient");Da="top"===Da||"left"===Da||Zc(Da)?"header":"footer";Nb[Da]=null!==(qa=Nb[Da])&&void 0!==qa?qa:[qn(S,Db,!1)];(F=Je(Gc,"main",S.config,{header:!0}))&&Nb[Da][0].axes.push(F);Gc.mainExtracted=!0}}}}function Nl(S){for(const Da of S.children)Da.parseLayoutSize()}function Fl(S,Da){const F=mj(Da),qa=oc(F),Fa=S.component.resolve,nb=S.component.layoutSize;let Db;for(const Nb of S.children){const Gc=Nb.component.layoutSize.getWithExplicit(F),Xc=Fa.scale[qa];if("independent"===Xc&&"step"===
Gc.value){Db=void 0;break}if(Db){if("independent"===Xc&&Db.value!==Gc.value){Db=void 0;break}Db=Ji(Db,Gc,F,"")}else Db=Gc}if(Db){for(const Nb of S.children)S.renameSignal(Nb.getName(F),S.getName(Da)),Nb.component.layoutSize.set(F,"merged",!1);nb.setWithExplicit(Da,Db)}else nb.setWithExplicit(Da,{explicit:!1,value:void 0})}function Gk(S,Da){const F=S.config;var qa=S.getScaleComponent("width"===Da?"x":"y");if(qa)return S=qa.get("type"),qa=qa.get("range"),S in jg?(Da=Ac(F.view,Da),rd(qa)||ng(Da)?"step":
Da):Oa(F.view,Da);if(S.hasProjection||"arc"===S.mark)return Oa(F.view,Da);Da=Ac(F.view,Da);return ng(Da)?Da.step:Da}function Al(S,Da,F){return qb(Da,Object.assign({},{suffix:"by_".concat(qb(S))},null!==F&&void 0!==F?F:{}))}function um(S,Da){for(const Nb of Da){var F,qa,Fa,nb;Da=Nb.data;if(S.name&&Nb.hasName()&&S.name!==Nb.dataName)continue;const Gc=null===(F=S.format)||void 0===F?void 0:F.mesh;var Db=null===(qa=Da.format)||void 0===qa?void 0:qa.feature;if(Gc&&Db)continue;const Xc=null===(Fa=S.format)||
void 0===Fa?void 0:Fa.feature;if(!Xc&&!Db||Xc===Db)if(Db=null===(nb=Da.format)||void 0===nb?void 0:nb.mesh,!Gc&&!Db||Gc===Db)if("values"in S&&"values"in Da){if(Hk(S.values,Da.values))return Nb}else if("url"in S&&"url"in Da){if(S.url===Da.url)return Nb}else if(Fg(S)&&S.name===Nb.dataName)return Nb}return null}function pm(S,Da){if(S.data||!S.parent){if(null===S.data)return S=new Jn({values:[]}),Da.push(S),S;const F=um(S.data,Da);if(F)return Vi(S.data)||(F.data.format=aa({},S.data.format,F.data.format)),
!F.hasName()&&S.data.name&&(F.dataName=S.data.name),F;S=new Jn(S.data);Da.push(S);return S}return S.parent.component.data.facetRoot?S.parent.component.data.facetRoot:S.parent.component.data.main}function Zk(S){var Da,F,qa,Fa=pm(S,S.component.data.sources);const {outputNodes:nb,outputNodeRefCounts:Db}=S.component.data,Nb=S.parent?S.parent.component.data.ancestorParse.clone():new Ar,Gc=S.data;Vi(Gc)?("sequence"in Gc?Fa=new Ep(Fa,Gc.sequence):"graticule"in Gc&&(Fa=new Dp(Fa,Gc.graticule)),Nb.parseNothing=
!0):null===(null===Gc||void 0===Gc?void 0:null===(Da=Gc.format)||void 0===Da?void 0:Da.parse)&&(Nb.parseNothing=!0);Fa=null!==(F=tl.makeExplicit(Fa,S,Nb))&&void 0!==F?F:Fa;Fa=new Lm(Fa);Da=S.parent&&hk(S.parent);if((Ij(S)||kk(S))&&Da){var Xc;Fa=null!==(Xc=rm.makeFromEncoding(Fa,S))&&void 0!==Xc?Xc:Fa}if(0<S.transforms.length){Xc=0;for(const Jg of S.transforms){var Ad=F=void 0;if("calculate"in Jg)Ad=Fa=new vo(Fa,Jg),F="derived";else if("filter"in Jg){var Fd;Ad=Om(Jg);Ad=Fa=null!==(Fd=tl.makeWithAncestors(Fa,
{},Ad,Nb))&&void 0!==Fd?Fd:Fa;Fa=new Hn(Fa,S,Jg.filter)}else if("bin"in Jg)Ad=Fa=rm.makeFromTransform(Fa,Jg,S),F="number";else if("timeUnit"in Jg)F="date",void 0===Nb.getWithExplicit(Jg.field).value&&(Fa=new tl(Fa,{[Jg.field]:F}),Nb.set(Jg.field,F,!1)),Ad=Fa=sn.makeFromTransform(Fa,Jg);else if("aggregate"in Jg)Ad=Fa=gn.makeFromTransform(Fa,Jg),F="number",Uj(S)&&(Fa=new Lm(Fa));else if("lookup"in Jg)Ad=Fa=fo.make(Fa,S,Jg,Xc++),F="derived";else if("window"in Jg)Ad=Fa=new yo(Fa,Jg),F="number";else if("joinaggregate"in
Jg)Ad=Fa=new ao(Fa,Jg),F="number";else if("stack"in Jg)Ad=Fa=tn.makeFromTransform(Fa,Jg),F="derived";else if("fold"in Jg)Ad=Fa=new Yo(Fa,Jg),F="derived";else if("flatten"in Jg)Ad=Fa=new Mn(Fa,Jg),F="derived";else if("pivot"in Jg)Ad=Fa=new Lp(Fa,Jg),F="derived";else if("sample"in Jg)Fa=new Dq(Fa,Jg);else if("impute"in Jg)Ad=Fa=eo.makeFromTransform(Fa,Jg),F="derived";else if("density"in Jg)Ad=Fa=new Ln(Fa,Jg),F="derived";else if("quantile"in Jg)Ad=Fa=new Kp(Fa,Jg),F="derived";else if("regression"in
Jg)Ad=Fa=new Zo(Fa,Jg),F="derived";else if("loess"in Jg)Ad=Fa=new Jp(Fa,Jg),F="derived";else{Wd("Ignoring an invalid transform: ".concat(fc(Jg),"."));continue}if(Ad&&void 0!==F)for(const Fh of null!==(le=Ad.producedFields())&&void 0!==le?le:[]){var le;Nb.set(Fh,F,!1)}}}Fd={};if(Ij(S)&&S.component.selection)for(var We of jc(S.component.selection)){le=S.component.selection[We];for(const Jg of le.project.items)!Jg.channel&&1<Pa(Jg.field)&&(Fd[Jg.field]="flatten")}We=zk(S);Fa=null!==(qa=tl.makeWithAncestors(Fa,
{},Object.assign({},Fd,We),Nb))&&void 0!==qa?qa:Fa;Ij(S)&&(Fa=co.parseAll(Fa,S),Fa=zo.parseAll(Fa,S));if(Ij(S)||kk(S)){var Le;if(!Da){var pf;Fa=null!==(pf=rm.makeFromEncoding(Fa,S))&&void 0!==pf?pf:Fa}Fa=null!==(Le=sn.makeFromEncoding(Fa,S))&&void 0!==Le?Le:Fa;Fa=vo.parseAllForSortIndex(Fa,S)}Le=S.getDataName(fl.Raw);qa=new ym(Fa,Le,fl.Raw,Db);Fa=nb[Le]=qa;if(Ij(S)){var kg,Ig;if(Le=gn.makeFromEncoding(Fa,S))Fa=Le,Uj(S)&&(Fa=new Lm(Fa));Fa=null!==(kg=eo.makeFromEncoding(Fa,S))&&void 0!==kg?kg:Fa;Fa=
null!==(Ig=tn.makeFromEncoding(Fa,S))&&void 0!==Ig?Ig:Fa}if(Ij(S)){var Yg;Fa=null!==(Yg=Xo.make(Fa,S))&&void 0!==Yg?Yg:Fa}Ig=S.getDataName(fl.Main);kg=new ym(Fa,Ig,fl.Main,Db);Fa=nb[Ig]=kg;Ij(S)&&fe(S,kg);Yg=null;if(kk(S)){var pj;Ig=S.getName("facet");{Yg=Fa;const {row:Jg,column:Fh}=S.facet;if(Jg&&Fh){Le=null;for(yg of[Jg,Fh])if(xg(yg.sort)){const {field:nk,op:Li="min"}=yg.sort;Yg=Le=new ao(Yg,{joinaggregate:[{op:Li,field:nk,as:Al(yg,yg.sort,{forAs:!0})}],groupby:[qb(yg)]})}var yg=Le}else yg=null}Fa=
null!==(pj=yg)&&void 0!==pj?pj:Fa;Yg=new $n(Fa,S,Ig,kg.getSource());nb[Ig]=Yg}return Object.assign({},S.component.data,{outputNodes:nb,outputNodeRefCounts:Db,raw:qa,main:kg,facetRoot:Yg,ancestorParse:Nb})}function Dm(S){return rh.reduce((Da,F)=>{S.component.scales[F]&&(Da[F]=[xm(F,S)]);return Da},{})}function ol(S,Da){if(S){if(S.length!==Da.length)return;const F=S.length;for(let qa=0;qa<F;qa++){const Fa=S[qa],nb=Da[qa];if(!!Fa!==!!nb)return;if(Fa&&nb){const Db=Fa.getWithExplicit("orient"),Nb=nb.getWithExplicit("orient");
if(Db.explicit&&Nb.explicit&&Db.value!==Nb.value)return;S[qa]=Nm(Fa,nb)}}}else return Da.map(F=>F.clone());return S}function Nm(S,Da){for(const F of Fq){const qa=Ji(S.getWithExplicit(F),Da.getWithExplicit(F),F,"axis",(Fa,nb)=>{switch(F){case "title":return Nh(Fa,nb);case "gridScale":return{explicit:Fa.explicit,value:Ha(Fa.value,nb.value)}}return sk(Fa,nb,F,"axis")});S.setWithExplicit(F,qa)}return S}function wm(S,Da,F,qa,Fa){if("disable"===Da)return void 0!==F;F=F||{};switch(Da){case "titleAngle":case "labelAngle":return S===
(Zc(F.labelAngle)?F.labelAngle:Ka(F.labelAngle));case "values":return!!F.values;case "encode":return!!F.encoding||!!F.labelAngle;case "title":if(S===Rh(qa,Fa))return!0}return S===F[Da]}function xm(S,Da){var F,qa,Fa,nb,Db;let Nb=Da.axis(S);const Gc=new Jr;var Xc=Pd(Da.encoding[S]);const {mark:Ad,config:Fd}=Da;var le=(null===(F=Nb)||void 0===F?void 0:F.orient)||(null===(qa=Fd["x"===S?"axisX":"axisY"])||void 0===qa?void 0:qa.orient)||(null===(Fa=Fd.axis)||void 0===Fa?void 0:Fa.orient)||("x"===S?"bottom":
"left");qa=Da.getScaleComponent(S).get("type");F=Tg(S,qa,le,Da.config);Fa=void 0!==Nb?!Nb:yi("disable",Fd.style,null===(nb=Nb)||void 0===nb?void 0:nb.style,F).configValue;Gc.set("disable",Fa,void 0!==Nb);if(Fa)return Gc;Nb=Nb||{};nb=ki(Xc,Nb,S,Fd.style,F);Xc={fieldOrDatumDef:Xc,axis:Nb,channel:S,model:Da,scaleType:qa,orient:le,labelAngle:nb,mark:Ad,config:Fd};for(const Le of Fq)if(le=Le in zp?zp[Le](Xc):ya[Le]?Nb[Le]:void 0,nb=void 0!==le,qa=wm(le,Le,Nb,Da,S),nb&&qa)Gc.set(Le,le,qa);else{const {configValue:pf,
configFrom:kg}=ya[Le]&&"values"!==Le?yi(Le,Fd.style,Nb.style,F):{};Fa=void 0!==pf;nb&&!Fa?Gc.set(Le,le,qa):("vgAxisConfig"!==kg||Gs.has(Le)&&Fa||fb(pf)||Zc(pf))&&Gc.set(Le,pf,!1)}const We=null!==(Db=Nb.encoding)&&void 0!==Db?Db:{};Db=Ja.reduce((Le,pf)=>{var kg;if(!Gc.hasAxisPart(pf))return Le;var Ig=fj(null!==(kg=We[pf])&&void 0!==kg?kg:{},Da);if("labels"===pf){{var Yg;const {encoding:pj,config:yg}=Da;kg=null!==(Yg=Pd(pj[S]))&&void 0!==Yg?Yg:Pd(pj[Kb(S)]);Yg=Da.axis(S)||{};const {format:Jg,formatType:Fh}=
Yg;Ig=$g(Fh)?Object.assign({},{text:id({fieldOrDatumDef:kg,field:"datum.value",format:Jg,formatType:Fh,config:yg})},Ig):Ig}}void 0===Ig||D(Ig)||(Le[pf]={update:Ig});return Le},{});D(Db)||Gc.set("encode",Db,!!Nb.encoding||void 0!==Nb.labelAngle);return Gc}function dn(S,Da,F){switch(S){case Gn:case rn:case na:case zn:case yn:case qo:return}const {x:qa,y:Fa,x2:nb,y2:Db}=Da;switch(S){case Em:if(Lf(qa)&&(rc(qa.bin)||Lf(Fa)&&Fa.aggregate&&!qa.aggregate))break;if(Lf(Fa)&&(rc(Fa.bin)||Lf(qa)&&qa.aggregate&&
!Fa.aggregate))return"horizontal";if(Db||nb){if(F)return F;if(!nb&&(Lf(qa)&&"quantitative"===qa.type&&!nc(qa.bin)||Sa(qa)))return"horizontal";if(!Db&&(Lf(Fa)&&"quantitative"===Fa.type&&!nc(Fa.bin)||Sa(Fa)))break}case Sm:if(!(!nb||Lf(qa)&&rc(qa.bin)||!Db||Lf(Fa)&&rc(Fa.bin)))return;case Tl:if(Db){if(Lf(Fa)&&rc(Fa.bin))return"horizontal";break}else if(nb)if(Lf(qa)&&rc(qa.bin))break;else return"horizontal";else if(S===Sm)if(qa&&!Fa)break;else if(Fa&&!qa)return"horizontal";case pn:case en:Da=ia(qa);var Nb=
ia(Fa);if(Da&&!Nb)return"tick"!==S?"horizontal":"vertical";if(!Da&&Nb)return"tick"!==S?"vertical":"horizontal";if(Da&&Nb){Da="temporal"===qa.type;Nb="temporal"===Fa.type;if(Da&&!Nb)return"tick"!==S?"vertical":"horizontal";if(!Da&&Nb)return"tick"!==S?"horizontal":"vertical";if(!qa.aggregate&&Fa.aggregate)return"tick"!==S?"vertical":"horizontal";if(qa.aggregate&&!Fa.aggregate)return"tick"!==S?"horizontal":"vertical";if(F)return F}else{if(F)return F;return}}return"vertical"}function Ol(S,Da){var F=Object,
qa=F.assign,Fa=ce(S,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),nb=qk("x",S,{defaultPos:"mid"}),Db=qk("y",S,{defaultPos:"mid"}),Nb=Kh("size",S),Gc=Kh("angle",S);S=Da?{shape:{value:Da}}:Kh("shape",S);return qa.call(F,{},Fa,nb,Db,Nb,Gc,S)}function Ai(S){if(fa([pn,Tl,Hm],S.mark)){var Da=eg(S.mark,S.encoding);if(0<Da.length)return tk(S,Da)}else if(fa([Em],S.mark)&&(Da=ra.some(F=>ag(F,S.markDef,S.config)),S.stack&&!S.fieldDef("size")&&Da))return vm(S);
return Pl(S)}function tk(S,Da){return[{name:S.getName("pathgroup"),type:"group",from:{facet:{name:"faceted_path_"+S.requestDataName(fl.Main),data:S.requestDataName(fl.Main),groupby:Da}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Pl(S,{fromPrefix:"faceted_path_"})}]}function vm(S){const [Da]=Pl(S,{fromPrefix:"stack_group_"}),F=S.scaleName(S.stack.fieldChannel),qa=Gc=>{Gc=void 0===Gc?{}:Gc;return S.vgField(S.stack.fieldChannel,Gc)};var Fa=(Gc,Xc)=>{Xc=[qa({prefix:"min",
suffix:"start",expr:Xc}),qa({prefix:"max",suffix:"start",expr:Xc}),qa({prefix:"min",suffix:"end",expr:Xc}),qa({prefix:"max",suffix:"end",expr:Xc})];return"".concat(Gc,"(").concat(Xc.map(Ad=>"scale('".concat(F,"',").concat(Ad,")")).join(","),")")};let nb;"x"===S.stack.fieldChannel?(Fa=Object.assign({},J(Da.encode.update,["y","yc","y2","height",...ra]),{x:{signal:Fa("min","datum")},x2:{signal:Fa("max","datum")},clip:{value:!0}}),nb={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},Da.encode.update=
Object.assign({},K(Da.encode.update,["y","yc","y2"]),{height:{field:{group:"height"}}})):(Fa=Object.assign({},J(Da.encode.update,["x","xc","x2","width"]),{y:{signal:Fa("min","datum")},y2:{signal:Fa("max","datum")},clip:{value:!0}}),nb={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},Da.encode.update=Object.assign({},K(Da.encode.update,["x","xc","x2"]),{width:{field:{group:"width"}}}));for(var Db of ra){var Nb=ph(Db,S.markDef,S.config);Da.encode.update[Db]?(Fa[Db]=Da.encode.update[Db],
delete Da.encode.update[Db]):Nb&&(Fa[Db]=vf(Nb));Nb&&(Da.encode.update[Db]={value:0})}Db=S.fieldDef(S.stack.groupbyChannel);Nb=qb(Db)?[qb(Db)]:[];((null===Db||void 0===Db?0:Db.bin)||(null===Db||void 0===Db?0:Db.timeUnit))&&Nb.push(qb(Db,{binSuffix:"end"}));Fa="stroke strokeWidth strokeJoin strokeCap strokeDash strokeDashOffset strokeMiterLimit strokeOpacity".split(" ").reduce((Gc,Xc)=>{if(Da.encode.update[Xc])return Object.assign({},Gc,{[Xc]:Da.encode.update[Xc]});const Ad=ph(Xc,S.markDef,S.config);
return void 0!==Ad?Object.assign({},Gc,{[Xc]:vf(Ad)}):Gc},Fa);Fa.stroke&&(Fa.strokeForeground={value:!0},Fa.strokeOffset={value:0});return[{type:"group",from:{facet:{data:S.requestDataName(fl.Main),name:"stack_group_"+S.requestDataName(fl.Main),groupby:Nb,aggregate:{fields:[qa({suffix:"start"}),qa({suffix:"start"}),qa({suffix:"end"}),qa({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:Fa},marks:[{type:"group",encode:{update:nb},marks:[Da]}]}]}function am(S){const {encoding:Da,stack:F,
mark:qa,markDef:Fa,config:nb}=S;var Db=Da.order;if(!(!Jh(Db)&&Vb(Db)&&O(Db.value)||!Db&&O(ag("order",Fa,nb)))){if((Jh(Db)||Lf(Db))&&!F)return qh(Db,{expr:"datum"});if(ib(qa)){const Nb="horizontal"===Fa.orient?"y":"x",Gc=Da[Nb];if(Lf(Gc)){Db=Gc.sort;if(Jh(Db))return{field:qb(Gc,{prefix:Nb,suffix:"sort_index",expr:"datum"})};if(xg(Db))return{field:qb({aggregate:Cf(S.encoding)?Db.op:void 0,field:Db.field},{expr:"datum"})};if(Db&&Db.encoding)return S=S.fieldDef(Db.encoding),{field:qb(S,{expr:"datum"}),
order:Db.order};if(null!==Db)return{field:qb(Gc,{binSuffix:S.stack&&S.stack.impute?"mid":void 0,expr:"datum"})}}}}}function Pl(S,Da){Da=void 0===Da?{fromPrefix:""}:Da;const {mark:F,markDef:qa,encoding:Fa,config:nb}=S;var Db=qa.clip;var Nb=S.getScaleComponent("x");var Gc=S.getScaleComponent("y");Nb=Nb&&Nb.get("selectionExtent")||Gc&&Gc.get("selectionExtent")?!0:void 0;Gc=S.component.projection;Db=Ha(Db,Nb,Gc&&!Gc.isFit?!0:void 0);Nb=Hh(qa);Gc=Fa.key;const Xc=am(S);var Ad;if(S.component.selection){for(var Fd=
Ad=jc(S.component.selection).length,le=S.parent;le&&0===Fd;)Fd=jc(le.component.selection).length,le=le.parent;Ad=Fd?{interactive:0<Ad||!!S.encoding.tooltip}:null}else Ad=null;Fd=ag("aria",qa,nb);le=Mp[F].postEncodingTransform?Mp[F].postEncodingTransform(S):null;return[Object.assign({},{name:S.getName("marks"),type:Mp[F].vgMark},Db?{clip:!0}:{},Nb?{style:Nb}:{},Gc?{key:Gc.field}:{},Xc?{sort:Xc}:{},Ad?Ad:{},!1===Fd?{aria:Fd}:{},{from:{data:Da.fromPrefix+S.requestDataName(fl.Main)},encode:{update:Mp[F].encodeEntry(S)}},
le?{transform:le}:{})]}function dj(S,Da,F,qa,Fa){if("facet"in S)return new gm(S,Da,F,Fa);if("layer"in S)return new ap(S,Da,F,qa,Fa);if(jh(S))return new $o(S,Da,F,qa,Fa);if("vconcat"in S||"hconcat"in S||"concat"in S)return new Eq(S,Da,F,Fa);throw Error(md(S));}function km(S,Da,F,qa){F=void 0===F?{}:F;const Fa=S.config?Ne(S.config):void 0;F=[].concat(S.assembleSelectionData([]),Bm(S.component.data,F));const nb=S.assembleProjections(),Db=S.assembleTitle(),Nb=S.assembleGroupStyle(),Gc=S.assembleGroupEncodeEntry(!0);
let Xc=S.assembleLayoutSignals();Xc=Xc.filter(le=>"width"!==le.name&&"height"!==le.name||void 0===le.value?!0:(Da[le.name]=+le.value,!1));var Ad=Object.assign({},Da);const Fd=Da.params;Ad=(delete Ad.params,Ad);return Object.assign({},{$schema:"https://vega.github.io/schema/vega/v5.json"},S.description?{description:S.description}:{},Ad,Db?{title:Db}:{},Nb?{style:Nb}:{},Gc?{encode:{update:Gc}}:{},{data:F},0<nb.length?{projections:nb}:{},S.assembleGroup([...Xc,...S.assembleSelectionTopLevelSignals([]),
...Sh(Fd)]),Fa?{config:Fa}:{},qa?{usermeta:qa}:{})}const jm=S=>function(Da){return Da[S]},Ql=S=>{const Da=S.length;return function(F){for(let qa=0;qa<Da;++qa)F=F[S[qa]];return F}};(function(S,Da,F){const qa=I(S);S=1===qa.length?qa[0]:S;return u((F&&F.get||x)(qa),[S],Da||S)})("id");const Km=u(S=>S,[],"identity");u(()=>0,[],"zero");u(()=>1,[],"one");u(()=>!0,[],"true");u(()=>!1,[],"false");var Jh=Array.isArray;const vk=Object.prototype.hasOwnProperty;Array.prototype.flat||Object.defineProperty(Array.prototype,
"flat",{configurable:!0,value:function F(Da){var qa=isNaN(Da)?1:Number(Da);return qa?Array.prototype.reduce.call(this,function(Fa,nb){return Array.isArray(nb)?Fa.push.apply(Fa,F.call(nb,qa-1)):Fa.push(nb),Fa},[]):Array.prototype.slice.call(this)},writable:!0});Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(Da){return Array.prototype.map.apply(this,arguments).flat()},writable:!0});var bm=function(Da,F){F||(F={});"function"===typeof F&&(F={cmp:F});
var qa="boolean"===typeof F.cycles?F.cycles:!1,Fa=F.cmp&&function(Db){return function(Nb){return function(Gc,Xc){return Db({key:Gc,value:Nb[Gc]},{key:Xc,value:Nb[Xc]})}}}(F.cmp),nb=[];return function Gc(Nb){Nb&&Nb.toJSON&&"function"===typeof Nb.toJSON&&(Nb=Nb.toJSON());if(void 0!==Nb){if("number"==typeof Nb)return isFinite(Nb)?""+Nb:"null";if("object"!==typeof Nb)return JSON.stringify(Nb);var Xc;if(Array.isArray(Nb)){var Ad="[";for(Xc=0;Xc<Nb.length;Xc++)Xc&&(Ad+=","),Ad+=Gc(Nb[Xc])||"null";return Ad+
"]"}if(null===Nb)return"null";if(-1!==nb.indexOf(Nb)){if(qa)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var Fd=nb.push(Nb)-1,le=Object.keys(Nb).sort(Fa&&Fa(Nb));Ad="";for(Xc=0;Xc<le.length;Xc++){var We=le[Xc],Le=Gc(Nb[We]);Le&&(Ad&&(Ad+=","),Ad+=JSON.stringify(We)+":"+Le)}nb.splice(Fd,1);return"{"+Ad+"}"}}(Da)};const Hk=function Fa(F,qa){if(F===qa)return!0;if(F&&qa&&"object"==typeof F&&"object"==typeof qa){if(F.constructor!==qa.constructor)return!1;
var nb;if(Array.isArray(F)){var Db=F.length;if(Db!=qa.length)return!1;for(nb=Db;0!==nb--;)if(!Fa(F[nb],qa[nb]))return!1;return!0}if(F.constructor===RegExp)return F.source===qa.source&&F.flags===qa.flags;if(F.valueOf!==Object.prototype.valueOf)return F.valueOf()===qa.valueOf();if(F.toString!==Object.prototype.toString)return F.toString()===qa.toString();var Nb=Object.keys(F);Db=Nb.length;if(Db!==Object.keys(qa).length)return!1;for(nb=Db;0!==nb--;)if(!Object.prototype.hasOwnProperty.call(qa,Nb[nb]))return!1;
for(nb=Db;0!==nb--;)if(Db=Nb[nb],!Fa(F[Db],qa[Db]))return!1;return!0}return F!==F&&qa!==qa},vb=function(F,qa,Fa){return Fa={path:qa,exports:{},require:function(nb,Db){throw Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs");}},F(Fa,Fa.exports),Fa.exports}(function(F){var qa=function(){function Fa(Fd,le){return null!=le&&Fd instanceof le}function nb(Fd,le,We,Le,pf){function kg(yg,Jg){if(null===yg)return null;if(0===Jg||"object"!=typeof yg)return yg;if(Fa(yg,Gc))var Fh=
new Gc;else if(Fa(yg,Xc))Fh=new Xc;else if(Fa(yg,Ad))Fh=new Ad(function(bl,Hl){yg.then(function(xl){bl(kg(xl,Jg-1))},function(xl){Hl(kg(xl,Jg-1))})});else if(nb.__isArray(yg))Fh=[];else if(nb.__isRegExp(yg))Fh=new RegExp(yg.source,Nb(yg)),yg.lastIndex&&(Fh.lastIndex=yg.lastIndex);else if(nb.__isDate(yg))Fh=new Date(yg.getTime());else{if(pj&&A.isBuffer(yg))return Fh=A.allocUnsafe?A.allocUnsafe(yg.length):new A(yg.length),yg.copy(Fh),Fh;if(Fa(yg,Error))Fh=Object.create(yg);else if("undefined"==typeof Le){var nk=
Object.getPrototypeOf(yg);Fh=Object.create(nk)}else Fh=Object.create(Le),nk=Le}if(le){var Li=Ig.indexOf(yg);if(-1!=Li)return Yg[Li];Ig.push(yg);Yg.push(Fh)}Fa(yg,Gc)&&yg.forEach(function(bl,Hl){Hl=kg(Hl,Jg-1);bl=kg(bl,Jg-1);Fh.set(Hl,bl)});Fa(yg,Xc)&&yg.forEach(function(bl){bl=kg(bl,Jg-1);Fh.add(bl)});for(var Xi in yg){var ej;nk&&(ej=Object.getOwnPropertyDescriptor(nk,Xi));ej&&null==ej.set||(Fh[Xi]=kg(yg[Xi],Jg-1))}if(Object.getOwnPropertySymbols)for(Li=Object.getOwnPropertySymbols(yg),Xi=0;Xi<Li.length;Xi++)if(ej=
Li[Xi],nk=Object.getOwnPropertyDescriptor(yg,ej),!nk||nk.enumerable||pf)Fh[ej]=kg(yg[ej],Jg-1),nk.enumerable||Object.defineProperty(Fh,ej,{enumerable:!1});if(pf)for(Li=Object.getOwnPropertyNames(yg),Xi=0;Xi<Li.length;Xi++)ej=Li[Xi],nk=Object.getOwnPropertyDescriptor(yg,ej),nk&&nk.enumerable||(Fh[ej]=kg(yg[ej],Jg-1),Object.defineProperty(Fh,ej,{enumerable:!1}));return Fh}"object"===typeof le&&(We=le.depth,Le=le.prototype,pf=le.includeNonEnumerable,le=le.circular);var Ig=[],Yg=[],pj="undefined"!=typeof A;
"undefined"==typeof le&&(le=!0);"undefined"==typeof We&&(We=Infinity);return kg(Fd,We)}function Db(Fd){return Object.prototype.toString.call(Fd)}function Nb(Fd){var le="";Fd.global&&(le+="g");Fd.ignoreCase&&(le+="i");Fd.multiline&&(le+="m");return le}try{var Gc=Map}catch(Fd){Gc=function(){}}try{var Xc=Set}catch(Fd){Xc=function(){}}try{var Ad=Promise}catch(Fd){Ad=function(){}}nb.clonePrototype=function(Fd){if(null===Fd)return null;var le=function(){};le.prototype=Fd;return new le};nb.__objToStr=Db;
nb.__isDate=function(Fd){return"object"===typeof Fd&&"[object Date]"===Db(Fd)};nb.__isArray=function(Fd){return"object"===typeof Fd&&"[object Array]"===Db(Fd)};nb.__isRegExp=function(Fd){return"object"===typeof Fd&&"[object RegExp]"===Db(Fd)};nb.__getRegExpFlags=Nb;return nb}();F.exports&&(F.exports=qa)});Set.prototype.toJSON=function(){return"Set(".concat([...this].map(F=>bm(F)).join(","),")")};const fc=bm,jc=Object.keys,Fc=Object.values,Pc=Object.entries;let va=42;const sa={labelAlign:{part:"labels",
vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},
gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}},Ja=["domain","grid","labels","ticks","title"],E={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",
gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",
labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"main",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",
titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},W={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,
gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,
tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},ya=Object.assign({},W,{style:1,labelExpr:1,encoding:1}),Na=jc({axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,
axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1}),gb={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},rb={count:1,min:1,max:1},yb=["count","valid","missing","distinct"],Mb=["count","sum","distinct","valid","missing"],Ib=Q("mean average median q1 q3 min max".split(" ")),$b={theta:1,theta2:1,radius:1,radius2:1},
ac={longitude:1,longitude2:1,latitude:1,latitude2:1},Hc=jc(ac),Rc=Object.assign({},{x:1,y:1,x2:1,y2:1},$b,ac,{color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1}),ld={row:1,column:1,facet:1},pd=jc(ld),td=Object.assign({},Rc,ld),de=jc(td);var me=Object.assign({},td),Ge=(delete me.order,delete me.detail,delete me.tooltip,me),hf=Object.assign({},Ge);const nf=(delete hf.row,
delete hf.column,delete hf.facet,hf),xf="x2 y2 latitude2 longitude2 theta2 radius2".split(" ");var Pf=Object.assign({},Rc);const Qe=(delete Pf.x,delete Pf.y,delete Pf.x2,delete Pf.y2,delete Pf.latitude,delete Pf.longitude,delete Pf.latitude2,delete Pf.longitude2,delete Pf.theta,delete Pf.theta2,delete Pf.radius,delete Pf.radius2,Pf),af=jc(Qe),df={x:1,y:1},rh=jc(df),ij={theta:1,radius:1},qi=jc(ij);var Og=Object.assign({},Qe);const Hg=(delete Og.text,delete Og.tooltip,delete Og.href,delete Og.url,delete Og.description,
delete Og.detail,delete Og.key,delete Og.order,Og),wi=jc(Hg),gi=Object.assign({},df,ij,Hg),Vg=jc(gi),Qg={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"};var Ch=Object.assign({},Qg);const qf=(delete Ch.geoshape,Ch),uh=function(F,qa){let Fa=F||0;return{level(nb){return arguments.length?(Fa=+nb,this):Fa},error(){1<=Fa&&B(qa||"error","ERROR",arguments);
return this},warn(){2<=Fa&&B(qa||"warn","WARN",arguments);return this},info(){3<=Fa&&B(qa||"log","INFO",arguments);return this},debug(){4<=Fa&&B(qa||"log","DEBUG",arguments);return this}}}(2);let mi=uh;const Mj="january february march april may june july august september october november december".split(" "),Ih=Mj.map(F=>F.substr(0,3)),ah="sunday monday tuesday wednesday thursday friday saturday".split(" "),Lj=ah.map(F=>F.substr(0,3)),hj={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,
minutes:1,seconds:1,milliseconds:1},Hi=jc(hj),xi={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "},M=jc({aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,
radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1}),r={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},ra=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"],jb={LINEAR:"linear",
LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},Lb={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",
quantize:"discretizing",threshold:"discretizing"},pc={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0},Yc="linear log pow sqrt symlog time utc".split(" "),Hd=Q(Yc),Kd=Q(["linear","log","pow","sqrt","symlog"]),ze=Q(["quantile","quantize","threshold"]),bf=Yc.concat(["quantile","quantize","threshold","sequential","identity"]),Ef=Q(bf),jg=Q(["ordinal","bin-ordinal","point","band"]);var Mg=Object.assign({},
{type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1});const Wi=(delete Mg.type,delete Mg.domain,delete Mg.range,delete Mg.rangeMax,delete Mg.rangeMin,delete Mg.scheme,Mg),kj=jc(Wi),vi={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",
square:"square",geoshape:"geoshape"},rk=vi.arc,Tl=vi.area,Em=vi.bar,qo=vi.image,pn=vi.line,Gn=vi.point,yn=vi.rect,Sm=vi.rule,zn=vi.text,en=vi.tick,Hm=vi.trail,rn=vi.circle,na=vi.square,za=vi.geoshape,hb=jc(vi);Q(hb);const hc="stroke strokeWidth strokeDash strokeDashOffset strokeOpacity strokeJoin strokeMiterLimit fill fillOpacity".split(" "),Lc=jc({color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBand:1,timeUnitBandPosition:1}),vd=jc({mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,
point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1}),Td={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},ie={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1},Me=(F,qa)=>{switch(qa.fieldTitle){case "plain":return F.field;case "functional":{const {aggregate:Fa,bin:nb,timeUnit:Db,field:Nb}=F;Bb(Fa)?F="".concat(Nb," for argmax(").concat(Fa.argmax,")"):La(Fa)?
F="".concat(Nb," for argmin(").concat(Fa.argmin,")"):(F=lc(Db),F=(F=Fa||(null===F||void 0===F?void 0:F.unit)||(null===F||void 0===F?void 0:F.maxbins)&&"timeunit"||nc(nb)&&"bin")?F.toUpperCase()+"("+Nb+")":Nb)}return F;default:return zc(F,qa)}};let Df=Me;const hh={compatible:!0};class aj{constructor(F,qa){this.name=F;this.run=qa}hasMatchingType(F){return jh(F)?(F=F.mark,(Ua(F)?F.type:F)===this.name):!1}}const vg=new aj("boxplot",kf),hi=new aj("errorbar",Zf),gj=new aj("errorband",pi),Qi={};bj("boxplot",
kf,["box","median","outliers","rule","ticks"]);bj("errorbar",Zf,["ticks","rule"]);bj("errorband",pi,["band","borders"]);const cf=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],Re={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",
titleOrient:"orient",titlePadding:"offset"},$e={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},hg=jc(Re),mg=jc($e),qj=jc({header:1,headerRow:1,headerColumn:1,headerFacet:1}),Vh="size shape fill stroke strokeDash strokeWidth opacity".split(" "),vj=["background",
"padding"],Yj=jc({align:1,bounds:1,center:1,columns:1,spacing:1}),yj={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:{continuousWidth:200,continuousHeight:200,step:20},mark:{color:"#4c78a8",invalid:"filter",timeUnitBand:1},arc:{},area:{},bar:{binSpacing:1,continuousBandSize:5,timeUnitBandPosition:.5},circle:{},geoshape:{},image:{},line:{},point:{},rect:{binSpacing:0,continuousBandSize:5,timeUnitBandPosition:.5},rule:{color:"black"},square:{},text:{color:"black"},
tick:{thickness:1},trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:{pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4},projection:{},legend:{gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,
gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:{single:{on:"click",fields:["_vgsid_"],resolve:"global",empty:"all",clear:"dblclick"},multi:{on:"click",fields:["_vgsid_"],toggle:"event.shiftKey",resolve:"global",empty:"all",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] \x3e window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] \x3e window:mousemove!",
zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}},style:{},title:{},facet:{spacing:20},concat:{spacing:20}},Jl="#4c78a8 #f58518 #e45756 #72b7b2 #54a24b #eeca3b #b279a2 #ff9da6 #9d755d #bab0ac".split(" "),Yn={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},tp={blue:Jl[0],orange:Jl[1],red:Jl[2],teal:Jl[3],green:Jl[4],yellow:Jl[5],purple:Jl[6],pink:Jl[7],brown:Jl[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",
gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"},qq=[...vd,...Na,...qj,"background","padding","legend","lineBreak","scale","style","title","view"],up=["view",...hb],yr="color fontSize background padding facet concat numberFormat timeFormat countTitle header axisQuantitative axisTemporal axisDiscrete axisPoint axisXBand axisXPoint axisXDiscrete axisXQuantitative axisXTemporal axisYBand axisYPoint axisYDiscrete axisYQuantitative axisYTemporal scale selection overlay".split(" "),
rq=Object.assign({},{view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},{area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]});class vp{map(F,qa){return"facet"in F?this.mapFacet(F,qa):"repeat"in F?this.mapRepeat(F,qa):"hconcat"in F?this.mapHConcat(F,qa):"vconcat"in F?this.mapVConcat(F,qa):"concat"in F?this.mapConcat(F,qa):this.mapLayerOrUnit(F,
qa)}mapLayerOrUnit(F,qa){if("layer"in F)return this.mapLayer(F,qa);if(jh(F))return this.mapUnit(F,qa);throw Error(md(F));}mapLayer(F,qa){return Object.assign({},F,{layer:F.layer.map(Fa=>this.mapLayerOrUnit(Fa,qa))})}mapHConcat(F,qa){return Object.assign({},F,{hconcat:F.hconcat.map(Fa=>this.map(Fa,qa))})}mapVConcat(F,qa){return Object.assign({},F,{vconcat:F.vconcat.map(Fa=>this.map(Fa,qa))})}mapConcat(F,qa){var Fa=Object.assign({},F);F=F.concat;Fa=(delete Fa.concat,Fa);return Object.assign({},Fa,{concat:F.map(nb=>
this.map(nb,qa))})}mapFacet(F,qa){return Object.assign({},F,{spec:this.map(F.spec,qa)})}mapRepeat(F,qa){return Object.assign({},F,{spec:this.map(F.spec,qa)})}}const ys={zero:1,center:1,normalize:1},Vl=new Set([rk,Em,Tl,Sm,Gn,rn,na,pn,zn,en]),zs=new Set([Em,Tl,rk]);class sq{constructor(){kc(this,"name","path-overlay")}hasMatchingType(F,qa){if(jh(F)){const {mark:Fa,encoding:nb}=F;F=Ua(Fa)?Fa:{type:Fa};switch(F.type){case "line":case "rule":case "trail":return!!Di(F,qa[F.type],nb);case "area":return!!Di(F,
qa[F.type],nb)||!!Si(F,qa[F.type])}}return!1}run(F,qa,Fa){var {config:nb}=qa,Db=Object.assign({},F),Nb=F.selection,Gc=F.projection,Xc=F.mark;F=F.encoding;Db=(delete Db.selection,delete Db.projection,delete Db.mark,delete Db.encoding,Db);F=oh(F,nb);Xc=Ua(Xc)?Xc:{type:Xc};const Ad=Di(Xc,nb[Xc.type],F),Fd="area"===Xc.type&&Si(Xc,nb[Xc.type]);var le=Object,We=le.assign;var Le=Object.assign({},"area"===Xc.type&&void 0===Xc.opacity&&void 0===Xc.fillOpacity?{opacity:.7}:{},Xc);Le=Object.assign({},Le);Le=
(delete Le.point,delete Le.line,Le);Le=1<jc(Le).length?Le:Le.type;Nb=[We.call(le,{},Nb?{selection:Nb}:{},{mark:Le,encoding:K(F,["shape"])})];le=Dh(Xc,F);We=F;if(le){const {fieldChannel:pf,offset:kg}=le;We=Object.assign({},F,{[pf]:Object.assign({},F[pf],kg?{stack:kg}:{})})}Fd&&Nb.push(Object.assign({},Gc?{projection:Gc}:{},{mark:Object.assign({},{type:"line"},J(Xc,["clip","interpolate","tension","tooltip"]),Fd),encoding:We}));Ad&&Nb.push(Object.assign({},Gc?{projection:Gc}:{},{mark:Object.assign({},
{type:"point",opacity:1,filled:!0},J(Xc,["clip","tooltip"]),Ad),encoding:We}));Gc=Object.assign({},Db,{layer:Nb});Db=Object;Nb=Db.assign;for(const pf of["line","area","rule","trail"])nb[pf]&&(nb=Object.assign({},nb,{[pf]:K(nb[pf],["point","line"])}));return Fa(Gc,Nb.call(Db,{},qa,{config:nb}))}}class tq{constructor(){kc(this,"name","RangeStep")}hasMatchingType(F){if(jh(F)&&F.encoding)for(const Fa of rh){const nb=F.encoding[Fa];if(nb&&lb(nb)){var qa;if(null===nb||void 0===nb?0:null===(qa=nb.scale)||
void 0===qa?0:qa.rangeStep)return!0}}return!1}run(F){const qa={};let Fa=Object.assign({},F.encoding);for(const Xc of rh){const Ad=mc(Xc);var nb=Fa[Xc];if(nb&&lb(nb)){var Db;if(null===nb||void 0===nb?0:null===(Db=nb.scale)||void 0===Db?0:Db.rangeStep){var Nb=Object.assign({},nb);nb=nb.scale;Nb=(delete Nb.scale,Nb);var Gc=Object.assign({},nb);Gc=(delete Gc.rangeStep,Gc);qa[Ad]={step:nb.rangeStep};Wd('Scale\'s "rangeStep" is deprecated and will be removed in Vega-Lite 5.0. Please use "width"/"height": {"step": ...} instead. See https://vega.github.io/vega-lite/docs/size.html.');
Fa=Object.assign({},Fa,{[Xc]:Object.assign({},Nb,D(Gc)?{}:{scale:Gc})})}}}return Object.assign({},qa,F,{encoding:Fa})}}class uq{constructor(){kc(this,"name","RuleForRangedLine")}hasMatchingType(F){if(jh(F)){const {encoding:qa,mark:Fa}=F;if("line"===Fa)for(const nb of xf)if(F=Wb(nb),F=qa[F],qa[nb]&&(Lf(F)&&!rc(F.bin)||ih(F)))return!0}return!1}run(F,qa,Fa){var {encoding:nb}=F,Db=!!nb.x2;nb="Line mark is for continuous lines and thus cannot be used with ".concat(Db&&nb.y2?"x2 and y2":Db?"x2":"y2",". We will use the rule mark (line segments) instead.");
Wd(nb);return Fa(Object.assign({},F,{mark:"rule"}),qa)}}class zr extends vp{constructor(...F){super(...F);kc(this,"nonFacetUnitNormalizers",[vg,hi,gj,new sq,new uq,new tq])}map(F,qa){if(jh(F)){const Fa=Kg(F.encoding,"row"),nb=Kg(F.encoding,"column"),Db=Kg(F.encoding,"facet");if(Fa||nb||Db)return this.mapFacetedUnit(F,qa)}return super.map(F,qa)}mapUnit(F,qa){const {parentEncoding:Fa,parentProjection:nb}=qa;var Db=pl(F.encoding,qa.repeater);F=Object.assign({},F,Db?{encoding:Db}:{});if(Fa||nb)return this.mapUnitWithParentEncodingOrProjection(F,
qa);Db=this.mapLayerOrUnit.bind(this);for(const Nb of this.nonFacetUnitNormalizers)if(Nb.hasMatchingType(F,qa.config))return Nb.run(F,qa,Db);return F}mapRepeat(F,qa){return!Jh(F.repeat)&&F.repeat.layer?this.mapLayerRepeat(F,qa):this.mapNonLayerRepeat(F,qa)}mapLayerRepeat(F,qa){var Fa=Object.assign({},F);const nb=F.repeat,Db=F.spec;Fa=(delete Fa.repeat,delete Fa.spec,Fa);const {row:Nb,column:Gc,layer:Xc}=nb,{repeater:Ad={},repeaterPrefix:Fd=""}=qa;return Nb||Gc?this.mapRepeat(Object.assign({},F,{repeat:Object.assign({},
Nb?{row:Nb}:{},Gc?{column:Gc}:{}),spec:{repeat:{layer:Xc},spec:Db}}),qa):Object.assign({},Fa,{layer:Xc.map(le=>{var We=Object.assign({},Ad,{layer:le});le=(Db.name||"")+Fd+"child__layer_".concat(la(le));We=this.mapLayerOrUnit(Db,Object.assign({},qa,{repeater:We,repeaterPrefix:le}));We.name=le;return We})})}mapNonLayerRepeat(F,qa){var Fa,nb=F,Db=Object.assign({},nb);const Nb=nb.repeat,Gc=nb.spec;nb=nb.data;Db=(delete Db.repeat,delete Db.spec,delete Db.data,Db);!Jh(Nb)&&F.columns&&(F=K(F,["columns"]),
Wd(yc("repeat")));const Xc=[],{repeater:Ad={},repeaterPrefix:Fd=""}=qa,le=!Jh(Nb)&&Nb.row||[Ad?Ad.row:null],We=!Jh(Nb)&&Nb.column||[Ad?Ad.column:null];var Le=Jh(Nb)&&Nb||[Ad?Ad.repeat:null];for(const kg of Le)for(const Ig of le)for(const Yg of We){var pf={repeat:kg,row:Ig,column:Yg,layer:Ad.layer};Le=(Gc.name||"")+Fd+"child__"+(Jh(Nb)?"".concat(la(kg)):(Nb.row?"row_".concat(la(Ig)):"")+(Nb.column?"column_".concat(la(Yg)):""));pf=this.map(Gc,Object.assign({},qa,{repeater:pf,repeaterPrefix:Le}));pf.name=
Le;Xc.push(K(pf,["data"]))}F=Jh(Nb)?F.columns:Nb.column?Nb.column.length:1;return Object.assign({},{data:null!==(Fa=Gc.data)&&void 0!==Fa?Fa:nb,align:"all"},Db,{columns:F,concat:Xc})}mapFacet(F,qa){const {facet:Fa}=F;cg(Fa)&&F.columns&&(F=K(F,["columns"]),Wd(yc("facet")));return super.mapFacet(F,qa)}mapUnitWithParentEncodingOrProjection(F,qa){const {encoding:Fa,projection:nb}=F,{parentEncoding:Db,parentProjection:Nb,config:Gc}=qa,Xc=Gj({parentProjection:Nb,projection:nb});qa=jk({parentEncoding:Db,
encoding:pl(Fa,qa.repeater)});return this.mapUnit(Object.assign({},F,Xc?{projection:Xc}:{},qa?{encoding:qa}:{}),{config:Gc})}mapFacetedUnit(F,qa){var Fa=F.encoding,nb=Object.assign({},Fa),Db=Fa.row;const Nb=Fa.column;Fa=Fa.facet;const Gc=(delete nb.row,delete nb.column,delete nb.facet,nb);var Xc=Object.assign({},F);nb=F.mark;const Ad=F.width,Fd=F.projection,le=F.height,We=F.view;F=F.selection;Xc=(delete Xc.mark,delete Xc.width,delete Xc.projection,delete Xc.height,delete Xc.view,delete Xc.selection,
delete Xc.encoding,Xc);const {facetMapping:Le,layout:pf}=this.getFacetMappingAndLayout({row:Db,column:Nb,facet:Fa},qa);Db=pl(Gc,qa.repeater);return this.mapFacet(Object.assign({},Xc,pf,{facet:Le,spec:Object.assign({},Ad?{width:Ad}:{},le?{height:le}:{},We?{view:We}:{},Fd?{projection:Fd}:{},{mark:nb,encoding:Db},F?{selection:F}:{})}),qa)}getFacetMappingAndLayout(F,qa){const {row:Fa,column:nb,facet:Db}=F;if(Fa||nb){Db&&(qa=[...(Fa?["row"]:[]),...(nb?["column"]:[])],qa="Facet encoding dropped as ".concat(qa.join(" and "),
" ").concat(1<qa.length?"are":"is"," also specified."),Wd(qa));qa={};var Nb={};for(var Gc of["row","column"]){const le=F[Gc];if(le){var Xc=Object.assign({},le);Xc=(delete Xc.align,delete Xc.center,delete Xc.spacing,delete Xc.columns,Xc);qa[Gc]=Xc;for(var Ad of["align","center","spacing"])if(void 0!==le[Ad]){var Fd;Nb[Ad]=null!==(Fd=Nb[Ad])&&void 0!==Fd?Fd:{};Nb[Ad][Gc]=le[Ad]}}}return{facetMapping:qa,layout:Nb}}Nb=Object.assign({},Db);F=Db.align;Fd=Db.center;Gc=Db.spacing;Ad=Db.columns;Nb=(delete Nb.align,
delete Nb.center,delete Nb.spacing,delete Nb.columns,Nb);qa=(qa=qa.repeater)?cg(Nb)?Ri(Nb,qa):Hj(Nb,qa):Nb;return{facetMapping:qa,layout:Object.assign({},F?{align:F}:{},Fd?{center:Fd}:{},Gc?{spacing:Gc}:{},Ad?{columns:Ad}:{})}}mapLayer(F,qa){var Fa=Object.assign({},qa),nb=qa.parentEncoding;qa=qa.parentProjection;Fa=(delete Fa.parentEncoding,delete Fa.parentProjection,Fa);var Db=Object.assign({},F);const Nb=F.encoding;F=F.projection;Db=(delete Db.encoding,delete Db.projection,Db);nb=Object.assign({},
Fa,{parentEncoding:jk({parentEncoding:nb,encoding:Nb,layer:!0}),parentProjection:Gj({parentProjection:qa,projection:F})});return super.mapLayer(Db,nb)}}const So=new zr;class An{constructor(F,qa){F=void 0===F?{}:F;qa=void 0===qa?{}:qa;this.explicit=F;this.implicit=qa}clone(){return new An(vb(this.explicit),vb(this.implicit))}combine(){return Object.assign({},this.explicit,this.implicit)}get(F){return Ha(this.explicit[F],this.implicit[F])}getWithExplicit(F){return void 0!==this.explicit[F]?{explicit:!0,
value:this.explicit[F]}:void 0!==this.implicit[F]?{explicit:!1,value:this.implicit[F]}:{explicit:!1,value:void 0}}setWithExplicit(F,qa){void 0!==qa.value&&this.set(F,qa.value,qa.explicit)}set(F,qa,Fa){delete this[Fa?"implicit":"explicit"][F];this[Fa?"explicit":"implicit"][F]=qa;return this}copyKeyFromSplit(F,qa){void 0!==qa.explicit[F]?this.set(F,qa.explicit[F],!0):void 0!==qa.implicit[F]&&this.set(F,qa.implicit[F],!1)}copyKeyFromObject(F,qa){void 0!==qa[F]&&this.set(F,qa[F],!0)}copyAll(F){for(const qa of jc(F.combine())){const Fa=
F.getWithExplicit(qa);this.setWithExplicit(qa,Fa)}}}class Ar extends An{constructor(F,qa,Fa){F=void 0===F?{}:F;qa=void 0===qa?{}:qa;Fa=void 0===Fa?!1:Fa;super(F,qa);this.explicit=F;this.implicit=qa;this.parseNothing=Fa}clone(){const F=super.clone();F.parseNothing=this.parseNothing;return F}}let fl;(function(F){F[F.Raw=0]="Raw";F[F.Main=1]="Main";F[F.Row=2]="Row";F[F.Column=3]="Column";F[F.Lookup=4]="Lookup"})(fl||(fl={}));const Br=/[[\]{}]/,wp={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,
rule:1,shape:1,symbol:1,text:1,trail:1};let To,Uo;const Cr={left:"x",center:"xc",right:"x2"},so={top:"y",middle:"yc",bottom:"y2"},Dr=new Set(["aria"]),vq={has:F=>"interval"!==F.type&&F.nearest,parse:(F,qa)=>{if(qa.events)for(const Fa of qa.events)Fa.markname=F.getName("voronoi")},marks:(F,qa,Fa)=>{const {x:nb,y:Db}=qa.project.hasChannel;qa=F.mark;if(ib(qa))return Wd('The "nearest" transform is not supported for '.concat(qa," marks.")),Fa;qa={name:F.getName("voronoi"),type:"path",interactive:!0,from:{data:F.getName("marks")},
encode:{update:Object.assign({},{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},Yl(F,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:nb||!Db?"datum.datum.x || 0":"0"},y:{expr:Db||!nb?"datum.datum.y || 0":"0"},size:[F.getSizeSignalRef("width"),F.getSizeSignalRef("height")]}]};let Nb=0,Gc=!1;Fa.forEach((Xc,Ad)=>{var Fd;Xc=null!==(Fd=Xc.name)&&void 0!==Fd?Fd:"";Xc===F.component.mark[0].name?Nb=Ad:0<=Xc.indexOf("voronoi")&&(Gc=!0)});Gc||Fa.splice(Nb+
1,0,qa);return Fa}};class Dk{constructor(F,qa){this.debugName=qa;kc(this,"_children",[]);kc(this,"_parent",null);kc(this,"_hash",void 0);F&&(this.parent=F)}clone(){throw Error("Cannot clone node");}get parent(){return this._parent}set parent(F){(this._parent=F)&&F.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(F,qa){-1<this._children.indexOf(F)?Wd("Attempt to add the same child twice."):void 0!==qa?this._children.splice(qa,0,F):this._children.push(F)}removeChild(F){F=
this._children.indexOf(F);this._children.splice(F,1);return F}remove(){let F=this._parent.removeChild(this);for(const qa of this._children)qa._parent=this._parent,this._parent.addChild(qa,F++)}insertAsParentOf(F){const qa=F.parent;qa.removeChild(this);this.parent=qa;F.parent=this}swapWithParent(){const F=this._parent,qa=F.parent;for(const Fa of this._children)Fa.parent=F;this._children=[];F.removeChild(this);F.parent.removeChild(F);this.parent=qa;F.parent=this}}class ym extends Dk{clone(){const F=
new this.constructor;F.debugName="clone_"+this.debugName;F._source=this._source;F._name="clone_"+this._name;F.type=this.type;F.refCounts=this.refCounts;F.refCounts[F._name]=0;return F}constructor(F,qa,Fa,nb){super(F,qa);this.type=Fa;this.refCounts=nb;kc(this,"_source",void 0);kc(this,"_name",void 0);this._source=this._name=qa;!this.refCounts||this._name in this.refCounts||(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){void 0===this._hash&&(this._hash=
"Output ".concat(Ca()));return this._hash}getSource(){this.refCounts[this._name]++;return this._source}isRequired(){return!!this.refCounts[this._name]}setSource(F){this._source=F}}class sn extends Dk{clone(){return new sn(null,vb(this.formula))}constructor(F,qa){super(F);this.formula=qa}static makeFromEncoding(F,qa){const Fa=qa.reduceFieldDef((nb,Db,Nb)=>{const {field:Gc,timeUnit:Xc}=Db,Ad=Ij(qa)?qa.encoding[Kb(Nb)]:void 0;Nb=Ij(qa)&&Gh(Nb,Db,Ad,qa.stack,qa.markDef,qa.config);Xc&&(Db=qb(Db,{forAs:!0}),
nb[ba({as:Db,field:Gc,timeUnit:Xc})]=Object.assign({},{as:Db,field:Gc,timeUnit:Xc},Nb?{band:!0}:{}));return nb},{});return D(Fa)?null:new sn(F,Fa)}static makeFromTransform(F,qa){var Fa=Object.assign({},qa);qa=Object.assign({},Fa);Fa=Fa.timeUnit;qa=(delete qa.timeUnit,qa);Fa=lc(Fa);qa=Object.assign({},qa,{timeUnit:Fa});return new sn(F,{[ba(qa)]:qa})}merge(F){this.formula=Object.assign({},this.formula);for(const qa in F.formula)if(!this.formula[qa]||F.formula[qa].band)this.formula[qa]=F.formula[qa];
for(const qa of F.children)F.removeChild(qa),qa.parent=this;F.remove()}removeFormulas(F){const qa={};for(const Fa of Pc(this.formula)){const [nb,Db]=Fa;F.has(Db.as)||(qa[nb]=Db)}this.formula=qa}producedFields(){return new Set(Fc(this.formula).map(F=>F.as))}dependentFields(){return new Set(Fc(this.formula).map(F=>F.field))}hash(){return"TimeUnit ".concat(ba(this.formula))}assemble(){const F=[];for(const nb of Fc(this.formula)){const {field:Db,as:Nb,timeUnit:Gc}=nb;var qa=lc(Gc),Fa=Object.assign({},
qa);const Xc=qa.unit;qa=qa.utc;Fa=(delete Fa.unit,delete Fa.utc,Fa);F.push(Object.assign({},{field:pb(Db),type:"timeunit"},Xc?{units:pg(Xc)}:{},qa?{timezone:"utc"}:{},Fa,{as:[Nb,"".concat(Nb,"_end")]}))}return F}}class Er{constructor(...F){kc(this,"hasChannel",void 0);kc(this,"hasField",void 0);kc(this,"timeUnit",void 0);kc(this,"items",void 0);this.items=F;this.hasChannel={};this.hasField={}}}const xp={has:F=>"single"===F.type&&"global"===F.resolve&&F.bind&&"scales"!==F.bind&&!Eh(F.bind),parse:(F,
qa,Fa,nb)=>{nb.on||delete qa.events;nb.clear||delete qa.clear},topLevelSignals:(F,qa,Fa)=>{const nb=qa.name;F=qa.project;const Db=qa.bind,Nb=qa.init&&qa.init[0],Gc=vq.has(qa)?"(item().isVoronoi ? datum.datum : datum)":"datum";F.items.forEach((Xc,Ad)=>{const Fd=la("".concat(nb,"_").concat(Xc.field));if(!Fa.filter(Le=>Le.name===Fd).length){var le,We;Fa.unshift(Object.assign({},{name:Fd},Nb?{init:jf(Nb[Ad])}:{value:null},{on:qa.events?[{events:qa.events,update:"datum \x26\x26 item().mark.marktype !\x3d\x3d 'group' ? ".concat(Gc,
"[").concat(Y(Xc.field),"] : null")}]:[],bind:null!==(le=null!==(We=Db[Xc.field])&&void 0!==We?We:Db[Xc.channel])&&void 0!==le?le:Db}))}});return Fa},signals:(F,qa,Fa)=>{const nb=qa.name;var Db=qa.project;F=Fa.filter(Gc=>Gc.name===nb+"_tuple")[0];qa=nb+"_tuple_fields";Db=Db.items.map(Gc=>la("".concat(nb,"_").concat(Gc.field)));const Nb=Db.map(Gc=>"".concat(Gc," !\x3d\x3d null")).join(" \x26\x26 ");Db.length&&(F.update="".concat(Nb," ? {fields: ").concat(qa,", values: [").concat(Db.join(", "),"]} : null"));
delete F.value;delete F.on;return Fa}},to={has:F=>"multi"===F.type&&!!F.toggle,signals:(F,qa,Fa)=>Fa.concat({name:qa.name+"_toggle",value:!1,on:[{events:qa.events,update:qa.toggle}]}),modifyExpr:(F,qa)=>{const Fa=qa.name+"_tuple",nb=qa.name+"_toggle";return"".concat(nb," ? null : ").concat(Fa,", ")+("global"===qa.resolve?"".concat(nb," ? null : true, "):"".concat(nb," ? null : {unit: ").concat(Zh(F),"}, "))+"".concat(nb," ? ").concat(Fa," : null")}},Tm={has:F=>"interval"===F.type&&"global"===F.resolve&&
F.bind&&"scales"===F.bind,parse:(F,qa)=>{const Fa=qa.scales=[];for(const Db of qa.project.items){var nb=Db.channel;if(!gi[nb])continue;const Nb=(nb=F.getScaleComponent(nb))?nb.get("type"):void 0;nb&&Nb in Ef?(nb.set("selectionExtent",{selection:qa.name,field:Db.field},!0),Fa.push(Db)):Wd("Scale bindings are currently only supported for scales with unbinned, continuous domains.")}},topLevelSignals:(F,qa,Fa)=>{const nb=qa.scales.filter(Nb=>0===Fa.filter(Gc=>Gc.name===Nb.signals.data).length);if(!F.parent||
ge(F)||0===nb.length)return Fa;F=Fa.filter(Nb=>Nb.name===qa.name)[0];let Db=F.update;if(0<=Db.indexOf("vlSelectionResolve"))F.update="{".concat(nb.map(Nb=>"".concat(Y(Nb.field),": ").concat(Nb.signals.data)).join(", "),"}");else{for(const Nb of nb){const Gc="".concat(Y(Nb.field),": ").concat(Nb.signals.data);0>Db.indexOf(Gc)&&(Db="".concat(Db.substring(0,Db.length-1),", ").concat(Gc,"}"))}F.update=Db}return Fa.concat(nb.map(Nb=>({name:Nb.signals.data})))},signals:(F,qa,Fa)=>{if(F.parent&&!ge(F))for(const nb of qa.scales)F=
Fa.filter(Db=>Db.name===nb.signals.data)[0],F.push="outer",delete F.value,delete F.update;return Fa}},Vo={has:F=>{const qa="global"===F.resolve&&F.bind&&Eh(F.bind);F=1===F.project.items.length&&"_vgsid_"!==F.project.items[0].field;qa&&!F&&Wd("Legend bindings are only supported for selections over an individual field or encoding channel.");return qa&&F},parse:(F,qa,Fa,nb)=>{nb.on||delete qa.events;nb.clear||delete qa.clear;if(nb.on||nb.clear)for(const Nb of qa.events){var Db;Nb.filter=V(null!==(Db=
Nb.filter)&&void 0!==Db?Db:[]);0>Nb.filter.indexOf('event.item \x26\x26 indexof(event.item.mark.role, "legend") \x3c 0')&&Nb.filter.push('event.item \x26\x26 indexof(event.item.mark.role, "legend") \x3c 0')}F=cj(qa.bind)?qa.bind.legend:"click";F=G(F)?jl(F,"view"):V(F);qa.bind={legend:{merge:F}}},topLevelSignals:(F,qa,Fa)=>{F=qa.name;const nb=cj(qa.bind)&&qa.bind.legend,Db=Gc=>Xc=>{Xc=vb(Xc);Xc.markname=Gc;return Xc};for(const Gc of qa.project.items){if(!Gc.hasLegend)continue;var Nb="".concat(la(Gc.field),
"_legend");const Xc="".concat(F,"_").concat(Nb);0===Fa.filter(Ad=>Ad.name===Xc).length&&(Nb=nb.merge.map(Db("".concat(Nb,"_symbols"))).concat(nb.merge.map(Db("".concat(Nb,"_labels")))).concat(nb.merge.map(Db("".concat(Nb,"_entries")))),Fa.unshift(Object.assign({},{name:Xc},qa.init?{}:{value:null},{on:[{events:Nb,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:nb.merge,update:"!event.item || !datum ? null : ".concat(Xc),force:!0}]})))}return Fa},signals:(F,qa,Fa)=>{const nb=
qa.name;var Db=qa.project;F=Fa.find(Xc=>Xc.name===nb+"_tuple");var Nb=nb+"_tuple_fields";Db=Db.items.filter(Xc=>Xc.hasLegend).map(Xc=>la("".concat(nb,"_").concat(la(Xc.field),"_legend")));const Gc=Db.map(Xc=>"".concat(Xc," !\x3d\x3d null")).join(" \x26\x26 ");Nb="".concat(Gc," ? {fields: ").concat(Nb,", values: [").concat(Db.join(", "),"]} : null");qa.events&&0<Db.length?F.on.push({events:Db.map(Xc=>({signal:Xc})),update:Nb}):0<Db.length&&(F.update=Nb,delete F.value,delete F.on);F=Fa.find(Xc=>Xc.name===
nb+"_toggle");Nb=cj(qa.bind)&&qa.bind.legend;F&&(qa.events?F.on.push(Object.assign({},F.on[0],{events:Nb})):F.on[0].events=Nb);return Fa}},yp=[{has:()=>!0,parse:(F,qa,Fa)=>{var nb;const Db=qa.name,Nb=null!==(nb=qa.project)&&void 0!==nb?nb:qa.project=new Er,Gc={};nb={};const Xc=new Set,Ad=(Le,pf)=>{Le="visual"===pf?Le.channel:Le.field;let kg=la("".concat(Db,"_").concat(Le));for(let Ig=1;Xc.has(kg);Ig++)kg=la("".concat(Db,"_").concat(Le,"_").concat(Ig));Xc.add(kg);return{[pf]:kg}};if(!Fa.fields&&!Fa.encodings){const Le=
F.config.selection[Fa.type];if(Fa.init)for(const pf of V(Fa.init))for(const kg of jc(pf))nf[kg]?(Fa.encodings||(Fa.encodings=[])).push(kg):"interval"===Fa.type?(Wd('Interval selections should be initialized using "x" and/or "y" keys.'),Fa.encodings=Le.encodings):(Fa.fields||(Fa.fields=[])).push(kg);else Fa.encodings=Le.encodings,Fa.fields=Le.fields}for(var Fd of null!==(le=Fa.fields)&&void 0!==le?le:[]){var le;le={type:"E",field:Fd};le.signals=Object.assign({},Ad(le,"data"));Nb.items.push(le);Nb.hasField[Fd]=
le}for(const Le of null!==(We=Fa.encodings)&&void 0!==We?We:[]){var We;(Fd=F.fieldDef(Le))?(We=Fd.field,Fd.aggregate?Wd(ed(Le,Fd.aggregate)):We?(Fd.timeUnit&&(We=F.vgField(Le),le={timeUnit:Fd.timeUnit,as:We,field:Fd.field},nb[ba(le)]=le),Gc[We]||(le="E","interval"===qa.type?F.getScaleComponent(Le).get("type")in Ef&&(le="R"):Fd.bin&&(le="R-RE"),Fd={field:We,channel:Le,type:le},Fd.signals=Object.assign({},Ad(Fd,"data"),Ad(Fd,"visual")),Nb.items.push(Gc[We]=Fd),Nb.hasField[We]=Nb.hasChannel[Le]=Gc[We])):
Wd(fd(Le))):Wd(fd(Le))}Fa.init&&(F=Le=>Nb.items.map(pf=>void 0!==Le[pf.channel]?Le[pf.channel]:Le[pf.field]),"interval"===Fa.type?qa.init=F(Fa.init):(Fa=V(Fa.init),qa.init=Fa.map(F)));D(nb)||(Nb.timeUnit=new sn(null,nb))},signals:(F,qa,Fa)=>{const nb=qa.name+"_tuple_fields";return 0<Fa.filter(Db=>Db.name===nb).length?Fa:Fa.concat({name:nb,value:qa.project.items.map(Db=>{Db=Object.assign({},Db);Db=(delete Db.signals,delete Db.hasLegend,Db);Db.field=pb(Db.field);return Db})})}},to,Tm,Vo,{has:F=>"interval"===
F.type&&F.translate,signals:(F,qa,Fa)=>{const nb=qa.name,Db=Tm.has(qa),Nb=nb+"_translate_anchor",{x:Gc,y:Xc}=qa.project.hasChannel;let Ad=jl(qa.translate,"scope");Db||(Ad=Ad.map(Fd=>(Fd.between[0].markname=nb+"_brush",Fd)));Fa.push({name:Nb,value:{},on:[{events:Ad.map(Fd=>Fd.between[0]),update:"{x: x(unit), y: y(unit)"+(void 0!==Gc?", extent_x: "+(Db?Ld(F,"x"):"slice(".concat(Gc.signals.visual,")")):"")+(void 0!==Xc?", extent_y: "+(Db?Ld(F,"y"):"slice(".concat(Xc.signals.visual,")")):"")+"}"}]},{name:nb+
"_translate_delta",value:{},on:[{events:Ad,update:"{x: ".concat(Nb,".x - x(unit), y: ").concat(Nb,".y - y(unit)}")}]});void 0!==Gc&&Te(F,qa,Gc,"width",Fa);void 0!==Xc&&Te(F,qa,Xc,"height",Fa);return Fa}},{has:F=>"interval"===F.type&&F.zoom,signals:(F,qa,Fa)=>{const nb=qa.name,Db=Tm.has(qa),Nb=nb+"_zoom_delta",{x:Gc,y:Xc}=qa.project.hasChannel,Ad=Y(F.scaleName("x")),Fd=Y(F.scaleName("y"));let le=jl(qa.zoom,"scope");Db||(le=le.map(We=>(We.markname=nb+"_brush",We)));Fa.push({name:nb+"_zoom_anchor",on:[{events:le,
update:Db?"{"+[Ad?"x: invert(".concat(Ad,", x(unit))"):"",Fd?"y: invert(".concat(Fd,", y(unit))"):""].filter(We=>!!We).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:Nb,on:[{events:le,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]});void 0!==Gc&&pe(F,qa,Gc,"width",Fa);void 0!==Xc&&pe(F,qa,Xc,"height",Fa);return Fa}},xp,vq,{has:F=>void 0!==F.clear&&!1!==F.clear,parse:(F,qa,Fa)=>{Fa.clear&&(qa.clear=G(Fa.clear)?jl(Fa.clear,"scope"):Fa.clear)},topLevelSignals:(F,qa,Fa)=>
{if(xp.has(qa))for(const nb of qa.project.items)F=Fa.findIndex(Db=>Db.name===la("".concat(qa.name,"_").concat(nb.field))),-1!==F&&Fa[F].on.push({events:qa.clear,update:"null"});return Fa},signals:(F,qa,Fa)=>{function nb(Db,Nb){-1!==Db&&Fa[Db].on&&Fa[Db].on.push({events:qa.clear,update:Nb})}if("interval"===qa.type)for(const Db of qa.project.items)F=Fa.findIndex(Nb=>Nb.name===Db.signals.visual),nb(F,"[0, 0]"),-1===F&&(F=Fa.findIndex(Nb=>Nb.name===Db.signals.data),nb(F,"null"));else F=Fa.findIndex(Db=>
Db.name===qa.name+"_tuple"),nb(F,"null"),to.has(qa)&&(F=Fa.findIndex(Db=>Db.name===qa.name+"_toggle"),nb(F,"false"));return Fa}}],Zj={single:{signals:ll,modifyExpr:(F,qa)=>qa.name+"_tuple, "+("global"===qa.resolve?"true":"{unit: ".concat(Zh(F),"}"))},multi:{signals:ll,modifyExpr:(F,qa)=>qa.name+"_tuple, "+("global"===qa.resolve?"null":"{unit: ".concat(Zh(F),"}"))},interval:{signals:(F,qa)=>{const Fa=qa.name;var nb=Fa+"_tuple_fields",Db=Tm.has(qa);const Nb=[],Gc=[],Xc=[];if(qa.translate&&!Db){const Ad=
"!event.item || event.item.mark.name !\x3d\x3d ".concat(Y(Fa+"_brush"));$h(qa,(Fd,le)=>{var We;const Le=V(null!==(We=le.between[0].filter)&&void 0!==We?We:le.between[0].filter=[]);0>Le.indexOf(Ad)&&Le.push(Ad);return Fd})}qa.project.items.forEach((Ad,Fd)=>{const le=Ad.channel;if("x"!==le&&"y"!==le)Wd("Interval selections only support x and y encoding channels.");else{Fd=Mh(F,qa,Ad,qa.init?qa.init[Fd]:null);var We=Ad.signals.data;Ad=Ad.signals.visual;var Le=Y(F.scaleName(le)),pf=F.getScaleComponent(le).get("type")in
Ef?"+":"";Nb.push(...Fd);Gc.push(We);Xc.push({scaleName:F.scaleName(le),expr:"(!isArray(".concat(We,") || ")+"(".concat(pf,"invert(").concat(Le,", ").concat(Ad,")[0] \x3d\x3d\x3d ").concat(pf).concat(We,"[0] \x26\x26 ")+"".concat(pf,"invert(").concat(Le,", ").concat(Ad,")[1] \x3d\x3d\x3d ").concat(pf).concat(We,"[1]))")})}});Db||Nb.push({name:Fa+"_scale_trigger",value:{},on:[{events:Xc.map(Ad=>({scale:Ad.scaleName})),update:Xc.map(Ad=>Ad.expr).join(" \x26\x26 ")+" ? ".concat(Fa+"_scale_trigger"," : {}")}]});
Db=qa.init;nb="unit: ".concat(Zh(F),", fields: ").concat(nb,", values");return Nb.concat(Object.assign({},{name:Fa+"_tuple"},Db?{init:"{".concat(nb,": ").concat(jf(Db),"}")}:{},{on:[{events:[{signal:Gc.join(" || ")}],update:Gc.join(" \x26\x26 ")+" ? {".concat(nb,": [").concat(Gc,"]} : null")}]}))},modifyExpr:(F,qa)=>qa.name+"_tuple, "+("global"===qa.resolve?"true":"{unit: ".concat(Zh(F),"}")),marks:(F,qa,Fa)=>{const nb=qa.name,{x:Db,y:Nb}=qa.project.hasChannel,Gc=Db&&Db.signals.visual,Xc=Nb&&Nb.signals.visual;
var Ad="data(".concat(Y(qa.name+"_store"),")");if(Tm.has(qa))return Fa;const Fd={x:void 0!==Db?{signal:"".concat(Gc,"[0]")}:{value:0},y:void 0!==Nb?{signal:"".concat(Xc,"[0]")}:{value:0},x2:void 0!==Db?{signal:"".concat(Gc,"[1]")}:{field:{group:"width"}},y2:void 0!==Nb?{signal:"".concat(Xc,"[1]")}:{field:{group:"height"}}};if("global"===qa.resolve)for(var le of jc(Fd))Fd[le]=[Object.assign({},{test:"".concat(Ad,".length \x26\x26 ").concat(Ad,"[0].unit \x3d\x3d\x3d ").concat(Zh(F))},Fd[le]),{value:0}];
le=qa.mark;Ad=Object.assign({},le);F=le.fill;qa=le.fillOpacity;le=le.cursor;const We=(delete Ad.fill,delete Ad.fillOpacity,delete Ad.cursor,Ad);Ad=jc(We).reduce((Le,pf)=>{Le[pf]=[{test:[void 0!==Db&&"".concat(Gc,"[0] !\x3d\x3d ").concat(Gc,"[1]"),void 0!==Nb&&"".concat(Xc,"[0] !\x3d\x3d ").concat(Xc,"[1]")].filter(kg=>kg).join(" \x26\x26 "),value:We[pf]},{value:null}];return Le},{});return[{name:nb+"_brush_bg",type:"rect",clip:!0,encode:{enter:{fill:{value:F},fillOpacity:{value:qa}},update:Fd}},...Fa,
{name:nb+"_brush",type:"rect",clip:!0,encode:{enter:Object.assign({},le?{cursor:{value:le}}:{},{fill:{value:"transparent"}}),update:Object.assign({},Fd,Ad)}}]}}};Rj.prototype.visit=function(F){let qa,Fa,nb;if(F(this))return 1;qa=Mi(this);Fa=0;for(nb=qa.length;Fa<nb;++Fa)if(qa[Fa].visit(F))return 1};var Xh,Vf,qm,Ak,Zn=RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),
uo=RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");
const Fr={"if":1,"in":1,"do":1,"var":1,"for":1,"new":1,"try":1,let:1,"this":1,"else":1,"case":1,"void":1,"with":1,"enum":1,"while":1,"break":1,"catch":1,"throw":1,"const":1,yield:1,"class":1,"super":1,"return":1,"typeof":1,"delete":1,"switch":1,"export":1,"import":1,"public":1,"static":1,"default":1,"finally":1,"extends":1,"package":1,"private":1,"function":1,"continue":1,"debugger":1,"interface":1,"protected":1,"instanceof":1,"implements":1},wq={"if":1};class Hn extends Dk{clone(){return new Hn(null,
this.model,vb(this.filter))}constructor(F,qa,Fa){super(F);this.model=qa;this.filter=Fa;kc(this,"expr",void 0);kc(this,"_dependentFields",void 0);this.expr=He(this.model,this.filter,this);this._dependentFields=Oc(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return"Filter ".concat(this.expr)}}const zp={scale:F=>{var {model:qa,channel:Fa}=F;return qa.scaleName(Fa)},format:F=>{var {fieldOrDatumDef:qa,config:Fa,
axis:nb}=F;const {format:Db,formatType:Nb}=nb;return Bd(qa,qa.type,Db,Nb,Fa,!0)},formatType:F=>{var {axis:qa,fieldOrDatumDef:Fa,scaleType:nb}=F;({formatType:F}=qa);return xe(F,Fa,nb)},grid:F=>{var {fieldOrDatumDef:qa,axis:Fa,scaleType:nb}=F;if(Lf(qa)&&rc(qa.bin))return!1;var Db;return null!==(Db=Fa.grid)&&void 0!==Db?Db:!(nb in jg)&&Lf(qa)&&!nc(null===qa||void 0===qa?void 0:qa.bin)},gridScale:F=>{var {model:qa,channel:Fa}=F;F="x"===Fa?"y":"x";F=qa.getScaleComponent(F)?qa.scaleName(F):void 0;return F},
labelAlign:F=>{var {axis:qa,labelAngle:Fa,orient:nb,channel:Db}=F;return qa.labelAlign||Uh(Fa,nb,Db)},labelAngle:F=>{({labelAngle:F}=F);return F},labelBaseline:F=>{var {axis:qa,labelAngle:Fa,orient:nb,channel:Db}=F;return qa.labelBaseline||Xk(Fa,nb,Db)},labelFlush:F=>{var {axis:qa,fieldOrDatumDef:Fa,channel:nb}=F,Db;F=null!==(Db=qa.labelFlush)&&void 0!==Db?Db:"x"===nb&&fa(["quantitative","temporal"],Fa.type)?!0:void 0;return F},labelOverlap:F=>{var {axis:qa,fieldOrDatumDef:Fa,scaleType:nb}=F,Db;if(null!==
(Db=qa.labelOverlap)&&void 0!==Db)F=Db;else{F=Fa.type;Db=Lf(Fa)&&!!Fa.timeUnit;var Nb=Lf(Fa)?Fa.sort:void 0;F=Db&&!N(Nb)||"nominal"!==F&&"ordinal"!==F?"log"===nb||"symlog"===nb?"greedy":!0:void 0}return F},orient:F=>{({orient:F}=F);return F},tickCount:F=>{var {channel:qa,model:Fa,axis:nb,fieldOrDatumDef:Db,scaleType:Nb}=F,Gc;F=(F="x"===qa?"width":"y"===qa?"height":void 0)?Fa.getSizeSignalRef(F):void 0;if(null===(Gc=nb.tickCount)||void 0===Gc)a:{var {fieldOrDatumDef:Xc,scaleType:Ad,size:Fd,values:le}=
{fieldOrDatumDef:Db,scaleType:Nb,size:F,values:nb.values};if(le||Ad in jg||"log"===Ad)Gc=void 0;else{if(Lf(Xc)){var We;if(nc(Xc.bin)){Gc={signal:"ceil(".concat(Fd.signal,"/10)")};break a}if(Xc.timeUnit&&fa(["month","hours","day","quarter"],null===(We=lc(Xc.timeUnit))||void 0===We?void 0:We.unit)){Gc=void 0;break a}}Gc={signal:"ceil(".concat(Fd.signal,"/40)")}}}return Gc},title:F=>{var {axis:qa,model:Fa,channel:nb}=F;if(void 0!==qa.title)return qa.title;F=Rh(Fa,nb);if(void 0!==F)return F;F=Fa.typedFieldDef(nb);
const Db=Fa.fieldDef("x"===nb?"x2":"y2");return Ii(F?[$f(F)]:[],Lf(Db)?[$f(Db)]:[])},values:F=>{var {axis:qa,fieldOrDatumDef:Fa}=F;F=qa.values;F=Jh(F)?Tf(Fa,F):Zc(F)?F:void 0;return F},zindex:F=>{var {axis:qa,fieldOrDatumDef:Fa,mark:nb}=F,Db;F=null!==(Db=qa.zindex)&&void 0!==Db?Db:"rect"===nb&&Qb(Fa)?1:0;return F}};class vo extends Dk{clone(){return new vo(null,vb(this.transform))}constructor(F,qa){super(F);this.transform=qa;kc(this,"_dependentFields",void 0);this._dependentFields=Oc(this.transform.calculate)}static parseAllForSortIndex(F,
qa){qa.forEachFieldDef((Fa,nb)=>{if(qc(Fa)&&dh(Fa.sort)){const {field:Nb,timeUnit:Gc}=Fa;var Db=Fa.sort;Db=Db.map((Xc,Ad)=>"".concat(rg({field:Nb,timeUnit:Gc,equal:Xc})," ? ").concat(Ad," : ")).join("")+Db.length;F=new vo(F,{calculate:Db,as:Ej(Fa,nb,{forAs:!0})})}});return F}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return"Calculate ".concat(ba(this.transform))}}
const fn=["row","column"],Ap=["header","footer"],As={column:{start:0,end:1},row:{start:1,end:0}},Bp=Object.assign({},{aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,
labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,
values:1,zindex:1},{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),In=jc(Bp);class xq extends An{}const yq={symbols:function(F,qa){var {fieldOrDatumDef:Fa,model:nb,channel:Db,legendCmpt:Nb,legendType:Gc}=qa,Xc,Ad,Fd,le;if("symbol"===Gc){var {markDef:We,encoding:Le,config:pf,mark:kg}=nb;qa=We.filled&&"trail"!==kg;var Ig=Object,Yg=Ig.assign,pj={};for(var yg of hc){const Xi=ph(yg,nb.markDef,nb.config);void 0!==Xi&&(pj[yg]=vf(Xi))}yg=
Yg.call(Ig,{},pj,og(nb,{filled:qa}));Ig=null!==(Xc=Nb.get("symbolOpacity"))&&void 0!==Xc?Xc:pf.legend.symbolOpacity;Xc=null!==(Ad=Nb.get("symbolFillColor"))&&void 0!==Ad?Ad:pf.legend.symbolFillColor;Ad=null!==(Fd=Nb.get("symbolStrokeColor"))&&void 0!==Fd?Fd:pf.legend.symbolStrokeColor;Fd=void 0===Ig?null!==(le=Wk(Le.opacity))&&void 0!==le?le:We.opacity:void 0;if(yg.fill)if("fill"===Db||qa&&"color"===Db)delete yg.fill;else if(yg.fill.field)if(Xc)delete yg.fill;else{var Jg;yg.fill=vf(null!==(Jg=pf.legend.symbolBaseFillColor)&&
void 0!==Jg?Jg:"black");yg.fillOpacity=vf(null!==Fd&&void 0!==Fd?Fd:1)}else if(Jh(yg.fill)){var Fh,nk,Li;if(le=null!==(Fh=null!==(nk=Oi(null!==(Li=Le.fill)&&void 0!==Li?Li:Le.color))&&void 0!==nk?nk:We.fill)&&void 0!==Fh?Fh:qa&&We.color)yg.fill=vf(le)}yg.stroke&&("stroke"===Db||!qa&&"color"===Db?delete yg.stroke:yg.stroke.field||Ad?delete yg.stroke:Jh(yg.stroke)&&(Fh=Ha(Oi(Le.stroke||Le.color),We.stroke,qa?We.color:void 0))&&(yg.stroke={value:Fh}));"opacity"!==Db&&((Fh=Lf(Fa)&&lm(nb,Nb,Fa))?yg.opacity=
[Object.assign({},{test:Fh},vf(null!==Fd&&void 0!==Fd?Fd:1)),vf(pf.legend.unselectedOpacity)]:Fd&&(yg.opacity=vf(Fd)));yg=Object.assign({},yg,F);return D(yg)?void 0:yg}},gradient:function(F,qa){var {model:Fa,legendType:nb,legendCmpt:Db}=qa,Nb;if("gradient"===nb){var {config:Gc,markDef:Xc,encoding:Ad}=Fa;qa={};var Fd=void 0===(null!==(Nb=Db.get("gradientOpacity"))&&void 0!==Nb?Nb:Gc.legend.gradientOpacity)?Wk(Ad.opacity)||Xc.opacity:void 0;Fd&&(qa.opacity=vf(Fd));qa=Object.assign({},qa,F);return D(qa)?
void 0:qa}},labels:function(F,qa){var {fieldOrDatumDef:Fa,model:nb,channel:Db,legendCmpt:Nb}=qa;qa=nb.legend(Db)||{};const Gc=nb.config;var Xc=Lf(Fa)?lm(nb,Nb,Fa):void 0;Xc=Xc?[{test:Xc,value:1},{value:Gc.legend.unselectedOpacity}]:void 0;const {format:Ad,formatType:Fd}=qa;qa=$g(Fd)?id({fieldOrDatumDef:Fa,field:"datum.value",format:Ad,formatType:Fd,config:Gc}):void 0;F=Object.assign({},Xc?{opacity:Xc}:{},qa?{text:qa}:{},F);return D(F)?void 0:F},entries:function(F,qa){({legendCmpt:qa}=qa);qa=qa.get("selections");
return(null===qa||void 0===qa?0:qa.length)?Object.assign({},F,{fill:{value:"transparent"}}):F}},Cp={direction:F=>{({direction:F}=F);return F},format:F=>{var {fieldOrDatumDef:qa,legend:Fa,config:nb}=F;const {format:Db,formatType:Nb}=Fa;return Bd(qa,qa.type,Db,Nb,nb,!1)},formatType:F=>{var {legend:qa,fieldOrDatumDef:Fa,scaleType:nb}=F;({formatType:F}=qa);return xe(F,Fa,nb)},gradientLength:F=>{var qa,Fa;const {legend:nb,legendConfig:Db}=F;if(null!==(qa=null!==(Fa=nb.gradientLength)&&void 0!==Fa?Fa:Db.gradientLength)&&
void 0!==qa)F=qa;else{{var {legendConfig:Nb,model:Gc,direction:Xc,orient:Ad,scaleType:Fd}=F;const {gradientHorizontalMaxLength:le,gradientHorizontalMinLength:We,gradientVerticalMaxLength:Le,gradientVerticalMinLength:pf}=Nb;F=Fd in Hd?"horizontal"===Xc?"top"===Ad||"bottom"===Ad?Ul(Gc,"width",We,le):We:Ul(Gc,"height",pf,Le):void 0}}return F},labelOverlap:F=>{var {legend:qa,legendConfig:Fa,scaleType:nb}=F,Db,Nb;F=null!==(Db=null!==(Nb=qa.labelOverlap)&&void 0!==Nb?Nb:Fa.labelOverlap)&&void 0!==Db?Db:
fa(["quantile","threshold","log","symlog"],nb)?"greedy":void 0;return F},symbolType:F=>{var {legend:qa,markDef:Fa,channel:nb,encoding:Db}=F,Nb;if(null!==(Nb=qa.symbolType)&&void 0!==Nb)var Gc=Nb;else a:{F=Fa.type;Nb=Fa.shape;if("shape"!==nb){const Xc=null!==(Gc=Oi(Db.shape))&&void 0!==Gc?Gc:Nb;if(Xc){Gc=Xc;break a}}switch(F){case "bar":case "rect":case "image":case "square":Gc="square";break a;case "line":case "trail":case "rule":Gc="stroke";break a;case "arc":case "point":case "circle":case "tick":case "geoshape":case "area":case "text":Gc=
"circle";break a}Gc=void 0}return Gc},title:F=>{var {fieldOrDatumDef:qa,config:Fa}=F;return ad(qa,Fa,{allowDisabling:!0})},type:F=>{var {legendType:qa,scaleType:Fa,channel:nb}=F;if(Ic(nb)&&Fa in Hd){if("gradient"===qa)return}else if("symbol"===qa)return;return qa},values:F=>{var {fieldOrDatumDef:qa,legend:Fa}=F;F=Fa.values;F=Jh(F)?Tf(qa,F):Zc(F)?F:void 0;return F}},wo="type clipAngle clipExtent center rotate precision reflectX reflectY coefficient distance fraction lobes parallel radius ratio spacing tilt".split(" ");
class zq extends An{constructor(F,qa,Fa,nb){super(Object.assign({},qa),{name:F});this.specifiedProjection=qa;this.size=Fa;this.data=nb;kc(this,"merged",!1)}get isFit(){return!!this.data}}class rm extends Dk{clone(){return new rm(null,vb(this.bins))}constructor(F,qa){super(F);this.bins=qa}static makeFromEncoding(F,qa){const Fa=qa.reduceFieldDef((nb,Db,Nb)=>{if(Eb(Db)&&nc(Db.bin)){const {key:Le,binComponent:pf}=hm(Db,Db.bin,qa);var Gc=Object,Xc=Gc.assign,Ad=nb[Le];var Fd=qa.config;if(Xe(Db,Nb)){var le,
We;const kg=Ij(qa)?null!==(le=null!==(We=qa.axis(Nb))&&void 0!==We?We:qa.legend(Nb))&&void 0!==le?le:{}:{};Nb=qb(Db,{expr:"datum"});le=qb(Db,{expr:"datum",binSuffix:"end"});Db={formulaAs:qb(Db,{binSuffix:"range",forAs:!0}),formula:wg(Nb,le,kg.format,kg.formatType,Fd)}}else Db={};nb[Le]=Xc.call(Gc,{},pf,Ad,Db)}return nb},{});return D(Fa)?null:new rm(F,Fa)}static makeFromTransform(F,qa,Fa){const {key:nb,binComponent:Db}=hm(qa,qa.bin,Fa);return new rm(F,{[nb]:Db})}merge(F,qa){for(const Fa of jc(F.bins))Fa in
this.bins?(qa(F.bins[Fa].signal,this.bins[Fa].signal),this.bins[Fa].as=ha([...this.bins[Fa].as,...F.bins[Fa].as],ba)):this.bins[Fa]=F.bins[Fa];for(const Fa of F.children)F.removeChild(Fa),Fa.parent=this;F.remove()}producedFields(){return new Set(Fc(this.bins).map(F=>F.as).flat(2))}dependentFields(){return new Set(Fc(this.bins).map(F=>F.field))}hash(){return"Bin ".concat(ba(this.bins))}assemble(){return Fc(this.bins).flatMap(F=>{const qa=[],[Fa,...nb]=F.as;var Db=F.bin,Nb=Object.assign({},Db);Db=Db.extent;
Nb=(delete Nb.extent,Nb);Nb=Object.assign({},{type:"bin",field:pb(F.field),as:Fa,signal:F.signal},Hb(Db)?{extent:null}:{extent:Db},F.span?{span:{signal:"span(".concat(F.span,")")}}:{},Nb);!Db&&F.extentSignal&&(qa.push({type:"extent",field:pb(F.field),signal:F.extentSignal}),Nb.extent={signal:F.extentSignal});qa.push(Nb);for(const Gc of nb)for(Db=0;2>Db;Db++)qa.push({type:"formula",expr:qb({field:Fa[Db]},{expr:"datum"}),as:Gc[Db]});F.formula&&qa.push({type:"formula",expr:F.formula,as:F.formulaAs});
return qa})}}class gn extends Dk{clone(){return new gn(null,new Set(this.dimensions),vb(this.measures))}constructor(F,qa,Fa){super(F);this.dimensions=qa;this.measures=Fa}get groupBy(){return this.dimensions}static makeFromEncoding(F,qa){let Fa=!1;qa.forEachFieldDef(Nb=>{Nb.aggregate&&(Fa=!0)});const nb={},Db=new Set;if(!Fa)return null;qa.forEachFieldDef((Nb,Gc)=>{const {aggregate:Xc,field:Ad}=Nb;if(Xc)if("count"===Xc){var Fd;nb["*"]=null!==(Fd=nb["*"])&&void 0!==Fd?Fd:{};nb["*"].count=new Set([qb(Nb,
{forAs:!0})])}else{if(La(Xc)||Bb(Xc)){var le;Nb=La(Xc)?"argmin":"argmax";Fd=Xc[Nb];nb[Fd]=null!==(le=nb[Fd])&&void 0!==le?le:{};nb[Fd][Nb]=new Set([qb({op:Nb,field:Fd},{forAs:!0})])}else{var We;nb[Ad]=null!==(We=nb[Ad])&&void 0!==We?We:{};nb[Ad][Xc]=new Set([qb(Nb,{forAs:!0})])}if(gi[Gc]&&"unaggregated"===qa.scaleDomain(Gc)){var Le;nb[Ad]=null!==(Le=nb[Ad])&&void 0!==Le?Le:{};nb[Ad].min=new Set([qb({field:Ad,aggregate:"min"},{forAs:!0})]);nb[Ad].max=new Set([qb({field:Ad,aggregate:"max"},{forAs:!0})])}}else le=
Ij(qa)?qa.encoding[Kb(Gc)]:void 0,Eb(Nb)&&Ij(qa)&&Gh(Gc,Nb,le,qa.stack,qa.markDef,qa.config)?(Db.add(qb(Nb,{})),Db.add(qb(Nb,{suffix:"end"})),Nb.bin&&Xe(Nb,Gc)&&Db.add(qb(Nb,{binSuffix:"range"}))):Gc in ac?(Gc=sc(Gc),Db.add(qa.getName(Gc))):Db.add(qb(Nb))});return 0===Db.size+jc(nb).length?null:new gn(F,Db,nb)}static makeFromTransform(F,qa){const Fa=new Set,nb={};for(const Xc of qa.aggregate){const {op:Ad,field:Fd,as:le}=Xc;if(Ad)if("count"===Ad){var Db;nb["*"]=null!==(Db=nb["*"])&&void 0!==Db?Db:
{};nb["*"].count=new Set([le?le:qb(Xc,{forAs:!0})])}else{var Nb;nb[Fd]=null!==(Nb=nb[Fd])&&void 0!==Nb?Nb:{};nb[Fd][Ad]=new Set([le?le:qb(Xc,{forAs:!0})])}}for(const Xc of null!==(Gc=qa.groupby)&&void 0!==Gc?Gc:[]){var Gc;Fa.add(Xc)}return 0===Fa.size+jc(nb).length?null:new gn(F,Fa,nb)}merge(F){if(ka(this.dimensions,F.dimensions)){var qa=this.measures;F=F.measures;for(const nb of jc(F)){const Db=F[nb];for(const Nb of jc(Db))if(nb in qa){var Fa;qa[nb][Nb]=new Set([...(null!==(Fa=qa[nb][Nb])&&void 0!==
Fa?Fa:[]),...Db[Nb]])}else qa[nb]={[Nb]:Db[Nb]}}return!0}mi.debug(...["different dimensions, cannot merge"]);return!1}addDimensions(F){F.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...jc(this.measures)])}producedFields(){const F=new Set;for(const qa of jc(this.measures))for(const Fa of jc(this.measures[qa])){const nb=this.measures[qa][Fa];0===nb.size?F.add("".concat(Fa,"_").concat(qa)):nb.forEach(F.add,F)}return F}hash(){return"Aggregate ".concat(ba({dimensions:this.dimensions,
measures:this.measures}))}assemble(){const F=[],qa=[],Fa=[];for(const nb of jc(this.measures))for(const Db of jc(this.measures[nb]))for(const Nb of this.measures[nb][Db])Fa.push(Nb),F.push(Db),qa.push("*"===nb?null:pb(nb));return{type:"aggregate",groupby:[...this.dimensions].map(pb),ops:F,fields:qa,as:Fa}}}class $n extends Dk{constructor(F,qa,Fa,nb){super(F);this.model=qa;this.name=Fa;this.data=nb;kc(this,"column",void 0);kc(this,"row",void 0);kc(this,"facet",void 0);kc(this,"childModel",void 0);
for(const Db of pd)if(F=qa.facet[Db]){const {bin:Nb,sort:Gc}=F;this[Db]=Object.assign({},{name:qa.getName("".concat(Db,"_domain")),fields:[qb(F),...(nc(Nb)?[qb(F,{binSuffix:"end"})]:[])]},xg(Gc)?{sortField:Gc}:Jh(Gc)?{sortIndexField:Ej(F,Db)}:{})}this.childModel=qa.child}hash(){let F="Facet";for(const qa of pd)this[qa]&&(F+=" ".concat(qa.charAt(0),":").concat(ba(this[qa])));return F}get fields(){const F=[];for(const Fa of pd){var qa;(null===(qa=this[Fa])||void 0===qa?0:qa.fields)&&F.push(...this[Fa].fields)}return F}dependentFields(){const F=
new Set(this.fields);for(const qa of pd)this[qa]&&(this[qa].sortField&&F.add(this[qa].sortField.field),this[qa].sortIndexField&&F.add(this[qa].sortIndexField));return F}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const F={};for(const nb of rh){var qa=this.childModel.component.scales[nb];if(qa&&!qa.merged){var Fa=qa.get("type");qa=qa.get("range");Fa in jg&&rd(qa)&&(Fa=Yd(this.childModel,nb),(Fa=Gd(Fa))?F[nb]=Fa:Wd(Qd(nb)))}}return F}assembleRowColumnHeaderData(F,
qa,Fa){const nb={row:"y",column:"x"}[F],Db=[],Nb=[],Gc=[];Fa&&Fa[nb]&&(qa?(Db.push("distinct_".concat(Fa[nb])),Nb.push("max")):(Db.push(Fa[nb]),Nb.push("distinct")),Gc.push("distinct_".concat(Fa[nb])));const {sortField:Xc,sortIndexField:Ad}=this[F];if(Xc){const {op:Fd="min",field:le}=Xc;Db.push(le);Nb.push(Fd);Gc.push(qb(Xc,{forAs:!0}))}else Ad&&(Db.push(Ad),Nb.push("max"),Gc.push(Ad));return{name:this[F].name,source:null!==qa&&void 0!==qa?qa:this.data,transform:[Object.assign({},{type:"aggregate",
groupby:this[F].fields},Db.length?{fields:Db,ops:Nb,as:Gc}:{})]}}assembleFacetHeaderData(F){const {columns:qa}=this.model.layout,{layoutHeaders:Fa}=this.model.component,nb=[],Db={};for(const le of fn){for(const We of Ap){var Nb,Gc=null!==(Nb=Fa[le]&&Fa[le][We])&&void 0!==Nb?Nb:[];for(const Le of Gc){var Xc;if(0<(null===(Xc=Le.axes)||void 0===Xc?void 0:Xc.length)){Db[le]=!0;break}}}Db[le]&&(Gc='length(data("'.concat(this.facet.name,'"))'),Gc="row"===le?qa?{signal:"ceil(".concat(Gc," / ").concat(qa,
")")}:1:qa?{signal:"min(".concat(Gc,", ").concat(qa,")")}:{signal:Gc},nb.push({name:"".concat(this.facet.name,"_").concat(le),transform:[{type:"sequence",start:0,stop:Gc}]}))}const {row:Ad,column:Fd}=Db;(Ad||Fd)&&nb.unshift(this.assembleRowColumnHeaderData("facet",null,F));return nb}assemble(){const F=[];var qa=null;const Fa=this.getChildIndependentFieldsWithStep(),{column:nb,row:Db,facet:Nb}=this;if(nb&&Db&&(Fa.x||Fa.y)){var Gc,Xc;qa="cross_".concat(this.column.name,"_").concat(this.row.name);const Ad=
[].concat(null!==(Gc=Fa.x)&&void 0!==Gc?Gc:[],null!==(Xc=Fa.y)&&void 0!==Xc?Xc:[]);Gc=Ad.map(()=>"distinct");F.push({name:qa,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:Ad,ops:Gc}]})}for(const Ad of["column","row"])this[Ad]&&F.push(this.assembleRowColumnHeaderData(Ad,qa,Fa));Nb&&(qa=this.assembleFacetHeaderData(Fa))&&F.push(...qa);return F}}class tl extends Dk{clone(){return new tl(null,vb(this._parse))}constructor(F,qa){super(F);kc(this,"_parse",void 0);this._parse=qa}hash(){return"Parse ".concat(ba(this._parse))}static makeExplicit(F,
qa,Fa){let nb={};qa=qa.data;!Vi(qa)&&qa&&qa.format&&qa.format.parse&&(nb=qa.format.parse);return this.makeWithAncestors(F,nb,{},Fa)}static makeWithAncestors(F,qa,Fa,nb){for(var Db of jc(Fa)){const Gc=nb.getWithExplicit(Db);void 0!==Gc.value&&(Gc.explicit||Gc.value===Fa[Db]||"derived"===Gc.value||"flatten"===Fa[Db]?delete Fa[Db]:Wd($c(Db,Fa[Db],Gc.value)))}for(var Nb of jc(qa))Db=nb.get(Nb),void 0!==Db&&(Db===qa[Nb]?delete qa[Nb]:Wd($c(Nb,qa[Nb],Db)));qa=new An(qa,Fa);nb.copyAll(qa);Fa={};for(const Gc of jc(qa.combine()))Nb=
qa.get(Gc),null!==Nb&&(Fa[Gc]=Nb);return 0===jc(Fa).length||nb.parseNothing?null:new tl(F,Fa)}get parse(){return this._parse}merge(F){this._parse=Object.assign({},this._parse,F.parse);F.remove()}assembleFormatParse(){const F={};for(const qa of jc(this._parse)){const Fa=this._parse[qa];1===Pa(qa)&&(F[qa]=Fa)}return F}producedFields(){return new Set(jc(this._parse))}dependentFields(){return new Set(jc(this._parse))}assembleTransforms(F){F=void 0===F?!1:F;return jc(this._parse).filter(qa=>F?1<Pa(qa):
!0).map(qa=>{const Fa=im(qa,this._parse[qa]);return Fa?{type:"formula",expr:Fa,as:Va(qa)}:null}).filter(qa=>null!==qa)}}class Lm extends Dk{clone(){return new Lm(null)}constructor(F){super(F)}dependentFields(){return new Set}producedFields(){return new Set(["_vgsid_"])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:"_vgsid_"}}}class Dp extends Dk{clone(){return new Dp(null,this.params)}constructor(F,qa){super(F);this.params=qa}dependentFields(){return new Set}producedFields(){}hash(){return"Graticule ".concat(ba(this.params))}assemble(){return Object.assign({},
{type:"graticule"},!0===this.params?{}:this.params)}}class Ep extends Dk{clone(){return new Ep(null,this.params)}constructor(F,qa){super(F);this.params=qa}dependentFields(){return new Set}producedFields(){var F;return new Set([null!==(F=this.params.as)&&void 0!==F?F:"data"])}hash(){return"Hash ".concat(ba(this.params))}assemble(){return Object.assign({},{type:"sequence"},this.params)}}class Jn extends Dk{constructor(F){var qa;super(null);kc(this,"_data",void 0);kc(this,"_name",void 0);kc(this,"_generator",
void 0);F=null!==(qa=F)&&void 0!==qa?qa:{name:"source"};let Fa;Vi(F)||(Fa=F.format?Object.assign({},K(F.format,["parse"])):{});if("values"in F)this._data={values:F.values};else if("url"in F)this._data={url:F.url},Fa.type||(qa=/(?:\.([^.]+))?$/.exec(F.url)[1],fa(["json","csv","tsv","dsv","topojson"],qa)||(qa="json"),Fa.type=qa);else if("sphere"in F)this._data={values:[{type:"Sphere"}]};else if(Fg(F)||Vi(F))this._data={};this._generator=Vi(F);F.name&&(this._name=F.name);Fa&&!D(Fa)&&(this._data.format=
Fa)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(F){this._name=F}set parent(F){throw Error("Source nodes have to be roots.");}remove(){throw Error("Source nodes are roots and cannot be removed.");}hash(){throw Error("Cannot hash sources");}assemble(){return Object.assign({},{name:this._name},this._data,{transform:[]})}}var Fp=new WeakMap;class Kn{constructor(){Fp.set(this,
{writable:!0,value:void 0});Ab(this,Fp,!1)}setModified(){Ab(this,Fp,!0)}get modifiedFlag(){var F=Fp.get(this);if(!F)throw new TypeError("attempted to get private field on non-instance");F=F.get?F.get.call(this):F.value;return F}}class Pm extends Kn{getNodeDepths(F,qa,Fa){Fa.set(F,qa);for(const nb of F.children)this.getNodeDepths(nb,qa+1,Fa);return Fa}optimize(F){F=[...this.getNodeDepths(F,0,new Map).entries()].sort((qa,Fa)=>Fa[1]-qa[1]);for(const qa of F)this.run(qa[0]);return this.modifiedFlag}}
class Wo extends Kn{optimize(F){this.run(F);for(const qa of F.children)this.optimize(qa);return this.modifiedFlag}}class Bs extends Wo{mergeNodes(F,qa){const Fa=qa.shift();for(const nb of qa)F.removeChild(nb),nb.parent=Fa,nb.remove()}run(F){const qa=F.children.map(nb=>nb.hash()),Fa={};for(let nb=0;nb<qa.length;nb++)void 0===Fa[qa[nb]]?Fa[qa[nb]]=[F.children[nb]]:Fa[qa[nb]].push(F.children[nb]);for(const nb of jc(Fa))1<Fa[nb].length&&(this.setModified(),this.mergeNodes(F,Fa[nb]))}}class Um extends Wo{constructor(F){super();
kc(this,"requiresSelectionId",void 0);this.requiresSelectionId=F&&Uj(F)}run(F){!(F instanceof Lm)||this.requiresSelectionId&&(Xl(F.parent)||F.parent instanceof gn||F.parent instanceof tl)||(this.setModified(),F.remove())}}class Aq extends Kn{optimize(F){this.run(F,new Set);return this.modifiedFlag}run(F,qa){let Fa=new Set;F instanceof sn&&(Fa=F.producedFields(),H(Fa,qa)&&(this.setModified(),F.removeFormulas(qa),0===F.producedFields.length&&F.remove()));for(const nb of F.children)this.run(nb,new Set([...qa,
...Fa]))}}class Cs extends Wo{constructor(){super()}run(F){F instanceof ym&&!F.isRequired()&&(this.setModified(),F.remove())}}class xo extends Pm{run(F){if(!(Xl(F)||1<F.numChildren()))for(const qa of F.children)qa instanceof tl&&(F instanceof tl?(this.setModified(),F.merge(qa)):ea(F.producedFields(),qa.dependentFields())||(this.setModified(),qa.swapWithParent()))}}class Bn extends Pm{run(F){const qa=[...F.children];var Fa=F.children.filter(Db=>Db instanceof tl);if(1<F.numChildren()&&1<=Fa.length){const Db=
{};var nb=new Set;for(const Nb of Fa){Fa=Nb.parse;for(const Gc of jc(Fa))Gc in Db?Db[Gc]!==Fa[Gc]&&nb.add(Gc):Db[Gc]=Fa[Gc]}for(const Nb of nb)delete Db[Nb];if(!D(Db)){this.setModified();nb=new tl(F,Db);for(const Nb of qa){if(Nb instanceof tl)for(const Gc of jc(Db))delete Nb.parse[Gc];F.removeChild(Nb);Nb.parent=nb;Nb instanceof tl&&0===jc(Nb.parse).length&&Nb.remove()}}}}}class Ds extends Pm{run(F){F instanceof ym||0<F.numChildren()||F instanceof $n||F instanceof Jn||(this.setModified(),F.remove())}}
class Es extends Pm{run(F){F=F.children.filter(Fa=>Fa instanceof sn);const qa=F.pop();for(const Fa of F)this.setModified(),qa.merge(Fa)}}class Gp extends Pm{run(F){var qa=F.children.filter(Db=>Db instanceof gn);const Fa={};for(var nb of qa)qa=ba(nb.groupBy),qa in Fa||(Fa[qa]=[]),Fa[qa].push(nb);for(const Db of jc(Fa))if(nb=Fa[Db],1<nb.length){qa=nb.pop();for(const Nb of nb)qa.merge(Nb)&&(F.removeChild(Nb),Nb.parent=qa,Nb.remove(),this.setModified())}}}class Gr extends Pm{constructor(F){super();this.model=
F}run(F){var qa=!(Xl(F)||F instanceof Hn||F instanceof tl||F instanceof Lm);const Fa=[],nb=[];for(const Db of F.children)Db instanceof rm&&(qa&&!ea(F.producedFields(),Db.dependentFields())?Fa.push(Db):nb.push(Db));if(0<Fa.length){qa=Fa.pop();for(const Db of Fa)qa.merge(Db,this.model.renameSignal.bind(this.model));this.setModified();F instanceof rm?F.merge(qa,this.model.renameSignal.bind(this.model)):qa.swapWithParent()}if(1<nb.length){F=nb.pop();for(const Db of nb)F.merge(Db,this.model.renameSignal.bind(this.model));
this.setModified()}}}class Hp extends Pm{run(F){var qa=[...F.children];if(wa(qa,Db=>Db instanceof ym)&&!(1>=F.numChildren())){var Fa=[];for(const Db of qa)if(Db instanceof ym){for(qa=Db;1===qa.numChildren();){const [Nb]=qa.children;if(Nb instanceof ym)qa=Nb;else break}Fa.push(...qa.children);if(nb)F.removeChild(Db),Db.parent=nb.parent,nb.parent.removeChild(nb),nb.parent=qa,this.setModified();else var nb=qa}else Fa.push(Db);if(Fa.length){this.setModified();for(const Db of Fa)Db.parent.removeChild(Db),
Db.parent=nb}}}}class ao extends Dk{clone(){return new ao(null,vb(this.transform))}constructor(F,qa){super(F);this.transform=qa}addDimensions(F){this.transform.groupby=ha(this.transform.groupby.concat(F),qa=>qa)}dependentFields(){const F=new Set;this.transform.groupby&&this.transform.groupby.forEach(F.add,F);this.transform.joinaggregate.map(qa=>qa.field).filter(qa=>void 0!==qa).forEach(F.add,F);return F}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(F){var qa;
return null!==(qa=F.as)&&void 0!==qa?qa:qb(F)}hash(){return"JoinAggregateTransform ".concat(ba(this.transform))}assemble(){const F=[],qa=[],Fa=[];for(var nb of this.transform.joinaggregate)qa.push(nb.op),Fa.push(this.getDefaultName(nb)),F.push(void 0===nb.field?null:nb.field);nb=this.transform.groupby;return Object.assign({},{type:"joinaggregate",as:Fa,ops:qa,fields:F},void 0!==nb?{groupby:nb}:{})}}class tn extends Dk{clone(){return new tn(null,vb(this._stack))}constructor(F,qa){super(F);kc(this,
"_stack",void 0);this._stack=qa}static makeFromTransform(F,qa){const {stack:Fa,groupby:nb,as:Db,offset:Nb="zero"}=qa;var Gc=[];const Xc=[];if(void 0!==qa.sort)for(const Ad of qa.sort)Gc.push(Ad.field),Xc.push(Ha(Ad.order,"ascending"));Gc={field:Gc,order:Xc};qa=cn(Db)?Db:G(Db)?[Db,Db+"_end"]:[qa.stack+"_start",qa.stack+"_end"];return new tn(F,{stackField:Fa,groupby:nb,offset:Nb,sort:Gc,facetby:[],as:qa})}static makeFromEncoding(F,qa){var Fa=qa.stack,{encoding:nb}=qa;if(!Fa)return null;const {groupbyChannel:Db,
fieldChannel:Nb,offset:Gc,impute:Xc}=Fa;let Ad;Db&&(Ad=ee(nb[Db]));Fa=Zl(qa);nb=qa.encoding.order;nb=Jh(nb)||Lf(nb)?qh(nb):Fa.reduce((Fd,le)=>{Fd.field.push(le);Fd.order.push("y"===Nb?"descending":"ascending");return Fd},{field:[],order:[]});return new tn(F,{dimensionFieldDef:Ad,stackField:qa.vgField(Nb),facetby:[],stackby:Fa,sort:nb,offset:Gc,impute:Xc,as:[qa.vgField(Nb,{suffix:"start",forAs:!0}),qa.vgField(Nb,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(F){this._stack.facetby.push(...F)}dependentFields(){const F=
new Set;F.add(this._stack.stackField);this.getGroupbyFields().forEach(F.add,F);this._stack.facetby.forEach(F.add,F);this._stack.sort.field.forEach(F.add,F);return F}producedFields(){return new Set(this._stack.as)}hash(){return"Stack ".concat(ba(this._stack))}getGroupbyFields(){const {dimensionFieldDef:F,impute:qa,groupby:Fa}=this._stack;return F?F.bin?qa?[qb(F,{binSuffix:"mid"})]:[qb(F,{}),qb(F,{binSuffix:"end"})]:[qb(F)]:null!==Fa&&void 0!==Fa?Fa:[]}assemble(){const F=[],{facetby:qa,dimensionFieldDef:Fa,
stackField:nb,stackby:Db,sort:Nb,offset:Gc,impute:Xc,as:Ad}=this._stack;if(Xc&&Fa){const {band:Fd=.5,bin:le}=Fa;le&&F.push({type:"formula",expr:"".concat(Fd,"*")+qb(Fa,{expr:"datum"})+"+".concat(1-Fd,"*")+qb(Fa,{expr:"datum",binSuffix:"end"}),as:qb(Fa,{binSuffix:"mid",forAs:!0})});F.push({type:"impute",field:nb,groupby:[...Db,...qa],key:qb(Fa,{binSuffix:"mid"}),method:"value",value:0})}F.push({type:"stack",groupby:[...this.getGroupbyFields(),...qa],field:nb,sort:Nb,as:Ad,offset:Gc});return F}}class yo extends Dk{clone(){return new yo(null,
vb(this.transform))}constructor(F,qa){super(F);this.transform=qa}addDimensions(F){this.transform.groupby=ha(this.transform.groupby.concat(F),qa=>qa)}dependentFields(){var F,qa;const Fa=new Set;(null!==(F=this.transform.groupby)&&void 0!==F?F:[]).forEach(Fa.add,Fa);(null!==(qa=this.transform.sort)&&void 0!==qa?qa:[]).forEach(nb=>Fa.add(nb.field));this.transform.window.map(nb=>nb.field).filter(nb=>void 0!==nb).forEach(Fa.add,Fa);return Fa}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(F){var qa;
return null!==(qa=F.as)&&void 0!==qa?qa:qb(F)}hash(){return"WindowTransform ".concat(ba(this.transform))}assemble(){const F=[],qa=[],Fa=[],nb=[];for(var Db of this.transform.window)qa.push(Db.op),Fa.push(this.getDefaultName(Db)),nb.push(void 0===Db.param?null:Db.param),F.push(void 0===Db.field?null:Db.field);Db=this.transform.frame;const Nb=this.transform.groupby;if(Db&&null===Db[0]&&null===Db[1]&&qa.every(Fd=>Ob(Fd)))return Object.assign({},{type:"joinaggregate",as:Fa,ops:qa,fields:F},void 0!==Nb?
{groupby:Nb}:{});const Gc=[],Xc=[];if(void 0!==this.transform.sort)for(const Fd of this.transform.sort){var Ad;Gc.push(Fd.field);Xc.push(null!==(Ad=Fd.order)&&void 0!==Ad?Ad:"ascending")}Ad=this.transform.ignorePeers;return Object.assign({},{type:"window",params:nb,as:Fa,ops:qa,fields:F,sort:{field:Gc,order:Xc}},void 0!==Ad?{ignorePeers:Ad}:{},void 0!==Nb?{groupby:Nb}:{},void 0!==Db?{frame:Db}:{})}}class zm{constructor(F){kc(this,"signal",void 0);Object.defineProperty(this,"signal",{enumerable:!0,
get:F})}static fromName(F,qa){return new zm(()=>F(qa))}}class Ip extends An{constructor(F,qa){super({},{name:F});kc(this,"merged",!1);this.setWithExplicit("type",qa)}domainDefinitelyIncludesZero(){return!1!==this.get("zero")?!0:wa(this.get("domains"),F=>Jh(F)&&2===F.length&&0>=F[0]&&0<=F[1])}}const Fs=["range","scheme"],Mm={bins:F=>{var {model:qa,fieldOrDatumDef:Fa}=F;return Lf(Fa)?$i(qa,Fa):void 0},interpolate:F=>{var {channel:qa,fieldOrDatumDef:Fa}=F;F=Fa.type;F=fa(["color","fill","stroke"],qa)&&
"nominal"!==F?"hcl":void 0;return F},nice:F=>{var {scaleType:qa,channel:Fa,fieldOrDatumDef:nb}=F;var Db;F=(null===(Db=ee(nb))||void 0===Db?0:Db.bin)||fa([jb.TIME,jb.UTC],qa)?void 0:Fa in df?!0:void 0;return F},padding:F=>{var {channel:qa,scaleType:Fa,fieldOrDatumDef:nb,markDef:Db,config:Nb}=F;a:{F=Nb.scale;var Gc=Nb.bar;if(qa in df){if(Fa in Hd){if(void 0!==F.continuousPadding){F=F.continuousPadding;break a}const {type:Xc,orient:Ad}=Db;if("bar"===Xc&&(!Lf(nb)||!nb.bin&&!nb.timeUnit)&&("vertical"===
Ad&&"x"===qa||"horizontal"===Ad&&"y"===qa)){F=Gc.continuousBandSize;break a}}if(Fa===jb.POINT){F=F.pointPadding;break a}}F=void 0}return F},paddingInner:F=>{var {scalePadding:qa,channel:Fa,markDef:nb,config:Db}=F;if(void 0!==qa)F=void 0;else if(Fa in df){const {bandPaddingInner:Nb,barBandPaddingInner:Gc,rectBandPaddingInner:Xc}=Db.scale;F=Ha(Nb,"bar"===nb.type?Gc:Xc)}else F=void 0;return F},paddingOuter:F=>{var {scalePadding:qa,channel:Fa,scaleType:nb,scalePaddingInner:Db,config:Nb}=F;void 0!==qa?
F=void 0:Fa in df&&nb===jb.BAND?({bandPaddingOuter:F}=Nb.scale,F=Ha(F,Zc(Db)?{signal:"".concat(Db.signal,"/2")}:Db/2)):F=void 0;return F},reverse:F=>{var {fieldOrDatumDef:qa,scaleType:Fa,channel:nb,config:Db}=F;F=Lf(qa)?qa.sort:void 0;var Nb=Db.scale;F="x"===nb&&void 0!==Nb.xReverse?Fa in Ef&&"descending"===F?Zc(Nb.xReverse)?{signal:"!".concat(Nb.xReverse.signal)}:!Nb.xReverse:Nb.xReverse:Fa in Ef&&"descending"===F?!0:void 0;return F},zero:F=>{var {channel:qa,fieldOrDatumDef:Fa,domain:nb,markDef:Db,
scaleType:Nb}=F;a:if(nb&&"unaggregated"!==nb&&Nb in Ef){if(Jh(nb)&&(F=nb[nb.length-1],0>=nb[0]&&0<=F)){F=!0;break a}F=!1}else if("size"!==qa||"quantitative"!==Fa.type||Nb in ze)if(Lf(Fa)&&Fa.bin||!fa([...rh,...qi],qa))F=!1;else{const {orient:Gc,type:Xc}=Db;F=fa(["bar","area","line","trail"],Xc)&&("horizontal"===Gc&&"y"===qa||"vertical"===Gc&&"x"===qa)?!1:!0}else F=!0;return F}},Hr=Ng((F,qa)=>pc[F]-pc[qa]);class Bq{constructor(){kc(this,"nameMap",void 0);this.nameMap={}}rename(F,qa){this.nameMap[F]=
qa}has(F){return void 0!==this.nameMap[F]}get(F){for(;this.nameMap[F]&&F!==this.nameMap[F];)F=this.nameMap[F];return F}}class bo{constructor(F,qa,Fa,nb,Db,Nb,Gc){var Xc,Ad;this.type=qa;this.parent=Fa;this.config=Db;kc(this,"name",void 0);kc(this,"size",void 0);kc(this,"title",void 0);kc(this,"description",void 0);kc(this,"data",void 0);kc(this,"transforms",void 0);kc(this,"layout",void 0);kc(this,"scaleNameMap",void 0);kc(this,"projectionNameMap",void 0);kc(this,"signalNameMap",void 0);kc(this,"component",
void 0);kc(this,"view",void 0);kc(this,"children",[]);kc(this,"correctDataNames",Fd=>{Fd.from&&Fd.from.data&&(Fd.from.data=this.lookupDataSource(Fd.from.data));Fd.from&&Fd.from.facet&&Fd.from.facet.data&&(Fd.from.facet.data=this.lookupDataSource(Fd.from.facet.data));return Fd});this.parent=Fa;this.config=Db;this.view=Wc(Gc);this.name=null!==(Xc=F.name)&&void 0!==Xc?Xc:nb;this.title=Ue(F.title)?{text:F.title}:F.title?this.initTitle(F.title):void 0;this.scaleNameMap=Fa?Fa.scaleNameMap:new Bq;this.projectionNameMap=
Fa?Fa.projectionNameMap:new Bq;this.signalNameMap=Fa?Fa.signalNameMap:new Bq;this.data=F.data;this.description=F.description;this.transforms=Yk(null!==(Ad=F.transform)&&void 0!==Ad?Ad:[]);this.layout="layer"===qa||"unit"===qa?{}:T(F,qa,Db);this.component={data:{sources:Fa?Fa.component.data.sources:[],outputNodes:Fa?Fa.component.data.outputNodes:{},outputNodeRefCounts:Fa?Fa.component.data.outputNodeRefCounts:{},isFaceted:"facet"in F||Fa&&Fa.component.data.isFaceted&&void 0===F.data},layoutSize:new An,
layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({},{scale:{},axis:{},legend:{}},Nb?vb(Nb):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}initTitle(F){const qa=jc(F),Fa={text:Yf(F.text)};for(const nb of qa)Fa[nb]=Yf(F[nb]);return Fa}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale();this.parseLayoutSize();this.renameTopLevelLayoutSizeSignal();this.parseSelections();this.parseProjection();
this.parseData();this.parseAxesAndHeaders();this.parseLegends();this.parseMarkGroup()}parseScale(){var {ignoreRange:F}={};yk(this);Ij(this)?fm(this):y(this);for(const qa of kj)Ti(this,qa);F||Cj(this)}parseProjection(){em(this)}renameTopLevelLayoutSizeSignal(){"width"!==this.getName("width")&&this.renameSignal(this.getName("width"),"width");"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}parseLegends(){Bj(this)}assembleGroupStyle(){if("unit"===this.type||"layer"===
this.type){var F,qa;return null!==(F=null===(qa=this.view)||void 0===qa?void 0:qa.style)&&void 0!==F?F:"cell"}}assembleEncodeFromView(F){F=Object.assign({},F);F=(delete F.style,F);const qa={};for(const Fa of jc(F)){const nb=F[Fa];void 0!==nb&&(qa[Fa]=vf(nb))}return qa}assembleGroupEncodeEntry(F){let qa={};this.view&&(qa=this.assembleEncodeFromView(this.view));if(!F&&(this.description&&(qa.description=vf(this.description)),"unit"===this.type||"layer"===this.type)){var Fa;return Object.assign({},{width:this.getSizeSignalRef("width"),
height:this.getSizeSignalRef("height")},null!==(Fa=qa)&&void 0!==Fa?Fa:{})}return D(qa)?void 0:qa}assembleLayout(){if(this.layout){var F=this.layout,qa=Object.assign({},F);F=F.spacing;qa=(delete qa.spacing,qa);var {component:Fa,config:nb}=this,Db=Fa.layoutHeaders,Nb={};for(Xc of pd){var Gc=Db[Xc];if(null===Gc||void 0===Gc?0:Gc.facetFieldDef){const {titleAnchor:Ad,titleOrient:Fd}=Nf(["titleAnchor","titleOrient"],Gc.facetFieldDef.header,nb,Xc);Gc=dm(Xc,Fd);const le=As[Gc][Ad];void 0!==le&&(Nb[Gc]=le)}}var Xc=
D(Nb)?void 0:Nb;return Object.assign({},{padding:F},this.assembleDefaultLayout(),qa,Xc?{titleBand:Xc}:{})}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){var {layoutHeaders:F}=this.component,qa=[];for(var Fa of pd)if(F[Fa].title){var nb=qa,Db=nb.push;var Nb=Fa;var Gc=this.component.layoutHeaders[Nb].title,Xc=this.config?this.config:void 0,Ad=this.component.layoutHeaders[Nb].facetFieldDef?this.component.layoutHeaders[Nb].facetFieldDef:void 0;const {titleAnchor:Ig,titleAngle:Yg,titleOrient:pj}=
Nf(["titleAnchor","titleAngle","titleOrient"],Ad.header,Xc,Nb);var Fd=dm(Nb,pj),le=Ka(Yg);Nb={name:"".concat(Nb,"-title"),type:"group",role:"".concat(Fd,"-title"),title:Object.assign({},{text:Gc},"row"===Nb?{orient:"left"}:{},{style:"guide-title"},Cg(le,Fd),ch(Fd,le,Ig),bk(Xc,Ad,Nb,hg,Re))};Db.call(nb,Nb)}for(const Ig of fn){F=qa;qa=F.concat;nb=Ig;Db=this.component.layoutHeaders[nb];Fa=[];for(const Yg of Ap)if(Db[Yg])for(const pj of Db[Yg]){a:{Ad=void 0;Nb=nb;var We=Yg,Le=Db;if(Gc=pj){Xc=null;({facetFieldDef:kg}=
Le);Fd=this.config?this.config:void 0;kg&&Gc.labels&&({labelOrient:le}=Nf(["labelOrient"],kg.header,Fd,Nb),"row"===Nb&&!fa(["top","bottom"],le)||"column"===Nb&&!fa(["left","right"],le))&&(Xc=Ki(kg,Nb,Fd));const yg=kk(this)&&!cg(this.facet),Jg=Gc.axes,Fh=0<(null===Jg||void 0===Jg?void 0:Jg.length);if(Xc||Fh){const nk="row"===Nb?"height":"width";Fd=Object;le=Fd.assign;We={name:this.getName("".concat(Nb,"_").concat(We)),type:"group",role:"".concat(Nb,"-").concat(We)};if(Le.facetFieldDef){Le={data:this.getName(Nb+
"_domain")};{var pf=kg;const {sort:Li}=pf;var kg=xg(Li)?{field:qb(Li,{expr:"datum"}),order:null!==(Ad=Li.order)&&void 0!==Ad?Ad:"ascending"}:Jh(Li)?{field:Ej(pf,Nb,{expr:"datum"}),order:"ascending"}:{field:qb(pf,{expr:"datum"}),order:null!==Li&&void 0!==Li?Li:"ascending"}}Ad={from:Le,sort:kg}}else Ad={};Nb=le.call(Fd,{},We,Ad,Fh&&yg?{from:{data:this.getName("facet_domain_".concat(Nb))}}:{},Xc?{title:Xc}:{},Gc.sizeSignal?{encode:{update:{[nk]:Gc.sizeSignal}}}:{},Fh?{axes:Jg}:{});break a}}Nb=null}null!=
Nb&&Fa.push(Nb)}qa=qa.call(F,Fa)}return qa}assembleAxes(){return Bg(this.component.axes,this.config)}assembleLegends(){return ik(this)}assembleProjections(){var F=hk(this)||Gl(this)?Wg(this):Dl(this);return F}assembleTitle(){var F,qa=null!==(F=this.title)&&void 0!==F?F:{};F=Object.assign({},qa);qa=qa.encoding;F=(delete F.encoding,F);qa=Object.assign({},Uf(this.config.title).nonMark,F,qa?{encode:{update:qa}}:{});if(qa.text){if(fa(["unit","layer"],this.type)){if(fa(["middle",void 0],qa.anchor)){var Fa;
qa.frame=null!==(Fa=qa.frame)&&void 0!==Fa?Fa:"group"}}else{var nb;qa.anchor=null!==(nb=qa.anchor)&&void 0!==nb?nb:"start"}return D(qa)?void 0:qa}}assembleGroup(F){F=void 0===F?[]:F;const qa={};F=F.concat(this.assembleSignals());0<F.length&&(qa.signals=F);if(F=this.assembleLayout())qa.layout=F;qa.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());F=!this.parent||kk(this.parent)?Be(this):[];0<F.length&&(qa.scales=F);F=this.assembleAxes();0<F.length&&(qa.axes=F);F=this.assembleLegends();
0<F.length&&(qa.legends=F);return qa}getName(F){return la((this.name?this.name+"_":"")+F)}getDataName(F){return this.getName(fl[F].toLowerCase())}requestDataName(F){F=this.getDataName(F);const qa=this.component.data.outputNodeRefCounts;qa[F]=(qa[F]||0)+1;return F}getSizeSignalRef(F){if(kk(this.parent)){var qa=mj(F),Fa=oc(qa);if((qa=this.component.scales[Fa])&&!qa.merged){var nb=qa.get("type");const Db=qa.get("range");if(nb in jg&&rd(Db)){F=qa.get("name");nb=Yd(this,Fa);if(nb=Gd(nb))return Fa=qb({aggregate:"distinct",
field:nb},{expr:"datum"}),{signal:fi(F,qa,Fa)};Wd(Qd(Fa));return null}}}return{signal:this.signalNameMap.get(this.getName(F))}}lookupDataSource(F){const qa=this.component.data.outputNodes[F];return qa?qa.getSource():F}getSignalName(F){return this.signalNameMap.get(F)}renameSignal(F,qa){this.signalNameMap.rename(F,qa)}renameScale(F,qa){this.scaleNameMap.rename(F,qa)}renameProjection(F,qa){this.projectionNameMap.rename(F,qa)}scaleName(F,qa){if(qa)return this.getName(F);if(td[F]&&gi[F]&&this.component.scales[F]||
this.scaleNameMap.has(this.getName(F)))return this.scaleNameMap.get(this.getName(F))}projectionName(F){if(F)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(F){if(!this.component.scales)throw Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");
const qa=this.component.scales[F];return qa&&!qa.merged?qa:this.parent?this.parent.getScaleComponent(F):void 0}getSelectionComponent(F,qa){let Fa=this.component.selection[F];!Fa&&this.parent&&(Fa=this.parent.getSelectionComponent(F,qa));if(!Fa)throw Error('Cannot find a selection named "'.concat(qa,'".'));return Fa}hasAxisOrientSignalRef(){var F,qa;return(null===(F=this.component.axes.x)||void 0===F?void 0:F.some(Fa=>Fa.hasOrientSignalRef()))||(null===(qa=this.component.axes.y)||void 0===qa?void 0:
qa.some(Fa=>Fa.hasOrientSignalRef()))}}class Cq extends bo{vgField(F,qa){qa=void 0===qa?{}:qa;if(F=this.fieldDef(F))return qb(F,qa)}reduceFieldDef(F,qa){return nj(this.getMapping(),(Fa,nb,Db)=>(nb=ee(nb))?F(Fa,nb,Db):Fa,qa)}forEachFieldDef(F,qa){ug(this.getMapping(),(Fa,nb)=>{(Fa=ee(Fa))&&F(Fa,nb)},qa)}}class Ln extends Dk{clone(){return new Ln(null,vb(this.transform))}constructor(F,qa){var Fa,nb,Db;super(F);this.transform=qa;this.transform=vb(qa);F=null!==(Fa=this.transform.as)&&void 0!==Fa?Fa:[void 0,
void 0];this.transform.as=[null!==(nb=F[0])&&void 0!==nb?nb:"value",null!==(Db=F[1])&&void 0!==Db?Db:"density"]}dependentFields(){var F;return new Set([this.transform.density,...(null!==(F=this.transform.groupby)&&void 0!==F?F:[])])}producedFields(){return new Set(this.transform.as)}hash(){return"DensityTransform ".concat(ba(this.transform))}assemble(){var F=this.transform,qa=Object.assign({},F);F=F.density;qa=(delete qa.density,qa);return Object.assign({},{type:"kde",field:F},qa)}}class Xo extends Dk{clone(){return new Xo(null,
Object.assign({},this.filter))}constructor(F,qa){super(F);this.filter=qa}static make(F,qa){const {config:Fa,mark:nb,markDef:Db}=qa;if("filter"!==ag("invalid",Db,Fa))return null;const Nb=qa.reduceFieldDef((Gc,Xc,Ad)=>{(Ad=!!gi[Ad]&&qa.getScaleComponent(Ad))&&Ad.get("type")in Ef&&"count"!==Xc.aggregate&&!ib(nb)&&(Gc[Xc.field]=Xc);return Gc},{});return jc(Nb).length?new Xo(F,Nb):null}dependentFields(){return new Set(jc(this.filter))}producedFields(){return new Set}hash(){return"FilterInvalid ".concat(ba(this.filter))}assemble(){const F=
jc(this.filter).reduce((qa,Fa)=>{Fa=this.filter[Fa];const nb=qb(Fa,{expr:"datum"});null!==Fa&&("temporal"===Fa.type?qa.push("(isDate(".concat(nb,") || (isValid(").concat(nb,") \x26\x26 isFinite(+").concat(nb,")))")):"quantitative"===Fa.type&&(qa.push("isValid(".concat(nb,")")),qa.push("isFinite(+".concat(nb,")"))));return qa},[]);return 0<F.length?{type:"filter",expr:F.join(" \x26\x26 ")}:null}}class Mn extends Dk{clone(){return new Mn(this.parent,vb(this.transform))}constructor(F,qa){super(F);this.transform=
qa;this.transform=vb(qa);const {flatten:Fa,as:nb=[]}=this.transform;this.transform.as=Fa.map((Db,Nb)=>{var Gc;return null!==(Gc=nb[Nb])&&void 0!==Gc?Gc:Db})}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return"FlattenTransform ".concat(ba(this.transform))}assemble(){const {flatten:F,as:qa}=this.transform;return{type:"flatten",fields:F,as:qa}}}class Yo extends Dk{clone(){return new Yo(null,vb(this.transform))}constructor(F,qa){var Fa,
nb,Db;super(F);this.transform=qa;this.transform=vb(qa);F=null!==(Fa=this.transform.as)&&void 0!==Fa?Fa:[void 0,void 0];this.transform.as=[null!==(nb=F[0])&&void 0!==nb?nb:"key",null!==(Db=F[1])&&void 0!==Db?Db:"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return"FoldTransform ".concat(ba(this.transform))}assemble(){const {fold:F,as:qa}=this.transform;return{type:"fold",fields:F,as:qa}}}class co extends Dk{clone(){return new co(null,
vb(this.fields),this.geojson,this.signal)}static parseAll(F,qa){if(qa.component.projection&&!qa.component.projection.isFit)return F;let Fa=0;for(var nb of[["longitude","latitude"],["longitude2","latitude2"]]){const Db=nb.map(Nb=>{Nb=Pd(qa.encoding[Nb]);return Lf(Nb)?Nb.field:ih(Nb)?{expr:"".concat(Nb.datum)}:Vb(Nb)?{expr:"".concat(Nb.value)}:void 0});if(Db[0]||Db[1])F=new co(F,Db,null,qa.getName("geojson_".concat(Fa++)))}qa.channelHasField("shape")&&(nb=qa.typedFieldDef("shape"),"geojson"===nb.type&&
(F=new co(F,null,nb.field,qa.getName("geojson_".concat(Fa++)))));return F}constructor(F,qa,Fa,nb){super(F);this.fields=qa;this.geojson=Fa;this.signal=nb}dependentFields(){var F;const qa=(null!==(F=this.fields)&&void 0!==F?F:[]).filter(G);return new Set([...(this.geojson?[this.geojson]:[]),...qa])}producedFields(){return new Set}hash(){return"GeoJSON ".concat(this.geojson," ").concat(this.signal," ").concat(ba(this.fields))}assemble(){return Object.assign({},{type:"geojson"},this.fields?{fields:this.fields}:
{},this.geojson?{geojson:this.geojson}:{},{signal:this.signal})}}class zo extends Dk{clone(){return new zo(null,this.projection,vb(this.fields),vb(this.as))}constructor(F,qa,Fa,nb){super(F);this.projection=qa;this.fields=Fa;this.as=nb}static parseAll(F,qa){if(!qa.projectionName())return F;for(const Fa of[["longitude","latitude"],["longitude2","latitude2"]]){const nb=Fa.map(Nb=>{Nb=Pd(qa.encoding[Nb]);return Lf(Nb)?Nb.field:ih(Nb)?{expr:"".concat(Nb.datum)}:Vb(Nb)?{expr:"".concat(Nb.value)}:void 0}),
Db="longitude2"===Fa[0]?"2":"";if(nb[0]||nb[1])F=new zo(F,qa.projectionName(),nb,[qa.getName("x"+Db),qa.getName("y"+Db)])}return F}dependentFields(){return new Set(this.fields.filter(G))}producedFields(){return new Set(this.as)}hash(){return"Geopoint ".concat(this.projection," ").concat(ba(this.fields)," ").concat(ba(this.as))}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class eo extends Dk{clone(){return new eo(null,vb(this.transform))}constructor(F,
qa){super(F);this.transform=qa}dependentFields(){var F;return new Set([this.transform.impute,this.transform.key,...(null!==(F=this.transform.groupby)&&void 0!==F?F:[])])}producedFields(){return new Set([this.transform.impute])}processSequence(F){const {start:qa=0,stop:Fa,step:nb}=F;F=[qa,Fa,...(nb?[nb]:[])].join();return{signal:"sequence(".concat(F,")")}}static makeFromTransform(F,qa){return new eo(F,qa)}static makeFromEncoding(F,qa){const Fa=qa.encoding;var nb=Fa.x;const Db=Fa.y;if(Lf(nb)&&Lf(Db)){const Nb=
nb.impute?nb:Db.impute?Db:void 0;if(void 0===Nb)return;nb=nb.impute?Db:Db.impute?nb:void 0;const {method:Gc,value:Xc,frame:Ad,keyvals:Fd}=Nb.impute;qa=eg(qa.mark,Fa);return new eo(F,Object.assign({},{impute:Nb.field,key:nb.field},Gc?{method:Gc}:{},void 0!==Xc?{value:Xc}:{},Ad?{frame:Ad}:{},void 0!==Fd?{keyvals:Fd}:{},qa.length?{groupby:qa}:{}))}return null}hash(){return"Impute ".concat(ba(this.transform))}assemble(){const {impute:F,key:qa,keyvals:Fa,method:nb,groupby:Db,value:Nb,frame:Gc=[null,null]}=
this.transform,Xc=Object.assign({},{type:"impute",field:F,key:qa},Fa?{keyvals:void 0!==(null===Fa||void 0===Fa?void 0:Fa.stop)?this.processSequence(Fa):Fa}:{},{method:"value"},Db?{groupby:Db}:{},{value:nb&&"value"!==nb?null:Nb});if(nb&&"value"!==nb){const Ad=Object.assign({},{type:"window",as:["imputed_".concat(F,"_value")],ops:[nb],fields:[F],frame:Gc,ignorePeers:!1},Db?{groupby:Db}:{}),Fd={type:"formula",expr:"datum.".concat(F," \x3d\x3d\x3d null ? datum.imputed_").concat(F,"_value : datum.").concat(F),
as:F};return[Xc,Ad,Fd]}return[Xc]}}class Jp extends Dk{clone(){return new Jp(null,vb(this.transform))}constructor(F,qa){var Fa,nb,Db;super(F);this.transform=qa;this.transform=vb(qa);F=null!==(Fa=this.transform.as)&&void 0!==Fa?Fa:[void 0,void 0];this.transform.as=[null!==(nb=F[0])&&void 0!==nb?nb:qa.on,null!==(Db=F[1])&&void 0!==Db?Db:qa.loess]}dependentFields(){var F;return new Set([this.transform.loess,this.transform.on,...(null!==(F=this.transform.groupby)&&void 0!==F?F:[])])}producedFields(){return new Set(this.transform.as)}hash(){return"LoessTransform ".concat(ba(this.transform))}assemble(){var F=
this.transform,qa=Object.assign({},F);const Fa=F.loess;F=F.on;qa=(delete qa.loess,delete qa.on,qa);return Object.assign({},{type:"loess",x:F,y:Fa},qa)}}class fo extends Dk{clone(){return new fo(null,vb(this.transform),this.secondary)}constructor(F,qa,Fa){super(F);this.transform=qa;this.secondary=Fa}static make(F,qa,Fa,nb){const Db=qa.component.data.sources,{from:Nb}=Fa;var Gc=null;if("data"in Nb)Gc=um(Nb.data,Db),Gc||(Gc=new Jn(Nb.data),Db.push(Gc)),nb=qa.getName("lookup_".concat(nb)),Gc=new ym(Gc,
nb,fl.Lookup,qa.component.data.outputNodeRefCounts),qa.component.data.outputNodes[nb]=Gc;else if("selection"in Nb&&(nb=Nb.selection,Fa=Object.assign({},{as:nb},Fa),Gc=qa.getSelectionComponent(la(nb),nb).materialized,!Gc))throw Error('Cannot define and lookup the "'.concat(nb,'" selection in the same view. ')+"Try moving the lookup into a second, layered view?");return new fo(F,Fa,Gc.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?
V(this.transform.as):this.transform.from.fields)}hash(){return"Lookup ".concat(ba({transform:this.transform,secondary:this.secondary}))}assemble(){if(this.transform.from.fields)var F=Object.assign({},{values:this.transform.from.fields},this.transform.as?{as:V(this.transform.as)}:{});else F=this.transform.as,G(F)||(Wd('If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.'),F="_lookup"),F={as:[F]};return Object.assign({},
{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},F,this.transform.default?{default:this.transform.default}:{})}}class Kp extends Dk{clone(){return new Kp(null,vb(this.transform))}constructor(F,qa){var Fa,nb,Db;super(F);this.transform=qa;this.transform=vb(qa);F=null!==(Fa=this.transform.as)&&void 0!==Fa?Fa:[void 0,void 0];this.transform.as=[null!==(nb=F[0])&&void 0!==nb?nb:"prob",null!==(Db=F[1])&&void 0!==Db?Db:"value"]}dependentFields(){var F;return new Set([this.transform.quantile,
...(null!==(F=this.transform.groupby)&&void 0!==F?F:[])])}producedFields(){return new Set(this.transform.as)}hash(){return"QuantileTransform ".concat(ba(this.transform))}assemble(){var F=this.transform,qa=Object.assign({},F);F=F.quantile;qa=(delete qa.quantile,qa);return Object.assign({},{type:"quantile",field:F},qa)}}class Zo extends Dk{clone(){return new Zo(null,vb(this.transform))}constructor(F,qa){var Fa,nb,Db;super(F);this.transform=qa;this.transform=vb(qa);F=null!==(Fa=this.transform.as)&&void 0!==
Fa?Fa:[void 0,void 0];this.transform.as=[null!==(nb=F[0])&&void 0!==nb?nb:qa.on,null!==(Db=F[1])&&void 0!==Db?Db:qa.regression]}dependentFields(){var F;return new Set([this.transform.regression,this.transform.on,...(null!==(F=this.transform.groupby)&&void 0!==F?F:[])])}producedFields(){return new Set(this.transform.as)}hash(){return"RegressionTransform ".concat(ba(this.transform))}assemble(){var F=this.transform,qa=Object.assign({},F);const Fa=F.regression;F=F.on;qa=(delete qa.regression,delete qa.on,
qa);return Object.assign({},{type:"regression",x:F,y:Fa},qa)}}class Lp extends Dk{clone(){return new Lp(null,vb(this.transform))}constructor(F,qa){super(F);this.transform=qa}addDimensions(F){var qa;this.transform.groupby=ha((null!==(qa=this.transform.groupby)&&void 0!==qa?qa:[]).concat(F),Fa=>Fa)}producedFields(){}dependentFields(){var F;return new Set([this.transform.pivot,this.transform.value,...(null!==(F=this.transform.groupby)&&void 0!==F?F:[])])}hash(){return"PivotTransform ".concat(ba(this.transform))}assemble(){const {pivot:F,
value:qa,groupby:Fa,limit:nb,op:Db}=this.transform;return Object.assign({},{type:"pivot",field:F,value:qa},void 0!==nb?{limit:nb}:{},void 0!==Db?{op:Db}:{},void 0!==Fa?{groupby:Fa}:{})}}class Dq extends Dk{clone(){return new Dq(null,vb(this.transform))}constructor(F,qa){super(F);this.transform=qa}dependentFields(){return new Set}producedFields(){return new Set}hash(){return"SampleTransform ".concat(ba(this.transform))}assemble(){return{type:"sample",size:this.transform.sample}}}class gm extends Cq{constructor(F,
qa,Fa,nb){super(F,"facet",qa,Fa,nb,F.resolve);kc(this,"facet",void 0);kc(this,"child",void 0);kc(this,"children",void 0);this.child=dj(F.spec,this,this.getName("child"),void 0,nb);this.children=[this.child];this.facet=this.initFacet(F.facet)}initFacet(F){if(!cg(F))return{facet:this.initFacetFieldDef(F,"facet")};var qa=jc(F);const Fa={};for(const nb of qa){if(!fa(["row","column"],nb)){Wd(Ec(nb,"facet"));break}qa=F[nb];if(void 0===qa.field){Wd(tc(qa,nb));break}Fa[nb]=this.initFacetFieldDef(qa,nb)}return Fa}initFacetFieldDef(F,
qa){var Fa=Object.assign({},F);F=F.header;Fa=(delete Fa.header,Fa);qa=Oe(Fa,qa);F&&(qa.header=Wc(F));return qa}channelHasField(F){return!!this.facet[F]}fieldDef(F){return this.facet[F]}parseData(){this.component.data=Zk(this);this.child.parseData()}parseLayoutSize(){Nl(this)}parseSelections(){this.child.parseSelections();this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders();for(const Db of pd){var F=
void 0,qa=Db;const {facet:Nb,config:Gc,child:Xc,component:Ad}=this;if(this.channelHasField(qa)){const Fd=Nb[qa];var Fa=bh("title",null,Gc,qa);Fa=ad(Fd,Gc,{allowDisabling:!0,includeDefault:void 0===Fa||!!Fa});Xc.component.layoutHeaders[qa].title&&(Fa=Jh(Fa)?Fa.join(", "):Fa,Fa+=" / "+Xc.component.layoutHeaders[qa].title,Xc.component.layoutHeaders[qa].title=null);var nb=bh("labelOrient",Fd,Gc,qa);const le=null!==(F=Fd.header)&&void 0!==F?F:{};F=Ha(le.labels,Gc.header.labels,!0);nb=fa(["bottom","right"],
nb)?"footer":"header";Ad.layoutHeaders[qa]={title:Fa,facetFieldDef:Fd,[nb]:"facet"===qa?[]:[qn(this,qa,F)]}}}Cm(this,"x");Cm(this,"y")}assembleSelectionTopLevelSignals(F){return this.child.assembleSelectionTopLevelSignals(F)}assembleSignals(){this.child.assembleSignals();return[]}assembleSelectionData(F){return this.child.assembleSelectionData(F)}getHeaderLayoutMixins(){const F={};for(const Gc of pd)for(const Xc of Ap){const Ad=this.component.layoutHeaders[Gc];var qa=Ad[Xc],{facetFieldDef:Fa}=Ad;
if(Fa&&(Fa=bh("titleOrient",Fa.header,this.config,Gc),fa(["right","bottom"],Fa))){var nb;Fa=dm(Gc,Fa);F.titleAnchor=null!==(nb=F.titleAnchor)&&void 0!==nb?nb:{};F.titleAnchor[Fa]="end"}if(null===qa||void 0===qa?0:qa[0]){qa="row"===Gc?"height":"width";Fa="header"===Xc?"headerBand":"footerBand";if("facet"!==Gc&&!this.child.component.layoutSize.get(qa)){var Db;F[Fa]=null!==(Db=F[Fa])&&void 0!==Db?Db:{};F[Fa][Gc]=.5}if(Ad.title){var Nb;F.offset=null!==(Nb=F.offset)&&void 0!==Nb?Nb:{};F.offset["row"===
Gc?"rowTitle":"columnTitle"]=10}}}return F}assembleDefaultLayout(){const {column:F,row:qa}=this.facet,Fa=F?this.columnDistinctSignal():qa?1:void 0;let nb="all";qa||"independent"!==this.component.resolve.scale.x?F||"independent"!==this.component.resolve.scale.y||(nb="none"):nb="none";return Object.assign({},this.getHeaderLayoutMixins(),Fa?{columns:Fa}:{},{bounds:"full",align:nb})}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof
gm)){const F=this.getName("column_domain");return{signal:"length(data('".concat(F,"'))")}}}assembleGroup(F){return this.parent&&this.parent instanceof gm?Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:qb(this.facet.column,{prefix:"distinct"})}}}}:{},super.assembleGroup(F)):super.assembleGroup(F)}getCardinalityAggregateForChild(){const F=[],qa=[],Fa=[];if(this.child instanceof gm){if(this.child.channelHasField("column")){var nb=qb(this.child.facet.column);F.push(nb);
qa.push("distinct");Fa.push("distinct_".concat(nb))}}else for(nb of rh){var Db=this.child.component.scales[nb];if(Db&&!Db.merged){var Nb=Db.get("type");Db=Db.get("range");Nb in jg&&rd(Db)&&(Nb=Yd(this.child,nb),(Nb=Gd(Nb))?(F.push(Nb),qa.push("distinct"),Fa.push("distinct_".concat(Nb))):Wd(Qd(nb)))}}return{fields:F,ops:qa,as:Fa}}assembleFacet(){const {name:F,data:qa}=this.component.data.facetRoot,{row:Fa,column:nb}=this.facet,{fields:Db,ops:Nb,as:Gc}=this.getCardinalityAggregateForChild(),Xc=[];for(var Ad of pd){var Fd=
this.facet[Ad];if(Fd){Xc.push(qb(Fd));const {bin:le,sort:We}=Fd;nc(le)&&Xc.push(qb(Fd,{binSuffix:"end"}));if(xg(We)){const {field:Le,op:pf="min"}=We;Fd=Al(Fd,We);Fa&&nb?(Db.push(Fd),Nb.push("max")):(Db.push(Le),Nb.push(pf));Gc.push(Fd)}else Jh(We)&&(Fd=Ej(Fd,Ad),Db.push(Fd),Nb.push("max"),Gc.push(Fd))}}Ad=!!Fa&&!!nb;return Object.assign({},{name:F,data:qa,groupby:Xc},Ad||0<Db.length?{aggregate:Object.assign({},Ad?{cross:Ad}:{},Db.length?{fields:Db,ops:Nb,as:Gc}:{})}:{})}facetSortFields(F){var {facet:qa}=
this;return(qa=qa[F])?xg(qa.sort)?[Al(qa,qa.sort,{expr:"datum"})]:Jh(qa.sort)?[Ej(qa,F,{expr:"datum"})]:[qb(qa,{expr:"datum"})]:[]}facetSortOrder(F){const {facet:qa}=this;return(F=qa[F])?({sort:F}=F,[(xg(F)?F.order:!Jh(F)&&F)||"ascending"]):[]}assembleLabelTitle(){const {facet:F,config:qa}=this;if(F.facet)return Ki(F.facet,"facet",qa);const Fa={row:["top","bottom"],column:["left","right"]};for(const Db of fn)if(F[Db]){var nb;const Nb=bh("labelOrient",null===(nb=F[Db])||void 0===nb?void 0:nb.header,
qa,Db);if(fa(Fa[Db],Nb))return Ki(F[Db],Db,qa)}}assembleMarks(){const {child:F}=this,qa=cl(this.component.data.facetRoot),Fa=F.assembleGroupEncodeEntry(!1),nb=this.assembleLabelTitle()||F.assembleTitle(),Db=F.assembleGroupStyle();return[Object.assign({},{name:this.getName("cell"),type:"group"},nb?{title:nb}:{},Db?{style:Db}:{},{from:{facet:this.assembleFacet()},sort:{field:pd.map(Nb=>this.facetSortFields(Nb)).flat(),order:pd.map(Nb=>this.facetSortOrder(Nb)).flat()}},0<qa.length?{data:qa}:{},Fa?{encode:{update:Fa}}:
{},F.assembleGroup(gg(this,[])))]}getMapping(){return this.facet}}class Eq extends bo{constructor(F,qa,Fa,nb){var Db,Nb,Gc,Xc;super(F,"concat",qa,Fa,nb,F.resolve);kc(this,"children",void 0);"shared"!==(null===(Db=F.resolve)||void 0===Db?void 0:null===(Nb=Db.axis)||void 0===Nb?void 0:Nb.x)&&"shared"!==(null===(Gc=F.resolve)||void 0===Gc?void 0:null===(Xc=Gc.axis)||void 0===Xc?void 0:Xc.y)||Wd("Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).");
this.children=this.getChildren(F).map((Ad,Fd)=>dj(Ad,this,this.getName("concat_"+Fd),void 0,nb))}parseData(){this.component.data=Zk(this);for(const F of this.children)F.parseData()}parseSelections(){this.component.selection={};for(const F of this.children){F.parseSelections();for(const qa of jc(F.component.selection))this.component.selection[qa]=F.component.selection[qa]}}parseMarkGroup(){for(const F of this.children)F.parseMarkGroup()}parseAxesAndHeaders(){for(const F of this.children)F.parseAxesAndHeaders()}getChildren(F){return"vconcat"in
F?F.vconcat:"hconcat"in F?F.hconcat:F.concat}parseLayoutSize(){Nl(this);const F=void 0===this.layout.columns?"height":"childHeight";Fl(this,1===this.layout.columns?"width":"childWidth");Fl(this,F)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(F){return this.children.reduce((qa,Fa)=>Fa.assembleSelectionTopLevelSignals(qa),F)}assembleSignals(){this.children.forEach(F=>F.assembleSignals());return[]}assembleLayoutSignals(){const F=ui(this);for(const qa of this.children)F.push(...qa.assembleLayoutSignals());
return F}assembleSelectionData(F){return this.children.reduce((qa,Fa)=>Fa.assembleSelectionData(qa),F)}assembleMarks(){return this.children.map(F=>{const qa=F.assembleTitle(),Fa=F.assembleGroupStyle(),nb=F.assembleGroupEncodeEntry(!1);return Object.assign({},{type:"group",name:F.getName("group")},qa?{title:qa}:{},Fa?{style:Fa}:{},nb?{encode:{update:nb}}:{},F.assembleGroup())})}assembleDefaultLayout(){const F=this.layout.columns;return Object.assign({},null!=F?{columns:F}:{},{bounds:"full",align:"each"})}}
const Ir=Object.assign({},{disable:1,gridScale:1,scale:1},W,{labelExpr:1,encode:1}),Fq=jc(Ir);class Jr extends An{constructor(F,qa,Fa){F=void 0===F?{}:F;qa=void 0===qa?{}:qa;Fa=void 0===Fa?!1:Fa;super();this.explicit=F;this.implicit=qa;this.mainExtracted=Fa}clone(){return new Jr(vb(this.explicit),vb(this.implicit),this.mainExtracted)}hasAxisPart(F){if("axis"===F)return!0;if("grid"===F||"title"===F)return!!this.get(F);F=this.get(F);return!(!1===F||null===F)}hasOrientSignalRef(){return Zc(this.explicit.orient)}}
const Gq={bottom:"top",top:"bottom",left:"right",right:"left"},Gs=new Set("grid translate format formatType orient labelExpr tickCount position tickMinStep".split(" ")),Mp={arc:{vgMark:"arc",encodeEntry:F=>Object.assign({},ce(F,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),qk("x",F,{defaultPos:"mid"}),qk("y",F,{defaultPos:"mid"}),Bc(F,"radius","arc"),Bc(F,"theta","arc"))},area:{vgMark:"area",encodeEntry:F=>Object.assign({},ce(F,{align:"ignore",baseline:"ignore",
color:"include",orient:"include",size:"ignore",theta:"ignore"}),uk("x",F,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"horizontal"===F.markDef.orient}),uk("y",F,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"vertical"===F.markDef.orient}),dc(F))},bar:{vgMark:"rect",encodeEntry:F=>Object.assign({},ce(F,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),Bc(F,"x","bar"),Bc(F,"y","bar"))},circle:{vgMark:"symbol",encodeEntry:F=>Ol(F,"circle")},
geoshape:{vgMark:"shape",encodeEntry:F=>Object.assign({},ce(F,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),postEncodingTransform:F=>{var {encoding:qa}=F;qa=qa.shape;return[Object.assign({},{type:"geoshape",projection:F.projectionName()},qa&&Lf(qa)&&"geojson"===qa.type?{field:qb(qa,{expr:"datum"})}:{})]}},image:{vgMark:"image",encodeEntry:F=>Object.assign({},ce(F,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),
Bc(F,"x","image"),Bc(F,"y","image"),Jk(F,"url"))},line:{vgMark:"line",encodeEntry:F=>Object.assign({},ce(F,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),qk("x",F,{defaultPos:"mid"}),qk("y",F,{defaultPos:"mid"}),Kh("size",F,{vgChannel:"strokeWidth"}),dc(F))},point:{vgMark:"symbol",encodeEntry:F=>Ol(F)},rect:{vgMark:"rect",encodeEntry:F=>Object.assign({},ce(F,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),
Bc(F,"x","rect"),Bc(F,"y","rect"))},rule:{vgMark:"rule",encodeEntry:F=>{var {markDef:qa}=F;qa=qa.orient;return F.encoding.x||F.encoding.y||F.encoding.latitude||F.encoding.longitude?Object.assign({},ce(F,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),uk("x",F,{defaultPos:"horizontal"===qa?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"vertical"!==qa}),uk("y",F,{defaultPos:"vertical"===qa?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"horizontal"!==
qa}),Kh("size",F,{vgChannel:"strokeWidth"})):{}}},square:{vgMark:"symbol",encodeEntry:F=>Ol(F,"square")},text:{vgMark:"text",encodeEntry:F=>{var {config:qa}=F,Fa=Object,nb=Fa.assign,Db=ce(F,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),Nb=qk("x",F,{defaultPos:"mid"}),Gc=qk("y",F,{defaultPos:"mid"}),Xc=Jk(F),Ad=Kh("size",F,{vgChannel:"fontSize"}),Fd=Kh("angle",F);var le=void 0===ag("align",F.markDef,qa)?"center":void 0;le=Vc("align",le);qa=void 0===
ag("baseline",F.markDef,qa)?"middle":void 0;return nb.call(Fa,{},Db,Nb,Gc,Xc,Ad,Fd,le,Vc("baseline",qa),qk("radius",F,{defaultPos:null,isMidPoint:!0}),qk("theta",F,{defaultPos:null,isMidPoint:!0}))}},tick:{vgMark:"rect",encodeEntry:F=>{const {config:qa,markDef:Fa}=F;var nb=Fa.orient;const Db="horizontal"===nb?"width":"height";nb="horizontal"===nb?"height":"width";var Nb=Object,Gc=Nb.assign,Xc=ce(F,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),Ad=
qk("x",F,{defaultPos:"mid",vgChannel:"xc"}),Fd=qk("y",F,{defaultPos:"mid",vgChannel:"yc"}),le;{const {config:Le,markDef:pf}=F;var {orient:We}=pf;const kg="horizontal"===We?"width":"height";We=F.getScaleComponent("horizontal"===We?"x":"y");const Ig=null!==(le=ag("size",pf,Le,{vgChannel:kg}))&&void 0!==le?le:Le.tick.bandSize;le=void 0!==Ig?Ig:(le=We?We.get("range"):void 0)&&rd(le)&&z(le.step)?3*le.step/4:3*zb(Le.view,kg)/4}return Gc.call(Nb,{},Xc,Ad,Fd,Kh("size",F,{defaultValue:le,vgChannel:Db}),{[nb]:vf(ag("thickness",
Fa,qa))})}},trail:{vgMark:"trail",encodeEntry:F=>Object.assign({},ce(F,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),qk("x",F,{defaultPos:"mid"}),qk("y",F,{defaultPos:"mid"}),Kh("size",F),dc(F))}};class $o extends Cq{constructor(F,qa,Fa,nb,Db){nb=void 0===nb?{}:nb;super(F,"unit",qa,Fa,Db,void 0,kh(F)?F.view:void 0);kc(this,"markDef",void 0);kc(this,"encoding",void 0);kc(this,"specifiedScales",{});kc(this,"stack",void 0);kc(this,"specifiedAxes",{});
kc(this,"specifiedLegends",{});kc(this,"specifiedProjection",{});kc(this,"selection",{});kc(this,"children",[]);var Nb=Ua(F.mark)?Object.assign({},F.mark):{type:F.mark};qa=Nb.type;if(void 0===Nb.filled){({graticule:Fa}={graticule:F.data&&"graticule"in F.data});if(Fa)Fa=!1;else{Fa=ph("filled",Nb,Db);var Gc=Nb.type;Fa=Ha(Fa,Gc!==Gn&&Gc!==pn&&Gc!==Sm)}Nb.filled=Fa}Fa=this.encoding=Gi(F.encoding||{},qa,Nb.filled,Db);Nb=Wc(Nb);Gc=ag("orient",Nb,Db);Nb.orient=dn(Nb.type,Fa,Gc);void 0!==Gc&&Gc!==Nb.orient&&
(Gc='Specified orient "'.concat(Nb.orient,'" overridden with "').concat(Gc,'".'),Wd(Gc));if("bar"===Nb.type&&Nb.orient&&(Gc=ag("cornerRadiusEnd",Nb,Db),void 0!==Gc)){const le="horizontal"===Nb.orient&&Fa.x2||"vertical"===Nb.orient&&Fa.y2?["cornerRadius"]:Td[Nb.orient];for(var Xc of le)Nb[Xc]=Gc;void 0!==Nb.cornerRadiusEnd&&delete Nb.cornerRadiusEnd}void 0===ag("opacity",Nb,Db)&&(Xc=fa([Gn,en,rn,na],Nb.type)&&!Cf(Fa)?.7:void 0,Nb.opacity=Xc);void 0===ag("cursor",Nb,Db)&&(Db=Fa.href||Nb.href||ag("href",
Nb,Db)?"pointer":Nb.cursor,Nb.cursor=Db);this.markDef=Nb;nb={encoding:Fa,size:kh(F)?Object.assign({},nb,F.width?{width:F.width}:{},F.height?{height:F.height}:{}):nb};var {encoding:Ad,size:Fd}=nb;for(const le of rh)nb=mc(le),ng(Fd[nb])&&ia(Ad[le])&&(delete Fd[nb],Wd(Dd(nb)));this.size=Fd;this.stack=Dh(qa,Fa);this.specifiedScales=this.initScales(qa,Fa);this.specifiedAxes=this.initAxes(Fa);this.specifiedLegends=this.initLegends(Fa);this.specifiedProjection=F.projection;this.selection=F.selection}get hasProjection(){const {encoding:F}=
this,qa=this.mark===za,Fa=F&&Hc.some(nb=>lb(F[nb]));return qa||Fa}scaleDomain(F){return(F=this.specifiedScales[F])?F.domain:void 0}axis(F){return this.specifiedAxes[F]}legend(F){return this.specifiedLegends[F]}initScales(F,qa){return Vg.reduce((Fa,nb)=>{const Db=Pd(qa[nb]);if(Db){var Nb;Fa[nb]=this.initScale(null!==(Nb=Db.scale)&&void 0!==Nb?Nb:{})}return Fa},{})}initScale(F){const {domain:qa,range:Fa}=F;F=Wc(F);Jh(qa)&&(F.domain=qa.map(Yf));Jh(Fa)&&(F.range=Fa.map(Yf));return F}initAxes(F){return rh.reduce((qa,
Fa)=>{var nb=F[Fa];if(lb(nb)||"x"===Fa&&lb(F.x2)||"y"===Fa&&lb(F.y2))nb=lb(nb)?nb.axis:void 0,qa[Fa]=nb?this.initAxis(Object.assign({},nb)):nb;return qa},{})}initAxis(F){var qa=jc(F);const Fa={};for(const nb of qa)qa=F[nb],Fa[nb]=fb(qa)?uf(qa):Yf(qa);return Fa}initLegends(F){return wi.reduce((qa,Fa)=>{var nb=Pd(F[Fa]),Db;if(Db=nb)a:{switch(Fa){case "color":case "fill":case "stroke":case "size":case "shape":case "opacity":case "strokeWidth":case "strokeDash":Db=!0;break a;case "fillOpacity":case "strokeOpacity":case "angle":Db=
!1;break a}Db=void 0}Db&&(nb=nb.legend,qa[Fa]=nb?Wc(nb):nb);return qa},{})}parseData(){this.component.data=Zk(this)}parseLayoutSize(){const {size:F,component:qa}=this;for(const nb of rh){const Db=mc(nb);if(F[Db]){var Fa=F[Db];qa.layoutSize.set(Db,ng(Fa)?"step":Fa,!0)}else Fa=Gk(this,Db),qa.layoutSize.set(Db,Fa,!1)}}parseSelections(){this.component.selection=Id(this,this.selection)}parseMarkGroup(){this.component.mark=Ai(this)}parseAxesAndHeaders(){this.component.axes=Dm(this)}assembleSelectionTopLevelSignals(F){return Eg(this,
F)}assembleSignals(){return[...Xf(this),...Dg(this,[])]}assembleSelectionData(F){return Ph(this,F)}assembleLayout(){return null}assembleLayoutSignals(){return ui(this)}assembleMarks(){var F;let qa=null!==(F=this.component.mark)&&void 0!==F?F:[];this.parent&&hk(this.parent)||(qa=Sg(this,qa));return qa.map(this.correctDataNames)}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(F){return Kg(this.encoding,F)}fieldDef(F){return ee(this.encoding[F])}typedFieldDef(F){F=
this.fieldDef(F);return Eb(F)?F:null}}class ap extends bo{constructor(F,qa,Fa,nb,Db){super(F,"layer",qa,Fa,Db,F.resolve,F.view);kc(this,"children",void 0);const Nb=Object.assign({},nb,F.width?{width:F.width}:{},F.height?{height:F.height}:{});this.children=F.layer.map((Gc,Xc)=>{if("layer"in Gc)return new ap(Gc,this,this.getName("layer_"+Xc),Nb,Db);if(jh(Gc))return new $o(Gc,this,this.getName("layer_"+Xc),Nb,Db);throw Error(md(Gc));})}parseData(){this.component.data=Zk(this);for(const F of this.children)F.parseData()}parseLayoutSize(){Nl(this);
Fl(this,"width");Fl(this,"height")}parseSelections(){this.component.selection={};for(const F of this.children){F.parseSelections();for(const qa of jc(F.component.selection))this.component.selection[qa]=F.component.selection[qa]}}parseMarkGroup(){for(const F of this.children)F.parseMarkGroup()}parseAxesAndHeaders(){const {axes:F,resolve:qa}=this.component,Fa={top:0,bottom:0,right:0,left:0};for(var nb of this.children){nb.parseAxesAndHeaders();for(const Nb of jc(nb.component.axes))qa.axis[Nb]=ak(this.component.resolve,
Nb),"shared"===qa.axis[Nb]&&(F[Nb]=ol(F[Nb],nb.component.axes[Nb]),F[Nb]||(qa.axis[Nb]="independent",delete F[Nb]))}for(const Nb of rh){for(const Gc of this.children)if(Gc.component.axes[Nb]){if("independent"===qa.axis[Nb]){var Db;F[Nb]=(null!==(Db=F[Nb])&&void 0!==Db?Db:[]).concat(Gc.component.axes[Nb]);for(const Xc of Gc.component.axes[Nb]){const {value:Ad,explicit:Fd}=Xc.getWithExplicit("orient");Zc(Ad)||(0<Fa[Ad]&&!Fd&&(nb=Gq[Ad],Fa[Ad]>Fa[nb]&&Xc.set("orient",nb,!1)),Fa[Ad]++)}}delete Gc.component.axes[Nb]}if("independent"===
qa.axis[Nb]&&F[Nb]&&1<F[Nb].length)for(const Gc of F[Nb])Gc.get("grid")&&!Gc.explicit.grid&&(Gc.implicit.grid=!1)}}assembleSelectionTopLevelSignals(F){return this.children.reduce((qa,Fa)=>Fa.assembleSelectionTopLevelSignals(qa),F)}assembleSignals(){return this.children.reduce((F,qa)=>F.concat(qa.assembleSignals()),Xf(this))}assembleLayoutSignals(){return this.children.reduce((F,qa)=>F.concat(qa.assembleLayoutSignals()),ui(this))}assembleSelectionData(F){return this.children.reduce((qa,Fa)=>Fa.assembleSelectionData(qa),
F)}assembleTitle(){let F=super.assembleTitle();if(F)return F;for(const qa of this.children)if(F=qa.assembleTitle())return F}assembleLayout(){return null}assembleMarks(){return Ei(this,this.children.flatMap(F=>F.assembleMarks()))}assembleLegends(){return this.children.reduce((F,qa)=>F.concat(qa.assembleLegends()),ik(this))}}w.accessPathDepth=Pa;w.accessPathWithDatum=ab;w.compile=function(F,qa){qa=void 0===qa?{}:qa;qa.logger&&(mi=qa.logger);qa.fieldTitle&&(Df=qa.fieldTitle);try{const le=je(da(qa.config,
F.config)),We=Ik(F,le),Le=dj(We,null,"",void 0,le);Le.parse();var Fa=Le.component.data,nb=Le;Xj(Fa.sources);let pf=0,kg=0;for(var Db=0;5>Db&&tm(Fa,nb,!0);Db++)pf++;Fa.sources.map(El);for(Db=0;5>Db&&tm(Fa,nb,!1);Db++)kg++;Xj(Fa.sources);5===Math.max(pf,kg)&&Wd("Maximum optimization runs(".concat(5,") reached."));var Nb=We.autosize;Fa=le;nb=Le;const Ig=nb.component.layoutSize.get("width"),Yg=nb.component.layoutSize.get("height");void 0===Nb?(Nb={type:"pad"},nb.hasAxisOrientSignalRef()&&(Nb.resize=!0)):
G(Nb)&&(Nb={type:Nb});var Gc;if(Gc=Ig&&Yg){var Xc=Nb.type;Gc="fit"===Xc||"fit-x"===Xc||"fit-y"===Xc}if(Gc)if("step"===Ig&&"step"===Yg)Wd(Ed()),Nb.type="pad";else if("step"===Ig||"step"===Yg){Xc="step"===Ig?"width":"height";Wd(Ed(oc(Xc)));Gc=Nb;var Ad=(Xc="width"===Xc?"height":"width","fit-".concat(oc(Xc)));Gc.type=Ad}var Fd=Object.assign({},1===jc(Nb).length&&Nb.type?"pad"===Nb.type?{}:{autosize:Nb.type}:{autosize:Nb},ji(Fa,!1),ji(F,!0));return{spec:km(Le,Fd,F.datasets,F.usermeta),normalized:We}}finally{qa.logger&&
(mi=uh),qa.fieldTitle&&(Df=Me)}};w.contains=fa;w.deepEqual=Hk;w.deleteNestedProperty=Ma;w.duplicate=vb;w.entries=Pc;w.every=ta;w.fieldIntersection=ea;w.flatAccessWithDatum=db;w.getFirstDefined=Ha;w.hasIntersection=H;w.hash=ba;w.internalField=Aa;w.isBoolean=R;w.isEmpty=D;w.isEqual=function(F,qa){const Fa=jc(F),nb=jc(qa);if(Fa.length!==nb.length)return!1;for(const Db of Fa)if(F[Db]!==qa[Db])return!1;return!0};w.isInternalField=Ga;w.isNullOrFalse=O;w.isNumeric=cb;w.keys=jc;w.logicalExpr=Ia;w.mergeDeep=
aa;w.normalize=Ik;w.normalizeAngle=Ka;w.omit=K;w.pick=J;w.prefixGenerator=oa;w.removePathFromField=Va;w.replaceAll=Ya;w.replacePathInField=pb;w.resetIdCounter=function(){va=42};w.setEqual=ka;w.some=wa;w.stringify=fc;w.titleCase=Ta;w.unique=ha;w.uniqueId=Ca;w.vals=Fc;w.varName=la;w.version="4.17.0";Object.defineProperty(w,"__esModule",{value:!0})})};
shadow$provide[452]=function(ob,Ba,Gb,Ea){var A=Ba(43);(function(w,u){"object"===typeof Ea&&"undefined"!==typeof Gb?Gb.exports=u(Ba(450),Ba(451)):"function"===typeof define&&define.amd?define(["vega","vega-lite"],u):(w="undefined"!==typeof globalThis?globalThis:w||self,w.vegaEmbed=u(w.vega,w.vegaLite))})(this,function(w,u){function x(ia){if(ia&&ia.__esModule)return ia;var Sa=Object.create(null);ia&&Object.keys(ia).forEach(function(lb){if("default"!==lb){var Eb=Object.getOwnPropertyDescriptor(ia,lb);
Object.defineProperty(Sa,lb,Eb.get?Eb:{enumerable:!0,get:function(){return ia[lb]}})}});Sa["default"]=ia;return Object.freeze(Sa)}function I(ia){if(Array.isArray(ia)){var Sa=Array(ia.length);for(ia=0;ia<Sa.length;ia++)Sa[ia]=""+ia;return Sa}if(Object.keys)return Object.keys(ia);Sa=[];for(var lb in ia)Va.call(ia,lb)&&Sa.push(lb);return Sa}function B(ia){switch(typeof ia){case "object":return JSON.parse(JSON.stringify(ia));case "undefined":return null;default:return ia}}function N(ia){for(var Sa=0,
lb=ia.length,Eb;Sa<lb;)if(Eb=ia.charCodeAt(Sa),48<=Eb&&57>=Eb)Sa++;else return!1;return!0}function da(ia){return-1===ia.indexOf("/")&&-1===ia.indexOf("~")?ia:ia.replace(/~/g,"~0").replace(/\//g,"~1")}function U(ia){return ia.replace(/~1/g,"/").replace(/~0/g,"~")}function X(ia){if(void 0===ia)return!0;if(ia)if(Array.isArray(ia))for(var Sa=0,lb=ia.length;Sa<lb;Sa++){if(X(ia[Sa]))return!0}else if("object"===typeof ia){lb=I(ia);var Eb=lb.length;for(Sa=0;Sa<Eb;Sa++)if(X(ia[lb[Sa]]))return!0}return!1}function V(ia,
Sa){ia=[ia];for(var lb in Sa){var Eb="object"===typeof Sa[lb]?JSON.stringify(Sa[lb],null,2):Sa[lb];"undefined"!==typeof Eb&&ia.push(lb+": "+Eb)}return ia.join("\n")}function P(ia,Sa){if(""==Sa)return ia;Sa={op:"_get",path:Sa};z(ia,Sa);return Sa.value}function z(ia,Sa,lb,Eb,Vb,qc){void 0===lb&&(lb=!1);void 0===Eb&&(Eb=!0);void 0===Vb&&(Vb=!0);void 0===qc&&(qc=0);lb&&("function"==typeof lb?lb(Sa,0,ia,Sa.path):Y(Sa,0));if(""===Sa.path){Vb={newDocument:ia};if("add"===Sa.op)return Vb.newDocument=Sa.value,
Vb;if("replace"===Sa.op)return Vb.newDocument=Sa.value,Vb.removed=ia,Vb;if("move"===Sa.op||"copy"===Sa.op)return Vb.newDocument=P(ia,Sa.from),"move"===Sa.op&&(Vb.removed=ia),Vb;if("test"===Sa.op){Vb.test=ja(ia,Sa.value);if(!1===Vb.test)throw new Ha("Test operation failed","TEST_OPERATION_FAILED",qc,Sa,ia);Vb.newDocument=ia;return Vb}if("remove"===Sa.op)return Vb.removed=ia,Vb.newDocument=null,Vb;if("_get"===Sa.op)return Sa.value=ia,Vb;if(lb)throw new Ha("Operation `op` property is not one of operations defined in RFC-6902",
"OPERATION_OP_INVALID",qc,Sa,ia);return Vb}Eb||(ia=B(ia));Eb=(Sa.path||"").split("/");var Za=ia,wb=1,eb=Eb.length,qb=void 0,Qb;for(Qb="function"==typeof lb?lb:Y;;){var zc=Eb[wb];if(Vb&&"__proto__"==zc)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");lb&&void 0===qb&&(void 0===Za[zc]?qb=Eb.slice(0,wb).join("/"):wb==
eb-1&&(qb=Sa.path),void 0!==qb&&Qb(Sa,0,ia,qb));wb++;if(Array.isArray(Za)){if("-"===zc)zc=Za.length;else{if(lb&&!N(zc))throw new Ha("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",qc,Sa,ia);N(zc)&&(zc=~~zc)}if(wb>=eb){if(lb&&"add"===Sa.op&&zc>Za.length)throw new Ha("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",qc,Sa,ia);
Vb=Aa[Sa.op].call(Sa,Za,zc,ia);if(!1===Vb.test)throw new Ha("Test operation failed","TEST_OPERATION_FAILED",qc,Sa,ia);return Vb}}else if(zc&&-1!=zc.indexOf("~")&&(zc=U(zc)),wb>=eb){Vb=Ca[Sa.op].call(Sa,Za,zc,ia);if(!1===Vb.test)throw new Ha("Test operation failed","TEST_OPERATION_FAILED",qc,Sa,ia);return Vb}Za=Za[zc]}}function G(ia,Sa,lb,Eb,Vb){void 0===Eb&&(Eb=!0);void 0===Vb&&(Vb=!0);if(lb&&!Array.isArray(Sa))throw new Ha("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");Eb||(ia=B(ia));
Eb=Array(Sa.length);for(var qc=0,Za=Sa.length;qc<Za;qc++)Eb[qc]=z(ia,Sa[qc],lb,!0,Vb,qc),ia=Eb[qc].newDocument;Eb.newDocument=ia;return Eb}function Y(ia,Sa,lb,Eb){if("object"!==typeof ia||null===ia||Array.isArray(ia))throw new Ha("Operation is not an object","OPERATION_NOT_AN_OBJECT",Sa,ia,lb);if(Ca[ia.op]){if("string"!==typeof ia.path)throw new Ha("Operation `path` property is not a string","OPERATION_PATH_INVALID",Sa,ia,lb);if(0!==ia.path.indexOf("/")&&0<ia.path.length)throw new Ha('Operation `path` property must start with "/"',
"OPERATION_PATH_INVALID",Sa,ia,lb);if("move"!==ia.op&&"copy"!==ia.op||"string"===typeof ia.from)if("add"!==ia.op&&"replace"!==ia.op&&"test"!==ia.op||void 0!==ia.value){if(("add"===ia.op||"replace"===ia.op||"test"===ia.op)&&X(ia.value))throw new Ha("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",Sa,ia,lb);if(lb)if("add"==ia.op){var Vb=ia.path.split("/").length;Eb=Eb.split("/").length;if(Vb!==Eb+1&&Vb!==Eb)throw new Ha("Cannot perform an `add` operation at the desired path",
"OPERATION_PATH_CANNOT_ADD",Sa,ia,lb);}else if("replace"===ia.op||"remove"===ia.op||"_get"===ia.op){if(ia.path!==Eb)throw new Ha("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",Sa,ia,lb);}else if(("move"===ia.op||"copy"===ia.op)&&(Vb=Q([{op:"_get",path:ia.from,value:void 0}],lb))&&"OPERATION_PATH_UNRESOLVABLE"===Vb.name)throw new Ha("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",Sa,ia,lb);}else throw new Ha("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)",
"OPERATION_VALUE_REQUIRED",Sa,ia,lb);else throw new Ha("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",Sa,ia,lb);}else throw new Ha("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",Sa,ia,lb);}function Q(ia,Sa,lb){try{if(!Array.isArray(ia))throw new Ha("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(Sa)G(B(Sa),B(ia),lb||!0);else{lb=lb||Y;for(var Eb=0;Eb<ia.length;Eb++)lb(ia[Eb],
Eb,Sa,void 0)}}catch(Vb){if(Vb instanceof Ha)return Vb;throw Vb;}}function ja(ia,Sa){if(ia===Sa)return!0;if(ia&&Sa&&"object"==typeof ia&&"object"==typeof Sa){var lb=Array.isArray(ia),Eb=Array.isArray(Sa);if(lb&&Eb){var Vb=ia.length;if(Vb!=Sa.length)return!1;for(lb=Vb;0!==lb--;)if(!ja(ia[lb],Sa[lb]))return!1;return!0}if(lb!=Eb)return!1;Eb=Object.keys(ia);Vb=Eb.length;if(Vb!==Object.keys(Sa).length)return!1;for(lb=Vb;0!==lb--;)if(!Sa.hasOwnProperty(Eb[lb]))return!1;for(lb=Vb;0!==lb--;)if(Vb=Eb[lb],
!ja(ia[Vb],Sa[Vb]))return!1;return!0}return ia!==ia&&Sa!==Sa}function pa(ia,Sa){void 0===Sa&&(Sa=!1);var lb=Ka.get(ia.object);J(lb.value,ia.object,ia.patches,"",Sa);ia.patches.length&&G(lb.value,ia.patches);Sa=ia.patches;0<Sa.length&&(ia.patches=[],ia.callback&&ia.callback(Sa));return Sa}function J(ia,Sa,lb,Eb,Vb){if(Sa!==ia){"function"===typeof Sa.toJSON&&(Sa=Sa.toJSON());for(var qc=I(Sa),Za=I(ia),wb=!1,eb=Za.length-1;0<=eb;eb--){var qb=Za[eb],Qb=ia[qb];if(!Va.call(Sa,qb)||void 0===Sa[qb]&&void 0!==
Qb&&!1===Array.isArray(Sa))Array.isArray(ia)===Array.isArray(Sa)?(Vb&&lb.push({op:"test",path:Eb+"/"+da(qb),value:B(Qb)}),lb.push({op:"remove",path:Eb+"/"+da(qb)}),wb=!0):(Vb&&lb.push({op:"test",path:Eb,value:ia}),lb.push({op:"replace",path:Eb,value:Sa}));else{var zc=Sa[qb];"object"==typeof Qb&&null!=Qb&&"object"==typeof zc&&null!=zc?J(Qb,zc,lb,Eb+"/"+da(qb),Vb):Qb!==zc&&(Vb&&lb.push({op:"test",path:Eb+"/"+da(qb),value:B(Qb)}),lb.push({op:"replace",path:Eb+"/"+da(qb),value:B(zc)}))}}if(wb||qc.length!=
Za.length)for(eb=0;eb<qc.length;eb++)qb=qc[eb],Va.call(ia,qb)||void 0===Sa[qb]||lb.push({op:"add",path:Eb+"/"+da(qb),value:B(Sa[qb])})}}function K(ia){var Sa=this;Sa instanceof K||(Sa=new K);Sa.tail=null;Sa.head=null;Sa.length=0;if(ia&&"function"===typeof ia.forEach)ia.forEach(function(Vb){Sa.push(Vb)});else if(0<arguments.length)for(var lb=0,Eb=arguments.length;lb<Eb;lb++)Sa.push(arguments[lb]);return Sa}function ba(ia,Sa,lb,Eb){if(!(this instanceof ba))return new ba(ia,Sa,lb,Eb);this.list=Eb;this.value=
ia;Sa?(Sa.next=this,this.prev=Sa):this.prev=null;lb?(lb.prev=this,this.next=lb):this.next=null}function O(ia){const [Sa,lb]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(ia).slice(1,3);return{library:Sa,version:lb}}function fa(ia,Sa,lb){ia.fields=Sa||[];ia.fname=lb;return ia}function wa(ia){return 1===ia.length?dg(ia[0]):Sf(ia)}function ta(ia){function Sa(){lb.push(Za+ia.substring(wb,eb));Za="";wb=eb+1}const lb=[],Eb=ia.length;let Vb=null,qc=0,Za="",wb,eb,qb;ia+="";for(wb=eb=0;eb<Eb;++eb)if(qb=ia[eb],
"\\"===qb)Za+=ia.substring(wb,eb),Za+=ia.substring(++eb,++eb),wb=eb;else if(qb===Vb)Sa(),Vb=null,qc=-1;else if(!Vb)if(wb===qc&&'"'===qb)wb=eb+1,Vb=qb;else if(wb===qc&&"'"===qb)wb=eb+1,Vb=qb;else if("."===qb&&!qc)eb>wb?Sa():wb=eb+1;else if("["===qb)eb>wb&&Sa(),qc=wb=eb+1;else if("]"===qb){if(!qc)throw Error("Access path missing open bracket: "+ia);0<qc&&Sa();qc=0;wb=eb+1}if(qc)throw Error("Access path missing closing bracket: "+ia);if(Vb)throw Error("Access path missing closing quote: "+ia);eb>wb&&
(eb++,Sa());return lb}function aa(ia,Sa){var lb={},Eb;for(Eb in ia)Object.prototype.hasOwnProperty.call(ia,Eb)&&0>Sa.indexOf(Eb)&&(lb[Eb]=ia[Eb]);if(null!=ia&&"function"===typeof Object.getOwnPropertySymbols){var Vb=0;for(Eb=Object.getOwnPropertySymbols(ia);Vb<Eb.length;Vb++)0>Sa.indexOf(Eb[Vb])&&Object.prototype.propertyIsEnumerable.call(ia,Eb[Vb])&&(lb[Eb[Vb]]=ia[Eb[Vb]])}return lb}function ha(ia,Sa,lb){if(Kf(ia))return`[${ia.map(Vb=>Sa("string"===typeof Vb?Vb:JSON.stringify(Vb,ka(lb)))).join(", ")}]`;
if(ia===Object(ia)){let Vb="";const {title:qc,image:Za}=ia;ia=aa(ia,["title","image"]);qc&&(Vb+=`<h2>${Sa(qc)}</h2>`);Za&&(Vb+=`<img src="${Sa(Za)}">`);var Eb=Object.keys(ia);if(0<Eb.length){Vb+="\x3ctable\x3e";for(const wb of Eb)Eb=ia[wb],void 0!==Eb&&(Eb===Object(Eb)&&(Eb=JSON.stringify(Eb,ka(lb))),Vb+=`<tr><td class="key">${Sa(wb)}:</td><td class="value">${Sa(Eb)}</td></tr>`);Vb+="\x3c/table\x3e"}return Vb||"{}"}return Sa(ia)}function ka(ia){const Sa=[];return function(lb,Eb){if("object"!==typeof Eb||
null===Eb)return Eb;lb=Sa.indexOf(this)+1;Sa.length=lb;if(Sa.length>ia)return"[Object]";if(0<=Sa.indexOf(Eb))return"[Circular]";Sa.push(Eb);return Eb}}function H(ia,Sa,lb){function Eb(eb){eb.source===qc&&(wb=0,ia.removeEventListener("message",Eb,!1))}function Vb(){0>=wb||(qc.postMessage(lb,Za),setTimeout(Vb,250),--wb)}const qc=ia.open(Sa),{origin:Za}=new URL(Sa);let wb=40;ia.addEventListener("message",Eb,!1);setTimeout(Vb,250)}function oa(ia,...Sa){for(const Eb of Sa){Sa=ia;var lb=Eb;for(const Vb of Object.keys(lb))w.writeConfig(Sa,
Vb,lb[Vb],!0)}return ia}function ea(ia,Sa,lb,Eb){Sa=`<html><head>${Sa}</head><body><pre><code class="json">`;lb=`</code></pre>${lb}</body></html>`;const Vb=window.open("");Vb.document.write(Sa+ia+lb);Vb.document.title=`${gh[Eb]} JSON Source`}function D(ia,Sa){if(ia.$schema){ia=O(ia.$schema);if(Sa&&Sa!==ia.library){var lb;console.warn(`The given visualization spec is written in ${gh[ia.library]}, but mode argument sets ${null!==(lb=gh[Sa])&&void 0!==lb?lb:Sa}.`)}Sa=ia.library;Ug.satisfies(Lf[Sa],`^${ia.version.slice(1)}`)||
console.warn(`The input spec uses ${gh[Sa]} ${ia.version}, but the current version of ${gh[Sa]} is v${Lf[Sa]}.`);return Sa}return"mark"in ia||"encoding"in ia||"layer"in ia||"hconcat"in ia||"vconcat"in ia||"facet"in ia||"repeat"in ia?"vega-lite":"marks"in ia||"signals"in ia||"scales"in ia||"axes"in ia?"vega":null!==Sa&&void 0!==Sa?Sa:"vega"}function R(ia){return ia&&"load"in ia?ia:cg.loader(ia)}function la(ia){var Sa;return null!==(Sa=ia.usermeta&&ia.usermeta.embedOptions)&&void 0!==Sa?Sa:{}}async function Ia(ia,
Sa,lb={}){var Eb,Vb;let qc;w.isString(Sa)&&(qc=R(lb.loader),Sa=JSON.parse(await qc.load(Sa)));const Za=la(Sa).loader;if(!qc||Za){var wb;qc=R(null!==(wb=lb.loader)&&void 0!==wb?wb:Za)}wb=await Ma(la(Sa),qc);lb=await Ma(lb,qc);lb=Object.assign({},oa(lb,wb),{config:w.mergeConfig(null!==(Eb=lb.config)&&void 0!==Eb?Eb:{},null!==(Vb=wb.config)&&void 0!==Vb?Vb:{})});return await ab(ia,Sa,lb,qc)}async function Ma(ia,Sa){var lb;const Eb=w.isString(ia.config)?JSON.parse(await Sa.load(ia.config)):null!==(lb=
ia.config)&&void 0!==lb?lb:{};Sa=w.isString(ia.patch)?JSON.parse(await Sa.load(ia.patch)):ia.patch;return Object.assign({},ia,Sa?{patch:Sa}:{},Eb?{config:Eb}:{})}function Ta(ia){ia=ia.getRootNode?ia.getRootNode():document;if(ia instanceof ShadowRoot)return{root:ia,rootContainer:ia};var Sa;return{root:document,rootContainer:null!==(Sa=document.head)&&void 0!==Sa?Sa:document.body}}async function ab(ia,Sa,lb={},Eb){var Vb,qc,Za,wb,eb;const qb=lb.theme?w.mergeConfig(xe[lb.theme],null!==(Vb=lb.config)&&
void 0!==Vb?Vb:{}):lb.config;Vb=w.isBoolean(lb.actions)?lb.actions:oa({},Gh,null!==(qc=lb.actions)&&void 0!==qc?qc:{});qc=Object.assign({},li,lb.i18n);const Qb=null!==(Za=lb.renderer)&&void 0!==Za?Za:"canvas";Za=null!==(wb=lb.logLevel)&&void 0!==wb?wb:cg.Warn;wb=null!==(eb=lb.downloadFileName)&&void 0!==eb?eb:"visualization";eb="string"===typeof ia?document.querySelector(ia):ia;if(!eb)throw Error(`${ia} does not exist`);if(!1!==lb.defaultStyle){const {root:se,rootContainer:ye}=Ta(eb);se.getElementById("vega-embed-style")||
(ia=document.createElement("style"),ia.id="vega-embed-style",ia.innerText=void 0===lb.defaultStyle||!0===lb.defaultStyle?'.vega-embed {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box; }\n  .vega-embed.has-actions {\n    padding-right: 38px; }\n  .vega-embed details:not([open]) \x3e :not(summary) {\n    display: none !important; }\n  .vega-embed summary {\n    list-style: none;\n    position: absolute;\n    top: 0;\n    right: 0;\n    padding: 6px;\n    z-index: 1000;\n    background: white;\n    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n    color: #1b1e23;\n    border: 1px solid #aaa;\n    border-radius: 999px;\n    opacity: 0.2;\n    transition: opacity 0.4s ease-in;\n    outline: none;\n    cursor: pointer;\n    line-height: 0px; }\n    .vega-embed summary::-webkit-details-marker {\n      display: none; }\n    .vega-embed summary:active {\n      box-shadow: #aaa 0px 0px 0px 1px inset; }\n    .vega-embed summary svg {\n      width: 14px;\n      height: 14px; }\n  .vega-embed details[open] summary {\n    opacity: 0.7; }\n  .vega-embed:hover summary,\n  .vega-embed:focus summary {\n    opacity: 1 !important;\n    transition: opacity 0.2s ease; }\n  .vega-embed .vega-actions {\n    position: absolute;\n    z-index: 1001;\n    top: 35px;\n    right: -9px;\n    display: flex;\n    flex-direction: column;\n    padding-bottom: 8px;\n    padding-top: 8px;\n    border-radius: 4px;\n    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n    border: 1px solid #d9d9d9;\n    background: white;\n    animation-duration: 0.15s;\n    animation-name: scale-in;\n    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n    text-align: left; }\n    .vega-embed .vega-actions a {\n      padding: 8px 16px;\n      font-family: sans-serif;\n      font-size: 14px;\n      font-weight: 600;\n      white-space: nowrap;\n      color: #434a56;\n      text-decoration: none; }\n      .vega-embed .vega-actions a:hover {\n        background-color: #f7f7f9;\n        color: black; }\n    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n      content: "";\n      display: inline-block;\n      position: absolute; }\n    .vega-embed .vega-actions::before {\n      left: auto;\n      right: 14px;\n      top: -16px;\n      border: 8px solid #0000;\n      border-bottom-color: #d9d9d9; }\n    .vega-embed .vega-actions::after {\n      left: auto;\n      right: 15px;\n      top: -14px;\n      border: 7px solid #0000;\n      border-bottom-color: #fff; }\n  .vega-embed .chart-wrapper.fit-x {\n    width: 100%; }\n  .vega-embed .chart-wrapper.fit-y {\n    height: 100%; }\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: auto;\n  padding-right: 14px; }\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6); }\n  to {\n    opacity: 1;\n    transform: scale(1); } }\n'.toString():
lb.defaultStyle,ye.appendChild(ia))}const zc=D(Sa,lb.mode);let ad=bi[zc](Sa,qb);"vega-lite"===zc&&ad.$schema&&(ia=O(ad.$schema),Ug.satisfies(Lf.vega,`^${ia.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${ia.version}, but current version is v${Lf.vega}.`));eb.classList.add("vega-embed");Vb&&eb.classList.add("has-actions");eb.innerHTML="";let Rd=eb;Vb&&(ia=document.createElement("div"),ia.classList.add("chart-wrapper"),eb.appendChild(ia),Rd=ia);(ia=lb.patch)&&(ad=ia instanceof Function?
ia(ad):G(ad,ia,!0,!1).newDocument);lb.formatLocale&&cg.formatLocale(lb.formatLocale);lb.timeFormatLocale&&cg.timeFormatLocale(lb.timeFormatLocale);({ast:ia}=lb);const Md=cg.parse(ad,"vega-lite"===zc?{}:qb,{ast:ia}),nd=new (lb.viewClass||cg.View)(Md,Object.assign({},{loader:Eb,logLevel:Za,renderer:Qb},ia?{expr:cg.expressionInterpreter}:{}));nd.addSignalListener("autosize",(se,ye)=>{({type:se}=ye);"fit-x"==se?(Rd.classList.add("fit-x"),Rd.classList.remove("fit-y")):"fit-y"==se?(Rd.classList.remove("fit-x"),
Rd.classList.add("fit-y")):"fit"==se?Rd.classList.add("fit-x","fit-y"):Rd.classList.remove("fit-x","fit-y")});!1!==lb.tooltip&&(Eb="function"===typeof lb.tooltip?lb.tooltip:(new xg(!0===lb.tooltip?{}:lb.tooltip)).call,nd.tooltip(Eb));({hover:Eb}=lb);void 0===Eb&&(Eb="vega"===zc);if(Eb){const {hoverSet:se,updateSet:ye}="boolean"===typeof Eb?{}:Eb;nd.hover(se,ye)}lb&&(null!=lb.width&&nd.width(lb.width),null!=lb.height&&nd.height(lb.height),null!=lb.padding&&nd.padding(lb.padding));await nd.initialize(Rd,
lb.bind).runAsync();let ee;if(!1!==Vb){Za=eb;if(!1!==lb.defaultStyle){const se=document.createElement("details");se.title=qc.CLICK_TO_VIEW_ACTIONS;eb.append(se);Za=se;Eb=document.createElement("summary");Eb.innerHTML='\n\x3csvg viewBox\x3d"0 0 16 16" fill\x3d"currentColor" stroke\x3d"none" stroke-width\x3d"1" stroke-linecap\x3d"round" stroke-linejoin\x3d"round"\x3e\n  \x3ccircle r\x3d"2" cy\x3d"8" cx\x3d"2"\x3e\x3c/circle\x3e\n  \x3ccircle r\x3d"2" cy\x3d"8" cx\x3d"8"\x3e\x3c/circle\x3e\n  \x3ccircle r\x3d"2" cy\x3d"8" cx\x3d"14"\x3e\x3c/circle\x3e\n\x3c/svg\x3e';
se.append(Eb);ee=ye=>{se.contains(ye.target)||se.removeAttribute("open")};document.addEventListener("click",ee)}Eb=document.createElement("div");Za.append(Eb);Eb.classList.add("vega-actions");if(!0===Vb||!1!==Vb.export)for(const se of["svg","png"])if(!0===Vb||!0===Vb.export||Vb.export[se])eb=qc[`${se.toUpperCase()}_ACTION`],Za=document.createElement("a"),Za.text=eb,Za.href="#",Za.target="_blank",Za.download=`${wb}.${se}`,Za.addEventListener("mousedown",async function(ye){ye.preventDefault();this.href=
await nd.toImageURL(se,lb.scaleFactor)}),Eb.append(Za);if(!0===Vb||!1!==Vb.source)wb=document.createElement("a"),wb.text=qc.SOURCE_ACTION,wb.href="#",wb.addEventListener("click",function(se){var ye,Oe;ea(Ob(Sa),null!==(ye=lb.sourceHeader)&&void 0!==ye?ye:"",null!==(Oe=lb.sourceFooter)&&void 0!==Oe?Oe:"",zc);se.preventDefault()}),Eb.append(wb);"vega-lite"!==zc||!0!==Vb&&!1===Vb.compiled||(wb=document.createElement("a"),wb.text=qc.COMPILED_ACTION,wb.href="#",wb.addEventListener("click",function(se){var ye,
Oe;ea(Ob(ad),null!==(ye=lb.sourceHeader)&&void 0!==ye?ye:"",null!==(Oe=lb.sourceFooter)&&void 0!==Oe?Oe:"","vega");se.preventDefault()}),Eb.append(wb));if(!0===Vb||!1!==Vb.editor){var Pd;const se=null!==(Pd=lb.editorUrl)&&void 0!==Pd?Pd:"https://vega.github.io/editor/";Pd=document.createElement("a");Pd.text=qc.EDITOR_ACTION;Pd.href="#";Pd.addEventListener("click",function(ye){H(window,se,{config:qb,mode:zc,renderer:Qb,spec:Ob(Sa)});ye.preventDefault()});Eb.append(Pd)}}return{view:nd,spec:Sa,vgSpec:ad,
finalize:function(){ee&&document.removeEventListener("click",ee);nd.finalize()}}}async function db(ia,Sa={}){var lb;const Eb=document.createElement("div");Eb.classList.add("vega-embed-wrapper");const Vb=document.createElement("div");Eb.appendChild(Vb);const qc=!0===Sa.actions||!1===Sa.actions?Sa.actions:Object.assign({},{export:!0,source:!1,compiled:!0,editor:!0},null!==(lb=Sa.actions)&&void 0!==lb?lb:{});ia=await Ia(Vb,ia,Object.assign({},{actions:qc},null!==Sa&&void 0!==Sa?Sa:{}));Eb.value=ia.view;
return Eb}var ub=x(w),pb=x(u),Ya=function(){var ia=function(Sa,lb){ia=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Eb,Vb){Eb.__proto__=Vb}||function(Eb,Vb){for(var qc in Vb)Vb.hasOwnProperty(qc)&&(Eb[qc]=Vb[qc])};return ia(Sa,lb)};return function(Sa,lb){function Eb(){this.constructor=Sa}ia(Sa,lb);Sa.prototype=null===lb?Object.create(lb):(Eb.prototype=lb.prototype,new Eb)}}(),Va=Object.prototype.hasOwnProperty,Pa=function(ia){function Sa(lb,Eb,Vb,qc,Za){var wb=this.constructor,eb=
ia.call(this,V(lb,{name:Eb,index:Vb,operation:qc,tree:Za}))||this;eb.name=Eb;eb.index=Vb;eb.operation=qc;eb.tree=Za;Object.setPrototypeOf(eb,wb.prototype);eb.message=V(lb,{name:Eb,index:Vb,operation:qc,tree:Za});return eb}Ya(Sa,ia);return Sa}(Error),Ha=Pa,Ca={add:function(ia,Sa,lb){ia[Sa]=this.value;return{newDocument:lb}},remove:function(ia,Sa,lb){var Eb=ia[Sa];delete ia[Sa];return{newDocument:lb,removed:Eb}},replace:function(ia,Sa,lb){var Eb=ia[Sa];ia[Sa]=this.value;return{newDocument:lb,removed:Eb}},
move:function(ia,Sa,lb){(ia=P(lb,this.path))&&(ia=B(ia));Sa=z(lb,{op:"remove",path:this.from}).removed;z(lb,{op:"add",path:this.path,value:Sa});return{newDocument:lb,removed:ia}},copy:function(ia,Sa,lb){ia=P(lb,this.from);z(lb,{op:"add",path:this.path,value:B(ia)});return{newDocument:lb}},test:function(ia,Sa,lb){return{newDocument:lb,test:ja(ia[Sa],this.value)}},_get:function(ia,Sa,lb){this.value=ia[Sa];return{newDocument:lb}}},Aa={add:function(ia,Sa,lb){N(Sa)?ia.splice(Sa,0,this.value):ia[Sa]=this.value;
return{newDocument:lb,index:Sa}},remove:function(ia,Sa,lb){ia=ia.splice(Sa,1);return{newDocument:lb,removed:ia[0]}},replace:function(ia,Sa,lb){var Eb=ia[Sa];ia[Sa]=this.value;return{newDocument:lb,removed:Eb}},move:Ca.move,copy:Ca.copy,test:Ca.test,_get:Ca._get},Ga=Object.freeze({__proto__:null,JsonPatchError:Ha,deepClone:B,getValueByPointer:P,applyOperation:z,applyPatch:G,applyReducer:function(ia,Sa,lb){var Eb=z(ia,Sa);if(!1===Eb.test)throw new Ha("Test operation failed","TEST_OPERATION_FAILED",
lb,Sa,ia);return Eb.newDocument},validator:Y,validate:Q,_areEquals:ja}),Ka=new WeakMap,cb=function(){return function(ia){this.observers=new Map;this.obj=ia}}(),fb=function(){return function(ia,Sa){this.callback=ia;this.observer=Sa}}(),La=Object.freeze({__proto__:null,unobserve:function(ia,Sa){Sa.unobserve()},observe:function(ia,Sa){var lb=Ka.get(ia);if(lb){var Eb=lb.observers.get(Sa);var Vb=Eb&&Eb.observer}else lb=new cb(ia),Ka.set(ia,lb);if(Vb)return Vb;Vb={};lb.value=B(ia);if(Sa){Vb.callback=Sa;
Vb.next=null;var qc=function(){pa(Vb)},Za=function(){clearTimeout(Vb.next);Vb.next=setTimeout(qc)};"undefined"!==typeof window&&(window.addEventListener("mouseup",Za),window.addEventListener("keyup",Za),window.addEventListener("mousedown",Za),window.addEventListener("keydown",Za),window.addEventListener("change",Za))}Vb.patches=[];Vb.object=ia;Vb.unobserve=function(){pa(Vb);clearTimeout(Vb.next);lb.observers.delete(Vb.callback);"undefined"!==typeof window&&(window.removeEventListener("mouseup",Za),
window.removeEventListener("keyup",Za),window.removeEventListener("mousedown",Za),window.removeEventListener("keydown",Za),window.removeEventListener("change",Za))};lb.observers.set(Sa,new fb(Sa,Vb));return Vb},generate:pa,compare:function(ia,Sa,lb){void 0===lb&&(lb=!1);var Eb=[];J(ia,Sa,Eb,"",lb);return Eb}});Object.assign({},Ga,La,{JsonPatchError:Pa,deepClone:B,escapePathComponent:da,unescapePathComponent:U});var Bb=/("(?:[^\\"]|\\.)*")|[:,]/g,Ob=function(ia,Sa){Sa=Sa||{};var lb=JSON.stringify([1],
void 0,void 0===Sa.indent?2:Sa.indent).slice(2,-3);var Eb=""===lb?Infinity:void 0===Sa.maxLength?80:Sa.maxLength;var Vb=Sa.replacer;return function qb(Za,wb,eb){Za&&"function"===typeof Za.toJSON&&(Za=Za.toJSON());var Qb=JSON.stringify(Za,Vb);if(void 0===Qb)return Qb;eb=Eb-wb.length-eb;if(Qb.length<=eb){var zc=Qb.replace(Bb,function(ye,Oe){return Oe||ye+" "});if(zc.length<=eb)return zc}null!=Vb&&(Za=JSON.parse(Qb),Vb=void 0);if("object"===typeof Za&&null!==Za){var ad=wb+lb;var Rd=[];var Md=0;if(Array.isArray(Za)){var nd=
"[";zc="]";for(eb=Za.length;Md<eb;Md++)Rd.push(qb(Za[Md],ad,Md===eb-1?0:1)||"null")}else{nd="{";zc="}";var ee=Object.keys(Za);for(eb=ee.length;Md<eb;Md++){var Pd=ee[Md];var se=JSON.stringify(Pd)+": ";Pd=qb(Za[Pd],ad,se.length+(Md===eb-1?0:1));void 0!==Pd&&Rd.push(se+Pd)}}if(0<Rd.length)return[nd,lb+Rd.join(",\n"+ad),zc].join("\n"+wb)}return Qb}(ia,"",0)},ec={exports:{}},sc={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16},
Ic="object"===typeof A&&A.env&&A.env.NODE_DEBUG&&/\bsemver\b/i.test(A.env.NODE_DEBUG)?(...ia)=>console.error("SEMVER",...ia):()=>{};(function(ia,Sa){const {MAX_SAFE_COMPONENT_LENGTH:lb}=sc;Sa=ia.exports={};const Eb=Sa.re=[],Vb=Sa.src=[],qc=Sa.t={};let Za=0;ia=(wb,eb,qb)=>{const Qb=Za++;Ic(Qb,eb);qc[wb]=Qb;Vb[Qb]=eb;Eb[Qb]=new RegExp(eb,qb?"g":void 0)};ia("NUMERICIDENTIFIER","0|[1-9]\\d*");ia("NUMERICIDENTIFIERLOOSE","[0-9]+");ia("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");ia("MAINVERSION",
`(${Vb[qc.NUMERICIDENTIFIER]})\\.`+`(${Vb[qc.NUMERICIDENTIFIER]})\\.`+`(${Vb[qc.NUMERICIDENTIFIER]})`);ia("MAINVERSIONLOOSE",`(${Vb[qc.NUMERICIDENTIFIERLOOSE]})\\.`+`(${Vb[qc.NUMERICIDENTIFIERLOOSE]})\\.`+`(${Vb[qc.NUMERICIDENTIFIERLOOSE]})`);ia("PRERELEASEIDENTIFIER",`(?:${Vb[qc.NUMERICIDENTIFIER]}|${Vb[qc.NONNUMERICIDENTIFIER]})`);ia("PRERELEASEIDENTIFIERLOOSE",`(?:${Vb[qc.NUMERICIDENTIFIERLOOSE]}|${Vb[qc.NONNUMERICIDENTIFIER]})`);ia("PRERELEASE",`(?:-(${Vb[qc.PRERELEASEIDENTIFIER]}(?:\\.${Vb[qc.PRERELEASEIDENTIFIER]})*))`);
ia("PRERELEASELOOSE",`(?:-?(${Vb[qc.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${Vb[qc.PRERELEASEIDENTIFIERLOOSE]})*))`);ia("BUILDIDENTIFIER","[0-9A-Za-z-]+");ia("BUILD",`(?:\\+(${Vb[qc.BUILDIDENTIFIER]}(?:\\.${Vb[qc.BUILDIDENTIFIER]})*))`);ia("FULLPLAIN",`v?${Vb[qc.MAINVERSION]}${Vb[qc.PRERELEASE]}?${Vb[qc.BUILD]}?`);ia("FULL",`^${Vb[qc.FULLPLAIN]}$`);ia("LOOSEPLAIN",`[v=\\s]*${Vb[qc.MAINVERSIONLOOSE]}${Vb[qc.PRERELEASELOOSE]}?${Vb[qc.BUILD]}?`);ia("LOOSE",`^${Vb[qc.LOOSEPLAIN]}$`);ia("GTLT","((?:\x3c|\x3e)?\x3d?)");
ia("XRANGEIDENTIFIERLOOSE",`${Vb[qc.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);ia("XRANGEIDENTIFIER",`${Vb[qc.NUMERICIDENTIFIER]}|x|X|\\*`);ia("XRANGEPLAIN",`[v=\\s]*(${Vb[qc.XRANGEIDENTIFIER]})`+`(?:\\.(${Vb[qc.XRANGEIDENTIFIER]})`+`(?:\\.(${Vb[qc.XRANGEIDENTIFIER]})`+`(?:${Vb[qc.PRERELEASE]})?${Vb[qc.BUILD]}?`+")?)?");ia("XRANGEPLAINLOOSE",`[v=\\s]*(${Vb[qc.XRANGEIDENTIFIERLOOSE]})`+`(?:\\.(${Vb[qc.XRANGEIDENTIFIERLOOSE]})`+`(?:\\.(${Vb[qc.XRANGEIDENTIFIERLOOSE]})`+`(?:${Vb[qc.PRERELEASELOOSE]})?${Vb[qc.BUILD]}?`+
")?)?");ia("XRANGE",`^${Vb[qc.GTLT]}\\s*${Vb[qc.XRANGEPLAIN]}$`);ia("XRANGELOOSE",`^${Vb[qc.GTLT]}\\s*${Vb[qc.XRANGEPLAINLOOSE]}$`);ia("COERCE",`${"(^|[^\\d])(\\d{1,"}${lb}})`+`(?:\\.(\\d{1,${lb}}))?`+`(?:\\.(\\d{1,${lb}}))?`+"(?:$|[^\\d])");ia("COERCERTL",Vb[qc.COERCE],!0);ia("LONETILDE","(?:~\x3e?)");ia("TILDETRIM",`(\\s*)${Vb[qc.LONETILDE]}\\s+`,!0);Sa.tildeTrimReplace="$1~";ia("TILDE",`^${Vb[qc.LONETILDE]}${Vb[qc.XRANGEPLAIN]}$`);ia("TILDELOOSE",`^${Vb[qc.LONETILDE]}${Vb[qc.XRANGEPLAINLOOSE]}$`);
ia("LONECARET","(?:\\^)");ia("CARETTRIM",`(\\s*)${Vb[qc.LONECARET]}\\s+`,!0);Sa.caretTrimReplace="$1^";ia("CARET",`^${Vb[qc.LONECARET]}${Vb[qc.XRANGEPLAIN]}$`);ia("CARETLOOSE",`^${Vb[qc.LONECARET]}${Vb[qc.XRANGEPLAINLOOSE]}$`);ia("COMPARATORLOOSE",`^${Vb[qc.GTLT]}\\s*(${Vb[qc.LOOSEPLAIN]})$|^$`);ia("COMPARATOR",`^${Vb[qc.GTLT]}\\s*(${Vb[qc.FULLPLAIN]})$|^$`);ia("COMPARATORTRIM",`(\\s*)${Vb[qc.GTLT]}\\s*(${Vb[qc.LOOSEPLAIN]}|${Vb[qc.XRANGEPLAIN]})`,!0);Sa.comparatorTrimReplace="$1$2$3";ia("HYPHENRANGE",
`^\\s*(${Vb[qc.XRANGEPLAIN]})`+"\\s+-\\s+"+`(${Vb[qc.XRANGEPLAIN]})`+"\\s*$");ia("HYPHENRANGELOOSE",`^\\s*(${Vb[qc.XRANGEPLAINLOOSE]})`+"\\s+-\\s+"+`(${Vb[qc.XRANGEPLAINLOOSE]})`+"\\s*$");ia("STAR","(\x3c|\x3e)?\x3d?\\s*\\*");ia("GTE0","^\\s*\x3e\x3d\\s*0.0.0\\s*$");ia("GTE0PRE","^\\s*\x3e\x3d\\s*0.0.0-0\\s*$")})(ec,ec.exports);const Xb=["includePrerelease","loose","rtl"];var Wb=ia=>ia?"object"!==typeof ia?{loose:!0}:Xb.filter(Sa=>ia[Sa]).reduce((Sa,lb)=>{Sa[lb]=!0;return Sa},{}):{};const Kc=/^[0-9]+$/,
Kb=(ia,Sa)=>{const lb=Kc.test(ia),Eb=Kc.test(Sa);lb&&Eb&&(ia=+ia,Sa=+Sa);return ia===Sa?0:lb&&!Eb?-1:Eb&&!lb?1:ia<Sa?-1:1};var mc={compareIdentifiers:Kb,rcompareIdentifiers:(ia,Sa)=>Kb(Sa,ia)};const {MAX_LENGTH:Ub,MAX_SAFE_INTEGER:oc}=sc,{re:Cc,t:Mc}=ec.exports,{compareIdentifiers:Pb}=mc;class nc{constructor(ia,Sa){Sa=Wb(Sa);if(ia instanceof nc){if(ia.loose===!!Sa.loose&&ia.includePrerelease===!!Sa.includePrerelease)return ia;ia=ia.version}else if("string"!==typeof ia)throw new TypeError(`Invalid Version: ${ia}`);
if(ia.length>Ub)throw new TypeError(`version is longer than ${Ub} characters`);Ic("SemVer",ia,Sa);this.options=Sa;this.loose=!!Sa.loose;this.includePrerelease=!!Sa.includePrerelease;Sa=ia.trim().match(Sa.loose?Cc[Mc.LOOSE]:Cc[Mc.FULL]);if(!Sa)throw new TypeError(`Invalid Version: ${ia}`);this.raw=ia;this.major=+Sa[1];this.minor=+Sa[2];this.patch=+Sa[3];if(this.major>oc||0>this.major)throw new TypeError("Invalid major version");if(this.minor>oc||0>this.minor)throw new TypeError("Invalid minor version");
if(this.patch>oc||0>this.patch)throw new TypeError("Invalid patch version");this.prerelease=Sa[4]?Sa[4].split(".").map(lb=>{if(/^[0-9]+$/.test(lb)){const Eb=+lb;if(0<=Eb&&Eb<oc)return Eb}return lb}):[];this.build=Sa[5]?Sa[5].split("."):[];this.format()}format(){this.version=`${this.major}.${this.minor}.${this.patch}`;this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`);return this.version}toString(){return this.version}compare(ia){Ic("SemVer.compare",this.version,this.options,ia);
if(!(ia instanceof nc)){if("string"===typeof ia&&ia===this.version)return 0;ia=new nc(ia,this.options)}return ia.version===this.version?0:this.compareMain(ia)||this.comparePre(ia)}compareMain(ia){ia instanceof nc||(ia=new nc(ia,this.options));return Pb(this.major,ia.major)||Pb(this.minor,ia.minor)||Pb(this.patch,ia.patch)}comparePre(ia){ia instanceof nc||(ia=new nc(ia,this.options));if(this.prerelease.length&&!ia.prerelease.length)return-1;if(!this.prerelease.length&&ia.prerelease.length)return 1;
if(!this.prerelease.length&&!ia.prerelease.length)return 0;let Sa=0;do{const lb=this.prerelease[Sa],Eb=ia.prerelease[Sa];Ic("prerelease compare",Sa,lb,Eb);if(void 0===lb&&void 0===Eb)return 0;if(void 0===Eb)return 1;if(void 0===lb)return-1;if(lb!==Eb)return Pb(lb,Eb)}while(++Sa)}compareBuild(ia){ia instanceof nc||(ia=new nc(ia,this.options));let Sa=0;do{const lb=this.build[Sa],Eb=ia.build[Sa];Ic("prerelease compare",Sa,lb,Eb);if(void 0===lb&&void 0===Eb)return 0;if(void 0===Eb)return 1;if(void 0===
lb)return-1;if(lb!==Eb)return Pb(lb,Eb)}while(++Sa)}inc(ia,Sa){switch(ia){case "premajor":this.minor=this.patch=this.prerelease.length=0;this.major++;this.inc("pre",Sa);break;case "preminor":this.patch=this.prerelease.length=0;this.minor++;this.inc("pre",Sa);break;case "prepatch":this.prerelease.length=0;this.inc("patch",Sa);this.inc("pre",Sa);break;case "prerelease":0===this.prerelease.length&&this.inc("patch",Sa);this.inc("pre",Sa);break;case "major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||
this.major++;this.patch=this.minor=0;this.prerelease=[];break;case "minor":0===this.patch&&0!==this.prerelease.length||this.minor++;this.patch=0;this.prerelease=[];break;case "patch":0===this.prerelease.length&&this.patch++;this.prerelease=[];break;case "pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(ia=this.prerelease.length;0<=--ia;)"number"===typeof this.prerelease[ia]&&(this.prerelease[ia]++,ia=-2);-1===ia&&this.prerelease.push(0)}Sa&&(this.prerelease[0]===Sa?isNaN(this.prerelease[1])&&
(this.prerelease=[Sa,0]):this.prerelease=[Sa,0]);break;default:throw Error(`invalid increment argument: ${ia}`);}this.format();this.raw=this.version;return this}}var rc=nc;const {MAX_LENGTH:Hb}=sc,{re:Jc,t:kc}=ec.exports;var Ab=(ia,Sa)=>{Sa=Wb(Sa);if(ia instanceof rc)return ia;if("string"!==typeof ia||ia.length>Hb||!(Sa.loose?Jc[kc.LOOSE]:Jc[kc.FULL]).test(ia))return null;try{return new rc(ia,Sa)}catch(lb){return null}},md=(ia,Sa,lb)=>(new rc(ia,lb)).compare(new rc(Sa,lb)),yd=(ia,Sa,lb)=>{ia=new rc(ia,
lb);Sa=new rc(Sa,lb);return ia.compare(Sa)||ia.compareBuild(Sa)},hd=(ia,Sa,lb)=>0<md(ia,Sa,lb),Ed=(ia,Sa,lb)=>0>md(ia,Sa,lb),Qd=(ia,Sa,lb)=>0<=md(ia,Sa,lb),fd=(ia,Sa,lb)=>0>=md(ia,Sa,lb),ed=(ia,Sa,lb,Eb)=>{switch(Sa){case "\x3d\x3d\x3d":return"object"===typeof ia&&(ia=ia.version),"object"===typeof lb&&(lb=lb.version),ia===lb;case "!\x3d\x3d":return"object"===typeof ia&&(ia=ia.version),"object"===typeof lb&&(lb=lb.version),ia!==lb;case "":case "\x3d":case "\x3d\x3d":return 0===md(ia,lb,Eb);case "!\x3d":return 0!==
md(ia,lb,Eb);case "\x3e":return 0<md(ia,lb,Eb);case "\x3e\x3d":return 0<=md(ia,lb,Eb);case "\x3c":return 0>md(ia,lb,Eb);case "\x3c\x3d":return 0>=md(ia,lb,Eb);default:throw new TypeError(`Invalid operator: ${Sa}`);}};const {re:bc,t:yc}=ec.exports;var $c=function(ia){ia.prototype[Symbol.iterator]=function*(){for(let Sa=this.head;Sa;Sa=Sa.next)yield Sa.value}};K.Node=ba;K.create=K;K.prototype.removeNode=function(ia){if(ia.list!==this)throw Error("removing node which does not belong to this list");var Sa=
ia.next,lb=ia.prev;Sa&&(Sa.prev=lb);lb&&(lb.next=Sa);ia===this.head&&(this.head=Sa);ia===this.tail&&(this.tail=lb);ia.list.length--;ia.next=null;ia.prev=null;ia.list=null;return Sa};K.prototype.unshiftNode=function(ia){if(ia!==this.head){ia.list&&ia.list.removeNode(ia);var Sa=this.head;ia.list=this;if(ia.next=Sa)Sa.prev=ia;this.head=ia;this.tail||(this.tail=ia);this.length++}};K.prototype.pushNode=function(ia){if(ia!==this.tail){ia.list&&ia.list.removeNode(ia);var Sa=this.tail;ia.list=this;if(ia.prev=
Sa)Sa.next=ia;this.tail=ia;this.head||(this.head=ia);this.length++}};K.prototype.push=function(){for(var ia=0,Sa=arguments.length;ia<Sa;ia++)this.tail=new ba(arguments[ia],this.tail,null,this),this.head||(this.head=this.tail),this.length++;return this.length};K.prototype.unshift=function(){for(var ia=0,Sa=arguments.length;ia<Sa;ia++)this.head=new ba(arguments[ia],null,this.head,this),this.tail||(this.tail=this.head),this.length++;return this.length};K.prototype.pop=function(){if(this.tail){var ia=
this.tail.value;(this.tail=this.tail.prev)?this.tail.next=null:this.head=null;this.length--;return ia}};K.prototype.shift=function(){if(this.head){var ia=this.head.value;(this.head=this.head.next)?this.head.prev=null:this.tail=null;this.length--;return ia}};K.prototype.forEach=function(ia,Sa){Sa=Sa||this;for(var lb=this.head,Eb=0;null!==lb;Eb++)ia.call(Sa,lb.value,Eb,this),lb=lb.next};K.prototype.forEachReverse=function(ia,Sa){Sa=Sa||this;for(var lb=this.tail,Eb=this.length-1;null!==lb;Eb--)ia.call(Sa,
lb.value,Eb,this),lb=lb.prev};K.prototype.get=function(ia){for(var Sa=0,lb=this.head;null!==lb&&Sa<ia;Sa++)lb=lb.next;if(Sa===ia&&null!==lb)return lb.value};K.prototype.getReverse=function(ia){for(var Sa=0,lb=this.tail;null!==lb&&Sa<ia;Sa++)lb=lb.prev;if(Sa===ia&&null!==lb)return lb.value};K.prototype.map=function(ia,Sa){Sa=Sa||this;for(var lb=new K,Eb=this.head;null!==Eb;)lb.push(ia.call(Sa,Eb.value,this)),Eb=Eb.next;return lb};K.prototype.mapReverse=function(ia,Sa){Sa=Sa||this;for(var lb=new K,
Eb=this.tail;null!==Eb;)lb.push(ia.call(Sa,Eb.value,this)),Eb=Eb.prev;return lb};K.prototype.reduce=function(ia,Sa){var lb=this.head;if(1<arguments.length)var Eb=Sa;else if(this.head)lb=this.head.next,Eb=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var Vb=0;null!==lb;Vb++)Eb=ia(Eb,lb.value,Vb),lb=lb.next;return Eb};K.prototype.reduceReverse=function(ia,Sa){var lb=this.tail;if(1<arguments.length)var Eb=Sa;else if(this.tail)lb=this.tail.prev,Eb=this.tail.value;
else throw new TypeError("Reduce of empty list with no initial value");for(var Vb=this.length-1;null!==lb;Vb--)Eb=ia(Eb,lb.value,Vb),lb=lb.prev;return Eb};K.prototype.toArray=function(){for(var ia=Array(this.length),Sa=0,lb=this.head;null!==lb;Sa++)ia[Sa]=lb.value,lb=lb.next;return ia};K.prototype.toArrayReverse=function(){for(var ia=Array(this.length),Sa=0,lb=this.tail;null!==lb;Sa++)ia[Sa]=lb.value,lb=lb.prev;return ia};K.prototype.slice=function(ia,Sa){Sa=Sa||this.length;0>Sa&&(Sa+=this.length);
ia=ia||0;0>ia&&(ia+=this.length);var lb=new K;if(Sa<ia||0>Sa)return lb;0>ia&&(ia=0);Sa>this.length&&(Sa=this.length);for(var Eb=0,Vb=this.head;null!==Vb&&Eb<ia;Eb++)Vb=Vb.next;for(;null!==Vb&&Eb<Sa;Eb++,Vb=Vb.next)lb.push(Vb.value);return lb};K.prototype.sliceReverse=function(ia,Sa){Sa=Sa||this.length;0>Sa&&(Sa+=this.length);ia=ia||0;0>ia&&(ia+=this.length);var lb=new K;if(Sa<ia||0>Sa)return lb;0>ia&&(ia=0);Sa>this.length&&(Sa=this.length);for(var Eb=this.length,Vb=this.tail;null!==Vb&&Eb>Sa;Eb--)Vb=
Vb.prev;for(;null!==Vb&&Eb>ia;Eb--,Vb=Vb.prev)lb.push(Vb.value);return lb};K.prototype.splice=function(ia,Sa,...lb){ia>this.length&&(ia=this.length-1);0>ia&&(ia=this.length+ia);for(var Eb=0,Vb=this.head;null!==Vb&&Eb<ia;Eb++)Vb=Vb.next;ia=[];for(Eb=0;Vb&&Eb<Sa;Eb++)ia.push(Vb.value),Vb=this.removeNode(Vb);null===Vb&&(Vb=this.tail);Vb!==this.head&&Vb!==this.tail&&(Vb=Vb.prev);for(Eb=0;Eb<lb.length;Eb++)Sa=Vb,Vb=lb[Eb],Sa=Sa===this.head?new ba(Vb,null,Sa,this):new ba(Vb,Sa,Sa.next,this),null===Sa.next&&
(this.tail=Sa),null===Sa.prev&&(this.head=Sa),this.length++,Vb=Sa;return ia};K.prototype.reverse=function(){for(var ia=this.head,Sa=this.tail,lb=ia;null!==lb;lb=lb.prev){var Eb=lb.prev;lb.prev=lb.next;lb.next=Eb}this.head=Sa;this.tail=ia;return this};try{$c(K)}catch(ia){}const cc=Symbol("max"),tb=Symbol("length"),tc=Symbol("lengthCalculator"),Ec=Symbol("allowStale"),cd=Symbol("maxAge"),bd=Symbol("dispose"),od=Symbol("noDisposeOnSet"),Dd=Symbol("lruList"),xd=Symbol("cache"),sd=Symbol("updateAgeOnGet"),
Vd=()=>1;class re{constructor(ia){"number"===typeof ia&&(ia={max:ia});ia||(ia={});if(ia.max&&("number"!==typeof ia.max||0>ia.max))throw new TypeError("max must be a non-negative number");this[cc]=ia.max||Infinity;const Sa=ia.length||Vd;this[tc]="function"!==typeof Sa?Vd:Sa;this[Ec]=ia.stale||!1;if(ia.maxAge&&"number"!==typeof ia.maxAge)throw new TypeError("maxAge must be a number");this[cd]=ia.maxAge||0;this[bd]=ia.dispose;this[od]=ia.noDisposeOnSet||!1;this[sd]=ia.updateAgeOnGet||!1;this.reset()}set max(ia){if("number"!==
typeof ia||0>ia)throw new TypeError("max must be a non-negative number");this[cc]=ia||Infinity;Bf(this)}get max(){return this[cc]}set allowStale(ia){this[Ec]=!!ia}get allowStale(){return this[Ec]}set maxAge(ia){if("number"!==typeof ia)throw new TypeError("maxAge must be a non-negative number");this[cd]=ia;Bf(this)}get maxAge(){return this[cd]}set lengthCalculator(ia){"function"!==typeof ia&&(ia=Vd);ia!==this[tc]&&(this[tc]=ia,this[tb]=0,this[Dd].forEach(Sa=>{Sa.length=this[tc](Sa.value,Sa.key);this[tb]+=
Sa.length}));Bf(this)}get lengthCalculator(){return this[tc]}get length(){return this[tb]}get itemCount(){return this[Dd].length}rforEach(ia,Sa){Sa=Sa||this;for(let lb=this[Dd].tail;null!==lb;){const Eb=lb.prev;rf(this,ia,lb,Sa);lb=Eb}}forEach(ia,Sa){Sa=Sa||this;for(let lb=this[Dd].head;null!==lb;){const Eb=lb.next;rf(this,ia,lb,Sa);lb=Eb}}keys(){return this[Dd].toArray().map(ia=>ia.key)}values(){return this[Dd].toArray().map(ia=>ia.value)}reset(){this[bd]&&this[Dd]&&this[Dd].length&&this[Dd].forEach(ia=>
this[bd](ia.key,ia.value));this[xd]=new Map;this[Dd]=new K;this[tb]=0}dump(){return this[Dd].map(ia=>Fe(this,ia)?!1:{k:ia.key,v:ia.value,e:ia.now+(ia.maxAge||0)}).toArray().filter(ia=>ia)}dumpLru(){return this[Dd]}set(ia,Sa,lb){if((lb=lb||this[cd])&&"number"!==typeof lb)throw new TypeError("maxAge must be a number");const Eb=lb?Date.now():0,Vb=this[tc](Sa,ia);if(this[xd].has(ia)){if(Vb>this[cc])return Ye(this,this[xd].get(ia)),!1;const qc=this[xd].get(ia).value;if(this[bd]&&!this[od])this[bd](ia,
qc.value);qc.now=Eb;qc.maxAge=lb;qc.value=Sa;this[tb]+=Vb-qc.length;qc.length=Vb;this.get(ia);Bf(this);return!0}lb=new bg(ia,Sa,Vb,Eb,lb);if(lb.length>this[cc]){if(this[bd])this[bd](ia,Sa);return!1}this[tb]+=lb.length;this[Dd].unshift(lb);this[xd].set(ia,this[Dd].head);Bf(this);return!0}has(ia){if(!this[xd].has(ia))return!1;ia=this[xd].get(ia).value;return!Fe(this,ia)}get(ia){return Wd(this,ia,!0)}peek(ia){return Wd(this,ia,!1)}pop(){const ia=this[Dd].tail;if(!ia)return null;Ye(this,ia);return ia.value}del(ia){Ye(this,
this[xd].get(ia))}load(ia){this.reset();const Sa=Date.now();for(let Eb=ia.length-1;0<=Eb;Eb--){const Vb=ia[Eb];var lb=Vb.e||0;0===lb?this.set(Vb.k,Vb.v):(lb-=Sa,0<lb&&this.set(Vb.k,Vb.v,lb))}}prune(){this[xd].forEach((ia,Sa)=>Wd(this,Sa,!1))}}const Wd=(ia,Sa,lb)=>{if(Sa=ia[xd].get(Sa)){const Eb=Sa.value;if(Fe(ia,Eb)){if(Ye(ia,Sa),!ia[Ec])return}else lb&&(ia[sd]&&(Sa.value.now=Date.now()),ia[Dd].unshiftNode(Sa));return Eb.value}},Fe=(ia,Sa)=>{if(!Sa||!Sa.maxAge&&!ia[cd])return!1;const lb=Date.now()-
Sa.now;return Sa.maxAge?lb>Sa.maxAge:ia[cd]&&lb>ia[cd]},Bf=ia=>{if(ia[tb]>ia[cc])for(let Sa=ia[Dd].tail;ia[tb]>ia[cc]&&null!==Sa;){const lb=Sa.prev;Ye(ia,Sa);Sa=lb}},Ye=(ia,Sa)=>{if(Sa){const lb=Sa.value;if(ia[bd])ia[bd](lb.key,lb.value);ia[tb]-=lb.length;ia[xd].delete(lb.key);ia[Dd].removeNode(Sa)}};class bg{constructor(ia,Sa,lb,Eb,Vb){this.key=ia;this.value=Sa;this.length=lb;this.now=Eb;this.maxAge=Vb||0}}const rf=(ia,Sa,lb,Eb)=>{let Vb=lb.value;Fe(ia,Vb)&&(Ye(ia,lb),ia[Ec]||(Vb=void 0));Vb&&Sa.call(Eb,
Vb.value,Vb.key,ia)};class Ff{constructor(ia,Sa){Sa=Jb(Sa);if(ia instanceof Ff)return ia.loose===!!Sa.loose&&ia.includePrerelease===!!Sa.includePrerelease?ia:new Ff(ia.raw,Sa);if(ia instanceof lc)return this.raw=ia.value,this.set=[[ia]],this.format(),this;this.options=Sa;this.loose=!!Sa.loose;this.includePrerelease=!!Sa.includePrerelease;this.raw=ia;this.set=ia.split(/\s*\|\|\s*/).map(lb=>this.parseRange(lb.trim())).filter(lb=>lb.length);if(!this.set.length)throw new TypeError(`Invalid SemVer Range: ${ia}`);
if(1<this.set.length)if(ia=this.set[0],this.set=this.set.filter(lb=>"\x3c0.0.0-0"!==lb[0].value),0===this.set.length)this.set=[ia];else if(1<this.set.length)for(const lb of this.set)if(1===lb.length&&""===lb[0].value){this.set=[lb];break}this.format()}format(){return this.range=this.set.map(ia=>ia.join(" ").trim()).join("||").trim()}toString(){return this.range}parseRange(ia){ia=ia.trim();const Sa=`parseRange:${Object.keys(this.options).join(",")}:${ia}`;var lb=gf.get(Sa);if(lb)return lb;lb=this.options.loose;
ia=ia.replace(lb?rd[Nd.HYPHENRANGELOOSE]:rd[Nd.HYPHENRANGE],Pg(this.options.includePrerelease));Uc("hyphen replace",ia);ia=ia.replace(rd[Nd.COMPARATORTRIM],he);Uc("comparator trim",ia,rd[Nd.COMPARATORTRIM]);ia=ia.replace(rd[Nd.TILDETRIM],qd);ia=ia.replace(rd[Nd.CARETTRIM],qe);ia=ia.split(/\s+/).join(" ");const Eb=lb?rd[Nd.COMPARATORLOOSE]:rd[Nd.COMPARATOR];ia=ia.split(" ").map(qc=>{var Za=qc;qc=this.options;Uc("comp",Za,qc);Za=tf(Za,qc);Uc("caret",Za);Za=sf(Za,qc);Uc("tildes",Za);Za=Lg(Za,qc);Uc("xrange",
Za);Uc("replaceStars",Za,qc);Za=Za.trim().replace(rd[Nd.STAR],"");Uc("stars",Za);return Za}).join(" ").split(/\s+/).map(qc=>{var Za=this.options;Uc("replaceGTE0",qc,Za);return qc.trim().replace(rd[Za.includePrerelease?Nd.GTE0PRE:Nd.GTE0],"")}).filter(this.options.loose?qc=>!!qc.match(Eb):()=>!0).map(qc=>new lc(qc,this.options));ia.length;lb=new Map;for(var Vb of ia){if("\x3c0.0.0-0"===Vb.value)return[Vb];lb.set(Vb.value,Vb)}1<lb.size&&lb.has("")&&lb.delete("");Vb=[...lb.values()];gf.set(Sa,Vb);return Vb}intersects(ia,
Sa){if(!(ia instanceof Ff))throw new TypeError("a Range is required");return this.set.some(lb=>we(lb,Sa)&&ia.set.some(Eb=>we(Eb,Sa)&&lb.every(Vb=>Eb.every(qc=>Vb.intersects(qc,Sa)))))}test(ia){if(!ia)return!1;if("string"===typeof ia)try{ia=new Zc(ia,this.options)}catch(qc){return!1}for(let qc=0;qc<this.set.length;qc++){a:{var Sa=this.set[qc];var lb=ia,Eb=this.options;for(var Vb=0;Vb<Sa.length;Vb++)if(!Sa[Vb].test(lb)){Sa=!1;break a}if(lb.prerelease.length&&!Eb.includePrerelease){for(Eb=0;Eb<Sa.length;Eb++)if(Uc(Sa[Eb].semver),
Sa[Eb].semver!==lc.ANY&&0<Sa[Eb].semver.prerelease.length&&(Vb=Sa[Eb].semver,Vb.major===lb.major&&Vb.minor===lb.minor&&Vb.patch===lb.patch)){Sa=!0;break a}Sa=!1}else Sa=!0}if(Sa)return!0}return!1}}var pg=Ff;const gf=new re({max:1E3}),Jb=Wb,lc=Zg,Uc=Ic,Zc=rc,{re:rd,t:Nd,comparatorTrimReplace:he,tildeTrimReplace:qd,caretTrimReplace:qe}=ec.exports,we=(ia,Sa)=>{let lb=!0;ia=ia.slice();let Eb=ia.pop();for(;lb&&ia.length;)lb=ia.every(Vb=>Eb.intersects(Vb,Sa)),Eb=ia.pop();return lb},Cd=ia=>!ia||"x"===ia.toLowerCase()||
"*"===ia,sf=(ia,Sa)=>ia.trim().split(/\s+/).map(lb=>Jf(lb,Sa)).join(" "),Jf=(ia,Sa)=>ia.replace(Sa.loose?rd[Nd.TILDELOOSE]:rd[Nd.TILDE],(lb,Eb,Vb,qc,Za)=>{Uc("tilde",ia,lb,Eb,Vb,qc,Za);Cd(Eb)?lb="":Cd(Vb)?lb=`>=${Eb}.0.0 <${+Eb+1}.0.0-0`:Cd(qc)?lb=`>=${Eb}.${Vb}.0 <${Eb}.${+Vb+1}.0-0`:Za?(Uc("replaceTilde pr",Za),lb=`>=${Eb}.${Vb}.${qc}-${Za} <${Eb}.${+Vb+1}.0-0`):lb=`>=${Eb}.${Vb}.${qc} <${Eb}.${+Vb+1}.0-0`;Uc("tilde return",lb);return lb}),tf=(ia,Sa)=>ia.trim().split(/\s+/).map(lb=>lf(lb,Sa)).join(" "),
lf=(ia,Sa)=>{Uc("caret",ia,Sa);const lb=Sa.includePrerelease?"-0":"";return ia.replace(Sa.loose?rd[Nd.CARETLOOSE]:rd[Nd.CARET],(Eb,Vb,qc,Za,wb)=>{Uc("caret",ia,Eb,Vb,qc,Za,wb);Cd(Vb)?Eb="":Cd(qc)?Eb=`>=${Vb}.0.0${lb} <${+Vb+1}.0.0-0`:Cd(Za)?Eb="0"===Vb?`>=${Vb}.${qc}.0${lb} <${Vb}.${+qc+1}.0-0`:`>=${Vb}.${qc}.0${lb} <${+Vb+1}.0.0-0`:wb?(Uc("replaceCaret pr",wb),Eb="0"===Vb?"0"===qc?`>=${Vb}.${qc}.${Za}-${wb} <${Vb}.${qc}.${+Za+1}-0`:`>=${Vb}.${qc}.${Za}-${wb} <${Vb}.${+qc+1}.0-0`:`>=${Vb}.${qc}.${Za}-${wb} <${+Vb+
1}.0.0-0`):(Uc("no pr"),Eb="0"===Vb?"0"===qc?`>=${Vb}.${qc}.${Za}${lb} <${Vb}.${qc}.${+Za+1}-0`:`>=${Vb}.${qc}.${Za}${lb} <${Vb}.${+qc+1}.0-0`:`>=${Vb}.${qc}.${Za} <${+Vb+1}.0.0-0`);Uc("caret return",Eb);return Eb})},Lg=(ia,Sa)=>{Uc("replaceXRanges",ia,Sa);return ia.split(/\s+/).map(lb=>rg(lb,Sa)).join(" ")},rg=(ia,Sa)=>{ia=ia.trim();return ia.replace(Sa.loose?rd[Nd.XRANGELOOSE]:rd[Nd.XRANGE],(lb,Eb,Vb,qc,Za,wb)=>{Uc("xRange",ia,lb,Eb,Vb,qc,Za,wb);const eb=Cd(Vb),qb=eb||Cd(qc);Za=qb||Cd(Za);"\x3d"===
Eb&&Za&&(Eb="");wb=Sa.includePrerelease?"-0":"";eb?lb="\x3e"===Eb||"\x3c"===Eb?"\x3c0.0.0-0":"*":Eb&&Za?(qb&&(qc=0),Za=0,"\x3e"===Eb?(Eb="\x3e\x3d",qb?(Vb=+Vb+1,qc=0):qc=+qc+1,Za=0):"\x3c\x3d"===Eb&&(Eb="\x3c",qb?Vb=+Vb+1:qc=+qc+1),"\x3c"===Eb&&(wb="-0"),lb=`${Eb+Vb}.${qc}.${Za}${wb}`):qb?lb=`>=${Vb}.0.0${wb} <${+Vb+1}.0.0-0`:Za&&(lb=`>=${Vb}.${qc}.0${wb} <${Vb}.${+qc+1}.0-0`);Uc("xRange return",lb);return lb})},Pg=ia=>(Sa,lb,Eb,Vb,qc,Za,wb,eb,qb,Qb,zc,ad,Rd)=>{lb=Cd(Eb)?"":Cd(Vb)?`>=${Eb}.0.0${ia?
"-0":""}`:Cd(qc)?`>=${Eb}.${Vb}.0${ia?"-0":""}`:Za?`>=${lb}`:`>=${lb}${ia?"-0":""}`;eb=Cd(qb)?"":Cd(Qb)?`<${+qb+1}.0.0-0`:Cd(zc)?`<${qb}.${+Qb+1}.0-0`:ad?`<=${qb}.${Qb}.${zc}-${ad}`:ia?`<${qb}.${Qb}.${+zc+1}-0`:`<=${eb}`;return`${lb} ${eb}`.trim()},fh=Symbol("SemVer ANY");class eh{static get ANY(){return fh}constructor(ia,Sa){Sa=oi(Sa);if(ia instanceof eh){if(ia.loose===!!Sa.loose)return ia;ia=ia.value}Wc("comparator",ia,Sa);this.options=Sa;this.loose=!!Sa.loose;this.parse(ia);this.value=this.semver===
fh?"":this.operator+this.semver.version;Wc("comp",this)}parse(ia){const Sa=ia.match(this.options.loose?ei[Yh.COMPARATORLOOSE]:ei[Yh.COMPARATOR]);if(!Sa)throw new TypeError(`Invalid comparator: ${ia}`);this.operator=void 0!==Sa[1]?Sa[1]:"";"\x3d"===this.operator&&(this.operator="");this.semver=Sa[2]?new ib(Sa[2],this.options.loose):fh}toString(){return this.value}test(ia){Wc("Comparator.test",ia,this.options.loose);if(this.semver===fh||ia===fh)return!0;if("string"===typeof ia)try{ia=new ib(ia,this.options)}catch(Sa){return!1}return wh(ia,
this.operator,this.semver,this.options)}intersects(ia,Sa){if(!(ia instanceof eh))throw new TypeError("a Comparator is required");Sa&&"object"===typeof Sa||(Sa={loose:!!Sa,includePrerelease:!1});if(""===this.operator)return""===this.value?!0:(new Ua(ia.value,Sa)).test(this.value);if(""===ia.operator)return""===ia.value?!0:(new Ua(this.value,Sa)).test(ia.semver);const lb=("\x3e\x3d"===this.operator||"\x3e"===this.operator)&&("\x3e\x3d"===ia.operator||"\x3e"===ia.operator),Eb=("\x3c\x3d"===this.operator||
"\x3c"===this.operator)&&("\x3c\x3d"===ia.operator||"\x3c"===ia.operator),Vb=this.semver.version===ia.semver.version,qc=("\x3e\x3d"===this.operator||"\x3c\x3d"===this.operator)&&("\x3e\x3d"===ia.operator||"\x3c\x3d"===ia.operator),Za=wh(this.semver,"\x3c",ia.semver,Sa)&&("\x3e\x3d"===this.operator||"\x3e"===this.operator)&&("\x3c\x3d"===ia.operator||"\x3c"===ia.operator);ia=wh(this.semver,"\x3e",ia.semver,Sa)&&("\x3c\x3d"===this.operator||"\x3c"===this.operator)&&("\x3e\x3d"===ia.operator||"\x3e"===
ia.operator);return lb||Eb||Vb&&qc||Za||ia}}var Zg=eh;const oi=Wb,{re:ei,t:Yh}=ec.exports,wh=ed,Wc=Ic,ib=rc,Ua=pg;var v=(ia,Sa,lb)=>{try{Sa=new pg(Sa,lb)}catch(Eb){return!1}return Sa.test(ia)};const Xa=Zg,{ANY:gc}=Xa;var wd=(ia,Sa,lb,Eb)=>{ia=new rc(ia,Eb);Sa=new pg(Sa,Eb);let Vb,qc,Za,wb;switch(lb){case "\x3e":Vb=hd;lb=fd;qc=Ed;Za="\x3e";wb="\x3e\x3d";break;case "\x3c":Vb=Ed;lb=Qd;qc=hd;Za="\x3c";wb="\x3c\x3d";break;default:throw new TypeError('Must provide a hilo val of "\x3c" or "\x3e"');}if(v(ia,
Sa,Eb))return!1;for(let eb=0;eb<Sa.set.length;++eb){let qb=null,Qb=null;Sa.set[eb].forEach(zc=>{zc.semver===gc&&(zc=new Xa("\x3e\x3d0.0.0"));qb=qb||zc;Qb=Qb||zc;Vb(zc.semver,qb.semver,Eb)?qb=zc:qc(zc.semver,Qb.semver,Eb)&&(Qb=zc)});if(qb.operator===Za||qb.operator===wb||(!Qb.operator||Qb.operator===Za)&&lb(ia,Qb.semver)||Qb.operator===wb&&qc(ia,Qb.semver))return!1}return!0};const Ce=Zg,{ANY:Hf}=Ce,zg=(ia,Sa,lb)=>{if(ia===Sa)return!0;if(1===ia.length&&ia[0].semver===Hf){if(1===Sa.length&&Sa[0].semver===
Hf)return!0;ia=lb.includePrerelease?[new Ce("\x3e\x3d0.0.0-0")]:[new Ce("\x3e\x3d0.0.0")]}if(1===Sa.length&&Sa[0].semver===Hf){if(lb.includePrerelease)return!0;Sa=[new Ce("\x3e\x3d0.0.0")]}var Eb=new Set;let Vb,qc;for(const qb of ia)"\x3e"===qb.operator||"\x3e\x3d"===qb.operator?Vb=$g(Vb,qb,lb):"\x3c"===qb.operator||"\x3c\x3d"===qb.operator?qc=lg(qc,qb,lb):Eb.add(qb.semver);if(1<Eb.size)return null;let Za;if(Vb&&qc&&(Za=md(Vb.semver,qc.semver,lb),0<Za||0===Za&&("\x3e\x3d"!==Vb.operator||"\x3c\x3d"!==
qc.operator)))return null;for(const qb of Eb){if(Vb&&!v(qb,String(Vb),lb)||qc&&!v(qb,String(qc),lb))return null;for(const Qb of Sa)if(!v(qb,String(Qb),lb))return!1;return!0}let wb,eb;ia=qc&&!lb.includePrerelease&&qc.semver.prerelease.length?qc.semver:!1;Eb=Vb&&!lb.includePrerelease&&Vb.semver.prerelease.length?Vb.semver:!1;ia&&1===ia.prerelease.length&&"\x3c"===qc.operator&&0===ia.prerelease[0]&&(ia=!1);for(const qb of Sa){eb=eb||"\x3e"===qb.operator||"\x3e\x3d"===qb.operator;wb=wb||"\x3c"===qb.operator||
"\x3c\x3d"===qb.operator;if(Vb)if(Eb&&qb.semver.prerelease&&qb.semver.prerelease.length&&qb.semver.major===Eb.major&&qb.semver.minor===Eb.minor&&qb.semver.patch===Eb.patch&&(Eb=!1),"\x3e"===qb.operator||"\x3e\x3d"===qb.operator){if(Sa=$g(Vb,qb,lb),Sa===qb&&Sa!==Vb)return!1}else if("\x3e\x3d"===Vb.operator&&!v(Vb.semver,String(qb),lb))return!1;if(qc)if(ia&&qb.semver.prerelease&&qb.semver.prerelease.length&&qb.semver.major===ia.major&&qb.semver.minor===ia.minor&&qb.semver.patch===ia.patch&&(ia=!1),
"\x3c"===qb.operator||"\x3c\x3d"===qb.operator){if(Sa=lg(qc,qb,lb),Sa===qb&&Sa!==qc)return!1}else if("\x3c\x3d"===qc.operator&&!v(qc.semver,String(qb),lb))return!1;if(!qb.operator&&(qc||Vb)&&0!==Za)return!1}return Vb&&wb&&!qc&&0!==Za||qc&&eb&&!Vb&&0!==Za||Eb||ia?!1:!0},$g=(ia,Sa,lb)=>{if(!ia)return Sa;lb=md(ia.semver,Sa.semver,lb);return 0<lb?ia:0>lb?Sa:"\x3e"===Sa.operator&&"\x3e\x3d"===ia.operator?Sa:ia},lg=(ia,Sa,lb)=>{if(!ia)return Sa;lb=md(ia.semver,Sa.semver,lb);return 0>lb?ia:0<lb?Sa:"\x3c"===
Sa.operator&&"\x3c\x3d"===ia.operator?Sa:ia},Ag=ec.exports;var Ug={re:Ag.re,src:Ag.src,tokens:Ag.t,SEMVER_SPEC_VERSION:sc.SEMVER_SPEC_VERSION,SemVer:rc,compareIdentifiers:mc.compareIdentifiers,rcompareIdentifiers:mc.rcompareIdentifiers,parse:Ab,valid:(ia,Sa)=>(ia=Ab(ia,Sa))?ia.version:null,clean:(ia,Sa)=>(ia=Ab(ia.trim().replace(/^[=v]+/,""),Sa))?ia.version:null,inc:(ia,Sa,lb,Eb)=>{"string"===typeof lb&&(Eb=lb,lb=void 0);try{return(new rc(ia,lb)).inc(Sa,Eb).version}catch(Vb){return null}},diff:(ia,
Sa)=>{if(0===md(ia,Sa,void 0))return null;ia=Ab(ia);Sa=Ab(Sa);const lb=ia.prerelease.length||Sa.prerelease.length,Eb=lb?"pre":"";for(const Vb in ia)if(("major"===Vb||"minor"===Vb||"patch"===Vb)&&ia[Vb]!==Sa[Vb])return Eb+Vb;return lb?"prerelease":""},major:(ia,Sa)=>(new rc(ia,Sa)).major,minor:(ia,Sa)=>(new rc(ia,Sa)).minor,patch:(ia,Sa)=>(new rc(ia,Sa)).patch,prerelease:(ia,Sa)=>(ia=Ab(ia,Sa))&&ia.prerelease.length?ia.prerelease:null,compare:md,rcompare:(ia,Sa,lb)=>md(Sa,ia,lb),compareLoose:(ia,Sa)=>
md(ia,Sa,!0),compareBuild:yd,sort:(ia,Sa)=>ia.sort((lb,Eb)=>yd(lb,Eb,Sa)),rsort:(ia,Sa)=>ia.sort((lb,Eb)=>yd(Eb,lb,Sa)),gt:hd,lt:Ed,eq:(ia,Sa,lb)=>0===md(ia,Sa,lb),neq:(ia,Sa,lb)=>0!==md(ia,Sa,lb),gte:Qd,lte:fd,cmp:ed,coerce:(ia,Sa)=>{if(ia instanceof rc)return ia;"number"===typeof ia&&(ia=String(ia));if("string"!==typeof ia)return null;Sa=Sa||{};let lb=null;if(Sa.rtl){let Eb;for(;(Eb=bc[yc.COERCERTL].exec(ia))&&(!lb||lb.index+lb[0].length!==ia.length);)lb&&Eb.index+Eb[0].length===lb.index+lb[0].length||
(lb=Eb),bc[yc.COERCERTL].lastIndex=Eb.index+Eb[1].length+Eb[2].length;bc[yc.COERCERTL].lastIndex=-1}else lb=ia.match(bc[yc.COERCE]);return null===lb?null:Ab(`${lb[2]}.${lb[3]||"0"}.${lb[4]||"0"}`,Sa)},Comparator:Zg,Range:pg,satisfies:v,toComparators:(ia,Sa)=>(new pg(ia,Sa)).set.map(lb=>lb.map(Eb=>Eb.value).join(" ").trim().split(" ")),maxSatisfying:(ia,Sa,lb)=>{let Eb=null,Vb=null,qc=null;try{qc=new pg(Sa,lb)}catch(Za){return null}ia.forEach(Za=>{!qc.test(Za)||Eb&&-1!==Vb.compare(Za)||(Eb=Za,Vb=new rc(Eb,
lb))});return Eb},minSatisfying:(ia,Sa,lb)=>{let Eb=null,Vb=null,qc=null;try{qc=new pg(Sa,lb)}catch(Za){return null}ia.forEach(Za=>{!qc.test(Za)||Eb&&1!==Vb.compare(Za)||(Eb=Za,Vb=new rc(Eb,lb))});return Eb},minVersion:(ia,Sa)=>{ia=new pg(ia,Sa);Sa=new rc("0.0.0");if(ia.test(Sa))return Sa;Sa=new rc("0.0.0-0");if(ia.test(Sa))return Sa;Sa=null;for(let lb=0;lb<ia.set.length;++lb){let Eb=null;ia.set[lb].forEach(Vb=>{const qc=new rc(Vb.semver.version);switch(Vb.operator){case "\x3e":0===qc.prerelease.length?
qc.patch++:qc.prerelease.push(0),qc.raw=qc.format();case "":case "\x3e\x3d":if(!Eb||0<md(qc,Eb,void 0))Eb=qc;break;case "\x3c":case "\x3c\x3d":break;default:throw Error(`Unexpected operation: ${Vb.operator}`);}});!Eb||Sa&&!(0<md(Sa,Eb,void 0))||(Sa=Eb)}return Sa&&ia.test(Sa)?Sa:null},validRange:(ia,Sa)=>{try{return(new pg(ia,Sa)).range||"*"}catch(lb){return null}},outside:wd,gtr:(ia,Sa,lb)=>wd(ia,Sa,"\x3e",lb),ltr:(ia,Sa,lb)=>wd(ia,Sa,"\x3c",lb),intersects:(ia,Sa,lb)=>{ia=new pg(ia,lb);Sa=new pg(Sa,
lb);return ia.intersects(Sa)},simplifyRange:(ia,Sa,lb)=>{var Eb=[],Vb=null;let qc=null;ia=ia.sort((Za,wb)=>md(Za,wb,lb));for(const Za of ia)v(Za,Sa,lb)?(qc=Za,Vb||(Vb=Za)):(qc&&Eb.push([Vb,qc]),Vb=qc=null);Vb&&Eb.push([Vb,null]);Vb=[];for(const [Za,wb]of Eb)Za===wb?Vb.push(Za):wb||Za!==ia[0]?wb?Za===ia[0]?Vb.push(`<=${wb}`):Vb.push(`${Za} - ${wb}`):Vb.push(`>=${Za}`):Vb.push("*");Eb=Vb.join(" || ");return Eb.length<("string"===typeof Sa.raw?Sa.raw:String(Sa)).length?Eb:Sa},subset:(ia,Sa,lb={})=>{if(ia===
Sa)return!0;ia=new pg(ia,lb);Sa=new pg(Sa,lb);let Eb=!1;a:for(const Vb of ia.set){for(const qc of Sa.set)if(ia=zg(Vb,qc,lb),Eb=Eb||null!==ia,ia)continue a;if(Eb)return!1}return!0}};const id={"category-6":"#ec8431 #829eb1 #c89d29 #3580b1 #adc839 #ab7fb4".split(" "),"fire-7":"#fbf2c7 #f9e39c #f8d36e #f4bb6a #e68a4f #d15a40 #ab4232".split(" "),"fireandice-6":"#e68a4f #f4bb6a #f9e39c #dadfe2 #a6b7c6 #849eae".split(" "),"ice-7":"#edefee #dadfe2 #c4ccd2 #a6b7c6 #849eae #607785 #47525d".split(" ")},Bd={"main-colors":"#1696d2 #d2d2d2 #000000 #fdbf11 #ec008b #55b748 #5c5859 #db2b27".split(" "),
"shades-blue":"#CFE8F3 #A2D4EC #73BFE2 #46ABDB #1696D2 #12719E #0A4C6A #062635".split(" "),"shades-gray":"#F5F5F5 #ECECEC #E3E3E3 #DCDBDB #D2D2D2 #9D9D9D #696969 #353535".split(" "),"shades-yellow":"#FFF2CF #FCE39E #FDD870 #FCCB41 #FDBF11 #E88E2D #CA5800 #843215".split(" "),"shades-magenta":"#F5CBDF #EB99C2 #E46AA7 #E54096 #EC008B #AF1F6B #761548 #351123".split(" "),"shades-green":"#DCEDD9 #BCDEB4 #98CF90 #78C26D #55B748 #408941 #2C5C2D #1A2E19".split(" "),"shades-black":"#D5D5D4 #ADABAC #848081 #5C5859 #332D2F #262223 #1A1717 #0E0C0D".split(" "),
"shades-red":"#F8D5D4 #F1AAA9 #E9807D #E25552 #DB2B27 #A4201D #6E1614 #370B0A".split(" "),"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11",
"#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":"#1696d2 #ec008b #fdbf11 #000000 #d2d2d2 #55b748".split(" "),"six-groups-cat-2":"#1696d2 #d2d2d2 #ec008b #fdbf11 #332d2f #0a4c6a".split(" "),"six-groups-seq":"#cfe8f3 #a2d4ec #73bfe2 #46abdb #1696d2 #12719e".split(" "),
"diverging-colors":"#ca5800 #fdbf11 #fdd870 #fff2cf #cfe8f3 #73bfe2 #1696d2 #0a4c6a".split(" ")};var xe=Object.freeze({__proto__:null,dark:{background:"#333",title:{color:"#fff",subtitleColor:"#fff"},style:{"guide-label":{fill:"#fff"},"guide-title":{fill:"#fff"}},axis:{domainColor:"#fff",gridColor:"#888",tickColor:"#fff"}},excel:{background:"#fff",arc:{fill:"#4572a7"},area:{fill:"#4572a7"},line:{stroke:"#4572a7",strokeWidth:2},path:{stroke:"#4572a7"},rect:{fill:"#4572a7"},shape:{stroke:"#4572a7"},
symbol:{fill:"#4572a7",strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:"#4572a7 #aa4643 #8aa453 #71598e #4598ae #d98445 #94aace #d09393 #b9cc98 #a99cbc".split(" ")}},fivethirtyeight:{arc:{fill:"#30a2da"},area:{fill:"#30a2da"},axis:{domainColor:"#cbcbcb",grid:!0,gridColor:"#cbcbcb",
gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:"#cbcbcb",tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:"#f0f0f0",group:{fill:"#f0f0f0"},legend:{labelColor:"#333",labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:"#333",titleFontSize:14,titlePadding:10},line:{stroke:"#30a2da",strokeWidth:2},path:{stroke:"#30a2da",strokeWidth:.5},rect:{fill:"#30a2da"},range:{category:"#30a2da #fc4f30 #e5ae38 #6d904f #8b8b8b #b96db8 #ff9e27 #56cc60 #52d2ca #52689e #545454 #9fe4f8".split(" "),
diverging:"#cc0020 #e77866 #f6e7e1 #d6e8ed #91bfd9 #1d78b5".split(" "),heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:"#30a2da"},bar:{binSpacing:2,fill:"#30a2da",stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},ggplot2:{group:{fill:"#e5e5e5"},arc:{fill:"#000"},area:{fill:"#000"},line:{stroke:"#000"},path:{stroke:"#000"},rect:{fill:"#000"},shape:{stroke:"#000"},symbol:{fill:"#000",size:40},axis:{domain:!1,grid:!0,
gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:"#000000 #7F7F7F #1A1A1A #999999 #333333 #B0B0B0 #4D4D4D #C9C9C9 #666666 #DCDCDC".split(" ")}},googlecharts:{arc:{fill:"#3366CC"},area:{fill:"#3366CC"},path:{stroke:"#3366CC"},rect:{fill:"#3366CC"},shape:{stroke:"#3366CC"},symbol:{stroke:"#3366CC"},circle:{fill:"#3366CC"},background:"#fff",
padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:"Arial, sans-serif",fontSize:12},"guide-title":{font:"Arial, sans-serif",fontSize:12},"group-title":{font:"Arial, sans-serif",fontSize:12}},title:{font:"Arial, sans-serif",fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:"#ccc",tickColor:"#ccc",domain:!1,grid:!0},range:{category:"#4285F4 #DB4437 #F4B400 #0F9D58 #AB47BC #00ACC1 #FF7043 #9E9D24 #5C6BC0 #F06292 #00796B #C2185B".split(" "),heatmap:["#c6dafc","#5e97f6",
"#2a56c6"]}},latimes:{background:"#ffffff",title:{anchor:"start",color:"#000000",font:"Benton Gothic Bold, sans-serif",fontSize:22,fontWeight:"normal"},arc:{fill:"#82c6df"},area:{fill:"#82c6df"},line:{stroke:"#82c6df",strokeWidth:2},path:{stroke:"#82c6df"},rect:{fill:"#82c6df"},shape:{stroke:"#82c6df"},symbol:{fill:"#82c6df",size:30},axis:{labelFont:"Benton Gothic, sans-serif",labelFontSize:11.5,labelFontWeight:"normal",titleFont:"Benton Gothic Bold, sans-serif",titleFontSize:13,titleFontWeight:"normal"},
axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:"Benton Gothic, sans-serif",labelFontSize:11.5,symbolType:"square",titleFont:"Benton Gothic Bold, sans-serif",titleFontSize:13,titleFontWeight:"normal"},range:{category:id["category-6"],diverging:id["fireandice-6"],heatmap:id["fire-7"],ordinal:id["fire-7"],ramp:id["fire-7"]}},quartz:{background:"#f9f9f9",arc:{fill:"#ab5787"},
area:{fill:"#ab5787"},line:{stroke:"#ab5787"},path:{stroke:"#ab5787"},rect:{fill:"#ab5787"},shape:{stroke:"#ab5787"},symbol:{fill:"#ab5787",size:30},axis:{domainColor:"#979797",domainWidth:.5,gridWidth:.2,labelColor:"#979797",tickColor:"#979797",tickWidth:.2,titleColor:"#979797"},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:"#ab5787 #51b2e5 #703c5c #168dd9 #d190b6 #00609f #d365ba #154866 #666666 #c4c4c4".split(" ")}},
urbaninstitute:{background:"#FFFFFF",title:{anchor:"start",fontSize:18,font:"Lato"},axisX:{domain:!0,domainColor:"#000000",domainWidth:1,grid:!1,labelFontSize:12,labelFont:"Lato",labelAngle:0,tickColor:"#000000",tickSize:5,titleFontSize:12,titlePadding:10,titleFont:"Lato"},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:"#DEDDDD",gridWidth:1,labelFontSize:12,labelFont:"Lato",labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:"Lato",titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,
labelFont:"Lato",symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:"Lato",orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Bd["six-groups-cat-1"],diverging:Bd["diverging-colors"],heatmap:Bd["diverging-colors"],ordinal:Bd["six-groups-seq"],ramp:Bd["shades-blue"]},area:{fill:"#1696d2"},rect:{fill:"#1696d2"},line:{color:"#1696d2",stroke:"#1696d2",strokeWidth:5},trail:{color:"#1696d2",stroke:"#1696d2",strokeWidth:0,size:1},path:{stroke:"#1696d2",strokeWidth:.5},point:{filled:!0},
text:{font:"Lato",color:"#1696d2",fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:"#1696d2",stroke:null}},arc:{fill:"#1696d2"},shape:{stroke:"#1696d2"},symbol:{fill:"#1696d2",size:30}},version:"2.10.0",vox:{background:"#fff",arc:{fill:"#3e5c69"},area:{fill:"#3e5c69"},line:{stroke:"#3e5c69"},path:{stroke:"#3e5c69"},rect:{fill:"#3e5c69"},shape:{stroke:"#3e5c69"},symbol:{fill:"#3e5c69"},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},
axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:"#3e5c69 #6793a6 #182429 #0570b0 #3690c0 #74a9cf #a6bddb #e2ddf2".split(" ")}}});const dg=ia=>function(Sa){return Sa[ia]},Sf=ia=>{const Sa=ia.length;return function(lb){for(let Eb=0;Eb<Sa;++Eb)lb=lb[ia[Eb]];return lb}};(function(ia,Sa,lb){const Eb=ta(ia);ia=1===Eb.length?Eb[0]:ia;return fa((lb&&lb.get||wa)(Eb),[ia],Sa||ia)})("id");fa(ia=>ia,[],"identity");
fa(()=>0,[],"zero");fa(()=>1,[],"one");fa(()=>!0,[],"true");fa(()=>!1,[],"false");var Kf=Array.isArray;const wg={offsetX:10,offsetY:10,id:"vg-tooltip-element",styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function(ia){return String(ia).replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;")},maxDepth:2};class xg{constructor(ia){this.options=Object.assign(Object.assign({},wg),ia);var Sa=this.options.id;this.el=null;this.call=this.tooltipHandler.bind(this);if(!this.options.disableDefaultStyle&&
!document.getElementById(this.options.styleId)){ia=document.createElement("style");ia.setAttribute("id",this.options.styleId);if(!/^[A-Za-z]+[-:.\w]*$/.test(Sa))throw Error("Invalid HTML ID");Sa="#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black; }\n  #vg-tooltip-element.visible {\n    visibility: visible; }\n  #vg-tooltip-element h2 {\n    margin-top: 0;\n    margin-bottom: 10px;\n    font-size: 13px; }\n  #vg-tooltip-element img {\n    max-width: 200px;\n    max-height: 200px; }\n  #vg-tooltip-element table {\n    border-spacing: 0; }\n    #vg-tooltip-element table tr {\n      border: none; }\n      #vg-tooltip-element table tr td {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        padding-top: 2px;\n        padding-bottom: 2px; }\n        #vg-tooltip-element table tr td.key {\n          color: #808080;\n          max-width: 150px;\n          text-align: right;\n          padding-right: 4px; }\n        #vg-tooltip-element table tr td.value {\n          display: block;\n          max-width: 300px;\n          max-height: 7em;\n          text-align: left; }\n  #vg-tooltip-element.dark-theme {\n    background-color: rgba(32, 32, 32, 0.9);\n    border: 1px solid #f5f5f5;\n    color: white; }\n    #vg-tooltip-element.dark-theme td.key {\n      color: #bfbfbf; }\n".toString().replace("vg-tooltip-element",
Sa);ia.innerHTML=Sa;Sa=document.head;0<Sa.childNodes.length?Sa.insertBefore(ia,Sa.childNodes[0]):Sa.appendChild(ia)}}tooltipHandler(ia,Sa,lb,Eb){this.el=document.getElementById(this.options.id);this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el));(null!=document.fullscreenElement?document.fullscreenElement:document.body).appendChild(this.el);if(null==Eb||""===Eb)this.el.classList.remove("visible",
`${this.options.theme}-theme`);else{this.el.innerHTML=ha(Eb,this.options.sanitize,this.options.maxDepth);this.el.classList.add("visible",`${this.options.theme}-theme`);ia=this.el.getBoundingClientRect();var Vb=this.options.offsetX;lb=this.options.offsetY;Eb=Sa.clientX+Vb;Eb+ia.width>window.innerWidth&&(Eb=+Sa.clientX-Vb-ia.width);Vb=Sa.clientY+lb;Vb+ia.height>window.innerHeight&&(Vb=+Sa.clientY-lb-ia.height);var {x:qc,y:Za}={x:Eb,y:Vb};this.el.setAttribute("style",`top: ${Za}px; left: ${qc}px`)}}}
String.prototype.startsWith||(String.prototype.startsWith=function(ia,Sa){return this.substr(!Sa||0>Sa?0:+Sa,ia.length)===ia});var dh;const cg=ub;let $f=pb;const Rf="undefined"!==typeof window?window:void 0;void 0===$f&&null!==Rf&&void 0!==Rf&&null!==(dh=Rf.vl)&&void 0!==dh&&dh.compile&&($f=Rf.vl);const Gh={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},li={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",
SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},gh={vega:"Vega","vega-lite":"Vega-Lite"},Lf={vega:cg.version,"vega-lite":$f?$f.version:"not available"},bi={vega:ia=>ia,"vega-lite":(ia,Sa)=>$f.compile(ia,{config:Sa}).spec},ih=(...ia)=>{var Sa;if(Sa=1<ia.length){if(Sa=w.isString(ia[0]))Sa=ia[0],Sa=!(Sa.startsWith("http://")||Sa.startsWith("https://")||Sa.startsWith("//"));Sa=Sa||ia[0]instanceof HTMLElement||3===ia.length}return Sa?Ia(ia[0],ia[1],ia[2]):db(ia[0],ia[1])};ih.vegaLite=$f;ih.vl=$f;
ih.container=db;ih.embed=Ia;ih.vega=cg;ih.default=Ia;ih.version="6.18.2";return ih})};
shadow$provide[453]=function(ob,Ba,Gb,Ea){Ea.__esModule=!0;Ea.default=function(A){const w={};return!!A&&"[object Function]"===w.toString.call(A)}};
shadow$provide[454]=function(ob,Ba,Gb,Ea){Ea.__esModule=!0;Ea.default=function(u,x,I){I&&((0,w.default)(I)?I(u.data(x)):u.change(x,A.vega.changeset().remove(()=>!0).insert(I)))};var A=Ba(452),w=function(u){return u&&u.__esModule?u:{default:u}}(Ba(453))};
shadow$provide[455]=function(ob,Ba,Gb,Ea){Ea.__esModule=!0;Ea.default=function(w,u){Object.keys(u).forEach(x=>{(0,A.default)(w,x,u[x])})};var A=function(w){return w&&w.__esModule?w:{default:w}}(Ba(454))};
shadow$provide[456]=function(ob,Ba,Gb,Ea){Ea.__esModule=!0;Ea.default=function(A){const w=new Set;A.forEach(u=>{Object.keys(u).forEach(x=>{w.add(x)})});return w}};
shadow$provide[457]=function(ob,Ba,Gb,Ea){Ea.__esModule=!0;Ea.NOOP=void 0;Ea.NOOP=()=>{}};
shadow$provide[458]=function(ob,Ba,Gb,Ea){Ea.__esModule=!0;Ea.default=function(A,w){const u=Object.keys(w);u.forEach(x=>{try{A.addSignalListener(x,w[x])}catch(I){console.warn("Cannot add invalid signal listener.",I)}});return 0<u.length}};
shadow$provide[459]=function(ob,Ba,Gb,Ea){function A(x){return x&&x.__esModule?x:{default:x}}Ea.__esModule=!0;Ea.default=function(x,I){if(x===I)return!1;const B={width:!1,height:!1,isExpensive:!1},N=(0,u.default)([x,I]);!N.has("width")||"width"in x&&"width"in I&&x.width===I.width||("width"in x&&"number"===typeof x.width?B.width=x.width:B.isExpensive=!0);!N.has("height")||"height"in x&&"height"in I&&x.height===I.height||("height"in x&&"number"===typeof x.height?B.height=x.height:B.isExpensive=!0);
N.delete("width");N.delete("height");[...N].some(da=>!(da in x)||!(da in I)||!(0,w.default)(x[da],I[da]))&&(B.isExpensive=!0);return!1!==B.width||!1!==B.height||B.isExpensive?B:!1};var w=A(Ba(44)),u=A(Ba(456))};
shadow$provide[460]=function(ob,Ba,Gb,Ea){Ea.__esModule=!0;Ea.default=function(A,w){const u=Object.keys(w);u.forEach(x=>{try{A.removeSignalListener(x,w[x])}catch(I){console.warn("Cannot remove invalid signal listener.",I)}});return 0<u.length}};
shadow$provide[461]=function(ob,Ba,Gb,Ea){Ea.__esModule=!0;Ea.default=function(A){const {spec:w,width:u,height:x}=A;return"undefined"!==typeof u&&"undefined"!==typeof x?Object.assign({},w,{width:u,height:x}):"undefined"!==typeof u?Object.assign({},w,{width:u}):"undefined"!==typeof x?Object.assign({},w,{height:x}):w}};
shadow$provide[462]=function(ob,Ba,Gb,Ea){function A(z){return z&&z.__esModule?z:{default:z}}function w(z,G,Y){G in z?Object.defineProperty(z,G,{value:Y,enumerable:!0,configurable:!0,writable:!0}):z[G]=Y;return z}Ea.__esModule=!0;Ea.default=void 0;ob=A(Ba(28));var u=A(Ba(3)),x=A(Ba(452)),I=A(Ba(420)),B=A(Ba(456)),N=Ba(457),da=A(Ba(458)),U=A(Ba(459)),X=A(Ba(460)),V=A(Ba(461));class P extends u.default.PureComponent{constructor(){super(...arguments);w(this,"containerRef",u.default.createRef());w(this,
"resultPromise",void 0);w(this,"handleError",z=>{const {onError:G=N.NOOP}=this.props;G(z,this.containerRef.current);console.warn(z)});w(this,"modifyView",z=>{this.resultPromise&&this.resultPromise.then(G=>{G&&z(G.view);return!0}).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(z){const G=(0,B.default)([this.props,z]);G.delete("className");G.delete("signalListeners");G.delete("spec");G.delete("style");G.delete("width");G.delete("height");if(Array.from(G).some(Y=>
this.props[Y]!==z[Y]))this.clearView(),this.createView();else{const Y=(0,U.default)((0,V.default)(this.props),(0,V.default)(z)),{signalListeners:Q}=this.props,{signalListeners:ja}=z;if(Y)if(Y.isExpensive)this.clearView(),this.createView();else{const pa=!(0,I.default)(Q,ja);this.modifyView(J=>{!1!==Y.width&&J.width(Y.width);!1!==Y.height&&J.height(Y.height);pa&&(ja&&(0,X.default)(J,ja),Q&&(0,da.default)(J,Q));J.run()})}else(0,I.default)(Q,ja)||this.modifyView(pa=>{ja&&(0,X.default)(pa,ja);Q&&(0,da.default)(pa,
Q);pa.run()})}}componentWillUnmount(){this.clearView()}createView(){var z=this.props,G=Object.assign({},z);const Y=z.onNewView,Q=void 0===z.signalListeners?{}:z.signalListeners;z=(delete G.spec,delete G.onNewView,delete G.signalListeners,delete G.width,delete G.height,G);this.containerRef.current&&(G=(0,V.default)(this.props),this.resultPromise=(0,x.default)(this.containerRef.current,G,z).then(ja=>{if(ja){const {view:pa}=ja;(0,da.default)(pa,Q)&&pa.run()}return ja}).catch(this.handleError),Y&&this.modifyView(Y))}clearView(){this.resultPromise&&
this.resultPromise.then(z=>{z&&z.finalize()}).catch(this.handleError);this.resultPromise=void 0;return this}render(){const {className:z,style:G}=this.props;return u.default.createElement("div",{ref:this.containerRef,className:z,style:G})}}Ea.default=P;w(P,"propTypes",{className:ob.default.string,onError:ob.default.func})};
shadow$provide[463]=function(ob,Ba,Gb,Ea){function A(X){return X&&X.__esModule?X:{default:X}}function w(){w=Object.assign||function(X){for(var V=1;V<arguments.length;V++){var P=arguments[V],z;for(z in P)Object.prototype.hasOwnProperty.call(P,z)&&(X[z]=P[z])}return X};return w.apply(this,arguments)}function u(X,V,P){V in X?Object.defineProperty(X,V,{value:P,enumerable:!0,configurable:!0,writable:!0}):X[V]=P;return X}Ea.__esModule=!0;Ea.default=void 0;A(Ba(28));var x=A(Ba(3)),I=A(Ba(420)),B=A(Ba(455)),
N=A(Ba(462)),da=Ba(457);class U extends x.default.PureComponent{constructor(){super(...arguments);u(this,"vegaEmbed",x.default.createRef());u(this,"handleNewView",X=>{this.update();const {onNewView:V=da.NOOP}=this.props;V(X)})}componentDidMount(){this.update()}componentDidUpdate(X){(0,I.default)(this.props.data,X.data)||this.update()}update(){const {data:X}=this.props;this.vegaEmbed.current&&X&&0<Object.keys(X).length&&this.vegaEmbed.current.modifyView(V=>{(0,B.default)(V,X);V.resize().run()})}render(){var X=
Object.assign({},this.props);X=(delete X.data,X);return x.default.createElement(N.default,w({ref:this.vegaEmbed},X,{onNewView:this.handleNewView}))}}Ea.default=U;u(U,"defaultProps",{data:{}})};
shadow$provide[464]=function(ob,Ba,Gb,Ea){function A(I){return I&&I.__esModule?I:{default:I}}function w(){w=Object.assign||function(I){for(var B=1;B<arguments.length;B++){var N=arguments[B],da;for(da in N)Object.prototype.hasOwnProperty.call(N,da)&&(I[da]=N[da])}return I};return w.apply(this,arguments)}Ea.__esModule=!0;Ea.default=function(I){return u.default.createElement(x.default,w({},I,{mode:"vega-lite"}))};var u=A(Ba(3)),x=A(Ba(463))};
shadow$provide[465]=function(ob,Ba,Gb,Ea){function A(B){return B&&B.__esModule?B:{default:B}}function w(){w=Object.assign||function(B){for(var N=1;N<arguments.length;N++){var da=arguments[N],U;for(U in da)Object.prototype.hasOwnProperty.call(da,U)&&(B[U]=da[U])}return B};return w.apply(this,arguments)}function u(B,N,da){N in B?Object.defineProperty(B,N,{value:da,enumerable:!0,configurable:!0,writable:!0}):B[N]=da;return B}Ea.__esModule=!0;Ea.default=function(B){let {mode:N,spec:da}=B;class U extends x.default.PureComponent{render(){return x.default.createElement(I.default,
w({mode:N,spec:da},this.props))}}u(U,"getSpec",function(){return da});return U};var x=A(Ba(3)),I=A(Ba(463))};
shadow$provide[466]=function(ob,Ba,Gb,Ea){Ea.__esModule=!0};
shadow$provide[467]=function(ob,Ba,Gb,Ea){Ea.__esModule=!0;var A=Ba(466);Object.keys(A).forEach(function(w){"default"!==w&&"__esModule"!==w&&(w in Ea&&Ea[w]===A[w]||(Ea[w]=A[w]))})};
shadow$provide[468]=function(ob,Ba,Gb,Ea){function A(x){return x&&x.__esModule?x:{default:x}}Ea.__esModule=!0;var w={Vega:!0,VegaLite:!0,createClassFromSpec:!0};Ea.createClassFromSpec=Ea.VegaLite=Ea.Vega=void 0;ob=A(Ba(463));Ea.Vega=ob.default;ob=A(Ba(464));Ea.VegaLite=ob.default;ob=A(Ba(465));Ea.createClassFromSpec=ob.default;var u=Ba(467);Object.keys(u).forEach(function(x){"default"!==x&&"__esModule"!==x&&(Object.prototype.hasOwnProperty.call(w,x)||x in Ea&&Ea[x]===u[x]||(Ea[x]=u[x]))})};
shadow$provide[469]=function(ob,Ba,Gb,Ea){(function(A,w){"object"===typeof Ea&&"undefined"!==typeof Gb?w(Ea,Ba(421)):"function"===typeof define&&define.amd?define(["exports","vega-util"],w):(A="undefined"!==typeof globalThis?globalThis:A||self,w(A.vegaTooltip={},A.vega))})(this,function(A,w){function u(z,G){var Y={},Q;for(Q in z)Object.prototype.hasOwnProperty.call(z,Q)&&0>G.indexOf(Q)&&(Y[Q]=z[Q]);if(null!=z&&"function"===typeof Object.getOwnPropertySymbols){var ja=0;for(Q=Object.getOwnPropertySymbols(z);ja<
Q.length;ja++)0>G.indexOf(Q[ja])&&Object.prototype.propertyIsEnumerable.call(z,Q[ja])&&(Y[Q[ja]]=z[Q[ja]])}return Y}function x(z){return String(z).replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;")}function I(z){if(!/^[A-Za-z]+[-:.\w]*$/.test(z))throw Error("Invalid HTML ID");return"#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black; }\n  #vg-tooltip-element.visible {\n    visibility: visible; }\n  #vg-tooltip-element h2 {\n    margin-top: 0;\n    margin-bottom: 10px;\n    font-size: 13px; }\n  #vg-tooltip-element img {\n    max-width: 200px;\n    max-height: 200px; }\n  #vg-tooltip-element table {\n    border-spacing: 0; }\n    #vg-tooltip-element table tr {\n      border: none; }\n      #vg-tooltip-element table tr td {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        padding-top: 2px;\n        padding-bottom: 2px; }\n        #vg-tooltip-element table tr td.key {\n          color: #808080;\n          max-width: 150px;\n          text-align: right;\n          padding-right: 4px; }\n        #vg-tooltip-element table tr td.value {\n          display: block;\n          max-width: 300px;\n          max-height: 7em;\n          text-align: left; }\n  #vg-tooltip-element.dark-theme {\n    background-color: rgba(32, 32, 32, 0.9);\n    border: 1px solid #f5f5f5;\n    color: white; }\n    #vg-tooltip-element.dark-theme td.key {\n      color: #bfbfbf; }\n".toString().replace("vg-tooltip-element",
z)}function B(z,G,Y){if(w.isArray(z))return"["+z.map(function(ba){return G(w.isString(ba)?ba:da(ba,Y))}).join(", ")+"]";if(w.isObject(z)){var Q="",ja=z.title,pa=z.image;z=u(z,["title","image"]);ja&&(Q+="\x3ch2\x3e"+G(ja)+"\x3c/h2\x3e");pa&&(Q+='\x3cimg src\x3d"'+G(pa)+'"\x3e');ja=Object.keys(z);if(0<ja.length){Q+="\x3ctable\x3e";for(pa=0;pa<ja.length;pa++){var J=ja[pa],K=z[J];void 0!==K&&(w.isObject(K)&&(K=da(K,Y)),Q+='\x3ctr\x3e\x3ctd class\x3d"key"\x3e'+G(J)+':\x3c/td\x3e\x3ctd class\x3d"value"\x3e'+
G(K)+"\x3c/td\x3e\x3c/tr\x3e")}Q+="\x3c/table\x3e"}return Q||"{}"}return G(z)}function N(z){var G=[];return function(Y,Q){if("object"!==typeof Q||null===Q)return Q;Y=G.indexOf(this)+1;G.length=Y;if(G.length>z)return"[Object]";if(0<=G.indexOf(Q))return"[Circular]";G.push(Q);return Q}}function da(z,G){return JSON.stringify(z,N(G))}function U(z,G,Y,Q){var ja=z.clientX+Y;ja+G.width>window.innerWidth&&(ja=+z.clientX-Y-G.width);Y=z.clientY+Q;Y+G.height>window.innerHeight&&(Y=+z.clientY-Q-G.height);return{x:ja,
y:Y}}var X=function(){X=Object.assign||function(z){for(var G,Y=1,Q=arguments.length;Y<Q;Y++){G=arguments[Y];for(var ja in G)Object.prototype.hasOwnProperty.call(G,ja)&&(z[ja]=G[ja])}return z};return X.apply(this,arguments)},V={offsetX:10,offsetY:10,id:"vg-tooltip-element",styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:x,maxDepth:2},P=function(){function z(G){this.options=X(X({},V),G);var Y=this.options.id;this.el=null;this.call=this.tooltipHandler.bind(this);this.options.disableDefaultStyle||
document.getElementById(this.options.styleId)||(G=document.createElement("style"),G.setAttribute("id",this.options.styleId),G.innerHTML=I(Y),Y=document.head,0<Y.childNodes.length?Y.insertBefore(G,Y.childNodes[0]):Y.appendChild(G))}z.prototype.tooltipHandler=function(G,Y,Q,ja){this.el=document.getElementById(this.options.id);this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el));(null!=document.fullscreenElement?
document.fullscreenElement:document.body).appendChild(this.el);null==ja||""===ja?this.el.classList.remove("visible",this.options.theme+"-theme"):(this.el.innerHTML=B(ja,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",this.options.theme+"-theme"),G=U(Y,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY),this.el.setAttribute("style","top: "+G.y+"px; left: "+G.x+"px"))};return z}();A.DEFAULT_OPTIONS=V;A.Handler=P;A.calculatePosition=U;A.createDefaultStyle=
I;A.default=function(z,G){G=new P(G);z.tooltip(G.call).run();return G};A.escapeHTML=x;A.formatValue=B;A.replacer=N;A.stringify=da;A.version="0.25.1";Object.defineProperty(A,"__esModule",{value:!0})})};
shadow$provide[470]=function(ob,Ba,Gb,Ea){!function(A,w){"object"==typeof Ea&&"object"==typeof Gb?Gb.exports=w():"function"==typeof define&&define.amd?define("Arrow",[],w):"object"==typeof Ea?Ea.Arrow=w():A.Arrow=w()}(window,function(){return function(A){function w(x){if(u[x])return u[x].exports;var I=u[x]={i:x,l:!1,exports:{}};return A[x].call(I.exports,I,I.exports,w),I.l=!0,I.exports}var u={};return w.m=A,w.c=u,w.d=function(x,I,B){w.o(x,I)||Object.defineProperty(x,I,{enumerable:!0,get:B})},w.r=
function(x){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(x,Symbol.toStringTag,{value:"Module"});Object.defineProperty(x,"__esModule",{value:!0})},w.t=function(x,I){if((1&I&&(x=w(x)),8&I)||4&I&&"object"==typeof x&&x&&x.__esModule)return x;var B=Object.create(null);if(w.r(B),Object.defineProperty(B,"default",{enumerable:!0,value:x}),2&I&&"string"!=typeof x)for(var N in x)w.d(B,N,function(da){return x[da]}.bind(null,N));return B},w.n=function(x){var I=x&&x.__esModule?function(){return x.default}:
function(){return x};return w.d(I,"a",I),I},w.o=function(x,I){return Object.prototype.hasOwnProperty.call(x,I)},w.p="",w(w.s=0)}([function(A,w,u){function x(M,r){var ra={},jb;for(jb in M)Object.prototype.hasOwnProperty.call(M,jb)&&0>r.indexOf(jb)&&(ra[jb]=M[jb]);if(null!=M&&"function"==typeof Object.getOwnPropertySymbols){var Lb=0;for(jb=Object.getOwnPropertySymbols(M);Lb<jb.length;Lb++)0>r.indexOf(jb[Lb])&&Object.prototype.propertyIsEnumerable.call(M,jb[Lb])&&(ra[jb[Lb]]=M[jb[Lb]])}return ra}function I(M,
r,ra,jb){return new (ra||(ra=Promise))(function(Lb,pc){function Yc(ze){try{Kd(jb.next(ze))}catch(bf){pc(bf)}}function Hd(ze){try{Kd(jb.throw(ze))}catch(bf){pc(bf)}}function Kd(ze){var bf;ze.done?Lb(ze.value):(bf=ze.value,bf instanceof ra?bf:new ra(function(Ef){Ef(bf)})).then(Yc,Hd)}Kd((jb=jb.apply(M,r||[])).next())})}function B(M){var r="function"==typeof Symbol&&Symbol.iterator,ra=r&&M[r],jb=0;if(ra)return ra.call(M);if(M&&"number"==typeof M.length)return{next:function(){return M&&jb>=M.length&&
(M=void 0),{value:M&&M[jb++],done:!M}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.");}function N(M){return this instanceof N?(this.v=M,this):new N(M)}function da(M,r,ra){function jb(Ef){ze[Ef]&&(Kd[Ef]=function(jg){return new Promise(function(Mg,Wi){1<bf.push([Ef,jg,Mg,Wi])||Lb(Ef,jg)})})}function Lb(Ef,jg){try{(Mg=ze[Ef](jg)).value instanceof N?Promise.resolve(Mg.value.v).then(pc,Yc):Hd(bf[0][2],Mg)}catch(Wi){Hd(bf[0][3],Wi)}var Mg}function pc(Ef){Lb("next",
Ef)}function Yc(Ef){Lb("throw",Ef)}function Hd(Ef,jg){Ef(jg);bf.shift();bf.length&&Lb(bf[0][0],bf[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Kd,ze=ra.apply(M,r||[]),bf=[];return Kd={},jb("next"),jb("throw"),jb("return"),Kd[Symbol.asyncIterator]=function(){return this},Kd}function U(M){function r(Lb,pc){ra[Lb]=M[Lb]?function(Yc){return(jb=!jb)?{value:N(M[Lb](Yc)),done:"return"===Lb}:pc?pc(Yc):Yc}:pc}var ra,jb;return ra={},r("next"),r("throw",function(Lb){throw Lb;
}),r("return"),ra[Symbol.iterator]=function(){return this},ra}function X(M){function r(Lb){ra[Lb]=M[Lb]&&function(pc){return new Promise(function(Yc,Hd){(function(Kd,ze,bf,Ef){Promise.resolve(Ef).then(function(jg){Kd({value:jg,done:bf})},ze)})(Yc,Hd,(pc=M[Lb](pc)).done,pc.value)})}}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ra,jb=M[Symbol.asyncIterator];return jb?jb.call(M):(M=B(M),ra={},r("next"),r("throw"),r("return"),ra[Symbol.asyncIterator]=function(){return this},
ra)}function V(M){if(void 0===M)return{};if(M===Object(M))return M;throw TypeError("Could not convert argument to dictionary");}function P(M){this.tokens=[].slice.call(M)}function z(M,r){if(M)throw TypeError("Decoder error");return r||65533}function G(M,r){if(!(this instanceof G))return new G(M,r);if("utf-8"!==(void 0!==M?(M+"").toLowerCase():"utf-8"))throw Error("Encoding not supported. Only utf-8 is supported");r=V(r);this._BOMseen=this._streaming=!1;this._decoder=null;this._fatal=!!r.fatal;this._ignoreBOM=
!!r.ignoreBOM;Object.defineProperty(this,"encoding",{value:"utf-8"});Object.defineProperty(this,"fatal",{value:this._fatal});Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function Y(M,r){if(!(this instanceof Y))return new Y(M,r);if("utf-8"!==(void 0!==M?(M+"").toLowerCase():"utf-8"))throw Error("Encoding not supported. Only utf-8 is supported");r=V(r);this._streaming=!1;this._encoder=null;this._options={fatal:!!r.fatal};Object.defineProperty(this,"encoding",{value:"utf-8"})}function Q(M){var r=
M.fatal,ra=0,jb=0,Lb=0,pc=128,Yc=191;this.handler=function(Hd,Kd){if(-1===Kd&&0!==Lb)return Lb=0,z(r);if(-1===Kd)return-1;if(0===Lb){if(0<=Kd&&127>=Kd)return Kd;if(194<=Kd&&223>=Kd)Lb=1,ra=Kd-192;else if(224<=Kd&&239>=Kd)224===Kd&&(pc=160),237===Kd&&(Yc=159),Lb=2,ra=Kd-224;else{if(!(240<=Kd&&244>=Kd))return z(r);240===Kd&&(pc=144);244===Kd&&(Yc=143);Lb=3;ra=Kd-240}return ra<<=6*Lb,null}if(!(pc<=Kd&&Kd<=Yc))return ra=Lb=jb=0,pc=128,Yc=191,Hd.prepend(Kd),z(r);if(pc=128,Yc=191,ra+=Kd-128<<6*(Lb-(jb+=
1)),jb!==Lb)return null;Hd=ra;return ra=Lb=jb=0,Hd}}function ja(M){M.fatal;this.handler=function(r,ra){if(-1===ra)return-1;if(0<=ra&&127>=ra)return ra;var jb,Lb;128<=ra&&2047>=ra?(jb=1,Lb=192):2048<=ra&&65535>=ra?(jb=2,Lb=224):65536<=ra&&1114111>=ra&&(jb=3,Lb=240);for(r=[(ra>>6*jb)+Lb];0<jb;)r.push(128|63&ra>>6*(jb-1)),--jb;return r}}function pa(M,r,ra=0,jb=r.byteLength){const Lb=M.byteLength,pc=new Uint8Array(M.buffer,M.byteOffset,Lb);r=new Uint8Array(r.buffer,r.byteOffset,Math.min(jb,Lb));return pc.set(r,
ra),M}function J(M,r){M=function(Kd){const ze=Kd[0]?[Kd[0]]:[];let bf,Ef,jg,Mg;for(let Wi,kj,vi=0,rk=0,Tl=Kd.length;++vi<Tl;)Wi=ze[rk],kj=Kd[vi],!Wi||!kj||Wi.buffer!==kj.buffer||kj.byteOffset<Wi.byteOffset?kj&&(ze[++rk]=kj):({byteOffset:bf,byteLength:jg}=Wi,{byteOffset:Ef,byteLength:Mg}=kj,bf+jg<Ef||Ef+Mg<bf?kj&&(ze[++rk]=kj):ze[rk]=new Uint8Array(Wi.buffer,bf,Ef-bf+Mg));return ze}(M);const ra=M.reduce((Kd,ze)=>Kd+ze.byteLength,0);let jb,Lb,pc,Yc=0,Hd=-1;r=Math.min(r||1/0,ra);for(let Kd=M.length;++Hd<
Kd;){if(jb=M[Hd],Lb=jb.subarray(0,Math.min(jb.length,r-Yc)),r<=Yc+Lb.length){Lb.length<jb.length?M[Hd]=jb.subarray(Lb.length):Lb.length===jb.length&&Hd++;pc?pa(pc,Lb,Yc):pc=Lb;break}pa(pc||(pc=new Uint8Array(r)),Lb,Yc);Yc+=Lb.length}return[pc||new Uint8Array(0),M.slice(Hd),ra-(pc?pc.byteLength:0)]}function K(M,r){r=null!=r&&Object(r)===r&&"done"in r&&"value"in r?r.value:r;return r instanceof M?M===Uint8Array?new M(r.buffer,r.byteOffset,r.byteLength):r:r?("string"==typeof r&&(r=tf.encode(r)),r instanceof
ArrayBuffer||r instanceof wd?new M(r):r instanceof gc?K(M,r.bytes()):ArrayBuffer.isView(r)?0>=r.byteLength?new M(0):new M(r.buffer,r.byteOffset,r.byteLength/M.BYTES_PER_ELEMENT):M.from(r)):new M(0)}function*ba(M,r){const ra=function*(jb){yield jb};r="string"==typeof r||ArrayBuffer.isView(r)||r instanceof ArrayBuffer||r instanceof wd?ra(r):wh(r)?r:ra(r);return yield*Sf(function*(jb){let Lb=null;do Lb=jb.next(yield K(M,Lb));while(!Lb.done)}(r[Symbol.iterator]())),new M}function O(M,r){return da(this,
arguments,function*(){if(Yh(r))return yield N(yield N(yield*U(X(O(M,yield N(r))))));var ra=function(jb){return da(this,arguments,function*(){yield yield N(yield N(jb))})};ra="string"==typeof r||ArrayBuffer.isView(r)||r instanceof ArrayBuffer||r instanceof wd?ra(r):wh(r)?function(jb){return da(this,arguments,function*(){yield N(yield*U(X(Sf(function*(Lb){let pc=null;do pc=Lb.next(yield pc&&pc.value);while(!pc.done)}(jb[Symbol.iterator]())))))})}(r):Wc(r)?r:ra(r);return yield N(yield*U(X(Sf(function(jb){return da(this,
arguments,function*(){let Lb=null;do Lb=yield N(jb.next(yield yield N(K(M,Lb))));while(!Lb.done)})}(ra[Symbol.asyncIterator]()))))),yield N(new M)})}function fa(M,r,ra){if(0!==M){ra=ra.slice(0,r+1);for(let jb=-1;++jb<=r;)ra[jb]+=M}return ra}function wa(M,r){let ra=0;const jb=M.length;if(jb!==r.length)return!1;if(0<jb){do if(M[ra]!==r[ra])return!1;while(++ra<jb)}return!0}function ta(M,r,ra,jb){return I(this,void 0,void 0,function*(){if(ra>=jb)return{done:!1,value:new Uint8Array(r,0,jb)};const {done:Lb,
value:pc}=yield M.read(new Uint8Array(r,ra,jb-ra));return(ra+=pc.byteLength)<jb&&!Lb?yield ta(M,pc.buffer,ra,jb):{done:Lb,value:new Uint8Array(pc.buffer,0,ra)}})}function aa(M,r,ra,jb){return 0!=(ra&1<<jb)}function ha(M,r,ra,jb){return(ra&1<<jb)>>jb}function ka(M,r,ra){return ra?!!(M[r>>3]|=1<<r%8)||!0:!(M[r>>3]&=~(1<<r%8))&&!1}function H(M,r,ra){const jb=ra.byteLength+7&-8;if(0<M||ra.byteLength<jb){const Lb=new Uint8Array(jb);return Lb.set(0==M%8?ra.subarray(M>>3):oa(new nj(ra,M,r,null,aa)).subarray(0,
jb)),Lb}return ra}function oa(M){const r=[];let ra=0,jb=0,Lb=0;for(const pc of M)pc&&(Lb|=1<<jb),8==++jb&&(r[ra++]=Lb,Lb=jb=0);(0===ra||0<jb)&&(r[ra++]=Lb);M=new Uint8Array(r.length+7&-8);return M.set(r),M}function ea(M,r,ra){if(0>=ra-r)return 0;if(8>ra-r){var jb=0;for(var Lb of new nj(M,r,ra-r,M,ha))jb+=Lb;return jb}jb=ra>>3<<3;Lb=r+(0==r%8?0:8-r%8);return ea(M,r,Lb)+ea(M,jb,ra)+D(M,Lb>>3,jb-Lb>>3)}function D(M,r,ra){let jb=0;r|=0;const Lb=new DataView(M.buffer,M.byteOffset,M.byteLength);for(M=void 0===
ra?M.byteLength:r+ra;4<=M-r;)jb+=R(Lb.getUint32(r)),r+=4;for(;2<=M-r;)jb+=R(Lb.getUint16(r)),r+=2;for(;1<=M-r;)jb+=R(Lb.getUint8(r)),r+=1;return jb}function R(M){M|=0;return M-=M>>>1&1431655765,M=(858993459&M)+(M>>>2&858993459),16843009*(M+(M>>>4)&252645135)>>>24}function la(M){switch(M.typeId){case Xd.Decimal:return 4;case Xd.Timestamp:return 2;case Xd.Date:case Xd.Interval:return 1+M.unit;case Xd.Int:case Xd.Time:return+(32<M.bitWidth)+1;case Xd.FixedSizeList:return M.listSize;case Xd.FixedSizeBinary:return M.byteWidth;
default:return 1}}function Ia(M){if(null===M)return"null";if(void 0===M)return"undefined";switch(typeof M){case "number":case "bigint":return""+M;case "string":return`"${M}"`}return"function"==typeof M[Symbol.toPrimitive]?M[Symbol.toPrimitive]("string"):ArrayBuffer.isView(M)?`[${M}]`:JSON.stringify(M)}function Ma(M){if(!M||0>=M.length)return function(jb){return!0};let r="";const ra=M.filter(jb=>jb==jb);return 0<ra.length&&(r=`\n    switch (x) {${ra.map(jb=>{jb="bigint"!=typeof jb?Ia(jb):eh?Ia(jb)+
"n":`"${Ia(jb)}"`;return`\n        case ${jb}:`}).join("")}\n            return false;\n    }`),M.length!==ra.length&&(r="if (x !\x3d\x3d x) return false;\n"+r),Function("x",r+"\nreturn true;")}function Ta(M){const r=(31744&M)>>10,ra=(1023&M)/1024;M=Math.pow(-1,(32768&M)>>15);switch(r){case 31:return M*(ra?NaN:1/0);case 0:return M*(ra?6.103515625E-5*ra:0)}return M*Math.pow(2,r-15)*(1+ra)}function ab(M){if(M!=M)return 32256;Kh[0]=M;M=(2147483648&og[1])>>16&65535;let r=2146435072&og[1],ra=0;return 1089470464<=
r?0<og[0]?r=31744:(r=(2080374784&r)>>16,ra=(1048575&og[1])>>10):1056964608>=r?(ra=1048576+(1048575&og[1]),ra=1048576+(ra<<(r>>20)-998)>>21,r=0):(r=r-1056964608>>10,ra=512+(1048575&og[1])>>10),M|r|65535&ra}function db(M,...r){return 0===r.length?Object.setPrototypeOf(K(this.TypedArray,M),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(M,...r),this.constructor.prototype)}function ub(...M){return db.apply(this,M)}function pb(...M){return db.apply(this,M)}function Ya(...M){return db.apply(this,
M)}function Va(M){const {buffer:r,byteOffset:ra,length:jb,signed:Lb}=M;M=new Int32Array(r,ra,jb);let pc=0,Yc=0;const Hd=M.length;let Kd,ze;for(;Yc<Hd;)ze=M[Yc++],Kd=M[Yc++],Lb||(Kd>>>=0),pc+=(ze>>>0)+Kd*Math.pow(Yc,32);return pc}function Pa(M){let r="";const ra=new Uint32Array(2);M=new Uint16Array(M.buffer,M.byteOffset,M.byteLength/2);const jb=new Uint32Array((M=(new Uint16Array(M)).reverse()).buffer);let Lb;const pc=M.length-1;do{for(ra[0]=M[Lb=0];Lb<pc;)M[Lb++]=ra[1]=ra[0]/10,ra[0]=(ra[0]-10*ra[1]<<
16)+M[Lb];M[Lb]=ra[1]=ra[0]/10;ra[0]-=10*ra[1];r=`${ra[0]}${r}`}while(jb[0]||jb[1]||jb[2]||jb[3]);return r||"0"}function Ha(M,r){return new Map([...(M||new Map),...(r||new Map)])}function Ca(M,r=new Map){for(let ra=-1,jb=M.length;++ra<jb;){const Lb=M[ra].type;if(eg.isDictionary(Lb))if(r.has(Lb.id)){if(r.get(Lb.id)!==Lb.dictionary)throw Error("Cannot create Schema containing two different dictionaries with the same Id");}else r.set(Lb.id,Lb.dictionary);Lb.children&&0<Lb.children.length&&Ca(Lb.children,
r)}return r}function Aa(M){switch(M.typeId){case Xd.Null:return Xd.Null;case Xd.Int:const {bitWidth:r,isSigned:ra}=M;switch(r){case 8:return ra?Xd.Int8:Xd.Uint8;case 16:return ra?Xd.Int16:Xd.Uint16;case 32:return ra?Xd.Int32:Xd.Uint32;case 64:return ra?Xd.Int64:Xd.Uint64}return Xd.Int;case Xd.Float:switch(M.precision){case Rd.HALF:return Xd.Float16;case Rd.SINGLE:return Xd.Float32;case Rd.DOUBLE:return Xd.Float64}return Xd.Float;case Xd.Binary:return Xd.Binary;case Xd.Utf8:return Xd.Utf8;case Xd.Bool:return Xd.Bool;
case Xd.Decimal:return Xd.Decimal;case Xd.Time:switch(M.unit){case nd.SECOND:return Xd.TimeSecond;case nd.MILLISECOND:return Xd.TimeMillisecond;case nd.MICROSECOND:return Xd.TimeMicrosecond;case nd.NANOSECOND:return Xd.TimeNanosecond}return Xd.Time;case Xd.Timestamp:switch(M.unit){case nd.SECOND:return Xd.TimestampSecond;case nd.MILLISECOND:return Xd.TimestampMillisecond;case nd.MICROSECOND:return Xd.TimestampMicrosecond;case nd.NANOSECOND:return Xd.TimestampNanosecond}return Xd.Timestamp;case Xd.Date:switch(M.unit){case Md.DAY:return Xd.DateDay;
case Md.MILLISECOND:return Xd.DateMillisecond}return Xd.Date;case Xd.Interval:switch(M.unit){case ee.DAY_TIME:return Xd.IntervalDayTime;case ee.YEAR_MONTH:return Xd.IntervalYearMonth}return Xd.Interval;case Xd.Map:return Xd.Map;case Xd.List:return Xd.List;case Xd.Struct:return Xd.Struct;case Xd.Union:switch(M.mode){case ad.Dense:return Xd.DenseUnion;case ad.Sparse:return Xd.SparseUnion}return Xd.Union;case Xd.FixedSizeBinary:return Xd.FixedSizeBinary;case Xd.FixedSizeList:return Xd.FixedSizeList;
case Xd.Dictionary:return Xd.Dictionary}throw Error(`Unrecognized type '${Xd[M.typeId]}'`);}function Ga(M){return 0>M&&(M=4294967295+M+1),"0x"+M.toString(16)}function Ka(M,r,ra){const jb=M.length;r=-1<r?r:jb+r%jb;return ra?ra(M,r):r}function cb(M,r,ra,jb){const {length:Lb=0}=M;r="number"!=typeof r?0:r;ra="number"!=typeof ra?Lb:ra;return 0>r&&(r=(r%Lb+Lb)%Lb),0>ra&&(ra=(ra%Lb+Lb)%Lb),ra<r&&(Nf=r,r=ra,ra=Nf),ra>Lb&&(ra=Lb),jb?jb(M,r,ra):[r,ra]}function fb(M){const r=typeof M;if("object"!==r||null===
M)return M!=M?Cg:"bigint"!==r?ra=>ra===M:ra=>ch+ra===M;if(M instanceof Date){const ra=M.valueOf();return jb=>jb instanceof Date&&jb.valueOf()===ra}return ArrayBuffer.isView(M)?ra=>!!ra&&wa(M,ra):M instanceof Map?function(ra){let jb=-1;const Lb=[];return ra.forEach(pc=>Lb[++jb]=fb(pc)),La(Lb)}(M):Array.isArray(M)?function(ra){const jb=[];for(let Lb=-1,pc=ra.length;++Lb<pc;)jb[Lb]=fb(ra[Lb]);return La(jb)}(M):M instanceof qb?function(ra){const jb=[];for(let Lb=-1,pc=ra.length;++Lb<pc;)jb[Lb]=fb(ra.get(Lb));
return La(jb)}(M):function(ra){const jb=Object.keys(ra);if(0===jb.length)return()=>!1;const Lb=[];for(let pc=-1,Yc=jb.length;++pc<Yc;)Lb[pc]=fb(ra[jb[pc]]);return La(Lb,jb)}(M)}function La(M,r){return ra=>{if(!ra||"object"!=typeof ra)return!1;switch(ra.constructor){case Array:return function(jb,Lb){const pc=jb.length;if(Lb.length!==pc)return!1;for(let Yc=-1;++Yc<pc;)if(!jb[Yc](Lb[Yc]))return!1;return!0}(M,ra);case Map:case Rh:case Ej:return Bb(M,ra,ra.keys());case Object:case void 0:return Bb(M,ra,
r||Object.keys(ra))}return ra instanceof qb&&function(jb,Lb){const pc=jb.length;if(Lb.length!==pc)return!1;for(let Yc=-1;++Yc<pc;)if(!jb[Yc](Lb.get(Yc)))return!1;return!0}(M,ra)}}function Bb(M,r,ra){ra=ra[Symbol.iterator]();const jb=r instanceof Map?r.keys():Object.keys(r)[Symbol.iterator]();r=r instanceof Map?r.values():Object.values(r)[Symbol.iterator]();let Lb=0;const pc=M.length;let Yc=r.next(),Hd=ra.next(),Kd=jb.next();for(;Lb<pc&&!Hd.done&&!Kd.done&&!Yc.done&&Hd.value===Kd.value&&M[Lb](Yc.value);++Lb,
Hd=ra.next(),Kd=jb.next(),Yc=r.next());return!!(Lb===pc&&Hd.done&&Kd.done&&Yc.done)||(ra.return&&ra.return(),jb.return&&jb.return(),r.return&&r.return(),!1)}function Ob(M,r,ra,jb){let Lb,pc=-1;const Yc=r.length;for(;++pc<Yc;)Ki(Lb=r[pc])?jb=Ob(M,Lb,ra,jb).length:Lb instanceof M&&(ra[jb++]=Lb);return ra}function ec(M,r,ra,jb){let Lb,pc=-1;const Yc=r.length;for(;++pc<Yc;)Ki(Lb=r[pc])?jb=ec(M,Lb,ra,jb).length:Lb instanceof Ci?jb=ec(M,Lb.chunks,ra,jb).length:Lb instanceof M&&(ra[jb++]=Lb);return ra}function sc(M,
r,ra,jb){let Lb,pc=-1;const Yc=r.length;for(;++pc<Yc;)Ki(Lb=r[pc])?jb=sc(M,Lb,ra,jb).length:Lb instanceof M?jb=Ob(qb,Lb.schema.fields.map((Hd,Kd)=>Lb.getChildAt(Kd)),ra,jb).length:Lb instanceof qb&&(ra[jb++]=Lb);return ra}function Ic(M,r,ra,jb){let Lb,pc=-1;const Yc=r.length;for(;++pc<Yc;)Ki(Lb=r[pc])?jb=Ic(M,Lb,ra,jb).length:Lb instanceof M?jb=Ob(fj,Lb.schema.fields.map((Hd,Kd)=>fj.new(Hd,Lb.getChildAt(Kd))),ra,jb).length:Lb instanceof fj&&(ra[jb++]=Lb);return ra}function Xb(M,r){let ra;var jb;switch(jb=
M.length){case 0:return r;case 1:if(ra=r[0],!M[0])return r;if(Ki(M[0]))return Xb(M[0],r);M[0]instanceof Ng||M[0]instanceof qb||M[0]instanceof eg||([ra,M]=Object.entries(M[0]).reduce(bk,r));break;default:Ki(ra=M[jb-1])?M=Ki(M[0])?M[0]:M.slice(0,jb-1):(M=Ki(M[0])?M[0]:M,ra=[])}let Lb=jb=-1,pc=-1;const Yc=M.length;let Hd,Kd;const [ze,bf]=r;for(;++pc<Yc;)Kd=M[pc],Kd instanceof fj&&(bf[++Lb]=Kd)?ze[++jb]=Kd.field.clone(ra[pc],Kd.type,!0):({[pc]:Hd=pc}=ra,Kd instanceof eg&&(bf[++Lb]=Kd)?ze[++jb]=Zh.new(Hd,
Kd,!0):Kd&&Kd.type&&(bf[++Lb]=Kd)&&(Kd instanceof Ng&&(bf[Lb]=Kd=qb.new(Kd)),ze[++jb]=Zh.new(Hd,Kd.type,!0)));return r}function Wb(M){return new el(M.count,Kb(M.columns),mc(M.columns))}function Kc(M,r){return(M.children||[]).filter(Boolean).map(ra=>Zh.fromJSON(ra,r))}function Kb(M){return(M||[]).reduce((r,ra)=>{return[...r,new Dl(ra.count,(jb=ra.VALIDITY,(jb||[]).reduce((Lb,pc)=>Lb+ +(0===pc),0))),...Kb(ra.children)];var jb},[])}function mc(M,r=[]){for(let ra=-1,jb=(M||[]).length;++ra<jb;){const Lb=
M[ra];Lb.VALIDITY&&r.push(new Wg(r.length,Lb.VALIDITY.length));Lb.TYPE&&r.push(new Wg(r.length,Lb.TYPE.length));Lb.OFFSET&&r.push(new Wg(r.length,Lb.OFFSET.length));Lb.DATA&&r.push(new Wg(r.length,Lb.DATA.length));r=mc(Lb.children,r)}return r}function Ub(M){return new Map(Object.entries(M||{}))}function oc(M,r){const ra=M.type.name;switch(ra){case "NONE":case "null":return new Zd;case "binary":return new bj;case "utf8":return new Sh;case "bool":return new Eh;case "list":return new Aj((r||[])[0]);
case "struct":case "struct_":return new Hj(r||[])}switch(ra){case "int":return r=M.type,new ve(r.isSigned,r.bitWidth);case "floatingpoint":return new Zf(Rd[M.type.precision]);case "decimal":return r=M.type,new cj(r.scale,r.precision);case "date":return new ji(Md[M.type.unit]);case "time":return r=M.type,new T(nd[r.unit],r.bitWidth);case "timestamp":return r=M.type,new je(nd[r.unit],r.timezone);case "interval":return new Di(ee[M.type.unit]);case "union":return M=M.type,new ck(ad[M.mode],M.typeIds||
[],r||[]);case "fixedsizebinary":return new jk(M.type.byteWidth);case "fixedsizelist":return new Gj(M.type.listSize,(r||[])[0]);case "map":return new Ik((r||[])[0],M.type.keysSorted)}throw Error(`Unrecognized type: "${ra}"`);}function Cc(M,r){const ra=[];for(let jb,Lb=-1,pc=-1,Yc=M.childrenLength();++Lb<Yc;)(jb=M.children(Lb))&&(ra[++pc]=Zh.decode(jb,r));return ra}function Mc(M){const r=new Map;if(M)for(let ra,jb,Lb=-1,pc=0|M.customMetadataLength();++Lb<pc;)(ra=M.customMetadata(Lb))&&null!=(jb=ra.key())&&
r.set(jb,ra.value());return r}function Pb(M){return new ve(M.isSigned(),M.bitWidth())}function nc(M,r){const ra=M.typeType();switch(ra){case Pd.NONE:case Pd.Null:return new Zd;case Pd.Binary:return new bj;case Pd.Utf8:return new Sh;case Pd.Bool:return new Eh;case Pd.List:return new Aj((r||[])[0]);case Pd.Struct_:return new Hj(r||[])}switch(ra){case Pd.Int:return r=M.type(new vf),new ve(r.isSigned(),r.bitWidth());case Pd.FloatingPoint:return r=M.type(new ne),new Zf(r.precision());case Pd.Decimal:return r=
M.type(new mh),new cj(r.scale(),r.precision());case Pd.Date:return r=M.type(new of),new ji(r.unit());case Pd.Time:return r=M.type(new qh),new T(r.unit(),r.bitWidth());case Pd.Timestamp:return r=M.type(new Ii),new je(r.unit(),r.timezone());case Pd.Interval:return r=M.type(new Fi),new Di(r.unit());case Pd.Union:return M=M.type(new yf),new ck(M.mode(),M.typeIdsArray()||[],r||[]);case Pd.FixedSizeBinary:return r=M.type(new ag),new jk(r.byteWidth());case Pd.FixedSizeList:return M=M.type(new uf),new Gj(M.listSize(),
(r||[])[0]);case Pd.Map:return M=M.type(new Yf),new Ik((r||[])[0],M.keysSorted())}throw Error(`Unrecognized type: "${Pd[ra]}" (${ra})`);}function rc(M,r=0){for(let ra=-1,jb=zk.length;++ra<jb;)if(zk[ra]!==M[r+ra])return!1;return!0}function Hb(M,r){return r instanceof M.constructor}function Jc(M,r){return M===r||Hb(M,r)}function kc(M,r){return M===r||Hb(M,r)&&M.bitWidth===r.bitWidth&&M.isSigned===r.isSigned}function Ab(M,r){return M===r||Hb(M,r)&&M.precision===r.precision}function md(M,r){return M===
r||Hb(M,r)&&M.unit===r.unit}function yd(M,r){return M===r||Hb(M,r)&&M.unit===r.unit&&M.timezone===r.timezone}function hd(M,r){return M===r||Hb(M,r)&&M.unit===r.unit&&M.bitWidth===r.bitWidth}function Ed(M,r){return M===r||Hb(M,r)&&M.mode===r.mode&&M.typeIds.every((ra,jb)=>ra===r.typeIds[jb])&&El.compareManyFields(M.children,r.children)}function Qd(M,r){return M===r||Hb(M,r)&&M.unit===r.unit}function fd(M,r){return El.compareSchemas(M,r)}function ed(M){const r=M.byteLength+7&-8;return this.buffers.push(M),
this.bufferRegions.push(new Wg(this._byteLength,r)),this._byteLength+=r,this}function bc(M){return ed.call(this,M.values.subarray(0,M.length*M.stride))}function yc(M){const {length:r,values:ra,valueOffsets:jb}=M;M=jb[0];const Lb=Math.min(jb[r]-M,ra.byteLength-M);return ed.call(this,fa(-jb[0],r,jb)),ed.call(this,ra.subarray(M,M+Lb)),this}function $c(M){const {length:r,valueOffsets:ra}=M;return ra&&ed.call(this,fa(ra[0],r,ra)),this.visit(M.getChildAt(0))}function cc(M){return this.visitMany(M.type.children.map((r,
ra)=>M.getChildAt(ra)).filter(Boolean))[0]}function*tb(M){for(const r of M)yield r.reduce((ra,jb)=>`${ra}${("0"+(255&jb).toString(16)).slice(-2)}`,"").toUpperCase()}function*tc(M,r){for(let ra=-1,jb=M.length/r;++ra<jb;)yield""+Rb.new(M.subarray((ra+0)*r,(ra+1)*r),!1)}function Ec(M,r){let ra=r;r instanceof ac&&(ra=r.chunks,M.reset(void 0,r.schema));for(const jb of ra)M.write(jb);return M.finish()}function cd(M,r){var ra,jb,Lb,pc;return I(this,void 0,void 0,function*(){try{for(ra=X(r);!(jb=yield ra.next()).done;)M.write(jb.value)}catch(Yc){Lb=
{error:Yc}}finally{try{jb&&!jb.done&&(pc=ra.return)&&(yield pc.call(ra))}finally{if(Lb)throw Lb.error;}}return M.finish()})}function bd({name:M,type:r,nullable:ra}){const jb=new Xj;return{name:M,nullable:ra,type:jb.visit(r),children:(r.children||[]).map(bd),dictionary:eg.isDictionary(r)?{id:r.id,isOrdered:r.isOrdered,indexType:jb.visit(r.indices)}:void 0}}function od(M,r){return function(ra,jb){const Lb=[...ra.fields],pc=[],Yc={numBatches:jb.reduce((Mg,Wi)=>Math.max(Mg,Wi.length),0)};let Hd=0,Kd=
0,ze=-1;const bf=jb.length;let Ef,jg=[];for(;0<Yc.numBatches--;){Kd=1/0;for(ze=-1;++ze<bf;)jg[ze]=Ef=jb[ze].shift(),Kd=Math.min(Kd,Ef?Ef.length:Kd);isFinite(Kd)&&(jg=Dd(Lb,Kd,jg,jb,Yc),0<Kd&&(pc[Hd++]=[Kd,jg.slice()]))}return[ra=new sh(Lb,ra.metadata),pc.map(Mg=>new Hc(ra,...Mg))]}(M,r.map(ra=>ra instanceof Ci?ra.chunks.map(jb=>jb.data):[ra.data]))}function Dd(M,r,ra,jb,Lb){let pc,Yc,Hd=0,Kd=-1;const ze=jb.length,bf=(r+63&-64)>>3;for(;++Kd<ze;)(pc=ra[Kd])&&(Hd=pc.length)>=r?Hd===r?ra[Kd]=pc:(ra[Kd]=
pc.slice(0,r),pc=pc.slice(r,Hd-r),Lb.numBatches=Math.max(Lb.numBatches,jb[Kd].unshift(pc))):((Yc=M[Kd]).nullable||(M[Kd]=Yc.clone({nullable:!0})),ra[Kd]=pc?pc._changeLengthAndBackfillNullBitmap(r):Ng.new(Yc.type,0,r,r,[Wa,Wa,new Uint8Array(bf),Wa]));return ra}function xd(M){return function(){return M(this)}}function sd(M){return function(r,ra){return M(this,r,ra)}}function Vd(M,r,ra){if(void 0===r)return-1;if(null===r){a:{const {nullBitmap:Lb}=M.data;if(Lb&&!(0>=M.nullCount)){r=0;for(var jb of new nj(Lb,
M.data.offset+(ra||0),M.length,Lb,aa)){if(!jb){M=r;break a}++r}}M=-1}return M}jb=fb(r);for(let Lb=(ra||0)-1,pc=M.length;++Lb<pc;)if(jb(M.get(Lb)))return Lb;return-1}function re(M,r,ra){r=fb(r);for(let jb=(ra||0)-1,Lb=M.length;++jb<Lb;)if(r(M.get(jb)))return jb;return-1}function Wd(M){if(0<M.nullCount)return function(Lb){const pc=sa.getVisitFn(Lb);return new nj(Lb.data.nullBitmap,Lb.data.offset,Lb.length,Lb,(Yc,Hd,Kd,ze)=>0!=(Kd&1<<ze)?pc(Yc,Hd):null)}(M);const {type:r,typeId:ra,length:jb}=M;return 1===
M.stride&&(ra===Xd.Timestamp||ra===Xd.Int&&64!==r.bitWidth||ra===Xd.Time&&64!==r.bitWidth||ra===Xd.Float&&0<r.precision)?M.data.values.subarray(0,jb)[Symbol.iterator]():new ya(M,sa.getVisitFn(M))}function Fe(M){const {type:r,length:ra,stride:jb}=M;switch(r.typeId){case Xd.Int:case Xd.Float:case Xd.Decimal:case Xd.Time:case Xd.Timestamp:return M.data.values.subarray(0,ra*jb)}return[...Na.visit(M)]}function Bf(M,r){if(wh(r)||Wc(r))return qb.from({nullValues:[null,void 0],type:M(),values:r});const {values:ra=
[],type:jb=M(),nullValues:Lb=[null,void 0]}=Object.assign({},r);return wh(ra),qb.from(Object.assign(Object.assign({nullValues:Lb},r),{type:jb}))}function*Ye(M){M=pd.from(M);try{if(!M.open({autoDestroy:!1}).closed){do yield M;while(!M.reset().open().closed)}}finally{M.cancel()}}function bg(M){return da(this,arguments,function*(){const r=yield N(pd.from(M));try{if(!(yield N(r.open({autoDestroy:!1}))).closed){do yield yield N(r);while(!(yield N(r.reset().open())).closed)}}finally{yield N(r.cancel())}})}
function rf(M,r){function ra(Yc,Hd){return I(this,void 0,void 0,function*(){let Kd=Yc.desiredSize,ze;for(;!(ze=yield Hd.next()).done;)if(Yc.enqueue(ze.value),null!=Kd&&0>=--Kd)return;Yc.close()})}const jb=new ic;let Lb=null;const pc=new ReadableStream({cancel(){return I(this,void 0,void 0,function*(){yield jb.close()})},start(Yc){return I(this,void 0,void 0,function*(){yield ra(Yc,Lb||(Lb=yield function(){return I(this,void 0,void 0,function*(){return yield(yield pd.from(jb)).open(r)})}()))})},pull(Yc){return I(this,
void 0,void 0,function*(){Lb?yield ra(Yc,Lb):Yc.close()})}});return{writable:new WritableStream(jb,Object.assign({highWaterMark:16384},M)),readable:pc}}function Ff(M,r){function ra(pc){return I(this,void 0,void 0,function*(){let Yc,Hd=pc.desiredSize;for(;Yc=yield Lb.read(Hd||null);)if(pc.enqueue(Yc),null!=Hd&&0>=(Hd-=Yc.byteLength))return;pc.close()})}const jb=new this(M),Lb=new Id(jb);r=new ReadableStream({type:"bytes",cancel(){return I(this,void 0,void 0,function*(){yield Lb.cancel()})},pull(pc){return I(this,
void 0,void 0,function*(){yield ra(pc)})},start(pc){return I(this,void 0,void 0,function*(){yield ra(pc)})}},Object.assign({highWaterMark:16384},r));return{writable:new WritableStream(jb,M),readable:r}}function pg(M){return new Og(M)}function gf(M){return new Hg(M)}function Jb(...M){return new Qg(...M)}function lc(...M){return new Ch(...M)}function Uc(M,r){return new Ih(M,r)}u.r(w);var Zc={};u.r(Zc);u.d(Zc,"memcpy",function(){return pa});u.d(Zc,"joinUint8Arrays",function(){return J});u.d(Zc,"toArrayBufferView",
function(){return K});u.d(Zc,"toInt8Array",function(){return Ce});u.d(Zc,"toInt16Array",function(){return Hf});u.d(Zc,"toInt32Array",function(){return zg});u.d(Zc,"toBigInt64Array",function(){return $g});u.d(Zc,"toUint8Array",function(){return lg});u.d(Zc,"toUint16Array",function(){return Ag});u.d(Zc,"toUint32Array",function(){return Ug});u.d(Zc,"toBigUint64Array",function(){return id});u.d(Zc,"toFloat32Array",function(){return Bd});u.d(Zc,"toFloat64Array",function(){return xe});u.d(Zc,"toUint8ClampedArray",
function(){return dg});u.d(Zc,"toArrayBufferViewIterator",function(){return ba});u.d(Zc,"toInt8ArrayIterator",function(){return Kf});u.d(Zc,"toInt16ArrayIterator",function(){return wg});u.d(Zc,"toInt32ArrayIterator",function(){return xg});u.d(Zc,"toUint8ArrayIterator",function(){return dh});u.d(Zc,"toUint16ArrayIterator",function(){return cg});u.d(Zc,"toUint32ArrayIterator",function(){return $f});u.d(Zc,"toFloat32ArrayIterator",function(){return Rf});u.d(Zc,"toFloat64ArrayIterator",function(){return Gh});
u.d(Zc,"toUint8ClampedArrayIterator",function(){return li});u.d(Zc,"toArrayBufferViewAsyncIterator",function(){return O});u.d(Zc,"toInt8ArrayAsyncIterator",function(){return gh});u.d(Zc,"toInt16ArrayAsyncIterator",function(){return Lf});u.d(Zc,"toInt32ArrayAsyncIterator",function(){return bi});u.d(Zc,"toUint8ArrayAsyncIterator",function(){return ih});u.d(Zc,"toUint16ArrayAsyncIterator",function(){return ia});u.d(Zc,"toUint32ArrayAsyncIterator",function(){return Sa});u.d(Zc,"toFloat32ArrayAsyncIterator",
function(){return lb});u.d(Zc,"toFloat64ArrayAsyncIterator",function(){return Eb});u.d(Zc,"toUint8ClampedArrayAsyncIterator",function(){return Vb});u.d(Zc,"rebaseValueOffsets",function(){return fa});u.d(Zc,"compareArrayLike",function(){return wa});var rd={};u.r(rd);u.d(rd,"getBool",function(){return aa});u.d(rd,"getBit",function(){return ha});u.d(rd,"setBool",function(){return ka});u.d(rd,"truncateBitmap",function(){return H});u.d(rd,"packBools",function(){return oa});u.d(rd,"BitIterator",function(){return nj});
u.d(rd,"popcnt_bit_range",function(){return ea});u.d(rd,"popcnt_array",function(){return D});u.d(rd,"popcnt_uint32",function(){return R});var Nd={};u.r(Nd);u.d(Nd,"uint16ToFloat64",function(){return Ta});u.d(Nd,"float64ToUint16",function(){return ab});var he={};u.r(he);u.d(he,"isArrowBigNumSymbol",function(){return Tk});u.d(he,"bignumToString",function(){return uk});u.d(he,"bignumToBigInt",function(){return Kl});u.d(he,"BN",function(){return Rb});var qd={};u.r(qd);u.d(qd,"BaseInt64",function(){return Mf});
u.d(qd,"Uint64",function(){return Je});u.d(qd,"Int64",function(){return Xf});u.d(qd,"Int128",function(){return Bg});var qe={};u.r(qe);u.d(qe,"clampIndex",function(){return Ka});u.d(qe,"clampRange",function(){return cb});u.d(qe,"createElementComparator",function(){return fb});var we={};u.r(we);u.d(we,"Value",function(){return qi});u.d(we,"Literal",function(){return Og});u.d(we,"Col",function(){return Hg});u.d(we,"Predicate",function(){return wi});u.d(we,"ComparisonPredicate",function(){return gi});
u.d(we,"CombinationPredicate",function(){return Vg});u.d(we,"And",function(){return Qg});u.d(we,"Or",function(){return Ch});u.d(we,"Equals",function(){return qf});u.d(we,"LTeq",function(){return uh});u.d(we,"GTeq",function(){return mi});u.d(we,"Not",function(){return Mj});u.d(we,"CustomPredicate",function(){return Ih});u.d(we,"lit",function(){return pg});u.d(we,"col",function(){return gf});u.d(we,"and",function(){return Jb});u.d(we,"or",function(){return lc});u.d(we,"custom",function(){return Uc});
var Cd={};Cd.Offset;Cd.Table;Cd.SIZEOF_SHORT=2;Cd.SIZEOF_INT=4;Cd.FILE_IDENTIFIER_LENGTH=4;Cd.SIZE_PREFIX_LENGTH=4;Cd.Encoding={UTF8_BYTES:1,UTF16_STRING:2};Cd.int32=new Int32Array(2);Cd.float32=new Float32Array(Cd.int32.buffer);Cd.float64=new Float64Array(Cd.int32.buffer);Cd.isLittleEndian=1===(new Uint16Array((new Uint8Array([1,0])).buffer))[0];Cd.Long=function(M,r){this.low=0|M;this.high=0|r};Cd.Long.create=function(M,r){return 0==M&&0==r?Cd.Long.ZERO:new Cd.Long(M,r)};Cd.Long.prototype.toFloat64=
function(){return(this.low>>>0)+4294967296*this.high};Cd.Long.prototype.equals=function(M){return this.low==M.low&&this.high==M.high};Cd.Long.ZERO=new Cd.Long(0,0);Cd.Builder=function(M){M=M?M:1024;this.bb=Cd.ByteBuffer.allocate(M);this.space=M;this.minalign=1;this.vtable=null;this.vtable_in_use=0;this.isNested=!1;this.object_start=0;this.vtables=[];this.vector_num_elems=0;this.force_defaults=!1};Cd.Builder.prototype.clear=function(){this.bb.clear();this.space=this.bb.capacity();this.minalign=1;this.vtable=
null;this.vtable_in_use=0;this.isNested=!1;this.object_start=0;this.vtables=[];this.vector_num_elems=0;this.force_defaults=!1};Cd.Builder.prototype.forceDefaults=function(M){this.force_defaults=M};Cd.Builder.prototype.dataBuffer=function(){return this.bb};Cd.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())};Cd.Builder.prototype.prep=function(M,r){M>this.minalign&&(this.minalign=M);for(var ra=1+~(this.bb.capacity()-this.space+
r)&M-1;this.space<ra+M+r;){var jb=this.bb.capacity();this.bb=Cd.Builder.growByteBuffer(this.bb);this.space+=this.bb.capacity()-jb}this.pad(ra)};Cd.Builder.prototype.pad=function(M){for(var r=0;r<M;r++)this.bb.writeInt8(--this.space,0)};Cd.Builder.prototype.writeInt8=function(M){this.bb.writeInt8(--this.space,M)};Cd.Builder.prototype.writeInt16=function(M){this.bb.writeInt16(this.space-=2,M)};Cd.Builder.prototype.writeInt32=function(M){this.bb.writeInt32(this.space-=4,M)};Cd.Builder.prototype.writeInt64=
function(M){this.bb.writeInt64(this.space-=8,M)};Cd.Builder.prototype.writeFloat32=function(M){this.bb.writeFloat32(this.space-=4,M)};Cd.Builder.prototype.writeFloat64=function(M){this.bb.writeFloat64(this.space-=8,M)};Cd.Builder.prototype.addInt8=function(M){this.prep(1,0);this.writeInt8(M)};Cd.Builder.prototype.addInt16=function(M){this.prep(2,0);this.writeInt16(M)};Cd.Builder.prototype.addInt32=function(M){this.prep(4,0);this.writeInt32(M)};Cd.Builder.prototype.addInt64=function(M){this.prep(8,
0);this.writeInt64(M)};Cd.Builder.prototype.addFloat32=function(M){this.prep(4,0);this.writeFloat32(M)};Cd.Builder.prototype.addFloat64=function(M){this.prep(8,0);this.writeFloat64(M)};Cd.Builder.prototype.addFieldInt8=function(M,r,ra){(this.force_defaults||r!=ra)&&(this.addInt8(r),this.slot(M))};Cd.Builder.prototype.addFieldInt16=function(M,r,ra){(this.force_defaults||r!=ra)&&(this.addInt16(r),this.slot(M))};Cd.Builder.prototype.addFieldInt32=function(M,r,ra){(this.force_defaults||r!=ra)&&(this.addInt32(r),
this.slot(M))};Cd.Builder.prototype.addFieldInt64=function(M,r,ra){!this.force_defaults&&r.equals(ra)||(this.addInt64(r),this.slot(M))};Cd.Builder.prototype.addFieldFloat32=function(M,r,ra){(this.force_defaults||r!=ra)&&(this.addFloat32(r),this.slot(M))};Cd.Builder.prototype.addFieldFloat64=function(M,r,ra){(this.force_defaults||r!=ra)&&(this.addFloat64(r),this.slot(M))};Cd.Builder.prototype.addFieldOffset=function(M,r,ra){(this.force_defaults||r!=ra)&&(this.addOffset(r),this.slot(M))};Cd.Builder.prototype.addFieldStruct=
function(M,r,ra){r!=ra&&(this.nested(r),this.slot(M))};Cd.Builder.prototype.nested=function(M){if(M!=this.offset())throw Error("FlatBuffers: struct must be serialized inline.");};Cd.Builder.prototype.notNested=function(){if(this.isNested)throw Error("FlatBuffers: object serialization must not be nested.");};Cd.Builder.prototype.slot=function(M){this.vtable[M]=this.offset()};Cd.Builder.prototype.offset=function(){return this.bb.capacity()-this.space};Cd.Builder.growByteBuffer=function(M){var r=M.capacity();
if(3221225472&r)throw Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var ra=r<<1,jb=Cd.ByteBuffer.allocate(ra);return jb.setPosition(ra-r),jb.bytes().set(M.bytes(),ra-r),jb};Cd.Builder.prototype.addOffset=function(M){this.prep(Cd.SIZEOF_INT,0);this.writeInt32(this.offset()-M+Cd.SIZEOF_INT)};Cd.Builder.prototype.startObject=function(M){this.notNested();null==this.vtable&&(this.vtable=[]);this.vtable_in_use=M;for(var r=0;r<M;r++)this.vtable[r]=0;this.isNested=!0;this.object_start=this.offset()};
Cd.Builder.prototype.endObject=function(){if(null==this.vtable||!this.isNested)throw Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var M=this.offset(),r=this.vtable_in_use-1;0<=r&&0==this.vtable[r];r--);for(var ra=r+1;0<=r;r--)this.addInt16(0!=this.vtable[r]?M-this.vtable[r]:0);this.addInt16(M-this.object_start);ra=(ra+2)*Cd.SIZEOF_SHORT;this.addInt16(ra);var jb=0,Lb=this.space;r=0;a:for(;r<this.vtables.length;r++){var pc=this.bb.capacity()-this.vtables[r];if(ra==
this.bb.readInt16(pc)){for(var Yc=Cd.SIZEOF_SHORT;Yc<ra;Yc+=Cd.SIZEOF_SHORT)if(this.bb.readInt16(Lb+Yc)!=this.bb.readInt16(pc+Yc))continue a;jb=this.vtables[r];break}}return jb?(this.space=this.bb.capacity()-M,this.bb.writeInt32(this.space,jb-M)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-M,this.offset()-M)),this.isNested=!1,M};Cd.Builder.prototype.finish=function(M,r,ra){ra=ra?Cd.SIZE_PREFIX_LENGTH:0;if(r){if(this.prep(this.minalign,Cd.SIZEOF_INT+Cd.FILE_IDENTIFIER_LENGTH+
ra),r.length!=Cd.FILE_IDENTIFIER_LENGTH)throw Error("FlatBuffers: file identifier must be length "+Cd.FILE_IDENTIFIER_LENGTH);for(var jb=Cd.FILE_IDENTIFIER_LENGTH-1;0<=jb;jb--)this.writeInt8(r.charCodeAt(jb))}this.prep(this.minalign,Cd.SIZEOF_INT+ra);this.addOffset(M);ra&&this.addInt32(this.bb.capacity()-this.space);this.bb.setPosition(this.space)};Cd.Builder.prototype.finishSizePrefixed=function(M,r){this.finish(M,r,!0)};Cd.Builder.prototype.requiredField=function(M,r){M=this.bb.capacity()-M;M-=
this.bb.readInt32(M);if(0==this.bb.readInt16(M+r))throw Error("FlatBuffers: field "+r+" must be set");};Cd.Builder.prototype.startVector=function(M,r,ra){this.notNested();this.vector_num_elems=r;this.prep(Cd.SIZEOF_INT,M*r);this.prep(ra,M*r)};Cd.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()};Cd.Builder.prototype.createString=function(M){if(M instanceof Uint8Array)var r=M;else{r=[];for(var ra=0;ra<M.length;){var jb=M.charCodeAt(ra++);jb=55296>jb||
56320<=jb?jb:(jb<<10)+M.charCodeAt(ra++)+-56613888;128>jb?r.push(jb):(2048>jb?r.push(jb>>6&31|192):(65536>jb?r.push(jb>>12&15|224):r.push(jb>>18&7|240,jb>>12&63|128),r.push(jb>>6&63|128)),r.push(63&jb|128))}}this.addInt8(0);this.startVector(1,r.length,1);this.bb.setPosition(this.space-=r.length);ra=0;M=this.space;for(jb=this.bb.bytes();ra<r.length;ra++)jb[M++]=r[ra];return this.endVector()};Cd.Builder.prototype.createLong=function(M,r){return Cd.Long.create(M,r)};Cd.ByteBuffer=function(M){this.bytes_=
M;this.position_=0};Cd.ByteBuffer.allocate=function(M){return new Cd.ByteBuffer(new Uint8Array(M))};Cd.ByteBuffer.prototype.clear=function(){this.position_=0};Cd.ByteBuffer.prototype.bytes=function(){return this.bytes_};Cd.ByteBuffer.prototype.position=function(){return this.position_};Cd.ByteBuffer.prototype.setPosition=function(M){this.position_=M};Cd.ByteBuffer.prototype.capacity=function(){return this.bytes_.length};Cd.ByteBuffer.prototype.readInt8=function(M){return this.readUint8(M)<<24>>24};
Cd.ByteBuffer.prototype.readUint8=function(M){return this.bytes_[M]};Cd.ByteBuffer.prototype.readInt16=function(M){return this.readUint16(M)<<16>>16};Cd.ByteBuffer.prototype.readUint16=function(M){return this.bytes_[M]|this.bytes_[M+1]<<8};Cd.ByteBuffer.prototype.readInt32=function(M){return this.bytes_[M]|this.bytes_[M+1]<<8|this.bytes_[M+2]<<16|this.bytes_[M+3]<<24};Cd.ByteBuffer.prototype.readUint32=function(M){return this.readInt32(M)>>>0};Cd.ByteBuffer.prototype.readInt64=function(M){return new Cd.Long(this.readInt32(M),
this.readInt32(M+4))};Cd.ByteBuffer.prototype.readUint64=function(M){return new Cd.Long(this.readUint32(M),this.readUint32(M+4))};Cd.ByteBuffer.prototype.readFloat32=function(M){return Cd.int32[0]=this.readInt32(M),Cd.float32[0]};Cd.ByteBuffer.prototype.readFloat64=function(M){return Cd.int32[Cd.isLittleEndian?0:1]=this.readInt32(M),Cd.int32[Cd.isLittleEndian?1:0]=this.readInt32(M+4),Cd.float64[0]};Cd.ByteBuffer.prototype.writeInt8=function(M,r){this.bytes_[M]=r};Cd.ByteBuffer.prototype.writeUint8=
function(M,r){this.bytes_[M]=r};Cd.ByteBuffer.prototype.writeInt16=function(M,r){this.bytes_[M]=r;this.bytes_[M+1]=r>>8};Cd.ByteBuffer.prototype.writeUint16=function(M,r){this.bytes_[M]=r;this.bytes_[M+1]=r>>8};Cd.ByteBuffer.prototype.writeInt32=function(M,r){this.bytes_[M]=r;this.bytes_[M+1]=r>>8;this.bytes_[M+2]=r>>16;this.bytes_[M+3]=r>>24};Cd.ByteBuffer.prototype.writeUint32=function(M,r){this.bytes_[M]=r;this.bytes_[M+1]=r>>8;this.bytes_[M+2]=r>>16;this.bytes_[M+3]=r>>24};Cd.ByteBuffer.prototype.writeInt64=
function(M,r){this.writeInt32(M,r.low);this.writeInt32(M+4,r.high)};Cd.ByteBuffer.prototype.writeUint64=function(M,r){this.writeUint32(M,r.low);this.writeUint32(M+4,r.high)};Cd.ByteBuffer.prototype.writeFloat32=function(M,r){Cd.float32[0]=r;this.writeInt32(M,Cd.int32[0])};Cd.ByteBuffer.prototype.writeFloat64=function(M,r){Cd.float64[0]=r;this.writeInt32(M,Cd.int32[Cd.isLittleEndian?0:1]);this.writeInt32(M+4,Cd.int32[Cd.isLittleEndian?1:0])};Cd.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<
this.position_+Cd.SIZEOF_INT+Cd.FILE_IDENTIFIER_LENGTH)throw Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var M="",r=0;r<Cd.FILE_IDENTIFIER_LENGTH;r++)M+=String.fromCharCode(this.readInt8(this.position_+Cd.SIZEOF_INT+r));return M};Cd.ByteBuffer.prototype.__offset=function(M,r){M-=this.readInt32(M);return r<this.readInt16(M)?this.readInt16(M+r):0};Cd.ByteBuffer.prototype.__union=function(M,r){return M.bb_pos=r+this.readInt32(r),M.bb=this,M};Cd.ByteBuffer.prototype.__string=
function(M,r){M+=this.readInt32(M);var ra=this.readInt32(M),jb="",Lb=0;if(M+=Cd.SIZEOF_INT,r===Cd.Encoding.UTF8_BYTES)return this.bytes_.subarray(M,M+ra);for(;Lb<ra;){r=this.readUint8(M+Lb++);if(!(192>r)){var pc=this.readUint8(M+Lb++);if(224>r)r=(31&r)<<6|63&pc;else{var Yc=this.readUint8(M+Lb++);r=240>r?(15&r)<<12|(63&pc)<<6|63&Yc:(7&r)<<18|(63&pc)<<12|(63&Yc)<<6|63&this.readUint8(M+Lb++)}}jb+=65536>r?String.fromCharCode(r):String.fromCharCode(55296+((r-=65536)>>10),56320+(1023&r))}return jb};Cd.ByteBuffer.prototype.__indirect=
function(M){return M+this.readInt32(M)};Cd.ByteBuffer.prototype.__vector=function(M){return M+this.readInt32(M)+Cd.SIZEOF_INT};Cd.ByteBuffer.prototype.__vector_len=function(M){return this.readInt32(M+this.readInt32(M))};Cd.ByteBuffer.prototype.__has_identifier=function(M){if(M.length!=Cd.FILE_IDENTIFIER_LENGTH)throw Error("FlatBuffers: file identifier must be length "+Cd.FILE_IDENTIFIER_LENGTH);for(var r=0;r<Cd.FILE_IDENTIFIER_LENGTH;r++)if(M.charCodeAt(r)!=this.readInt8(this.position_+Cd.SIZEOF_INT+
r))return!1;return!0};Cd.ByteBuffer.prototype.createLong=function(M,r){return Cd.Long.create(M,r)};P.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(M){if(Array.isArray(M))for(;M.length;)this.tokens.unshift(M.pop());else this.tokens.unshift(M)},push:function(M){if(Array.isArray(M))for(;M.length;)this.tokens.push(M.shift());else this.tokens.push(M)}};G.prototype={decode:function(M,r){M="object"==typeof M&&
M instanceof ArrayBuffer?new Uint8Array(M):"object"==typeof M&&"buffer"in M&&M.buffer instanceof ArrayBuffer?new Uint8Array(M.buffer,M.byteOffset,M.byteLength):new Uint8Array(0);r=V(r);this._streaming||(this._decoder=new Q({fatal:this._fatal}),this._BOMseen=!1);this._streaming=!!r.stream;var ra;M=new P(M);for(r=[];!M.endOfStream()&&-1!==(ra=this._decoder.handler(M,M.read()));)null!==ra&&(Array.isArray(ra)?r.push.apply(r,ra):r.push(ra));if(!this._streaming){do{if(-1===(ra=this._decoder.handler(M,M.read())))break;
null!==ra&&(Array.isArray(ra)?r.push.apply(r,ra):r.push(ra))}while(!M.endOfStream());this._decoder=null}r.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===r[0]?(this._BOMseen=!0,r.shift()):this._BOMseen=!0));ra="";for(M=0;M<r.length;++M){var jb=r[M];ra+=65535>=jb?String.fromCharCode(jb):String.fromCharCode(55296+((jb-=65536)>>10),56320+(1023&jb))}return ra}};Y.prototype={encode:function(M,r){M=M?M+"":"";r=V(r);this._streaming||(this._encoder=new ja(this._options));
this._streaming=!!r.stream;var ra;r=[];for(var jb=M+"",Lb=jb.length,pc=0,Yc=[];pc<Lb;){var Hd=jb.charCodeAt(pc);if(55296>Hd||57343<Hd)Yc.push(Hd);else if(56320<=Hd&&57343>=Hd)Yc.push(65533);else if(55296<=Hd&&56319>=Hd)if(pc===Lb-1)Yc.push(65533);else{var Kd=M.charCodeAt(pc+1);56320<=Kd&&57343>=Kd?(Yc.push(65536+((1023&Hd)<<10)+(1023&Kd)),pc+=1):Yc.push(65533)}pc+=1}for(M=new P(Yc);!M.endOfStream()&&-1!==(ra=this._encoder.handler(M,M.read()));)Array.isArray(ra)?r.push.apply(r,ra):r.push(ra);if(!this._streaming){for(;-1!==
(ra=this._encoder.handler(M,M.read()));)Array.isArray(ra)?r.push.apply(r,ra):r.push(ra);this._encoder=null}return new Uint8Array(r)}};const sf=new ("undefined"!=typeof TextDecoder?TextDecoder:G)("utf-8"),Jf=M=>sf.decode(M),tf=new ("undefined"!=typeof TextEncoder?TextEncoder:Y),lf=Object.freeze({done:!0,value:void 0});class Lg{constructor(M){this._json=M}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class rg{tee(){return this._getDOMStream().tee()}pipe(M,
r){return this._getNodeStream().pipe(M,r)}pipeTo(M,r){return this._getDOMStream().pipeTo(M,r)}pipeThrough(M,r){return this._getDOMStream().pipeThrough(M,r)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class Pg extends rg{constructor(){super();this._values=[];this.resolvers=[];this._closedPromise=new Promise(M=>this._closedPromiseResolve=M)}get closed(){return this._closedPromise}cancel(M){return I(this,
void 0,void 0,function*(){yield this.return(M)})}write(M){this._ensureOpen()&&(0>=this.resolvers.length?this._values.push(M):this.resolvers.shift().resolve({done:!1,value:M}))}abort(M){this._closedPromiseResolve&&(0>=this.resolvers.length?this._error={error:M}:this.resolvers.shift().reject({done:!0,value:M}))}close(){if(this._closedPromiseResolve){const {resolvers:M}=this;for(;0<M.length;)M.shift().resolve(lf);this._closedPromiseResolve();this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(M){return qc.toDOMStream(this._closedPromiseResolve||
this._error?this:this._values,M)}toNodeStream(M){return qc.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,M)}throw(M){return I(this,void 0,void 0,function*(){return yield this.abort(M),lf})}return(M){return I(this,void 0,void 0,function*(){return yield this.close(),lf})}read(M){return I(this,void 0,void 0,function*(){return(yield this.next(M,"read")).value})}peek(M){return I(this,void 0,void 0,function*(){return(yield this.next(M,"peek")).value})}next(...M){return 0<this._values.length?
Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((r,ra)=>{this.resolvers.push({resolve:r,reject:ra})}):Promise.resolve(lf)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw Error(this+" is closed");}}const [fh,eh]=(()=>{function M(){throw r();}const r=()=>{throw Error("BigInt is not available in this environment");};return M.asIntN=()=>{throw r();},M.asUintN=()=>{throw r();},"undefined"!=
typeof BigInt?[BigInt,!0]:[M,!1]})(),[Zg]=(()=>{const M=()=>{throw Error("BigInt64Array is not available in this environment");};return"undefined"!=typeof BigInt64Array?[BigInt64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw M();}static from(){throw M();}constructor(){throw M();}},!1]})(),[oi]=(()=>{const M=()=>{throw Error("BigUint64Array is not available in this environment");};return"undefined"!=typeof BigUint64Array?[BigUint64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw M();
}static from(){throw M();}constructor(){throw M();}},!1]})(),ei=M=>"function"==typeof M,Yh=M=>null!=M&&Object(M)===M&&ei(M.then),wh=M=>null!=M&&Object(M)===M&&ei(M[Symbol.iterator]),Wc=M=>null!=M&&Object(M)===M&&ei(M[Symbol.asyncIterator]),ib=M=>{var r;if(r=null!=M&&Object(M)===M)M=M.schema,r=null!=M&&Object(M)===M;return r},Ua=M=>null!=M&&Object(M)===M&&ei(M.stat)&&"number"==typeof M.fd,v=M=>null!=M&&Object(M)===M&&ei(M.cancel)&&ei(M.getReader)&&!(M instanceof rg),Xa=M=>null!=M&&Object(M)===M&&ei(M.read)&&
ei(M.pipe)&&"boolean"==typeof M.readable&&!(M instanceof rg);var gc=Cd.ByteBuffer;const wd="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,Ce=M=>K(Int8Array,M),Hf=M=>K(Int16Array,M),zg=M=>K(Int32Array,M),$g=M=>K(Zg,M),lg=M=>K(Uint8Array,M),Ag=M=>K(Uint16Array,M),Ug=M=>K(Uint32Array,M),id=M=>K(oi,M),Bd=M=>K(Float32Array,M),xe=M=>K(Float64Array,M),dg=M=>K(Uint8ClampedArray,M),Sf=M=>(M.next(),M),Kf=M=>ba(Int8Array,M),wg=M=>ba(Int16Array,M),xg=M=>ba(Int32Array,M),dh=M=>ba(Uint8Array,
M),cg=M=>ba(Uint16Array,M),$f=M=>ba(Uint32Array,M),Rf=M=>ba(Float32Array,M),Gh=M=>ba(Float64Array,M),li=M=>ba(Uint8ClampedArray,M),gh=M=>O(Int8Array,M),Lf=M=>O(Int16Array,M),bi=M=>O(Int32Array,M),ih=M=>O(Uint8Array,M),ia=M=>O(Uint16Array,M),Sa=M=>O(Uint32Array,M),lb=M=>O(Float32Array,M),Eb=M=>O(Float64Array,M),Vb=M=>O(Uint8ClampedArray,M);var qc={fromIterable:M=>Za(function*(r){let ra,jb,Lb,pc,Yc=!1,Hd=[],Kd=0;({cmd:Lb,size:pc}=yield null);r=ba(Uint8Array,r)[Symbol.iterator]();try{do if({done:ra,
value:jb}=isNaN(pc-Kd)?r.next(void 0):r.next(pc-Kd),!ra&&0<jb.byteLength&&(Hd.push(jb),Kd+=jb.byteLength),ra||pc<=Kd){do({cmd:Lb,size:pc}=yield"peek"===Lb?J(Hd,pc)[0]:([jb,Hd,Kd]=J(Hd,pc),jb));while(pc<Kd)}while(!ra)}catch(ze){(Yc=!0,"function"==typeof r.throw)&&r.throw(ze)}finally{!1===Yc&&"function"==typeof r.return&&r.return(null)}return null}(M)),fromAsyncIterable:M=>Za(function(r){return da(this,arguments,function*(){let ra,jb,Lb,pc,Yc=!1,Hd=[],Kd=0;({cmd:Lb,size:pc}=yield yield N(null));const ze=
O(Uint8Array,r)[Symbol.asyncIterator]();try{do if({done:ra,value:jb}=isNaN(pc-Kd)?yield N(ze.next(void 0)):yield N(ze.next(pc-Kd)),!ra&&0<jb.byteLength&&(Hd.push(jb),Kd+=jb.byteLength),ra||pc<=Kd){do({cmd:Lb,size:pc}=yield yield N("peek"===Lb?J(Hd,pc)[0]:([jb,Hd,Kd]=J(Hd,pc),jb)));while(pc<Kd)}while(!ra)}catch(bf){(Yc=!0,"function"==typeof ze.throw)&&(yield N(ze.throw(bf)))}finally{!1===Yc&&"function"==typeof ze.return&&(yield N(ze.return(new Uint8Array(0))))}return yield N(null)})}(M)),fromDOMStream:M=>
Za(function(r){return da(this,arguments,function*(){let ra,jb,Lb,pc=!1,Yc=!1,Hd=[],Kd=0;({cmd:jb,size:Lb}=yield yield N(null));const ze=new wb(r);try{do if({done:pc,value:ra}=isNaN(Lb-Kd)?yield N(ze.read(void 0)):yield N(ze.read(Lb-Kd)),!pc&&0<ra.byteLength&&(Hd.push(K(Uint8Array,ra)),Kd+=ra.byteLength),pc||Lb<=Kd){do({cmd:jb,size:Lb}=yield yield N("peek"===jb?J(Hd,Lb)[0]:([ra,Hd,Kd]=J(Hd,Lb),ra)));while(Lb<Kd)}while(!pc)}catch(bf){Yc=!0,yield N(ze.cancel(bf))}finally{!1===Yc?yield N(ze.cancel()):
r.locked&&ze.releaseLock()}return yield N(null)})}(M)),fromNodeStream:M=>Za(function(r){return da(this,arguments,function*(){function ra(jg,Mg){return Yc=Ef=null,new Promise((Wi,kj)=>{for(const [vi,rk]of jg)r.off(vi,rk);try{const vi=r.destroy;vi&&vi.call(r,Mg);Mg=void 0}catch(vi){Mg=vi||Mg}finally{null!=Mg?kj(Mg):Wi()}})}const jb=[];let Lb,pc,Yc,Hd="error",Kd=!1,ze=null,bf=0,Ef=[];if({cmd:Lb,size:pc}=yield yield N(null),r.isTTY)return yield yield N(new Uint8Array(0)),yield N(null);try{jb[0]=eb(r,
"end");jb[1]=eb(r,"error");do{if(jb[2]=eb(r,"readable"),[Hd,ze]=yield N(Promise.race(jb.map(jg=>jg[2]))),"error"===Hd)break;if((Kd="end"===Hd)||(isFinite(pc-bf)?(Yc=K(Uint8Array,r.read(pc-bf)),Yc.byteLength<pc-bf&&(Yc=K(Uint8Array,r.read(void 0)))):Yc=K(Uint8Array,r.read(void 0)),0<Yc.byteLength&&(Ef.push(Yc),bf+=Yc.byteLength)),Kd||pc<=bf){do({cmd:Lb,size:pc}=yield yield N("peek"===Lb?J(Ef,pc)[0]:([Yc,Ef,bf]=J(Ef,pc),Yc)));while(pc<bf)}}while(!Kd)}finally{yield N(ra(jb,"error"===Hd?ze:null))}return yield N(null)})}(M)),
toDOMStream(M,r){throw Error('"toDOMStream" not available in this environment');},toNodeStream(M,r){throw Error('"toNodeStream" not available in this environment');}};const Za=M=>(M.next(),M);class wb{constructor(M){this.source=M;this.defaultReader=this.byobReader=null;try{this.supportsBYOB=!!(this.reader=this.getBYOBReader())}catch(r){this.supportsBYOB=!(this.reader=this.getDefaultReader())}}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&
this.reader.releaseLock();this.reader=this.byobReader=this.defaultReader=null}cancel(M){return I(this,void 0,void 0,function*(){const {reader:r,source:ra}=this;r&&(yield r.cancel(M).catch(()=>{}));ra&&ra.locked&&this.releaseLock()})}read(M){return I(this,void 0,void 0,function*(){if(0===M)return{done:null==this.reader,value:new Uint8Array(0)};const r=this.supportsBYOB&&"number"==typeof M?yield this.readFromBYOBReader(M):yield this.getDefaultReader().read();return!r.done&&(r.value=K(Uint8Array,r)),
r})}getDefaultReader(){return this.byobReader&&this.releaseLock(),this.defaultReader||(this.defaultReader=this.source.getReader(),this.defaultReader.closed.catch(()=>{})),this.reader=this.defaultReader}getBYOBReader(){return this.defaultReader&&this.releaseLock(),this.byobReader||(this.byobReader=this.source.getReader({mode:"byob"}),this.byobReader.closed.catch(()=>{})),this.reader=this.byobReader}readFromBYOBReader(M){return I(this,void 0,void 0,function*(){return yield ta(this.getBYOBReader(),new ArrayBuffer(M),
0,M)})}}const eb=(M,r)=>{const ra=Lb=>jb([r,Lb]);let jb;return[r,ra,new Promise(Lb=>(jb=Lb)&&M.once(r,ra))]};class qb{}var Qb,zc,ad,Rd,Md,nd,ee,Pd,se,ye,Oe,Se,Pe,Xd,Ze,Tf;qb.prototype.data=null;(function(M){M[M.V1=0]="V1";M[M.V2=1]="V2";M[M.V3=2]="V3";M[M.V4=3]="V4";M[M.V5=4]="V5"})(Qb||(Qb={}));(function(M){M[M.UNUSED=0]="UNUSED";M[M.DICTIONARY_REPLACEMENT=1]="DICTIONARY_REPLACEMENT";M[M.COMPRESSED_BODY=2]="COMPRESSED_BODY"})(zc||(zc={}));(function(M){M[M.Sparse=0]="Sparse";M[M.Dense=1]="Dense"})(ad||
(ad={}));(function(M){M[M.HALF=0]="HALF";M[M.SINGLE=1]="SINGLE";M[M.DOUBLE=2]="DOUBLE"})(Rd||(Rd={}));(function(M){M[M.DAY=0]="DAY";M[M.MILLISECOND=1]="MILLISECOND"})(Md||(Md={}));(function(M){M[M.SECOND=0]="SECOND";M[M.MILLISECOND=1]="MILLISECOND";M[M.MICROSECOND=2]="MICROSECOND";M[M.NANOSECOND=3]="NANOSECOND"})(nd||(nd={}));(function(M){M[M.YEAR_MONTH=0]="YEAR_MONTH";M[M.DAY_TIME=1]="DAY_TIME"})(ee||(ee={}));(function(M){M[M.NONE=0]="NONE";M[M.Null=1]="Null";M[M.Int=2]="Int";M[M.FloatingPoint=3]=
"FloatingPoint";M[M.Binary=4]="Binary";M[M.Utf8=5]="Utf8";M[M.Bool=6]="Bool";M[M.Decimal=7]="Decimal";M[M.Date=8]="Date";M[M.Time=9]="Time";M[M.Timestamp=10]="Timestamp";M[M.Interval=11]="Interval";M[M.List=12]="List";M[M.Struct_=13]="Struct_";M[M.Union=14]="Union";M[M.FixedSizeBinary=15]="FixedSizeBinary";M[M.FixedSizeList=16]="FixedSizeList";M[M.Map=17]="Map";M[M.Duration=18]="Duration";M[M.LargeBinary=19]="LargeBinary";M[M.LargeUtf8=20]="LargeUtf8";M[M.LargeList=21]="LargeList"})(Pd||(Pd={}));
(function(M){M[M.DenseArray=0]="DenseArray"})(se||(se={}));(function(M){M[M.Little=0]="Little";M[M.Big=1]="Big"})(ye||(ye={}));class Xe{constructor(){this.bb=null;this.bb_pos=0}__init(M,r){return this.bb_pos=M,this.bb=r,this}static getRootAsNull(M,r){return(r||new Xe).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsNull(M,r){return M.setPosition(M.position()+Cd.SIZE_PREFIX_LENGTH),(r||new Xe).__init(M.readInt32(M.position())+M.position(),M)}static startNull(M){M.startObject(0)}static endNull(M){return M.endObject()}static createNull(M){return Xe.startNull(M),
Xe.endNull(M)}}class Uf{constructor(){this.bb=null;this.bb_pos=0}__init(M,r){return this.bb_pos=M,this.bb=r,this}static getRootAsStruct_(M,r){return(r||new Uf).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsStruct_(M,r){return M.setPosition(M.position()+Cd.SIZE_PREFIX_LENGTH),(r||new Uf).__init(M.readInt32(M.position())+M.position(),M)}static startStruct_(M){M.startObject(0)}static endStruct_(M){return M.endObject()}static createStruct_(M){return Uf.startStruct_(M),Uf.endStruct_(M)}}
class Ue{constructor(){this.bb=null;this.bb_pos=0}__init(M,r){return this.bb_pos=M,this.bb=r,this}static getRootAsList(M,r){return(r||new Ue).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsList(M,r){return M.setPosition(M.position()+Cd.SIZE_PREFIX_LENGTH),(r||new Ue).__init(M.readInt32(M.position())+M.position(),M)}static startList(M){M.startObject(0)}static endList(M){return M.endObject()}static createList(M){return Ue.startList(M),Ue.endList(M)}}class uf{constructor(){this.bb=
null;this.bb_pos=0}__init(M,r){return this.bb_pos=M,this.bb=r,this}static getRootAsFixedSizeList(M,r){return(r||new uf).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsFixedSizeList(M,r){return M.setPosition(M.position()+Cd.SIZE_PREFIX_LENGTH),(r||new uf).__init(M.readInt32(M.position())+M.position(),M)}listSize(){const M=this.bb.__offset(this.bb_pos,4);return M?this.bb.readInt32(this.bb_pos+M):0}static startFixedSizeList(M){M.startObject(1)}static addListSize(M,r){M.addFieldInt32(0,
r,0)}static endFixedSizeList(M){return M.endObject()}static createFixedSizeList(M,r){return uf.startFixedSizeList(M),uf.addListSize(M,r),uf.endFixedSizeList(M)}}class Yf{constructor(){this.bb=null;this.bb_pos=0}__init(M,r){return this.bb_pos=M,this.bb=r,this}static getRootAsMap(M,r){return(r||new Yf).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsMap(M,r){return M.setPosition(M.position()+Cd.SIZE_PREFIX_LENGTH),(r||new Yf).__init(M.readInt32(M.position())+M.position(),
M)}keysSorted(){const M=this.bb.__offset(this.bb_pos,4);return!!M&&!!this.bb.readInt8(this.bb_pos+M)}static startMap(M){M.startObject(1)}static addKeysSorted(M,r){M.addFieldInt8(0,+r,0)}static endMap(M){return M.endObject()}static createMap(M,r){return Yf.startMap(M),Yf.addKeysSorted(M,r),Yf.endMap(M)}}class yf{constructor(){this.bb=null;this.bb_pos=0}__init(M,r){return this.bb_pos=M,this.bb=r,this}static getRootAsUnion(M,r){return(r||new yf).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsUnion(M,
r){return M.setPosition(M.position()+Cd.SIZE_PREFIX_LENGTH),(r||new yf).__init(M.readInt32(M.position())+M.position(),M)}mode(){const M=this.bb.__offset(this.bb_pos,4);return M?this.bb.readInt16(this.bb_pos+M):ad.Sparse}typeIds(M){const r=this.bb.__offset(this.bb_pos,6);return r?this.bb.readInt32(this.bb.__vector(this.bb_pos+r)+4*M):0}typeIdsLength(){const M=this.bb.__offset(this.bb_pos,6);return M?this.bb.__vector_len(this.bb_pos+M):0}typeIdsArray(){const M=this.bb.__offset(this.bb_pos,6);return M?
new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+M),this.bb.__vector_len(this.bb_pos+M)):null}static startUnion(M){M.startObject(2)}static addMode(M,r){M.addFieldInt16(0,r,ad.Sparse)}static addTypeIds(M,r){M.addFieldOffset(1,r,0)}static createTypeIdsVector(M,r){M.startVector(4,r.length,4);for(let ra=r.length-1;0<=ra;ra--)M.addInt32(r[ra]);return M.endVector()}static startTypeIdsVector(M,r){M.startVector(4,r,4)}static endUnion(M){return M.endObject()}static createUnion(M,
r,ra){return yf.startUnion(M),yf.addMode(M,r),yf.addTypeIds(M,ra),yf.endUnion(M)}}class vf{constructor(){this.bb=null;this.bb_pos=0}__init(M,r){return this.bb_pos=M,this.bb=r,this}static getRootAsInt(M,r){return(r||new vf).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsInt(M,r){return M.setPosition(M.position()+Cd.SIZE_PREFIX_LENGTH),(r||new vf).__init(M.readInt32(M.position())+M.position(),M)}bitWidth(){const M=this.bb.__offset(this.bb_pos,4);return M?this.bb.readInt32(this.bb_pos+
M):0}isSigned(){const M=this.bb.__offset(this.bb_pos,6);return!!M&&!!this.bb.readInt8(this.bb_pos+M)}static startInt(M){M.startObject(2)}static addBitWidth(M,r){M.addFieldInt32(0,r,0)}static addIsSigned(M,r){M.addFieldInt8(1,+r,0)}static endInt(M){return M.endObject()}static createInt(M,r,ra){return vf.startInt(M),vf.addBitWidth(M,r),vf.addIsSigned(M,ra),vf.endInt(M)}}class ne{constructor(){this.bb=null;this.bb_pos=0}__init(M,r){return this.bb_pos=M,this.bb=r,this}static getRootAsFloatingPoint(M,
r){return(r||new ne).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsFloatingPoint(M,r){return M.setPosition(M.position()+Cd.SIZE_PREFIX_LENGTH),(r||new ne).__init(M.readInt32(M.position())+M.position(),M)}precision(){const M=this.bb.__offset(this.bb_pos,4);return M?this.bb.readInt16(this.bb_pos+M):Rd.HALF}static startFloatingPoint(M){M.startObject(1)}static addPrecision(M,r){M.addFieldInt16(0,r,Rd.HALF)}static endFloatingPoint(M){return M.endObject()}static createFloatingPoint(M,
r){return ne.startFloatingPoint(M),ne.addPrecision(M,r),ne.endFloatingPoint(M)}}class wf{constructor(){this.bb=null;this.bb_pos=0}__init(M,r){return this.bb_pos=M,this.bb=r,this}static getRootAsUtf8(M,r){return(r||new wf).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsUtf8(M,r){return M.setPosition(M.position()+Cd.SIZE_PREFIX_LENGTH),(r||new wf).__init(M.readInt32(M.position())+M.position(),M)}static startUtf8(M){M.startObject(0)}static endUtf8(M){return M.endObject()}static createUtf8(M){return wf.startUtf8(M),
wf.endUtf8(M)}}class Hh{constructor(){this.bb=null;this.bb_pos=0}__init(M,r){return this.bb_pos=M,this.bb=r,this}static getRootAsBinary(M,r){return(r||new Hh).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsBinary(M,r){return M.setPosition(M.position()+Cd.SIZE_PREFIX_LENGTH),(r||new Hh).__init(M.readInt32(M.position())+M.position(),M)}static startBinary(M){M.startObject(0)}static endBinary(M){return M.endObject()}static createBinary(M){return Hh.startBinary(M),Hh.endBinary(M)}}
class ag{constructor(){this.bb=null;this.bb_pos=0}__init(M,r){return this.bb_pos=M,this.bb=r,this}static getRootAsFixedSizeBinary(M,r){return(r||new ag).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsFixedSizeBinary(M,r){return M.setPosition(M.position()+Cd.SIZE_PREFIX_LENGTH),(r||new ag).__init(M.readInt32(M.position())+M.position(),M)}byteWidth(){const M=this.bb.__offset(this.bb_pos,4);return M?this.bb.readInt32(this.bb_pos+M):0}static startFixedSizeBinary(M){M.startObject(1)}static addByteWidth(M,
r){M.addFieldInt32(0,r,0)}static endFixedSizeBinary(M){return M.endObject()}static createFixedSizeBinary(M,r){return ag.startFixedSizeBinary(M),ag.addByteWidth(M,r),ag.endFixedSizeBinary(M)}}class ph{constructor(){this.bb=null;this.bb_pos=0}__init(M,r){return this.bb_pos=M,this.bb=r,this}static getRootAsBool(M,r){return(r||new ph).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsBool(M,r){return M.setPosition(M.position()+Cd.SIZE_PREFIX_LENGTH),(r||new ph).__init(M.readInt32(M.position())+
M.position(),M)}static startBool(M){M.startObject(0)}static endBool(M){return M.endObject()}static createBool(M){return ph.startBool(M),ph.endBool(M)}}class mh{constructor(){this.bb=null;this.bb_pos=0}__init(M,r){return this.bb_pos=M,this.bb=r,this}static getRootAsDecimal(M,r){return(r||new mh).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsDecimal(M,r){return M.setPosition(M.position()+Cd.SIZE_PREFIX_LENGTH),(r||new mh).__init(M.readInt32(M.position())+M.position(),
M)}precision(){const M=this.bb.__offset(this.bb_pos,4);return M?this.bb.readInt32(this.bb_pos+M):0}scale(){const M=this.bb.__offset(this.bb_pos,6);return M?this.bb.readInt32(this.bb_pos+M):0}bitWidth(){const M=this.bb.__offset(this.bb_pos,8);return M?this.bb.readInt32(this.bb_pos+M):128}static startDecimal(M){M.startObject(3)}static addPrecision(M,r){M.addFieldInt32(0,r,0)}static addScale(M,r){M.addFieldInt32(1,r,0)}static addBitWidth(M,r){M.addFieldInt32(2,r,128)}static endDecimal(M){return M.endObject()}static createDecimal(M,
r,ra,jb){return mh.startDecimal(M),mh.addPrecision(M,r),mh.addScale(M,ra),mh.addBitWidth(M,jb),mh.endDecimal(M)}}class of{constructor(){this.bb=null;this.bb_pos=0}__init(M,r){return this.bb_pos=M,this.bb=r,this}static getRootAsDate(M,r){return(r||new of).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsDate(M,r){return M.setPosition(M.position()+Cd.SIZE_PREFIX_LENGTH),(r||new of).__init(M.readInt32(M.position())+M.position(),M)}unit(){const M=this.bb.__offset(this.bb_pos,
4);return M?this.bb.readInt16(this.bb_pos+M):Md.MILLISECOND}static startDate(M){M.startObject(1)}static addUnit(M,r){M.addFieldInt16(0,r,Md.MILLISECOND)}static endDate(M){return M.endObject()}static createDate(M,r){return of.startDate(M),of.addUnit(M,r),of.endDate(M)}}class qh{constructor(){this.bb=null;this.bb_pos=0}__init(M,r){return this.bb_pos=M,this.bb=r,this}static getRootAsTime(M,r){return(r||new qh).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsTime(M,r){return M.setPosition(M.position()+
Cd.SIZE_PREFIX_LENGTH),(r||new qh).__init(M.readInt32(M.position())+M.position(),M)}unit(){const M=this.bb.__offset(this.bb_pos,4);return M?this.bb.readInt16(this.bb_pos+M):nd.MILLISECOND}bitWidth(){const M=this.bb.__offset(this.bb_pos,6);return M?this.bb.readInt32(this.bb_pos+M):32}static startTime(M){M.startObject(2)}static addUnit(M,r){M.addFieldInt16(0,r,nd.MILLISECOND)}static addBitWidth(M,r){M.addFieldInt32(1,r,32)}static endTime(M){return M.endObject()}static createTime(M,r,ra){return qh.startTime(M),
qh.addUnit(M,r),qh.addBitWidth(M,ra),qh.endTime(M)}}class Ii{constructor(){this.bb=null;this.bb_pos=0}__init(M,r){return this.bb_pos=M,this.bb=r,this}static getRootAsTimestamp(M,r){return(r||new Ii).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsTimestamp(M,r){return M.setPosition(M.position()+Cd.SIZE_PREFIX_LENGTH),(r||new Ii).__init(M.readInt32(M.position())+M.position(),M)}unit(){const M=this.bb.__offset(this.bb_pos,4);return M?this.bb.readInt16(this.bb_pos+M):nd.SECOND}timezone(M){const r=
this.bb.__offset(this.bb_pos,6);return r?this.bb.__string(this.bb_pos+r,M):null}static startTimestamp(M){M.startObject(2)}static addUnit(M,r){M.addFieldInt16(0,r,nd.SECOND)}static addTimezone(M,r){M.addFieldOffset(1,r,0)}static endTimestamp(M){return M.endObject()}static createTimestamp(M,r,ra){return Ii.startTimestamp(M),Ii.addUnit(M,r),Ii.addTimezone(M,ra),Ii.endTimestamp(M)}}class Fi{constructor(){this.bb=null;this.bb_pos=0}__init(M,r){return this.bb_pos=M,this.bb=r,this}static getRootAsInterval(M,
r){return(r||new Fi).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsInterval(M,r){return M.setPosition(M.position()+Cd.SIZE_PREFIX_LENGTH),(r||new Fi).__init(M.readInt32(M.position())+M.position(),M)}unit(){const M=this.bb.__offset(this.bb_pos,4);return M?this.bb.readInt16(this.bb_pos+M):ee.YEAR_MONTH}static startInterval(M){M.startObject(1)}static addUnit(M,r){M.addFieldInt16(0,r,ee.YEAR_MONTH)}static endInterval(M){return M.endObject()}static createInterval(M,r){return Fi.startInterval(M),
Fi.addUnit(M,r),Fi.endInterval(M)}}class Nh{constructor(){this.bb=null;this.bb_pos=0}__init(M,r){return this.bb_pos=M,this.bb=r,this}static getRootAsKeyValue(M,r){return(r||new Nh).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsKeyValue(M,r){return M.setPosition(M.position()+Cd.SIZE_PREFIX_LENGTH),(r||new Nh).__init(M.readInt32(M.position())+M.position(),M)}key(M){const r=this.bb.__offset(this.bb_pos,4);return r?this.bb.__string(this.bb_pos+r,M):null}value(M){const r=
this.bb.__offset(this.bb_pos,6);return r?this.bb.__string(this.bb_pos+r,M):null}static startKeyValue(M){M.startObject(2)}static addKey(M,r){M.addFieldOffset(0,r,0)}static addValue(M,r){M.addFieldOffset(1,r,0)}static endKeyValue(M){return M.endObject()}static createKeyValue(M,r,ra){return Nh.startKeyValue(M),Nh.addKey(M,r),Nh.addValue(M,ra),Nh.endKeyValue(M)}}class jh{constructor(){this.bb=null;this.bb_pos=0}__init(M,r){return this.bb_pos=M,this.bb=r,this}static getRootAsDictionaryEncoding(M,r){return(r||
new jh).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsDictionaryEncoding(M,r){return M.setPosition(M.position()+Cd.SIZE_PREFIX_LENGTH),(r||new jh).__init(M.readInt32(M.position())+M.position(),M)}id(){const M=this.bb.__offset(this.bb_pos,4);return M?this.bb.readInt64(this.bb_pos+M):this.bb.createLong(0,0)}indexType(M){const r=this.bb.__offset(this.bb_pos,6);return r?(M||new vf).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}isOrdered(){const M=this.bb.__offset(this.bb_pos,
8);return!!M&&!!this.bb.readInt8(this.bb_pos+M)}dictionaryKind(){const M=this.bb.__offset(this.bb_pos,10);return M?this.bb.readInt16(this.bb_pos+M):se.DenseArray}static startDictionaryEncoding(M){M.startObject(4)}static addId(M,r){M.addFieldInt64(0,r,M.createLong(0,0))}static addIndexType(M,r){M.addFieldOffset(1,r,0)}static addIsOrdered(M,r){M.addFieldInt8(2,+r,0)}static addDictionaryKind(M,r){M.addFieldInt16(3,r,se.DenseArray)}static endDictionaryEncoding(M){return M.endObject()}static createDictionaryEncoding(M,
r,ra,jb,Lb){return jh.startDictionaryEncoding(M),jh.addId(M,r),jh.addIndexType(M,ra),jh.addIsOrdered(M,jb),jh.addDictionaryKind(M,Lb),jh.endDictionaryEncoding(M)}}class Kg{constructor(){this.bb=null;this.bb_pos=0}__init(M,r){return this.bb_pos=M,this.bb=r,this}static getRootAsField(M,r){return(r||new Kg).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsField(M,r){return M.setPosition(M.position()+Cd.SIZE_PREFIX_LENGTH),(r||new Kg).__init(M.readInt32(M.position())+M.position(),
M)}name(M){const r=this.bb.__offset(this.bb_pos,4);return r?this.bb.__string(this.bb_pos+r,M):null}nullable(){const M=this.bb.__offset(this.bb_pos,6);return!!M&&!!this.bb.readInt8(this.bb_pos+M)}typeType(){const M=this.bb.__offset(this.bb_pos,8);return M?this.bb.readUint8(this.bb_pos+M):Pd.NONE}type(M){const r=this.bb.__offset(this.bb_pos,10);return r?this.bb.__union(M,this.bb_pos+r):null}dictionary(M){const r=this.bb.__offset(this.bb_pos,12);return r?(M||new jh).__init(this.bb.__indirect(this.bb_pos+
r),this.bb):null}children(M,r){const ra=this.bb.__offset(this.bb_pos,14);return ra?(r||new Kg).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+ra)+4*M),this.bb):null}childrenLength(){const M=this.bb.__offset(this.bb_pos,14);return M?this.bb.__vector_len(this.bb_pos+M):0}customMetadata(M,r){const ra=this.bb.__offset(this.bb_pos,16);return ra?(r||new Nh).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+ra)+4*M),this.bb):null}customMetadataLength(){const M=this.bb.__offset(this.bb_pos,16);
return M?this.bb.__vector_len(this.bb_pos+M):0}static startField(M){M.startObject(7)}static addName(M,r){M.addFieldOffset(0,r,0)}static addNullable(M,r){M.addFieldInt8(1,+r,0)}static addTypeType(M,r){M.addFieldInt8(2,r,Pd.NONE)}static addType(M,r){M.addFieldOffset(3,r,0)}static addDictionary(M,r){M.addFieldOffset(4,r,0)}static addChildren(M,r){M.addFieldOffset(5,r,0)}static createChildrenVector(M,r){M.startVector(4,r.length,4);for(let ra=r.length-1;0<=ra;ra--)M.addOffset(r[ra]);return M.endVector()}static startChildrenVector(M,
r){M.startVector(4,r,4)}static addCustomMetadata(M,r){M.addFieldOffset(6,r,0)}static createCustomMetadataVector(M,r){M.startVector(4,r.length,4);for(let ra=r.length-1;0<=ra;ra--)M.addOffset(r[ra]);return M.endVector()}static startCustomMetadataVector(M,r){M.startVector(4,r,4)}static endField(M){return M.endObject()}static createField(M,r,ra,jb,Lb,pc,Yc,Hd){return Kg.startField(M),Kg.addName(M,r),Kg.addNullable(M,ra),Kg.addTypeType(M,jb),Kg.addType(M,Lb),Kg.addDictionary(M,pc),Kg.addChildren(M,Yc),
Kg.addCustomMetadata(M,Hd),Kg.endField(M)}}class Cf{constructor(){this.bb=null;this.bb_pos=0}__init(M,r){return this.bb_pos=M,this.bb=r,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static createBuffer(M,r,ra){return M.prep(8,16),M.writeInt64(ra),M.writeInt64(r),M.offset()}}class nh{constructor(){this.bb=null;this.bb_pos=0}__init(M,r){return this.bb_pos=M,this.bb=r,this}static getRootAsSchema(M,r){return(r||new nh).__init(M.readInt32(M.position())+
M.position(),M)}static getSizePrefixedRootAsSchema(M,r){return M.setPosition(M.position()+Cd.SIZE_PREFIX_LENGTH),(r||new nh).__init(M.readInt32(M.position())+M.position(),M)}endianness(){const M=this.bb.__offset(this.bb_pos,4);return M?this.bb.readInt16(this.bb_pos+M):ye.Little}fields(M,r){const ra=this.bb.__offset(this.bb_pos,6);return ra?(r||new Kg).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+ra)+4*M),this.bb):null}fieldsLength(){const M=this.bb.__offset(this.bb_pos,6);return M?this.bb.__vector_len(this.bb_pos+
M):0}customMetadata(M,r){const ra=this.bb.__offset(this.bb_pos,8);return ra?(r||new Nh).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+ra)+4*M),this.bb):null}customMetadataLength(){const M=this.bb.__offset(this.bb_pos,8);return M?this.bb.__vector_len(this.bb_pos+M):0}features(M){const r=this.bb.__offset(this.bb_pos,10);return r?this.bb.readInt64(this.bb.__vector(this.bb_pos+r)+8*M):this.bb.createLong(0,0)}featuresLength(){const M=this.bb.__offset(this.bb_pos,10);return M?this.bb.__vector_len(this.bb_pos+
M):0}static startSchema(M){M.startObject(4)}static addEndianness(M,r){M.addFieldInt16(0,r,ye.Little)}static addFields(M,r){M.addFieldOffset(1,r,0)}static createFieldsVector(M,r){M.startVector(4,r.length,4);for(let ra=r.length-1;0<=ra;ra--)M.addOffset(r[ra]);return M.endVector()}static startFieldsVector(M,r){M.startVector(4,r,4)}static addCustomMetadata(M,r){M.addFieldOffset(2,r,0)}static createCustomMetadataVector(M,r){M.startVector(4,r.length,4);for(let ra=r.length-1;0<=ra;ra--)M.addOffset(r[ra]);
return M.endVector()}static startCustomMetadataVector(M,r){M.startVector(4,r,4)}static addFeatures(M,r){M.addFieldOffset(3,r,0)}static createFeaturesVector(M,r){M.startVector(8,r.length,8);for(let ra=r.length-1;0<=ra;ra--)M.addInt64(r[ra]);return M.endVector()}static startFeaturesVector(M,r){M.startVector(8,r,8)}static endSchema(M){return M.endObject()}static finishSchemaBuffer(M,r){M.finish(r)}static finishSizePrefixedSchemaBuffer(M,r){M.finish(r,void 0,!0)}static createSchema(M,r,ra,jb,Lb){return nh.startSchema(M),
nh.addEndianness(M,r),nh.addFields(M,ra),nh.addCustomMetadata(M,jb),nh.addFeatures(M,Lb),nh.endSchema(M)}}!function(M){M[M.LZ4_FRAME=0]="LZ4_FRAME";M[M.ZSTD=1]="ZSTD"}(Oe||(Oe={}));(function(M){M[M.BUFFER=0]="BUFFER"})(Se||(Se={}));(function(M){M[M.NONE=0]="NONE";M[M.Schema=1]="Schema";M[M.DictionaryBatch=2]="DictionaryBatch";M[M.RecordBatch=3]="RecordBatch";M[M.Tensor=4]="Tensor";M[M.SparseTensor=5]="SparseTensor"})(Pe||(Pe={}));class Ui{constructor(){this.bb=null;this.bb_pos=0}__init(M,r){return this.bb_pos=
M,this.bb=r,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static createFieldNode(M,r,ra){return M.prep(8,16),M.writeInt64(ra),M.writeInt64(r),M.offset()}}class Gi{constructor(){this.bb=null;this.bb_pos=0}__init(M,r){return this.bb_pos=M,this.bb=r,this}static getRootAsBodyCompression(M,r){return(r||new Gi).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsBodyCompression(M,r){return M.setPosition(M.position()+Cd.SIZE_PREFIX_LENGTH),
(r||new Gi).__init(M.readInt32(M.position())+M.position(),M)}codec(){const M=this.bb.__offset(this.bb_pos,4);return M?this.bb.readInt8(this.bb_pos+M):Oe.LZ4_FRAME}method(){const M=this.bb.__offset(this.bb_pos,6);return M?this.bb.readInt8(this.bb_pos+M):Se.BUFFER}static startBodyCompression(M){M.startObject(2)}static addCodec(M,r){M.addFieldInt8(0,r,Oe.LZ4_FRAME)}static addMethod(M,r){M.addFieldInt8(1,r,Se.BUFFER)}static endBodyCompression(M){return M.endObject()}static createBodyCompression(M,r,ra){return Gi.startBodyCompression(M),
Gi.addCodec(M,r),Gi.addMethod(M,ra),Gi.endBodyCompression(M)}}class oh{constructor(){this.bb=null;this.bb_pos=0}__init(M,r){return this.bb_pos=M,this.bb=r,this}static getRootAsRecordBatch(M,r){return(r||new oh).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsRecordBatch(M,r){return M.setPosition(M.position()+Cd.SIZE_PREFIX_LENGTH),(r||new oh).__init(M.readInt32(M.position())+M.position(),M)}length(){const M=this.bb.__offset(this.bb_pos,4);return M?this.bb.readInt64(this.bb_pos+
M):this.bb.createLong(0,0)}nodes(M,r){const ra=this.bb.__offset(this.bb_pos,6);return ra?(r||new Ui).__init(this.bb.__vector(this.bb_pos+ra)+16*M,this.bb):null}nodesLength(){const M=this.bb.__offset(this.bb_pos,6);return M?this.bb.__vector_len(this.bb_pos+M):0}buffers(M,r){const ra=this.bb.__offset(this.bb_pos,8);return ra?(r||new Cf).__init(this.bb.__vector(this.bb_pos+ra)+16*M,this.bb):null}buffersLength(){const M=this.bb.__offset(this.bb_pos,8);return M?this.bb.__vector_len(this.bb_pos+M):0}compression(M){const r=
this.bb.__offset(this.bb_pos,10);return r?(M||new Gi).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}static startRecordBatch(M){M.startObject(4)}static addLength(M,r){M.addFieldInt64(0,r,M.createLong(0,0))}static addNodes(M,r){M.addFieldOffset(1,r,0)}static startNodesVector(M,r){M.startVector(16,r,8)}static addBuffers(M,r){M.addFieldOffset(2,r,0)}static startBuffersVector(M,r){M.startVector(16,r,8)}static addCompression(M,r){M.addFieldOffset(3,r,0)}static endRecordBatch(M){return M.endObject()}static createRecordBatch(M,
r,ra,jb,Lb){return oh.startRecordBatch(M),oh.addLength(M,r),oh.addNodes(M,ra),oh.addBuffers(M,jb),oh.addCompression(M,Lb),oh.endRecordBatch(M)}}class $d{constructor(){this.bb=null;this.bb_pos=0}__init(M,r){return this.bb_pos=M,this.bb=r,this}static getRootAsDictionaryBatch(M,r){return(r||new $d).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsDictionaryBatch(M,r){return M.setPosition(M.position()+Cd.SIZE_PREFIX_LENGTH),(r||new $d).__init(M.readInt32(M.position())+M.position(),
M)}id(){const M=this.bb.__offset(this.bb_pos,4);return M?this.bb.readInt64(this.bb_pos+M):this.bb.createLong(0,0)}data(M){const r=this.bb.__offset(this.bb_pos,6);return r?(M||new oh).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}isDelta(){const M=this.bb.__offset(this.bb_pos,8);return!!M&&!!this.bb.readInt8(this.bb_pos+M)}static startDictionaryBatch(M){M.startObject(3)}static addId(M,r){M.addFieldInt64(0,r,M.createLong(0,0))}static addData(M,r){M.addFieldOffset(1,r,0)}static addIsDelta(M,
r){M.addFieldInt8(2,+r,0)}static endDictionaryBatch(M){return M.endObject()}static createDictionaryBatch(M,r,ra,jb){return $d.startDictionaryBatch(M),$d.addId(M,r),$d.addData(M,ra),$d.addIsDelta(M,jb),$d.endDictionaryBatch(M)}}class ug{constructor(){this.bb=null;this.bb_pos=0}__init(M,r){return this.bb_pos=M,this.bb=r,this}static getRootAsMessage(M,r){return(r||new ug).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsMessage(M,r){return M.setPosition(M.position()+Cd.SIZE_PREFIX_LENGTH),
(r||new ug).__init(M.readInt32(M.position())+M.position(),M)}version(){const M=this.bb.__offset(this.bb_pos,4);return M?this.bb.readInt16(this.bb_pos+M):Qb.V1}headerType(){const M=this.bb.__offset(this.bb_pos,6);return M?this.bb.readUint8(this.bb_pos+M):Pe.NONE}header(M){const r=this.bb.__offset(this.bb_pos,8);return r?this.bb.__union(M,this.bb_pos+r):null}bodyLength(){const M=this.bb.__offset(this.bb_pos,10);return M?this.bb.readInt64(this.bb_pos+M):this.bb.createLong(0,0)}customMetadata(M,r){const ra=
this.bb.__offset(this.bb_pos,12);return ra?(r||new Nh).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+ra)+4*M),this.bb):null}customMetadataLength(){const M=this.bb.__offset(this.bb_pos,12);return M?this.bb.__vector_len(this.bb_pos+M):0}static startMessage(M){M.startObject(5)}static addVersion(M,r){M.addFieldInt16(0,r,Qb.V1)}static addHeaderType(M,r){M.addFieldInt8(1,r,Pe.NONE)}static addHeader(M,r){M.addFieldOffset(2,r,0)}static addBodyLength(M,r){M.addFieldInt64(3,r,M.createLong(0,0))}static addCustomMetadata(M,
r){M.addFieldOffset(4,r,0)}static createCustomMetadataVector(M,r){M.startVector(4,r.length,4);for(let ra=r.length-1;0<=ra;ra--)M.addOffset(r[ra]);return M.endVector()}static startCustomMetadataVector(M,r){M.startVector(4,r,4)}static endMessage(M){return M.endObject()}static finishMessageBuffer(M,r){M.finish(r)}static finishSizePrefixedMessageBuffer(M,r){M.finish(r,void 0,!0)}static createMessage(M,r,ra,jb,Lb,pc){return ug.startMessage(M),ug.addVersion(M,r),ug.addHeaderType(M,ra),ug.addHeader(M,jb),
ug.addBodyLength(M,Lb),ug.addCustomMetadata(M,pc),ug.endMessage(M)}}!function(M){M[M.NONE=0]="NONE";M[M.Null=1]="Null";M[M.Int=2]="Int";M[M.Float=3]="Float";M[M.Binary=4]="Binary";M[M.Utf8=5]="Utf8";M[M.Bool=6]="Bool";M[M.Decimal=7]="Decimal";M[M.Date=8]="Date";M[M.Time=9]="Time";M[M.Timestamp=10]="Timestamp";M[M.Interval=11]="Interval";M[M.List=12]="List";M[M.Struct=13]="Struct";M[M.Union=14]="Union";M[M.FixedSizeBinary=15]="FixedSizeBinary";M[M.FixedSizeList=16]="FixedSizeList";M[M.Map=17]="Map";
M[M.Dictionary=-1]="Dictionary";M[M.Int8=-2]="Int8";M[M.Int16=-3]="Int16";M[M.Int32=-4]="Int32";M[M.Int64=-5]="Int64";M[M.Uint8=-6]="Uint8";M[M.Uint16=-7]="Uint16";M[M.Uint32=-8]="Uint32";M[M.Uint64=-9]="Uint64";M[M.Float16=-10]="Float16";M[M.Float32=-11]="Float32";M[M.Float64=-12]="Float64";M[M.DateDay=-13]="DateDay";M[M.DateMillisecond=-14]="DateMillisecond";M[M.TimestampSecond=-15]="TimestampSecond";M[M.TimestampMillisecond=-16]="TimestampMillisecond";M[M.TimestampMicrosecond=-17]="TimestampMicrosecond";
M[M.TimestampNanosecond=-18]="TimestampNanosecond";M[M.TimeSecond=-19]="TimeSecond";M[M.TimeMillisecond=-20]="TimeMillisecond";M[M.TimeMicrosecond=-21]="TimeMicrosecond";M[M.TimeNanosecond=-22]="TimeNanosecond";M[M.DenseUnion=-23]="DenseUnion";M[M.SparseUnion=-24]="SparseUnion";M[M.IntervalDayTime=-25]="IntervalDayTime";M[M.IntervalYearMonth=-26]="IntervalYearMonth"}(Xd||(Xd={}));(function(M){M[M.OFFSET=0]="OFFSET";M[M.DATA=1]="DATA";M[M.VALIDITY=2]="VALIDITY";M[M.TYPE=3]="TYPE"})(Ze||(Ze={}));class nj{constructor(M,
r,ra,jb,Lb){this.bytes=M;this.length=ra;this.context=jb;this.get=Lb;this.bit=r%8;this.byteIndex=r>>3;this.byte=M[this.byteIndex++];this.index=0}next(){return this.index<this.length?(8===this.bit&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}class eg{static isNull(M){return M&&M.typeId===Xd.Null}static isInt(M){return M&&M.typeId===Xd.Int}static isFloat(M){return M&&M.typeId===
Xd.Float}static isBinary(M){return M&&M.typeId===Xd.Binary}static isUtf8(M){return M&&M.typeId===Xd.Utf8}static isBool(M){return M&&M.typeId===Xd.Bool}static isDecimal(M){return M&&M.typeId===Xd.Decimal}static isDate(M){return M&&M.typeId===Xd.Date}static isTime(M){return M&&M.typeId===Xd.Time}static isTimestamp(M){return M&&M.typeId===Xd.Timestamp}static isInterval(M){return M&&M.typeId===Xd.Interval}static isList(M){return M&&M.typeId===Xd.List}static isStruct(M){return M&&M.typeId===Xd.Struct}static isUnion(M){return M&&
M.typeId===Xd.Union}static isFixedSizeBinary(M){return M&&M.typeId===Xd.FixedSizeBinary}static isFixedSizeList(M){return M&&M.typeId===Xd.FixedSizeList}static isMap(M){return M&&M.typeId===Xd.Map}static isDictionary(M){return M&&M.typeId===Xd.Dictionary}get typeId(){return Xd.NONE}}eg[Symbol.toStringTag]=((Tf=eg.prototype).children=null,Tf.ArrayType=Array,Tf[Symbol.toStringTag]="DataType");class Zd extends eg{toString(){return"Null"}get typeId(){return Xd.Null}}Zd[Symbol.toStringTag]=Zd.prototype[Symbol.toStringTag]=
"Null";class ve extends eg{constructor(M,r){super();this.isSigned=M;this.bitWidth=r}get typeId(){return Xd.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:case 64:return this.isSigned?Int32Array:Uint32Array}throw Error(`Unrecognized ${this[Symbol.toStringTag]} type`);}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}ve[Symbol.toStringTag]=(M=>(M.isSigned=null,M.bitWidth=null,M[Symbol.toStringTag]=
"Int"))(ve.prototype);class Sb extends ve{constructor(){super(!0,8)}}class Qc extends ve{constructor(){super(!0,16)}}class ud extends ve{constructor(){super(!0,32)}}class oe extends ve{constructor(){super(!0,64)}}class ue extends ve{constructor(){super(!1,8)}}class Of extends ve{constructor(){super(!1,16)}}class kf extends ve{constructor(){super(!1,32)}}class fg extends ve{constructor(){super(!1,64)}}Object.defineProperty(Sb.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(Qc.prototype,
"ArrayType",{value:Int16Array});Object.defineProperty(ud.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(oe.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(ue.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(Of.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(kf.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(fg.prototype,"ArrayType",{value:Uint32Array});class Zf extends eg{constructor(M){super();this.precision=M}get typeId(){return Xd.Float}get ArrayType(){switch(this.precision){case Rd.HALF:return Uint16Array;
case Rd.SINGLE:return Float32Array;case Rd.DOUBLE:return Float64Array}throw Error(`Unrecognized ${this[Symbol.toStringTag]} type`);}toString(){return"Float"+(this.precision<<5||16)}}Zf[Symbol.toStringTag]=(M=>(M.precision=null,M[Symbol.toStringTag]="Float"))(Zf.prototype);class qg extends Zf{constructor(){super(Rd.HALF)}}class lh extends Zf{constructor(){super(Rd.SINGLE)}}class pi extends Zf{constructor(){super(Rd.DOUBLE)}}Object.defineProperty(qg.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(lh.prototype,
"ArrayType",{value:Float32Array});Object.defineProperty(pi.prototype,"ArrayType",{value:Float64Array});class bj extends eg{constructor(){super()}get typeId(){return Xd.Binary}toString(){return"Binary"}}bj[Symbol.toStringTag]=(M=>(M.ArrayType=Uint8Array,M[Symbol.toStringTag]="Binary"))(bj.prototype);class Sh extends eg{constructor(){super()}get typeId(){return Xd.Utf8}toString(){return"Utf8"}}Sh[Symbol.toStringTag]=(M=>(M.ArrayType=Uint8Array,M[Symbol.toStringTag]="Utf8"))(Sh.prototype);class Eh extends eg{constructor(){super()}get typeId(){return Xd.Bool}toString(){return"Bool"}}
Eh[Symbol.toStringTag]=(M=>(M.ArrayType=Uint8Array,M[Symbol.toStringTag]="Bool"))(Eh.prototype);class cj extends eg{constructor(M,r){super();this.scale=M;this.precision=r}get typeId(){return Xd.Decimal}toString(){return`Decimal[${this.precision}e${0<this.scale?"+":""}${this.scale}]`}}cj[Symbol.toStringTag]=(M=>(M.scale=null,M.precision=null,M.ArrayType=Uint32Array,M[Symbol.toStringTag]="Decimal"))(cj.prototype);class ji extends eg{constructor(M){super();this.unit=M}get typeId(){return Xd.Date}toString(){return`Date${32*
(this.unit+1)}<${Md[this.unit]}>`}}ji[Symbol.toStringTag]=(M=>(M.unit=null,M.ArrayType=Int32Array,M[Symbol.toStringTag]="Date"))(ji.prototype);class ng extends ji{constructor(){super(Md.DAY)}}class kh extends ji{constructor(){super(Md.MILLISECOND)}}class T extends eg{constructor(M,r){super();this.unit=M;this.bitWidth=r}get typeId(){return Xd.Time}toString(){return`Time${this.bitWidth}<${nd[this.unit]}>`}}T[Symbol.toStringTag]=(M=>(M.unit=null,M.bitWidth=null,M.ArrayType=Int32Array,M[Symbol.toStringTag]=
"Time"))(T.prototype);class Oa extends T{constructor(){super(nd.SECOND,32)}}class zb extends T{constructor(){super(nd.MILLISECOND,32)}}class Ac extends T{constructor(){super(nd.MICROSECOND,64)}}class jd extends T{constructor(){super(nd.NANOSECOND,64)}}class je extends eg{constructor(M,r){super();this.unit=M;this.timezone=r}get typeId(){return Xd.Timestamp}toString(){return`Timestamp<${nd[this.unit]}${this.timezone?", "+this.timezone:""}>`}}je[Symbol.toStringTag]=(M=>(M.unit=null,M.timezone=null,M.ArrayType=
Int32Array,M[Symbol.toStringTag]="Timestamp"))(je.prototype);class Ne extends je{constructor(M){super(nd.SECOND,M)}}class ff extends je{constructor(M){super(nd.MILLISECOND,M)}}class ig extends je{constructor(M){super(nd.MICROSECOND,M)}}class Dh extends je{constructor(M){super(nd.NANOSECOND,M)}}class Di extends eg{constructor(M){super();this.unit=M}get typeId(){return Xd.Interval}toString(){return`Interval<${ee[this.unit]}>`}}Di[Symbol.toStringTag]=(M=>(M.unit=null,M.ArrayType=Int32Array,M[Symbol.toStringTag]=
"Interval"))(Di.prototype);class Si extends Di{constructor(){super(ee.DAY_TIME)}}class pl extends Di{constructor(){super(ee.YEAR_MONTH)}}class Aj extends eg{constructor(M){super();this.children=[M]}get typeId(){return Xd.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}Aj[Symbol.toStringTag]=(M=>(M.children=null,M[Symbol.toStringTag]="List"))(Aj.prototype);class Hj extends eg{constructor(M){super();
this.children=M}get typeId(){return Xd.Struct}toString(){return`Struct<{${this.children.map(M=>`${M.name}:${M.type}`).join(", ")}}>`}}Hj[Symbol.toStringTag]=(M=>(M.children=null,M[Symbol.toStringTag]="Struct"))(Hj.prototype);class ck extends eg{constructor(M,r,ra){super();this.mode=M;this.children=ra;this.typeIds=r=Int32Array.from(r);this.typeIdToChildIndex=r.reduce((jb,Lb,pc)=>(jb[Lb]=pc)&&jb||jb,Object.create(null))}get typeId(){return Xd.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(M=>
""+M.type).join(" | ")}>`}}ck[Symbol.toStringTag]=(M=>(M.mode=null,M.typeIds=null,M.children=null,M.typeIdToChildIndex=null,M.ArrayType=Int8Array,M[Symbol.toStringTag]="Union"))(ck.prototype);class Ck extends ck{constructor(M,r){super(ad.Dense,M,r)}}class Ri extends ck{constructor(M,r){super(ad.Sparse,M,r)}}class jk extends eg{constructor(M){super();this.byteWidth=M}get typeId(){return Xd.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}jk[Symbol.toStringTag]=(M=>(M.byteWidth=
null,M.ArrayType=Uint8Array,M[Symbol.toStringTag]="FixedSizeBinary"))(jk.prototype);class Gj extends eg{constructor(M,r){super();this.listSize=M;this.children=[r]}get typeId(){return Xd.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}Gj[Symbol.toStringTag]=(M=>(M.children=null,M.listSize=null,M[Symbol.toStringTag]="FixedSizeList"))(Gj.prototype);
class Ik extends eg{constructor(M,r=!1){super();this.children=[M];this.keysSorted=r}get typeId(){return Xd.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}toString(){return`Map<{${this.children[0].type.children.map(M=>`${M.name}:${M.type}`).join(", ")}}>`}}Ik[Symbol.toStringTag]=(M=>(M.children=null,M.keysSorted=null,M[Symbol.toStringTag]="Map_"))(Ik.prototype);const wk=($k=-1,()=>++$k);var $k;class ci extends eg{constructor(M,
r,ra,jb){super();this.indices=r;this.dictionary=M;this.isOrdered=jb||!1;this.id=null==ra?wk():"number"==typeof ra?ra:ra.low}get typeId(){return Xd.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}ci[Symbol.toStringTag]=(M=>(M.id=null,M.indices=null,M.isOrdered=null,M.dictionary=null,M[Symbol.toStringTag]="Dictionary"))(ci.prototype);class Ng{constructor(M,
r,ra,jb,Lb,pc,Yc){let Hd;this.type=M;this.dictionary=Yc;this.offset=Math.floor(Math.max(r||0,0));this.length=Math.floor(Math.max(ra||0,0));this._nullCount=Math.floor(Math.max(jb||0,-1));this.childData=(pc||[]).map(Kd=>Kd instanceof Ng?Kd:Kd.data);Lb instanceof Ng?(this.stride=Lb.stride,this.values=Lb.values,this.typeIds=Lb.typeIds,this.nullBitmap=Lb.nullBitmap,this.valueOffsets=Lb.valueOffsets):(this.stride=la(M),Lb&&((Hd=Lb[0])&&(this.valueOffsets=Hd),(Hd=Lb[1])&&(this.values=Hd),(Hd=Lb[2])&&(this.nullBitmap=
Hd),(Hd=Lb[3])&&(this.typeIds=Hd)))}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let M=0;const {valueOffsets:r,values:ra,nullBitmap:jb,typeIds:Lb}=this;return r&&(M+=r.byteLength),ra&&(M+=ra.byteLength),jb&&(M+=jb.byteLength),Lb&&(M+=Lb.byteLength),this.childData.reduce((pc,Yc)=>pc+Yc.byteLength,M)}get nullCount(){let M,r=this._nullCount;return-1>=r&&(M=this.nullBitmap)&&
(this._nullCount=r=this.length-ea(M,this.offset,this.offset+this.length)),r}clone(M,r=this.offset,ra=this.length,jb=this._nullCount,Lb=this,pc=this.childData){return new Ng(M,r,ra,jb,Lb,pc,this.dictionary)}slice(M,r){const {stride:ra,typeId:jb,childData:Lb}=this,pc=+(0===this._nullCount)-1,Yc=16===jb?ra:1,Hd=this._sliceBuffers(M,r,ra,jb);return this.clone(this.type,this.offset+M,r,pc,Hd,!Lb.length||this.valueOffsets?Lb:this._sliceChildren(Lb,Yc*M,Yc*r))}_changeLengthAndBackfillNullBitmap(M){if(this.typeId===
Xd.Null)return this.clone(this.type,0,M,0);const {length:r,nullCount:ra}=this,jb=(new Uint8Array((M+63&-64)>>3)).fill(255,0,r>>3);jb[r>>3]=(1<<r-(-8&r))-1;0<ra&&jb.set(H(this.offset,r,this.nullBitmap),0);const Lb=this.buffers;return Lb[Ze.VALIDITY]=jb,this.clone(this.type,0,M,ra+(M-r),Lb)}_sliceBuffers(M,r,ra,jb){let Lb;const {buffers:pc}=this;return(Lb=pc[Ze.TYPE])&&(pc[Ze.TYPE]=Lb.subarray(M,M+r)),(Lb=pc[Ze.OFFSET])&&(pc[Ze.OFFSET]=Lb.subarray(M,M+r+1))||(Lb=pc[Ze.DATA])&&(pc[Ze.DATA]=6===jb?Lb:
Lb.subarray(ra*M,ra*(M+r))),pc}_sliceChildren(M,r,ra){return M.map(jb=>jb.slice(r,ra))}static new(M,r,ra,jb,Lb,pc,Yc){switch(Lb instanceof Ng?Lb=Lb.buffers:Lb||(Lb=[]),M.typeId){case Xd.Null:return Ng.Null(M,r,ra);case Xd.Int:return Ng.Int(M,r,ra,jb||0,Lb[Ze.VALIDITY],Lb[Ze.DATA]||[]);case Xd.Dictionary:return Ng.Dictionary(M,r,ra,jb||0,Lb[Ze.VALIDITY],Lb[Ze.DATA]||[],Yc);case Xd.Float:return Ng.Float(M,r,ra,jb||0,Lb[Ze.VALIDITY],Lb[Ze.DATA]||[]);case Xd.Bool:return Ng.Bool(M,r,ra,jb||0,Lb[Ze.VALIDITY],
Lb[Ze.DATA]||[]);case Xd.Decimal:return Ng.Decimal(M,r,ra,jb||0,Lb[Ze.VALIDITY],Lb[Ze.DATA]||[]);case Xd.Date:return Ng.Date(M,r,ra,jb||0,Lb[Ze.VALIDITY],Lb[Ze.DATA]||[]);case Xd.Time:return Ng.Time(M,r,ra,jb||0,Lb[Ze.VALIDITY],Lb[Ze.DATA]||[]);case Xd.Timestamp:return Ng.Timestamp(M,r,ra,jb||0,Lb[Ze.VALIDITY],Lb[Ze.DATA]||[]);case Xd.Interval:return Ng.Interval(M,r,ra,jb||0,Lb[Ze.VALIDITY],Lb[Ze.DATA]||[]);case Xd.FixedSizeBinary:return Ng.FixedSizeBinary(M,r,ra,jb||0,Lb[Ze.VALIDITY],Lb[Ze.DATA]||
[]);case Xd.Binary:return Ng.Binary(M,r,ra,jb||0,Lb[Ze.VALIDITY],Lb[Ze.OFFSET]||[],Lb[Ze.DATA]||[]);case Xd.Utf8:return Ng.Utf8(M,r,ra,jb||0,Lb[Ze.VALIDITY],Lb[Ze.OFFSET]||[],Lb[Ze.DATA]||[]);case Xd.List:return Ng.List(M,r,ra,jb||0,Lb[Ze.VALIDITY],Lb[Ze.OFFSET]||[],(pc||[])[0]);case Xd.FixedSizeList:return Ng.FixedSizeList(M,r,ra,jb||0,Lb[Ze.VALIDITY],(pc||[])[0]);case Xd.Struct:return Ng.Struct(M,r,ra,jb||0,Lb[Ze.VALIDITY],pc||[]);case Xd.Map:return Ng.Map(M,r,ra,jb||0,Lb[Ze.VALIDITY],Lb[Ze.OFFSET]||
[],(pc||[])[0]);case Xd.Union:return Ng.Union(M,r,ra,jb||0,Lb[Ze.VALIDITY],Lb[Ze.TYPE]||[],Lb[Ze.OFFSET]||pc,pc)}throw Error("Unrecognized typeId "+M.typeId);}static Null(M,r,ra){return new Ng(M,r,ra,0)}static Int(M,r,ra,jb,Lb,pc){return new Ng(M,r,ra,jb,[void 0,K(M.ArrayType,pc),K(Uint8Array,Lb)])}static Dictionary(M,r,ra,jb,Lb,pc,Yc){return new Ng(M,r,ra,jb,[void 0,K(M.indices.ArrayType,pc),K(Uint8Array,Lb)],[],Yc)}static Float(M,r,ra,jb,Lb,pc){return new Ng(M,r,ra,jb,[void 0,K(M.ArrayType,pc),
K(Uint8Array,Lb)])}static Bool(M,r,ra,jb,Lb,pc){return new Ng(M,r,ra,jb,[void 0,K(M.ArrayType,pc),K(Uint8Array,Lb)])}static Decimal(M,r,ra,jb,Lb,pc){return new Ng(M,r,ra,jb,[void 0,K(M.ArrayType,pc),K(Uint8Array,Lb)])}static Date(M,r,ra,jb,Lb,pc){return new Ng(M,r,ra,jb,[void 0,K(M.ArrayType,pc),K(Uint8Array,Lb)])}static Time(M,r,ra,jb,Lb,pc){return new Ng(M,r,ra,jb,[void 0,K(M.ArrayType,pc),K(Uint8Array,Lb)])}static Timestamp(M,r,ra,jb,Lb,pc){return new Ng(M,r,ra,jb,[void 0,K(M.ArrayType,pc),K(Uint8Array,
Lb)])}static Interval(M,r,ra,jb,Lb,pc){return new Ng(M,r,ra,jb,[void 0,K(M.ArrayType,pc),K(Uint8Array,Lb)])}static FixedSizeBinary(M,r,ra,jb,Lb,pc){return new Ng(M,r,ra,jb,[void 0,K(M.ArrayType,pc),K(Uint8Array,Lb)])}static Binary(M,r,ra,jb,Lb,pc,Yc){return new Ng(M,r,ra,jb,[K(Int32Array,pc),K(Uint8Array,Yc),K(Uint8Array,Lb)])}static Utf8(M,r,ra,jb,Lb,pc,Yc){return new Ng(M,r,ra,jb,[K(Int32Array,pc),K(Uint8Array,Yc),K(Uint8Array,Lb)])}static List(M,r,ra,jb,Lb,pc,Yc){return new Ng(M,r,ra,jb,[K(Int32Array,
pc),void 0,K(Uint8Array,Lb)],Yc?[Yc]:[])}static FixedSizeList(M,r,ra,jb,Lb,pc){return new Ng(M,r,ra,jb,[void 0,void 0,K(Uint8Array,Lb)],pc?[pc]:[])}static Struct(M,r,ra,jb,Lb,pc){return new Ng(M,r,ra,jb,[void 0,void 0,K(Uint8Array,Lb)],pc)}static Map(M,r,ra,jb,Lb,pc,Yc){return new Ng(M,r,ra,jb,[K(Int32Array,pc),void 0,K(Uint8Array,Lb)],Yc?[Yc]:[])}static Union(M,r,ra,jb,Lb,pc,Yc,Hd){Lb=[void 0,void 0,K(Uint8Array,Lb),K(M.ArrayType,pc)];return M.mode===ad.Sparse?new Ng(M,r,ra,jb,Lb,Yc):(Lb[Ze.OFFSET]=
K(Int32Array,Yc),new Ng(M,r,ra,jb,Lb,Hd))}}Ng.prototype.childData=Object.freeze([]);const sk=(M,r)=>(M*r+63&-64||64)/r;class Ji{constructor(M,r=1){this.buffer=M;this.stride=r;this.BYTES_PER_ELEMENT=M.BYTES_PER_ELEMENT;this.ArrayType=M.constructor;this._resize(this.length=M.length/r|0)}get byteLength(){return this.length*this.stride*this.BYTES_PER_ELEMENT|0}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(M,r){return this}append(M){return this.set(this.length,
M)}reserve(M){if(0<M){this.length+=M;M=this.length*this.stride;const r=this.buffer.length;M>=r&&this._resize(sk(0===r?1*M:2*M,this.BYTES_PER_ELEMENT))}return this}flush(M=this.length){M=sk(M*this.stride,this.BYTES_PER_ELEMENT);M=((r,ra=0)=>r.length>=ra?r.subarray(0,ra):pa(new r.constructor(ra),r,0))(this.buffer,M);return this.clear(),M}clear(){return this.length=0,this._resize(0),this}_resize(M){return this.buffer=pa(new this.ArrayType(M),this.buffer)}}Ji.prototype.offset=0;class Fg extends Ji{last(){return this.get(this.length-
1)}get(M){return this.buffer[M]}set(M,r){return this.reserve(M-this.length+1),this.buffer[M*this.stride]=r,this}}class Vi extends Fg{constructor(M=new Uint8Array(0)){super(M,.125);this.numValid=0}get numInvalid(){return this.length-this.numValid}get(M){return this.buffer[M>>3]>>M%8&1}set(M,r){const {buffer:ra}=this.reserve(M-this.length+1),jb=M>>3;M%=8;const Lb=ra[jb]>>M&1;return r?0===Lb&&(ra[jb]|=1<<M,++this.numValid):1===Lb&&(ra[jb]&=~(1<<M),--this.numValid),this}clear(){return this.numValid=0,
super.clear()}}class Yk extends Fg{constructor(M=new Int32Array(1)){super(M,1)}append(M){return this.set(this.length-1,M)}set(M,r){const ra=this.length-1,jb=this.reserve(M-ra+1).buffer;return ra<M++&&jb.fill(jb[ra],ra,M),jb[M]=jb[M-1]+r,this}flush(M=this.length-1){return M>this.length&&this.set(M-1,0),super.flush(M+1)}}class jl extends Ji{get ArrayType64(){return this._ArrayType64||(this._ArrayType64=this.buffer instanceof Int32Array?Zg:oi)}set(M,r){switch(this.reserve(M-this.length+1),typeof r){case "bigint":this.buffer64[M]=
r;break;case "number":this.buffer[M*this.stride]=r;break;default:this.buffer.set(r,M*this.stride)}return this}_resize(M){M=super._resize(M);const r=M.byteLength/(this.BYTES_PER_ELEMENT*this.stride);return eh&&(this.buffer64=new this.ArrayType64(M.buffer,M.byteOffset,r)),M}}class oj{constructor({type:M,nullValues:r}){this.length=0;this.finished=!1;this.type=M;this.children=[];this.nullValues=r;this.stride=la(M);this._nulls=new Vi;r&&0<r.length&&(this._isValid=Ma(r))}static new(M){}static throughNode(M){throw Error('"throughNode" not available in this environment');
}static throughDOM(M){throw Error('"throughDOM" not available in this environment');}static throughIterable(M){return function(r){const {queueingStrategy:ra="count"}=r,{highWaterMark:jb="bytes"!==ra?1E3:16384}=r,Lb="bytes"!==ra?"length":"byteLength";return function*(pc){let Yc=0;const Hd=oj.new(r);for(const Kd of pc)Hd.append(Kd)[Lb]>=jb&&++Yc&&(yield Hd.toVector());(0<Hd.finish().length||0===Yc)&&(yield Hd.toVector())}}(M)}static throughAsyncIterable(M){return function(r){const {queueingStrategy:ra=
"count"}=r,{highWaterMark:jb="bytes"!==ra?1E3:16384}=r,Lb="bytes"!==ra?"length":"byteLength";return function(pc){return da(this,arguments,function*(){var Yc;let Hd=0;const Kd=oj.new(r);try{for(var ze,bf=X(pc);!(ze=yield N(bf.next())).done;)Kd.append(ze.value)[Lb]>=jb&&++Hd&&(yield yield N(Kd.toVector()))}catch(jg){var Ef={error:jg}}finally{try{ze&&!ze.done&&(Yc=bf.return)&&(yield N(Yc.call(bf)))}finally{if(Ef)throw Ef.error;}}(0<Kd.finish().length||0===Hd)&&(yield yield N(Kd.toVector()))})}}(M)}toVector(){return qb.new(this.flush())}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let M=
0;return this._offsets&&(M+=this._offsets.byteLength),this._values&&(M+=this._values.byteLength),this._nulls&&(M+=this._nulls.byteLength),this._typeIds&&(M+=this._typeIds.byteLength),this.children.reduce((r,ra)=>r+ra.byteLength,M)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let M=0;return this._offsets&&(M+=this._offsets.reservedByteLength),this._values&&(M+=this._values.reservedByteLength),this._nulls&&(M+=this._nulls.reservedByteLength),this._typeIds&&(M+=this._typeIds.reservedByteLength),
this.children.reduce((r,ra)=>r+ra.reservedByteLength,M)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(M){return this.set(this.length,M)}isValid(M){return this._isValid(M)}set(M,r){return this.setValid(M,this.isValid(r))&&this.setValue(M,r),this}setValue(M,r){this._setValue(this,M,r)}setValid(M,
r){return this.length=this._nulls.set(M,+r).length,r}addChild(M,r){throw Error(`Cannot append children to non-nested type "${this.type}"`);}getChildAt(M){return this.children[M]||null}flush(){var M=[];const r=this._values,ra=this._offsets,jb=this._typeIds,{length:Lb,nullCount:pc}=this;jb?(M[Ze.TYPE]=jb.flush(Lb),ra&&(M[Ze.OFFSET]=ra.flush(Lb))):ra?(r&&(M[Ze.DATA]=r.flush(ra.last())),M[Ze.OFFSET]=ra.flush(Lb)):r&&(M[Ze.DATA]=r.flush(Lb));0<pc&&(M[Ze.VALIDITY]=this._nulls.flush(Lb));M=Ng.new(this.type,
0,Lb,pc,M,this.children.map(Yc=>Yc.flush()));return this.clear(),M}finish(){return this.finished=!0,this.children.forEach(M=>M.finish()),this}clear(){return this.length=0,this._offsets&&this._offsets.clear(),this._values&&this._values.clear(),this._nulls&&this._nulls.clear(),this._typeIds&&this._typeIds.clear(),this.children.forEach(M=>M.clear()),this}}oj.prototype.length=1;oj.prototype.stride=1;oj.prototype.children=null;oj.prototype.finished=!1;oj.prototype.nullValues=null;oj.prototype._isValid=
()=>!0;class xk extends oj{constructor(M){super(M);this._values=new Fg(new this.ArrayType(0),this.stride)}setValue(M,r){const ra=this._values;return ra.reserve(M-ra.length+1),super.setValue(M,r)}}class Uk extends oj{constructor(M){super(M);this._pendingLength=0;this._offsets=new Yk}setValue(M,r){const ra=this._pending||(this._pending=new Map),jb=ra.get(M);jb&&(this._pendingLength-=jb.length);this._pendingLength+=r.length;ra.set(M,r)}setValid(M,r){return!!super.setValid(M,r)||((this._pending||(this._pending=
new Map)).set(M,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const M=this._pending,r=this._pendingLength;return this._pendingLength=0,this._pending=void 0,M&&0<M.size&&this._flushPending(M,r),this}}class ql extends oj{constructor(M){super(M);this._values=new Vi}setValue(M,r){this._values.set(M,+r)}}class rl extends oj{setValue(M,r){}setValid(M,r){return this.length=
Math.max(M+1,this.length),r}}class Jk extends xk{}class Kk extends Jk{}class Yl extends Jk{}class dk extends xk{}class vh extends oj{constructor({type:M,nullValues:r,dictionaryHashFunction:ra}){super({type:new ci(M.dictionary,M.indices,M.id,M.isOrdered)});this._nulls=null;this._dictionaryOffset=0;this._keysToIndices=Object.create(null);this.indices=oj.new({type:this.type.indices,nullValues:r});this.dictionary=oj.new({type:this.type.dictionary,nullValues:null});"function"==typeof ra&&(this.valueToKey=
ra)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(M){return this.indices.isValid(M)}setValid(M,r){const ra=this.indices;return r=ra.setValid(M,r),
this.length=ra.length,r}setValue(M,r){const ra=this._keysToIndices,jb=this.valueToKey(r);let Lb=ra[jb];return void 0===Lb&&(ra[jb]=Lb=this._dictionaryOffset+this.dictionary.append(r).length-1),this.indices.setValue(M,Lb)}flush(){var M=this.type;const r=this._dictionary,ra=this.dictionary.toVector();M=this.indices.flush().clone(M);return M.dictionary=r?r.concat(ra):ra,this.finished||(this._dictionaryOffset+=ra.length),this._dictionary=M.dictionary,this.clear(),M}finish(){return this.indices.finish(),
this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(M){return"string"==typeof M?M:""+M}}class Sl extends xk{}const Kh=new Float64Array(1),og=new Uint32Array(Kh.buffer);class zj extends xk{}class gk extends zj{setValue(M,r){this._values.set(M,ab(r))}}class qk extends zj{setValue(M,r){this._values.set(M,r)}}class al extends zj{setValue(M,r){this._values.set(M,r)}}
const Tk=Symbol.for("isArrowBigNum");let uk,Kl;db.prototype[Tk]=!0;db.prototype.toJSON=function(){return`"${uk(this)}"`};db.prototype.valueOf=function(){return Va(this)};db.prototype.toString=function(){return uk(this)};db.prototype[Symbol.toPrimitive]=function(M="default"){switch(M){case "number":return Va(this);case "default":return Kl(this)}return uk(this)};Object.setPrototypeOf(ub.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(pb.prototype,Object.create(Uint32Array.prototype));
Object.setPrototypeOf(Ya.prototype,Object.create(Uint32Array.prototype));Object.assign(ub.prototype,db.prototype,{constructor:ub,signed:!0,TypedArray:Int32Array,BigIntArray:Zg});Object.assign(pb.prototype,db.prototype,{constructor:pb,signed:!1,TypedArray:Uint32Array,BigIntArray:oi});Object.assign(Ya.prototype,db.prototype,{constructor:Ya,signed:!0,TypedArray:Uint32Array,BigIntArray:oi});eh?(Kl=M=>8===M.byteLength?(new M.BigIntArray(M.buffer,M.byteOffset,1))[0]:Pa(M),uk=M=>8===M.byteLength?""+(new M.BigIntArray(M.buffer,
M.byteOffset,1))[0]:Pa(M)):(uk=Pa,Kl=uk);class Rb{static new(M,r){switch(r){case !0:return new ub(M);case !1:return new pb(M)}switch(M.constructor){case Int8Array:case Int16Array:case Int32Array:case Zg:return new ub(M)}return 16===M.byteLength?new Ya(M):new pb(M)}static signed(M){return new ub(M)}static unsigned(M){return new pb(M)}static decimal(M){return new Ya(M)}constructor(M,r){return Rb.new(M,r)}}class Bc extends xk{setValue(M,r){this._values.set(M,r)}}class gd extends Bc{}class zd extends Bc{}
class ce extends Bc{}class ke extends Bc{constructor(M){M.nullValues&&(M.nullValues=M.nullValues.map(Vc));super(M);this._values=new jl(new Int32Array(0),2)}get values64(){return this._values.buffer64}isValid(M){return super.isValid(Vc(M))}}class De extends Bc{}class Fb extends Bc{}class dc extends Bc{}class Dc extends Bc{constructor(M){M.nullValues&&(M.nullValues=M.nullValues.map(Vc));super(M);this._values=new jl(new Uint32Array(0),2)}get values64(){return this._values.buffer64}isValid(M){return super.isValid(Vc(M))}}
const Vc=(Ld={BigIntArray:Zg},M=>(ArrayBuffer.isView(M)&&(Ld.buffer=M.buffer,Ld.byteOffset=M.byteOffset,Ld.byteLength=M.byteLength,M=Kl(Ld),Ld.buffer=null),M));var Ld;class ge extends xk{}class te extends ge{}class Te extends ge{}class pe extends ge{}class Qf extends ge{}class jf extends xk{}class Dg extends jf{}class gg extends jf{}class Eg extends jf{}class Ph extends jf{}class Sg extends xk{}class Ei extends Sg{}class Vj extends Sg{}class Mh extends Uk{constructor(M){super(M);this._values=new Ji(new Uint8Array(0))}get byteLength(){let M=
this._pendingLength+4*this.length;return this._offsets&&(M+=this._offsets.byteLength),this._values&&(M+=this._values.byteLength),this._nulls&&(M+=this._nulls.byteLength),M}setValue(M,r){return super.setValue(M,K(Uint8Array,r))}_flushPending(M,r){const ra=this._offsets;r=this._values.reserve(r).buffer;let jb,Lb=0,pc=0,Yc=0;for([Lb,jb]of M)void 0===jb?ra.set(Lb,0):(pc=jb.length,r.set(jb,Yc),ra.set(Lb,pc),Yc+=pc)}}class $h extends Uk{constructor(M){super(M);this._values=new Ji(new Uint8Array(0))}get byteLength(){let M=
this._pendingLength+4*this.length;return this._offsets&&(M+=this._offsets.byteLength),this._values&&(M+=this._values.byteLength),this._nulls&&(M+=this._nulls.byteLength),M}setValue(M,r){return super.setValue(M,tf.encode(r))}_flushPending(M,r){}}$h.prototype._flushPending=Mh.prototype._flushPending;class ll{get length(){return this._values.length}get(M){return this._values[M]}clear(){return this._values=null,this}bind(M){return M instanceof qb?M:(this._values=M,this)}}class sh{constructor(M=[],r,ra){this.fields=
M||[];this.metadata=r||new Map;ra||(ra=Ca(M));this.dictionaries=ra}get [Symbol.toStringTag](){return"Schema"}toString(){return`Schema<{ ${this.fields.map((M,r)=>`${r}: ${M}`).join(", ")} }>`}select(...M){const r=M.reduce((ra,jb)=>(ra[jb]=!0,ra),Object.create(null));return new sh(this.fields.filter(ra=>r[ra.name]),this.metadata)}selectAt(...M){return new sh(M.map(r=>this.fields[r]).filter(Boolean),this.metadata)}assign(...M){var r=M[0]instanceof sh?M[0]:Array.isArray(M[0])?new sh(M[0]):new sh(M);const ra=
[...this.fields];M=Ha(Ha(new Map,this.metadata),r.metadata);r=r.fields.filter(Lb=>{const pc=ra.findIndex(Yc=>Yc.name===Lb.name);return!~pc||(ra[pc]=Lb.clone({metadata:Ha(Ha(new Map,ra[pc].metadata),Lb.metadata)}))&&!1});const jb=Ca(r,new Map);return new sh([...ra,...r],M,new Map([...this.dictionaries,...jb]))}}class Zh{constructor(M,r,ra=!1,jb){this.name=M;this.type=r;this.nullable=ra;this.metadata=jb||new Map}static new(...M){let [r,ra,jb,Lb]=M;return M[0]&&"object"==typeof M[0]&&({name:r}=M[0],
void 0===ra&&(ra=M[0].type),void 0===jb&&(jb=M[0].nullable),void 0===Lb&&(Lb=M[0].metadata)),new Zh(""+r,ra,jb,Lb)}get typeId(){return this.type.typeId}get [Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...M){let [r,ra,jb,Lb]=M;return M[0]&&"object"==typeof M[0]?{name:r=this.name,type:ra=this.type,nullable:jb=this.nullable,metadata:Lb=this.metadata}=M[0]:[r=this.name,ra=this.type,jb=this.nullable,Lb=this.metadata]=M,Zh.new(r,ra,jb,Lb)}}sh.prototype.fields=
null;sh.prototype.metadata=null;sh.prototype.dictionaries=null;Zh.prototype.type=null;Zh.prototype.name=null;Zh.prototype.nullable=null;Zh.prototype.metadata=null;class Uj extends Uk{constructor(M){super(M);this._run=new ll;this._offsets=new Yk}addChild(M,r="0"){if(0<this.numChildren)throw Error("ListBuilder can only have one child.");return this.children[this.numChildren]=M,this.type=new Aj(new Zh(r,M.type,!0)),this.numChildren-1}clear(){return this._run.clear(),super.clear()}_flushPending(M){const r=
this._run,ra=this._offsets,jb=this._setValue;let Lb,pc=0;for([pc,Lb]of M)void 0===Lb?ra.set(pc,0):(ra.set(pc,Lb.length),jb(this,pc,r.bind(Lb)))}}class Rj extends oj{constructor(){super(...arguments);this._run=new ll}setValue(M,r){super.setValue(M,this._run.bind(r))}addChild(M,r="0"){if(0<this.numChildren)throw Error("FixedSizeListBuilder can only have one child.");const ra=this.children.push(M);return this.type=new Gj(this.type.listSize,new Zh(r,M.type,!0)),ra}clear(){return this._run.clear(),super.clear()}}
class Mi extends Uk{set(M,r){return super.set(M,r)}setValue(M,r){r=r instanceof Map?r:new Map(Object.entries(r));const ra=this._pending||(this._pending=new Map),jb=ra.get(M);jb&&(this._pendingLength-=jb.size);this._pendingLength+=r.size;ra.set(M,r)}addChild(M,r=""+this.numChildren){if(0<this.numChildren)throw Error("ListBuilder can only have one child.");return this.children[this.numChildren]=M,this.type=new Ik(new Zh(r,M.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(M){const r=
this._offsets,ra=this._setValue;M.forEach((jb,Lb)=>{void 0===jb?r.set(Lb,0):(r.set(Lb,jb.size),ra(this,Lb,jb))})}}class si extends oj{addChild(M,r=""+this.numChildren){const ra=this.children.push(M);return this.type=new Hj([...this.type.children,new Zh(r,M.type,!0)]),ra}}class ai extends oj{constructor(M){super(M);this._typeIds=new Fg(new Int8Array(0),1);"function"==typeof M.valueToChildTypeId&&(this._valueToChildTypeId=M.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(M,
r){return this.set(this.length,M,r)}set(M,r,ra){return void 0===ra&&(ra=this._valueToChildTypeId(this,r,M)),this.setValid(M,this.isValid(r))&&this.setValue(M,r,ra),this}setValue(M,r,ra){this._typeIds.set(M,ra);super.setValue(M,r)}addChild(M,r=""+this.children.length){const ra=this.children.push(M),{type:{children:jb,mode:Lb,typeIds:pc}}=this;M=[...jb,new Zh(r,M.type)];return this.type=new ck(Lb,[...pc,ra],M),ra}_valueToChildTypeId(M,r,ra){throw Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.");
}}class Wj extends ai{}class Jj extends ai{constructor(M){super(M);this._offsets=new Fg(new Int32Array(0))}setValue(M,r,ra){return this._offsets.set(M,this.getChildAt(this.type.typeIdToChildIndex[ra]).length),super.setValue(M,r,ra)}}class xh{visitMany(M,...r){return M.map((ra,jb)=>this.visit(ra,...r.map(Lb=>Lb[jb])))}visit(...M){return this.getVisitFn(M[0],!1).apply(this,M)}getVisitFn(M,r=!0){return function(ra,jb,Lb=!0){let pc=null,Yc=Xd.NONE;jb instanceof Ng||jb instanceof qb?Yc=Aa(jb.type):jb instanceof
eg?Yc=Aa(jb):"number"!=typeof(Yc=jb)&&(Yc=Xd[jb]);switch(Yc){case Xd.Null:pc=ra.visitNull;break;case Xd.Bool:pc=ra.visitBool;break;case Xd.Int:pc=ra.visitInt;break;case Xd.Int8:pc=ra.visitInt8||ra.visitInt;break;case Xd.Int16:pc=ra.visitInt16||ra.visitInt;break;case Xd.Int32:pc=ra.visitInt32||ra.visitInt;break;case Xd.Int64:pc=ra.visitInt64||ra.visitInt;break;case Xd.Uint8:pc=ra.visitUint8||ra.visitInt;break;case Xd.Uint16:pc=ra.visitUint16||ra.visitInt;break;case Xd.Uint32:pc=ra.visitUint32||ra.visitInt;
break;case Xd.Uint64:pc=ra.visitUint64||ra.visitInt;break;case Xd.Float:pc=ra.visitFloat;break;case Xd.Float16:pc=ra.visitFloat16||ra.visitFloat;break;case Xd.Float32:pc=ra.visitFloat32||ra.visitFloat;break;case Xd.Float64:pc=ra.visitFloat64||ra.visitFloat;break;case Xd.Utf8:pc=ra.visitUtf8;break;case Xd.Binary:pc=ra.visitBinary;break;case Xd.FixedSizeBinary:pc=ra.visitFixedSizeBinary;break;case Xd.Date:pc=ra.visitDate;break;case Xd.DateDay:pc=ra.visitDateDay||ra.visitDate;break;case Xd.DateMillisecond:pc=
ra.visitDateMillisecond||ra.visitDate;break;case Xd.Timestamp:pc=ra.visitTimestamp;break;case Xd.TimestampSecond:pc=ra.visitTimestampSecond||ra.visitTimestamp;break;case Xd.TimestampMillisecond:pc=ra.visitTimestampMillisecond||ra.visitTimestamp;break;case Xd.TimestampMicrosecond:pc=ra.visitTimestampMicrosecond||ra.visitTimestamp;break;case Xd.TimestampNanosecond:pc=ra.visitTimestampNanosecond||ra.visitTimestamp;break;case Xd.Time:pc=ra.visitTime;break;case Xd.TimeSecond:pc=ra.visitTimeSecond||ra.visitTime;
break;case Xd.TimeMillisecond:pc=ra.visitTimeMillisecond||ra.visitTime;break;case Xd.TimeMicrosecond:pc=ra.visitTimeMicrosecond||ra.visitTime;break;case Xd.TimeNanosecond:pc=ra.visitTimeNanosecond||ra.visitTime;break;case Xd.Decimal:pc=ra.visitDecimal;break;case Xd.List:pc=ra.visitList;break;case Xd.Struct:pc=ra.visitStruct;break;case Xd.Union:pc=ra.visitUnion;break;case Xd.DenseUnion:pc=ra.visitDenseUnion||ra.visitUnion;break;case Xd.SparseUnion:pc=ra.visitSparseUnion||ra.visitUnion;break;case Xd.Dictionary:pc=
ra.visitDictionary;break;case Xd.Interval:pc=ra.visitInterval;break;case Xd.IntervalDayTime:pc=ra.visitIntervalDayTime||ra.visitInterval;break;case Xd.IntervalYearMonth:pc=ra.visitIntervalYearMonth||ra.visitInterval;break;case Xd.FixedSizeList:pc=ra.visitFixedSizeList;break;case Xd.Map:pc=ra.visitMap}if("function"==typeof pc)return pc;if(!Lb)return()=>null;throw Error(`Unrecognized type '${Xd[Yc]}'`);}(this,M,r)}visitNull(M,...r){return null}visitBool(M,...r){return null}visitInt(M,...r){return null}visitFloat(M,
...r){return null}visitUtf8(M,...r){return null}visitBinary(M,...r){return null}visitFixedSizeBinary(M,...r){return null}visitDate(M,...r){return null}visitTimestamp(M,...r){return null}visitTime(M,...r){return null}visitDecimal(M,...r){return null}visitList(M,...r){return null}visitStruct(M,...r){return null}visitUnion(M,...r){return null}visitDictionary(M,...r){return null}visitInterval(M,...r){return null}visitFixedSizeList(M,...r){return null}visitMap(M,...r){return null}}xh.prototype.visitInt8=
null;xh.prototype.visitInt16=null;xh.prototype.visitInt32=null;xh.prototype.visitInt64=null;xh.prototype.visitUint8=null;xh.prototype.visitUint16=null;xh.prototype.visitUint32=null;xh.prototype.visitUint64=null;xh.prototype.visitFloat16=null;xh.prototype.visitFloat32=null;xh.prototype.visitFloat64=null;xh.prototype.visitDateDay=null;xh.prototype.visitDateMillisecond=null;xh.prototype.visitTimestampSecond=null;xh.prototype.visitTimestampMillisecond=null;xh.prototype.visitTimestampMicrosecond=null;
xh.prototype.visitTimestampNanosecond=null;xh.prototype.visitTimeSecond=null;xh.prototype.visitTimeMillisecond=null;xh.prototype.visitTimeMicrosecond=null;xh.prototype.visitTimeNanosecond=null;xh.prototype.visitDenseUnion=null;xh.prototype.visitSparseUnion=null;xh.prototype.visitIntervalDayTime=null;xh.prototype.visitIntervalYearMonth=null;class sg extends xh{}const Bh=(M,r,ra,jb)=>{const {[ra]:Lb,[ra+1]:pc}=r;null!=Lb&&null!=pc&&M.set(jb.subarray(0,pc-Lb),Lb)},ti=({values:M},r,ra)=>{M[r]=ra.valueOf()/
864E5|0},Zi=({values:M},r,ra)=>{r*=2;ra=ra.valueOf();M[r]=ra%4294967296|0;M[r+1]=ra/4294967296|0},xj=({stride:M,values:r},ra,jb)=>{r[M*ra]=jb},Wl=({stride:M,values:r},ra,jb)=>{r[M*ra]=ab(jb)},Sk=(M,r,ra)=>{switch(typeof ra){case "bigint":M.values64[r]=ra;break;case "number":M.values[r*M.stride]=ra;break;default:const {stride:jb,ArrayType:Lb}=M;ra=K(Lb,ra);M.values.set(ra.subarray(0,jb),jb*r)}},Nj=({values:M},r,ra)=>{r*=2;ra/=1E3;M[r]=ra%4294967296|0;M[r+1]=ra/4294967296|0},Pk=({values:M},r,ra)=>{r*=
2;M[r]=ra%4294967296|0;M[r+1]=ra/4294967296|0},mk=({values:M},r,ra)=>{r*=2;M[r]=1E3*ra%4294967296|0;M[r+1]=1E3*ra/4294967296|0},Ni=({values:M},r,ra)=>{r*=2;M[r]=1E6*ra%4294967296|0;M[r+1]=1E6*ra/4294967296|0},vl=({values:M,stride:r},ra,jb)=>{M[r*ra]=jb},Bl=({values:M,stride:r},ra,jb)=>{M[r*ra]=jb},Qj=({values:M},r,ra)=>{M.set(ra.subarray(0,2),2*r)},Rl=({values:M},r,ra)=>{M.set(ra.subarray(0,2),2*r)},cm=(M,r,ra)=>{const jb=M.getChildAt(M.typeIdToChildIndex[M.typeIds[r]]);jb&&jb.set(M.valueOffsets[r],
ra)},ii=(M,r,ra)=>{(M=M.getChildAt(M.typeIdToChildIndex[M.typeIds[r]]))&&M.set(r,ra)},Cl=({values:M},r,ra)=>{M.set(ra.subarray(0,2),2*r)},Lk=({values:M},r,ra)=>{M[r]=12*ra[0]+ra[1]%12};sg.prototype.visitBool=({offset:M,values:r},ra,jb)=>{M+=ra;jb?r[M>>3]|=1<<M%8:r[M>>3]&=~(1<<M%8)};sg.prototype.visitInt=(M,r,ra)=>{64>M.type.bitWidth?xj(M,r,ra):Sk(M,r,ra)};sg.prototype.visitInt8=xj;sg.prototype.visitInt16=xj;sg.prototype.visitInt32=xj;sg.prototype.visitInt64=Sk;sg.prototype.visitUint8=xj;sg.prototype.visitUint16=
xj;sg.prototype.visitUint32=xj;sg.prototype.visitUint64=Sk;sg.prototype.visitFloat=(M,r,ra)=>{M.type.precision!==Rd.HALF?xj(M,r,ra):Wl(M,r,ra)};sg.prototype.visitFloat16=Wl;sg.prototype.visitFloat32=xj;sg.prototype.visitFloat64=xj;sg.prototype.visitUtf8=({values:M,valueOffsets:r},ra,jb)=>{Bh(M,r,ra,tf.encode(jb))};sg.prototype.visitBinary=({values:M,valueOffsets:r},ra,jb)=>Bh(M,r,ra,jb);sg.prototype.visitFixedSizeBinary=({stride:M,values:r},ra,jb)=>{r.set(jb.subarray(0,M),M*ra)};sg.prototype.visitDate=
(M,r,ra)=>{M.type.unit===Md.DAY?ti(M,r,ra):Zi(M,r,ra)};sg.prototype.visitDateDay=ti;sg.prototype.visitDateMillisecond=Zi;sg.prototype.visitTimestamp=(M,r,ra)=>{switch(M.type.unit){case nd.SECOND:return Nj(M,r,ra);case nd.MILLISECOND:return Pk(M,r,ra);case nd.MICROSECOND:return mk(M,r,ra);case nd.NANOSECOND:return Ni(M,r,ra)}};sg.prototype.visitTimestampSecond=Nj;sg.prototype.visitTimestampMillisecond=Pk;sg.prototype.visitTimestampMicrosecond=mk;sg.prototype.visitTimestampNanosecond=Ni;sg.prototype.visitTime=
(M,r,ra)=>{switch(M.type.unit){case nd.SECOND:return vl(M,r,ra);case nd.MILLISECOND:return Bl(M,r,ra);case nd.MICROSECOND:return Qj(M,r,ra);case nd.NANOSECOND:return Rl(M,r,ra)}};sg.prototype.visitTimeSecond=vl;sg.prototype.visitTimeMillisecond=Bl;sg.prototype.visitTimeMicrosecond=Qj;sg.prototype.visitTimeNanosecond=Rl;sg.prototype.visitDecimal=({values:M},r,ra)=>{M.set(ra.subarray(0,4),4*r)};sg.prototype.visitList=(M,r,ra)=>{const jb=M.getChildAt(0);M=M.valueOffsets;for(let Lb=-1,pc=M[r],Yc=M[r+
1];pc<Yc;)jb.set(pc++,ra.get(++Lb))};sg.prototype.visitStruct=(M,r,ra)=>{const jb=ra instanceof Map?(Lb=r,pc=ra,(Yc,Hd,Kd)=>Yc&&Yc.set(Lb,pc.get(Hd.name))):ra instanceof qb?((Yc,Hd)=>(Kd,ze,bf)=>Kd&&Kd.set(Yc,Hd.get(bf)))(r,ra):Array.isArray(ra)?((Yc,Hd)=>(Kd,ze,bf)=>Kd&&Kd.set(Yc,Hd[bf]))(r,ra):((Yc,Hd)=>(Kd,ze,bf)=>Kd&&Kd.set(Yc,Hd[ze.name]))(r,ra);var Lb,pc;M.type.children.forEach((Yc,Hd)=>jb(M.getChildAt(Hd),Yc,Hd))};sg.prototype.visitUnion=(M,r,ra)=>{M.type.mode===ad.Dense?cm(M,r,ra):ii(M,r,
ra)};sg.prototype.visitDenseUnion=cm;sg.prototype.visitSparseUnion=ii;sg.prototype.visitDictionary=(M,r,ra)=>{r=M.getKey(r);null!==r&&M.setValue(r,ra)};sg.prototype.visitInterval=(M,r,ra)=>{M.type.unit===ee.DAY_TIME?Cl(M,r,ra):Lk(M,r,ra)};sg.prototype.visitIntervalDayTime=Cl;sg.prototype.visitIntervalYearMonth=Lk;sg.prototype.visitFixedSizeList=(M,r,ra)=>{const jb=M.getChildAt(0);({stride:M}=M);for(let Lb=-1,pc=r*M;++Lb<M;)jb.set(pc+Lb,ra.get(Lb))};sg.prototype.visitMap=(M,r,ra)=>{const jb=M.getChildAt(0);
M=M.valueOffsets;ra=ra instanceof Map?[...ra]:Object.entries(ra);for(let Lb=-1,pc=M[r],Yc=M[r+1];pc<Yc;)jb.set(pc++,ra[++Lb])};const uj=new sg,ml=new class extends xh{visitNull(){return rl}visitBool(){return ql}visitInt(){return Bc}visitInt8(){return gd}visitInt16(){return zd}visitInt32(){return ce}visitInt64(){return ke}visitUint8(){return De}visitUint16(){return Fb}visitUint32(){return dc}visitUint64(){return Dc}visitFloat(){return zj}visitFloat16(){return gk}visitFloat32(){return qk}visitFloat64(){return al}visitUtf8(){return $h}visitBinary(){return Mh}visitFixedSizeBinary(){return Sl}visitDate(){return Jk}visitDateDay(){return Kk}visitDateMillisecond(){return Yl}visitTimestamp(){return jf}visitTimestampSecond(){return Dg}visitTimestampMillisecond(){return gg}visitTimestampMicrosecond(){return Eg}visitTimestampNanosecond(){return Ph}visitTime(){return ge}visitTimeSecond(){return te}visitTimeMillisecond(){return Te}visitTimeMicrosecond(){return pe}visitTimeNanosecond(){return Qf}visitDecimal(){return dk}visitList(){return Uj}visitStruct(){return si}visitUnion(){return ai}visitDenseUnion(){return Jj}visitSparseUnion(){return Wj}visitDictionary(){return vh}visitInterval(){return Sg}visitIntervalDayTime(){return Ei}visitIntervalYearMonth(){return Vj}visitFixedSizeList(){return Rj}visitMap(){return Mi}};
oj.new=function ra(r){const jb=r.type,Lb=new (ml.getVisitFn(jb)())(r);if(jb.children&&0<jb.children.length){const pc=r.children||[],Yc={nullValues:r.nullValues},Hd=Array.isArray(pc)?(Kd,ze)=>pc[ze]||Yc:({name:Kd})=>pc[Kd]||Yc;jb.children.forEach((Kd,ze)=>{const {type:bf}=Kd;Kd=Hd(Kd,ze);Lb.children.push(ra(Object.assign(Object.assign({},Kd),{type:bf})))})}return Lb};Object.keys(Xd).map(r=>Xd[r]).filter(r=>"number"==typeof r&&r!==Xd.NONE).forEach(r=>{ml.visit(r).prototype._setValue=uj.getVisitFn(r)});
$h.prototype._setValue=uj.visitBinary;class Tj{constructor(){this.bb=null;this.bb_pos=0}__init(r,ra){return this.bb_pos=r,this.bb=ra,this}static getRootAsFooter(r,ra){return(ra||new Tj).__init(r.readInt32(r.position())+r.position(),r)}static getSizePrefixedRootAsFooter(r,ra){return r.setPosition(r.position()+Cd.SIZE_PREFIX_LENGTH),(ra||new Tj).__init(r.readInt32(r.position())+r.position(),r)}version(){const r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt16(this.bb_pos+r):Qb.V1}schema(r){const ra=
this.bb.__offset(this.bb_pos,6);return ra?(r||new nh).__init(this.bb.__indirect(this.bb_pos+ra),this.bb):null}dictionaries(r,ra){const jb=this.bb.__offset(this.bb_pos,8);return jb?(ra||new Ek).__init(this.bb.__vector(this.bb_pos+jb)+24*r,this.bb):null}dictionariesLength(){const r=this.bb.__offset(this.bb_pos,8);return r?this.bb.__vector_len(this.bb_pos+r):0}recordBatches(r,ra){const jb=this.bb.__offset(this.bb_pos,10);return jb?(ra||new Ek).__init(this.bb.__vector(this.bb_pos+jb)+24*r,this.bb):null}recordBatchesLength(){const r=
this.bb.__offset(this.bb_pos,10);return r?this.bb.__vector_len(this.bb_pos+r):0}customMetadata(r,ra){const jb=this.bb.__offset(this.bb_pos,12);return jb?(ra||new Nh).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+jb)+4*r),this.bb):null}customMetadataLength(){const r=this.bb.__offset(this.bb_pos,12);return r?this.bb.__vector_len(this.bb_pos+r):0}static startFooter(r){r.startObject(5)}static addVersion(r,ra){r.addFieldInt16(0,ra,Qb.V1)}static addSchema(r,ra){r.addFieldOffset(1,ra,0)}static addDictionaries(r,
ra){r.addFieldOffset(2,ra,0)}static startDictionariesVector(r,ra){r.startVector(24,ra,8)}static addRecordBatches(r,ra){r.addFieldOffset(3,ra,0)}static startRecordBatchesVector(r,ra){r.startVector(24,ra,8)}static addCustomMetadata(r,ra){r.addFieldOffset(4,ra,0)}static createCustomMetadataVector(r,ra){r.startVector(4,ra.length,4);for(let jb=ra.length-1;0<=jb;jb--)r.addOffset(ra[jb]);return r.endVector()}static startCustomMetadataVector(r,ra){r.startVector(4,ra,4)}static endFooter(r){return r.endObject()}static finishFooterBuffer(r,
ra){r.finish(ra)}static finishSizePrefixedFooterBuffer(r,ra){r.finish(ra,void 0,!0)}static createFooter(r,ra,jb,Lb,pc,Yc){return Tj.startFooter(r),Tj.addVersion(r,ra),Tj.addSchema(r,jb),Tj.addDictionaries(r,Lb),Tj.addRecordBatches(r,pc),Tj.addCustomMetadata(r,Yc),Tj.endFooter(r)}}class Ek{constructor(){this.bb=null;this.bb_pos=0}__init(r,ra){return this.bb_pos=r,this.bb=ra,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+
16)}static createBlock(r,ra,jb,Lb){return r.prep(8,24),r.writeInt64(Lb),r.pad(4),r.writeInt32(jb),r.writeInt64(ra),r.offset()}}var Mk=Cd.Long,Nk=Cd.Builder,nl=Cd.ByteBuffer;class zl{constructor(r,ra=Qb.V4,jb,Lb){this.schema=r;this.version=ra;jb&&(this._recordBatches=jb);Lb&&(this._dictionaryBatches=Lb)}static decode(r){r=new nl(K(Uint8Array,r));r=Tj.getRootAsFooter(r);const ra=sh.decode(r.schema());return new sb(ra,r)}static encode(r){const ra=new Nk,jb=sh.encode(ra,r.schema);Tj.startRecordBatchesVector(ra,
r.numRecordBatches);[...r.recordBatches()].slice().reverse().forEach(pc=>Yb.encode(ra,pc));const Lb=ra.endVector();Tj.startDictionariesVector(ra,r.numDictionaries);[...r.dictionaryBatches()].slice().reverse().forEach(pc=>Yb.encode(ra,pc));r=ra.endVector();return Tj.startFooter(ra),Tj.addSchema(ra,jb),Tj.addVersion(ra,Qb.V4),Tj.addRecordBatches(ra,Lb),Tj.addDictionaries(ra,r),Tj.finishFooterBuffer(ra,Tj.endFooter(ra)),ra.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let r,
ra=-1,jb=this.numRecordBatches;++ra<jb;)(r=this.getRecordBatch(ra))&&(yield r)}*dictionaryBatches(){for(let r,ra=-1,jb=this.numDictionaries;++ra<jb;)(r=this.getDictionaryBatch(ra))&&(yield r)}getRecordBatch(r){return 0<=r&&r<this.numRecordBatches&&this._recordBatches[r]||null}getDictionaryBatch(r){return 0<=r&&r<this.numDictionaries&&this._dictionaryBatches[r]||null}}class sb extends zl{constructor(r,ra){super(r,ra.version());this._footer=ra}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(r){return 0<=
r&&r<this.numRecordBatches&&(r=this._footer.recordBatches(r))?Yb.decode(r):null}getDictionaryBatch(r){return 0<=r&&r<this.numDictionaries&&(r=this._footer.dictionaries(r))?Yb.decode(r):null}}class Yb{constructor(r,ra,jb){this.metaDataLength=r;this.offset="number"==typeof jb?jb:jb.low;this.bodyLength="number"==typeof ra?ra:ra.low}static decode(r){return new Yb(r.metaDataLength(),r.bodyLength(),r.offset())}static encode(r,ra){const {metaDataLength:jb}=ra,Lb=new Mk(ra.offset,0);ra=new Mk(ra.bodyLength,
0);return Ek.createBlock(r,Lb,jb,ra)}}class ic extends Pg{write(r){if(0<(r=K(Uint8Array,r)).byteLength)return super.write(r)}toString(r=!1){return r?sf.decode(this.toUint8Array(!0)):this.toUint8Array(!1).then(Jf)}toUint8Array(r=!1){return r?J(this._values)[0]:(()=>I(this,void 0,void 0,function*(){var ra;const jb=[];let Lb=0;try{for(var pc,Yc=X(this);!(pc=yield Yc.next()).done;){const Kd=pc.value;jb.push(Kd);Lb+=Kd.byteLength}}catch(Kd){var Hd={error:Kd}}finally{try{pc&&!pc.done&&(ra=Yc.return)&&(yield ra.call(Yc))}finally{if(Hd)throw Hd.error;
}}return J(jb,Lb)[0]}))()}}class Oc{constructor(r){r&&(this.source=new Od(qc.fromIterable(r)))}[Symbol.iterator](){return this}next(r){return this.source.next(r)}throw(r){return this.source.throw(r)}return(r){return this.source.return(r)}peek(r){return this.source.peek(r)}read(r){return this.source.read(r)}}class Id{constructor(r){r instanceof Id?this.source=r.source:r instanceof ic?this.source=new Jd(qc.fromAsyncIterable(r)):Xa(r)?this.source=new Jd(qc.fromNodeStream(r)):v(r)?this.source=new Jd(qc.fromDOMStream(r)):
null!=r&&Object(r)===r&&v(r.body)?this.source=new Jd(qc.fromDOMStream(r.body)):wh(r)?this.source=new Jd(qc.fromIterable(r)):(Yh(r)||Wc(r))&&(this.source=new Jd(qc.fromAsyncIterable(r)))}[Symbol.asyncIterator](){return this}next(r){return this.source.next(r)}throw(r){return this.source.throw(r)}return(r){return this.source.return(r)}get closed(){return this.source.closed}cancel(r){return this.source.cancel(r)}peek(r){return this.source.peek(r)}read(r){return this.source.read(r)}}class Od{constructor(r){this.source=
r}cancel(r){this.return(r)}peek(r){return this.next(r,"peek").value}read(r){return this.next(r,"read").value}next(r,ra="read"){return this.source.next({cmd:ra,size:r})}throw(r){return Object.create(this.source.throw&&this.source.throw(r)||lf)}return(r){return Object.create(this.source.return&&this.source.return(r)||lf)}}class Jd{constructor(r){this.source=r;this._closedPromise=new Promise(ra=>this._closedPromiseResolve=ra)}cancel(r){return I(this,void 0,void 0,function*(){yield this.return(r)})}get closed(){return this._closedPromise}read(r){return I(this,
void 0,void 0,function*(){return(yield this.next(r,"read")).value})}peek(r){return I(this,void 0,void 0,function*(){return(yield this.next(r,"peek")).value})}next(r,ra="read"){return I(this,void 0,void 0,function*(){return yield this.source.next({cmd:ra,size:r})})}throw(r){return I(this,void 0,void 0,function*(){const ra=this.source.throw&&(yield this.source.throw(r))||lf;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(ra)})}return(r){return I(this,
void 0,void 0,function*(){const ra=this.source.return&&(yield this.source.return(r))||lf;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(ra)})}}class fe extends Oc{constructor(r,ra){super();this.position=0;this.buffer=K(Uint8Array,r);this.size=void 0===ra?this.buffer.byteLength:ra}readInt32(r){const {buffer:ra,byteOffset:jb}=this.readAt(r,4);return(new DataView(ra,jb)).getInt32(0,!0)}seek(r){return this.position=Math.min(r,this.size),
r<this.size}read(r){const {buffer:ra,size:jb,position:Lb}=this;return ra&&Lb<jb?("number"!=typeof r&&(r=1/0),this.position=Math.min(jb,Lb+Math.min(jb-Lb,r)),ra.subarray(Lb,this.position)):null}readAt(r,ra){const jb=this.buffer,Lb=Math.min(this.size,r+ra);return jb?jb.subarray(r,Lb):new Uint8Array(ra)}close(){this.buffer&&(this.buffer=null)}throw(r){return this.close(),{done:!0,value:r}}return(r){return this.close(),{done:!0,value:r}}}class He extends Id{constructor(r,ra){super();this.position=0;this._handle=
r;"number"==typeof ra?this.size=ra:this._pending=(()=>I(this,void 0,void 0,function*(){this.size=(yield r.stat()).size;delete this._pending}))()}readInt32(r){return I(this,void 0,void 0,function*(){const {buffer:ra,byteOffset:jb}=yield this.readAt(r,4);return(new DataView(ra,jb)).getInt32(0,!0)})}seek(r){return I(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(r,this.size),r<this.size})}read(r){return I(this,void 0,void 0,function*(){this._pending&&
(yield this._pending);const {_handle:ra,size:jb,position:Lb}=this;if(ra&&Lb<jb){"number"!=typeof r&&(r=1/0);let pc=Lb,Yc=0,Hd=0;const Kd=Math.min(jb,pc+Math.min(jb-pc,r)),ze=new Uint8Array(Math.max(0,(this.position=Kd)-pc));for(;(pc+=Hd)<Kd&&(Yc+=Hd)<ze.byteLength;)({bytesRead:Hd}=yield ra.read(ze,Yc,ze.byteLength-Yc,pc));return ze}return null})}readAt(r,ra){return I(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const {_handle:jb,size:Lb}=this;if(jb&&r+ra<Lb){const pc=new Uint8Array(Math.min(Lb,
r+ra)-r);return(yield jb.read(pc,0,ra,r)).buffer}return new Uint8Array(ra)})}close(){return I(this,void 0,void 0,function*(){const r=this._handle;this._handle=null;r&&(yield r.close())})}throw(r){return I(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:r}})}return(r){return I(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:r}})}}const ef=[1,10,100,1E3,1E4,1E5,1E6,1E7,1E8];class Mf{constructor(r){this.buffer=r}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(r){const ra=
new Uint32Array([this.buffer[1]>>>16,65535&this.buffer[1],this.buffer[0]>>>16,65535&this.buffer[0]]);r=new Uint32Array([r.buffer[1]>>>16,65535&r.buffer[1],r.buffer[0]>>>16,65535&r.buffer[0]]);let jb=ra[3]*r[3];this.buffer[0]=65535&jb;let Lb=jb>>>16;return jb=ra[2]*r[3],Lb+=jb,jb=ra[3]*r[2]>>>0,Lb+=jb,this.buffer[0]+=Lb<<16,this.buffer[1]=Lb>>>0<jb?65536:0,this.buffer[1]+=Lb>>>16,this.buffer[1]+=ra[1]*r[3]+ra[2]*r[2]+ra[3]*r[1],this.buffer[1]+=ra[0]*r[3]+ra[1]*r[2]+ra[2]*r[1]+ra[3]*r[0]<<16,this}_plus(r){const ra=
this.buffer[0]+r.buffer[0]>>>0;this.buffer[1]+=r.buffer[1];ra<this.buffer[0]>>>0&&++this.buffer[1];this.buffer[0]=ra}lessThan(r){return this.buffer[1]<r.buffer[1]||this.buffer[1]===r.buffer[1]&&this.buffer[0]<r.buffer[0]}equals(r){return this.buffer[1]===r.buffer[1]&&this.buffer[0]==r.buffer[0]}greaterThan(r){return r.lessThan(this)}hex(){return`${Ga(this.buffer[1])} ${Ga(this.buffer[0])}`}}class Je extends Mf{times(r){return this._times(r),this}plus(r){return this._plus(r),this}static from(r,ra=
new Uint32Array(2)){return Je.fromString("string"==typeof r?r:r.toString(),ra)}static fromNumber(r,ra=new Uint32Array(2)){return Je.fromString(r.toString(),ra)}static fromString(r,ra=new Uint32Array(2)){const jb=r.length;ra=new Je(ra);for(let Lb=0;Lb<jb;){const pc=8<jb-Lb?8:jb-Lb,Yc=new Je(new Uint32Array([parseInt(r.substr(Lb,pc),10),0])),Hd=new Je(new Uint32Array([ef[pc],0]));ra.times(Hd);ra.plus(Yc);Lb+=pc}return ra}static convertArray(r){const ra=new Uint32Array(2*r.length);for(let jb=-1,Lb=r.length;++jb<
Lb;)Je.from(r[jb],new Uint32Array(ra.buffer,ra.byteOffset+8*jb,2));return ra}static multiply(r,ra){return(new Je(new Uint32Array(r.buffer))).times(ra)}static add(r,ra){return(new Je(new Uint32Array(r.buffer))).plus(ra)}}class Xf extends Mf{negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],0==this.buffer[0]&&++this.buffer[1],this}times(r){return this._times(r),this}plus(r){return this._plus(r),this}lessThan(r){const ra=this.buffer[1]<<0,jb=r.buffer[1]<<0;return ra<jb||
ra===jb&&this.buffer[0]<r.buffer[0]}static from(r,ra=new Uint32Array(2)){return Xf.fromString("string"==typeof r?r:r.toString(),ra)}static fromNumber(r,ra=new Uint32Array(2)){return Xf.fromString(r.toString(),ra)}static fromString(r,ra=new Uint32Array(2)){const jb=r.startsWith("-"),Lb=r.length;ra=new Xf(ra);for(let pc=jb?1:0;pc<Lb;){const Yc=8<Lb-pc?8:Lb-pc,Hd=new Xf(new Uint32Array([parseInt(r.substr(pc,Yc),10),0])),Kd=new Xf(new Uint32Array([ef[Yc],0]));ra.times(Kd);ra.plus(Hd);pc+=Yc}return jb?
ra.negate():ra}static convertArray(r){const ra=new Uint32Array(2*r.length);for(let jb=-1,Lb=r.length;++jb<Lb;)Xf.from(r[jb],new Uint32Array(ra.buffer,ra.byteOffset+8*jb,2));return ra}static multiply(r,ra){return(new Xf(new Uint32Array(r.buffer))).times(ra)}static add(r,ra){return(new Xf(new Uint32Array(r.buffer))).plus(ra)}}class Bg{constructor(r){this.buffer=r}high(){return new Xf(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new Xf(new Uint32Array(this.buffer.buffer,
this.buffer.byteOffset,2))}negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],0==this.buffer[0]&&++this.buffer[1],0==this.buffer[1]&&++this.buffer[2],0==this.buffer[2]&&++this.buffer[3],this}times(r){const ra=new Je(new Uint32Array([this.buffer[3],0])),jb=new Je(new Uint32Array([this.buffer[2],0])),Lb=new Je(new Uint32Array([this.buffer[1],0])),pc=new Je(new Uint32Array([this.buffer[0],0])),Yc=new Je(new Uint32Array([r.buffer[3],
0])),Hd=new Je(new Uint32Array([r.buffer[2],0])),Kd=new Je(new Uint32Array([r.buffer[1],0]));r=new Je(new Uint32Array([r.buffer[0],0]));let ze=Je.multiply(pc,r);this.buffer[0]=ze.low();const bf=new Je(new Uint32Array([ze.high(),0]));ze=Je.multiply(Lb,r);bf.plus(ze);ze=Je.multiply(pc,Kd);bf.plus(ze);this.buffer[1]=bf.low();this.buffer[3]=bf.lessThan(ze)?1:0;this.buffer[2]=bf.high();return(new Je(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))).plus(Je.multiply(jb,r)).plus(Je.multiply(Lb,
Kd)).plus(Je.multiply(pc,Hd)),this.buffer[3]+=Je.multiply(ra,r).plus(Je.multiply(jb,Kd)).plus(Je.multiply(Lb,Hd)).plus(Je.multiply(pc,Yc)).low(),this}plus(r){const ra=new Uint32Array(4);return ra[3]=this.buffer[3]+r.buffer[3]>>>0,ra[2]=this.buffer[2]+r.buffer[2]>>>0,ra[1]=this.buffer[1]+r.buffer[1]>>>0,ra[0]=this.buffer[0]+r.buffer[0]>>>0,ra[0]<this.buffer[0]>>>0&&++ra[1],ra[1]<this.buffer[1]>>>0&&++ra[2],ra[2]<this.buffer[2]>>>0&&++ra[3],this.buffer[3]=ra[3],this.buffer[2]=ra[2],this.buffer[1]=ra[1],
this.buffer[0]=ra[0],this}hex(){return`${Ga(this.buffer[3])} ${Ga(this.buffer[2])} ${Ga(this.buffer[1])} ${Ga(this.buffer[0])}`}static multiply(r,ra){return(new Bg(new Uint32Array(r.buffer))).times(ra)}static add(r,ra){return(new Bg(new Uint32Array(r.buffer))).plus(ra)}static from(r,ra=new Uint32Array(4)){return Bg.fromString("string"==typeof r?r:r.toString(),ra)}static fromNumber(r,ra=new Uint32Array(4)){return Bg.fromString(r.toString(),ra)}static fromString(r,ra=new Uint32Array(4)){const jb=r.startsWith("-"),
Lb=r.length;ra=new Bg(ra);for(let pc=jb?1:0;pc<Lb;){const Yc=8<Lb-pc?8:Lb-pc,Hd=new Bg(new Uint32Array([parseInt(r.substr(pc,Yc),10),0,0,0])),Kd=new Bg(new Uint32Array([ef[Yc],0,0,0]));ra.times(Kd);ra.plus(Hd);pc+=Yc}return jb?ra.negate():ra}static convertArray(r){const ra=new Uint32Array(4*r.length);for(let jb=-1,Lb=r.length;++jb<Lb;)Bg.from(r[jb],new Uint32Array(ra.buffer,ra.byteOffset+16*jb,4));return ra}}class yh extends xh{constructor(r,ra,jb,Lb){super();this.buffersIndex=this.nodesIndex=-1;
this.bytes=r;this.nodes=ra;this.buffers=jb;this.dictionaries=Lb}visit(r){return super.visit(r instanceof Zh?r.type:r)}visitNull(r,{length:ra}=this.nextFieldNode()){return Ng.Null(r,0,ra)}visitBool(r,{length:ra,nullCount:jb}=this.nextFieldNode()){return Ng.Bool(r,0,ra,jb,this.readNullBitmap(r,jb),this.readData(r))}visitInt(r,{length:ra,nullCount:jb}=this.nextFieldNode()){return Ng.Int(r,0,ra,jb,this.readNullBitmap(r,jb),this.readData(r))}visitFloat(r,{length:ra,nullCount:jb}=this.nextFieldNode()){return Ng.Float(r,
0,ra,jb,this.readNullBitmap(r,jb),this.readData(r))}visitUtf8(r,{length:ra,nullCount:jb}=this.nextFieldNode()){return Ng.Utf8(r,0,ra,jb,this.readNullBitmap(r,jb),this.readOffsets(r),this.readData(r))}visitBinary(r,{length:ra,nullCount:jb}=this.nextFieldNode()){return Ng.Binary(r,0,ra,jb,this.readNullBitmap(r,jb),this.readOffsets(r),this.readData(r))}visitFixedSizeBinary(r,{length:ra,nullCount:jb}=this.nextFieldNode()){return Ng.FixedSizeBinary(r,0,ra,jb,this.readNullBitmap(r,jb),this.readData(r))}visitDate(r,
{length:ra,nullCount:jb}=this.nextFieldNode()){return Ng.Date(r,0,ra,jb,this.readNullBitmap(r,jb),this.readData(r))}visitTimestamp(r,{length:ra,nullCount:jb}=this.nextFieldNode()){return Ng.Timestamp(r,0,ra,jb,this.readNullBitmap(r,jb),this.readData(r))}visitTime(r,{length:ra,nullCount:jb}=this.nextFieldNode()){return Ng.Time(r,0,ra,jb,this.readNullBitmap(r,jb),this.readData(r))}visitDecimal(r,{length:ra,nullCount:jb}=this.nextFieldNode()){return Ng.Decimal(r,0,ra,jb,this.readNullBitmap(r,jb),this.readData(r))}visitList(r,
{length:ra,nullCount:jb}=this.nextFieldNode()){return Ng.List(r,0,ra,jb,this.readNullBitmap(r,jb),this.readOffsets(r),this.visit(r.children[0]))}visitStruct(r,{length:ra,nullCount:jb}=this.nextFieldNode()){return Ng.Struct(r,0,ra,jb,this.readNullBitmap(r,jb),this.visitMany(r.children))}visitUnion(r){return r.mode===ad.Sparse?this.visitSparseUnion(r):this.visitDenseUnion(r)}visitDenseUnion(r,{length:ra,nullCount:jb}=this.nextFieldNode()){return Ng.Union(r,0,ra,jb,this.readNullBitmap(r,jb),this.readTypeIds(r),
this.readOffsets(r),this.visitMany(r.children))}visitSparseUnion(r,{length:ra,nullCount:jb}=this.nextFieldNode()){return Ng.Union(r,0,ra,jb,this.readNullBitmap(r,jb),this.readTypeIds(r),this.visitMany(r.children))}visitDictionary(r,{length:ra,nullCount:jb}=this.nextFieldNode()){return Ng.Dictionary(r,0,ra,jb,this.readNullBitmap(r,jb),this.readData(r.indices),this.readDictionary(r))}visitInterval(r,{length:ra,nullCount:jb}=this.nextFieldNode()){return Ng.Interval(r,0,ra,jb,this.readNullBitmap(r,jb),
this.readData(r))}visitFixedSizeList(r,{length:ra,nullCount:jb}=this.nextFieldNode()){return Ng.FixedSizeList(r,0,ra,jb,this.readNullBitmap(r,jb),this.visit(r.children[0]))}visitMap(r,{length:ra,nullCount:jb}=this.nextFieldNode()){return Ng.Map(r,0,ra,jb,this.readNullBitmap(r,jb),this.readOffsets(r),this.visit(r.children[0]))}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(r,ra,jb=this.nextBufferRange()){return 0<ra&&this.readData(r,
jb)||new Uint8Array(0)}readOffsets(r,ra){return this.readData(r,ra)}readTypeIds(r,ra){return this.readData(r,ra)}readData(r,{length:ra,offset:jb}=this.nextBufferRange()){return this.bytes.subarray(jb,jb+ra)}readDictionary(r){return this.dictionaries.get(r.id)}}class Tg extends yh{constructor(r,ra,jb,Lb){super(new Uint8Array(0),ra,jb,Lb);this.sources=r}readNullBitmap(r,ra,{offset:jb}=this.nextBufferRange()){return 0>=ra?new Uint8Array(0):oa(this.sources[jb])}readOffsets(r,{offset:ra}=this.nextBufferRange()){return K(Uint8Array,
K(Int32Array,this.sources[ra]))}readTypeIds(r,{offset:ra}=this.nextBufferRange()){return K(Uint8Array,K(r.ArrayType,this.sources[ra]))}readData(r,{offset:ra}=this.nextBufferRange()){const {sources:jb}=this;return eg.isTimestamp(r)||(eg.isInt(r)||eg.isTime(r))&&64===r.bitWidth||eg.isDate(r)&&r.unit===Md.MILLISECOND?K(Uint8Array,Xf.convertArray(jb[ra])):eg.isDecimal(r)?K(Uint8Array,Bg.convertArray(jb[ra])):eg.isBinary(r)||eg.isFixedSizeBinary(r)?function(Lb){Lb=Lb.join("");const pc=new Uint8Array(Lb.length/
2);for(let Yc=0;Yc<Lb.length;Yc+=2)pc[Yc>>1]=parseInt(Lb.substr(Yc,2),16);return pc}(jb[ra]):eg.isBool(r)?oa(jb[ra]):eg.isUtf8(r)?tf.encode(jb[ra].join("")):K(Uint8Array,K(r.ArrayType,jb[ra].map(Lb=>+Lb)))}}const Qh=Symbol.for("parent"),yi=Symbol.for("rowIndex"),ki=Symbol.for("keyToIdx"),th=Symbol.for("idxToVal"),Xk=Symbol.for("nodejs.util.inspect.custom");class Uh{constructor(r,ra){this[Qh]=r;this.size=ra}entries(){return this[Symbol.iterator]()}has(r){return void 0!==this.get(r)}get(r){let ra;if(null!=
r){const jb=this[ki]||(this[ki]=new Map);let Lb=jb.get(r);void 0!==Lb?(r=this[th]||(this[th]=Array(this.size)),void 0!==(ra=r[Lb])||(r[Lb]=ra=this.getValue(Lb))):-1<(Lb=this.getIndex(r))&&(jb.set(r,Lb),r=this[th]||(this[th]=Array(this.size)),void 0!==(ra=r[Lb])||(r[Lb]=ra=this.getValue(Lb)))}return ra}set(r,ra){if(null!=r){const jb=this[ki]||(this[ki]=new Map);let Lb=jb.get(r);if(void 0===Lb&&jb.set(r,Lb=this.getIndex(r)),-1<Lb)(this[th]||(this[th]=Array(this.size)))[Lb]=this.setValue(Lb,ra)}return this}clear(){throw Error(`Clearing ${this[Symbol.toStringTag]} not supported.`);
}delete(r){throw Error(`Deleting ${this[Symbol.toStringTag]} values not supported.`);}*[Symbol.iterator](){const r=this.keys(),ra=this.values(),jb=this[ki]||(this[ki]=new Map),Lb=this[th]||(this[th]=Array(this.size));for(let pc,Yc,Hd,Kd,ze=0;!(Hd=r.next()).done&&!(Kd=ra.next()).done;++ze)pc=Hd.value,Yc=Kd.value,Lb[ze]=Yc,jb.has(pc)||jb.set(pc,ze),yield[pc,Yc]}forEach(r,ra){const jb=this.keys(),Lb=this.values(),pc=void 0===ra?r:(Kd,ze,bf)=>r.call(ra,Kd,ze,bf),Yc=this[ki]||(this[ki]=new Map),Hd=this[th]||
(this[th]=Array(this.size));for(let Kd,ze,bf,Ef,jg=0;!(bf=jb.next()).done&&!(Ef=Lb.next()).done;++jg)Kd=bf.value,ze=Ef.value,Hd[jg]=ze,Yc.has(Kd)||Yc.set(Kd,jg),pc(ze,Kd,this)}toArray(){return[...this.values()]}toJSON(){const r={};return this.forEach((ra,jb)=>r[jb]=ra),r}inspect(){return this.toString()}[Xk](){return this.toString()}toString(){const r=[];return this.forEach((ra,jb)=>{jb=Ia(jb);ra=Ia(ra);r.push(`${jb}: ${ra}`)}),`{ ${r.join(", ")} }`}}Uh[Symbol.toStringTag]=(r=>(Object.defineProperties(r,
{size:{writable:!0,enumerable:!1,configurable:!1,value:0},[Qh]:{writable:!0,enumerable:!1,configurable:!1,value:null},[yi]:{writable:!0,enumerable:!1,configurable:!1,value:-1}}),r[Symbol.toStringTag]="Row"))(Uh.prototype);class Rh extends Uh{constructor(r){return super(r,r.length),bh(this)}keys(){return this[Qh].getChildAt(0)[Symbol.iterator]()}values(){return this[Qh].getChildAt(1)[Symbol.iterator]()}getKey(r){return this[Qh].getChildAt(0).get(r)}getIndex(r){return this[Qh].getChildAt(0).indexOf(r)}getValue(r){return this[Qh].getChildAt(1).get(r)}setValue(r,
ra){this[Qh].getChildAt(1).set(r,ra)}}class Ej extends Uh{constructor(r){return super(r,r.type.children.length),dm(this)}*keys(){for(const r of this[Qh].type.children)yield r.name}*values(){for(const r of this[Qh].type.children)yield this[r.name]}getKey(r){return this[Qh].type.children[r].name}getIndex(r){return this[Qh].type.children.findIndex(ra=>ra.name===r)}getValue(r){return this[Qh].getChildAt(r).get(this[yi])}setValue(r,ra){return this[Qh].getChildAt(r).set(this[yi],ra)}}Object.setPrototypeOf(Uh.prototype,
Map.prototype);const dm=(()=>{const r={enumerable:!0,configurable:!1,get:null,set:null};return ra=>{let jb=-1;const Lb=ra[ki]||(ra[ki]=new Map),pc=Hd=>function(){return this.get(Hd)},Yc=Hd=>function(Kd){return this.set(Hd,Kd)};for(const Hd of ra.keys())Lb.set(Hd,++jb),r.get=pc(Hd),r.set=Yc(Hd),Object.prototype.hasOwnProperty.call(ra,Hd)||(r.enumerable=!0,Object.defineProperty(ra,Hd,r)),Object.prototype.hasOwnProperty.call(ra,jb)||(r.enumerable=!1,Object.defineProperty(ra,jb,r));return r.get=r.set=
null,ra}})(),bh=(()=>{if("undefined"==typeof Proxy)return dm;const r=Uh.prototype.has,ra=Uh.prototype.get,jb=Uh.prototype.set,Lb=Uh.prototype.getKey,pc={isExtensible:()=>!1,deleteProperty:()=>!1,preventExtensions:()=>!0,ownKeys:Yc=>[...Yc.keys()].map(Hd=>""+Hd),has(Yc,Hd){switch(Hd){case "getKey":case "getIndex":case "getValue":case "setValue":case "toArray":case "toJSON":case "inspect":case "constructor":case "isPrototypeOf":case "propertyIsEnumerable":case "toString":case "toLocaleString":case "valueOf":case "size":case "has":case "get":case "set":case "clear":case "delete":case "keys":case "values":case "entries":case "forEach":case "__proto__":case "__defineGetter__":case "__defineSetter__":case "hasOwnProperty":case "__lookupGetter__":case "__lookupSetter__":case Symbol.iterator:case Symbol.toStringTag:case Qh:case yi:case th:case ki:case Xk:return!0}return"number"!=
typeof Hd||Yc.has(Hd)||(Hd=Yc.getKey(Hd)),Yc.has(Hd)},get(Yc,Hd,Kd){switch(Hd){case "getKey":case "getIndex":case "getValue":case "setValue":case "toArray":case "toJSON":case "inspect":case "constructor":case "isPrototypeOf":case "propertyIsEnumerable":case "toString":case "toLocaleString":case "valueOf":case "size":case "has":case "get":case "set":case "clear":case "delete":case "keys":case "values":case "entries":case "forEach":case "__proto__":case "__defineGetter__":case "__defineSetter__":case "hasOwnProperty":case "__lookupGetter__":case "__lookupSetter__":case Symbol.iterator:case Symbol.toStringTag:case Qh:case yi:case th:case ki:case Xk:return Reflect.get(Yc,
Hd,Kd)}return"number"!=typeof Hd||r.call(Kd,Hd)||(Hd=Lb.call(Kd,Hd)),ra.call(Kd,Hd)},set(Yc,Hd,Kd,ze){switch(Hd){case Qh:case yi:case th:case ki:return Reflect.set(Yc,Hd,Kd,ze);case "getKey":case "getIndex":case "getValue":case "setValue":case "toArray":case "toJSON":case "inspect":case "constructor":case "isPrototypeOf":case "propertyIsEnumerable":case "toString":case "toLocaleString":case "valueOf":case "size":case "has":case "get":case "set":case "clear":case "delete":case "keys":case "values":case "entries":case "forEach":case "__proto__":case "__defineGetter__":case "__defineSetter__":case "hasOwnProperty":case "__lookupGetter__":case "__lookupSetter__":case Symbol.iterator:case Symbol.toStringTag:return!1}return"number"!=
typeof Hd||r.call(ze,Hd)||(Hd=Lb.call(ze,Hd)),!!r.call(ze,Hd)&&!!jb.call(ze,Hd,Kd)}};return Yc=>new Proxy(Yc,pc)})();let Nf;const ch=eh?fh(0):0,Cg=r=>r!=r,Ki=Array.isArray,bk=(r,[ra,jb],Lb)=>(r[0][Lb]=ra,r[1][Lb]=jb,r);class ui{constructor(r){this.chunks=r;this.chunkIndex=0;this.chunkIterator=this.getChunkIterator()}next(){for(;this.chunkIndex<this.chunks.length;){const r=this.chunkIterator.next();if(!r.done)return r;++this.chunkIndex<this.chunks.length&&(this.chunkIterator=this.getChunkIterator())}return{done:!0,
value:null}}getChunkIterator(){return this.chunks[this.chunkIndex][Symbol.iterator]()}[Symbol.iterator](){return this}}class Ci extends qb{constructor(r,ra=[],jb=function(Lb){const pc=new Uint32Array((Lb||[]).length+1);let Yc=pc[0]=0;const Hd=pc.length;for(let Kd=0;++Kd<Hd;)pc[Kd]=Yc+=Lb[Kd-1].length;return pc}(ra)){super();this._nullCount=-1;this._type=r;this._chunks=ra;this._chunkOffsets=jb;this._length=jb[jb.length-1];this._numChildren=(this._type.children||[]).length}static flatten(...r){return ec(qb,
r,[],0)}static concat(...r){r=Ci.flatten(...r);return new Ci(r[0].type,r)}get type(){return this._type}get length(){return this._length}get chunks(){return this._chunks}get typeId(){return this._type.typeId}get VectorName(){return`Chunked<${this._type}>`}get data(){return this._chunks[0]?this._chunks[0].data:null}get ArrayType(){return this._type.ArrayType}get numChildren(){return this._numChildren}get stride(){return this._chunks[0]?this._chunks[0].stride:1}get byteLength(){return this._chunks.reduce((r,
ra)=>r+ra.byteLength,0)}get nullCount(){let r=this._nullCount;return 0>r&&(this._nullCount=r=this._chunks.reduce((ra,{nullCount:jb})=>ra+jb,0)),r}get indices(){if(eg.isDictionary(this._type)){if(!this._indices){const r=this._chunks;this._indices=1===r.length?r[0].indices:Ci.concat(...r.map(ra=>ra.indices))}return this._indices}return null}get dictionary(){return eg.isDictionary(this._type)?this._chunks[this._chunks.length-1].data.dictionary:null}[Symbol.iterator](){return new ui(this._chunks)}clone(r=
this._chunks){return new Ci(this._type,r)}concat(...r){return this.clone(Ci.flatten(this,...r))}slice(r,ra){return cb(this,r,ra,this._sliceInternal)}getChildAt(r){if(0>r||r>=this._numChildren)return null;const ra=this._children||(this._children=[]);let jb,Lb,pc;return(jb=ra[r])?jb:(Lb=(this._type.children||[])[r])&&(pc=this._chunks.map(Yc=>Yc.getChildAt(r)).filter(Yc=>null!=Yc),0<pc.length)?ra[r]=new Ci(Lb.type,pc):null}search(r,ra){const jb=this._chunkOffsets;let Lb=jb.length-1;if(0>r||r>=jb[Lb])return null;
if(1>=Lb)return ra?ra(this,0,r):[0,r];let pc=0,Yc=0,Hd;do{if(pc+1===Lb)return ra?ra(this,pc,r-Yc):[pc,r-Yc];Hd=pc+(Lb-pc)/2|0;r>=jb[Hd]?pc=Hd:Lb=Hd}while(r<jb[Lb]&&r>=(Yc=jb[pc]));return null}isValid(r){return!!this.search(r,this.isValidInternal)}get(r){return this.search(r,this.getInternal)}set(r,ra){this.search(r,({chunks:jb},Lb,pc)=>jb[Lb].set(pc,ra))}indexOf(r,ra){return ra&&"number"==typeof ra?this.search(ra,(jb,Lb,pc)=>this.indexOfInternal(jb,Lb,pc,r)):this.indexOfInternal(this,0,Math.max(0,
ra||0),r)}toArray(){var {chunks:r}=this;const ra=r.length;var jb=this._type.ArrayType;if(0>=ra)return new jb(0);if(1>=ra)return r[0].toArray();let Lb=0;const pc=Array(ra);for(let Yc=-1;++Yc<ra;)Lb+=(pc[Yc]=r[Yc].toArray()).length;jb!==pc[0].constructor&&(jb=pc[0].constructor);r=new jb(Lb);jb=jb===Array?mj:fi;for(let Yc=-1,Hd=0;++Yc<ra;)Hd=jb(pc[Yc],r,Hd);return r}getInternal({_chunks:r},ra,jb){return r[ra].get(jb)}isValidInternal({_chunks:r},ra,jb){return r[ra].isValid(jb)}indexOfInternal({_chunks:r},
ra,jb,Lb){--ra;const pc=r.length;var Yc=jb;for(jb=0;++ra<pc;){if(~(Yc=r[ra].indexOf(Lb,Yc)))return jb+Yc;Yc=0;jb+=r[ra].length}return-1}_sliceInternal(r,ra,jb){const Lb=[],{chunks:pc,_chunkOffsets:Yc}=r;for(let Hd=-1,Kd=pc.length;++Hd<Kd;){const ze=pc[Hd],bf=ze.length,Ef=Yc[Hd];if(Ef>=jb)break;ra>=Ef+bf||(Ef>=ra&&Ef+bf<=jb?Lb.push(ze):Lb.push(ze.slice(Math.max(0,ra-Ef),Math.min(jb-Ef,bf))))}return r.clone(Lb)}}const fi=(r,ra,jb)=>(ra.set(r,jb),jb+r.length),mj=(r,ra,jb)=>{for(let Lb=-1,pc=r.length;++Lb<
pc;)ra[jb++]=r[Lb];return jb};class fj extends Ci{constructor(r,ra=[],jb){if(ra=Ci.flatten(...ra),super(r.type,ra,jb),this._field=r,1===ra.length&&!(this instanceof ak))return new ak(r,ra[0],this._chunkOffsets)}static new(...r){let [ra,jb,...Lb]=r;"string"==typeof ra||ra instanceof Zh||(jb=ra,ra="");r=Ci.flatten(Array.isArray(jb)?[...jb,...Lb]:jb instanceof qb?[jb,...Lb]:[qb.new(jb,...Lb)]);"string"==typeof ra?ra=new Zh(ra,r[0].data.type,!0):!ra.nullable&&r.some(({nullCount:pc})=>0<pc)&&(ra=ra.clone({nullable:!0}));
return new fj(ra,r)}get field(){return this._field}get name(){return this._field.name}get nullable(){return this._field.nullable}get metadata(){return this._field.metadata}clone(r=this._chunks){return new fj(this._field,r)}getChildAt(r){if(0>r||r>=this.numChildren)return null;const ra=this._children||(this._children=[]);let jb,Lb,pc;return(jb=ra[r])?jb:(Lb=(this.type.children||[])[r])&&(pc=this._chunks.map(Yc=>Yc.getChildAt(r)).filter(Yc=>null!=Yc),0<pc.length)?ra[r]=new fj(Lb,pc):null}}class ak extends fj{constructor(r,
ra,jb){super(r,[ra],jb);this._chunk=ra}search(r,ra){return ra?ra(this,0,r):[0,r]}isValid(r){return this._chunk.isValid(r)}get(r){return this._chunk.get(r)}set(r,ra){this._chunk.set(r,ra)}indexOf(r,ra){return this._chunk.indexOf(r,ra)}}var Wk=Cd.Long;const Oi=new class extends xh{visit(r,ra){return null==r||null==ra?void 0:super.visit(r,ra)}visitNull(r,ra){return Xe.startNull(ra),Xe.endNull(ra)}visitInt(r,ra){return vf.startInt(ra),vf.addBitWidth(ra,r.bitWidth),vf.addIsSigned(ra,r.isSigned),vf.endInt(ra)}visitFloat(r,
ra){return ne.startFloatingPoint(ra),ne.addPrecision(ra,r.precision),ne.endFloatingPoint(ra)}visitBinary(r,ra){return Hh.startBinary(ra),Hh.endBinary(ra)}visitBool(r,ra){return ph.startBool(ra),ph.endBool(ra)}visitUtf8(r,ra){return wf.startUtf8(ra),wf.endUtf8(ra)}visitDecimal(r,ra){return mh.startDecimal(ra),mh.addScale(ra,r.scale),mh.addPrecision(ra,r.precision),mh.endDecimal(ra)}visitDate(r,ra){return of.startDate(ra),of.addUnit(ra,r.unit),of.endDate(ra)}visitTime(r,ra){return qh.startTime(ra),
qh.addUnit(ra,r.unit),qh.addBitWidth(ra,r.bitWidth),qh.endTime(ra)}visitTimestamp(r,ra){const jb=r.timezone&&ra.createString(r.timezone)||void 0;return Ii.startTimestamp(ra),Ii.addUnit(ra,r.unit),void 0!==jb&&Ii.addTimezone(ra,jb),Ii.endTimestamp(ra)}visitInterval(r,ra){return Fi.startInterval(ra),Fi.addUnit(ra,r.unit),Fi.endInterval(ra)}visitList(r,ra){return Ue.startList(ra),Ue.endList(ra)}visitStruct(r,ra){return Uf.startStruct_(ra),Uf.endStruct_(ra)}visitUnion(r,ra){yf.startTypeIdsVector(ra,r.typeIds.length);
const jb=yf.createTypeIdsVector(ra,r.typeIds);return yf.startUnion(ra),yf.addMode(ra,r.mode),yf.addTypeIds(ra,jb),yf.endUnion(ra)}visitDictionary(r,ra){const jb=this.visit(r.indices,ra);return jh.startDictionaryEncoding(ra),jh.addId(ra,new Wk(r.id,0)),jh.addIsOrdered(ra,r.isOrdered),void 0!==jb&&jh.addIndexType(ra,jb),jh.endDictionaryEncoding(ra)}visitFixedSizeBinary(r,ra){return ag.startFixedSizeBinary(ra),ag.addByteWidth(ra,r.byteWidth),ag.endFixedSizeBinary(ra)}visitFixedSizeList(r,ra){return uf.startFixedSizeList(ra),
uf.addListSize(ra,r.listSize),uf.endFixedSizeList(ra)}visitMap(r,ra){return Yf.startMap(ra),Yf.addKeysSorted(ra,r.keysSorted),Yf.endMap(ra)}};var Rk=Cd.Long,lm=Cd.Builder,Ul=Cd.ByteBuffer;class Bj{constructor(r,ra,jb,Lb){this._version=ra;this._headerType=jb;this.body=new Uint8Array(0);Lb&&(this._createHeader=()=>Lb);this._bodyLength="number"==typeof r?r:r.low}static fromJSON(r,ra){const jb=new Bj(0,Qb.V4,ra);return jb._createHeader=function(Lb,pc){return()=>{switch(pc){case Pe.Schema:return sh.fromJSON(Lb);
case Pe.RecordBatch:return el.fromJSON(Lb);case Pe.DictionaryBatch:return ik.fromJSON(Lb)}throw Error(`Unrecognized Message type: { name: ${Pe[pc]}, type: ${pc} }`);}}(r,ra),jb}static decode(r){r=new Ul(K(Uint8Array,r));r=ug.getRootAsMessage(r);var ra=r.bodyLength();const jb=r.version(),Lb=r.headerType();ra=new Bj(ra,jb,Lb);return ra._createHeader=function(pc,Yc){return()=>{switch(Yc){case Pe.Schema:return sh.decode(pc.header(new nh));case Pe.RecordBatch:return el.decode(pc.header(new oh),pc.version());
case Pe.DictionaryBatch:return ik.decode(pc.header(new $d),pc.version())}throw Error(`Unrecognized Message type: { name: ${Pe[Yc]}, type: ${Yc} }`);}}(r,Lb),ra}static encode(r){const ra=new lm;let jb=-1;return r.isSchema()?jb=sh.encode(ra,r.header()):r.isRecordBatch()?jb=el.encode(ra,r.header()):r.isDictionaryBatch()&&(jb=ik.encode(ra,r.header())),ug.startMessage(ra),ug.addVersion(ra,Qb.V4),ug.addHeader(ra,jb),ug.addHeaderType(ra,r.headerType),ug.addBodyLength(ra,new Rk(r.bodyLength,0)),ug.finishMessageBuffer(ra,
ug.endMessage(ra)),ra.asUint8Array()}static from(r,ra=0){if(r instanceof sh)return new Bj(0,Qb.V4,Pe.Schema,r);if(r instanceof el)return new Bj(ra,Qb.V4,Pe.RecordBatch,r);if(r instanceof ik)return new Bj(ra,Qb.V4,Pe.DictionaryBatch,r);throw Error("Unrecognized Message header: "+r);}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===
Pe.Schema}isRecordBatch(){return this.headerType===Pe.RecordBatch}isDictionaryBatch(){return this.headerType===Pe.DictionaryBatch}}class el{constructor(r,ra,jb){this._nodes=ra;this._buffers=jb;this._length="number"==typeof r?r:r.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class ik{constructor(r,ra,jb=!1){this._data=r;this._isDelta=jb;this._id="number"==typeof ra?ra:ra.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}
class Wg{constructor(r,ra){this.offset="number"==typeof r?r:r.low;this.length="number"==typeof ra?ra:ra.low}}class Dl{constructor(r,ra){this.length="number"==typeof r?r:r.low;this.nullCount="number"==typeof ra?ra:ra.low}}Zh.encode=function(r,ra){let jb=-1,Lb=-1,pc=-1;var Yc=ra.type;let Hd=ra.typeId;eg.isDictionary(Yc)?(Hd=Yc.dictionary.typeId,pc=Oi.visit(Yc,r),Lb=Oi.visit(Yc.dictionary,r)):Lb=Oi.visit(Yc,r);Yc=(Yc.children||[]).map(ze=>Zh.encode(r,ze));Yc=Kg.createChildrenVector(r,Yc);const Kd=ra.metadata&&
0<ra.metadata.size?Kg.createCustomMetadataVector(r,[...ra.metadata].map(([ze,bf])=>{ze=r.createString(""+ze);bf=r.createString(""+bf);return Nh.startKeyValue(r),Nh.addKey(r,ze),Nh.addValue(r,bf),Nh.endKeyValue(r)})):-1;ra.name&&(jb=r.createString(ra.name));Kg.startField(r);Kg.addType(r,Lb);Kg.addTypeType(r,Hd);Kg.addChildren(r,Yc);Kg.addNullable(r,!!ra.nullable);-1!==jb&&Kg.addName(r,jb);-1!==pc&&Kg.addDictionary(r,pc);-1!==Kd&&Kg.addCustomMetadata(r,Kd);return Kg.endField(r)};Zh.decode=function(r,
ra){let jb,Lb,pc,Yc,Hd,Kd;ra&&(Kd=r.dictionary())?ra.has(jb=Kd.id().low)?(Yc=(Yc=Kd.indexType())?Pb(Yc):new ud,Hd=new ci(ra.get(jb),Yc,jb,Kd.isOrdered()),Lb=new Zh(r.name(),Hd,r.nullable(),Mc(r))):(Yc=(Yc=Kd.indexType())?Pb(Yc):new ud,ra.set(jb,pc=nc(r,Cc(r,ra))),Hd=new ci(pc,Yc,jb,Kd.isOrdered()),Lb=new Zh(r.name(),Hd,r.nullable(),Mc(r))):(pc=nc(r,Cc(r,ra)),Lb=new Zh(r.name(),pc,r.nullable(),Mc(r)));return Lb||null};Zh.fromJSON=function(r,ra){let jb,Lb,pc,Yc,Hd,Kd;return ra&&(Yc=r.dictionary)?ra.has(jb=
Yc.id)?(Lb=(Lb=Yc.indexType)?new ve(Lb.isSigned,Lb.bitWidth):new ud,Kd=new ci(ra.get(jb),Lb,jb,Yc.isOrdered),pc=new Zh(r.name,Kd,r.nullable,Ub(r.customMetadata))):(Lb=(Lb=Yc.indexType)?new ve(Lb.isSigned,Lb.bitWidth):new ud,ra.set(jb,Hd=oc(r,Kc(r,ra))),Kd=new ci(Hd,Lb,jb,Yc.isOrdered),pc=new Zh(r.name,Kd,r.nullable,Ub(r.customMetadata))):(Hd=oc(r,Kc(r,ra)),pc=new Zh(r.name,Hd,r.nullable,Ub(r.customMetadata))),pc||null};sh.encode=function(r,ra){var jb=ra.fields.map(Lb=>Zh.encode(r,Lb));nh.startFieldsVector(r,
jb.length);jb=nh.createFieldsVector(r,jb);ra=ra.metadata&&0<ra.metadata.size?nh.createCustomMetadataVector(r,[...ra.metadata].map(([Lb,pc])=>{Lb=r.createString(""+Lb);pc=r.createString(""+pc);return Nh.startKeyValue(r),Nh.addKey(r,Lb),Nh.addValue(r,pc),Nh.endKeyValue(r)})):-1;nh.startSchema(r);nh.addFields(r,jb);nh.addEndianness(r,em?ye.Little:ye.Big);-1!==ra&&nh.addCustomMetadata(r,ra);return nh.endSchema(r)};sh.decode=function(r,ra=new Map){const jb=[];for(let Lb,pc=-1,Yc=-1,Hd=r.fieldsLength();++pc<
Hd;)(Lb=r.fields(pc))&&(jb[++Yc]=Zh.decode(Lb,ra));return new sh(jb,Mc(r),ra)};sh.fromJSON=function(r,ra=new Map){return new sh(function(jb,Lb){return(jb.fields||[]).filter(Boolean).map(pc=>Zh.fromJSON(pc,Lb))}(r,ra),Ub(r.customMetadata),ra)};el.encode=function(r,ra){var jb=ra.nodes||[],Lb=ra.buffers||[];oh.startNodesVector(r,jb.length);jb.slice().reverse().forEach(pc=>Dl.encode(r,pc));jb=r.endVector();oh.startBuffersVector(r,Lb.length);Lb.slice().reverse().forEach(pc=>Wg.encode(r,pc));Lb=r.endVector();
return oh.startRecordBatch(r),oh.addLength(r,new Rk(ra.length,0)),oh.addNodes(r,jb),oh.addBuffers(r,Lb),oh.endRecordBatch(r)};el.decode=function(r,ra=Qb.V4){return new el(r.length(),function(jb){const Lb=[];for(let pc,Yc=-1,Hd=-1,Kd=jb.nodesLength();++Yc<Kd;)(pc=jb.nodes(Yc))&&(Lb[++Hd]=Dl.decode(pc));return Lb}(r),function(jb,Lb){const pc=[];for(let Yc,Hd=-1,Kd=-1,ze=jb.buffersLength();++Hd<ze;)(Yc=jb.buffers(Hd))&&(Lb<Qb.V4&&(Yc.bb_pos+=8*(Hd+1)),pc[++Kd]=Wg.decode(Yc));return pc}(r,ra))};el.fromJSON=
Wb;ik.encode=function(r,ra){const jb=el.encode(r,ra.data);return $d.startDictionaryBatch(r),$d.addId(r,new Rk(ra.id,0)),$d.addIsDelta(r,ra.isDelta),$d.addData(r,jb),$d.endDictionaryBatch(r)};ik.decode=function(r,ra=Qb.V4){return new ik(el.decode(r.data(),ra),r.id(),r.isDelta())};ik.fromJSON=function(r){return new ik(Wb(r.data),r.id,r.isDelta)};Dl.encode=function(r,ra){return Ui.createFieldNode(r,new Rk(ra.length,0),new Rk(ra.nullCount,0))};Dl.decode=function(r){return new Dl(r.length(),r.nullCount())};
Wg.encode=function(r,ra){return Cf.createBuffer(r,new Rk(ra.offset,0),new Rk(ra.length,0))};Wg.decode=function(r){return new Wg(r.offset(),r.length())};const em=function(){const r=new ArrayBuffer(2);return(new DataView(r)).setInt16(0,256,!0),256===(new Int16Array(r))[0]}();var Ml=Cd.ByteBuffer;const Fm=r=>`Expected ${Pe[r]} Message in stream, but was null or length 0.`,om=r=>`Header pointer of flatbuffer-encoded ${Pe[r]} Message is null or length 0.`,mm=(r,ra)=>`Expected to read ${r} metadata bytes, but only read ${ra}.`,
hm=(r,ra)=>`Expected to read ${r} bytes for message body, but only read ${ra}.`;class Gm{constructor(r){this.source=r instanceof Oc?r:new Oc(r)}[Symbol.iterator](){return this}next(){let r;return(r=this.readMetadataLength()).done||-1===r.value&&(r=this.readMetadataLength()).done||(r=this.readMetadata(r.value)).done?lf:r}throw(r){return this.source.throw(r)}return(r){return this.source.return(r)}readMessage(r){let ra;if((ra=this.next()).done)return null;if(null!=r&&ra.value.headerType!==r)throw Error(Fm(r));
return ra.value}readMessageBody(r){if(0>=r)return new Uint8Array(0);const ra=K(Uint8Array,this.source.read(r));if(ra.byteLength<r)throw Error(hm(r,ra.byteLength));return 0==ra.byteOffset%8&&ra.byteOffset+ra.byteLength<=ra.buffer.byteLength?ra:ra.slice()}readSchema(r=!1){const ra=Pe.Schema;var jb=this.readMessage(ra);jb=jb&&jb.header();if(r&&!jb)throw Error(om(ra));return jb}readMetadataLength(){var r=this.source.read(4);r=(r=r&&new Ml(r))&&r.readInt32(0)||0;return{done:0===r,value:r}}readMetadata(r){const ra=
this.source.read(r);if(!ra)return lf;if(ra.byteLength<r)throw Error(mm(r,ra.byteLength));return{done:!1,value:Bj.decode(ra)}}}class im{constructor(r,ra){this.source=r instanceof Id?r:Ua(r)?new He(r,ra):new Id(r)}[Symbol.asyncIterator](){return this}next(){return I(this,void 0,void 0,function*(){let r;return(r=yield this.readMetadataLength()).done||-1===r.value&&(r=yield this.readMetadataLength()).done||(r=yield this.readMetadata(r.value)).done?lf:r})}throw(r){return I(this,void 0,void 0,function*(){return yield this.source.throw(r)})}return(r){return I(this,
void 0,void 0,function*(){return yield this.source.return(r)})}readMessage(r){return I(this,void 0,void 0,function*(){let ra;if((ra=yield this.next()).done)return null;if(null!=r&&ra.value.headerType!==r)throw Error(Fm(r));return ra.value})}readMessageBody(r){return I(this,void 0,void 0,function*(){if(0>=r)return new Uint8Array(0);const ra=K(Uint8Array,yield this.source.read(r));if(ra.byteLength<r)throw Error(hm(r,ra.byteLength));return 0==ra.byteOffset%8&&ra.byteOffset+ra.byteLength<=ra.buffer.byteLength?
ra:ra.slice()})}readSchema(r=!1){return I(this,void 0,void 0,function*(){const ra=Pe.Schema;var jb=yield this.readMessage(ra);jb=jb&&jb.header();if(r&&!jb)throw Error(om(ra));return jb})}readMetadataLength(){return I(this,void 0,void 0,function*(){var r=yield this.source.read(4);r=(r=r&&new Ml(r))&&r.readInt32(0)||0;return{done:0===r,value:r}})}readMetadata(r){return I(this,void 0,void 0,function*(){const ra=yield this.source.read(r);if(!ra)return lf;if(ra.byteLength<r)throw Error(mm(r,ra.byteLength));
return{done:!1,value:Bj.decode(ra)}})}}class Om extends Gm{constructor(r){super(new Uint8Array(0));this._schema=!1;this._body=[];this._dictionaryIndex=this._batchIndex=0;this._json=r instanceof Lg?r:new Lg(r)}next(){var {_json:r}=this;return this._schema?this._dictionaryIndex<r.dictionaries.length?(r=r.dictionaries[this._dictionaryIndex++],this._body=r.data.columns,{done:!1,value:Bj.fromJSON(r,Pe.DictionaryBatch)}):this._batchIndex<r.batches.length?(r=r.batches[this._batchIndex++],this._body=r.columns,
{done:!1,value:Bj.fromJSON(r,Pe.RecordBatch)}):(this._body=[],lf):(this._schema=!0,{done:!1,value:Bj.fromJSON(r.schema,Pe.Schema)})}readMessageBody(r){return function Lb(jb){return(jb||[]).reduce((pc,Yc)=>[...pc,...(Yc.VALIDITY&&[Yc.VALIDITY]||[]),...(Yc.TYPE&&[Yc.TYPE]||[]),...(Yc.OFFSET&&[Yc.OFFSET]||[]),...(Yc.DATA&&[Yc.DATA]||[]),...Lb(Yc.children)],[])}(this._body)}readMessage(r){let ra;if((ra=this.next()).done)return null;if(null!=r&&ra.value.headerType!==r)throw Error(Fm(r));return ra.value}readSchema(){const r=
Pe.Schema,ra=this.readMessage(r),jb=ra&&ra.header();if(!ra||!jb)throw Error(om(r));return jb}}const zk=new Uint8Array(6);for(let r=0;6>r;r+=1)zk[r]="ARROW1".charCodeAt(r);const Xl=zk.length,Zl=Xl+4,cn=2*Xl+4;class Wh extends xh{compareSchemas(r,ra){return r===ra||ra instanceof r.constructor&&this.compareManyFields(r.fields,ra.fields)}compareManyFields(r,ra){return r===ra||Array.isArray(r)&&Array.isArray(ra)&&r.length===ra.length&&r.every((jb,Lb)=>this.compareFields(jb,ra[Lb]))}compareFields(r,ra){return r===
ra||ra instanceof r.constructor&&r.name===ra.name&&r.nullable===ra.nullable&&this.visit(r.type,ra.type)}}Wh.prototype.visitNull=Jc;Wh.prototype.visitBool=Jc;Wh.prototype.visitInt=kc;Wh.prototype.visitInt8=kc;Wh.prototype.visitInt16=kc;Wh.prototype.visitInt32=kc;Wh.prototype.visitInt64=kc;Wh.prototype.visitUint8=kc;Wh.prototype.visitUint16=kc;Wh.prototype.visitUint32=kc;Wh.prototype.visitUint64=kc;Wh.prototype.visitFloat=Ab;Wh.prototype.visitFloat16=Ab;Wh.prototype.visitFloat32=Ab;Wh.prototype.visitFloat64=
Ab;Wh.prototype.visitUtf8=Jc;Wh.prototype.visitBinary=Jc;Wh.prototype.visitFixedSizeBinary=function(r,ra){return r===ra||Hb(r,ra)&&r.byteWidth===ra.byteWidth};Wh.prototype.visitDate=md;Wh.prototype.visitDateDay=md;Wh.prototype.visitDateMillisecond=md;Wh.prototype.visitTimestamp=yd;Wh.prototype.visitTimestampSecond=yd;Wh.prototype.visitTimestampMillisecond=yd;Wh.prototype.visitTimestampMicrosecond=yd;Wh.prototype.visitTimestampNanosecond=yd;Wh.prototype.visitTime=hd;Wh.prototype.visitTimeSecond=hd;
Wh.prototype.visitTimeMillisecond=hd;Wh.prototype.visitTimeMicrosecond=hd;Wh.prototype.visitTimeNanosecond=hd;Wh.prototype.visitDecimal=Jc;Wh.prototype.visitList=function(r,ra){return r===ra||Hb(r,ra)&&r.children.length===ra.children.length&&El.compareManyFields(r.children,ra.children)};Wh.prototype.visitStruct=function(r,ra){return r===ra||Hb(r,ra)&&r.children.length===ra.children.length&&El.compareManyFields(r.children,ra.children)};Wh.prototype.visitUnion=Ed;Wh.prototype.visitDenseUnion=Ed;Wh.prototype.visitSparseUnion=
Ed;Wh.prototype.visitDictionary=function(r,ra){return r===ra||Hb(r,ra)&&r.id===ra.id&&r.isOrdered===ra.isOrdered&&El.visit(r.indices,ra.indices)&&El.visit(r.dictionary,ra.dictionary)};Wh.prototype.visitInterval=Qd;Wh.prototype.visitIntervalDayTime=Qd;Wh.prototype.visitIntervalYearMonth=Qd;Wh.prototype.visitFixedSizeList=function(r,ra){return r===ra||Hb(r,ra)&&r.listSize===ra.listSize&&r.children.length===ra.children.length&&El.compareManyFields(r.children,ra.children)};Wh.prototype.visitMap=function(r,
ra){return r===ra||Hb(r,ra)&&r.keysSorted===ra.keysSorted&&r.children.length===ra.children.length&&El.compareManyFields(r.children,ra.children)};const El=new Wh;class Sj extends xh{constructor(){super();this._byteLength=0;this._nodes=[];this._buffers=[];this._bufferRegions=[]}static assemble(...r){var ra=new Sj;r=sc(Hc,r,[],0);[ra=ra]=ra.visitMany(r);return ra}visit(r){if(!eg.isDictionary(r.type)){const {data:ra,length:jb,nullCount:Lb}=r;if(2147483647<jb)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");
eg.isNull(r.type)||ed.call(this,0>=Lb?new Uint8Array(0):H(ra.offset,jb,ra.nullBitmap));this.nodes.push(new Dl(jb,Lb))}return super.visit(r)}visitNull(r){return this}visitDictionary(r){return this.visit(r.indices)}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}Sj.prototype.visitBool=function(r){let ra;return r.nullCount>=r.length?ed.call(this,new Uint8Array(0)):(ra=r.values)instanceof Uint8Array?
ed.call(this,H(r.offset,r.length,ra)):ed.call(this,oa(r))};Sj.prototype.visitInt=bc;Sj.prototype.visitFloat=bc;Sj.prototype.visitUtf8=yc;Sj.prototype.visitBinary=yc;Sj.prototype.visitFixedSizeBinary=bc;Sj.prototype.visitDate=bc;Sj.prototype.visitTimestamp=bc;Sj.prototype.visitTime=bc;Sj.prototype.visitDecimal=bc;Sj.prototype.visitList=$c;Sj.prototype.visitStruct=cc;Sj.prototype.visitUnion=function(r){const {type:ra,length:jb,typeIds:Lb,valueOffsets:pc}=r;if(ed.call(this,Lb),ra.mode===ad.Sparse)return cc.call(this,
r);if(ra.mode===ad.Dense){if(0>=r.offset)return ed.call(this,pc),cc.call(this,r);var Yc=Lb.reduce((bf,Ef)=>Math.max(bf,Ef),Lb[0]);const Kd=new Int32Array(Yc+1);Yc=(new Int32Array(Yc+1)).fill(-1);var Hd=new Int32Array(jb);const ze=fa(-pc[0],jb,pc);for(let bf,Ef,jg=-1;++jg<jb;)-1===(Ef=Yc[bf=Lb[jg]])&&(Ef=Yc[bf]=ze[bf]),Hd[jg]=ze[jg]-Ef,++Kd[bf];ed.call(this,Hd);for(let bf,Ef=-1,jg=ra.children.length;++Ef<jg;)if(bf=r.getChildAt(Ef))Hd=ra.typeIds[Ef],this.visit(bf.slice(Yc[Hd],Math.min(jb,Kd[Hd])))}return this};
Sj.prototype.visitInterval=bc;Sj.prototype.visitFixedSizeList=$c;Sj.prototype.visitMap=$c;class Xj extends xh{visit(r){return null==r?void 0:super.visit(r)}visitNull({typeId:r}){return{name:Pd[r].toLowerCase()}}visitInt({typeId:r,bitWidth:ra,isSigned:jb}){return{name:Pd[r].toLowerCase(),bitWidth:ra,isSigned:jb}}visitFloat({typeId:r,precision:ra}){return{name:Pd[r].toLowerCase(),precision:Rd[ra]}}visitBinary({typeId:r}){return{name:Pd[r].toLowerCase()}}visitBool({typeId:r}){return{name:Pd[r].toLowerCase()}}visitUtf8({typeId:r}){return{name:Pd[r].toLowerCase()}}visitDecimal({typeId:r,
scale:ra,precision:jb}){return{name:Pd[r].toLowerCase(),scale:ra,precision:jb}}visitDate({typeId:r,unit:ra}){return{name:Pd[r].toLowerCase(),unit:Md[ra]}}visitTime({typeId:r,unit:ra,bitWidth:jb}){return{name:Pd[r].toLowerCase(),unit:nd[ra],bitWidth:jb}}visitTimestamp({typeId:r,timezone:ra,unit:jb}){return{name:Pd[r].toLowerCase(),unit:nd[jb],timezone:ra}}visitInterval({typeId:r,unit:ra}){return{name:Pd[r].toLowerCase(),unit:ee[ra]}}visitList({typeId:r}){return{name:Pd[r].toLowerCase()}}visitStruct({typeId:r}){return{name:Pd[r].toLowerCase()}}visitUnion({typeId:r,
mode:ra,typeIds:jb}){return{name:Pd[r].toLowerCase(),mode:ad[ra],typeIds:[...jb]}}visitDictionary(r){return this.visit(r.dictionary)}visitFixedSizeBinary({typeId:r,byteWidth:ra}){return{name:Pd[r].toLowerCase(),byteWidth:ra}}visitFixedSizeList({typeId:r,listSize:ra}){return{name:Pd[r].toLowerCase(),listSize:ra}}visitMap({typeId:r,keysSorted:ra}){return{name:Pd[r].toLowerCase(),keysSorted:ra}}}class Oj extends xh{static assemble(...r){return(new Oj).visitMany(Ic(Hc,r,[],0))}visit(r){const {data:ra,
name:jb,length:Lb}=r,{offset:pc,nullCount:Yc,nullBitmap:Hd}=ra;r=eg.isDictionary(r.type)?r.type.indices:r.type;const Kd=Object.assign([],ra.buffers,{[Ze.VALIDITY]:void 0});return Object.assign({name:jb,count:Lb,VALIDITY:eg.isNull(r)?void 0:0>=Yc?Array.from({length:Lb},()=>1):[...(new nj(Hd,pc,Lb,null,ha))]},super.visit(qb.new(ra.clone(r,pc,Lb,0,Kd))))}visitNull(){return{}}visitBool({values:r,offset:ra,length:jb}){return{DATA:[...(new nj(r,ra,jb,null,aa))]}}visitInt(r){return{DATA:64>r.type.bitWidth?
[...r.values]:[...tc(r.values,2)]}}visitFloat(r){return{DATA:[...r.values]}}visitUtf8(r){return{DATA:[...r],OFFSET:[...r.valueOffsets]}}visitBinary(r){return{DATA:[...tb(r)],OFFSET:[...r.valueOffsets]}}visitFixedSizeBinary(r){return{DATA:[...tb(r)]}}visitDate(r){return{DATA:r.type.unit===Md.DAY?[...r.values]:[...tc(r.values,2)]}}visitTimestamp(r){return{DATA:[...tc(r.values,2)]}}visitTime(r){return{DATA:r.type.unit<nd.MICROSECOND?[...r.values]:[...tc(r.values,2)]}}visitDecimal(r){return{DATA:[...tc(r.values,
4)]}}visitList(r){return{OFFSET:[...r.valueOffsets],children:r.type.children.map((ra,jb)=>this.visit(new fj(ra,[r.getChildAt(jb)])))}}visitStruct(r){return{children:r.type.children.map((ra,jb)=>this.visit(new fj(ra,[r.getChildAt(jb)])))}}visitUnion(r){return{TYPE:[...r.typeIds],OFFSET:r.type.mode===ad.Dense?[...r.valueOffsets]:void 0,children:r.type.children.map((ra,jb)=>this.visit(new fj(ra,[r.getChildAt(jb)])))}}visitInterval(r){return{DATA:[...r.values]}}visitFixedSizeList(r){return{children:r.type.children.map((ra,
jb)=>this.visit(new fj(ra,[r.getChildAt(jb)])))}}visitMap(r){return{OFFSET:[...r.valueOffsets],children:r.type.children.map((ra,jb)=>this.visit(new fj(ra,[r.getChildAt(jb)])))}}}class tm extends rg{constructor(r){super();this._position=0;this._started=!1;this._sink=new ic;this._schema=null;this._dictionaryBlocks=[];this._recordBatchBlocks=[];this._dictionaryDeltaOffsets=new Map;null!=r&&Object(r)===r||(r={autoDestroy:!0,writeLegacyIpcFormat:!1});this._autoDestroy="boolean"!=typeof r.autoDestroy||
r.autoDestroy;this._writeLegacyIpcFormat="boolean"==typeof r.writeLegacyIpcFormat&&r.writeLegacyIpcFormat}static throughNode(r){throw Error('"throughNode" not available in this environment');}static throughDOM(r,ra){throw Error('"throughDOM" not available in this environment');}toString(r=!1){return this._sink.toString(r)}toUint8Array(r=!1){return this._sink.toUint8Array(r)}writeAll(r){return Yh(r)?r.then(ra=>this.writeAll(ra)):Wc(r)?cd(this,r):Ec(this,r)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(r){return this._sink.toDOMStream(r)}toNodeStream(r){return this._sink.toNodeStream(r)}close(){return this.reset()._sink.close()}abort(r){return this.reset()._sink.abort(r)}finish(){return this._autoDestroy?
this.close():this.reset(this._sink,this._schema),this}reset(r=this._sink,ra=null){if(r===this._sink||r instanceof ic)this._sink=r;else if(this._sink=new ic,r&&null!=r&&Object(r)===r&&ei(r.abort)&&ei(r.getWriter)&&!(r instanceof rg))this.toDOMStream({type:"bytes"}).pipeTo(r);else{var jb;if(jb=r)jb=null!=r&&Object(r)===r&&ei(r.end)&&ei(r.write)&&"boolean"==typeof r.writable&&!(r instanceof rg);jb&&this.toNodeStream({objectMode:!1}).pipe(r)}return this._started&&this._schema&&this._writeFooter(this._schema),
this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,ra&&fd(ra,this._schema)||(null===ra?(this._position=0,this._schema=null):(this._started=!0,this._schema=ra,this._writeSchema(ra))),this}write(r){let ra=null;if(!this._sink)throw Error("RecordBatchWriter is closed");if(null==r||r instanceof ac&&!(ra=r.schema)||r instanceof Hc&&!(ra=r.schema))return this.finish()&&void 0;if(ra&&!fd(ra,this._schema)){if(this._started&&this._autoDestroy)return this.close();
this.reset(this._sink,ra)}r instanceof Hc?r instanceof Rc||this._writeRecordBatch(r):r instanceof ac?this.writeAll(r.chunks):wh(r)&&this.writeAll(r)}_writeMessage(r,ra=8){var jb=ra-1;ra=Bj.encode(r);const Lb=ra.byteLength,pc=this._writeLegacyIpcFormat?4:8;jb=Lb+pc+jb&~jb;const Yc=jb-Lb-pc;return r.headerType===Pe.RecordBatch?this._recordBatchBlocks.push(new Yb(jb,r.bodyLength,this._position)):r.headerType===Pe.DictionaryBatch&&this._dictionaryBlocks.push(new Yb(jb,r.bodyLength,this._position)),this._writeLegacyIpcFormat||
this._write(Int32Array.of(-1)),this._write(Int32Array.of(jb-pc)),0<Lb&&this._write(ra),this._writePadding(Yc)}_write(r){this._started&&(r=K(Uint8Array,r))&&0<r.byteLength&&(this._sink.write(r),this._position+=r.byteLength);return this}_writeSchema(r){return this._writeMessage(Bj.from(r))}_writeFooter(r){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(zk)}_writePadding(r){return 0<r?this._write(new Uint8Array(r)):this}_writeRecordBatch(r){const {byteLength:ra,
nodes:jb,bufferRegions:Lb,buffers:pc}=Sj.assemble(r);var Yc=new el(r.length,jb,Lb);Yc=Bj.from(Yc,ra);return this._writeDictionaries(r)._writeMessage(Yc)._writeBodyBuffers(pc)}_writeDictionaryBatch(r,ra,jb=!1){this._dictionaryDeltaOffsets.set(ra,r.length+(this._dictionaryDeltaOffsets.get(ra)||0));const {byteLength:Lb,nodes:pc,bufferRegions:Yc,buffers:Hd}=Sj.assemble(r);r=new el(r.length,pc,Yc);ra=new ik(r,ra,jb);ra=Bj.from(ra,Lb);return this._writeMessage(ra)._writeBodyBuffers(Hd)}_writeBodyBuffers(r){let ra,
jb,Lb;for(let pc=-1,Yc=r.length;++pc<Yc;)(ra=r[pc])&&0<(jb=ra.byteLength)&&(this._write(ra),0<(Lb=(jb+7&-8)-jb)&&this._writePadding(Lb));return this}_writeDictionaries(r){for(let [ra,jb]of r.dictionaries)if(r=this._dictionaryDeltaOffsets.get(ra)||0,0===r||0<(jb=jb.slice(r)).length){const Lb="chunks"in jb?jb.chunks:[jb];for(const pc of Lb)this._writeDictionaryBatch(pc,ra,0<r),r+=pc.length}return this}}class fm extends tm{static writeAll(r,ra){const jb=new fm(ra);return Yh(r)?r.then(Lb=>jb.writeAll(Lb)):
Wc(r)?cd(jb,r):Ec(jb,r)}}class y extends tm{static writeAll(r){const ra=new y;return Yh(r)?r.then(jb=>ra.writeAll(jb)):Wc(r)?cd(ra,r):Ec(ra,r)}constructor(){super();this._autoDestroy=!0}_writeSchema(r){return this._writeMagic()._writePadding(2)}_writeFooter(r){const ra=zl.encode(new zl(r,Qb.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(r)._write(ra)._write(Int32Array.of(ra.byteLength))._writeMagic()}}class ma extends tm{constructor(){super();this._autoDestroy=!0;this._recordBatches=
[];this._dictionaries=[]}static writeAll(r){return(new ma).writeAll(r)}_writeMessage(){return this}_writeFooter(r){return this}_writeSchema(r){return this._write('{\n  "schema": '+JSON.stringify({fields:r.fields.map(bd)},null,2))}_writeDictionaries(r){return 0<r.dictionaries.size&&this._dictionaries.push(r),this}_writeDictionaryBatch(r,ra,jb=!1){return this._dictionaryDeltaOffsets.set(ra,r.length+(this._dictionaryDeltaOffsets.get(ra)||0)),this._write(0===this._dictionaryBlocks.length?"    ":",\n    "),
this._write(""+function(Lb,pc,Yc=!1){var Hd=new Zh(""+pc,Lb.type,0<Lb.nullCount);Hd=Oj.assemble(new fj(Hd,[Lb]));return JSON.stringify({id:pc,isDelta:Yc,data:{count:Lb.length,columns:Hd}},null,2)}(r,ra,jb)),this._dictionaryBlocks.push(new Yb(0,0,0)),this}_writeRecordBatch(r){return this._writeDictionaries(r),this._recordBatches.push(r),this}close(){if(0<this._dictionaries.length){this._write(',\n  "dictionaries": [\n');for(const ra of this._dictionaries)super._writeDictionaries(ra);this._write("\n  ]")}if(0<
this._recordBatches.length){for(let ra=-1,jb=this._recordBatches.length;++ra<jb;)this._write(0===ra?',\n  "batches": [\n    ':",\n    "),this._write(""+(r=this._recordBatches[ra],JSON.stringify({count:r.length,columns:Oj.assemble(r)},null,2))),this._recordBatchBlocks.push(new Yb(0,0,0));this._write("\n  ]")}var r;return this._schema&&this._write("\n}"),this._dictionaries=[],this._recordBatches=[],super.close()}}const Wa=new Uint8Array(0);class Ra extends qb{constructor(r,ra){super();this._children=
ra;this.numChildren=r.childData.length;this._bindDataAccessors(this.data=r)}get type(){return this.data.type}get typeId(){return this.data.typeId}get length(){return this.data.length}get offset(){return this.data.offset}get stride(){return this.data.stride}get nullCount(){return this.data.nullCount}get byteLength(){return this.data.byteLength}get VectorName(){return Xd[this.typeId]+"Vector"}get ArrayType(){return this.type.ArrayType}get values(){return this.data.values}get typeIds(){return this.data.typeIds}get nullBitmap(){return this.data.nullBitmap}get valueOffsets(){return this.data.valueOffsets}get [Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}clone(r,
ra=this._children){return qb.new(r,ra)}concat(...r){return Ci.concat(this,...r)}slice(r,ra){return cb(this,r,ra,this._sliceInternal)}isValid(r){return 0<this.nullCount?(r=this.offset+r,0!==(this.nullBitmap[r>>3]&1<<r%8)):!0}getChildAt(r){return 0>r||r>=this.numChildren?null:(this._children||(this._children=[]))[r]||(this._children[r]=qb.new(this.data.childData[r]))}toJSON(){return[...this]}_sliceInternal(r,ra,jb){return r.clone(r.data.slice(ra,jb-ra),null)}_bindDataAccessors(r){}}Ra.prototype[Symbol.isConcatSpreadable]=
!0;class kb extends Ra{asUtf8(){return qb.new(this.data.clone(new Sh))}}class Tb extends Ra{static from(r){return Bf(()=>new Eh,r)}}class uc extends Ra{static from(...r){return 2===r.length?Bf(()=>r[1]===Md.DAY?new ng:new kh,r[0]):Bf(()=>new kh,r[0])}}class xc extends uc{}class dd extends uc{}class Gd extends Ra{}class Yd extends Ra{constructor(r){super(r);this.indices=qb.new(r.clone(this.type.indices))}static from(...r){if(3===r.length){const [ra,jb,Lb]=r,pc=new ci(ra.type,jb,null,null);return qb.new(Ng.Dictionary(pc,
0,Lb.length,0,null,Lb,ra))}return Bf(()=>r[0].type,r[0])}get dictionary(){return this.data.dictionary}reverseLookup(r){return this.dictionary.indexOf(r)}getKey(r){return this.indices.get(r)}getValue(r){return this.dictionary.get(r)}setKey(r,ra){return this.indices.set(r,ra)}setValue(r,ra){return this.dictionary.set(r,ra)}}Yd.prototype.indices=null;class Be extends Ra{}class Ie extends Ra{}class Ke extends Ra{static from(r){let ra=Ah(this);if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)){var jb=
Fk(r.constructor)||ra;if(null===ra&&(ra=jb),ra&&ra===jb){jb=new ra;const Lb=r.byteLength/jb.ArrayType.BYTES_PER_ELEMENT;if(ra!==qg||r.constructor===Uint16Array)return qb.new(Ng.Float(jb,0,Lb,0,null,r))}}if(ra)return Bf(()=>new ra,r);if(r instanceof DataView||r instanceof ArrayBuffer)throw new TypeError("Cannot infer float type from instance of "+r.constructor.name);throw new TypeError("Unrecognized FloatVector input");}}class Af extends Ke{toFloat32Array(){return new Float32Array(this)}toFloat64Array(){return new Float64Array(this)}}
class Gg extends Ke{}class zh extends Ke{}const Fk=r=>{switch(r){case Uint16Array:return qg;case Float32Array:return lh;case Float64Array:return pi;default:return null}},Ah=r=>{switch(r){case Af:return qg;case Gg:return lh;case zh:return pi;default:return null}};class zi extends Ra{}class Fj extends zi{}class Kj extends zi{}class Pi extends Ra{static from(...r){const [ra,jb=!1]=r;let Lb=hk(this,jb);if(ra instanceof ArrayBuffer||ArrayBuffer.isView(ra))if(r=Gl(ra.constructor,jb)||Lb,null===Lb&&(Lb=
r),Lb&&Lb===r){r=new Lb;let pc=ra.byteLength/r.ArrayType.BYTES_PER_ELEMENT;return kk(Lb,ra.constructor)&&(pc*=.5),qb.new(Ng.Int(r,0,pc,0,null,ra))}if(Lb)return Bf(()=>new Lb,ra);if(ra instanceof DataView||ra instanceof ArrayBuffer)throw new TypeError("Cannot infer integer type from instance of "+ra.constructor.name);throw new TypeError("Unrecognized IntVector input");}}class Ti extends Pi{}class Cj extends Pi{}class jj extends Pi{}class $i extends Pi{toBigInt64Array(){return K(Zg,this.values)}get values64(){return this._values64||
(this._values64=this.toBigInt64Array())}}class Ok extends Pi{}class yk extends Pi{}class dl extends Pi{}class Ij extends Pi{toBigUint64Array(){return K(oi,this.values)}get values64(){return this._values64||(this._values64=this.toBigUint64Array())}}const kk=(r,ra)=>!(r!==oe&&r!==fg||ra!==Int32Array&&ra!==Uint32Array),Gl=(r,ra)=>{switch(r){case Int8Array:return Sb;case Int16Array:return Qc;case Int32Array:return ra?oe:ud;case Zg:return oe;case Uint8Array:return ue;case Uint16Array:return Of;case Uint32Array:return ra?
fg:kf;case oi:return fg;default:return null}},hk=(r,ra)=>{switch(r){case Ti:return Sb;case Cj:return Qc;case jj:return ra?oe:ud;case $i:return oe;case Ok:return ue;case yk:return Of;case dl:return ra?fg:kf;case Ij:return fg;default:return null}};class il extends Ra{}class cl extends Ra{asList(){return qb.new(this.data.clone(new Aj(this.type.children[0])))}bind(r){const ra=this.getChildAt(0),{[r]:jb,[r+1]:Lb}=this.valueOffsets;return new Rh(ra.slice(jb,Lb))}}class Bm extends Ra{}const qn=Symbol.for("rowIndex");
class Cm extends Ra{bind(r){var ra=this._row||(this._row=new Ej(this));ra=Object.create(ra);return ra[qn]=r,ra}}class Nl extends Ra{}class Fl extends Nl{}class Gk extends Nl{}class Al extends Nl{}class um extends Nl{}class pm extends Ra{}class Zk extends pm{}class Dm extends pm{}class ol extends pm{}class Nm extends pm{}class wm extends Ra{get typeIdToChildIndex(){return this.data.type.typeIdToChildIndex}}class xm extends wm{get valueOffsets(){return this.data.valueOffsets}}class dn extends wm{}class Ol extends Ra{static from(r){return Bf(()=>
new Sh,r)}asBinary(){return qb.new(this.data.clone(new bj))}}class Ai extends xh{}const tk=(r,ra)=>4294967296*r[ra+1]+(r[ra]>>>0),vm=(r,ra,jb)=>{const {[jb]:Lb,[jb+1]:pc}=ra;return null!=Lb&&null!=pc?r.subarray(Lb,pc):null},am=({values:r},ra)=>new Date(864E5*r[ra]),Pl=({values:r},ra)=>new Date(tk(r,2*ra)),dj=({stride:r,values:ra},jb)=>ra[r*jb],km=({stride:r,values:ra},jb)=>Ta(ra[r*jb]),jm=({stride:r,values:ra,type:jb},Lb)=>Rb.new(ra.subarray(r*Lb,r*(Lb+1)),jb.isSigned),Ql=({values:r},ra)=>1E3*tk(r,
2*ra),Km=({values:r},ra)=>tk(r,2*ra),Jh=({values:r},ra)=>{ra*=2;return r[ra+1]/1E3*4294967296+(r[ra]>>>0)/1E3},vk=({values:r},ra)=>{ra*=2;return r[ra+1]/1E6*4294967296+(r[ra]>>>0)/1E6},bm=({values:r,stride:ra},jb)=>r[ra*jb],Hk=({values:r,stride:ra},jb)=>r[ra*jb],vb=({values:r},ra)=>Rb.signed(r.subarray(2*ra,2*(ra+1))),fc=({values:r},ra)=>Rb.signed(r.subarray(2*ra,2*(ra+1))),jc=(r,ra)=>{const jb=r.getChildAt(r.typeIdToChildIndex[r.typeIds[ra]]);return jb?jb.get(r.valueOffsets[ra]):null},Fc=(r,ra)=>
(r=r.getChildAt(r.typeIdToChildIndex[r.typeIds[ra]]))?r.get(ra):null,Pc=({values:r},ra)=>r.subarray(2*ra,2*(ra+1)),va=({values:r},ra)=>{r=r[ra];ra=new Int32Array(2);return ra[0]=r/12|0,ra[1]=r%12|0,ra};Ai.prototype.visitNull=(r,ra)=>null;Ai.prototype.visitBool=({offset:r,values:ra},jb)=>{r+=jb;return 0!=(ra[r>>3]&1<<r%8)};Ai.prototype.visitInt=(r,ra)=>64>r.type.bitWidth?dj(r,ra):jm(r,ra);Ai.prototype.visitInt8=dj;Ai.prototype.visitInt16=dj;Ai.prototype.visitInt32=dj;Ai.prototype.visitInt64=jm;Ai.prototype.visitUint8=
dj;Ai.prototype.visitUint16=dj;Ai.prototype.visitUint32=dj;Ai.prototype.visitUint64=jm;Ai.prototype.visitFloat=(r,ra)=>r.type.precision!==Rd.HALF?dj(r,ra):km(r,ra);Ai.prototype.visitFloat16=km;Ai.prototype.visitFloat32=dj;Ai.prototype.visitFloat64=dj;Ai.prototype.visitUtf8=({values:r,valueOffsets:ra},jb)=>{r=vm(r,ra,jb);return null!==r?sf.decode(r):null};Ai.prototype.visitBinary=({values:r,valueOffsets:ra},jb)=>vm(r,ra,jb);Ai.prototype.visitFixedSizeBinary=({stride:r,values:ra},jb)=>ra.subarray(r*
jb,r*(jb+1));Ai.prototype.visitDate=(r,ra)=>r.type.unit===Md.DAY?am(r,ra):Pl(r,ra);Ai.prototype.visitDateDay=am;Ai.prototype.visitDateMillisecond=Pl;Ai.prototype.visitTimestamp=(r,ra)=>{switch(r.type.unit){case nd.SECOND:return Ql(r,ra);case nd.MILLISECOND:return Km(r,ra);case nd.MICROSECOND:return Jh(r,ra);case nd.NANOSECOND:return vk(r,ra)}};Ai.prototype.visitTimestampSecond=Ql;Ai.prototype.visitTimestampMillisecond=Km;Ai.prototype.visitTimestampMicrosecond=Jh;Ai.prototype.visitTimestampNanosecond=
vk;Ai.prototype.visitTime=(r,ra)=>{switch(r.type.unit){case nd.SECOND:return bm(r,ra);case nd.MILLISECOND:return Hk(r,ra);case nd.MICROSECOND:return vb(r,ra);case nd.NANOSECOND:return fc(r,ra)}};Ai.prototype.visitTimeSecond=bm;Ai.prototype.visitTimeMillisecond=Hk;Ai.prototype.visitTimeMicrosecond=vb;Ai.prototype.visitTimeNanosecond=fc;Ai.prototype.visitDecimal=({values:r},ra)=>Rb.decimal(r.subarray(4*ra,4*(ra+1)));Ai.prototype.visitList=(r,ra)=>{const jb=r.getChildAt(0),{valueOffsets:Lb,stride:pc}=
r;return jb.slice(Lb[ra*pc],Lb[ra*pc+1])};Ai.prototype.visitStruct=(r,ra)=>r.bind(ra);Ai.prototype.visitUnion=(r,ra)=>r.type.mode===ad.Dense?jc(r,ra):Fc(r,ra);Ai.prototype.visitDenseUnion=jc;Ai.prototype.visitSparseUnion=Fc;Ai.prototype.visitDictionary=(r,ra)=>r.getValue(r.getKey(ra));Ai.prototype.visitInterval=(r,ra)=>r.type.unit===ee.DAY_TIME?Pc(r,ra):va(r,ra);Ai.prototype.visitIntervalDayTime=Pc;Ai.prototype.visitIntervalYearMonth=va;Ai.prototype.visitFixedSizeList=(r,ra)=>{const jb=r.getChildAt(0);
({stride:r}=r);return jb.slice(ra*r,(ra+1)*r)};Ai.prototype.visitMap=(r,ra)=>r.bind(ra);const sa=new Ai;class Ja extends xh{}Ja.prototype.visitNull=function(r,ra){return null===ra&&0<r.length?0:-1};Ja.prototype.visitBool=Vd;Ja.prototype.visitInt=Vd;Ja.prototype.visitInt8=Vd;Ja.prototype.visitInt16=Vd;Ja.prototype.visitInt32=Vd;Ja.prototype.visitInt64=Vd;Ja.prototype.visitUint8=Vd;Ja.prototype.visitUint16=Vd;Ja.prototype.visitUint32=Vd;Ja.prototype.visitUint64=Vd;Ja.prototype.visitFloat=Vd;Ja.prototype.visitFloat16=
Vd;Ja.prototype.visitFloat32=Vd;Ja.prototype.visitFloat64=Vd;Ja.prototype.visitUtf8=Vd;Ja.prototype.visitBinary=Vd;Ja.prototype.visitFixedSizeBinary=Vd;Ja.prototype.visitDate=Vd;Ja.prototype.visitDateDay=Vd;Ja.prototype.visitDateMillisecond=Vd;Ja.prototype.visitTimestamp=Vd;Ja.prototype.visitTimestampSecond=Vd;Ja.prototype.visitTimestampMillisecond=Vd;Ja.prototype.visitTimestampMicrosecond=Vd;Ja.prototype.visitTimestampNanosecond=Vd;Ja.prototype.visitTime=Vd;Ja.prototype.visitTimeSecond=Vd;Ja.prototype.visitTimeMillisecond=
Vd;Ja.prototype.visitTimeMicrosecond=Vd;Ja.prototype.visitTimeNanosecond=Vd;Ja.prototype.visitDecimal=Vd;Ja.prototype.visitList=Vd;Ja.prototype.visitStruct=Vd;Ja.prototype.visitUnion=Vd;Ja.prototype.visitDenseUnion=re;Ja.prototype.visitSparseUnion=re;Ja.prototype.visitDictionary=Vd;Ja.prototype.visitInterval=Vd;Ja.prototype.visitIntervalDayTime=Vd;Ja.prototype.visitIntervalYearMonth=Vd;Ja.prototype.visitFixedSizeList=Vd;Ja.prototype.visitMap=Vd;const E=new Ja;class W extends xh{}class ya{constructor(r,
ra){this.vector=r;this.getFn=ra;this.index=0}next(){return this.index<this.vector.length?{value:this.getFn(this.vector,this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}W.prototype.visitNull=Wd;W.prototype.visitBool=Wd;W.prototype.visitInt=Wd;W.prototype.visitInt8=Wd;W.prototype.visitInt16=Wd;W.prototype.visitInt32=Wd;W.prototype.visitInt64=Wd;W.prototype.visitUint8=Wd;W.prototype.visitUint16=Wd;W.prototype.visitUint32=Wd;W.prototype.visitUint64=Wd;W.prototype.visitFloat=Wd;W.prototype.visitFloat16=
Wd;W.prototype.visitFloat32=Wd;W.prototype.visitFloat64=Wd;W.prototype.visitUtf8=Wd;W.prototype.visitBinary=Wd;W.prototype.visitFixedSizeBinary=Wd;W.prototype.visitDate=Wd;W.prototype.visitDateDay=Wd;W.prototype.visitDateMillisecond=Wd;W.prototype.visitTimestamp=Wd;W.prototype.visitTimestampSecond=Wd;W.prototype.visitTimestampMillisecond=Wd;W.prototype.visitTimestampMicrosecond=Wd;W.prototype.visitTimestampNanosecond=Wd;W.prototype.visitTime=Wd;W.prototype.visitTimeSecond=Wd;W.prototype.visitTimeMillisecond=
Wd;W.prototype.visitTimeMicrosecond=Wd;W.prototype.visitTimeNanosecond=Wd;W.prototype.visitDecimal=Wd;W.prototype.visitList=Wd;W.prototype.visitStruct=Wd;W.prototype.visitUnion=Wd;W.prototype.visitDenseUnion=Wd;W.prototype.visitSparseUnion=Wd;W.prototype.visitDictionary=Wd;W.prototype.visitInterval=Wd;W.prototype.visitIntervalDayTime=Wd;W.prototype.visitIntervalYearMonth=Wd;W.prototype.visitFixedSizeList=Wd;W.prototype.visitMap=Wd;const Na=new W;class gb extends xh{}gb.prototype.visitNull=Fe;gb.prototype.visitBool=
Fe;gb.prototype.visitInt=Fe;gb.prototype.visitInt8=Fe;gb.prototype.visitInt16=Fe;gb.prototype.visitInt32=Fe;gb.prototype.visitInt64=Fe;gb.prototype.visitUint8=Fe;gb.prototype.visitUint16=Fe;gb.prototype.visitUint32=Fe;gb.prototype.visitUint64=Fe;gb.prototype.visitFloat=Fe;gb.prototype.visitFloat16=Fe;gb.prototype.visitFloat32=Fe;gb.prototype.visitFloat64=Fe;gb.prototype.visitUtf8=Fe;gb.prototype.visitBinary=Fe;gb.prototype.visitFixedSizeBinary=Fe;gb.prototype.visitDate=Fe;gb.prototype.visitDateDay=
Fe;gb.prototype.visitDateMillisecond=Fe;gb.prototype.visitTimestamp=Fe;gb.prototype.visitTimestampSecond=Fe;gb.prototype.visitTimestampMillisecond=Fe;gb.prototype.visitTimestampMicrosecond=Fe;gb.prototype.visitTimestampNanosecond=Fe;gb.prototype.visitTime=Fe;gb.prototype.visitTimeSecond=Fe;gb.prototype.visitTimeMillisecond=Fe;gb.prototype.visitTimeMicrosecond=Fe;gb.prototype.visitTimeNanosecond=Fe;gb.prototype.visitDecimal=Fe;gb.prototype.visitList=Fe;gb.prototype.visitStruct=Fe;gb.prototype.visitUnion=
Fe;gb.prototype.visitDenseUnion=Fe;gb.prototype.visitSparseUnion=Fe;gb.prototype.visitDictionary=Fe;gb.prototype.visitInterval=Fe;gb.prototype.visitIntervalDayTime=Fe;gb.prototype.visitIntervalYearMonth=Fe;gb.prototype.visitFixedSizeList=Fe;gb.prototype.visitMap=Fe;const rb=new gb,yb=(r,ra)=>r+ra,Mb=r=>"Cannot compute the byte width of variable-width column "+r,Ib=new class extends xh{visitNull(r){return 0}visitInt(r){return r.bitWidth/8}visitFloat(r){return r.ArrayType.BYTES_PER_ELEMENT}visitBinary(r){throw Error(Mb(r));
}visitUtf8(r){throw Error(Mb(r));}visitBool(r){return.125}visitDecimal(r){return 16}visitDate(r){return 4*(r.unit+1)}visitTime(r){return r.bitWidth/8}visitTimestamp(r){return r.unit===nd.SECOND?4:8}visitInterval(r){return 4*(r.unit+1)}visitList(r){throw Error(Mb(r));}visitStruct(r){return this.visitFields(r.children).reduce(yb,0)}visitUnion(r){return this.visitFields(r.children).reduce(yb,0)}visitFixedSizeBinary(r){return r.byteWidth}visitFixedSizeList(r){return r.listSize*this.visitFields(r.children).reduce(yb,
0)}visitMap(r){return this.visitFields(r.children).reduce(yb,0)}visitDictionary(r){return this.visit(r.indices)}visitFields(r){return(r||[]).map(ra=>this.visit(ra.type))}visitSchema(r){return this.visitFields(r.fields).reduce(yb,0)}},$b=new class extends xh{visitNull(){return Bm}visitBool(){return Tb}visitInt(){return Pi}visitInt8(){return Ti}visitInt16(){return Cj}visitInt32(){return jj}visitInt64(){return $i}visitUint8(){return Ok}visitUint16(){return yk}visitUint32(){return dl}visitUint64(){return Ij}visitFloat(){return Ke}visitFloat16(){return Af}visitFloat32(){return Gg}visitFloat64(){return zh}visitUtf8(){return Ol}visitBinary(){return kb}visitFixedSizeBinary(){return Be}visitDate(){return uc}visitDateDay(){return xc}visitDateMillisecond(){return dd}visitTimestamp(){return Nl}visitTimestampSecond(){return Fl}visitTimestampMillisecond(){return Gk}visitTimestampMicrosecond(){return Al}visitTimestampNanosecond(){return um}visitTime(){return pm}visitTimeSecond(){return Zk}visitTimeMillisecond(){return Dm}visitTimeMicrosecond(){return ol}visitTimeNanosecond(){return Nm}visitDecimal(){return Gd}visitList(){return il}visitStruct(){return Cm}visitUnion(){return wm}visitDenseUnion(){return xm}visitSparseUnion(){return dn}visitDictionary(){return Yd}visitInterval(){return zi}visitIntervalDayTime(){return Fj}visitIntervalYearMonth(){return Kj}visitFixedSizeList(){return Ie}visitMap(){return cl}};
qb.new=function(r,...ra){return new ($b.getVisitFn(r)())(r,...ra)};qb.from=function(r){r=Object.assign({nullValues:[null,void 0]},r);const {values:ra=[]}=r,jb=x(r,["values"]);return wh(ra)?(r=[...oj.throughIterable(jb)(ra)],1===r.length?r[0]:Ci.concat(r)):(Lb=>I(this,void 0,void 0,function*(){var pc;const Yc=oj.throughAsyncIterable(jb);try{for(var Hd,Kd=X(Yc(ra));!(Hd=yield Kd.next()).done;)Lb.push(Hd.value)}catch(bf){var ze={error:bf}}finally{try{Hd&&!Hd.done&&(pc=Kd.return)&&(yield pc.call(Kd))}finally{if(ze)throw ze.error;
}}return 1===Lb.length?Lb[0]:Ci.concat(Lb)}))([])};Ra.prototype.get=function(r){return sa.visit(this,r)};Ra.prototype.set=function(r,ra){return uj.visit(this,r,ra)};Ra.prototype.indexOf=function(r,ra){return E.visit(this,r,ra)};Ra.prototype.toArray=function(){return rb.visit(this)};Ra.prototype.getByteWidth=function(){return Ib.visit(this.type)};Ra.prototype[Symbol.iterator]=function(){return Na.visit(this)};Ra.prototype._bindDataAccessors=function(){const r=this.nullBitmap;r&&0<r.byteLength&&(this.get=
(ra=this.get,function(jb){return this.isValid(jb)?ra.call(this,jb):null}),this.set=function(jb){return function(Lb,pc){ka(this.nullBitmap,this.offset+Lb,null!=pc)&&jb.call(this,Lb,pc)}}(this.set));var ra};Object.keys(Xd).map(r=>Xd[r]).filter(r=>"number"==typeof r).filter(r=>r!==Xd.NONE).forEach(r=>{const ra=$b.visit(r);var jb;ra.prototype.get=(jb=sa.getVisitFn(r),function(Lb){return jb(this,Lb)});ra.prototype.set=sd(uj.getVisitFn(r));ra.prototype.indexOf=sd(E.getVisitFn(r));ra.prototype.toArray=xd(rb.getVisitFn(r));
ra.prototype.getByteWidth=function(Lb){return function(){return Lb(this.type)}}(Ib.getVisitFn(r));ra.prototype[Symbol.iterator]=xd(Na.getVisitFn(r))});class ac extends Ci{constructor(...r){let ra=null;r[0]instanceof sh&&(ra=r.shift());r=Ob(Hc,r,[],0);if(!ra&&!(ra=r[0]&&r[0].schema))throw new TypeError("Table must be initialized with a Schema or at least one RecordBatch");r[0]||(r[0]=new Rc(ra));super(new Hj(ra.fields),r);this._schema=ra;this._chunks=r}static empty(r=new sh([])){return new ac(r,[])}static from(r){if(!r)return ac.empty();
if("object"==typeof r){const jb=wh(r.values)?function(Lb){const {type:pc}=Lb;return pc instanceof Hj?ac.fromStruct(Cm.from(Lb)):null}(r):Wc(r.values)?function(Lb){const {type:pc}=Lb;return pc instanceof Hj?Cm.from(Lb).then(Yc=>ac.fromStruct(Yc)):null}(r):null;if(null!==jb)return jb}let ra=pd.from(r);return Yh(ra)?(()=>I(this,void 0,void 0,function*(){return yield ac.from(yield ra)}))():ra.isSync()&&(ra=ra.open())?ra.schema?new ac(ra.schema,[...ra]):ac.empty():(jb=>I(this,void 0,void 0,function*(){var Lb;
const pc=yield jb,Yc=pc.schema,Hd=[];if(Yc){try{for(var Kd,ze=X(pc);!(Kd=yield ze.next()).done;)Hd.push(Kd.value)}catch(Ef){var bf={error:Ef}}finally{try{Kd&&!Kd.done&&(Lb=ze.return)&&(yield Lb.call(ze))}finally{if(bf)throw bf.error;}}return new ac(Yc,Hd)}return ac.empty()}))(ra.open())}static fromAsync(r){return I(this,void 0,void 0,function*(){return yield ac.from(r)})}static fromStruct(r){return ac.new(r.data.childData,r.type.children)}static new(...r){return new ac(...(ra=(jb=>{const [Lb,pc]=
Xb(jb,[[],[]]);return pc.map((Yc,Hd)=>Yc instanceof fj?fj.new(Yc.field.clone(Lb[Hd]),Yc):Yc instanceof qb?fj.new(Lb[Hd],Yc):fj.new(Lb[Hd],[]))})(r),od(new sh(ra.map(({field:jb})=>jb)),ra)));var ra}get schema(){return this._schema}get length(){return this._length}get chunks(){return this._chunks}get numCols(){return this._numChildren}clone(r=this._chunks){return new ac(this._schema,r)}getColumn(r){return this.getColumnAt(this.getColumnIndex(r))}getColumnAt(r){return this.getChildAt(r)}getColumnIndex(r){return this._schema.fields.findIndex(ra=>
ra.name===r)}getChildAt(r){if(0>r||r>=this.numChildren)return null;var ra,jb=this._schema.fields;const Lb=this._children||(this._children=[]);if(ra=Lb[r])return ra;if(ra=jb[r])if(jb=this._chunks.map(pc=>pc.getChildAt(r)).filter(pc=>null!=pc),0<jb.length)return Lb[r]=new fj(ra,jb);return null}serialize(r,ra=!0){return(ra?fm:y).writeAll(this).toUint8Array(!0)}count(){return this._length}select(...r){const ra=this._schema.fields.reduce((jb,Lb,pc)=>jb.set(Lb.name,pc),new Map);return this.selectAt(...r.map(jb=>
ra.get(jb)).filter(jb=>-1<jb))}selectAt(...r){const ra=this._schema.selectAt(...r);return new ac(ra,this._chunks.map(({length:jb,data:{childData:Lb}})=>new Hc(ra,jb,r.map(pc=>Lb[pc]).filter(Boolean))))}assign(r){const ra=this._schema.fields,[jb,Lb]=r.schema.fields.reduce((Hd,Kd,ze)=>{const [bf,Ef]=Hd,jg=ra.findIndex(Mg=>Mg.name===Kd.name);return~jg?Ef[jg]=ze:bf.push(ze),Hd},[[],[]]),pc=this._schema.assign(r.schema),Yc=[...ra.map((Hd,Kd,ze,bf=Lb[Kd])=>void 0===bf?this.getColumnAt(Kd):r.getColumnAt(bf)),
...jb.map(Hd=>r.getColumnAt(Hd))].filter(Boolean);return new ac(...od(pc,Yc))}}class Hc extends Cm{constructor(...r){const ra=r[0];let jb;if(r[1]instanceof Ng)[,r,jb]=r;else{const Lb=ra.fields,[,pc,Yc]=r;r=Ng.Struct(new Hj(Lb),0,pc,0,null,Yc)}super(r,jb);this._schema=ra}static from(r){return wh(r.values),ac.from(r)}static new(...r){const [ra,jb]=Xb(r,[[],[]]);r=jb.filter(Lb=>Lb instanceof qb);return new Hc(...function(Lb,pc,Yc=pc.reduce((Hd,Kd)=>Math.max(Hd,Kd.length),0)){let Hd,Kd,ze=-1;const bf=
pc.length;Lb=[...Lb.fields];const Ef=[],jg=(Yc+63&-64)>>3;for(;++ze<bf;)(Hd=pc[ze])&&Hd.length===Yc?Ef[ze]=Hd:((Kd=Lb[ze]).nullable||(Lb[ze]=Lb[ze].clone({nullable:!0})),Ef[ze]=Hd?Hd._changeLengthAndBackfillNullBitmap(Yc):Ng.new(Kd.type,0,Yc,Yc,[Wa,Wa,new Uint8Array(jg),Wa]));return[new sh(Lb),Yc,Ef]}(new sh(ra),r.map(Lb=>Lb.data)))}clone(r,ra=this._children){return new Hc(this._schema,r,ra)}concat(...r){const ra=this._schema;r=Ci.flatten(this,...r);return new ac(ra,r.map(({data:jb})=>new Hc(ra,jb)))}get schema(){return this._schema}get numCols(){return this._schema.fields.length}get dictionaries(){return this._dictionaries||
(this._dictionaries=ld.collect(this))}select(...r){const ra=this._schema.fields.reduce((jb,Lb,pc)=>jb.set(Lb.name,pc),new Map);return this.selectAt(...r.map(jb=>ra.get(jb)).filter(jb=>-1<jb))}selectAt(...r){const ra=this._schema.selectAt(...r);r=r.map(jb=>this.data.childData[jb]).filter(Boolean);return new Hc(ra,this.length,r)}}class Rc extends Hc{constructor(r){super(r,0,r.fields.map(ra=>Ng.new(ra.type,0,0,0)))}}class ld extends xh{constructor(){super(...arguments);this.dictionaries=new Map}static collect(r){return(new ld).visit(r.data,
new Hj(r.schema.fields)).dictionaries}visit(r,ra){return eg.isDictionary(ra)?this.visitDictionary(r,ra):(r.childData.forEach((jb,Lb)=>this.visit(jb,ra.children[Lb].type)),this)}visitDictionary(r,ra){r=r.dictionary;return r&&0<r.length&&this.dictionaries.set(ra.id,r),this}}class pd extends rg{constructor(r){super();this._impl=r}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?
this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(r){return this._impl.throw(r)}return(r){return this._impl.return(r)}cancel(){return this._impl.cancel()}reset(r){return this._impl.reset(r),this._DOMStream=void 0,this._nodeStream=void 0,this}open(r){r=this._impl.open(r);return Yh(r)?r.then(()=>this):this}readRecordBatch(r){return this._impl.isFile()?
this._impl.readRecordBatch(r):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return qc.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return qc.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(r){throw Error('"throughNode" not available in this environment');}static throughDOM(r,
ra){throw Error('"throughDOM" not available in this environment');}static from(r){return r instanceof pd?r:ib(r)?new td(new af(r)):Ua(r)?function(ra){return I(this,void 0,void 0,function*(){const {size:jb}=yield ra.stat(),Lb=new He(ra,jb);return jb>=cn&&rc(yield Lb.readAt(0,Xl+7&-8))?new Ge(new Qe(Lb)):new de(new xf(Lb))})}(r):Yh(r)?(()=>I(this,void 0,void 0,function*(){return yield pd.from(yield r)}))():null!=r&&Object(r)===r&&v(r.body)||v(r)||Xa(r)||Wc(r)?function(ra){return I(this,void 0,void 0,
function*(){const jb=yield ra.peek(Xl+7&-8);return jb&&4<=jb.byteLength?rc(jb)?new me(new Pf(yield ra.read())):new de(new xf(ra)):new de(new xf(function(){return da(this,arguments,function*(){})}()))})}(new Id(r)):function(ra){const jb=ra.peek(Xl+7&-8);return jb&&4<=jb.byteLength?rc(jb)?new me(new Pf(ra.read())):new td(new nf(ra)):new td(new nf(function*(){}()))}(new Oc(r))}static readAll(r){return r instanceof pd?r.isSync()?Ye(r):bg(r):ib(r)||ArrayBuffer.isView(r)||wh(r)||null!=r&&Object(r)===r&&
"done"in r&&"value"in r?Ye(r):bg(r)}}class td extends pd{constructor(r){super(r);this._impl=r}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return da(this,arguments,function*(){yield N(yield*U(X(this[Symbol.iterator]())))})}}class de extends pd{constructor(r){super(r);this._impl=r}[Symbol.iterator](){throw Error("AsyncRecordBatchStreamReader is not Iterable");}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class me extends td{constructor(r){super(r);
this._impl=r}}class Ge extends de{constructor(r){super(r);this._impl=r}}class hf{constructor(r=new Map){this.closed=!1;this.autoDestroy=!0;this._recordBatchIndex=this._dictionaryIndex=0;this.dictionaries=r}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(r){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=r,this.dictionaries=new Map,this}_loadRecordBatch(r,
ra){return new Hc(this.schema,r.length,this._loadVectors(r,ra,this.schema.fields))}_loadDictionaryBatch(r,ra){const {id:jb,isDelta:Lb,data:pc}=r,{dictionaries:Yc,schema:Hd}=this;r=Yc.get(jb);if(Lb||!r){const Kd=Hd.dictionaries.get(jb);return r&&Lb?r.concat(qb.new(this._loadVectors(pc,ra,[Kd])[0])):qb.new(this._loadVectors(pc,ra,[Kd])[0])}return r}_loadVectors(r,ra,jb){return(new yh(ra,r.nodes,r.buffers,this.dictionaries)).visitMany(jb)}}class nf extends hf{constructor(r,ra){super(ra);this._reader=
ib(r)?new Om(this._handle=r):new Gm(this._handle=r)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(r){return this.closed||(this.autoDestroy=r&&"boolean"==typeof r.autoDestroy?r.autoDestroy:this.autoDestroy,this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(r){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(r):
lf}return(r){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(r):lf}next(){if(this.closed)return lf;for(var r,{_reader:ra}=this;r=this._readNextMessageAndValidate();)if(r.isSchema())this.reset(r.header());else{if(r.isRecordBatch()){this._recordBatchIndex++;var jb=r.header();ra=ra.readMessageBody(r.bodyLength);return{done:!1,value:this._loadRecordBatch(jb,ra)}}r.isDictionaryBatch()&&(this._dictionaryIndex++,jb=r.header(),r=ra.readMessageBody(r.bodyLength),r=this._loadDictionaryBatch(jb,
r),this.dictionaries.set(jb.id,r))}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new Rc(this.schema)}):this.return()}_readNextMessageAndValidate(r){return this._reader.readMessage(r)}}class xf extends hf{constructor(r,ra){super(ra);this._reader=new im(this._handle=r)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return I(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),
this._reader=null,this.dictionaries=null)})}open(r){return I(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=r&&"boolean"==typeof r.autoDestroy?r.autoDestroy:this.autoDestroy,this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(r){return I(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(r):lf})}return(r){return I(this,void 0,void 0,function*(){return!this.closed&&
this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(r):lf})}next(){return I(this,void 0,void 0,function*(){if(this.closed)return lf;for(var r,{_reader:ra}=this;r=yield this._readNextMessageAndValidate();)if(r.isSchema())yield this.reset(r.header());else{if(r.isRecordBatch()){this._recordBatchIndex++;var jb=r.header();ra=yield ra.readMessageBody(r.bodyLength);return{done:!1,value:this._loadRecordBatch(jb,ra)}}r.isDictionaryBatch()&&(this._dictionaryIndex++,jb=r.header(),r=yield ra.readMessageBody(r.bodyLength),
r=this._loadDictionaryBatch(jb,r),this.dictionaries.set(jb.id,r))}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new Rc(this.schema)}):yield this.return()})}_readNextMessageAndValidate(r){return I(this,void 0,void 0,function*(){return yield this._reader.readMessage(r)})}}class Pf extends nf{constructor(r,ra){super(r instanceof fe?r:new fe(r),ra)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?
this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(r){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const ra of this._footer.dictionaryBatches())ra&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(r)}readRecordBatch(r){if(this.closed)return null;this._footer||this.open();if((r=this._footer&&this._footer.getRecordBatch(r))&&this._handle.seek(r.offset)){var ra=this._reader.readMessage(Pe.RecordBatch);if(ra&&ra.isRecordBatch())return r=
ra.header(),ra=this._reader.readMessageBody(ra.bodyLength),this._loadRecordBatch(r,ra)}return null}_readDictionaryBatch(r){if((r=this._footer&&this._footer.getDictionaryBatch(r))&&this._handle.seek(r.offset)){var ra=this._reader.readMessage(Pe.DictionaryBatch);ra&&ra.isDictionaryBatch()&&(r=ra.header(),ra=this._reader.readMessageBody(ra.bodyLength),ra=this._loadDictionaryBatch(r,ra),this.dictionaries.set(r.id,ra))}}_readFooter(){var {_handle:r}=this;const ra=r.size-Zl,jb=r.readInt32(ra);r=r.readAt(ra-
jb,jb);return zl.decode(r)}_readNextMessageAndValidate(r){if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const ra=this._footer&&this._footer.getRecordBatch(this._recordBatchIndex);if(ra&&this._handle.seek(ra.offset))return this._reader.readMessage(r)}return null}}class Qe extends xf{constructor(r,...ra){const jb="number"!=typeof ra[0]?ra.shift():void 0;ra=ra[0]instanceof Map?ra.shift():void 0;super(r instanceof He?r:new He(r,jb),ra)}get footer(){return this._footer}get numDictionaries(){return this._footer?
this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(r){const ra=Object.create(null,{open:{get:()=>super.open}});return I(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const jb of this._footer.dictionaryBatches())jb&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield ra.open.call(this,r)})}readRecordBatch(r){return I(this,
void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());var ra=this._footer&&this._footer.getRecordBatch(r);if(ra&&(yield this._handle.seek(ra.offset))){var jb=yield this._reader.readMessage(Pe.RecordBatch);if(jb&&jb.isRecordBatch())return ra=jb.header(),jb=yield this._reader.readMessageBody(jb.bodyLength),this._loadRecordBatch(ra,jb)}return null})}_readDictionaryBatch(r){return I(this,void 0,void 0,function*(){var ra=this._footer&&this._footer.getDictionaryBatch(r);
if(ra&&(yield this._handle.seek(ra.offset))){var jb=yield this._reader.readMessage(Pe.DictionaryBatch);jb&&jb.isDictionaryBatch()&&(ra=jb.header(),jb=yield this._reader.readMessageBody(jb.bodyLength),jb=this._loadDictionaryBatch(ra,jb),this.dictionaries.set(ra.id,jb))}})}_readFooter(){return I(this,void 0,void 0,function*(){var {_handle:r}=this;r._pending&&(yield r._pending);const ra=r.size-Zl,jb=yield r.readInt32(ra);r=yield r.readAt(ra-jb,jb);return zl.decode(r)})}_readNextMessageAndValidate(r){return I(this,
void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const ra=this._footer.getRecordBatch(this._recordBatchIndex);if(ra&&(yield this._handle.seek(ra.offset)))return yield this._reader.readMessage(r)}return null})}}class af extends nf{constructor(r,ra){super(r,ra)}_loadVectors(r,ra,jb){return(new Tg(ra,r.nodes,r.buffers,this.dictionaries)).visitMany(jb)}}class df{constructor(r){this._numChunks=0;this._finished=!1;this._bufferedSize=
0;const {readableStrategy:ra,writableStrategy:jb,queueingStrategy:Lb="count"}=r;r=x(r,["readableStrategy","writableStrategy","queueingStrategy"]);this._controller=null;this._builder=oj.new(r);this._getSize="bytes"!==Lb?rh:ij;({highWaterMark:r="bytes"===Lb?16384:1E3}=Object.assign({},ra));const {highWaterMark:pc="bytes"===Lb?16384:1E3}=Object.assign({},jb);this.readable=new ReadableStream({cancel:()=>{this._builder.clear()},pull:Yc=>{this._maybeFlush(this._builder,this._controller=Yc)},start:Yc=>{this._maybeFlush(this._builder,
this._controller=Yc)}},{highWaterMark:r,size:"bytes"!==Lb?rh:ij});this.writable=new WritableStream({abort:()=>{this._builder.clear()},write:()=>{this._maybeFlush(this._builder,this._controller)},close:()=>{this._maybeFlush(this._builder.finish(),this._controller)}},{highWaterMark:pc,size:Yc=>this._writeValueAndReturnChunkSize(Yc)})}_writeValueAndReturnChunkSize(r){const ra=this._bufferedSize;return this._bufferedSize=this._getSize(this._builder.append(r)),this._bufferedSize-ra}_maybeFlush(r,ra){null!==
ra&&(this._bufferedSize>=ra.desiredSize&&++this._numChunks&&this._enqueue(ra,r.toVector()),r.finished&&((0<r.length||0===this._numChunks)&&++this._numChunks&&this._enqueue(ra,r.toVector()),!this._finished&&(this._finished=!0)&&this._enqueue(ra,null)))}_enqueue(r,ra){this._bufferedSize=0;this._controller=null;null===ra?r.close():r.enqueue(ra)}}const rh=r=>r.length,ij=r=>r.byteLength;class qi{eq(r){return r instanceof qi||(r=new Og(r)),new qf(this,r)}le(r){return r instanceof qi||(r=new Og(r)),new uh(this,
r)}ge(r){return r instanceof qi||(r=new Og(r)),new mi(this,r)}lt(r){return new Mj(this.ge(r))}gt(r){return new Mj(this.le(r))}ne(r){return new Mj(this.eq(r))}}class Og extends qi{constructor(r){super();this.v=r}}class Hg extends qi{constructor(r){super();this.name=r}bind(r){if(!this.colidx){this.colidx=-1;const jb=r.schema.fields;for(let Lb=-1;++Lb<jb.length;)if(jb[Lb].name===this.name){this.colidx=Lb;break}if(0>this.colidx)throw Error(`Failed to bind Col "${this.name}"`);}const ra=this.vector=r.getChildAt(this.colidx);
return jb=>ra.get(jb)}}class wi{and(...r){return new Qg(this,...r)}or(...r){return new Ch(this,...r)}not(){return new Mj(this)}}class gi extends wi{constructor(r,ra){super();this.left=r;this.right=ra}bind(r){return this.left instanceof Og?this.right instanceof Og?this._bindLitLit(r,this.left,this.right):this._bindLitCol(r,this.left,this.right):this.right instanceof Og?this._bindColLit(r,this.left,this.right):this._bindColCol(r,this.left,this.right)}}class Vg extends wi{constructor(...r){super();this.children=
r}}Vg.prototype.children=Object.freeze([]);class Qg extends Vg{constructor(...r){r=r.reduce((ra,jb)=>ra.concat(jb instanceof Qg?jb.children:jb),[]);super(...r)}bind(r){const ra=this.children.map(jb=>jb.bind(r));return(jb,Lb)=>ra.every(pc=>pc(jb,Lb))}}class Ch extends Vg{constructor(...r){r=r.reduce((ra,jb)=>ra.concat(jb instanceof Ch?jb.children:jb),[]);super(...r)}bind(r){const ra=this.children.map(jb=>jb.bind(r));return(jb,Lb)=>ra.some(pc=>pc(jb,Lb))}}class qf extends gi{_bindLitLit(r,ra,jb){const Lb=
ra.v==jb.v;return()=>Lb}_bindColCol(r,ra,jb){const Lb=ra.bind(r),pc=jb.bind(r);return(Yc,Hd)=>Lb(Yc,Hd)==pc(Yc,Hd)}_bindColLit(r,ra,jb){const Lb=ra.bind(r);if(ra.vector instanceof Yd){let pc;const Yc=ra.vector;return Yc.dictionary!==this.lastDictionary?(pc=Yc.reverseLookup(jb.v),this.lastDictionary=Yc.dictionary,this.lastKey=pc):pc=this.lastKey,-1===pc?()=>!1:Hd=>Yc.getKey(Hd)===pc}return(pc,Yc)=>Lb(pc,Yc)==jb.v}_bindLitCol(r,ra,jb){return this._bindColLit(r,jb,ra)}}class uh extends gi{_bindLitLit(r,
ra,jb){const Lb=ra.v<=jb.v;return()=>Lb}_bindColCol(r,ra,jb){const Lb=ra.bind(r),pc=jb.bind(r);return(Yc,Hd)=>Lb(Yc,Hd)<=pc(Yc,Hd)}_bindColLit(r,ra,jb){const Lb=ra.bind(r);return(pc,Yc)=>Lb(pc,Yc)<=jb.v}_bindLitCol(r,ra,jb){const Lb=jb.bind(r);return(pc,Yc)=>ra.v<=Lb(pc,Yc)}}class mi extends gi{_bindLitLit(r,ra,jb){const Lb=ra.v>=jb.v;return()=>Lb}_bindColCol(r,ra,jb){const Lb=ra.bind(r),pc=jb.bind(r);return(Yc,Hd)=>Lb(Yc,Hd)>=pc(Yc,Hd)}_bindColLit(r,ra,jb){const Lb=ra.bind(r);return(pc,Yc)=>Lb(pc,
Yc)>=jb.v}_bindLitCol(r,ra,jb){const Lb=jb.bind(r);return(pc,Yc)=>ra.v>=Lb(pc,Yc)}}class Mj extends wi{constructor(r){super();this.child=r}bind(r){const ra=this.child.bind(r);return(jb,Lb)=>!ra(jb,Lb)}}class Ih extends wi{constructor(r,ra){super();this.next=r;this.bind_=ra}bind(r){return this.bind_(r),this.next}}ac.prototype.countBy=function(r){return(new ah(this.chunks)).countBy(r)};ac.prototype.scan=function(r,ra){return(new ah(this.chunks)).scan(r,ra)};ac.prototype.scanReverse=function(r,ra){return(new ah(this.chunks)).scanReverse(r,
ra)};ac.prototype.filter=function(r){return(new ah(this.chunks)).filter(r)};class ah extends ac{filter(r){return new Hi(this.chunks,r)}scan(r,ra){const jb=this.chunks,Lb=jb.length;for(let pc=-1;++pc<Lb;){const Yc=jb[pc];ra&&ra(Yc);for(let Hd=-1,Kd=Yc.length;++Hd<Kd;)r(Hd,Yc)}}scanReverse(r,ra){const jb=this.chunks;for(let Lb=jb.length;0<=--Lb;){const pc=jb[Lb];ra&&ra(pc);for(let Yc=pc.length;0<=--Yc;)r(Yc,pc)}}countBy(r){const ra=this.chunks,jb=ra.length;r="string"==typeof r?new Hg(r):r;r.bind(ra[jb-
1]);const Lb=r.vector;if(!eg.isDictionary(Lb.type))throw Error("countBy currently only supports dictionary-encoded columns");var pc=Math.ceil(Math.log(Lb.length)/Math.log(256));pc=new (4==pc?Uint32Array:2<=pc?Uint16Array:Uint8Array)(Lb.dictionary.length);for(let Hd=-1;++Hd<jb;){var Yc=ra[Hd];r.bind(Yc);const Kd=r.vector.indices;for(let ze=-1,bf=Yc.length;++ze<bf;)Yc=Kd.get(ze),null!==Yc&&pc[Yc]++}return new Lj(Lb.dictionary,Pi.from(pc))}}class Lj extends ac{constructor(r,ra){const jb=new sh([new Zh("values",
r.type),new Zh("counts",ra.type)]);super(new Hc(jb,ra.length,[r,ra]))}toJSON(){const r=this.getColumnAt(0),ra=this.getColumnAt(1),jb={};for(let Lb=-1;++Lb<this.length;)jb[r.get(Lb)]=ra.get(Lb);return jb}}class hj{constructor(r,ra){this.batches=r;this.predicate=ra;this.index=this.batchIndex=0;this.batch=this.batches[this.batchIndex];this.predicateFunc=this.predicate.bind(this.batch)}next(){for(;this.batchIndex<this.batches.length;){for(;this.index<this.batch.length;){if(this.predicateFunc(this.index,
this.batch))return{value:this.batch.get(this.index++)};this.index++}++this.batchIndex<this.batches.length&&(this.index=0,this.batch=this.batches[this.batchIndex],this.predicateFunc=this.predicate.bind(this.batch))}return{done:!0,value:null}}[Symbol.iterator](){return this}}class Hi extends ah{constructor(r,ra){super(r);this._predicate=ra}scan(r,ra){const jb=this._chunks,Lb=jb.length;for(let pc=-1;++pc<Lb;){const Yc=jb[pc],Hd=this._predicate.bind(Yc);let Kd=!1;for(let ze=-1,bf=Yc.length;++ze<bf;)Hd(ze,
Yc)&&(ra&&!Kd&&(ra(Yc),Kd=!0),r(ze,Yc))}}scanReverse(r,ra){const jb=this._chunks;for(let Lb=jb.length;0<=--Lb;){const pc=jb[Lb],Yc=this._predicate.bind(pc);let Hd=!1;for(let Kd=pc.length;0<=--Kd;)Yc(Kd,pc)&&(ra&&!Hd&&(ra(pc),Hd=!0),r(Kd,pc))}}count(){let r=0;const ra=this._chunks,jb=ra.length;for(let Lb=-1;++Lb<jb;){const pc=ra[Lb],Yc=this._predicate.bind(pc);for(let Hd=-1,Kd=pc.length;++Hd<Kd;)Yc(Hd,pc)&&++r}return r}[Symbol.iterator](){return new hj(this._chunks,this._predicate)}filter(r){return new Hi(this._chunks,
this._predicate.and(r))}countBy(r){const ra=this._chunks,jb=ra.length;r="string"==typeof r?new Hg(r):r;r.bind(ra[jb-1]);const Lb=r.vector;if(!eg.isDictionary(Lb.type))throw Error("countBy currently only supports dictionary-encoded columns");var pc=Math.ceil(Math.log(Lb.length)/Math.log(256));pc=new (4==pc?Uint32Array:2<=pc?Uint16Array:Uint8Array)(Lb.dictionary.length);for(let Yc=-1;++Yc<jb;){const Hd=ra[Yc],Kd=this._predicate.bind(Hd);r.bind(Hd);const ze=r.vector.indices;for(let bf=-1,Ef=Hd.length;++bf<
Ef;){const jg=ze.get(bf);null!==jg&&Kd(bf,Hd)&&pc[jg]++}}return new Lj(Lb.dictionary,Pi.from(pc))}}const xi=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},he),qd),rd),Nd),Zc),qe),{compareSchemas:fd,compareFields:function(r,ra){return El.compareFields(r,ra)},compareTypes:function(r,ra){return El.visit(r,ra)}});u.d(w,"DateUnit",function(){return Md});u.d(w,"IntervalUnit",function(){return ee});u.d(w,"MessageHeader",function(){return Pe});u.d(w,"MetadataVersion",
function(){return Qb});u.d(w,"Precision",function(){return Rd});u.d(w,"TimeUnit",function(){return nd});u.d(w,"Type",function(){return Xd});u.d(w,"UnionMode",function(){return ad});u.d(w,"BufferType",function(){return Ze});u.d(w,"Data",function(){return Ng});u.d(w,"DataType",function(){return eg});u.d(w,"Null",function(){return Zd});u.d(w,"Bool",function(){return Eh});u.d(w,"Int",function(){return ve});u.d(w,"Int8",function(){return Sb});u.d(w,"Int16",function(){return Qc});u.d(w,"Int32",function(){return ud});
u.d(w,"Int64",function(){return oe});u.d(w,"Uint8",function(){return ue});u.d(w,"Uint16",function(){return Of});u.d(w,"Uint32",function(){return kf});u.d(w,"Uint64",function(){return fg});u.d(w,"Float",function(){return Zf});u.d(w,"Float16",function(){return qg});u.d(w,"Float32",function(){return lh});u.d(w,"Float64",function(){return pi});u.d(w,"Utf8",function(){return Sh});u.d(w,"Binary",function(){return bj});u.d(w,"FixedSizeBinary",function(){return jk});u.d(w,"Date_",function(){return ji});u.d(w,
"DateDay",function(){return ng});u.d(w,"DateMillisecond",function(){return kh});u.d(w,"Timestamp",function(){return je});u.d(w,"TimestampSecond",function(){return Ne});u.d(w,"TimestampMillisecond",function(){return ff});u.d(w,"TimestampMicrosecond",function(){return ig});u.d(w,"TimestampNanosecond",function(){return Dh});u.d(w,"Time",function(){return T});u.d(w,"TimeSecond",function(){return Oa});u.d(w,"TimeMillisecond",function(){return zb});u.d(w,"TimeMicrosecond",function(){return Ac});u.d(w,"TimeNanosecond",
function(){return jd});u.d(w,"Decimal",function(){return cj});u.d(w,"List",function(){return Aj});u.d(w,"Struct",function(){return Hj});u.d(w,"Union",function(){return ck});u.d(w,"DenseUnion",function(){return Ck});u.d(w,"SparseUnion",function(){return Ri});u.d(w,"Dictionary",function(){return ci});u.d(w,"Interval",function(){return Di});u.d(w,"IntervalDayTime",function(){return Si});u.d(w,"IntervalYearMonth",function(){return pl});u.d(w,"FixedSizeList",function(){return Gj});u.d(w,"Map_",function(){return Ik});
u.d(w,"Table",function(){return ac});u.d(w,"Column",function(){return fj});u.d(w,"Schema",function(){return sh});u.d(w,"Field",function(){return Zh});u.d(w,"Visitor",function(){return xh});u.d(w,"Vector",function(){return qb});u.d(w,"BaseVector",function(){return Ra});u.d(w,"BinaryVector",function(){return kb});u.d(w,"BoolVector",function(){return Tb});u.d(w,"Chunked",function(){return Ci});u.d(w,"DateVector",function(){return uc});u.d(w,"DateDayVector",function(){return xc});u.d(w,"DateMillisecondVector",
function(){return dd});u.d(w,"DecimalVector",function(){return Gd});u.d(w,"DictionaryVector",function(){return Yd});u.d(w,"FixedSizeBinaryVector",function(){return Be});u.d(w,"FixedSizeListVector",function(){return Ie});u.d(w,"FloatVector",function(){return Ke});u.d(w,"Float16Vector",function(){return Af});u.d(w,"Float32Vector",function(){return Gg});u.d(w,"Float64Vector",function(){return zh});u.d(w,"IntervalVector",function(){return zi});u.d(w,"IntervalDayTimeVector",function(){return Fj});u.d(w,
"IntervalYearMonthVector",function(){return Kj});u.d(w,"IntVector",function(){return Pi});u.d(w,"Int8Vector",function(){return Ti});u.d(w,"Int16Vector",function(){return Cj});u.d(w,"Int32Vector",function(){return jj});u.d(w,"Int64Vector",function(){return $i});u.d(w,"Uint8Vector",function(){return Ok});u.d(w,"Uint16Vector",function(){return yk});u.d(w,"Uint32Vector",function(){return dl});u.d(w,"Uint64Vector",function(){return Ij});u.d(w,"ListVector",function(){return il});u.d(w,"MapVector",function(){return cl});
u.d(w,"NullVector",function(){return Bm});u.d(w,"StructVector",function(){return Cm});u.d(w,"TimestampVector",function(){return Nl});u.d(w,"TimestampSecondVector",function(){return Fl});u.d(w,"TimestampMillisecondVector",function(){return Gk});u.d(w,"TimestampMicrosecondVector",function(){return Al});u.d(w,"TimestampNanosecondVector",function(){return um});u.d(w,"TimeVector",function(){return pm});u.d(w,"TimeSecondVector",function(){return Zk});u.d(w,"TimeMillisecondVector",function(){return Dm});
u.d(w,"TimeMicrosecondVector",function(){return ol});u.d(w,"TimeNanosecondVector",function(){return Nm});u.d(w,"UnionVector",function(){return wm});u.d(w,"DenseUnionVector",function(){return xm});u.d(w,"SparseUnionVector",function(){return dn});u.d(w,"Utf8Vector",function(){return Ol});u.d(w,"ByteStream",function(){return Oc});u.d(w,"AsyncByteStream",function(){return Id});u.d(w,"AsyncByteQueue",function(){return ic});u.d(w,"RecordBatchReader",function(){return pd});u.d(w,"RecordBatchFileReader",
function(){return me});u.d(w,"RecordBatchStreamReader",function(){return td});u.d(w,"AsyncRecordBatchFileReader",function(){return Ge});u.d(w,"AsyncRecordBatchStreamReader",function(){return de});u.d(w,"RecordBatchWriter",function(){return tm});u.d(w,"RecordBatchFileWriter",function(){return y});u.d(w,"RecordBatchStreamWriter",function(){return fm});u.d(w,"RecordBatchJSONWriter",function(){return ma});u.d(w,"MessageReader",function(){return Gm});u.d(w,"AsyncMessageReader",function(){return im});u.d(w,
"JSONMessageReader",function(){return Om});u.d(w,"Message",function(){return Bj});u.d(w,"RecordBatch",function(){return Hc});u.d(w,"DataFrame",function(){return ah});u.d(w,"FilteredDataFrame",function(){return Hi});u.d(w,"CountByResult",function(){return Lj});u.d(w,"predicate",function(){return we});u.d(w,"util",function(){return xi});u.d(w,"Builder",function(){return oj});u.d(w,"BinaryBuilder",function(){return Mh});u.d(w,"BoolBuilder",function(){return ql});u.d(w,"DateBuilder",function(){return Jk});
u.d(w,"DateDayBuilder",function(){return Kk});u.d(w,"DateMillisecondBuilder",function(){return Yl});u.d(w,"DecimalBuilder",function(){return dk});u.d(w,"DictionaryBuilder",function(){return vh});u.d(w,"FixedSizeBinaryBuilder",function(){return Sl});u.d(w,"FixedSizeListBuilder",function(){return Rj});u.d(w,"FloatBuilder",function(){return zj});u.d(w,"Float16Builder",function(){return gk});u.d(w,"Float32Builder",function(){return qk});u.d(w,"Float64Builder",function(){return al});u.d(w,"IntervalBuilder",
function(){return Sg});u.d(w,"IntervalDayTimeBuilder",function(){return Ei});u.d(w,"IntervalYearMonthBuilder",function(){return Vj});u.d(w,"IntBuilder",function(){return Bc});u.d(w,"Int8Builder",function(){return gd});u.d(w,"Int16Builder",function(){return zd});u.d(w,"Int32Builder",function(){return ce});u.d(w,"Int64Builder",function(){return ke});u.d(w,"Uint8Builder",function(){return De});u.d(w,"Uint16Builder",function(){return Fb});u.d(w,"Uint32Builder",function(){return dc});u.d(w,"Uint64Builder",
function(){return Dc});u.d(w,"ListBuilder",function(){return Uj});u.d(w,"MapBuilder",function(){return Mi});u.d(w,"NullBuilder",function(){return rl});u.d(w,"StructBuilder",function(){return si});u.d(w,"TimestampBuilder",function(){return jf});u.d(w,"TimestampSecondBuilder",function(){return Dg});u.d(w,"TimestampMillisecondBuilder",function(){return gg});u.d(w,"TimestampMicrosecondBuilder",function(){return Eg});u.d(w,"TimestampNanosecondBuilder",function(){return Ph});u.d(w,"TimeBuilder",function(){return ge});
u.d(w,"TimeSecondBuilder",function(){return te});u.d(w,"TimeMillisecondBuilder",function(){return Te});u.d(w,"TimeMicrosecondBuilder",function(){return pe});u.d(w,"TimeNanosecondBuilder",function(){return Qf});u.d(w,"UnionBuilder",function(){return ai});u.d(w,"DenseUnionBuilder",function(){return Jj});u.d(w,"SparseUnionBuilder",function(){return Wj});u.d(w,"Utf8Builder",function(){return $h});qc.toDOMStream=function(r,ra){if(Wc(r))return function(jb,Lb){function pc(ze,bf){return I(this,void 0,void 0,
function*(){let Ef,jg,Mg=ze.desiredSize||null;for(;!(jg=yield bf.next(Hd?Mg:null)).done;)if(ArrayBuffer.isView(jg.value)&&(Ef=K(Uint8Array,jg.value))&&(null!=Mg&&Hd&&(Mg=Mg-Ef.byteLength+1),jg.value=Ef),ze.enqueue(jg.value),null!=Mg&&0>=--Mg)return;ze.close()})}let Yc=null;const Hd=Lb&&"bytes"===Lb.type||!1,Kd=Lb&&Lb.highWaterMark||16777216;return new ReadableStream(Object.assign(Object.assign({},Lb),{start(ze){return I(this,void 0,void 0,function*(){yield pc(ze,Yc||(Yc=jb[Symbol.asyncIterator]()))})},
pull(ze){return I(this,void 0,void 0,function*(){Yc?yield pc(ze,Yc):ze.close()})},cancel(){return I(this,void 0,void 0,function*(){Yc&&Yc.return&&(yield Yc.return());Yc=null})}}),Object.assign({highWaterMark:Hd?Kd:void 0},Lb))}(r,ra);if(wh(r))return function(jb,Lb){function pc(ze,bf){let Ef,jg,Mg=ze.desiredSize||null;for(;!(jg=bf.next(Hd?Mg:null)).done;)if(ArrayBuffer.isView(jg.value)&&(Ef=K(Uint8Array,jg.value))&&(null!=Mg&&Hd&&(Mg=Mg-Ef.byteLength+1),jg.value=Ef),ze.enqueue(jg.value),null!=Mg&&
0>=--Mg)return;ze.close()}let Yc=null;const Hd=Lb&&"bytes"===Lb.type||!1,Kd=Lb&&Lb.highWaterMark||16777216;return new ReadableStream(Object.assign(Object.assign({},Lb),{start(ze){pc(ze,Yc||(Yc=jb[Symbol.iterator]()))},pull(ze){Yc?pc(ze,Yc):ze.close()},cancel(){Yc&&Yc.return&&Yc.return();Yc=null}}),Object.assign({highWaterMark:Hd?Kd:void 0},Lb))}(r,ra);throw Error("toDOMStream() must be called with an Iterable or AsyncIterable");};oj.throughDOM=function(r){return new df(r)};pd.throughDOM=rf;me.throughDOM=
rf;td.throughDOM=rf;tm.throughDOM=Ff;y.throughDOM=Ff;fm.throughDOM=Ff}])})};
shadow$provide[471]=function(ob,Ba,Gb,Ea){(function(A,w){"object"===typeof Ea&&"undefined"!==typeof Gb?Gb.exports=w(Ba(470)):"function"===typeof define&&define.amd?define(["./apache-arrow.js"],w):(A="undefined"!==typeof globalThis?globalThis:A||self,A.vega=A.vega||{},A.vega.format=A.vega.format||{},A.vega.format.arrow=w(A.Arrow))})(this,function(A){function w(I){I instanceof A.Table||(I instanceof ArrayBuffer&&(I=new Uint8Array(I)),I=A.Table.from(Array.isArray(I)?I:[I]));var B=I;I=u(B);B=Array(B.length);
for(let N=0,da=B.length;N<da;++N)B[N]=I(N);return B}function u(I){const B={};I.schema.fields.map(N=>N.name).forEach((N,da)=>{const U=I.getColumnAt(da);B.hasOwnProperty(N)||Object.defineProperty(B,N,{get:function(){return U.get(this[x])},set:function(){throw Error("Arrow field values can not be overwritten.");},enumerable:!0})});return N=>{const da=Object.create(B);da[x]=N;return da}}const x=Symbol("rowIndex");w.responseType="arrayBuffer";return w})};
'use strict';var qzb,szb,wzb,D8,yzb,zzb,Azb,I8,Ozb,Pzb,Rzb,Yzb,M8,$zb,N8,aAb,mzb,F8,Izb,E8,ezb,vzb,Fzb,J8,fzb,Czb,ozb,bAb,Jzb,Zzb,Uzb,Xzb,pzb,cAb,Bzb,lzb,tzb,Nzb,Vzb,C8,Hzb,L8,Wzb,izb,Szb,K8,Tzb,Qzb,Ezb,nzb,Kzb,H8,Gzb,G8,Dzb,Lzb,Mzb,uzb,B8,A8,rzb,xzb;
$APP.Kja=function(a){$APP.m($APP.r(bzb))&&($APP.Kj.K($APP.D(["loading arrow..."])),$APP.Gg(bzb,!1),czb.formats("arrow",dzb));a=$APP.m($APP.IB.G(a))?a:new $APP.h(null,1,[$APP.IB,a],null);var b=$APP.IB.G(a),c=$APP.nt(b,new $APP.I(null,3,5,$APP.J,[$APP.kJ,$APP.BS,$APP.mJ],null));b=$APP.rf(b)?$APP.Oi.J($APP.ar.G?$APP.ar.G(b):$APP.ar.call(null,b),ezb,new $APP.h(null,1,[fzb,$APP.il.K($APP.D([gzb,c]))],null)):b;return new $APP.I(null,3,5,$APP.J,[$APP.bp,hzb.Vega,$APP.il.K($APP.D([a,new $APP.h(null,5,[izb,
jzb,$APP.fo,kzb,lzb,new $APP.h(null,4,[$APP.O9a,!0,$APP.tu,!0,mzb,!0,nzb,!1],null),ozb,z8,$APP.IB,b],null)]))],null)};$APP.Lja=function(a){return new $APP.I(null,2,5,$APP.J,[$APP.Kja,$APP.il.K($APP.D([new $APP.h(null,1,[$APP.eQ,"vega-lite"],null),a]))],null)};qzb=function(a,b){return new $APP.h(null,4,[pzb,"https://vega.github.io/schema/vega/v5.json",$APP.kJ,a,$APP.BS,a/b,$APP.kW,new $APP.h(null,4,[$APP.tm,10,$APP.nm,55,$APP.Ln,40,$APP.qm,10],null)],null)};
szb=function(a,b){return new $APP.h(null,1,[$APP.mo,new $APP.I(null,1,5,$APP.J,[new $APP.h(null,2,[$APP.Q,a,rzb,$APP.Ch.F($APP.dh,$APP.Li.F(function(c){var d=$APP.C.J(c,0,null);c=$APP.C.J(c,1,null);return new $APP.h(null,2,[A8,d,B8,c],null)},b))],null)],null)],null)};
wzb=function(a,b){return new $APP.h(null,1,[tzb,new $APP.I(null,2,5,$APP.J,[$APP.il.K($APP.D([new $APP.h(null,2,[uzb,"bottom",C8,"x"],null),$APP.m(a)?new $APP.h(null,2,[$APP.wW,a,vzb,30],null):null])),$APP.il.K($APP.D([new $APP.h(null,2,[uzb,"left",C8,"y"],null),$APP.m(b)?new $APP.h(null,2,[$APP.wW,b,vzb,45],null):null]))],null)],null)};D8=function(a,b,c){return $APP.A.F(b,$APP.$N)?new $APP.h(null,2,[$APP.mo,a,$APP.Qy,$APP.n.G(c)],null):b};
yzb=function(a,b){return new $APP.h(null,1,[E8,new $APP.I(null,2,5,$APP.J,[new $APP.h(null,5,[$APP.Q,"x",$APP.jm,"linear",F8,"width",G8,!1,H8,D8(a,$APP.v(b),"x")],null),new $APP.h(null,6,[$APP.Q,"y",$APP.jm,"linear",F8,"height",xzb,!0,G8,!1,H8,D8(a,$APP.bf(b),"y")],null)],null)],null)};zzb=function(a,b,c){return $APP.Xe($APP.Og.F(function(d){return d<c&&d>=b},a))};Azb=function(a,b,c,d){b=$APP.wF.J(b,c,d);return $APP.Li.F(function(e){return zzb(a,e,e+d)},b)};
I8=function(a){var b=$APP.Li.F($APP.kf,a);b=$APP.Wj.F($APP.il,b);return $APP.jf($APP.Wj.F($APP.il,a),b)};
Ozb=function(a){var b=$APP.ng(a);a=$APP.E.J(b,Bzb,new $APP.I(null,2,5,$APP.J,[$APP.$N,$APP.$N],null));var c=$APP.E.F(b,Czb),d=$APP.E.F(b,$APP.mo),e=$APP.E.J(b,Dzb,1.618),f=$APP.E.J(b,Ezb,!1),k=$APP.E.F(b,$APP.M0),l=$APP.E.J(b,Fzb,$APP.n.G($APP.Qs())),q=$APP.E.F(b,Gzb),p=$APP.E.J(b,Hzb,400),w=$APP.E.J(b,Izb,70);b=$APP.E.J(b,$APP.WS,1);d=$APP.qf($APP.v(d))?d:$APP.Li.J($APP.Xj,$APP.wF.G($APP.Xe(d)),d);return I8($APP.D([qzb(p,e),szb(l,d),$APP.m(f)?new $APP.h(null,1,[J8,new $APP.I(null,1,5,$APP.J,[new $APP.h(null,
3,[$APP.jm,"line",$APP.oZ,new $APP.h(null,1,[$APP.mo,l],null),K8,new $APP.h(null,1,[L8,new $APP.h(null,5,[A8,new $APP.h(null,2,[C8,"x",$APP.Qy,"x"],null),B8,new $APP.h(null,2,[C8,"y",$APP.Qy,"y"],null),$APP.YZ,new $APP.h(null,1,[$APP.DA,$APP.m(k)?k:"#FF29D2"],null),Jzb,new $APP.h(null,1,[$APP.DA,2],null),Kzb,new $APP.h(null,1,[$APP.DA,b],null)],null)],null)],null)],null)],null):new $APP.h(null,1,[J8,new $APP.I(null,1,5,$APP.J,[new $APP.h(null,3,[$APP.jm,"symbol",$APP.oZ,new $APP.h(null,1,[$APP.mo,
l],null),K8,new $APP.h(null,3,[L8,new $APP.h(null,4,[A8,new $APP.h(null,2,[C8,"x",$APP.Qy,"x"],null),B8,new $APP.h(null,2,[C8,"y",$APP.Qy,"y"],null),$APP.To,new $APP.h(null,1,[$APP.DA,$APP.m(k)?k:"steelblue"],null),Lzb,new $APP.h(null,1,[$APP.DA,b],null)],null),$APP.YMa,new $APP.h(null,3,[Mzb,"circle",$APP.bB,new $APP.h(null,1,[$APP.DA,w],null),$APP.YZ,new $APP.h(null,1,[$APP.DA,"transparent"],null)],null),Nzb,new $APP.h(null,2,[$APP.bB,new $APP.h(null,1,[$APP.DA,3*w],null),$APP.YZ,new $APP.h(null,
1,[$APP.DA,"white"],null)],null)],null)],null)],null)],null),yzb(l,a),wzb(q,c)]))};
Pzb=function(a){for(var b=[],c=arguments.length,d=0;;)if(d<c)b.push(arguments[d]),d+=1;else break;c=1<b.length?new $APP.Ee(b.slice(1),0,null):null;d=arguments[0];b=$APP.n.G($APP.Qs());c=$APP.Ch.F($APP.dh,$APP.M.F(new $APP.I(null,3,5,$APP.J,[d,Fzb,b],null),c));c=$APP.Wj.F(Ozb,c);d=new $APP.I(null,2,5,$APP.J,[$APP.$N,$APP.$N],null);b=new $APP.h(null,1,[E8,new $APP.I(null,2,5,$APP.J,[new $APP.h(null,5,[$APP.Q,"x",$APP.jm,"time",F8,"width",G8,!1,H8,D8(b,$APP.v(d),"x")],null),new $APP.h(null,6,[$APP.Q,
"y",$APP.jm,"linear",F8,"height",xzb,!0,G8,!1,H8,D8(b,$APP.bf(d),"y")],null)],null)],null);return I8($APP.D([c,b]))};Rzb=function(a){var b=$APP.ng(a),c=$APP.E.F(b,$APP.gR),d=$APP.E.F(b,$APP.B1);a=$APP.E.J(b,Qzb,100);var e=$APP.C.J(d,0,null);d=$APP.C.J(d,1,null);b=$APP.il.K($APP.D([$APP.mg,b]));a=$APP.wF.J(e,d,(d-e)/a);a=$APP.Li.F(function(f){return new $APP.I(null,2,5,$APP.J,[f,c.G?c.G(f):c.call(null,f)],null)},a);return Ozb($APP.il.K($APP.D([b,new $APP.h(null,2,[$APP.mo,a,Ezb,!0],null)])))};
Yzb=function(a){var b=$APP.ng(a);a=$APP.E.J(b,Bzb,new $APP.I(null,2,5,$APP.J,[$APP.$N,$APP.$N],null));var c=$APP.E.F(b,Czb),d=$APP.E.F(b,Szb),e=$APP.E.J(b,Tzb,.4),f=$APP.E.F(b,$APP.mo),k=$APP.E.J(b,Dzb,1.618),l=$APP.E.F(b,$APP.M0),q=$APP.E.F(b,Gzb),p=$APP.E.J(b,Uzb,Vzb),w=$APP.E.J(b,Hzb,400),x=$APP.E.F(b,Wzb);b=$APP.E.J(b,$APP.WS,1);var y=$APP.v(a),B=$APP.A.F(y,$APP.$N)?$APP.Wj.F($APP.lU,f):$APP.v(y);y=$APP.A.F(y,$APP.$N)?$APP.Wj.F($APP.uF,f):$APP.bf(y);y+=y;var K=zzb(f,B,y);p=$APP.A.F(p,Vzb)?Math.ceil(1+
Math.log(K)/Math.log(2)):p;p=(y-B)/p;var O=1E-15>p?1:p;p=Azb(f,B,y,O);var X=function(){var ba=$APP.m(d)?d:$APP.m(x)?x:$APP.d0;ba=ba instanceof $APP.G?ba.ta:null;switch(ba){case "probability":return $APP.Xe(f);case "probability-density":return $APP.Xe(f)*O;case "count":return 1;default:throw Error(["No matching clause: ",$APP.n.G(ba)].join(""));}}();K=$APP.Li.F(function(ba){return ba/X},p);p=$APP.n.G($APP.Qs());B=$APP.Li.F($APP.vu.F($APP.sR,O),$APP.wF.J(B-O,y+O,O));y=$APP.M.K(new $APP.I(null,1,5,$APP.J,
[0],null),K,$APP.D([new $APP.I(null,1,5,$APP.J,[0],null)]));B=$APP.Li.J($APP.Xj,B,y);return I8($APP.D([qzb(w,k),szb(p,B),new $APP.h(null,1,[J8,new $APP.I(null,1,5,$APP.J,[new $APP.h(null,3,[$APP.jm,"line",$APP.oZ,new $APP.h(null,1,[$APP.mo,p],null),K8,new $APP.h(null,1,[L8,new $APP.h(null,8,[A8,new $APP.h(null,2,[C8,"x",$APP.Qy,"x"],null),B8,new $APP.h(null,2,[C8,"y",$APP.Qy,"y"],null),Xzb,new $APP.h(null,1,[$APP.DA,"step-before"],null),$APP.To,new $APP.h(null,1,[$APP.DA,$APP.m(l)?l:"steelblue"],
null),Lzb,new $APP.h(null,1,[$APP.DA,e],null),$APP.YZ,new $APP.h(null,1,[$APP.DA,$APP.m(l)?l:"steelblue"],null),Jzb,new $APP.h(null,1,[$APP.DA,2],null),Kzb,new $APP.h(null,1,[$APP.DA,b],null)],null)],null)],null)],null)],null),yzb(p,a),wzb(q,c)]))};M8=function(a){return $APP.jf(new $APP.I(null,2,5,$APP.J,[Zzb,a],null),new $APP.h(null,1,[$APP.vS,!0],null))};$zb=function(a){return $APP.bf(a)};N8=function(a){return $APP.Ch.F($APP.mg,$APP.Li.F($APP.eh,$APP.py.F(2,a)))};
aAb=function(a){return $APP.Zj.F("",$APP.Jg.F(a,$APP.Xz.G(function(){return"1fr "})))};mzb=new $APP.G(null,"compiled","compiled",850043082);F8=new $APP.G(null,"range","range",1639692286);Izb=new $APP.G(null,"symbol-size","symbol-size",-1099583279);E8=new $APP.G(null,"scales","scales",-1197224722);ezb=new $APP.G(null,"usermeta","usermeta",1301566533);vzb=new $APP.G(null,"titleOffset","titleOffset",657073414);Fzb=new $APP.G(null,"series-name","series-name",-128514906);
J8=new $APP.G(null,"marks","marks",-1844991497);fzb=new $APP.G(null,"embedOptions","embedOptions",1357117031);Czb=new $APP.G(null,"y-title","y-title",220785852);ozb=new $APP.G(null,"onParseError","onParseError",1679014536);bAb=new $APP.G(null,"categories","categories",178386610);Jzb=new $APP.G(null,"strokeWidth","strokeWidth",-2130848332);Zzb=new $APP.t("ui.vega","vega","ui.vega/vega",-618853479,null);Uzb=new $APP.G(null,"bins","bins",1670395210);Xzb=new $APP.G(null,"interpolate","interpolate",798572493);
pzb=new $APP.G(null,"$schema","$schema",1635092088);cAb=new $APP.G(null,"band","band",-770104117);Bzb=new $APP.G(null,"plot-range","plot-range",-1426783143);lzb=new $APP.G(null,"actions","actions",-812656882);tzb=new $APP.G(null,"axes","axes",1970866440);Nzb=new $APP.G(null,"hover","hover",-341141711);Vzb=new $APP.G(null,"automatic","automatic",104479799);C8=new $APP.G(null,"scale","scale",-230427353);Hzb=new $APP.G(null,"plot-size","plot-size",1218885548);L8=new $APP.G(null,"enter","enter",1792452624);
Wzb=new $APP.G(null,"normalise","normalise",-1794807087);izb=new $APP.G(null,"signalListeners","signalListeners",708658415);Szb=new $APP.G(null,"normalize","normalize",-1904390051);K8=new $APP.G(null,"encode","encode",-1753429702);Tzb=new $APP.G(null,"fill-opacity","fill-opacity",-537571170);Qzb=new $APP.G(null,"plot-points","plot-points",-1364232040);Ezb=new $APP.G(null,"joined","joined",-231861661);nzb=new $APP.G(null,"editor","editor",-989377770);
Kzb=new $APP.G(null,"strokeOpacity","strokeOpacity",-565583263);H8=new $APP.G(null,"domain","domain",1847214937);Gzb=new $APP.G(null,"x-title","x-title",698054088);G8=new $APP.G(null,"zero","zero",-858964576);Dzb=new $APP.G(null,"aspect-ratio","aspect-ratio",1674013504);Lzb=new $APP.G(null,"fillOpacity","fillOpacity",619211981);Mzb=new $APP.G(null,"shape","shape",1190694006);uzb=new $APP.G(null,"orient","orient",1933743565);B8=new $APP.G(null,"y","y",-1757859776);A8=new $APP.G(null,"x","x",2099068185);
rzb=new $APP.G(null,"values","values",372645556);xzb=new $APP.G(null,"nice","nice",1404040504);$APP.jr("ui-vega");var czb=$APP.sD(450,{});var hzb=$APP.sD(468,{});var dAb=$APP.sD(469,{});$APP.sD(470,{});var dzb=$APP.sD(471,{});var gzb=new $APP.h(null,6,[$APP.IV,"quartz",$APP.fo,new $APP.h(null,1,[$APP.IV,"dark"],null),Nzb,!0,$APP.kJ,600,$APP.BS,600,$APP.kW,5],null);var bzb=$APP.oS.G(!0),kzb=(new dAb.Handler).call,O8=function O8(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=1<c.length?new $APP.Ee(c.slice(1),0,null):null;return O8.K(arguments[0],c)};O8.K=function(a,b){return $APP.Kj.K($APP.D(["tooltip: ",$APP.KU.G(b)]))};O8.aa=1;O8.ca=function(a){var b=$APP.v(a);a=$APP.z(a);return this.K(b,a)};
var z8=function z8(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=0<c.length?new $APP.Ee(c.slice(0),0,null):null;return z8.K(c)};z8.K=function(a){return $APP.Kj.K($APP.D(["vega spec parse error: ",a]))};z8.aa=0;z8.ca=function(a){return this.K($APP.u(a))};var jzb=new $APP.h(null,1,[$APP.fo,O8],null);var P8=function P8(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=0<c.length?new $APP.Ee(c.slice(0),0,null):null;return P8.K(c)};P8.K=function(a){var b=$APP.v(a),c=$APP.ng(b);b=$APP.E.F(c,$APP.kJ);var d=$APP.E.F(c,$APP.BS),e=$APP.E.F(c,$APP.kW),f=$APP.E.F(c,E8);c=$APP.E.F(c,tzb);var k=$APP.Wj.F($APP.M,$APP.Li.F($APP.mo,a));a=$APP.Wj.F($APP.M,$APP.Li.F(J8,a));return new $APP.h(null,7,[$APP.kJ,b,$APP.BS,d,$APP.kW,e,E8,f,tzb,c,$APP.mo,k,J8,a],null)};P8.aa=0;
P8.ca=function(a){return this.K($APP.u(a))};$APP.Fla=function(){function a(c,d,e){var f=null;if(2<arguments.length){f=0;for(var k=Array(arguments.length-2);f<k.length;)k[f]=arguments[f+2],++f;f=new $APP.Ee(k,0,null)}return b.call(this,c,d,f)}function b(c,d,e){return M8(Rzb($APP.Oi.K(N8(e),$APP.gR,c,$APP.D([$APP.B1,d]))))}a.aa=2;a.ca=function(c){var d=$APP.v(c);c=$APP.z(c);var e=$APP.v(c);c=$APP.Ie(c);return b(d,e,c)};a.K=b;return a}();
$APP.Cla=function(){function a(c,d){var e=null;if(1<arguments.length){e=0;for(var f=Array(arguments.length-1);e<f.length;)f[e]=arguments[e+1],++e;e=new $APP.Ee(f,0,null)}return b.call(this,c,e)}function b(c,d){return M8(Ozb($APP.Oi.J(N8(d),$APP.mo,c)))}a.aa=1;a.ca=function(c){var d=$APP.v(c);c=$APP.Ie(c);return b(d,c)};a.K=b;return a}();
$APP.Dla=function(){function a(c,d,e){var f=null;if(2<arguments.length){f=0;for(var k=Array(arguments.length-2);f<k.length;)k[f]=arguments[f+2],++f;f=new $APP.Ee(k,0,null)}return b.call(this,c,d,f)}function b(c,d,e){c=$APP.Oi.K(N8(e),bAb,c,$APP.D([rzb,d]));var f=$APP.ng(c);e=$APP.E.J(f,Bzb,new $APP.I(null,2,5,$APP.J,[$APP.$N,$APP.$N],null));c=$APP.E.F(f,Czb);var k=$APP.E.J(f,Dzb,1.618),l=$APP.E.F(f,$APP.M0);d=$APP.E.F(f,Gzb);var q=$APP.E.J(f,Hzb,400),p=$APP.E.F(f,bAb),w=$APP.E.J(f,$APP.WS,1),x=$APP.E.F(f,
rzb);f=$APP.n.G($APP.Qs());k=qzb(q,k);p=szb(f,$APP.Li.J($APP.Xj,p,x));l=new $APP.h(null,1,[J8,new $APP.I(null,1,5,$APP.J,[new $APP.h(null,3,[$APP.jm,"rect",$APP.oZ,new $APP.h(null,1,[$APP.mo,f],null),K8,new $APP.h(null,3,[L8,new $APP.h(null,4,[A8,new $APP.h(null,2,[C8,"x",$APP.Qy,"x"],null),$APP.kJ,new $APP.h(null,3,[C8,"x",cAb,1,$APP.ou,-1],null),B8,new $APP.h(null,2,[C8,"y",$APP.Qy,"y"],null),$APP.Q6a,new $APP.h(null,2,[C8,"y",$APP.DA,0],null)],null),$APP.YMa,new $APP.h(null,2,[$APP.To,new $APP.h(null,
1,[$APP.DA,$APP.m(l)?l:"steelblue"],null),$APP.WS,new $APP.h(null,1,[$APP.DA,w],null)],null),Nzb,new $APP.h(null,1,[$APP.To,new $APP.h(null,1,[$APP.DA,"#FF29D2"],null)],null)],null)],null)],null)],null);e=new $APP.h(null,1,[E8,new $APP.I(null,2,5,$APP.J,[new $APP.h(null,4,[$APP.Q,"x",$APP.jm,"band",F8,"width",H8,D8(f,$APP.v(e),"x")],null),new $APP.h(null,4,[$APP.Q,"y",F8,"height",xzb,!0,H8,D8(f,$APP.bf(e),"y")],null)],null)],null);c=I8($APP.D([k,p,l,e,wzb(d,c)]));return M8(c)}a.aa=2;a.ca=function(c){var d=
$APP.v(c);c=$APP.z(c);var e=$APP.v(c);c=$APP.Ie(c);return b(d,e,c)};a.K=b;return a}();$APP.Ela=function(){function a(c,d){var e=null;if(1<arguments.length){e=0;for(var f=Array(arguments.length-1);e<f.length;)f[e]=arguments[e+1],++e;e=new $APP.Ee(f,0,null)}return b.call(this,c,e)}function b(c,d){return M8(Yzb($APP.Oi.J(N8(d),$APP.mo,c)))}a.aa=1;a.ca=function(c){var d=$APP.v(c);c=$APP.Ie(c);return b(d,c)};a.K=b;return a}();
$APP.Gla=function(){function a(c,d){var e=null;if(1<arguments.length){e=0;for(var f=Array(arguments.length-1);e<f.length;)f[e]=arguments[e+1],++e;e=new $APP.Ee(f,0,null)}return b.call(this,c,e)}function b(c,d){return M8(Pzb($APP.Oi.J(N8(d),$APP.mo,c)))}a.aa=1;a.ca=function(c){var d=$APP.v(c);c=$APP.Ie(c);return b(d,c)};a.K=b;return a}();$APP.mq=function mq(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=0<c.length?new $APP.Ee(c.slice(0),0,null):null;return mq.K(c)};
$APP.mq.K=function(a){a=$APP.Ch.F($APP.dh,$APP.Li.F($zb,a));return M8($APP.Wj.F(P8,a))};$APP.mq.aa=0;$APP.mq.ca=function(a){return this.K($APP.u(a))};$APP.qq=function qq(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=1<c.length?new $APP.Ee(c.slice(1),0,null):null;return qq.K(arguments[0],c)};$APP.qq.K=function(a,b){var c=$APP.ng(a);a=$APP.E.J(c,$APP.bVa,2);c=$APP.E.J(c,$APP.sS,"orange");return $APP.Ch.F($APP.jf(new $APP.I(null,2,5,$APP.J,[$APP.dJ,new $APP.h(null,1,[$APP.iJ,new $APP.h(null,3,[$APP.SS,$APP.kfa,$APP.rZ,aAb(a),$APP.sS,c],null)],null)],null),new $APP.h(null,1,[$APP.vS,!0],null)),b)};
$APP.qq.aa=1;$APP.qq.ca=function(a){var b=$APP.v(a);a=$APP.z(a);return this.K(b,a)};$APP.or();
}).call(this);